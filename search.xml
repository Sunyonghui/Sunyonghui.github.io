<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è€å¸æœºå¸¦ä½ å­¦ä¹ åƒä»½æŠ€æœ¯ç®€å†çš„ç§˜ç±ã€æ›´æ–¹ä¾¿çš„é˜…è¯»è§†è§’ã€‘]]></title>
    <url>%2FPerceptionWork%2FTechnicalResume.html</url>
    <content type="text"><![CDATA[å…ˆç©ä¸ªå°æ¸¸æˆï¼Œå¦‚æœä½ åœ¨å†™ç®€å†æ—¶ä¹Ÿé‡åˆ°äº†ç›¸åŒçš„æƒ…å†µï¼Œè¯·æ‰“å‹¾ï¼š [ ] 1. ä¸çŸ¥é“æ‹›è˜ä¼ä¸šæœ€çœ‹é‡ä»€ä¹ˆï¼Œå­¦å†ã€æŠ€æœ¯ã€è¿˜æ˜¯é¡¹ç›®ï¼Ÿ [ ] 2. ä¹ æƒ¯æŠŠå·¥ä½œå¹´é™å†™é•¿ï¼Œæ¯”å¦‚2016å¹´æ¯•ä¸šè¦å†™2å¹´å·¥ä½œç»éªŒã€‚ [ ] 3. Javaã€Pythonã€C/C++ç­‰æŠ€èƒ½ï¼Œä¸ç®¡ç†Ÿä¸ç†Ÿï¼Œéƒ½è¦å†™â€œç²¾é€šâ€ã€‚ [ ] 4. é¡¹ç›®ç»å†ã€å·¥ä½œç»å†å‡ ç¬”å¸¦è¿‡æˆ–å•°å•°å—¦å—¦ã€‚ [ ] 5. è§‰å¾—æŠ€æœ¯ç®€å†å’Œæ™®é€šç®€å†æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œç…§ç€æ¨¡æ¿å†™å°±å¥½äº†ã€‚ [ ] 6. æ¯æ¬¡é¢è¯•å®˜æœ€åè¯´â€œä½ æœ‰ä»€ä¹ˆè¦é—®çš„å—â€ï¼Œéƒ½è§‰å¾—ç‰¹åˆ«å°´å°¬ã€‚ å‹¾0-1æ¡ï¼Œè¯·ç‚¹å·¦ä¸Šæ–¹çš„å‰å·ï¼Œå…³æ‰è¿™ä¸ªé¡µé¢ã€‚ å‹¾2-3æ¡ï¼Œä½ ä¹‹å‰çš„ç®€å†å¯èƒ½æ˜¯åœ¨è‡ªå—¨ï¼Œéœ€è¦ä¸€ç‚¹è§£è¯ã€‚ å‹¾4-6æ¡ï¼Œé‡åº¦æ‚£è€…ï¼Œè¯·ä»”ç»†æ¶ˆåŒ–ä¸‹é¢çš„å†…å®¹ã€‚ å…¶å®ï¼Œä¸Šé¢çš„å‡ ç§æƒ…å†µï¼Œå¤§éƒ¨åˆ†äººå†™ç®€å†å’Œæ±‚èŒæ—¶éƒ½ä¼šé‡åˆ°ã€‚ æœ‰çš„äººä¸äº†è§£é¢è¯•å®˜çš„éœ€æ±‚ï¼Œæƒ³æŠŠç®€å†å†™å¾—é¢é¢ä¿±åˆ°ï¼Œå†™å®Œå´æ˜¯æ¯«æ— é‡ç‚¹ï¼Œä¸”ä¸è‡ªçŸ¥ï¼Œæœ€ç»ˆç®€å†çŸ³æ²‰å¤§æµ·ï¼› æœ‰çš„äººæƒ³åœ¨ç®€å†ä¸­å‘ˆç°æ›´å¥½çš„è‡ªå·±ï¼Œä¸ç®¡è¿™ä¸ªâ€œè‡ªå·±â€æ˜¯ä¸æ˜¯çœŸå®çš„ï¼šæŠŠå·¥ä½œå¹´é™åŠ é•¿ã€æŠŠæŠ€èƒ½å…¨å†™æˆç²¾é€šã€‚è¿™ç§è‡ªå—¨åªèƒ½æ¢æ¥é¢è¯•æ—¶çš„å°´å°¬ï¼› æœ‰çš„äººæŠ€æœ¯å¼ºï¼Œè‚¯åŠªåŠ›ï¼Œå´æ€€æ‰ä¸é‡ï¼Œæ‰¾ä¸åˆ°ä¸€æ¡æ›´æœ‰æ•ˆçš„æ¸ é“ï¼Œè®©æ›´å¤šå¤§å…¬å¸äº†è§£åˆ°è‡ªå·±ï¼Œå°±é”™è¿‡äº†å¾ˆå¤šä¸Šå‡æœºä¼šã€‚å…¶å®è¿™ä¹Ÿæ˜¯å¯ä»¥æ”¹å–„çš„ã€‚ è¿™ç¯‡æ–‡ç« ï¼Œå°±æ•™ä½ å¦‚ä½•èº²è¿‡è¿™äº›ç®€å†ä¸­å¸¸è§çš„â€œå‘â€ã€‚å†™ä¸€ä»½è®©é¢è¯•å®˜å–œæ¬¢ã€åˆçœŸå®çš„æŠ€æœ¯ç®€å†ã€‚ å¦‚æœä½ æ˜¯åœ¨æ ¡ç”Ÿï¼Œä½ æ›´è¯¥å¥½å¥½çœ‹çœ‹è¿™ç¯‡æ–‡ç« ã€‚å®ƒå°†è®©ä½ æ¯•ä¸šæ—¶å·²ç»æ‹¥æœ‰ä¸€ä»½æœ€å¥½çš„æŠ€æœ¯ç®€å†ã€‚ ï¼ˆæœ¬æ–‡å†…å®¹æ•´ç†è‡ªã€Œ ç™¾æ¥¼ä¿±ä¹éƒ¨æŠ€æœ¯åˆ†äº«ç¬¬ä¸€æœŸâ€”â€”å¦‚ä½•å‡†å¤‡æŠ€æœ¯ç®€å† ã€ï¼Œåˆ†äº«äººæ˜¯å®éªŒæ¥¼CEOçŸ³å¤´å±±ã€‚ ã€Œ ç™¾æ¥¼ä¿±ä¹éƒ¨ ã€é¡¾åæ€ä¹‰ï¼Œæ˜¯å®éªŒæ¥¼100æ¥¼ä»¥ä¸Šçš„ç”¨æˆ·ç»„æˆçš„ç¾¤ä½“ï¼Œé™¤äº†å®šæœŸçš„æŠ€æœ¯åˆ†äº«å¤–ï¼Œè¿˜æœ‰å…¶ä»–ç¦åˆ©ï¼Œæ¬¢è¿å¤§å®¶çˆ¬æ¥¼åŠ å…¥ã€‚ï¼‰ ç®€ä»‹åˆ†äº«äººï¼šçŸ³å¤´å±± ï¼ˆå®éªŒæ¥¼CEOï¼Œæ›¾ä»»èŒäºVMwareã€Intelç­‰çŸ¥åå¤–ä¼ï¼Œæœ‰9å¹´ç ”å‘å’Œç®¡ç†ç»éªŒï¼Œç­›é€‰è¿‡æ•°åƒä»½ç®€å†ï¼Œé¢è¯•è¿‡æ•°ç™¾åæŠ€æœ¯äººå‘˜ï¼Œæ·±çŸ¥ç®€å†å’Œé¢è¯•çš„â€œå¥—è·¯â€ï¼Œå°†å¸¦ä½ ä»é¢è¯•å®˜çš„è§’åº¦ï¼Œäº†è§£ä»€ä¹ˆæ ·çš„ç®€å†æ‰æ˜¯å—äººæ¬¢è¿çš„ã€‚ï¼‰ 01 â€œ æœ¬æ–‡ä¸é€‚åˆè€å¸æœºâ€¦ â€ä»Šå¤©çš„è¯é¢˜æ—¶å¦‚ä½•å‡†å¤‡æŠ€æœ¯ç®€å†ã€‚æˆ‘ä¸ªäººå› ä¸ºåœ¨æŠ€æœ¯å…¬å¸ï¼ŒåŒ…æ‹¬ä¸€äº›å¤–ä¼æœ‰è¿‡å¾ˆå¤šç»éªŒï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå’Œå¤§å®¶åˆ†äº«ä¸€äº›æƒ³æ³•å’Œç»éªŒã€‚ å¯¹äºè¿™ä¸ªè¯é¢˜ï¼Œæˆ‘ä»¬é¢å‘çš„è¯»è€…æ˜¯é¢å‘äº’è”ç½‘è¡Œä¸šæˆ–è½¯ä»¶è¡Œä¸šæ±‚èŒçš„äººï¼Œè€Œä¸”ä¸»è¦æ˜¯åº”å±Šç”Ÿå’Œæ¯•ä¸šä¸‰å¹´ä»¥å†…çš„æ±‚èŒè€…ã€‚å› ä¸ºå¯¹äºç»éªŒä¸°å¯Œçš„æ±‚èŒè€…ï¼Œä»–ä»¬çš„æ‹›è˜æ–¹å¼å¯èƒ½ä¼šå·®å¼‚éå¸¸å¤§ã€‚æ¯”æ–¹è¯´ï¼Œä»–å¯¹ç®€å†çš„é‡è§†ç¨‹åº¦ä¼šè¶Šæ¥è¶Šä½ï¼Œæ›´å¤šä¾é çš„æ˜¯è¡Œä¸šå†…çš„çŸ¥ååº¦ï¼Œå’Œå…¬å¸å†…éƒ¨é«˜çº§å·¥ç¨‹å¸ˆçš„å¼•èã€‚ å› ä¸ºæˆ‘ä¸ªäººç¼ºå°‘å¤§å‹å›½ä¼ã€ä¼ ç»Ÿè¡Œä¸šçš„ç»éªŒï¼Œæ‰€ä»¥è¯´è¿™ä¸ªè¯é¢˜éš¾å…ä¸å…¨é¢ï¼Œè¯·å¤§å®¶è§è°…ã€‚ 02 â€œ åŸºæœ¬ä¿¡æ¯é‚£ä¹ˆç®€å•å—ï¼Ÿâ€é¦–å…ˆæ˜¯åŸºæœ¬ä¿¡æ¯ï¼Œå¤§å®¶è‚¯å®šéƒ½ä¼šå†™åˆ°ã€‚åŒ…æ‹¬ï¼š å§“å å¹´é¾„ å·¥ä½œå¹´é™ å­¦å† åŸå¸‚ è”ç³»æ–¹å¼ï¼šæ‰‹æœº + é‚®ç®± è¿™é‡Œè¿˜æœ‰å‡ é¡¹éœ€è¦æ³¨æ„çš„ï¼š é¦–å…ˆåœ¨åŸºæœ¬ä¿¡æ¯é‡Œé¢ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œæœ‰å¾ˆå¤šåŒå­¦ä¼šæ•…æ„åœ°æŠŠè‡ªå·±çš„å·¥ä½œå¹´é™å†™å¾—å¾ˆé•¿ã€‚æ¯”å¦‚16å¹´æ¯•ä¸šï¼Œè‡ªå·±ä¼šé€‰æ‹©æ€§åœ°å†™æˆä¸¤å¹´ç”šè‡³ä¸‰å¹´çš„å·¥ä½œç»éªŒã€‚æˆ‘è¦è®²çš„æ˜¯ï¼Œè¿™æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦ã€‚ å› ä¸ºé¦–å…ˆï¼Œè¿™ä¼šè®©æ‹›è˜è€…å¾ˆç–‘æƒ‘ï¼Œä½ å‰é¢çš„è¿™äº›å·¥ä½œç»éªŒæ˜¯å“ªé‡Œæ¥çš„ï¼Ÿå½“ç„¶å¤§éƒ¨åˆ†å¯èƒ½æ˜¯æŠŠå®ä¹ ç»éªŒç®—æˆå·¥ä½œç»éªŒäº†ï¼Œä½†å®é™…ä¸Šåˆ°é¢è¯•é˜¶æ®µè¿˜æ˜¯ä¼šæŠŠè¿™éƒ¨åˆ†æŠ›é™¤æ‰çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›çš„åŸåˆ™æ˜¯å°½å¯èƒ½åœ°å®äº‹æ±‚æ˜¯ï¼Œä¸è¦è™šæŠ¥ã€‚ä¸è¦æŠŠè‡ªå·±çš„æ¯•ä¸šå¹´é™æ•…æ„æå‰ï¼Œæ¥å¢åŠ è‡ªå·±çš„å·¥ä½œå¹´é™ã€‚å“ªæ€•è¿™ä¼šå¸®ä½ è¿‡ç®€å†è‡ªåŠ¨ç­›é€‰çš„è¿‡ç¨‹ï¼Œåˆ°äººå·¥ç­›é€‰æˆ–é¢è¯•æ—¶ï¼Œä»æœ‰å¾ˆå¤§çš„å¯èƒ½ä¼šè¢«ç­›æ‰ã€‚ å¦å¤–ï¼Œå¯¹äºä¸€äº›è½¬è¡Œçš„æœ‹å‹ï¼Œå¦‚æœä½ åŸæ¥ä¸æ˜¯åšè®¡ç®—æœºè¿™ä¸€è¡Œçš„ï¼Œå¹¶ä¸”å’Œè®¡ç®—æœºè¡Œä¸šç›¸å·®éå¸¸å¤šï¼Œæ¯”æ–¹è¯´æ±½è½¦ç»´ä¿®ï¼Œé‚£å°±ç®€å•çš„ä¸€å¥è¯æ¦‚è¿‡å°±å¯ä»¥äº†ã€‚åªæ˜¯ä¸ºäº†è®©ä½ çš„æ‹›è˜æ–¹çŸ¥é“ï¼Œä½ æ¯•ä¸šä»¥åå‰å‡ å¹´å¹¶ä¸æ˜¯åœ¨ä»äº‹è®¡ç®—æœºè¡Œä¸šï¼Œç„¶åæŠŠè‡ªå·±åœ¨è®¡ç®—æœºè¡Œè¡Œä¸šå†…çš„å·¥ä½œç»éªŒã€å·¥ä½œå¹´é™å†™æ¸…æ¥šå°±å¯ä»¥äº†ã€‚ è”ç³»æ–¹å¼çš„è¯ï¼Œæ‰‹æœºå·è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œé‚®ç®±å°½å¯èƒ½åœ°ç”¨ä¸€äº›å¸¸ç”¨çš„é‚®ç®±ã€‚å¦‚æœä½ æœ‰è‡ªå·±çš„ä¸ªäººç½‘ç«™ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨è‡ªå·±ä¸ªäººç½‘ç«™çš„é‚®ç®±ã€‚ä½†æ˜¯å‘¢ï¼Œé‚®ç®±çš„åç§°å°½å¯èƒ½è¦ç®€çŸ­å¥½è®¤ï¼Œæ¯”å¦‚1å’ŒLæ··åˆåœ¨ä¸€èµ·çš„é‚£ç§é‚®ç®±åœ°å€ï¼Œçœ‹èµ·æ¥æ˜¯éå¸¸ç—›è‹¦çš„ã€‚ 03 â€œ å·¥ä½œã€å®ä¹ ç»å†ï¼Œç›¸å½“é‡è¦ â€ç®€å†çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œå°±æ˜¯å·¥ä½œå’Œå®ä¹ ç»å†ã€‚ å…¬å¸åç§° èŒä½ æ—¶é—´ è¯¦ç»†å·¥ä½œ è¿™éƒ¨åˆ†ç›¸å½“é‡è¦ã€‚æ— è®ºæ˜¯åº”å±Šæ¯•ä¸šç”Ÿï¼Œè¿˜æ˜¯å·¥ä½œè¿‡å‡ å¹´çš„ã€æœ‰ç»éªŒçš„ï¼Œå…¶å®æ‹›è˜æ–¹æœ€çœ‹é‡çš„å°±æ˜¯è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹ã€‚ åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œè‡³å°‘ä½ è¦è¯æ˜ä½ åœ¨å…ˆå‰çš„å®ä¹ æˆ–è€…å·¥ä½œä¸­ï¼Œæœ‰éå¸¸å¤šæ”¶è·ï¼Œæœ‰å¯¹ä½ ä¸ªäººçš„æˆé•¿éå¸¸æœ‰å¸®åŠ©çš„ç»å†ã€‚è¿™æ ·çš„ç»å†æ˜¯æœ€æœ‰ä»·å€¼çš„ã€‚ å¦å¤–å·¥ä½œç»éªŒè¦å°½å¯èƒ½åœ°é¿å…æ–­æ¡£ã€‚å¦‚æœæœ‰æ–­æ¡£çš„è¯ï¼Œåœ¨ä½ é¢è¯•çš„æ—¶å€™è‚¯å®šä¼šé—®åˆ°ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„è§£é‡Šã€‚æ¯”æ–¹è¯´ä½ ä¸­é—´æ˜¯å‡ºå›½è¯»ä¹¦äº†ï¼Œæˆ–è€…å“ªç§æƒ…å†µï¼Œç„¶åæœ‰ä¸€ä¸¤å¹´çš„æ–­æ¡£ï¼Œè¿™ä¸ªæ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚ ç¬¬äºŒç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œä¸€ä¸ªå…¬å¸åªéœ€è¦å†™ä¸€æ ã€‚åœ¨è¿™ä¸€æ ä¸‹ï¼Œä½ å¯ä»¥åˆ—å‡ºä¸€ã€äºŒã€ä¸‰ã€å››çš„è¿™ç§æ¡ç›®ï¼Œè¯¦ç»†ä»‹ç»åœ¨è¿™ä¸ªå…¬å¸ä¸­ï¼Œä½ æ‰€ä»äº‹çš„äº‹æƒ…ä»¥åŠå­¦åˆ°çš„æŠ€æœ¯ã€‚ä½†æ˜¯è¦é¿å…ä¸€ä¸ªå…¬å¸å†™å¾ˆå¤šæ ï¼Œå“ªæ€•ä½ åœ¨è¿™å…¬å¸é‡Œçš„èŒåŠ¡æœ‰äº›å˜åŒ–ï¼Œä½ å¯ä»¥åªå†™ä¸€ä¸ªæœ€é‡è¦èŒåŠ¡ï¼Œæˆ–è€…ä¸€ä¸ªæœ€é«˜çº§çš„èŒåŠ¡ã€‚ å¯¹äºå·¥ä½œçš„æè¿°ï¼Œéœ€è¦è¯¦ç»†åœ°ä»‹ç»è‡ªå·±æ›¾ç»å¼€å‘çš„äº§å“ï¼Œä»¥åŠå¼€å‘è¿™ä¸ªäº§å“ä¸­é—´ç”¨åˆ°çš„ä¸€äº›æŠ€æœ¯ï¼Œè´Ÿè´£çš„ä»»åŠ¡ï¼Œå¹¶ä¸”è¦æ ‡æ˜æ˜¯å¦å¸¦è¿‡å›¢é˜Ÿã€å¸¦å›¢é˜Ÿçš„è§„æ¨¡æ˜¯å¤šå°‘ä¸ªäººã€è¿™ä¸ªé¡¹ç›®çš„æ˜¯å¦è‡ªå·±ç‹¬ç«‹å®Œæˆã€æˆ–è€…ä¸¤ä¸ªäººåä½œå®Œæˆä¸­ä½ æ‰€å¤„çš„è§’è‰²ï¼Œè¿™ä¸ªæ˜¯éå¸¸ç»†èŠ‚çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¸€å®šè¦å†™å¾—æ¸…æ¥šä¸€äº›ã€‚ä¸éœ€è¦å¤ªå•°å—¦ï¼Œä½†æ˜¯æ¯ä¸€ç‚¹ä¸€å®šè¦ç‚¹åˆ°ä½ã€‚ æœ€åä¸€ç‚¹å°±æ˜¯åˆšæ‰ä¹Ÿæåˆ°çš„ï¼ŒæŠŠæ¯ä¸€é¡¹ä»¥ä¸€ä¸ªç®€çŸ­çš„æ¡ç›®ä¸€äºŒä¸‰å››æ ‡å‡ºæ¥ã€‚è¿™æ ·èƒ½è®©å¯¹æ–¹éå¸¸æ¸…æ™°åœ°çœ‹åˆ°ï¼Œä½ æ‰€æ”¶è·åˆ°çš„ä¸€äº›å…³é”®ç‚¹ï¼Œèƒ½å¤ŸæŠ“ä½ä»–ä»¬çš„çœ¼çƒã€‚ åœ¨æè¿°é¡¹ç›®ä¸­çš„æ—¶å€™ï¼Œå°½å¯èƒ½å¤šçš„ä½¿ç”¨ä¸€äº›å…³é”®å­—ï¼Œä¸€äº›æŠ€æœ¯çš„å…³é”®å­—ã€‚æ¯”æ–¹è¯´ï¼Œè¿™ä¸ªé¡¹ç›®ä¸­æˆ‘ç”¨åˆ°äº†Mongo DBã€Laravelï¼Œæˆ–æ˜¯å‰åç«¯å¸¸ç”¨çš„ä¸€äº›æ¡†æ¶ï¼Œç„¶åæŠŠå®ƒå†™åˆ°è¿™ä¸ªé¡¹ç›®æè¿°ä¸­ã€‚ è€Œå¯¹äºåº”å±Šç”Ÿæ¥è¯´çš„è¯ï¼Œå¦‚æœæ²¡æœ‰å·¥ä½œç»éªŒï¼Œå®ä¹ ç»éªŒå°±éå¸¸éå¸¸å®è´µäº†ã€‚å› ä¸ºç›®å‰ç»å¤§éƒ¨åˆ†çš„å…¬å¸ï¼Œå…¶å®éƒ½ç›¸å¯¹åŠŸåˆ©ï¼Œå¸Œæœ›è‡ªå·±æ‹›è˜æ¥çš„åº”å±Šç”Ÿèƒ½å¤Ÿç›´æ¥ä¸Šæ‰‹ï¼Œå°½å¯èƒ½åœ°å¿«é€Ÿèå…¥è‡ªå·±çš„å›¢é˜Ÿï¼Œå½¢æˆæˆ˜æ–—åŠ›ã€‚çœŸæ­£è¯´å¸Œæœ›æ‹¿è¿‡æ¥åŸ¹å…»ä¸€åˆ°ä¸¤å¹´çš„å…¬å¸ï¼Œåº”è¯¥æ˜¯è§„æ¨¡éå¸¸å¤§çš„ä¼ä¸šï¼Œå±äºæ¯”è¾ƒå°‘è§çš„ä¸€ç§æƒ…å†µã€‚ 04 â€œ ä»€ä¹ˆæ ·çš„é¡¹ç›®ç»å†è®©äººä¿¡æœï¼Ÿ â€ç¬¬ä¸‰éƒ¨åˆ†é€šå¸¸æ˜¯é¡¹ç›®ç»å†ï¼Œåˆ†ä¸ºï¼š é¡¹ç›®åç§° é¡¹ç›®æè¿° æ‰¿æ‹…çš„èŒè´£ ç”¨åˆ°çš„æŠ€æœ¯ å®ç°çš„æ•ˆæœ é¡¹ç›®ç»å†ï¼Œä¸€èˆ¬ä¼šæŠŠè‡ªå·±å…ˆå‰çš„å·¥ä½œæˆ–è€…å®ä¹ ï¼Œä»¥åŠåœ¨å­¦æ ¡å®éªŒå®¤è·Ÿè€å¸ˆåšçš„é¡¹ç›®ï¼Œåšä¸€äº›æå–ã€‚é€‰å–å…¶ä¸­æœ€å¥½çš„é¡¹ç›®ï¼Œæœ€èƒ½å¤Ÿä»£è¡¨è‡ªå·±çœŸå®æ°´å¹³çš„ã€‚åƒä¸€äº›è¯¾ç¨‹çš„å¤§ä½œä¸šï¼Œå…¶å®æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦è´´ä¸Šå»çš„ã€‚å½“ç„¶ï¼Œå¦‚æœè¿™ä¸ªå¤§ä½œä¸šçš„ä»£ç é‡éå¸¸å¤§ï¼Œå¹¶ä¸”æœ‰ä¸€å®šçš„çŸ¥ååº¦çš„è¯ä¹Ÿå¯ä»¥ã€‚ ä¸€äº›æƒ…å†µä¸‹ï¼Œé¡¹ç›®ç»éªŒå’Œå·¥ä½œç»éªŒæ˜¯å¯ä»¥åˆå¹¶åˆ°ä¸€èµ·çš„ã€‚æ¯”å¦‚ä½ å·¥ä½œç»å†éå¸¸ä¸°å¯Œï¼Œæ¯ä¸€ä»½å·¥ä½œçš„é¡¹ç›®ä¹Ÿéå¸¸æ˜ç¡®ï¼Œé‚£å®Œå…¨å¯ä»¥å°†è¿™ä¸¤é¡¹å†…å®¹åˆåœ¨ä¸€èµ·ã€‚ç„¶åå¯¹äºåº”å±Šç”Ÿï¼Œå¦‚æœå·¥ä½œç»å†å’Œå®ä¹ ç»å†éƒ½æ²¡æœ‰ï¼Œé¡¹ç›®ç»å†ä¸€å®šè¦å†™å¾—éå¸¸ç²¾é€‰ã€‚ åœ¨é¡¹ç›®çš„æè¿°ä¸­ï¼Œæˆ‘ä»¬æœ€çœ‹é‡çš„å°±æœ‰ä¸‰ç‚¹ã€‚ è¿™ä¸ªé¡¹ç›®è·Ÿåº”è˜çš„èŒä½ä¹‹é—´çš„å…³è”æ€§ã€‚ è¿™ä¸ªé¡¹ç›®åœ¨æ•´ä¸ªæŠ€æœ¯åœˆå†…çš„çŸ¥ååº¦ã€‚ æœ€åå°±æ˜¯è¿™ä¸ªé¡¹ç›®æ˜¯å¦æœ‰ä¸€äº›æ•°æ®ï¼Œå¯ä»¥è¯æ˜ä½ åšåˆ°äº†ï¼Œå¹¶ä¸”è®©ä½ æœ‰æ‰€æ”¶è·ã€‚ å›åˆ°åˆšæ‰çš„é¡¹ç›®ç»éªŒï¼Œå…¶å®æˆ‘ä»¬æ˜¯éœ€è¦è¯æ®çš„ï¼Œè€Œæœ€å¥½çš„è¯æ®å°±æ˜¯ä½ GitHubçš„ä»£ç é“¾æ¥ï¼Œæˆ–è€…æ˜¯ä½ è¿™ä¸ªé¡¹ç›®çš„ä¸€ä¸ªçº¿ä¸Šç‰ˆæœ¬â€”â€”æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªç½‘ç«™ï¼Œæœ‰å¯èƒ½æ˜¯ä½ å±•ç¤ºçš„ä¸€ä¸ªdemoã€‚åªè¦æœ‰è¿™æ ·çš„æ•ˆæœï¼Œå¯¹äºå®¡æ ¸ç®€å†çš„äººæ¥è¯´ï¼Œä»–ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥è¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ°´å¹³ï¼Œæ˜¯èƒ½å¢åŠ å¾ˆå¤šåˆ†çš„åŠ åˆ†é¡¹ã€‚ é€‰æ‹©ç†Ÿæ‚‰çš„é¡¹ç›®ï¼Œä¸€å®šè¦é€‰æ‹©ç†Ÿæ‚‰çš„é¡¹ç›®ã€‚åº”è¯¥è‡ªå·±å†™çš„é¡¹ç›®å¦‚æœè¿›å…¥äº†é¢è¯•ï¼Œå¾ˆæœ‰å¯èƒ½é¢è¯•å®˜çš„é—®é¢˜éƒ½æ¥è‡ªäºä½ å†™çš„é¡¹ç›®å†…å®¹ä¸­ï¼Œæ‰€ä»¥ä¸è¦å†™é‚£äº›è‡ªå·±æ¨¡æ£±ä¸¤å¯ï¼Œæˆ–è€…è¯´ä»…ä»…æ˜¯ä¸€ä¸ªæ—è§‚è€…èº«ä»½çš„é‚£ç§é¡¹ç›®ã€‚åªæ˜¯çœ‹è¿‡çš„ï¼Œæˆ–è€…æ²¡åŠæ³•æ·±å…¥è¿›å»çš„ï¼Œè¢«é—®åˆ°ä¹Ÿå¾ˆå°´å°¬ã€‚ é¡¹ç›®ç»å†è¿˜éœ€è¦æ•°æ®æ”¯æ’‘ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ ä¸ºå®éªŒæ¥¼å¼€å‘äº†ä¸€ä¸ªå®éªŒæ“ä½œçš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥æ”¯æŒ1000äººåŒæ—¶åšå®éªŒï¼Œå¹¶ä¸”å·²ç»ç¨³å®šåœ¨çº¿ä¸Šè¿è¡Œäº†å‡ å¹´ï¼Œè¿™ä¸ªå®éªŒæ“ä½œæ¨¡å—èƒ½è¾¾åˆ°å‡ ç™¾ä¸‡æ¬¡å®éªŒçš„æ£€æµ‹ã€‚è¿™å…¶å®æ˜¯éå¸¸å¥½çš„ï¼Œæœ‰ä»·å€¼çš„é¡¹ç›®ç»éªŒã€‚ å…¶å®ä¸åªæ˜¯åº”å±Šç”Ÿï¼Œæˆ‘ä»¬é¼“åŠ±æ‰€æœ‰çš„äººåœ¨ç®€å†é‡Œé¢ï¼Œå°½å¯èƒ½çš„åœ¨é¡¹ç›®ç»éªŒéƒ¨åˆ†åˆ—å‡ºè‡ªå·±æ›¾ç»å‚ä¸è¿‡çš„å¼€æºé¡¹ç›®ã€‚æ¯”æ–¹è¯´ä½ å‚ä¸è¿‡ä¸€äº›éå¸¸çŸ¥åçš„ã€åƒVIEWä¸€ç±»çš„å¼€æºé¡¹ç›®ï¼Œæäº¤è¿‡ä»£ç ã€æäº¤è¿‡PRï¼Œè¿™å…¶å®æ˜¯éå¸¸å¥½çš„å¢åˆ†é¡¹ã€‚ å¦‚æœï¼Œåº”å±Šç”Ÿæ²¡æœ‰è¿™æ–¹é¢çš„é¡¹ç›®çš„è¯ï¼Œä¹Ÿå¯ä»¥å†™ä¸€äº›å®éªŒæ¥¼çš„å¤§é¡¹ç›®ã€‚ä½†æ˜¯å‘¢ï¼Œå¦‚æœæ˜¯å•çº¯çš„å®éªŒæ¥¼çš„æ•™å­¦é¡¹ç›®ï¼Œå…¶å®æˆ‘ä»¬æ›´å¸Œæœ›ä½ èƒ½å¤Ÿåšä¸€äº›æ‰©å±•ï¼Œå°±æ˜¯åœ¨å®éªŒæ¥¼é¡¹ç›®åŸºç¡€ä¹‹ä¸Šï¼Œé¢å¤–åšäº†ä¸€äº›æ‰©å±•åŠŸèƒ½ã€‚è¿™ä¹Ÿå¯ä»¥å¸®ä½ åœ¨å‘é¢è¯•å®˜ä»‹ç»é¡¹ç›®çš„æ—¶å€™ï¼Œæ›´å¥½åœ°å±•ç¤ºè‡ªå·±çš„èƒ½åŠ›ã€‚ æœ€åä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ çš„é¡¹ç›®æè¿°ä¸€å®šè¦ä»¥éå¸¸æ ‡å‡†çš„æŠ€æœ¯è¯­è¨€æ¥å†™ã€‚ç”šè‡³è¯´ä¸€äº›æŠ€æœ¯çš„å…³é”®å­—ï¼Œè¯¥å¤§å†™çš„åœ°æ–¹ä¸€å®šè¦å¤§å†™ï¼Œè¯¥å°å†™åœ°æ–¹ä¸€å®šè¦å°å†™ã€‚è¿™å…¶å®éå¸¸ä½“ç°ä¸€ä¸ªäººä¸“ä¸šåŒ–çš„æ°´å¹³ã€‚ 05 â€œ ç²¾é€šJavaã€Pythonã€Cã€PHP = å‘µå‘µ â€ç¬¬å››éƒ¨åˆ†é€šå¸¸æ˜¯æŠ€èƒ½åˆ—è¡¨ã€‚ æ³¨æ„äº‹é¡¹ï¼š å®äº‹æ±‚æ˜¯ æ ¹æ®ç›®æ ‡èŒä½é€‚å½“è°ƒæ•´ æ•°å­—è¯æ˜ï¼š30000è¡Œä»£ç ã€3ä¸ªé¡¹ç›®-Python é¡¹ç›®è¯æ®ï¼šçˆ¬å–çŸ¥ä¹10ä¸‡ç”¨æˆ·-Python æˆ‘ä»¬åœ¨ä»‹ç»å®Œè‡ªå·±çš„é¡¹ç›®ç»å†ä¹‹åï¼Œé€šå¸¸ä¼šå†™ä¸€ä¸ªæŠ€èƒ½çš„åˆ—è¡¨ã€‚è€Œè¿™ä¸ªæŠ€èƒ½åˆ—è¡¨ï¼Œé€šå¸¸ä¼šæ ¹æ®ä½ æ‰€åº”è˜çš„èŒä½åšä¸€äº›ä¿®æ­£ã€‚ä½ å¦‚æœåº”è˜Pythonåç«¯å·¥ç¨‹å¸ˆï¼Œé‚£ä½ å°½å¯èƒ½åœ°æŠŠè‡ªå·±Pythonç›¸å…³çš„æŠ€èƒ½æ”¾åœ¨æœ€å‰é¢ã€‚è¿™äº›å…³é”®ç‚¹ï¼Œå°±èƒ½å¤ŸæŠ“ä½æ½œåœ¨é¢è¯•å®˜çš„çœ¼çƒã€‚ é¦–å…ˆéœ€è¦æ³¨æ„çš„ä»ç„¶æ˜¯å®äº‹æ±‚æ˜¯ï¼Œå°½å¯èƒ½åœ°ä¸è¦å†™ç²¾é€šè¿™ä¸¤ä¸ªå­—ï¼Œå¯ä»¥å†™ç†Ÿæ‚‰æˆ–äº†è§£ã€‚ æŠ€èƒ½åˆ—è¡¨ä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›æ•°å­—è¾…åŠ©çš„è¯æ®ã€‚æ¯”æ–¹è¯´åœ¨Pythonåå†™ä¸Šï¼šæˆ‘æ›¾ç»æœ‰3ä¸‡è¡Œä»£ç çš„ç»éªŒï¼›æ›¾ç»åšè¿‡ä¸‰ä¸ªé¡¹ç›®ï¼Œä¸‰ä¸ªé¡¹ç›®åœ¨å‰é¢çš„é¡¹ç›®ç»éªŒé‡Œä¹Ÿå¯ä»¥åšä¸€äº›éªŒè¯ã€‚æ­¤å¤–è¿˜æœ‰å…¶ä»–çš„ä¸€äº›è¯æ®ï¼Œæ¯”æ–¹è¯´æˆ‘æ›¾ç»ç”¨Pythonçˆ¬å–çŸ¥ä¹10ä¸‡ä¸ªç”¨æˆ·ï¼Œè¿™å…¶å®éƒ½æ˜¯éå¸¸å¥½çš„ã€èƒ½ä½“ç°ä½ æŠ€èƒ½æ°´å¹³çš„ä¸€äº›å·¥ä½œã€‚ 06 â€œ æ•™è‚²ç»å†ä¸­éœ€è¦è§„é¿çš„ â€æ•™è‚²ç»å†è¿™éƒ¨åˆ†ï¼Œå¥½åƒå°±æ²¡æœ‰ä»€ä¹ˆå¤ªå¤šå¯è¯´çš„ã€‚åŸºæœ¬ä¸Šä¸“ç§‘ã€æœ¬ç§‘ã€ç¡•å£«è¿™äº›è‡ªå·±å†™æ¸…æ¥šï¼Œå­¦æ ¡ã€ä¸“ä¸šã€æ—¶é—´ä¹Ÿå†™æ¸…æ¥šå°±å¯ä»¥äº†ã€‚ åŠ¡å¿…å®äº‹æ±‚æ˜¯ï¼Œæ²¡æœ‰å¿…è¦åœ¨è¿™æ–¹é¢å¼„è™šé€ å‡ã€‚å°½ç®¡å¾ˆå¤šçš„å…¬å¸å¯èƒ½ä¼šçœ‹å­¦æ ¡ï¼Œçœ‹å­¦å†ï¼Œä½†åœ¨æˆ‘çš„ç†è§£ï¼Œä»–ä»¬åªæ˜¯åœ¨é€‰æ‹©ä¸€ç§æ›´å¿«çš„ç­›é€‰æ–¹å¼ã€‚è€Œè¿™ä¸€ç‚¹ï¼Œåœ¨å®éªŒæ¥¼æˆ‘ä»¬å¹¶ä¸ä¼šç‰¹åˆ«çœ‹é‡ã€‚æˆ‘ä»¬å¯¹å­¦å†ï¼Œæˆ–è€…è¯´å­¦æ ¡ï¼Œå…¶å®å¹¶ä¸æ˜¯ç‰¹åˆ«åœ¨ä¹ã€‚æˆ‘ä»¬æ›´çœ‹é‡çš„æ˜¯ä½ å…ˆå‰çš„ä¸€äº›å·¥ä½œç»éªŒæˆ–è€…è‡ªå·±çš„é¡¹ç›®ç»éªŒï¼Œå’Œå…¶ä»–çš„ä¸€äº›è¯æ˜è‡ªå·±å®åŠ›å’Œèƒ½åŠ›çš„ä¸œè¥¿ã€‚ åœ¨æ•™è‚²ç»å†è¿™é‡Œï¼Œå¤§å®¶å°½é‡ä¸è¦ç‰¹åˆ«å¼ºè°ƒè‡ªå­¦æˆæ‰ã€‚å› ä¸ºå“ªæ€•ä½ æ²¡æœ‰ä¸Šå¤§å­¦ï¼Œæ²¡æœ‰ä¸Šå¤§ä¸“ï¼Œé«˜ä¸­æ¯•ä¸šï¼Œä½†æ˜¯è‡ªå·±å¯¹è®¡ç®—æœºéå¸¸æ„Ÿå…´è¶£ï¼Œåˆéå¸¸åŠªåŠ›ï¼Œæ˜¯å¯ä»¥æ‹¿é¡¹ç›®æ¥è¯æ˜çš„ã€‚ä½†æ˜¯ä¸è¦åœ¨è¿™é‡Œå¼ºè°ƒè‡ªå­¦æˆæ‰ï¼Œå› ä¸ºè‡ªå­¦æˆæ‰çš„æ¦‚ç‡æ˜¯éå¸¸éå¸¸ä½çš„ï¼Œå®Œå…¨é è‡ªå·±æ‹¼æï¼Œå‡ºæ¥ä¸€ä¸ªèƒ½åŠ›éå¸¸å¼ºçš„ä¸ªäººï¼Œæ˜¯éå¸¸éš¾çš„ï¼Œå¾ˆå¤šå…¬å¸å¯¹è¿™ç§å°æ¦‚ç‡æ˜¯éå¸¸æƒ§æ€•çš„ï¼ŒåŸºæœ¬ä¸Šå°±ä¼šé€‰æ‹©ç­›è¿‡ã€‚ æœ€åä¸€ç‚¹å°±æ˜¯ï¼Œå°½å¯èƒ½ä¸è¦å†™åŸ¹è®­ç­çš„ç»éªŒã€‚å› ä¸ºç›®å‰å¤§éƒ¨åˆ†çš„çº¿ä¸‹åŸ¹è®­ï¼Œéƒ½æ˜¯æ¯”è¾ƒç²—ç³™çš„ï¼Œèƒ½å¤Ÿè·å¾—çš„æŠ€èƒ½çš„æå‡ä¹Ÿæ˜¯éå¸¸æœ‰é™çš„ã€‚ 07 â€œ ä¸è¦è½»è§†é¢å¤–ä¿¡æ¯ â€ç¬¬å…­ç‚¹åŸºæœ¬ä¸Šç®€å†çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä¼šä»‹ç»å¾ˆå¤šå…¶ä»–çš„é¢å¤–ä¿¡æ¯ï¼Œæ¯”æ–¹è¯´ä¸ªäººçš„ç½‘ç«™æˆ–è€…æ˜¯GitHubçš„é“¾æ¥ã€‚è¿™é‡Œå°±æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ é¦–å…ˆä½ è‡ªå·±çš„ä¸ªäººç½‘ç«™æˆ–æŠ€æœ¯åšå®¢ï¼Œå¦‚æœå†…å®¹ä¸å¤Ÿä¸°å¯Œçš„è¯ï¼Œåªæœ‰ä¸€ä¸¤ç¯‡æ—¥å¿—è¿™ç§çš„ï¼Œå…¶å®æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦æ”¾å‡ºæ¥çš„ã€‚ ç¬¬äºŒç‚¹éœ€è¦å¼ºè°ƒçš„å°±æ˜¯ï¼ŒGitHubæ˜¯éå¸¸éå¸¸é‡è¦çš„ã€‚è‡³å°‘æˆ‘ä»¬å®éªŒæ¥¼åœ¨æ‹›è˜çš„æ—¶å€™ï¼Œä¼šé¦–å…ˆçœ‹GitHubä¸Šé¢çš„ä¸€äº›è®°å½•ï¼Œæ¯”æ–¹è¯´åŸåˆ›çš„ä»£ç é¡¹ç›®ï¼Œç”šè‡³è¯´ä»£ç çš„ä¸€äº›è§„èŒƒï¼ŒåŒ…æ‹¬æäº¤çš„ä¸€äº›è®°å½•ã€‚å¦‚æœä½ çš„GitHubä»“åº“é‡Œæ˜¯ç©ºçš„ï¼Œå¹¶ä¸”ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯forkåˆ«äººçš„ä»£ç ï¼Œé‚£å°±ä¸è¦æ”¾äº†ï¼Œå¯ä»¥é¿å…å¾ˆå¤šæ—¶é—´ä¸Šçš„æµªè´¹ã€‚ å¦‚æœä½ æœ‰å…¶ä»–åŸåˆ›çš„é¡¹ç›®ä»£ç çš„ä¸‹è½½é“¾æ¥ï¼Œå…¶å®ä¹Ÿæ˜¯å¯ä»¥æ”¾åœ¨è¿™é‡Œçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦æ‹›è˜æ–¹èŠ±å¾ˆå¤šæ—¶é—´å»æŸ¥çœ‹çš„è¯ï¼Œé€šå¸¸éƒ½ä¸ä¼šæœ‰äººçœ‹ã€‚ åœ¨åˆ—å‡ºä»»ä½•ä¸€ä¸ªé¢å¤–ä¿¡æ¯çš„æ—¶å€™ï¼ŒæŠŠå®ƒçš„äº®ç‚¹é™„åœ¨åé¢ã€‚æ¯”æ–¹è¯´ä½ è‡ªå·±çš„æŠ€æœ¯åšå®¢ï¼Œä½ å¯ä»¥å†™ä¸Šæœ‰150ç¯‡çš„æŠ€æœ¯åšæ–‡ï¼Œå½“æœˆçš„è®¿é—®é‡è¾¾åˆ°äº†100ä¸‡ã€‚è¿™æ ·å­æ˜¯é€šè¿‡æ•°å­—æ¥å¸å¼•åˆ«äººå¯¹ä½ æŠ€æœ¯åšå®¢çš„å…³æ³¨ã€‚ åœ¨æŠ€æœ¯ç®€å†é‡Œï¼ŒéæŠ€æœ¯ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”æ–¹è¯´å‚åŠ è¿‡çš„å¿—æ„¿æ´»åŠ¨ã€ç¤¾å›¢æ´»åŠ¨å•Šã€ä¸€å¾‹ä¸è¦æ”¾ï¼Œé™¤éæ˜¯æŠ€æœ¯ç¤¾å›¢ã€‚ä½†æ˜¯æŠ€æœ¯ç¤¾å›¢é™¤éå¾ˆçŸ¥åï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿä»·å€¼ä¸å¤§ã€‚ æœ€åå°±æ˜¯ï¼Œä¸è¦å†™è‡ªå·±çš„ä¸ªäººæè¿°ã€‚æŠ€æœ¯ç®€å†æ¯”è¾ƒå•çº¯ä¸€äº›ï¼Œæˆ‘ä»¬åªçœ‹é‡ä½ çš„æŠ€æœ¯æ°´å¹³ï¼Œä½ çš„é¡¹ç›®ç»éªŒã€‚å…¶ä»–çš„ä½ ä¸ªäººçš„ä¸€äº›çˆ±å¥½ï¼Œæ¯”å¦‚å–œæ¬¢ä»€ä¹ˆè¿åŠ¨ï¼Œè¿™çœŸçš„ä¸æ˜¯ç‰¹åˆ«é‡è¦ã€‚ æœ€åä¸€ç‚¹å°±æ˜¯ï¼Œå¦‚æœèŒä½æ²¡æœ‰è¦æ±‚ä½ å†™æœŸæœ›çš„è–ªèµ„ï¼Œå°±ä¸è¦å†™ï¼Œå¯ä»¥åˆ°ç°åœºå»è°ˆã€‚æœ‰å¯èƒ½ä½ å†™äº†å°±ä¼šé”™è¿‡ä¸€äº›é¢è¯•çš„æœºä¼šã€‚ 08 â€œ ç§äººå¹²è´§â€”â€”æŠ€æœ¯ç¤¾äº¤ï¼â€æœ€åä»‹ç»ä¸€äº›ç®€å†ä¹‹å¤–çš„ä¸œè¥¿ï¼Œæˆ‘ä¸ªäººç§°ä¹‹ä¸ºå°±æ˜¯ã€Œ æŠ€æœ¯ç¤¾äº¤ ã€ã€‚å…¶å®æ˜¯ä¸ºä½ æ‰“é€ ä¸€ä¸ªä¸éœ€è¦ç®€å†ï¼Œå°±è·å¾—ä¸€äº›åº”è˜æœºä¼šçš„æ–¹å¼ã€‚éœ€è¦é€šè¿‡ä¸‹é¢è¿™äº›æ¸ é“ï¼Œå¢åŠ ä½ è‡ªå·±åœ¨æŠ€æœ¯ç¤¾åŒºé‡Œçš„çŸ¥ååº¦ã€‚ å½“çŸ¥ååº¦æœ‰äº†çš„è¯ï¼Œå¾ˆå¤šå…¬å¸ä¼šä¸»åŠ¨åœ°å»è”ç³»ä½ ã€‚æˆ‘çŸ¥é“çš„å°±æœ‰å¾ˆå¤šå¤§å…¬å¸çš„HRï¼Œä¼šæ³¡åœ¨GitHubä¸Šï¼Œç„¶åå»çˆ¬å½“åœ°staræ’åéå¸¸é å‰çš„ç”¨æˆ·ï¼Œå†ä¸»åŠ¨åœ°å‘é‚®ä»¶è”ç³»ä»–ä»¬ï¼Œé‚€è¯·ä»–ä»¬æ¥å…¬å¸è¿›è¡Œé¢è¯•ã€‚ è€Œè¿™éƒ¨åˆ†çš„å†…å®¹ï¼Œå°±éœ€è¦æ—¶é—´å’Œä¸ªäººç²¾åŠ›çš„æŠ•å…¥ã€‚æ¯”æ–¹è¯´å¤§å­¦é‡Œï¼Œä½ å¯ä»¥é€‰æ‹©ä»å¤§äºŒå¼€å§‹ç»´æŠ¤è‡ªå·±çš„GitHubä»“åº“ï¼Œåœ¨ä¸Šé¢å¯ä»¥å¤šåˆ›å»ºä¸€ä¸‹é¡¹ç›®ï¼Œç„¶åæŠŠè‡ªå·±åŸåˆ›çš„ä¸€äº›ä»£ç ï¼ŒåŒ…æ‹¬å‚ä¸çš„å¼€æºé¡¹ç›®ä¸­æäº¤çš„PRéƒ½å¯ä»¥å‘å¸ƒä¸Šå»ã€‚ ä½ è¿˜å¯ä»¥ç”¨GitHubå»æ­å»ºä¸€ä¸ªè‡ªå·±çš„æŠ€æœ¯åšå®¢ï¼ŒæŠŠå¤§äºŒå¤§ä¸‰å¤§å››å‡ å¹´ä»¥æ¥çš„æŠ€æœ¯çš„ç§¯ç´¯å’Œæ”¶è·éƒ½æ”¾åœ¨ä¸Šé¢ï¼Œåˆ°ä½ çœŸæ­£æ¯•ä¸šå»æ‰¾å·¥ä½œçš„æ—¶å€™ï¼Œå…¶å®ä½ åŸºæœ¬ä¸Šä¸éœ€è¦ä¸€ä¸ªç®€å†äº†ã€‚GitHubä¸Šé¢å‡ ç™¾æ¬¡çš„æäº¤å°±æ˜¯å¯¹ä½ æœ€å¥½çš„ä¸€ä¸ªè¯æ˜ã€‚ è¿˜æœ‰å°±æ˜¯åƒStack Overflowè¿™ä¸€ç±»çš„æŠ€æœ¯ç¤¾åŒºã€‚æˆ‘ä¸ªäººå»ºè®®æ˜¯ï¼Œåœ¨ä½ æœ‰ä¸€äº›éå¸¸æ·±å…¥çš„æŠ€æœ¯äº†è§£ä¹‹åï¼Œå¯ä»¥å°è¯•ç€å»å›ç­”ä¸€äº›å°ç™½çš„æé—®ï¼Œè¿™æ ·å­å¯¹ä¸ªäººçš„åå£°å’ŒæŠ€æœ¯ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªæé«˜ã€‚ å…¶ä»–çš„å†…å®¹æ— å¤–ä¹å°±æ˜¯ä½ ç¿»è¯‘è¿‡çš„ä¸€äº›æŠ€æœ¯æ–‡æ¡£ï¼Œå›½å¤–çš„éå¸¸è‘—åçš„æŠ€æœ¯æ–‡æ¡£ã€‚å…¶å®åœ¨GitHubä¸Šï¼Œå°±å¯ä»¥åŠ å…¥å¾ˆå¤šçš„ç¿»è¯‘ç»„ã€‚è¿˜æœ‰ä½ ä¸ºä¸€äº›åœ¨çº¿æ•™è‚²ç½‘ç«™è´¡çŒ®çš„å†…å®¹ï¼Œæ¯”æ–¹è¯´æƒ³å®éªŒæ¥¼ï¼Œä½ åœ¨å®éªŒæ¥¼æŠ•ç¨¿äº†ä¸€äº›è¯¾ç¨‹ï¼Œæˆ–æ˜¯åœ¨ä¸€äº›åœ¨çº¿æ•™è‚²çš„è§†é¢‘ç½‘ç«™ä¸Šï¼Œå‘å¸ƒäº†ä¸€äº›è‡ªå·±å½•åˆ¶çš„è§†é¢‘ï¼Œè¿™å…¶å®éƒ½æ˜¯éå¸¸å¥½çš„è¯æ˜ã€‚ 09 â€œ å¸¸è§é—®é¢˜ï¼â€ç¬¬ä¸‰éƒ¨åˆ†çš„å†…å®¹ï¼Œå°±æ˜¯æˆ‘èƒ½æƒ³åˆ°çš„ä¸€äº›å¸¸è§çš„é—®é¢˜ã€‚ é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç®€å†ä¸€å®šè¦çŸ­ã€‚æŠŠä½ æœ€é‡è¦çš„å†…å®¹ç²¾ç®€åˆ°ä¸€é¡µçº¸é‡Œé¢ï¼›æŠŠä½ æœ€é‡è¦çš„å…³é”®å­—ï¼Œç²¾ç®€åˆ°æœ€çªå‡ºçš„ä½ç½®ä¸Šã€‚ åƒä¸‡ä¸è¦å¢åŠ å¤§æ®µçš„å†…å®¹ï¼Œå¤§æ®µçš„æ–‡å­—æ˜¯ç®€å†çš„ä¸€ä¸ªå¤§å¿Œã€‚ä¹Ÿä¸è¦å¤¹æ‚å¤ªå¤šä¸ªäººæ„Ÿå—ã€ä¸ªäººç»å†çš„æ–‡å­—ï¼ŒçœŸçš„æ²¡äººçœ‹ã€‚Hræˆ–è€…å·¥ç¨‹å¸ˆåœ¨æ”¶åˆ°å¾ˆå¤šç®€å†çš„æ—¶å€™ï¼Œä»–ä»¬çš„æ—¶é—´æ˜¯éå¸¸æœ‰é™çš„ã€‚å¦‚æœä½ ä¸èƒ½åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…æŠ“ä½ä»–ä»¬çš„çœ¼çƒï¼Œé‚£å…¶å®æ˜¯æµªè´¹äº†ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šã€‚ ç¬¬äºŒç‚¹æ˜¯å…³äºä¿¡æ¯çš„é¡ºåºã€‚é¦–å…ˆåº”å±Šç”Ÿçš„è¯è¦çªå‡ºå­¦æ ¡ï¼Œå°±æŠŠè‡ªå·±çš„æ•™è‚²ä¿¡æ¯å’Œä¸ªäººä¿¡æ¯åˆåœ¨ä¸€èµ·å°±å¯ä»¥äº†ã€‚éåº”å±Šçš„è¯ï¼Œæœ€é‡è¦çš„æ˜¯ä½ çš„å·¥ä½œç»éªŒâ€”â€”ä½ å…ˆå‰çš„å·¥ä½œã€å·¥ä½œçš„æ—¶é—´é•¿çŸ­ã€å·¥ä½œçš„æ ¸å¿ƒå†…å®¹æ˜¯å¦ä¸ä½ åº”è˜çš„èŒä½ç›¸å…³ã€ä»¥åŠå·¥ä½œä¸­çš„ä¸€äº›æ•°æ®è¯æ®ã€‚ä¸ªäººä¿¡æ¯ä¸‹é¢å°±å¯ä»¥ç›´æ¥æ”¾ä¸€äº›å·¥ä½œç»å†ã€‚ åœ¨æŠ•é€’ç®€å†çš„æ—¶å€™è¦æ ¹æ®åº”è˜çš„èŒä½è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚æ¯”å¦‚è°ƒæ•´ä¸€äº›æƒ³è¦é¡ºåºã€æŠ€æœ¯æŠ€èƒ½çš„é¡ºåºã€ä»¥åŠå…ˆå‰å·¥ä½œç»éªŒä¸­é‡ç‚¹å…³é”®è¯çš„æè¿°ï¼Œå°½å¯èƒ½å¾€åº”è˜éœ€æ±‚ä¸Šé ã€‚ ç®€å†çš„æ ¼å¼å°½å¯èƒ½çš„ç”¨pdfï¼Œè¿™æ ·é€šç”¨æ€§ä¼šæ›´å¥½ä¸€äº›ã€‚ç„¶åæ˜¯ä¸è¦æ”¾ç…§ç‰‡ï¼Œé™¤éæ˜¯é•¿å¾—éå¸¸æ¼‚äº®ï¼Œæˆ–è€…èŒä½æœ‰è¦æ±‚çš„ï¼ŒåŸºæœ¬ä¸Šï¼Œæˆ‘è§è¿‡çš„èŒä½æ˜¯æ²¡æœ‰è¦æ±‚æ”¾ç…§ç‰‡çš„ã€‚ æœ€åå°±æ˜¯å¦‚æœæŠ•é€’å¤–ä¼çš„è¯ï¼Œå°½å¯èƒ½ä¸€é¡µè‹±æ–‡ç®€å†ï¼Œä¸€é¡µä¸­æ–‡ç®€å†ï¼Œå› ä¸ºé¢è¯•ä½ çš„å¾ˆå¯èƒ½æ˜¯å¤–å›½å·¥ç¨‹å¸ˆã€‚ å¦å¤–ï¼Œå¦‚æœé€‰æ‹©ä¸€ä¸ªå…¬å¸ï¼Œå¯ä»¥é€‚å½“åœ°å¯¹è¿™ä¸ªå…¬å¸çš„äº§å“ï¼ŒåŒ…æ‹¬ç”¨åˆ°çš„æŠ€æœ¯è¿›è¡Œä¸€äº›è°ƒç ”ï¼Œä¹Ÿå¯ä»¥å‡†å¤‡ä¸€ä»½ç®€çŸ­çš„å¯¹è¯¥å…¬å¸äº§å“çš„æŠ€æœ¯åˆ†æï¼Œæ”¾åœ¨ç®€å†é‡Œé¢ã€‚å½“ç„¶åŸºæœ¬ä¸Šç”¨ä¸åˆ°ï¼Œæ›´å¤šçš„å¯èƒ½åœ¨é¢è¯•ç¯èŠ‚é‡Œä¼šç”¨åˆ°ã€‚ è¿™å°±æ˜¯æˆ‘ä»Šå¤©ç»™å¤§å®¶åˆ†äº«çš„ä¸€äº›å†…å®¹ï¼Œå› ä¸ºæ¯”è¾ƒç²¾ç®€ï¼Œå¯èƒ½å¾ˆå¤šåœ°æ–¹å¹¶ä¸æ˜¯ç‰¹åˆ«å…¨é¢ï¼Œå¤§å®¶æƒ³é—®çš„é—®é¢˜ï¼Œæˆ–è€…æƒ³è®¨è®ºçš„è¯é¢˜éƒ½å¯ä»¥æå‡ºæ¥ã€‚ 10 â€œ ç”¨æˆ·æé—®â€ 01 æé—®ï¼šå­¦å®ŒåŸºç¡€åï¼Œæ€ä¹ˆæ‰¾ä¸€ä¸ªå¥½é¡¹ç›®æ¥åšï¼Ÿ å›ç­”ï¼šå­¦å®ŒåŸºç¡€ä¹‹åï¼Œå¯ä»¥å…ˆæ¥å®éªŒæ¥¼åšä¸€äº›å°çš„é¡¹ç›®ã€‚å¦‚æœä½ æƒ³æœ‰æ‹¿å¾—å‡ºå»ã€å¯ä»¥è¯æ˜çš„é¡¹ç›®ï¼Œæœ€å¥½æ˜¯å»GitHubä¸Šæ‰¾ä¸€äº›å¼€æºçš„é¡¹ç›®ï¼Œçœ‹ä¸€ä¸‹äººå®¶æçš„ISSUEï¼Œç„¶åæ‰¾ä¸€äº›è‡ªå·±å¯ä»¥ä¿®çš„ï¼Œå†å°è¯•ç€å»æä¸€äº›PRï¼Œå“ªæ€•è¢«æ‹’æ‰äº†ã€‚æˆ‘è§‰å¾—ç»è¿‡è¿™å‡ æ¬¡äº¤æµä¹‹åï¼ŒåŸºæœ¬ä¼šæœ‰è¢«æ¥å—çš„ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é”»ç‚¼è‡ªå·±çš„æœºä¼šã€‚ 02 æé—®ï¼šä¸€èˆ¬å…¬å¸æœ€çœ‹é‡åº”å±Šç”Ÿçš„å“ªæ–¹é¢ï¼Ÿå®ä¹ ç»éªŒè¿˜æ˜¯å…¶ä»–ä¸œè¥¿ï¼Ÿ å›ç­”ï¼šå°±æ‹¿æˆ‘ä»¬å…¬å¸æ¥è¯´ï¼Œå¯¹åº”å±Šç”Ÿæ›´å¤šåœ°çœ‹é‡çš„æ˜¯å®ä¹ çš„é¡¹ç›®ç»éªŒï¼Œä»¥åŠå­¦ä¹ èƒ½åŠ›ï¼ŒåŒ…æ‹¬ä»–çœŸæ­£è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚å¹¶ä¸æ˜¯ç‰¹åˆ«é‡è¦çš„æ˜¯ä½ ç°åœ¨æŠ€æœ¯æ–¹é¢çš„ä¸œè¥¿ã€‚å› ä¸ºè¿‡æ¥ä»¥åï¼Œéƒ½æ˜¯éœ€è¦åœ¨å›¢é˜Ÿé‡Œé¢è¿›è¡Œå¾ˆé•¿æ—¶é—´çš„ç£¨åˆï¼Œç£¨åˆçš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šæœ‰é«˜çº§å·¥ç¨‹å¸ˆä¼šå¸¦ä¸€äº›ï¼Œåšä¸€äº›ç»éªŒçš„åˆ†äº«ã€‚ 03 æé—®ï¼šæ‚¨å¼ºè°ƒ GitHub ä¸­åŸåˆ›æ€§çš„é‡è¦æ€§ï¼Œä½†ä¸ªäººåˆæƒ³å…¼å®¹è¾ƒå¤§çš„æäº¤é‡ï¼Œè¿™æ ·çš„è¯éœ€è¦æ€ä¹ˆå¹³è¡¡ï¼Ÿæ¯”å¦‚åœ¨å®éªŒæ¥¼åšå®Œå®éªŒï¼Œè‡ªåŠ¨ä¼šæŠŠå®éªŒä»£ç gitä¸‹ï¼Œå…¶å®æ›´å¤šçš„æ˜¯ä¸€ç§ä¸ªäººçš„è®°å½•å’Œæ‰˜ç®¡ï¼Œä½†è¿™ä¸æ˜¯ä¸åŸåˆ›æ€§æœ‰æ‰€çŸ›ç›¾å•¦ï¼Ÿ å›ç­”ï¼šGitHubçš„æäº¤å’ŒåŸåˆ›æ€§å…¶å®å¹¶ä¸çŸ›ç›¾å•Šã€‚æ¯”æ–¹è¯´ä½ æœ‰ä»€ä¹ˆæ€è·¯ï¼Œå°±åœ¨GitHubä¸Šåˆ›å»ºè¿™ä¸ªé¡¹ç›®ï¼Œå°è¯•ç€ä»æœ€å°çš„ç‰ˆæœ¬å¼€å§‹ï¼Œæ…¢æ…¢åœ°åšä¸€äº›è¿­ä»£ï¼ŒæŒç»­ä¸ŠåŠå¹´çš„æ—¶é—´ï¼Œä½ çš„é¡¹ç›®ä»ä»£ç é‡åˆ°çŸ¥ååº¦éƒ½ä¼šèµ·æ¥çš„å•Šã€‚å½“ç„¶è¿™å°±æ˜¯ä¸€ä¸ªåšæŒçš„è¿‡ç¨‹ã€‚å¦å¤–ï¼Œå¦‚æœè¦ä¸€ä¸ªçŸ¥ååº¦æ¯”è¾ƒé«˜çš„ï¼Œå…¶å®å¯ä»¥æ‰¾ä¸€ä¸ªå¤§å‹é¡¹ç›®é‡Œé¢çš„ISSUEï¼Œç›¸å½“äºä½ å¸®åˆ«äººè§£å†³ä¸€äº›å·²çŸ¥çš„é—®é¢˜ã€‚æˆ–è€…ç”¨ä»–çš„æ¡†æ¶å»æå‡ºä¸€äº›é—®é¢˜ï¼Œç„¶åæå‡ºè‡ªå·±çš„ä¿®å¤æ–¹æ¡ˆï¼Œæäº¤ä¸€ä¸ªPRï¼Œåœ¨è®¨è®ºæˆ–è€…è¯´åœ¨ä»£ç æäº¤ä¸­ï¼Œéƒ½ä¼šæ”¶åˆ°å¾ˆå¤šå›½å†…å¤–å·¥ç¨‹å¸ˆçš„åé¦ˆï¼Œè¿™ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ 04 æé—®ï¼šæ„Ÿè§‰é¢è¯•å®Œäº†ï¼Œé¢è¯•å®˜è¯´ï¼šæˆ‘çš„é—®é¢˜é—®å®Œäº†ï¼Œä½ æœ‰ä»€ä¹ˆè¦é—®çš„å—ï¼Ÿè¿™æ˜¯æœ€å°´å°¬çš„æ—¶å€™ã€‚ å›ç­”ï¼šå…¶å®è¿™ä¸ªæ—¶å€™é¢è¯•å®˜ä¹Ÿå¾ˆå°´å°¬â€¦â€¦ä»–å¯èƒ½è‡ªå·±ä¹Ÿæ²¡æœ‰ä»€ä¹ˆè¯è¦è¯´äº†ï¼Œåªä¸è¿‡æƒ³æ‰¾ä¸€ä¸ªæ–¹å¼æ¥ç»“æŸæœ¬æ¬¡é¢è¯•ã€‚å…¶å®è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ç¤¼è²Œæ€§è´¨åœ°é—®ä¸€äº›å…¬å¸äº§å“æˆ–è€…ç ”å‘æŠ€æœ¯çš„ä¸€äº›é—®é¢˜ã€‚å¦‚æœæ­£å¥½é¢è¯•å®˜å±äºè¿™ä¸ªäº§å“çº¿ï¼Œæˆ–è€…å¯¹è¿™ä¸ªæŠ€æœ¯éå¸¸æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å†æ·±å…¥åœ°è·Ÿä»–æ¢è®¨ä¸€ä¸‹ï¼Œä½†æ˜¯å‘¢ï¼Œä¸è¦å†’æ˜§çš„æå‡ºä¸€äº›è‡ªå·±å¹¶ä¸æ˜¯ç‰¹åˆ«æ‡‚çš„å»ºè®®ã€‚ åŸæ–‡é“¾æ¥ http://www.jianshu.com/p/0b676530e506 æ­¤æ–‡ç”± ç®€ä¹¦-ç™½å¼€æ°´ln åšå®¢æ•´ç†,ã€æ›´æ–¹ä¾¿çš„é˜…è¯»è§†è§’ã€‘]]></content>
      <categories>
        <category>èŒåœº</category>
      </categories>
      <tags>
        <tag>èŒåœº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017 å¹²è´§æ–‡ç« ï¼ˆåŠ©ä½ 66+,ç»­æ›´~~ï¼‰iOS Swift]]></title>
    <url>%2FAppleTranslation%2FCoderln.html</url>
    <content type="text"><![CDATA[å¯¹ä½ æœ‰æ–°æ€æƒ³ æˆ–æ˜¯ ä¹ æƒ¯ ï¼ ä»Šæ—¥æ›´æ–°ğŸ—ã€ä»Šæ—¥æ›´æ–°ğŸ—ã€ä»Šæ—¥æ›´æ–°ğŸ— ç®€[å®Œæ•´]ï¼šhttp://www.jianshu.com/p/711729623b03 é˜…è¯»æºç  || ç³»ç»Ÿæ–‡ä»¶ï¼Œä¸ä»…èƒ½ä½¿æˆ‘ä»¬äº†è§£ä½œè€…çš„åŠŸèƒ½å®ç°æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿ç”¨å…¶åŠŸèƒ½ï¼Œå¿«é€Ÿçš„fixä½¿ç”¨ä¸­é‡åˆ°çš„bugï¼Œæ›´é‡è¦çš„æ˜¯åœ¨é˜…è¯»ä¼˜ç§€æºç æ—¶ä½“ä¼šä½œè€…çš„è®¾è®¡æ€æƒ³å’Œæ¶æ„è®¾è®¡ï¼Œå…·ä½“çš„æŠ€æœ¯å¾ˆå¿«å°±ä¼šè¿‡æ—¶ï¼Œä¼˜ç§€çš„è®¾è®¡æ€æƒ³å´ä¼šå†ä¹…å¼¥æ–°ï¼Œç»™æˆ‘ä»¬ä»Šåç¼–ç ä»¥å¾ˆå¤§çš„å€Ÿé‰´å’Œå¯è¿ªã€‚å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ï¼ å‘ä¼˜ç§€çš„åˆ†äº«è€…è‡´æ•¬ ï¼Two of my idea @ç™½å¼€æ°´ln ã€‚ ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ Content progresséå®˜æ–¹ &amp; éå¤§ç‰› &amp; éç¬¦åˆ â€”â€”&gt; åªæ˜¯ä¸€å¸®æœ‰æ€æƒ³çš„ä¼ç çŒ¿ â€”â€”&gt; ä¸å‡†ç¡® &amp; æ–°æ€æƒ³ &amp; æ§½æ§½ç‚¹ â€”â€”&gt; (å‚è€ƒ)æ¬¢è¿ä½ çš„æ§½ç‚¹ || è¡¥å…… ï¼ã€æ‹›å‹Ÿã€‘ ä¸ç®¡è°çš„åšå®¢ä¸Šé¢å†™çš„æ–‡ç« (ä¹ŸåŒ…æ‹¬è‡ªå·±)ï¼Œé˜…è¯»çš„ä½ è¦æ•¢äºå»éªŒè¯ï¼Œåœæ­¢æ— æ„ä¹‰çš„ â¹copy pasteã€‚ å·¥å…·ï£¿æ’ä»¶å®‰è£…+é—®é¢˜è§£å†³+æ´»ç”¨ iOS æºä»£ç ç®¡ç†ã€ŒSVN &amp; Gitã€ç»­æ›´ã€‚ iOS ç®¡ç†åº“å·¥å…·CocoaPodsã€Œå®‰è£…+é—®é¢˜è§£å†³+æ´»ç”¨ã€ç»­æ›´ã€‚ Markdownâ€”å†™ä½œä¾¿æ·é«˜æ•ˆã€‚ Mac&amp;Xcodeã€Œå®ç”¨å¿«æ·é”®ã€ç»­æ›´ã€‚ è›‹ç–¼ä¸€åˆ»ï¼šå¼€å‘ç¥æ³¨é‡Šå¤§å…¨ iOS ä¼ç çŒ¿çœŸçˆ±â€”ã€Œå·æ‡’ || æ•ˆç‡ å·¥å…·ç±»ã€ iOS ä¼ç çŒ¿è‡ªæ£€â€”ã€ŒMasonryçº¦æŸã€ æ„Ÿæ‚ŸèŒåœº å­¦ä¹ æ•´ç† æ—¶é—´&amp;çŸ¥è¯† ç®¡ç†ã€‚ è€å¸æœºå¸¦ä½ å­¦ä¹ åƒä»½æŠ€æœ¯ç®€å†çš„ç§˜ç±ã€æ›´æ–¹ä¾¿çš„é˜…è¯»è§†è§’ã€‘ã€‚ å¼€æºæŠ€æœ¯å˜‰å¹´åã€Œå¤œèŠã€ç¤¾åŒºï¼Œé‚€ä½ åŠ å…¥ HexoÂ·åšå®¢æ­å»º å­¦ä¹ æ•´ç† Hexo(Pages)â€”åšå®¢æ­å»ºåŒæ­¥GitHub&amp;Coding GitHubPages + Hexoâ€”è¯¦è§£åšå®¢æ­å»ºã€‚ Hexoæ–‡ç« ç®€å•åŠ å¯†è®¿é—® ç å‘˜ç†ŸçŸ¥ runtime-runloop iOSæ¨¡å¼è¯¦è§£â€”ã€Œruntimeé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^. iOS æ¨¡å¼è¯¦è§£â€”ã€ŒRunloopé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^. iOSæ¨¡å—è¯¦è§£ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼Œæ›´å¤šæ–‡ç« è¯·è®¢é˜…åšå®¢Rssè·å–ï¼‰ iOS æ¨¡å¼è¯¦è§£â€”ã€ŒKVCç¼–ç  &amp; KVOç›‘å¬ã€ iOS æ¨¡å—è¯¦è§£â€”ã€Œå¤šçº¿ç¨‹é¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^. iOS ç½‘ç»œè¯·æ±‚â€”ã€ŒNSURLSessionä¼šè¯ã€ iOS æ•°æ®å®‰å…¨â€”ã€ŒåŠ å¯†è§£å¯†ã€ //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Appleå®˜æ–¹è¯‘æ–‡ å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€ä» NSURLConnection åˆ° NSURLSessionã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ https://www.objc.io/issues/5-ios7/from-nsurlconnection-to-nsurlsession/ã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/ConnectionToSession.html ã€NSURLSessionè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/foundation/urlsession#//apple_ref/occ/clm/NSURLSession/sharedSessionã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/NSURLSessionApple.html ã€UIWebViewè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uiwebviewã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIWebViewApple.html ã€UIBezierPathè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uibezierpath?language=objcã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIBezierPathApple.html ã€UIView API å®˜æ–¹æ–‡æ¡£è¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uiview?language=objcã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIViewApple.html ã€iOS RunLoop ç¼–ç¨‹æ‰‹å†Œ ï¼ˆè¯‘ï¼‰ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/foundation/runloopã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/4c38d16a29f1 ã€Podfileè¯­æ³•å‚è€ƒï¼ˆè¯‘ï¼‰ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://guides.cocoapods.org/syntax/podfile.htmlã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/8af475c4f717 ã€iOSè‡ªåŠ¨å¸ƒå±€æ¡†æ¶-Masonryè¯¦è§£ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/ea74b230c70d ã€OC_runtimeè¿è¡Œæ—¶å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008048ã€åšå®¢è¯‘æ–‡ã€‘http://blog.csdn.net/liangliang103377/article/details/39007683 ã€è‹¹æœæ–‡æ¡£ç¿»è¯‘ iOS10 NSAppTransportSecurityã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW34ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/1ec3fa1ec00f ã€iOS 9è®¾è®¡è§„èŒƒ ä¸­æ–‡ç‰ˆ å®Œæ•´ç‰ˆã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/fbdd713eb2ce ã€iOS 10è®¾è®¡è§„èŒƒç¬”è®°ä¸æ•´ç†ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.pmcaff.com/article/index/514586365192320?from=label&amp;pmc_param[label_name]=å‘ç° ã€Stack Overflow 2017 å¼€å‘è€…è°ƒæŸ¥æŠ¥å‘Šã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://insights.stackoverflow.com/survey/2017#technology-most-loved-dreaded-and-wanted-languagesã€åšå®¢è¯‘æ–‡ã€‘https://www.oschina.net/news/83164/stack-overflow-developer-survey-results-2017 ã€Swift 4 JSON è§£ææŒ‡å—ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://bignerdcoding.com/archives/37.html //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€ä¸‰æ–¹æ¡†æ¶ å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€AFNetworkingï¼ˆv3.0+ï¼‰æ¡†æ¶ç»“æ„ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/AFNetworking/AFNetworkingã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/AFNLibraryStructure.html ã€AFNetworkingï¼ˆv3.0+ï¼‰å†…éƒ¨é€»è¾‘å¤„ç†è¿‡ç¨‹ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/AFNetworking/AFNetworkingã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/AFNLibraryProcessingLogic.html ã€SDWebImageæ¡†æ¶&amp;æºç å­¦ä¹ æ€»ç»“ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/rs/SDWebImageã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/SDLibrary.htmlã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/SDSourceCode1.html ã€MJExtensionæ¡†æ¶å­¦ä¹ æ€»ç»“ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/CoderMJLee/MJExtensionã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/MJExtensionLibrary.html ã€VVeboTableViewæºç è§£æã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/johnil/VVeboTableViewDemoã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/78027a3a2c41 ã€MJRefreshè§£æä¸è¯¦ç»†ä½¿ç”¨æŒ‡å¯¼ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/CoderMJLee/MJRefreshã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/4ea427bab0afã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/437095c88717 ã€iOSå³æ—¶é€šè®¯è¿›é˜¶ - CocoaAsyncSocketæºç è§£æ(Connectç¯‡)ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/0a11b2d0f4ae ã€Masonry æºç è§£æã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/SnapKit/Masonryã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/3fce11e370b1 ã€åŸºäºAFNetworking3.1çš„äºŒæ¬¡å°è£…å’Œæ‹“å±•ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/d0751b9a8d65ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/cca7656ac41e //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Objective C-SourceAnnotationã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€AFNetworking-3.1.0ã€‘âœ”ï¸ ç½‘ç»œè¯·æ±‚; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/AFNetworking/AFNetworkingã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€SDWebImage-3.7.5ã€‘âœ”ï¸ å›¾ç‰‡ä¸‹è½½; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/rs/SDWebImageã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MBProgressHUD-ã€‘âœ”ï¸ è¿›åº¦æç¤º; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/rs/SDWebImageã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MJRefresh-3.1.12ã€‘âœ”ï¸ åˆ·æ–°; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/CoderMJLee/MJRefreshã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MJExtension-3.0.13ã€‘âœ”ï¸ å­—å…¸è½¬æ¨¡å‹; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/CoderMJLee/MJExtensionã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€SVProgressHUD-2.1.2ã€‘âœ”ï¸ è¿›åº¦æç¤º; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/SVProgressHUD/SVProgressHUDã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Swift-SourceAnnotationã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//// ã€SwiftyJSON-3.1.4ã€‘âœ”ï¸ Swiftç•ŒJSONè§£æä¹‹ç‹; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/SwiftyJSON/SwiftyJSONã€æºç æ³¨è§£ã€‘å¾… +ã€å·¥å…·ç±»ã€‘å¾… + ã€DZNEmptyDataSet-1.8.1ã€‘âœ”ï¸ é¿å…ç©ºç™½UITableView; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/dzenbot/DZNEmptyDataSetã€æºç æ³¨è§£ã€‘å¾… +ã€å·¥å…·ç±»ã€‘å¾… + //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€å­¦ä¹ èµ„æº å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // â€œæ‘˜å½•äºâ€: https://github.com/zhouhuanqiang/LearningIOS åœ°å€ ç®€ä»‹ objcä¸­å›½ ä¸ºä¸­å›½ Objective-C ç¤¾åŒºå¸¦æ¥æœ€ä½³å®è·µå’Œå…ˆè¿›æŠ€æœ¯ NSHipsterä¸­æ–‡ç‰ˆ NSHipster å…³æ³¨è¢«å¿½ç•¥çš„ Objective-Cã€Swift å’Œ Cocoa ç‰¹æ€§ã€‚æ¯å‘¨æ›´æ–°ã€‚ iOS Dev Weekly å¦‚æœä½ æ˜¯è€æ‰‹ç²¾é€šè‹±æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘¨åˆŠæ˜¯éå¸¸å€¼å¾—æ¨èè®¢é˜…çš„ï¼Œè¯¥å‘¨åˆŠæä¾›è¡Œä¸šæ–°é—»ã€æœ€æ–°å¼€å‘åŠ¨æ€ã€å¼€å‘å·¥å…·ã€ä»£ç åˆ†äº«ã€UIè®¾è®¡ã€è®¾è®¡å¸ˆæ‹›è˜ç­‰ä¸°å¯Œçš„èµ„æºã€‚ Shinobicontrols The latest technical blog posts iOS Developer Tips Code, tips and tricks for iOS developers Raywenderlich å›½å¤–iOSè§†é¢‘æ•™ç¨‹ç½‘ç«™ trip-to-iOS 6000å¤šä¸ªstarçš„iOSå­¦ä¹ èµ„æ–™æ•´ç† SwiftGuide è¿™ä»½æŒ‡å—æ±‡é›†äº†Swiftè¯­è¨€ä¸»æµå­¦ä¹ èµ„æºï¼Œæ¥è¿‘1Wçš„star TimLiu-iOS 4000å¤šä¸ªstarï¼ŒiOSã€macå¼€æºé¡¹ç›®åŠåº“ skill-map ITæŠ€æœ¯é¢†åŸŸï¼ˆäº‘è®¡ç®—ï¼Œå¤§æ•°æ®ï¼Œè¿ç»´ï¼Œå®‰å…¨ï¼Œå¼€å‘è¯­è¨€ï¼Œæ™ºèƒ½ç¡¬ä»¶ç­‰ï¼‰åŠäº’è”ç½‘äº§å“ã€è¿è¥ç­‰é¢†åŸŸå­¦ä¹ æŠ€èƒ½å›¾è°± å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2016 å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2016PPTä¸‹è½½åˆé›† atswift-2016-resources 2016ä¸­å›½Swiftå¼€å‘è€…å¤§ä¼šæºæ–‡ä»¶ï¼ŒåŒ…æ‹¬keynote, pdf å’Œæºå·¥ç¨‹æ–‡ä»¶ å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2017 å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2017PPTä¸‹è½½åˆé›† //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€å¼€æºé¡¹ç›®æºç  å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//// åœ°å€ ç®€ä»‹ iOS-Source-Code-Analyze æ”¶é›†äº†ä¼˜ç§€çš„iOSå¼€æºæ¡†æ¶æºä»£ç è§£ææ–‡ç« ï¼Œå¼ºçƒˆæ¨è Yep ç¤¾äº¤IMè½¯ä»¶YEPï¼Œstar5000+ TeamTalk è˜‘è‡è¡—å¼€æºIMï¼Œstar4500+ MessageDisplayKit ç±»ä¼¼å¾®ä¿¡çš„IMappï¼Œå¯å‘é€å›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œæ–‡å­—ï¼Œä½ç½®ä¿¡æ¯ç­‰ï¼Œstar3800+ ä»¿ç½‘æ˜“æ–°é—» star3000+ é«˜ä»¿åŸè§… star1800+ YoCelsius å¤©æ°”é¢„æŠ¥çš„åº”ç”¨ï¼ŒåŠ¨ç”»å’Œäº¤äº’éå¸¸ä¸°å¯Œï¼Œstar2300+ Coding-iOS Coding iOS å®¢æˆ·ç«¯æºä»£ç , star2600+ v2ex v2ex.comå®¢æˆ·ç«¯ï¼Œstar1700+ é«˜ä»¿å¾®ä¿¡ star2000+ é«˜ä»¿ç¾å›¢ star1500+ é«˜ä»¿å–µæ’­APP è§†é¢‘ç›´æ’­é¡¹ç›®ï¼Œstar2000+ é«˜ä»¿Bilibiliå®¢æˆ·ç«¯ star2000+ é«˜ä»¿æœ€ç¾åº”ç”¨ swift, star800+ ä¸€ä¸ª ã€Šä¸€ä¸ªã€‹ iOS å®¢æˆ·ç«¯, star600+ CocoaChina+ å¼€æºçš„ç¬¬ä¸‰æ–¹CocoaChinaç§»åŠ¨ç«¯, star600+ é«˜ä»¿ç™¾åº¦ç³¯ç±³ star500+ Four ä¸€ä¸ªä¸Šçº¿çš„ä»»åŠ¡è®°å½•appï¼Œstar300+ PHPHubå®¢æˆ·ç«¯ star1100+ é«˜ä»¿ç¾å›¢1 star500+ é«˜ä»¿ç¾å›¢2 star400+ é«˜ä»¿åŸè§… star1800+ SegmentFaultå®¢æˆ·ç«¯ star1200+ ç½‘æ˜“æ–°é—» star3000+ //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€ä¼˜ç§€Blog å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // â€œåŒæ­¥äºâ€: https://github.com/tangqiaoboy/iOSBlogCN åšå®¢åœ°å€ RSSåœ°å€ Plain boiled water æ— è€»çš„å†™ä¸Š http://www.jianshu.com/u/fd745d76c816 OneVâ€™s Den http://onevcat.com/atom.xml ä¸€åªé­”æ³•å¸ˆçš„å·¥åŠ http://blog.ibireme.com/feed/ ç ´èˆ¹ä¹‹å®¶ http://beyondvincent.com/atom.xml NSHipster http://nshipster.cn/feed.xml Limboy æ— ç½‘ä¸å‰© http://feeds.feedburner.com/lzyy å”å·§çš„æŠ€æœ¯åšå®¢ http://blog.devtang.com/atom.xml Tedâ€™s Homepage http://wufawei.com/feed sunnyxxçš„æŠ€æœ¯åšå®¢ http://blog.sunnyxx.com/atom.xml Kevin Blog http://zhowkev.in/rss é˜¿æ¯›çš„è›‹ç–¼åœ° http://www.xiangwangfeng.com/atom.xml äºšåº†çš„ Blog http://billwang1990.github.io/atom.xml Nonomori http://nonomori.farbox.com/feed Wonderffeeâ€™s Blog http://wonderffee.github.io/atom.xml Iâ€™m TualatriX http://imtx.me/feed/latest/ Cocoabit http://blog.cocoabit.com/rss/ ä¸ä¼šå¼€æœºçš„ç”·å­© http://studentdeng.github.io/atom.xml Nico http://blog.inico.me/atom.xml é˜¿å³°çš„æŠ€æœ¯çªçª http://hufeng825.github.io/atom.xml answer_huang http://answerhuang.duapp.com/index.php/feed/ webfrogs http://blog.nswebfrog.com/feed/ ä»£ç æ‰‹å·¥è‰ºäºº http://joeyio.com/atom.xml Lancyâ€™s Blog http://gracelancy.com/atom.xml Iâ€™m Allen http://www.imallen.com/atom.xml Travisâ€™ Blog http://imi.im/feed ç‹ä¸­å‘¨çš„æŠ€æœ¯åšå®¢ http://wangzz.github.io/atom.xml å…‹ä¼Ÿçš„åšå®¢ http://feed.cnblogs.com/blog/u/23857/rss æ‘‡æ»šè¯—äºº http://feed.cnblogs.com/blog/u/35410/rss Lukeâ€™s Homepage http://geeklu.com/feed/ è§å®¸å®‡ http://iiiyu.com/atom.xml Yuanåšå®¢ http://www.heyuan110.com/?feed=rss2 KooFrankâ€™s Blog http://koofrank.com/rss hello it works http://helloitworks.com/feed ç å†œäººç”Ÿ http://msching.github.io/atom.xml ç‰ä»¤å¤©ä¸‹çš„Blog http://yulingtianxia.com/atom.xml ä¸æèœ‚çªçš„ç†Š http://www.hotobear.com/?feed=rss2 çŒ«Â·ä»æ³¢åˆ‡ https://andelf.github.io/atom.xml ç…²ä»”é¥­ http://ivoryxiong.org/feed.xml é‡Œè„Šä¸²çš„å¼€å‘éšç¬” http://adad184.com/atom.xml Whyâ€™s blog - æ±ªæµ·çš„å®éªŒå®¤ http://blog.callmewhy.com/atom.xml åœŸåœŸå“¥çš„æŠ€æœ¯Blog http://tutuge.me/atom.xml åºæµ·ç¤çš„ä¸ªäººç©ºé—´ http://www.olinone.com/?feed=rss2 Casa Taloyum http://casatwy.com/feeds/all.atom.xml Kenshin Cuiâ€™s Blog http://www.cnblogs.com/kenshincui/rss æŠ€æœ¯å“¥çš„åšå®¢ http://suenblog.duapp.com/rss/ è€è°­ç¬”è®° http://www.tanhao.me/atom.xml coderyi http://www.coderyi.com/feed é›·çº¯é”‹çš„æŠ€æœ¯åšå®¢ http://blog.leichunfeng.com/atom.xml å‘æ™¨å®‡çš„æŠ€æœ¯åšå®¢ http://iosxxx.com/atom.xml Reading å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚ æœªå®Œ å¾…ç»­ æ¯å‘¨æœ«(äº‰å–) æ›´æ–° About meã€ğŸ”CodeFamily_ä¼ç ç´¯ - ç™½å¼€æ°´lnã€‘]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
        <tag>ä¼ç ç´¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AFNetworking3.1â€”å°è£…ä¼˜åŒ–]]></title>
    <url>%2FSourceAnnotations%2FAFNLibraryEncapsulation.html</url>
    <content type="text"><![CDATA[AFN å°è£…ä¼˜åŒ– æ­£åœ¨æ€»ç»“ï¼Œè¿‡ä¸¤å¤©è¡¥å……ä¸Š ~ï¼Œå¯ä»¥å…ˆå‚è€ƒï¼šhttp://www.jianshu.com/p/cca7656ac41e æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AFNetworking3.1â€”åŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2FSourceAnnotations%2FAFNLibraryUse.html</url>
    <content type="text"><![CDATA[Write in the first AFNetWorking åŸºæœ¬æ˜¯iOSå¼€å‘ä¸­ä½¿ç”¨ç½‘ç»œé€šä¿¡æ¡†æ¶çš„æ ‡é…ï¼Œè¿™ä¸ªæ¡†æ¶æœ¬èº«æ¯”è¾ƒåºå¤§ï¼Œä¹Ÿå¾ˆå¤æ‚ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸éå¸¸ç®€å•ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€AFN æ¡†æ¶åŸºæœ¬ä½¿ç”¨ã€‘å­¦ä¹ ï¼Œè¦æƒ³åšå‡ºå¤šç‰›é€¼é…·ç‚«çš„æ•ˆæœï¼Œå°±å¿…é¡»æ‰¿å—åŒç­‰å­¦ä¹ çš„ä»£ä»· ~åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@jianshu - ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š AFN GET | POST è¯·æ±‚ AFN æ–‡ä»¶ä¸‹è½½ | ä¸Šä¼  AFN åºåˆ—åŒ–å¤„ç† AFN æ£€æµ‹ç½‘ç»œçŠ¶æ€ AFN ä½¿ç”¨æŠ€å·§ AFN æ•°æ®å®‰å…¨ AFN ç¦»çº¿æ–­ç‚¹ä¸‹è½½ åç»­ã€AFN æ¡†æ¶ | æºç  å­¦ä¹ æ€»ç»“ã€‘ Getting Startedã€å¼€å§‹ä½¿ç”¨ã€‘ Examples ã€AFN GET | POST è¯·æ±‚ã€‘ä¸‹é¢å°±ç›´æ¥æ¥ä»£ç äº†ã€ä»£ç å…·æœ‰è¯¦ç»†æ³¨é‡Šã€‘ã€‚ AFN å‘é€ get å’Œ post è¯·æ±‚æ–¹æ³•ï¼Œåªéœ€æŠŠ GET ä¿®æ”¹ä¸º POST å³å¯ï¼Œ1234567891011121314151617181920212223242526272829// 1.åˆ›å»ºä¼šè¯ç®¡ç†è€…AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];// å­—å…¸(å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®~å‚æ•°)NSDictionary *paramDict = @&#123; @"username":@"520it", @"pwd":@"520it", @"type":@"JSON" &#125;;// 2.å‘é€GETè¯·æ±‚/** GET: NSStringç±»å‹çš„è¯·æ±‚è·¯å¾„ï¼ŒAFNå†…éƒ¨ä¼šè‡ªåŠ¨å°†è¯¥è·¯å¾„åŒ…è£…ä¸ºä¸€ä¸ªurlå¹¶åˆ›å»ºè¯·æ±‚å¯¹è±¡ parameters: è¯·æ±‚å‚æ•°ï¼Œä»¥å­—å…¸çš„æ–¹å¼ä¼ é€’ï¼ŒAFNå†…éƒ¨ä¼šåˆ¤æ–­å½“å‰æ˜¯POSTè¯·æ±‚è¿˜æ˜¯GETè¯·æ±‚ï¼Œ ä»¥é€‰æ‹©ç›´æ¥æ‹¼æ¥è¿˜æ˜¯è½¬æ¢ä¸ºNSDataæ”¾åˆ°è¯·æ±‚ä½“ä¸­ä¼ é€’. progress: è¿›åº¦å›è°ƒ,æ­¤å¤„ä¸ºnil success: è¯·æ±‚æˆåŠŸä¹‹åå›è°ƒBlock task: è¯·æ±‚ä»»åŠ¡ã€ responseObject: å“åº”ä½“ä¿¡æ¯ï¼ˆå†…éƒ¨å·²ç¼–ç å¤„ç†JSON-&gt;OCå¯¹è±¡ï¼‰ failure: å¤±è´¥å›è°ƒï¼ˆerror:é”™è¯¯ä¿¡æ¯ï¼‰ task.response: å“åº”å¤´ */[manager GET:@"http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON" parameters:paramDict progress:^(NSProgress * _Nonnull downloadProgress) &#123; &#125; success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; NSLog(@"%@\n%@",task.response,responseObject);&#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; NSLog(@"%@",error);&#125;]; æ€»ç»“ï¼šè¿™é‡Œä½¿ç”¨æ–¹æ³•å…¶å®éå¸¸ç®€å•å’Œæˆ‘ä»¬ä¹‹å‰çš„ä½¿ç”¨æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œåªæ˜¯è¿™é‡Œ AFN æŠŠè¯·æ±‚è·¯å¾„ç»™æ‹†åˆ†äº†ï¼ŒæŠŠå‚æ•°å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ªå­—å…¸çš„æ–¹å¼è£…è½½ã€‚ç›¸ä¿¡è¿™é‡Œå¤§å®¶åº”è¯¥éƒ½å¯ä»¥æ˜ç™½ä¸ºä»€ä¹ˆä½œè€… æŠŠå‚æ•°å•ç‹¬ç»™æ‹¿å‡ºæ¥ï¼Œè¿™æ ·æ›´æœ‰åˆ©äºä»£ç çš„å°è£…ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ·æ¥æ›´åŠ çš„æ–¹ä¾¿ã€‚ æ³¨æ„ï¼šè¿™é‡Œå…³äº AFNï¼ˆGET | POST è¯·æ±‚ï¼‰å†…éƒ¨ä¸šåŠ¡é€»è¾‘æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œå’Œä¹‹å‰ä½¿ç”¨ NSURLSession å¤§è‡´æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä½ éœ€è¦äº†è§£ å¯ä»¥åœ¨çœ‹ä¸€ä¸‹ å­¦ä¹ æ€»ç»“(äºŒ) Examples ã€AFN æ–‡ä»¶ä¸‹è½½ | ä¸Šä¼ ã€‘ AFN å®ç°æ–‡ä»¶ä¸‹è½½æ­¥éª¤ï¼š åˆ›å»ºä¼šè¯ç®¡ç†è€… åˆ›å»ºä¸‹è½½è·¯å¾„å’Œè¯·æ±‚å¯¹è±¡ åˆ›å»ºä¸‹è½½ä»»åŠ¡ æ‰§è¡Œä¸‹è½½ 123456789101112131415161718192021222324252627282930313233343536373839// 1.åˆ›å»ºä¼šè¯ç®¡ç†è€…AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];// 2.åˆ›å»ºä¸‹è½½è·¯å¾„å’Œè¯·æ±‚å¯¹è±¡NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_01.mp4"];NSURLRequest *request = [NSURLRequest requestWithURL:url];// 3.åˆ›å»ºä¸‹è½½ä»»åŠ¡/** Request: è¯·æ±‚å¯¹è±¡ progress: è¿›åº¦å›è°ƒï¼ˆç›‘å¬ä¸‹è½½è¿›åº¦ï¼‰ completedUnitCount: å·²ç»ä¸‹è½½çš„æ•°æ®å¤§å° totalUnitCount: æ–‡ä»¶æ•°æ®çš„æ€»å¤§å° destination: å›è°ƒ,è¯¥blockéœ€è¦è¿”å›å€¼ï¼ˆNSURLç±»å‹ï¼‰,å‘Šè¯‰ç³»ç»Ÿåº”è¯¥æŠŠæ–‡ä»¶å‰ªåˆ‡åˆ°ä»€ä¹ˆåœ°æ–¹ targetPath: æ–‡ä»¶çš„ä¸´æ—¶ä¿å­˜è·¯å¾„ response: å“åº”å¤´ä¿¡æ¯ completionHandler: è¯·æ±‚å®Œæˆåå›è°ƒ responseï¼šå“åº”å¤´ä¿¡æ¯ filePathï¼šæ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œå³destinationå›è°ƒçš„è¿”å›å€¼ errorï¼šé”™è¯¯ä¿¡æ¯ */NSURLSessionDownloadTask *downloadTask = [manager downloadTaskWithRequest:request progress:^(NSProgress * _Nonnull downloadProgress) &#123; // ç›‘å¬ä¸‹è½½è¿›åº¦ï¼ˆ3.0ç‰ˆæœ¬ä¹‹åçš„åšæ³•ï¼‰ NSLog(@"%f",1.0 *downloadProgress.completedUnitCount / downloadProgress.totalUnitCount); &#125; destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) &#123; // æŒ‡å®šä¸‹è½½è·¯å¾„ // targetPathä¸´æ—¶è·¯å¾„,fullPathå­˜å‚¨è·¯å¾„ NSString *fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:response.suggestedFilename]; NSLog(@"%@\n%@",targetPath,fullPath); return [NSURL fileURLWithPath:fullPath];&#125; completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nullable filePath, NSError * _Nullable error) &#123; NSLog(@"%@\n%@",filePath,error);&#125;];// 4.æ‰§è¡Œä¸‹è½½[downloadTask resume]; æ³¨æ„ï¼šå¦‚ä½•ç›‘å¬ä¸‹è½½è¿›åº¦ï¼ŒAFN 3.0ä¹‹åçš„ç‰ˆæœ¬ç›‘å¬ä¸‹è½½è¿›åº¦æ˜¯ä¸Šé¢çš„åšæ³•ã€‚è€ŒAFN åœ¨2.6.3 ä¹‹å‰å¹¶æ²¡æœ‰æä¾› progress å›è°ƒç»™æˆ‘ä»¬ï¼Œæ­¤æ—¶è¦æƒ³ç›‘å¬ä¸‹è½½è¿›åº¦éœ€è¦ä½¿ç”¨KVOï¼Œç»™å®ƒæ·»åŠ ä¸€ä½è§‚å¯Ÿè€…ç›‘å¬å†…éƒ¨ progresså€¼çš„æ”¹å˜ã€‚1234567891011121314151617181920212223AFHTTPSessionManager *manage = [AFHTTPSessionManager manager]; NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_01.mp4"]]; // åˆ›å»ºä¸‹è½½è¿›åº¦ï¼Œå¹¶ç›‘å¬ NSProgress *progress = nil; NSURLSessionDownloadTask *downloadTask = [manage downloadTaskWithRequest:request progress:&amp;progress destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) &#123; // æŒ‡å®šä¸‹è½½è·¯å¾„ NSString *fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:response.suggestedFilename]; NSLog(@"%@\n%@",targetPath,fullPath); return [NSURL fileURLWithPath:fullPath]; &#125; completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nonnull filePath, NSError * _Nonnull error) &#123; NSLog(@"æ–‡ä»¶ä¸‹è½½å®Œæ¯•---%@",filePath); &#125;]; // ä½¿ç”¨KVOç›‘å¬ä¸‹è½½è¿›åº¦ [progress addObserver:self forKeyPath:@"completedUnitCount" options:NSKeyValueObservingOptionNew context:nil]; // å¯åŠ¨ä»»åŠ¡ [downloadTask resume]; 12345678910111213// è·å–å¹¶è®¡ç®—å½“å‰æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(NSProgress *)progress change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context &#123; NSLog(@&quot;%zd--%zd&quot;,progress.completedUnitCount,progress.totalUnitCount); NSLog(@&quot;%f&quot;,1.0 * progress.completedUnitCount/progress.totalUnitCount)&#125;- (void)dealloc&#123; // ç§»é™¤(ç›‘å¬) [self.person removeObserver:self forKeyPath:@&quot;completedUnitCount&quot;];&#125; AFN æ–‡ä»¶ä¸Šä¼ 1234567891011121314151617181920212223242526272829// 1.åˆ›å»ºä¼šè¯ç®¡ç†è€…AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];// 2.å‘é€postè¯·æ±‚ä¸Šä¼ æ–‡ä»¶/* POST: è¯·æ±‚è·¯å¾„ï¼ˆNSStringç±»å‹ï¼‰ parameters: éæ–‡ä»¶å‚æ•°ï¼Œä»¥å­—å…¸çš„æ–¹å¼ä¼ é€’ constructingBodyWithBlock: å¤„ç†è¦ä¸Šä¼ çš„æ–‡ä»¶æ•°æ®(åœ¨è¯¥å›è°ƒä¸­æ‹¼æ¥æ–‡ä»¶å‚æ•°) progress: è¿›åº¦å›è°ƒ uploadProgress.completedUnitCount:å·²ç»ä¸Šä¼ çš„æ•°æ®å¤§å° uploadProgress.totalUnitCountï¼šæ•°æ®çš„æ€»å¤§å° success: æˆåŠŸå›è°ƒ taskï¼šä¸Šä¼ Task responseObject:æœåŠ¡å™¨è¿”å›çš„å“åº”ä½“ä¿¡æ¯ï¼ˆå·²ç»ä»¥JSONçš„æ–¹å¼è½¬æ¢ä¸ºOCå¯¹è±¡ï¼‰ failure: å¤±è´¥å›è°ƒ */[manager POST:@"http://120.25.226.186:32812/upload" parameters:nil constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; _Nonnull formData) &#123; // ä½¿ç”¨formDataæ¥æ‹¼æ¥æ•°æ® [formData appendPartWithFileURL:[NSURL fileURLWithPath:@"/Users/sunhui/Desktop/LNnet2.16/LNnet/Assets.xcassets/LN.imageset/LN.png"] name:@"file" error:nil]; &#125; progress:^(NSProgress * _Nonnull uploadProgress) &#123; NSLog(@"%f",1.0 * uploadProgress.completedUnitCount / uploadProgress.totalUnitCount); &#125; success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; NSLog(@"ä¸Šä¼ æˆåŠŸ---%@",responseObject); &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; NSLog(@"ä¸Šä¼ å¤±è´¥---%@",error);&#125;]; æ€»ç»“ï¼šè¿™é‡Œä½¿ç”¨ formData æ¥æ‹¼æ¥æ•°æ®ï¼Œå…±æœ‰ä¸‰ç§æ–¹æ³•å¦‚ä¸‹1234567891011121314151617// æ–‡ä»¶ä¸Šä¼ æ‹¼æ¥æ•°æ®çš„ç¬¬ä¸€ç§æ–¹å¼ï¼ˆFileDataï¼‰/* FileData: äºŒè¿›åˆ¶æ•°æ® è¦ä¸Šä¼ çš„æ–‡ä»¶å‚æ•° name: æœåŠ¡å™¨è§„å®šçš„ @"file" fileName: è¯¥æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä»¥ä»€ä¹ˆåç§°ä¿å­˜ */UIImage *image = [UIImage imageNamed:@"LNl.png"];NSData *imageData = UIImagePNGRepresentation(image);[formData appendPartWithFileData:data name:@"file" fileName:@"xxoo.png" mimeType:@"application/octet-stream"];// æ–‡ä»¶ä¸Šä¼ æ‹¼æ¥æ•°æ®çš„ç¬¬äºŒç§æ–¹å¼ï¼ˆFileURLï¼‰[formData appendPartWithFileURL:fileUrl name:@"file" fileName:@"xx.png" mimeType:@"application/octet-stream" error:nil];// æ–‡ä»¶ä¸Šä¼ æ‹¼æ¥æ•°æ®çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼ˆFileURLï¼‰[formData appendPartWithFileURL:fileUrl name:@"file" error:nil]; Examples ã€AFN åºåˆ—åŒ–å¤„ç†ã€‘ 1ã€AFN å®ƒå†…éƒ¨é»˜è®¤æŠŠæœåŠ¡å™¨å“åº”çš„æ•°æ®å½“åš JSONæ¥è¿›è¡Œè§£æï¼Œæ‰€ä»¥å¦‚æœæœåŠ¡å™¨è¿”å›ç»™æˆ‘çš„ä¸æ˜¯JSONæ•°æ®é‚£ä¹ˆè¯·æ±‚æŠ¥é”™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è®¾ç½® AFN å¯¹å“åº”ä¿¡æ¯çš„è§£ææ–¹å¼ã€‚AFNæä¾›äº†ä¸‰ç§è§£æå“åº”ä¿¡æ¯çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š AFHTTPResponseSerializerï¼ˆé»˜è®¤äºŒè¿›åˆ¶å“åº”æ•°æ®ï¼Œè§£ææ–¹æ¡ˆï¼‰ AFJSONResponseSerializerï¼ˆè¿”å›JSONç±»å‹ï¼ŒJSONè§£ææ–¹æ¡ˆ.é»˜è®¤ï¼‰ AFXMLParserResponseSerializerï¼ˆè¿”å›XMLç±»å‹ï¼ŒXMLè§£æï¼‰ 2ã€è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„æ•°æ®æ ¼å¼ä¸å¤ªä¸€è‡´ï¼ˆæŸ¥çœ‹ï¼šå¼€å‘è€…å·¥å…·Content-Type:text/xmlï¼‰ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µä¹Ÿæœ‰å¯èƒ½è¯·æ±‚ä¸æˆåŠŸã€‚è§£å†³æ–¹æ³•: ç›´æ¥åœ¨æºä»£ç ä¸­ä¿®æ”¹ï¼Œæ·»åŠ ç›¸åº”çš„Content-Type æ‹¿åˆ°è¿™ä¸ªå±æ€§ï¼Œæ·»åŠ åˆ°å®ƒçš„é›†åˆä¸­ã€‚ è¿”å›JSONã€XMLã€äºŒè¿›åˆ¶ã€text/xml ç›¸å…³ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243// 1.åˆ›å»ºè¯·æ±‚ç®¡ç†è€…AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];/* çŸ¥è¯†ç‚¹1ï¼šè®¾ç½®AFNé‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼æ¥è§£ææœåŠ¡å™¨è¿”å›çš„æ•°æ®*/// æ³¨æ„ï¼šå¦‚æœè¿”å›çš„æ˜¯XMLï¼Œé‚£ä¹ˆå‘Šè¯‰AFNï¼Œå“åº”çš„æ—¶å€™ä½¿ç”¨XMLçš„æ–¹å¼è§£æmanager.responseSerializer = [AFXMLParserResponseSerializer serializer];// æ³¨æ„ï¼šå¦‚æœè¿”å›çš„å°±æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé‚£ä¹ˆé‡‡ç”¨é»˜è®¤äºŒè¿›åˆ¶çš„æ–¹å¼æ¥è§£ææ•°æ®//manager.responseSerializer = [AFHTTPResponseSerializer serializer];// æ³¨æ„ï¼šå¦‚æœè¿”å›çš„æ˜¯JSONï¼Œé‡‡ç”¨JSONçš„æ–¹å¼æ¥è§£ææ•°æ®//manager.responseSerializer = [AFJSONResponseSerializer serializer];/*çŸ¥è¯†ç‚¹2 å‘Šè¯‰AFNï¼Œå†åºåˆ—åŒ–æœåŠ¡å™¨è¿”å›çš„æ•°æ®çš„æ—¶å€™ï¼Œæ”¯æŒæ­¤ç§ç±»å‹ */manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@"text/html"]; // 2.æŠŠæ‰€æœ‰çš„è¯·æ±‚å‚æ•°é€šè¿‡å­—å…¸çš„æ–¹å¼æ¥è£…è½½ï¼Œ // GETæ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨æŠŠæ‰€æœ‰çš„é”®å€¼å¯¹å–å‡ºä»¥&amp;ç¬¦å·æ‹¼æ¥å¹¶æœ€åç”¨ï¼Ÿç¬¦å·è¿æ¥åœ¨è¯·æ±‚è·¯å¾„åé¢ NSDictionary *dict = @&#123; @"username":@"223", @"pwd":@"ewr", @"type":@"XML" &#125;; // 3.å‘é€GETè¯·æ±‚[manager GET:@"http://120.25.226.186:32812/login" parameters:nil progress:^(NSProgress * _Nonnull downloadProgress) &#123; &#125; success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; // 4.è¯·æ±‚æˆåŠŸçš„å›è°ƒblock NSLog(@"è¯·æ±‚æˆåŠŸ-\n%@",[responseObject class]); // è§£æ NSXMLParser *parser = (NSXMLParser *)responseObject; parser.delegate = self;// éµå®ˆ&lt;NSXMLParserDelegate&gt; [parser parse];// å¼€å§‹è§£æ &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; // 5.è¯·æ±‚å¤±è´¥çš„å›è°ƒï¼Œå¯ä»¥æ‰“å°errorçš„å€¼æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ NSLog(@"è¯·æ±‚å¤±è´¥-%@",error); &#125;]; 123456#pragma mark - NSXMLParserDelegate- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary&lt;NSString *,NSString *&gt; *)attributeDict &#123; if ([elementName isEqualToString:@"videos"]) &#123; return; &#125; NSLog(@"å¼€å§‹è§£ææŸä¸ªå…ƒç´ %@--%@",elementName,attributeDict);&#125; Examples ã€AFN æ£€æµ‹ç½‘ç»œçŠ¶æ€ã€‘ ä½¿ç”¨ AFN æ¡†æ¶ æ¥æ£€æµ‹ç½‘ç»œçŠ¶æ€çš„æ”¹å˜12345678910111213141516171819202122232425262728293031// 1.åˆ›å»ºæ£€æµ‹ç½‘ç»œçŠ¶æ€ç®¡ç†è€…AFNetworkReachabilityManager *manager = [AFNetworkReachabilityManager manager];// 2.æ£€æµ‹ç½‘ç»œçŠ¶æ€æ”¹å˜/** AFNetworkReachabilityStatusUnknown = -1, æœªçŸ¥ AFNetworkReachabilityStatusNotReachable = 0, æ— ç½‘ç»œ AFNetworkReachabilityStatusReachableViaWWAN = 1, èœ‚çªç½‘ç»œ AFNetworkReachabilityStatusReachableViaWiFi = 2, WIFI */[manager setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) &#123; switch (status) &#123; case AFNetworkReachabilityStatusReachableViaWWAN: NSLog(@"èœ‚çªç½‘ç»œ"); break; case AFNetworkReachabilityStatusReachableViaWiFi: NSLog(@"WIFI"); break; case AFNetworkReachabilityStatusNotReachable: NSLog(@"æ²¡æœ‰ç½‘ç»œ"); break; case AFNetworkReachabilityStatusUnknown: NSLog(@"æœªçŸ¥"); break; default: break; &#125;&#125;];// 3.å¼€å§‹æ£€æµ‹[manager startMonitoring]; Encapsulationã€AFN ä½¿ç”¨æŠ€å·§ã€‘ AFN ä½¿ç”¨æŠ€å·§ åœ¨å¼€å‘çš„æ—¶å€™å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»ï¼Œç»§æ‰¿è‡ªæˆ‘ä»¬çš„ AFN ä¸­çš„è¯·æ±‚ç®¡ç†è€…ï¼Œå†æ§åˆ¶å™¨ä¸­çœŸæ­£å‘è¯·æ±‚çš„ä»£ç ä½¿ç”¨è‡ªå·±å°è£…çš„å·¥å…·ç±»ã€‚ è¿™æ ·åšçš„ä¼˜ç‚¹æ˜¯ä»¥åå¦‚æœä¿®æ”¹äº†åº•å±‚ä¾èµ–çš„æ¡†æ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¿®æ”¹è¿™ä¸ªå·¥å…·ç±»å°±å¯ä»¥äº†ï¼Œè€Œä¸ç”¨å†ä¸€ä¸ªä¸€ä¸ªçš„å»ä¿®æ”¹ã€‚ è¯¥å·¥å…·ç±»ä¸€èˆ¬æä¾›ä¸€ä¸ªå•ä¾‹æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ä¼šè®¾ç½®ä¸€ä¸ªåŸºæœ¬çš„è¯·æ±‚è·¯å¾„ã€‚ è¯¥æ–¹æ³•é€šå¸¸è¿˜ä¼šæä¾›å¯¹ GETæˆ–POST è¯·æ±‚çš„å°è£…ã€‚ åœ¨å¤–é¢çš„æ—¶å€™é€šè¿‡è¯¥å·¥å…·ç±»æ¥å‘é€è¯·æ±‚ å•ä¾‹æ–¹æ³•ç¤ºä¾‹ï¼š12345678910+ (instancetype)shareNetworkTools &#123; static LNNetworkTools *instance; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; // æ³¨æ„: BaseURLä¸­ä¸€å®šè¦ä»¥/ç»“å°¾ NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/"]; instance = [[self alloc] initWithBaseURL:url]; &#125;); return instance;&#125; æç¤ºï¼šè¿™é‡Œé’ˆå¯¹AFN äºŒæ¬¡å°è£…ï¼Œæˆ‘ä¼šå•å¼€ä¸€æ–‡å­¦ä¹ æ€»ç»“ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯å¦å…³æ³¨ ~ Securityã€AFN æ•°æ®å®‰å…¨ã€‘ åœ¨å†™é¡¹ç›®ä¸­ï¼Œæ•°æ®çš„å®‰å…¨æ€§è‡³å…³é‡è¦ï¼Œè€Œä»…ä»…ç”¨ POST è¯·æ±‚æäº¤ç”¨æˆ·çš„éšç§æ•°æ®ï¼Œè¿˜æ˜¯ä¸èƒ½å®Œå…¨è§£å†³å®‰å…¨é—®é¢˜ã€‚ è¦æƒ³éå¸¸å®‰å…¨çš„ä¼ è¾“æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨httpsã€‚æŠ“åŒ…ä¸å¯ä»¥ï¼Œä½†æ˜¯ä¸­é—´äººæ”»å‡»åˆ™æœ‰å¯èƒ½ã€‚å»ºè®®åŒå‘éªŒè¯é˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚å¯å…ˆå‚è€ƒ iOSæ•°æ®å®‰å…¨â€”åŠ å¯†è§£å¯†ã€Œå­¦ä¹ æ€»ç»“ã€è¿™éƒ¨åˆ†ä¹Ÿæ­£åœ¨å­¦ä¹ ï¼Œå¦‚æœä½ æœ‰æ¯”è¾ƒå¥½çš„è§£å†³æ–¹å¼ï¼Œå¯å¦åˆ†äº«ä¸€ä¸‹ï¼Œå­¦ä¹ å­¦ä¹ ã€‚ Downloadã€AFN ç¦»çº¿æ–­ç‚¹ä¸‹è½½ã€‘ AFN 3.0 æ˜¯åŸºäº NSURLSession çš„ã€‚æ‰€ä»¥å®ç°åŸç†å’ŒNSURLSession å·®ä¸å¤šã€‚å¯å‚è€ƒ NSURLSession è¯¦è§£ä½¿ç”¨ å®ç°æ–­ç‚¹ä¸‹è½½çš„æ–¹æ³•ã€‚ è¿™é‡Œä½¿ç”¨äº† NSURLSessionDataTaskï¼Œä»¥ä¾¿å®ç°ã€Œç¦»çº¿æ–­ç‚¹ä¸‹è½½ã€ã€‚åœ¨è¿™é‡Œä»…ä¾›å‚è€ƒï¼ˆä¸å¿…æ‹¿èµ°ç›´æ¥ç”¨ï¼‰ã€‚çœ‹ä¸‹ä»£ç å®ç°ï¼š 1ã€å®šä¹‰ä¸‹è½½æ–‡ä»¶éœ€è¦ç”¨åˆ°çš„ç±»ï¼Œè¿™é‡Œä¸éœ€è¦å®ç°ä»£ç†1234567891011121314//-----------------------AFN æ–­ç‚¹ä¸‹è½½ å±æ€§å®šä¹‰--------------------/////** æ–‡ä»¶çš„æ€»é•¿åº¦ */@property (nonatomic, assign) NSInteger fileLength;/** å½“å‰ä¸‹è½½é•¿åº¦ */@property (nonatomic, assign) NSInteger currentLength;/** æ–‡ä»¶å¥æŸ„å¯¹è±¡ */@property (nonatomic, strong) NSFileHandle *fileHandle;/** ä¸‹è½½ä»»åŠ¡ */@property (nonatomic, strong) NSURLSessionDataTask *dataTask;/* ä¼šè¯ç®¡ç†è€… */@property (nonatomic, strong) AFURLSessionManager *manager;/** è·å¾—æ–‡ä»¶å…¨è·¯å¾„ */@property (nonatomic, strong) NSString *fullPath; 2ã€æ·»åŠ å…¨å±€ AFURLSessionManagerã€NSURLSessionDataTask æ‡’åŠ è½½ä»£ç ã€‚è¿™é‡Œæˆ‘æŠŠå®ç° ä»£ç  éƒ½æ”¾è¿™é‡Œäº†ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990// manager æ‡’åŠ è½½- (AFURLSessionManager *)manager &#123; if (!_manager) &#123; // åˆ›å»ºä¼šè¯ç®¡ç†è€… // Configuration:é…ç½®ä¿¡æ¯ï¼ˆç”¨é»˜è®¤çš„ defaultSessionConfigurationï¼‰ _manager = [[AFURLSessionManager alloc] initWithSessionConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration]]; &#125; return _manager;&#125;// downloadTask æ‡’åŠ è½½- (NSURLSessionDataTask *)dataTask &#123; if (!_dataTask) &#123; // 1.åˆ›å»ºä¸‹è½½URL NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_01.mp4"]; // 2.åˆ›å»ºrequestè¯·æ±‚ NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; // 3.è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯,Rangeå‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚é‚£ä¸€éƒ¨åˆ†æ•°æ® NSString *range = [NSString stringWithFormat:@"bytes=%zd-", self.currentLength]; [request setValue:range forHTTPHeaderField:@"Range"]; // 4.åˆ›å»ºTask __weak typeof(self) weakSelf = self; _dataTask = [self.manager dataTaskWithRequest:request uploadProgress:nil downloadProgress:^(NSProgress * _Nonnull downloadProgress) &#123; &#125; completionHandler:^(NSURLResponse * _Nonnull response, id _Nullable responseObject, NSError * _Nullable error) &#123; NSLog(@"File downloaded to: %@",weakSelf.fullPath); // æ¸…ç©ºé•¿åº¦ weakSelf.currentLength = 0; weakSelf.fileLength = 0; // å…³é—­æ–‡ä»¶å¥æŸ„ï¼ˆåˆ›å»ºå¥æŸ„,è¦è®°å¾—åœ¨å®Œæˆæ–¹æ³•é‡Œ å…³é—­å¥æŸ„ç½®ç©ºï¼‰ [weakSelf.fileHandle closeFile]; weakSelf.fileHandle = nil; &#125;]; // 1.æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº” å®ƒé»˜è®¤ä¼šå–æ¶ˆè¯¥è¯·æ±‚ [self.manager setDataTaskDidReceiveResponseBlock:^NSURLSessionResponseDisposition(NSURLSession * _Nonnull session, NSURLSessionDataTask * _Nonnull dataTask, NSURLResponse * _Nonnull response) &#123; //NSLog(@"line = %d, %@--&gt;NSURLSessionResponseDisposition",__LINE__,[NSThread currentThread]); // è·å¾—ä¸‹è½½æ–‡ä»¶çš„æ€»é•¿åº¦ï¼šæœ¬æ¬¡è¯·æ±‚ä¸‹è½½çš„æ–‡ä»¶é•¿åº¦ + å½“å‰å·²ç»ä¸‹è½½çš„æ–‡ä»¶é•¿åº¦ weakSelf.fileLength = response.expectedContentLength + self.currentLength; // åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶åˆ°æ²™ç›’ä¸­ NSFileManager *manager = [NSFileManager defaultManager]; if (![manager fileExistsAtPath:weakSelf.fullPath]) &#123; // å¦‚æœæ²¡æœ‰ä¸‹è½½æ–‡ä»¶çš„è¯ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æœæœ‰ä¸‹è½½æ–‡ä»¶çš„è¯ï¼Œåˆ™ä¸ç”¨é‡æ–°åˆ›å»º(ä¸ç„¶ä¼šè¦†ç›–æ‰ä¹‹å‰çš„æ–‡ä»¶) [manager createFileAtPath:weakSelf.fullPath contents:nil attributes:nil]; &#125; // åˆ›å»ºæ–‡ä»¶å¥æŸ„ weakSelf.fileHandle = [NSFileHandle fileHandleForWritingAtPath:weakSelf.fullPath]; // å…è®¸å¤„ç†æœåŠ¡å™¨çš„å“åº”ï¼Œæ‰ä¼šç»§ç»­æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ® return NSURLSessionResponseAllow; &#125;]; // 2.æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼ˆè°ƒç”¨å¤šæ¬¡ï¼‰ [self.manager setDataTaskDidReceiveDataBlock:^(NSURLSession * _Nonnull session, NSURLSessionDataTask * _Nonnull dataTask, NSData * _Nonnull data) &#123; //NSLog(@"line = %d, %@--&gt;setDataTaskDidReceiveDataBlock",__LINE__,[NSThread currentThread]); // æŒ‡å®šæ•°æ®çš„å†™å…¥ä½ç½® -- æ–‡ä»¶å†…å®¹çš„æœ€åé¢ [weakSelf.fileHandle seekToEndOfFile]; // å‘æ²™ç›’å†™å…¥æ•°æ® [weakSelf.fileHandle writeData:data]; // è®¡ç®—æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦ weakSelf.currentLength += data.length; NSLog(@"ä¸‹è½½è¿›åº¦2--&gt;%f",1.0 * self.currentLength / self.fileLength); // è·å–ä¸»çº¿ç¨‹ï¼Œä¸ç„¶æ— æ³•æ­£ç¡®æ˜¾ç¤ºè¿›åº¦ã€‚ [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; // ä¸‹è½½è¿›åº¦ if (weakSelf.fileLength == 0) &#123; weakSelf.progressView.progress = 0.0; weakSelf.progressLabel.text = [NSString stringWithFormat:@"å½“å‰ä¸‹è½½è¿›åº¦:00.00%%"]; &#125; else &#123; weakSelf.progressView.progress = 1.0 * weakSelf.currentLength / weakSelf.fileLength; weakSelf.progressLabel.text = [NSString stringWithFormat:@"å½“å‰ä¸‹è½½è¿›åº¦:%.2f%%",100.0 * weakSelf.currentLength / weakSelf.fileLength]; &#125; &#125;]; &#125;]; &#125; return _dataTask;&#125; 3ã€æ‡’åŠ è½½ï¼ˆæ–¹æ³•çš„ç‹¬ç«‹ä¸æŠ½å–ï¼‰123456789101112131415161718192021222324// è·å¾—æ–‡ä»¶å…¨è·¯å¾„-(NSString *)fullPath &#123; if (!_fullPath) &#123; // æ‹¼æ¥æ–‡ä»¶åçš„æœ¬åœ°åç§° FileName @"123.mp4" æˆ–è€… [url lastPathComponent] è·å–URLæœ€åä¸€ä¸ªå­—èŠ‚å‘½å _fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:FileName]; &#125; return _fullPath;&#125;// è·å¾—æŒ‡å®šæ–‡ä»¶è·¯å¾„å¯¹åº”æ–‡ä»¶çš„æ•°æ®å¤§å°-(NSInteger)getFileSize &#123; NSDictionary *fileInfoDict = [[NSFileManager defaultManager]attributesOfItemAtPath:self.fullPath error:nil]; //NSLog(@"%@",fileInfoDict); NSInteger currentSize = [fileInfoDict[@"NSFileSize"] integerValue]; return currentSize;&#125;æ³¨é‡Šï¼šAFN å®ç°æ–‡ä»¶1.å¼€å§‹ä¸‹è½½ã€æš‚åœä¸‹è½½ã€å–æ¶ˆä¸‹è½½ã€æ¢å¤ä¸‹è½½2.æ”¯æŒåå°ä¸‹è½½3.åœ¨å¤„ç†ä¸‹è½½ä»»åŠ¡çš„æ—¶å€™å¯ä»¥ç›´æ¥æŠŠæ•°æ®ä¸‹è½½åˆ°ç£ç›˜4.ä¸‹è½½çš„æ—¶å€™ æ˜¯å­çº¿ç¨‹å¼‚æ­¥å¤„ç†ï¼Œæ•ˆç‡æ›´é«˜ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AFNetworking3.1â€”å†…éƒ¨é€»è¾‘å¤„ç†è¿‡ç¨‹]]></title>
    <url>%2FSourceAnnotations%2FAFNLibraryProcessingLogic.html</url>
    <content type="text"><![CDATA[Write in the first AFNetWorking åŸºæœ¬æ˜¯iOSå¼€å‘ä¸­ä½¿ç”¨ç½‘ç»œé€šä¿¡æ¡†æ¶çš„æ ‡é…ï¼Œè¿™ä¸ªæ¡†æ¶æœ¬èº«æ¯”è¾ƒåºå¤§ï¼Œä¹Ÿå¾ˆå¤æ‚ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸éå¸¸ç®€å•ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€AFN å†…éƒ¨é€»è¾‘å¤„ç†è¿‡ç¨‹ã€‘ä»¥Getè¯·æ±‚ä¸ºä¾‹ï¼Œå­¦ä¹ æ€»ç»“ï¼Œåœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š AFN GETå†…éƒ¨é€»è¾‘å¤„ç† AFN POSTå†…éƒ¨é€»è¾‘å¤„ç† æ€»ç»“ åç»­ã€AFN æ¡†æ¶ | æºç  å­¦ä¹ æ€»ç»“ã€‘ Business logicã€AFN GET å†…éƒ¨é€»è¾‘å¤„ç†ã€‘ è¿™æ˜¯ AFNetworking å‘èµ·ä¸€ä¸ª Get è¯·æ±‚çš„æµç¨‹å›¾ï¼Œå¤§æ¦‚å¯ä»¥åˆ†ä¸ºè¿™å‡ ä¸ªæ­¥éª¤ï¼Œä¸‹é¢ä¼šé€ä¸ªè§£è¯»è¿™ä¸ªæµç¨‹ã€‚ 1. AFHTTPSessionManager å‘èµ·GETè¯·æ±‚ è¿™ä¸ªæ–¹æ³•æ˜¯ AFN çš„ Getè¯·æ±‚ çš„èµ·ç‚¹ï¼Œå…¶ä»– Get è¯·æ±‚çš„æ–¹æ³•ä¹Ÿéƒ½æ˜¯ç›´æ¥æˆ–è€…é—´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å‘èµ· Get è¯·æ±‚ã€‚è¿™ä¸ªæ–¹æ³•çš„ä»£ç é‡å¾ˆå°‘ä¹Ÿå¾ˆç›´è§‚ï¼Œå°±æ˜¯è°ƒç”¨å…¶ä»–æ–¹æ³•ç”Ÿæˆ NSURLSessionDataTaskå¯¹è±¡çš„å®ä¾‹ï¼Œç„¶åè°ƒç”¨ NSURLSessionDataTask çš„ resume æ–¹æ³•å‘èµ·è¯·æ±‚ã€‚ 2. åˆ›å»º NSURLSessionDataTask è¿™ä¸ªæ–¹æ³•æ˜¯åˆ›å»º NSURLSessionDataTask å¯¹è±¡å®ä¾‹å¹¶è¿”å›è¿™ä¸ªå®ä¾‹ã€‚é¦–å…ˆåˆ›å»ºä¸€ä¸ª NSMutableURLRequest å¯¹è±¡çš„å®ä¾‹ï¼Œç„¶åé…ç½®ã€‚ä¹‹åæ˜¯ä½¿ç”¨ NSMutableURLRequest å¯¹è±¡çš„å®ä¾‹åˆ›å»ºNSURLSessionDataTask å¯¹è±¡å®ä¾‹ï¼Œç„¶åé…ç½®ï¼Œå¯ä»¥é€‰æ‹©æ€§åœ°ä¼ å…¥å„ç±»Blockå›è°ƒï¼Œç”¨äºç›‘å¬ç½‘ç»œè¯·æ±‚çš„è¿›åº¦æ¯”å¦‚ä¸Šä¼ è¿›åº¦ï¼Œä¸‹è½½è¿›åº¦ï¼Œè¯·æ±‚æˆåŠŸï¼Œè¯·æ±‚å¤±è´¥ã€‚ 3. é…ç½® NSMutableURLRequestå¯¹è±¡ åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å…ˆä½¿ç”¨äº† url åˆ›å»ºäº†ä¸€ä¸ª NSMutableURLRequest å¯¹è±¡çš„å®ä¾‹,å¹¶ä¸”è®¾ç½®äº† HTTPMethod ä¸º Get æ–¹æ³•ï¼ˆå¦‚æœæ˜¯Postæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™é‡Œå°±æ˜¯è®¾ç½®Postæ–¹æ³•ï¼‰ç„¶åä½¿ç”¨KVCçš„æ–¹æ³•è®¾ç½®äº† NSMutableURLRequest çš„ä¸€äº›å±æ€§ã€‚ 12345678910111213141516// è®¾ç½® NSMutableURLRequest çš„å±æ€§static NSArray * AFHTTPRequestSerializerObservedKeyPaths() &#123; static NSArray *_AFHTTPRequestSerializerObservedKeyPaths = nil; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; //allowsCellularAccess å…è®¸ä½¿ç”¨æ•°æ®æµé‡ //cachePolicy ç¼“å­˜ç­–ç•¥ //HTTPShouldHandleCookies å¤„ç†Cookie //HTTPShouldUsePipelining æ‰¹é‡è¯·æ±‚ //networkServiceType ç½‘ç»œçŠ¶æ€ //timeoutInterval è¶…æ—¶ _AFHTTPRequestSerializerObservedKeyPaths = @[NSStringFromSelector(@selector(allowsCellularAccess)), NSStringFromSelector(@selector(cachePolicy)), NSStringFromSelector(@selector(HTTPShouldHandleCookies)), NSStringFromSelector(@selector(HTTPShouldUsePipelining)), NSStringFromSelector(@selector(networkServiceType)), NSStringFromSelector(@selector(timeoutInterval))]; &#125;); return _AFHTTPRequestSerializerObservedKeyPaths;&#125; å…ˆè®¾ç½® HTTP headerï¼Œä¹‹åæ ¼å¼åŒ–è¯·æ±‚å‚æ•°ï¼Œè®¾ç½®å‚æ•°çš„ç¼–ç ç±»å‹ã€‚è¿™ä¸ªæ˜¯è¿™ä¸ªæ–¹æ³•çš„åŸºæœ¬æ“ä½œæµç¨‹ã€‚å¯¹äºGetæ“ä½œæ¥è¯´ï¼Œå‚æ•°æ˜¯ç›´æ¥æ‹¼æ¥åœ¨è¯·æ±‚åœ°å€åé¢ã€‚ 4. é…ç½® NSURLSessionDataTaskå¯¹è±¡ ä¹‹åé…ç½® NSMutableURLRequest å¯¹è±¡å°±éœ€è¦é…ç½® NSURLSessionDataTask å¯¹è±¡äº†ã€‚ä¸»è¦åˆ†ä¸º2ä¸ªæ­¥éª¤ï¼Œç¬¬ä¸€ä¸ªæ­¥éª¤æ˜¯åˆ›å»º NSURLSessionDataTask å¯¹è±¡å®ä¾‹ï¼Œç¬¬äºŒä¸ªæ­¥éª¤æ˜¯ç»™NSURLSessionDataTask å¯¹è±¡å®ä¾‹è®¾ç½® Delegateã€‚ç”¨äºå®æ—¶äº†è§£ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹ã€‚ AFN çš„ä»£ç†ç»Ÿä¸€ä½¿ç”¨ AFURLSessionManagerTaskDelegate å¯¹è±¡æ¥ç®¡ç†ï¼Œä½¿ç”¨ AFURLSessionManagerTaskDelegate å¯¹è±¡æ¥æ¥ç®¡NSURLSessionTask ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­çš„å›è°ƒï¼Œç„¶åå†ä¼ å…¥ AFN å†…éƒ¨è¿›è¡Œç®¡ç†ã€‚ 12@interface AFURLSessionManagerTaskDelegate : NSObject &lt;NSURLSessionTaskDelegate, NSURLSessionDataDelegate, NSURLSessionDownloadDelegate&gt; å¦‚ä»£ç æ‰€ç¤º AFURLSessionManagerTaskDelegate æ¥ç®¡äº†NSURLSessionTaskDelegateï¼ŒNSURLSessionDataDelegateï¼ŒNSURLSessionDownloadDelegate çš„å„ç§å›è°ƒï¼Œç„¶ååšå†…éƒ¨å¤„ç†ã€‚è¿™ä¹Ÿæ˜¯ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚æ¡†æ¶çš„é‡ç‚¹ï¼Œè®©ç½‘ç»œè¯·æ±‚æ›´åŠ æ˜“ç”¨ï¼Œå¥½ç”¨ã€‚ 1234567891011121314// é€šè¿‡ task çš„æ ‡è¯†ç¬¦ç®¡ç†ä»£ç†- (void)setDelegate:(AFURLSessionManagerTaskDelegate *)delegate forTask:(NSURLSessionTask *)task&#123; NSParameterAssert(task); NSParameterAssert(delegate); [self.lock lock]; // å°†taskå’Œä»£ç†ç±»ç»‘å®šï¼Œtaskçš„taskIdentifierä½œä¸ºå­—å…¸çš„key,delegateä½œä¸ºå­—å…¸çš„value self.mutableTaskDelegatesKeyedByTaskIdentifier[@(task.taskIdentifier)] = delegate; // ç»™è¯¥taskæ·»åŠ ä¸¤ä¸ªKVOäº‹ä»¶ï¼ˆResume å’Œ Suspendï¼‰ [self addNotificationObserverForTask:task]; [self.lock unlock];&#125; é€šè¿‡NSURLSessionTaskçš„taskIdentifieræ ‡è¯†ç¬¦å¯¹delegateè¿›è¡Œç®¡ç†ï¼Œåªè¦æ˜¯ç”¨äºè¯†åˆ«è¯¥NSURLSessionTaskçš„ä»£ç†ã€‚ è®¾ç½®å„ç±»å›è°ƒ Block,ç»™ NSURLSessionTask ä½¿ç”¨ KVO è¿›è¡Œå„ç§è¿‡ç¨‹è¿›åº¦ç›‘å¬ã€‚ 123456#pragma mark -// ç»™taskæ·»åŠ æš‚åœå’Œæ¢å¤çš„é€šçŸ¥- (void)addNotificationObserverForTask:(NSURLSessionTask *)task &#123; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(taskDidResume:) name:AFNSURLSessionTaskDidResumeNotification object:task]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(taskDidSuspend:) name:AFNSURLSessionTaskDidSuspendNotification object:task];&#125; ç›‘å¬ NSURLSessionTask è¢«æŒ‚èµ· å’Œ æ¢å¤çš„é€šçŸ¥ã€‚ 5. ç½‘ç»œè¯·æ±‚å¼€å§‹12345678910111213141516171819202122232425262728// å‘é€GETè¯·æ±‚/** GET: è¯·æ±‚è·¯å¾„(ä¸åŒ…å«å‚æ•°),url parameters: å­—å…¸(å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®~å‚æ•°) progress: è¿›åº¦å›è°ƒ success: æˆåŠŸå›è°ƒï¼ˆtask:è¯·æ±‚ä»»åŠ¡ã€responseObject:å“åº”ä½“ä¿¡æ¯JSON-&gt;OCå¯¹è±¡ï¼‰ failure: å¤±è´¥å›è°ƒï¼ˆerror:é”™è¯¯ä¿¡æ¯ï¼‰ task.response: å“åº”å¤´ */- (NSURLSessionDataTask *)GET:(NSString *)URLString parameters:(id)parameters progress:(void (^)(NSProgress * _Nonnull))downloadProgress success:(void (^)(NSURLSessionDataTask * _Nonnull, id _Nullable))success failure:(void (^)(NSURLSessionDataTask * _Nullable, NSError * _Nonnull))failure&#123; NSURLSessionDataTask *dataTask = [self dataTaskWithHTTPMethod:@"GET" URLString:URLString parameters:parameters uploadProgress:nil downloadProgress:downloadProgress success:success failure:failure]; [dataTask resume]; return dataTask;&#125; å½“ NSURLSessionTask åˆ›å»ºå’Œé…ç½®å®Œæ¯•ä¹‹åï¼Œå®ƒå¹¶ä¸ä¼šä¸»åŠ¨æ‰§è¡Œï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ä¸»åŠ¨è°ƒç”¨ resume æ–¹æ³•ï¼ŒNSURLSessionTask æ‰ä¼šå¼€å§‹æ‰§è¡Œã€‚ 6. ç½‘ç»œè¯·æ±‚å›è°ƒ AFN é‡Œé¢æœ‰å…³ NSURLSessionDelegate çš„å›è°ƒæ–¹æ³•éå¸¸çš„å¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªè¯´å’Œ NSURLSessionTask ç›¸å…³çš„éƒ¨åˆ†æ–¹æ³•å’Œ KVO å¤„ç†æ¥è¿›è¡Œè¯´æ˜ï¼Œå…¶ä»–çš„å¤§å®¶å¯ä»¥å‚è€ƒæºç ç»†çœ‹ã€‚ å¯¹äºæˆ‘ä»¬çš„ Getè¯·æ±‚ æ¥è¯´ï¼Œæˆ‘ä»¬æœ€å…³æ³¨çš„è«è¿‡äºå…³æ³¨è¯·æ±‚è¿‡ç¨‹è¿›åº¦ï¼Œæ”¶åˆ°å“åº”æ•°æ®å’Œè¯·æ±‚å®Œæˆè¿™2ä¸ªå›è°ƒã€‚ KVOç›‘å¬çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–ï¼š123456789101112131415161718192021222324252627282930313233343536// KVOç›‘å¬çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context &#123; if ([object isKindOfClass:[NSURLSessionTask class]] || [object isKindOfClass:[NSURLSessionDownloadTask class]]) &#123; if ([keyPath isEqualToString:NSStringFromSelector(@selector(countOfBytesReceived))]) &#123; NSLog(@"countOfBytesReceived"); // è¿™ä¸ªæ˜¯åœ¨Getè¯·æ±‚ä¸‹ï¼Œç½‘ç»œå“åº”è¿‡ç¨‹ä¸­å·²ç»æ”¶åˆ°çš„æ•°æ®é‡ // å·²ç»æ”¶åˆ° self.downloadProgress.completedUnitCount = [change[NSKeyValueChangeNewKey] longLongValue]; &#125; else if ([keyPath isEqualToString:NSStringFromSelector(@selector(countOfBytesExpectedToReceive))]) &#123; NSLog(@"countOfBytesExpectedToReceive"); // è¿™ä¸ªæ˜¯åœ¨Getè¯·æ±‚ä¸‹ï¼Œç½‘ç»œå“åº”è¿‡ç¨‹ä¸­æœŸå¾…æ”¶åˆ°çš„æ•°æ®é‡ // æœŸå¾…æ”¶åˆ° self.downloadProgress.totalUnitCount = [change[NSKeyValueChangeNewKey] longLongValue]; &#125; else if ([keyPath isEqualToString:NSStringFromSelector(@selector(countOfBytesSent))]) &#123; NSLog(@"countOfBytesSent"); // å·²ç»å‘é€ self.uploadProgress.completedUnitCount = [change[NSKeyValueChangeNewKey] longLongValue]; &#125; else if ([keyPath isEqualToString:NSStringFromSelector(@selector(countOfBytesExpectedToSend))]) &#123; NSLog(@"countOfBytesExpectedToSend"); // æœŸå¾…å‘é€ self.uploadProgress.totalUnitCount = [change[NSKeyValueChangeNewKey] longLongValue]; &#125; &#125; else if ([object isEqual:self.downloadProgress]) &#123; // ä¸‹è½½è¿›åº¦å˜åŒ– if (self.downloadProgressBlock) &#123; self.downloadProgressBlock(object); &#125; &#125; else if ([object isEqual:self.uploadProgress]) &#123; // ä¸Šä¼ è¿›åº¦å˜åŒ– if (self.uploadProgressBlock) &#123; self.uploadProgressBlock(object); &#125; &#125;&#125; æ”¶åˆ°è¯·æ±‚å“åº”ï¼š1234567891011121314151617181920// æ”¶åˆ°è¯·æ±‚å“åº”- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition disposition))completionHandler &#123; NSLog(@"æ”¶åˆ°è¯·æ±‚å“åº”"); // å…è®¸å¤„ç†æœåŠ¡å™¨çš„å“åº”ï¼Œæ‰ä¼šç»§ç»­æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ® NSURLSessionResponseDisposition disposition = NSURLSessionResponseAllow; // æ˜¯å¦æœ‰æ”¶åˆ°è¯·æ±‚å“åº”çš„å›è°ƒBlock if (self.dataTaskDidReceiveResponse) &#123; // è‹¥æœ‰è°ƒç”¨è¯¥Block disposition = self.dataTaskDidReceiveResponse(session, dataTask, response); &#125; // æ˜¯å¦æœ‰è¯·æ±‚å“åº”å®Œæˆçš„å›è°ƒBlock if (completionHandler) &#123; // è‹¥æœ‰è°ƒç”¨è¯¥Block completionHandler(disposition); &#125;&#125; è¯·æ±‚å®Œæˆï¼š123456789101112131415161718192021// è¯·æ±‚å®Œæˆ- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123; NSLog(@"è¯·æ±‚å®Œæˆ"); // å–å‡ºè¯¥NSURLSessionTaskçš„ä»£ç†å¯¹è±¡ AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:task]; // delegate may be nil when completing a task in the background if (delegate) &#123; // è‹¥æ˜¯è¯¥ä»£ç†å¯¹è±¡å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¯¹åº”æ•°æ®è½¬ç»™è¯¥ä»£ç†å¯¹è±¡å¤„ç† [delegate URLSession:session task:task didCompleteWithError:error]; // NSURLSessionTaskä»»åŠ¡å®Œæˆä¹‹åï¼Œç§»é™¤è¯¥NSURLSessionTaskçš„ä»£ç†å¯¹è±¡ [self removeDelegateForTask:task]; &#125; // æ˜¯å¦æœ‰è¯·æ±‚å®Œæˆçš„å›è°ƒBlock if (self.taskDidComplete) &#123; // è‹¥æœ‰è°ƒç”¨æ”¹Block self.taskDidComplete(session, task, error); &#125;&#125; å› ä¸ºåœ¨é…ç½® NSURLSessionDataTask å¯¹è±¡çš„æ—¶å€™æˆ‘ä»¬æœ‰ç»™ NSURLSessionTask åšäº†ä¸€ç³»åˆ—é…ç½®ï¼Œé‚£ä¹ˆå½“ NSURLSessionDataTask ä»»åŠ¡å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥ NSURLSessionDataTask çš„ä¸€ç³»åˆ—é…ç½®å…¨éƒ¨æ¸…ç†æ‰ã€‚ è¿™ä¸ªæ˜¯æˆ‘ä»¬çš„é…ç½®è¿‡ç¨‹ï¼š12345678910111213// é€šè¿‡taskçš„æ ‡è¯†ç¬¦ç®¡ç†ä»£ç†- (void)setDelegate:(AFURLSessionManagerTaskDelegate *)delegate forTask:(NSURLSessionTask *)task&#123; NSParameterAssert(task); NSParameterAssert(delegate); [self.lock lock]; self.mutableTaskDelegatesKeyedByTaskIdentifier[@(task.taskIdentifier)] = delegate; [delegate setupProgressForTask:task]; [self addNotificationObserverForTask:task]; [self.lock unlock];&#125; é‚£ä¹ˆå¯¹åº”çš„æ¸…ç†è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼Œå°±æ˜¯è®¾ç½®è¿‡ç¨‹ä¸­åšäº†ä»€ä¹ˆï¼Œåœ¨æ¸…ç†è¿‡ç¨‹ä¸­å°±éœ€è¦å»æ‰ä»€ä¹ˆã€‚1234567891011// ç»™taskç§»é™¤delegate- (void)removeDelegateForTask:(NSURLSessionTask *)task &#123; NSParameterAssert(task); AFURLSessionManagerTaskDelegate *delegate = [self delegateForTask:task]; [self.lock lock]; [delegate cleanUpProgressForTask:task]; [self removeNotificationObserverForTask:task]; [self.mutableTaskDelegatesKeyedByTaskIdentifier removeObjectForKey:@(task.taskIdentifier)]; [self.lock unlock];&#125; Business logicã€AFN POSTå†…éƒ¨é€»è¾‘å¤„ç†ã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061#pragma mark - AFURLRequestSerialization// è®¾ç½®Headerå’Œè¯·æ±‚å‚æ•°- (NSURLRequest *)requestBySerializingRequest:(NSURLRequest *)request withParameters:(id)parameters error:(NSError *__autoreleasing *)error&#123; NSParameterAssert(request); NSMutableURLRequest *mutableRequest = [request mutableCopy]; [self.HTTPRequestHeaders enumerateKeysAndObjectsUsingBlock:^(id field, id value, BOOL * __unused stop) &#123; // åˆ¤æ–­headerçš„fieldæ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™è®¾ç½®ï¼Œå­˜åœ¨åˆ™è·³è¿‡ if (![request valueForHTTPHeaderField:field]) &#123; // è®¾ç½® header [mutableRequest setValue:value forHTTPHeaderField:field]; &#125; &#125;]; NSString *query = nil; if (parameters) &#123; // ç”¨ä¼ è¿›æ¥çš„è‡ªå®šä¹‰blockæ ¼å¼åŒ–è¯·æ±‚å‚æ•° if (self.queryStringSerialization) &#123; NSError *serializationError; query = self.queryStringSerialization(request, parameters, &amp;serializationError); if (serializationError) &#123; if (error) &#123; *error = serializationError; &#125; return nil; &#125; &#125; else &#123; switch (self.queryStringSerializationStyle) &#123; case AFHTTPRequestQueryStringDefaultStyle: // é»˜è®¤çš„æ ¼å¼åŒ–æ–¹å¼ query = AFQueryStringFromParameters(parameters); break; &#125; &#125; &#125; // åˆ¤æ–­æ˜¯å¦æ˜¯GET/HEAD/DELETEæ–¹æ³•ï¼Œ å¯¹äºGET/HEAD/DELETEæ–¹æ³•ï¼ŒæŠŠå‚æ•°åŠ åˆ°URLåé¢ if ([self.HTTPMethodsEncodingParametersInURI containsObject:[[request HTTPMethod] uppercaseString]]) &#123; // åˆ¤æ–­æ˜¯å¦æœ‰å‚æ•° if (query &amp;&amp; query.length &gt; 0) &#123; // æ‹¼æ¥è¯·æ±‚å‚æ•° NSLog(@"query--&gt;%@",query); mutableRequest.URL = [NSURL URLWithString:[[mutableRequest.URL absoluteString] stringByAppendingFormat:mutableRequest.URL.query ? @"&amp;%@" : @"?%@", query]]; &#125; &#125; else &#123; // #2864: an empty string is a valid x-www-form-urlencoded payload if (!query) &#123; query = @""; &#125; // å‚æ•°å¸¦åœ¨bodyä¸Šï¼Œå¤§å¤šæ˜¯POST PUT if (![mutableRequest valueForHTTPHeaderField:@"Content-Type"]) &#123; // è®¾ç½®Content-Type HTTPå¤´ï¼Œå‘Šè¯‰æœåŠ¡ç«¯bodyçš„å‚æ•°ç¼–ç ç±»å‹ [mutableRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"]; &#125; [mutableRequest setHTTPBody:[query dataUsingEncoding:self.stringEncoding]]; &#125; return mutableRequest;&#125; å¦‚æœæ˜¯ Post è¯·æ±‚ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°æ˜¯æ²¡æœ‰æ‹¼æ¥åœ¨ URL ä¸Šé¢ï¼Œè€Œæ˜¯æ”¾åœ¨ body ä¸Šï¼Œè¿™æ˜¯ Post å’Œ Get è¯·æ±‚çš„æœ€å¤§åŒºåˆ«äº†ï¼Œå…¶ä»–è¿‡ç¨‹å’ŒGet è¯·æ±‚å¹¶æ²¡æœ‰å¤ªå¤šåŒºåˆ«ã€‚ æ€»ç»“AFNå‘èµ·Getè¯·æ±‚ä¸»è¦åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š 1.åˆ›å»ºNSURLSessionDataTask 2.é…ç½®NSURLSessionDataTask 3.è®¾ç½®NSURLSessionDataTaskçš„Delegate 4.è°ƒç”¨NSURLSessionDataTaskçš„resumeæ–¹æ³•å¼€å§‹è¯·æ±‚ 5.åœ¨Delegateçš„æ–¹æ³•é‡Œé¢å¤„ç†ç½‘ç»œè¯·æ±‚çš„å„ä¸ªè¿‡ç¨‹ 6.æ¸…ç†NSURLSessionDataTaskçš„é…ç½® å…¶å®ä¹Ÿå°±æ˜¯ä½¿ç”¨ NSURLSessionDataTask çš„æ­¥éª¤ï¼ŒAFNåœ¨è¿™å‡ ä¸ªæ­¥éª¤åŠ äº†ä¸€äº›å°è£…ï¼Œè®©æˆ‘ä»¬çš„ä½¿ç”¨æ›´ç®€å•ã€‚ è½¬è½½åŸè‘—ï¼šhttp://www.jianshu.com/p/c36159094e24 æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ—¶é—´å’ŒçŸ¥è¯†ç®¡ç†ç»éªŒ]]></title>
    <url>%2FPerceptionWork%2FTimeManagement.html</url>
    <content type="text"><![CDATA[è½¬è‡ª weekly ç»´æŠ¤ä½œè€…:About Time and Knowledge Management å…³äºæ—¶é—´ç®¡ç†å’ŒçŸ¥è¯†ç®¡ç†è¿™ä¸¤ä¸ªè¯é¢˜ï¼Œæˆ‘è§è¿‡æœ€å¥½çš„ä¸€ä¸ªæ€»ç»“æ˜¯ï¼š æ­¤ç”Ÿç†æƒ³ã€è¿‘æœŸè®¡åˆ’ã€ä»Šæ—¥åŠŸè¯¾ è¿™æ˜¯é©¬è‹±ä¹çš„çˆ¶äº²é©¬é¹¤å‡Œä¸ºé©¬è‹±ä¹åˆ¶å®šçš„äººç”Ÿè§„åˆ’è§£å†³ä¹‹é“ï¼Œæ˜¯ä»æˆ‘çš„å¸ˆå‚… nwind çš„ä¸€åœºåŸ¹è®­ å·¥ç¨‹å¸ˆçš„ä¸ªäººå‘å±•è§„åˆ’ ä¸­å­¦åˆ°çš„ã€‚æ€»ç»“çš„å¾ˆå®Œç¾ï¼Œä½†å®è·µèµ·æ¥å‘å¾ˆå¤šã€‚åˆ†äº«ä¸€äº›æˆ‘çš„å®è·µç»éªŒï¼Œä»¥åŠ Weekly æ˜¯æ€ä¹ˆæ•´ç†çš„ã€‚ æ­¤ç”Ÿç†æƒ³å¾ˆå¤šå…³äºæ—¶é—´ç®¡ç†å’ŒçŸ¥è¯†ç®¡ç†çš„ä¹¦æœ€åéƒ½ä¼šæŒ‡å‘è¿™ç‚¹ï¼šä½ çš„ç†æƒ³æ˜¯ä»€ä¹ˆï¼Œä½ æƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Œä½ æƒ³è¦çš„ç”Ÿæ´»æ˜¯ä»€ä¹ˆæ ·çš„ã€‚å› ä¸ºåªæœ‰ææ¸…æ¥šè¿™ç‚¹ï¼Œæ—¶é—´å’ŒçŸ¥è¯†ç®¡ç†æ‰æ˜¯æœ€é«˜æ•ˆçš„ã€‚æ‹¥æœ‰ç†æƒ³çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œç„¶è€Œç°å®æ˜¯ï¼šå¤§å¤šæ•°äººå½“ä¸‹å¹¶æ²¡æœ‰çœŸæ­£æƒ³æ¸…æ¥šè‡ªå·±çš„ç†æƒ³æ˜¯ä»€ä¹ˆï¼Œæœ‰å¯èƒ½æ˜¯åœ¨å¹´é¾„å¾ˆå¤§æ—¶æ‰æ‰¾åˆ°å±äºè‡ªå·±ç†æƒ³ã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬è²Œä¼¼æœ‰äº†ä¸€ä¸ªç†æƒ³æˆ–æ¢¦æƒ³ï¼Œä½†è¡ŒåŠ¨å¾€å¾€ä¼šå‡ºå–æˆ‘ä»¬ï¼Œæš´éœ²å‡ºçœŸç›¸å¹¶éå¦‚æ­¤ã€‚ æ‰€ä»¥ï¼Œæˆ‘çš„å®è·µå˜æˆäº†ï¼šä¸åˆ»æ„å»è¿½å¯»ç†æƒ³ï¼Œæ´»åœ¨å½“ä¸‹ã€‚åšå¥½è¿™å‡ ä»¶äº‹ï¼š ä¸“æ³¨äºï¼šè§£å†³é—®é¢˜+çŸ¥è¯†ç§¯ç´¯ï¼Œè¿™ä¸¤ä»¶äº‹å¯ä»¥ä¿è¯çŸ¥è¯†å’ŒæŠ€èƒ½å§‹æ€»æ˜¯æå‡çš„ã€‚ä¸ç®¡æœ€ç»ˆç†æƒ³æ˜¯ä»€ä¹ˆï¼ŒçŸ¥è¯†å’ŒæŠ€èƒ½æœ€åéƒ½ä¼šå‘æŒ¥ä½œç”¨ã€‚åœ¨è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šå±•ç°ä¸ªäººä»·å€¼ã€‚ ä¸è¦ç»™è‡ªå·±è®¾é™ï¼Œè®¤å®šè‡ªå·±ä¸èƒ½åšä»€ä¹ˆï¼Œå‹‡äºå°è¯•å„ç§å¯èƒ½ï¼Œé€æ­¥æ’é™¤æ‰ä»€ä¹ˆä¸æ˜¯è‡ªå·±æƒ³è¦çš„ã€‚ è¿‘æœŸè®¡åˆ’è¯·æ³¨æ„ï¼šæ˜¯â€œè¿‘æœŸâ€è€Œéâ€œè¿œæœŸâ€ï¼Œæ˜¯â€œè®¡åˆ’â€è€Œéâ€œè§„åˆ’â€ã€‚è¿™ä¸€ç‚¹ï¼Œåœ¨ç†æƒ³çš„é©±ä½¿ä¸‹ï¼Œå¾ˆå®¹æ˜“é”™è¯¯åœ°è¢«å®è·µæˆé•¿è¿œè§„åˆ’ã€‚æŒ‰æˆ‘çš„ç»éªŒï¼š1 å¹´å†…çš„è®¡åˆ’æ¯”è¾ƒå®¹æ˜“å¯æ§ï¼Œè¶…è¿‡ 1 å¹´çš„å˜æ•°å¤ªå¤šï¼Œåªèƒ½å½“åšè¿œæ™¯æ¥ç¡®å®šæ–¹å‘ã€‚ æˆ‘çš„å®è·µæ˜¯ï¼šè¸æ­Œè€Œè¡Œï¼Œè¸©ç€èŠ‚æ‹å¾€å‰èµ°ã€‚ä¿æŒèŠ‚å¥å¯ä»¥è®©æˆ‘ä»¬çš„å·¥ä½œå’Œå­¦ä¹ æœ‰åºå‰è¡Œï¼Œé¿å…è¿·å¤±æ–¹å‘ã€‚æˆ‘é€šå¸¸è¿™æ ·åšï¼š æŒ‰ å¹´ -&gt; æœˆ -&gt; å‘¨ è¿™æ ·çš„è‡ªç„¶èŠ‚å¥è¿›è¡Œï¼Œåœ¨ä¸Šä¸€ä¸ªæ—¶é—´å‘¨æœŸç»“æŸæ—¶ç¡®å®šä¸‹ä¸€ä¸ªå‘¨æœŸçš„äº‹ï¼Œæ¯”å¦‚ï¼šæ˜¥èŠ‚æœŸé—´æƒ³å¥½ä¸‹ä¸€å¹´çš„ï¼Œæ¯æœˆåˆæƒ³å¥½ä¸‹æœˆçš„äº‹æƒ…ï¼Œæ¯å‘¨å†™å‘¨æŠ¥æˆ–å‘¨æœ«ç©ºé—²æ—¶æ—¶æƒ³å¥½ä¸‹å‘¨è¦åšçš„äº‹ï¼Œå‘¨æœ«é—²æš‡æ—¶é—´ &amp; æ¯å¤©åœ¨è·¯ä¸Šæƒ³å¥½æ¯ä»¶äº‹å¤§è‡´æ€ä¹ˆåšã€‚æ‰€ä»¥åœ¨å·¥ä½œæ—¶ï¼Œæˆ‘å¾€å¾€åªéœ€æ‰§è¡Œã€‚ ä¸è¿·æ‹äºå„ç§æ—¥ç¨‹åŠæ—¶é—´ç®¡ç†å·¥å…·ï¼Œç”¨å¿ƒè®°ï¼Œå½“ä¸€å‘¨äº‹æƒ…ç‰¹åˆ«å¤šæ—¶ï¼Œç”¨çº¸+ç¬” ä»Šæ—¥åŠŸè¯¾å…³äºè¿™ç‚¹ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€ä¸ªæˆ‘æ€»ç»“å‡ºçš„è¯æ±‡â€œå¯æŒç»­æ€§ç¼–ç¨‹â€ã€‚ä¸ºä»€ä¹ˆç¼–ç¨‹è¿˜éœ€è¦å¯æŒç»­æ€§ï¼Œå› ä¸ºï¼šä¸€ä¸ªäººçš„å·¥ä½œç”Ÿæ¶¯ä¼šåœ¨20 å¹´ä»¥ä¸Šï¼Œè¿™æ˜¯ä¸€åœºé•¿è·‘ã€‚è€Œä¸”ï¼Œä»èŒä¸šç”Ÿæ¶¯çš„è§’åº¦å»çœ‹é—®é¢˜ï¼Œä¼šå‘ç°ä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ï¼š å¾ˆå¤šå½“ä¸‹çš„é—®é¢˜æ ¹æœ¬åªæ˜¯æµªèŠ±ä¸€æœµï¼Œæ¯”å¦‚ï¼šæ™‹å‡ã€ç»©æ•ˆã€æ¶¨è–ªâ€¦ å¾ˆå¤šçœ‹ä¼¼ä¸å¯èƒ½çš„ä¸œè¥¿å˜å¾—å¯èƒ½ï¼Œæ¯”å¦‚ï¼šæŒæ¡ N ç§ç¼–ç¨‹è¯­è¨€ã€ç ”ç©¶æ¸…æ¥šæµè§ˆå™¨å†…æ ¸ã€å­¦ä¼šä¸€ç§ä¹å™¨â€¦ ä»ç¼–ç¨‹ç”Ÿæ¶¯çš„è§’åº¦æ¥çœ‹ï¼Œä»Šæ—¥åŠŸè¯¾å…¶å®æ˜¯æ¯æ—¥åŠŸè¯¾ï¼Œè¦è·‘å¥½è¿™åœºé•¿è·‘ï¼Œæˆ‘è§‰å¾—è¿™å‡ ç‚¹å¾ˆé‡è¦ï¼š ç»™è‡ªå·±ä¸€ä¸ªå®‰é™çš„ç¯å¢ƒï¼ŒåŒæ—¶çœå‡ºå­¦ä¹ æ—¶é—´ å…³æ‰èŠå¤©å·¥å…·ã€æ¶ˆæ¯æé†’ï¼ŒQQ æˆ‘å·²ç»å˜æˆæ¯ 1 å‘¨ç”šè‡³ 1æœˆå»å¼€ä¸€æ¬¡äº†ï¼Œåœ¨æ”»åšæ—¶æˆ‘ä¼šä¸å¼€é‚®ä»¶å®¢æˆ·ç«¯ã€æ—ºæ—ºã€é’‰é’‰ å°‘åˆ·å¾®åšã€å¾®ä¿¡ã€æ–°é—»ï¼Œç”šè‡³ä¸çœ‹ï¼Œéœ€è¦æ—¶å®šæœŸå»æ‰«å³å¯ï¼Œä¸ç”¨æ‹…å¿ƒä¼šæ¼æ‰ä»€ä¹ˆï¼Œé‡è¦çš„ä¸œè¥¿æ€»ä¼šé€šè¿‡å„ç§æ¸ é“ä¼ é€’åˆ°ä½ è¿™é‡Œçš„ å‡å°‘ä¸å¿…è¦çš„ä¼šè®®ï¼Œæ¯ä¸ªæŠ€æœ¯äº¤æµéƒ½æ˜¯ä¸€ä»½éå¸¸å¥½çš„å­¦ä¹ æœºä¼šï¼Œå¯ä»¥é€‰æ‹©ä¸å»ï¼Œä½†å»äº†åå°±å…¨å¿ƒå‚ä¸ï¼Œä¸çœ‹æ‰‹æœºã€ä¸å¼€ç”µè„‘ï¼Œä¸“å¿ƒè·å–æˆ–è¾“å‡ºæœ‰æ•ˆä¿¡æ¯ å¥åº·çš„ä½“é­„ï¼Œæ²¡æœ‰å¥½èº«ä½“ï¼Œæ€ä¹ˆå†™ 20 å¹´ä»£ç  å·¥ä½œå¿…é¡»æœ‰åº•çº¿ï¼Œä¹Ÿä¸èƒ½è®©è‡ªå·±é•¿æœŸå¤„äºé«˜å‹å·¥ä½œä¸‹ã€‚æˆ‘çš„ä¹ æƒ¯æ˜¯ï¼šå‘¨æœ«å°½é‡ä¸åšå®ä½“æ€§å·¥ä½œï¼ˆé™¤éè®¡åˆ’æœ‰å˜ï¼‰ï¼›å¹³æ—¶ä¸èƒ½ç‰ºç‰²åƒé¥­+ç¡è§‰æ—¶é—´å»èµ¶è¿›åº¦ã€‚ é€‚åº¦è¿åŠ¨ï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„ä¸€ç§æ–¹å¼ã€‚æˆ‘ä¼šåšæŒæ¯å‘¨å»çˆ¬å±±ä¸€æ¬¡ï¼Œå‘¼å¸æ–°é²œç©ºæ°”+æ€è€ƒé—®é¢˜ æŒç»­å­¦ä¹ çš„ç²¾ç¥ï¼Œè¿™ç‚¹ é˜®ä¸€å³°è€å¸ˆ æ˜¯æˆ‘ä»¬çš„æ¦œæ ·ã€‚è¦ä¿æŒæŒç»­å­¦ä¹ ï¼Œæˆ‘è§‰å¾—è¿™ä¸¤ç‚¹éå¸¸é‡è¦ï¼š å…¼å®¹å¹¶è“„ï¼šä¸è¦ç»™æŠ€æœ¯è´´æ ‡ç­¾ï¼Œä»¥å­¦ä¹ çš„å¿ƒæ€å»çœ‹å¾…æ¯ä¸ªæŠ€æœ¯ï¼Œäº†è§£å®ƒä»¬æ€è€ƒå’Œè§£å†³é—®é¢˜çš„æ–¹å¼ã€å®ç°åŸç†ã€åº”ç”¨åœºæ™¯ï¼Œä¸æ–­ä¸°å¯Œè‡ªå·±å¯¹ç¼–ç¨‹çš„è®¤çŸ¥å’Œè§£å†³é—®é¢˜çš„æ€è·¯ã€‚ æ ¼ç‰©è‡´çŸ¥ï¼šè®¡ç®—æœºç§‘å­¦æ˜¯éå¸¸åºå¤§çš„ä¸€é—¨ç§‘å­¦ï¼Œè¶³ä»¥æ”¯æ’‘æˆ‘ä»¬ç ”ç©¶ä¸€è¾ˆå­ã€‚å‰ç«¯æ‰€æ¥è§¦çš„ï¼Œåªæ˜¯æŠ€æœ¯çš„å†°å±±ä¸€è§’ï¼Œè¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦æˆ‘ä»¬å»æ¢ç´¢ã€‚æ ¼ç‰©è‡´çŸ¥èƒ½è®©æˆ‘ä»¬æŒæ¡æ—¥å¸¸ä½¿ç”¨çš„æŠ€æœ¯èƒŒåçš„åŸç†ï¼Œä»è€Œæå‡æŒæ§å¤æ‚çš„èƒ½åŠ›ã€‚ Weekly æ˜¯å¦‚ä½•æ•´ç†çš„å¾ˆå¤šäººä¼šé—®æˆ‘è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®ï¼Œåšè¿™ä»¶äº‹çš„åˆå¿ƒå¾ˆç®€å•ï¼šè®°å½•è‡ªå·±å¹³æ—¶çœ‹åˆ°çš„ä¼˜è´¨èµ„æ–™ä»¥å¤‡ç”¨ï¼Œå®Œå–„ä¸ªäººçŸ¥è¯†åº“ã€‚ä½†ç”±äºå¸¸å¸¸æœ‰ä¼šæŠŠä¸€äº›ç‰¹åˆ«å¥½çš„ä¸œè¥¿åˆ†äº«åˆ°ç¾¤é‡Œï¼Œå°±æœ‰äººå»ºè®®æˆ‘å¯ä»¥å®šæœŸæ•´ç†è¿™ç±»ä¸œè¥¿ï¼Œå‘ç»™å¤§å®¶ã€‚äºæ˜¯ Weekly å°±å¼€å§‹äº†ï¼ŒåšæŒäº†å¥½å¤šå¹´ã€‚ åšè¿™ä»¶äº‹ï¼Œæˆ‘ä½¿ç”¨çš„å·¥å…·æ˜¯ï¼š RSS ï¼šFeedly + gReaderï¼Œç¦»çº¿ã€åœ¨çº¿éƒ½èƒ½çœ‹ï¼Œä¸Šç½‘çº¦ç­‰äºçœ‹ rss èµ„æºæ±‡é›†åœ°ï¼šhn-dailyã€JavaScript Weekly ç­‰å„ç§ weeklyã€æŠ€æœ¯ç»„ç»‡å®˜ç½‘ã€Mediumã€JavaScriptKicks OneNoteï¼šè®°å½•æ„Ÿå…´è¶£çš„æ–‡ç« å’Œèµ„æºï¼Œæ¯” evernote å¿«ï¼Œç¨³å®šæ€§ã€å¤åˆ¶ html çš„æ•ˆç‡å’Œæ•ˆæœã€æœç´¢ç­‰éƒ½æ›´å¥½ç”¨ å¾®åšï¼šè®¢é˜…ä¸€äº›å–œæ¬¢åˆ†äº«èµ„æºçš„äººæˆ–è€…ç»„ç»‡ï¼Œå…¶å®å¾®åšä»ç„¶æ˜¯éå¸¸å¥½çš„ä¸€ä¸ªä¼ æ’­æ¸ é“ å¾®ä¿¡ï¼šè®¢é˜…å…¬ä¼—å· æ–¹å¼ï¼š å®šæœŸçœ‹ï¼Œè€Œéå®æ—¶å…³æ³¨ï¼Œä¸€èˆ¬æˆ‘ä¼šåœ¨å‘¨ä¸‰æ™šä¸Šã€å‘¨å…­é›†ä¸­æ‰«ä¸€éï¼Œç­›é€‰å‡ºæœ‰ä»·å€¼çš„å’Œæ„Ÿå…´è¶£çš„ï¼Œå‘¨æ—¥æ±‡æ€»å¹¶å®Œæˆæ•´ç† é›¶æ•£æ—¶é—´ä¼šçœ‹ rss ç­›é€‰ä¿¡æ¯ï¼Œåœ¨å‘¨æœ«æˆ–è€…æ™šä¸Šç©ºé—²æ—¶çœ‹è‡ªå·±æ„Ÿå…´è¶£çš„æ–‡ç«  ä¿¡æºï¼š é›ªçƒæ•ˆåº”ï¼šä»¥èµ„æºæ±‡é›†ç‚¹ä¸ºèµ·ç‚¹ï¼Œé€æ­¥æ”¶é›†ä¼˜è´¨èµ„æºæ¥è‡ªçš„ bolg ã€æŠ€æœ¯ç«™ç‚¹ æ•´ç†è‡ªå·±æ„Ÿå…´è¶£çš„çŸ¥è¯†ï¼Œé€æ­¥å½¢æˆä¸ªäººçŸ¥è¯†åº“æ€»ç»“ æ—¶é—´ç®¡ç†å’ŒçŸ¥è¯†ç®¡ç†å¯ä»¥å›´ç»•è¿™ 12 å­—å»æ¢ç´¢è‡ªå·±çš„æ¨¡å¼ï¼šæ­¤ç”Ÿç†æƒ³ã€è¿‘æœŸè®¡åˆ’ã€ä»Šæ—¥åŠŸè¯¾ã€‚æˆ‘çš„ä¹ æƒ¯å’Œå»ºè®®æ˜¯ï¼š æ´»åœ¨å½“ä¸‹ï¼šä¸“æ³¨äºè§£å†³é—®é¢˜+çŸ¥è¯†ç§¯ç´¯ï¼›ä¸ç»™è‡ªå·±è®¾é™ï¼Œå»å°è¯•æœªæ¥çš„å„ç§å¯èƒ½ï¼› è¸æ­Œè€Œè¡Œï¼Œè¸©ç€èŠ‚æ‹å¾€å‰èµ°ï¼šä»¥ å¹´ -&gt; æœˆ -&gt; å‘¨ çš„ç»´åº¦åˆ¶å®šè®¡åˆ’ï¼›ç”¨å¿ƒè€Œéå·¥å…·ç®¡ç†è®¡åˆ’ï¼› å¯æŒç»­ç¼–ç¨‹ï¼šå®‰é™çš„ç¯å¢ƒï¼›å¥åº·çš„ä½“é­„ï¼›æŒç»­å­¦ä¹ çš„ç²¾ç¥ï¼› çŸ¥è¯†ç®¡ç†ï¼šä»ä¿¡æ¯æ±‡èšæºé™¤éé€æ­¥å½¢æˆè‡ªå·±çš„çŸ¥è¯†åº“ï¼›åˆ©ç”¨é›¶æ•£æ—¶é—´+å®šæœŸæ‰«çš„æ¨¡å¼æ”¶é›†èµ„æºï¼Œåœ¨ä¸šä½™æ—¶é—´é›†ä¸­é˜…è¯» é™„ï¼š å¦å¤–è¡¥å……ï¼ŒçŸ¥è¯†ä¸ä»…æ˜¯ç”¨æ¥æ”¶é›†çš„ï¼Œæ›´æ˜¯è¦å†…åŒ–æˆè‡ªå·±çš„ï¼Œå› æ­¤ä¸¤ä¸ªæ­¥éª¤å¿…ä¸å¯å°‘ï¼Œå‡ç»ƒå’Œåˆ é™¤ã€‚ å‡ç»ƒï¼Œå¯ä»¥æ˜¯åœ¨æŸæ”¶é›†ææ–™ä¸ŠåŠ å…¥è‡ªå·±çš„ä¸€æ®µæ€»ç»“ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±ä¸€ä¸ªè‡ªå»ºæ¶æ„ä¸‹åšçš„ä¸€ä¸ªé“¾æ¥ï¼Œåˆæˆ–æ˜¯ä½ çš„è‹¥å¹²ä¸ªæ”¶è—é›†ã€‚ åˆ é™¤ï¼Œä¹Ÿéå¸¸é‡è¦ï¼Œå› ä¸ºæ”¶é›†çš„è¿‡ç¨‹ä¸­å¾ˆå¤šåªæ˜¯ä¿¡æ¯ï¼Œä¸æ˜¯çŸ¥è¯†ï¼Œéšç€æ—¶é—´ç§¯ç´¯ï¼Œè¿™äº›ä¸œè¥¿è¶Šæ¥è¶Šå¤šã€‚ æˆ‘ä¼šç”¨åˆ°ä¸€ä¸ªâ€œæ–¹æ³•â€ï¼Œæ¯å¤©å¯ä»¥æŸ¥çœ‹å†å²æˆ–ä¸Šæœˆã€ä¸Šå¹´ä»Šæ—¥å»ºç«‹çš„è®°å½•ï¼Œä¸ä»…å¯ä»¥æ¸©ä¹ å½“æ—¶çš„å†™ä½œå’Œç¬”è®°å¿ƒè·¯ï¼Œè¿˜èƒ½é¡ºæ‰‹æŠŠä¸€äº›ä¸é‡è¦çš„è¿‡æ—¶çš„åƒåœ¾æ¸…é™¤æ‰æˆ–æ˜¯å†æ€»ç»“ã€‚ çŸ¥è¯†å˜æˆè‡ªå·±çš„ï¼Œæ‰å«çŸ¥è¯†ï¼›è€Œä½  copy ä¸‹æ¥çš„ï¼Œåªæ˜¯ä¿¡æ¯ï¼›ä¸æ­£ç¡®çš„è®¤çŸ¥è‡ªå·±ï¼Œï¼ˆæ­¤å¤„çœå»6ä¸ªå­—ï¼‰ä¹Ÿæ•‘ä¸äº†ä½ ï¼›â€”- æˆé•¿ã€‚ è°¨è®°è‡ªå·±ï¼Œé˜…è¯»çš„ä½ ï¼Œå¯é€‰æ‹©æ€§å¿½ç•¥ã€‚]]></content>
      <categories>
        <category>èŒåœº</category>
      </categories>
      <tags>
        <tag>èŒåœº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Objective-C å…³é”®å­—è¯¦è§£1ã€Œé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^.]]></title>
    <url>%2FiOSUI%2FOCkeyword.html</url>
    <content type="text"><![CDATA[åœ¨å†™é¡¹ç›® æˆ– é˜…è¯»åˆ«äººçš„ä»£ç ï¼ˆä¸€äº›ä¼˜ç§€çš„æºç ï¼‰ä¸­ï¼Œæ€»èƒ½å‘ç°ä¸€äº›å¸¸è§çš„å…³é”®å­—ï¼Œéšç€ç¼–ç¨‹ç»éªŒçš„ç§¯ç´¯å¤§éƒ¨åˆ†è¿˜æ˜¯çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€çš„ã€‚ ç›¸ä¿¡å¾ˆå¤šå¼€å‘è€…è·Ÿæˆ‘å½“åˆä¸€æ ·ï¼Œåªæ˜¯åŸºæœ¬çš„å¸¸ç”¨å…³é”®å­—å®šä¹‰å±æ€§ä¼šä½¿ç”¨ï¼Œä½†åœ¨å…³é”®å­—æ¦‚å¿µä¸ŠåŠå…·ä½“çš„ç”¨æ³•ã€Œåº”ç”¨åœºæ™¯ã€ä¼˜åŒ–é€‰æ‹©ã€ä¸Šå´ä¾ç„¶æœ‰äº›æ¨¡ç³Šã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ä¸ºæ­¤ï¼Œæœ¬ç€å¥½å¥½å­¦ä¹ ï¼Œä¸€åŠ³æ°¸é€¸çš„ç›®åœ°ï¼Œå†³å®šæŒ‰æ¨¡å—ä¸€ç‚¹ä¸€ç‚¹å‰–æè¯¦è§£å®ƒã€Œå·¥ä½œæŒæ¡ã€é¢è¯•ç†Ÿæ‚‰ã€ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€OC å¸¸ç”¨å…³é”®å­—è¯¦è§£ã€‘å­¦ä¹ æ€»ç»“ã€‚ æœ¬ç¯‡æ–‡ç« è¾ƒé•¿ä¸€äº›ï¼Œå¼ºçƒˆå»ºè®®å…ˆ â¤ï¸ æ”¶è—ï¼Œåœ¨è¿›è¡Œé˜…è¯» ï¼æŒç»­æ›´æ–°ã€‚ ä¹Ÿæ¬¢è¿ä½ ç•™è¨€è¡¥å…… ä¸” å¯ä»¥å€Ÿæ¥¼ ^_^. ï¼Œæˆ‘ä¼šåŠæ—¶è¡¥å……ï¼Œä»¥æ–¹ä¾¿ä½ æˆ‘çš„å­¦ä¹ ã€‚ ç›®å½•ï¼š å…³é”®å­— constï¼staticï¼extern çš„ã€Œé‡Šä¹‰å’Œç”¨æ³•ã€1ã€const2ã€static3ã€extern4ã€staticä¸constè”åˆä½¿ç”¨5ã€externä¸constè”åˆä½¿ç”¨6ã€constä¸å®çš„åŒºåˆ«ï¼Ÿã€Œé¢è¯•é¢˜ã€ æœŸå¾… &amp; åç»­ å…³é”®å­— constï¼staticï¼extern çš„ã€Œé‡Šä¹‰å’Œç”¨æ³•ã€1ã€const const ç®€ä»‹ï¼šä¹‹å‰å¸¸ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡ã€‚ const ä½œç”¨ï¼š const ä»…ä»…ç”¨æ¥ä¿®é¥°å³è¾¹çš„å˜é‡ï¼ˆåŸºæœ¬æ•°æ®å˜é‡pï¼ŒæŒ‡é’ˆå˜é‡*pï¼‰ è¢«const ä¿®é¥°çš„(å…¨å±€)å˜é‡æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ä¿®æ”¹ã€‚ const åŸºæœ¬ä½¿ç”¨ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940- (void)viewDidLoad &#123; [super viewDidLoad]; // å®šä¹‰å˜é‡ int a = 1; // å…è®¸ä¿®æ”¹å€¼ a = 20; // constä¸¤ç§ç”¨æ³• // const:ä¿®é¥°åŸºæœ¬å˜é‡p // è¿™ä¸¤ç§å†™æ³•æ˜¯ä¸€æ ·çš„ï¼Œconståªä¿®é¥°å³è¾¹çš„åŸºæœ¬å˜é‡b const int b = 20; // b:åªè¯»å˜é‡ int const b = 20; // b:åªè¯»å˜é‡ // ä¸å…è®¸ä¿®æ”¹å€¼,é”™è¯¯ b = 1; // const:ä¿®é¥°æŒ‡é’ˆå˜é‡*pï¼Œå¸¦*çš„å˜é‡ï¼Œå°±æ˜¯æŒ‡é’ˆå˜é‡. // å®šä¹‰ä¸€ä¸ªæŒ‡å‘intç±»å‹çš„æŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘açš„åœ°å€ int *p = &amp;a; int c = 10; // å…è®¸ä¿®æ”¹pæŒ‡å‘çš„åœ°å€ï¼Œ p = &amp;c; // å…è®¸ä¿®æ”¹pè®¿é—®å†…å­˜ç©ºé—´çš„å€¼ *p = 20;//--------------------------- é¢è¯•é¢˜ ------------------------------// // constä¿®é¥°æŒ‡é’ˆå˜é‡è®¿é—®çš„å†…å­˜ç©ºé—´ï¼Œä¿®é¥°çš„æ˜¯å³è¾¹*p1ï¼Œ // ä¸¤ç§æ–¹å¼ä¸€æ · const int *p1; // *p1:åªè¯» p1:å˜é‡ int const *p1; // *p1:åªè¯» p1:å˜é‡ // constä¿®é¥°æŒ‡é’ˆå˜é‡p1 int * const p1; // *p1:å˜é‡ p1:åªè¯» // ç¬¬ä¸€ä¸ªconstä¿®é¥°*p1 ç¬¬äºŒä¸ªconstä¿®é¥° p1 // ä¸¤ç§æ–¹å¼ä¸€æ · const int * const p1; // *p1ï¼šåªè¯» p1ï¼šåªè¯» int const * const p1; // *p1ï¼šåªè¯» p1ï¼šåªè¯»&#125;æ³¨æ„: åˆ¤æ–­p å’Œ *pæ˜¯åªè¯»è¿˜æ˜¯å˜é‡ï¼Œå…³é”®æ˜¯çœ‹conståœ¨è°å‰é¢ã€‚ const å¼€å‘ä¸­åº”ç”¨åœºæ™¯ 12345678910111213141516171819@implementation ViewController// å®šä¹‰åªè¯»å…¨å±€å¸¸é‡ =&gt; ä»£æ›¿å®NSString * const str = @"123";// å½“ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼Œåªè¯».- (void)test:(NSString * const)name&#123;&#125;// æŒ‡é’ˆåªè¯»,ä¸èƒ½é€šè¿‡æŒ‡é’ˆä¿®æ”¹å€¼- (void)test1:(int const *)a&#123;&#125;// åŸºæœ¬æ•°æ®ç±»å‹åªè¯»- (void)test2:(int const)a&#123;&#125;@end 2ã€static static ç®€ä»‹ï¼šå¯é‡Šä¹‰ä¸ºâ€œé™æ€â€çš„æ„æ€ã€‚ static ä½œç”¨ï¼š ä¿®é¥°å±€éƒ¨å˜é‡ï¼š è¢«staticä¿®é¥°å±€éƒ¨å˜é‡ï¼Œå»¶é•¿ç”Ÿå‘½å‘¨æœŸï¼Œè·Ÿæ•´ä¸ªåº”ç”¨ç¨‹åºæœ‰å…³ã€‚ è¢«staticä¿®é¥°å±€éƒ¨å˜é‡ï¼Œåªä¼šåˆ†é…ä¸€æ¬¡å†…å­˜ã€‚ è¢«staticä¿®é¥°å±€éƒ¨å˜é‡ä»€ä¹ˆåˆ†é…å†…å­˜?ã€ç¨‹åºä¸€è¿è¡Œå°±ä¼šç»™staticä¿®é¥°å˜é‡åˆ†é…å†…å­˜ã€‘ã€‚ ä¿®é¥°å…¨å±€å˜é‡ï¼š è¢«staticä¿®é¥°å…¨å±€å˜é‡ï¼Œä¼šä½œä¿®æ”¹ç”¨åŸŸï¼ˆé˜²æ­¢é‡å¤å£°æ˜å…¨å±€å˜é‡ï¼‰ï¼Œåªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸‹ä½¿ç”¨ã€‚å³å½“å‰æ–‡ä»¶å†…éƒ¨æ‰èƒ½è®¿é—®è¯¥å…¨å±€å˜é‡ã€‚ static åŸºæœ¬ä½¿ç”¨ï¼š ä¿è¯å±€éƒ¨å˜é‡æ°¸è¿œåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œåœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­æ°¸è¿œåªæœ‰ä¸€ä»½å†…å­˜ï¼Œ ç”Ÿå‘½å‘¨æœŸç±»ä¼¼å…¨å±€å˜é‡äº†ï¼Œä½†æ˜¯ä½œç”¨åŸŸä¸å˜ã€‚è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ï¼Ÿè¿˜æ˜¯ä»¥ä»£ç ä¾‹å­æ¥è®²è§£å§ã€‚ 12345678910111213141516171819202122232425// è¢«`static`ä¿®é¥°å±€éƒ¨å˜é‡-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; //å£°æ˜ä¸€ä¸ªå±€éƒ¨å˜é‡i int i = 0; // æ–¹å¼ä¸€ static int i = 0; // æ–¹å¼äºŒ i ++; NSLog(@"i=%d",i);&#125;æ‰“å°è¾“å‡º:æ–¹æ³•ä¸€2016-10-26 14:58:48.290 test[2760:170260] i=12016-10-26 14:58:49.044 test[2760:170260] i=12016-10-26 14:58:49.200 test[2760:170260] i=1æ–¹å¼äºŒ2016-10-26 15:07:34.276 test[2817:175155] i=12016-10-26 15:07:35.347 test[2817:175155] i=22016-10-26 15:07:35.761 test[2817:175155] i=3æ³¨è§£æ–¹å¼ä¸€ï¼šå› ä¸ºæ¯æ¬¡ç‚¹å‡»è¿›å…¥è¿™ä¸ªæ–¹æ³•å°±ä¼šé‡æ–°åˆå§‹åŒ–ä¸€ä¸ªå…¨æ–°çš„å˜é‡i = 0ï¼ŒåŠ åŠ äº†ä¸€æ¬¡åå€¼å˜ä¸º1ï¼Œç„¶åæ‰“å°å‡ºç»“æœä¸º1ï¼Œå‡ºäº†è¿™ä¸ªæ–¹æ³•åå±€éƒ¨å˜é‡iå°±è¢«é‡Šæ”¾å›æ”¶ã€‚æ–¹å¼äºŒï¼šå®ƒä¸æ˜¯æ¯æ¬¡è¿›å»éƒ½è¢«åˆå§‹åŒ–èµ‹å€¼ä¸º0äº†ä¹ˆï¼Œæ€ä¹ˆèƒ½ç´¯åŠ å‘¢ã€‚è¿™å°±æ˜¯å…³é”®å­—staticä¿®é¥°çš„å±€éƒ¨å˜é‡çš„ä½œç”¨ï¼Œè®©å±€éƒ¨å˜é‡æ°¸è¿œåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¸€ä»½å†…å­˜ï¼Œç”Ÿå‘½å‘¨æœŸå·²ç»è·Ÿå…¨å±€å˜é‡ç±»ä¼¼äº†ï¼Œåªæ˜¯ä½œç”¨åŸŸä¸å˜ã€‚ iOS ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶å£°æ˜çš„å…¨å±€å˜é‡ï¼Œå·¥ç¨‹çš„å…¶ä»–æ–‡ä»¶ä¹Ÿæ˜¯èƒ½è®¿é—®çš„ï¼Œä½†æ˜¯æˆ‘åˆä¸æƒ³è®©å…¶ä»–æ–‡ä»¶è®¿é—®ï¼Œè¿™æ—¶å°±å¯ä»¥ç”¨staticä¿®é¥°å®ƒäº†ï¼Œæ¯”è¾ƒå…¸å‹çš„æ˜¯ä½¿ç”¨GCDä¸€æ¬¡æ€§å‡½æ•°åˆ›å»ºçš„å•ä¾‹ï¼Œå…¨å±€å˜é‡åŸºæœ¬ä¸Šéƒ½ä¼šç”¨staticä¿®é¥°ã€‚ 12345678910111213// è¢«`static`ä¿®é¥°å…¨å±€å˜é‡@implementation LoginTool// staticä¿®é¥°å…¨å±€å˜é‡ï¼Œè®©å¤–ç•Œæ–‡ä»¶æ— æ³•è®¿é—®static LoginTool *_sharedManager = nil;+ (LoginTool *)sharedManager &#123; static dispatch_once_t oncePredicate; dispatch_once(&amp;oncePredicate, ^&#123; _sharedManager = [[self alloc] init]; &#125;); return _sharedManager;&#125; 3ã€extern extern ç®€ä»‹ï¼šå¯é‡Šä¹‰ä¸ºâ€œå¤–éƒ¨â€çš„æ„æ€ã€‚ extern ä½œç”¨ï¼šåªæ˜¯ç”¨æ¥å£°æ˜å¤–éƒ¨å…¨å±€å˜é‡ï¼Œæ³¨æ„ extern åªèƒ½å£°æ˜ï¼Œä¸èƒ½ç”¨äºå®šä¹‰ã€‚ extern å·¥ä½œåŸç†ï¼šå…ˆåœ¨å½“å‰æ–‡ä»¶æŸ¥æ‰¾æœ‰æ²¡æœ‰å…¨å±€å˜é‡ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œæ‰ä¼šå»å…¶ä»–æ–‡ä»¶æŸ¥æ‰¾ã€‚ extern åŸºæœ¬ä½¿ç”¨ 1234567åœ¨ ViewController.m æ–‡ä»¶ä¸­ å®šä¹‰ä¸ªå…¨å±€çš„å¸¸é‡int i = 15;åœ¨ AppDelegate.m æ–‡ä»¶ä¸­å£°æ˜extern int i;NSLog(@"%d",i); // æ‰“å°è¾“å‡º 15 4ã€staticä¸constè”åˆä½¿ç”¨ staticä¸constä½œç”¨:å£°æ˜ä¸€ä¸ªåªè¯»çš„é™æ€å˜é‡ éœ€æ±‚ï¼š1ã€å˜é‡ä¸ºåªè¯»ï¼Œé˜²æ­¢ä¿®æ”¹ 2ã€åªåœ¨å½“å‰æ–‡ä»¶ä¸‹ä½¿ç”¨ï¼ˆéå…¨å±€ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨staticä¸constç»„åˆã€‚ 1234567// iOSä¸­staicå’Œconstå¸¸ç”¨ä½¿ç”¨åœºæ™¯ï¼Œæ˜¯ç”¨æ¥ä»£æ›¿å®ï¼ŒæŠŠä¸€ä¸ªç»å¸¸ä½¿ç”¨çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå®šä¹‰æˆé™æ€å…¨å±€åªè¯»å˜é‡.// å¼€å‘ä¸­ç»å¸¸æ‹¿åˆ°keyä¿®æ”¹å€¼ï¼Œå› æ­¤ç”¨constä¿®é¥°key,è¡¨ç¤ºkeyåªè¯»ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚staticä¿®é¥°åè¡¨ç¤ºåªèƒ½æœ¬æ–‡ä»¶è®¿é—®ã€‚static NSString * const key = @"name";// å¦‚æœ constä¿®é¥° *key1,è¡¨ç¤º*key1åªè¯»ï¼Œkey1è¿˜æ˜¯èƒ½æ”¹å˜ã€‚static NSString const *key1 = @"name"; 5ã€externä¸constè”åˆä½¿ç”¨ å¼€å‘ä¸­ä½¿ç”¨åœºæ™¯ï¼šåœ¨ å¤šä¸ªæ–‡ä»¶ä¸­ ç»å¸¸ä½¿ç”¨çš„åŒä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œå¯ä»¥ä½¿ç”¨externä¸constç»„åˆã€‚ åŸå› ï¼š ä½¿ç”¨externä¸constç»„åˆï¼šåœ¨æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦å®šä¹‰ä¸€ä»½é™æ€å…¨å±€å˜é‡ï¼ˆæŠ¥é‡å¤å®šä¹‰é”™è¯¯ï¼‰ã€‚ ä½¿ç”¨externä¸constç»„åˆ:åªéœ€è¦å®šä¹‰ä¸€ä»½å…¨å±€å˜é‡ï¼Œå¤šä¸ªæ–‡ä»¶å…±äº«ã€‚ å…¨å±€å¸¸é‡æ­£è§„å†™æ³•ï¼šå…¨å±€å˜é‡ä¸èƒ½å®šä¹‰åœ¨è‡ªå·±ç±»ä¸­ï¼Œå¼€å‘ä¸­ä¾¿äºç®¡ç†æ‰€æœ‰çš„å…¨å±€å˜é‡ï¼Œé€šå¸¸æä¸€ä¸ªGlobeConstæ–‡ä»¶ï¼Œé‡Œé¢ä¸“é—¨å®šä¹‰å…¨å±€å˜é‡ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè¦ä¸ç„¶é¡¹ç›®æ–‡ä»¶å¤šä¸å¥½æ‰¾ã€‚ åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå•ç‹¬æŠ½ä¸€ä¸ªç±»æ¥ç®¡ç†ä¸€äº›å…¨å±€çš„å˜é‡æˆ–å¸¸é‡ï¼Œä¸‹é¢æ¥çœ‹çœ‹é«˜é€¼æ ¼çš„ä¸€ç§åšæ³•ï¼š123456789101112131415161718// GlobeConst.m#import "GlobeConst.h"// å®šä¹‰æ•´ä¸ªé¡¹ç›®ä¸­å…¨å±€å˜é‡//--------------------------- é¦–é¡µ ------------------------------////NSString * const home_name = @"name";//--------------------------- å‘ç° ------------------------------////NSString * const discover_name = @"name";//--------------------------- åœˆå­ ------------------------------////NSString * const circle_name = @"name";//--------------------------- æˆ‘çš„ ------------------------------//// 1234567891011121314151617181920212223242526// GlobeConst.h#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIKit.h&gt;// åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå•ç‹¬æŠ½ä¸€ä¸ªç±»æ¥ç®¡ç†ä¸€äº›å…¨å±€çš„å˜é‡æˆ–å¸¸é‡ï¼Œä¸‹é¢æ¥çœ‹çœ‹ã€é«˜é€¼æ ¼ã€‘çš„ä¸€ç§åšæ³•ï¼š#ifdef __cplusplus#define LNKIT_EXTERN extern "C" __attribute__((visibility ("default")))#else#define LNKIT_EXTERN extern __attribute__((visibility ("default")))#endif// å£°æ˜æ•´ä¸ªé¡¹ç›®ä¸­å…¨å±€å˜é‡ï¼ˆæŠŠå£°æ˜æ”¾åˆ°.hä¸­ï¼‰//--------------------------- é¦–é¡µ ------------------------------////extern NSString * const home_name;//--------------------------- å‘ç° ------------------------------//// ç³»ç»ŸUIKIT_EXTERN NSString * const discover_name;//--------------------------- åœˆå­ ------------------------------//// é«˜é€¼æ ¼LNKIT_EXTERN NSString * const circle_name;//--------------------------- æˆ‘çš„ ------------------------------//// æ€»ç»“ï¼šè¿™æ ·ï¼Œåªè¦å¯¼å…¥å¤´æ–‡ä»¶ï¼Œå°±å¯ä»¥å…¨å±€çš„ä½¿ç”¨å®šä¹‰çš„å˜é‡æˆ–å¸¸é‡ã€‚ 6ã€constä¸å®çš„åŒºåˆ«ï¼Ÿã€Œé¢è¯•é¢˜ã€ä»å››ç‚¹å›ç­”ï¼š ç¼–è¯‘æ—¶åˆ»ï¼šå®æ˜¯é¢„ç¼–è¯‘ï¼ˆç¼–è¯‘ä¹‹å‰å¤„ç†ï¼‰ï¼›const æ˜¯ç¼–è¯‘é˜¶æ®µã€‚ ç¼–è¯‘æ£€æŸ¥ï¼šå®ä¸åšæ£€æŸ¥ï¼Œä¸ä¼šæŠ¥ç¼–è¯‘é”™è¯¯ï¼Œåªæ˜¯æ›¿æ¢ï¼›const ä¼šç¼–è¯‘æ£€æŸ¥ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚ å®çš„å¥½å¤„ï¼šå®èƒ½å®šä¹‰ä¸€äº›å‡½æ•° æˆ– æ–¹æ³•ã€‚ const ä¸èƒ½ã€‚ å®çš„åå¤„ï¼šä½¿ç”¨å¤§é‡å®ï¼Œå®¹æ˜“é€ æˆç¼–è¯‘æ—¶é—´ä¹…ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ›¿æ¢ã€‚ æ³¨æ„ï¼šå¾ˆå¤šBlogéƒ½è¯´å¤§é‡ä½¿ç”¨å®ï¼Œä¼šæ¶ˆè€—å¤§é‡å†…å­˜ï¼Œæˆ‘è¿™éªŒè¯å¹¶ä¸ä¼šç”Ÿæˆå¾ˆå¤šå†…å­˜ï¼Œå®å®šä¹‰çš„æ˜¯å¸¸é‡ï¼Œå¸¸é‡éƒ½æ”¾åœ¨å¸¸é‡åŒºï¼Œåªä¼šç”Ÿæˆä¸€ä»½å†…å­˜ã€‚ æç¤ºï¼šè‹¹æœä¸æ¨èæˆ‘ä»¬æŠ½æˆå®ï¼Œæ¨èæˆ‘ä»¬ä½¿ç”¨constå¸¸é‡ï¼ŒSwiftå·²å¹²æ‰äº†ã€‚ ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314// å¸¸è§çš„å¸¸é‡ï¼šæŠ½æˆå®#define LNAccount @"account"#define LNUserDefault [NSUserDefaults standardUserDefaults]// å­—ç¬¦ä¸²å¸¸é‡static NSString * const account = @"account";- (void)viewDidLoad &#123; [super viewDidLoad]; // åå¥½è®¾ç½®å­˜å‚¨ // ä½¿ç”¨å® [LNUserDefault setValue:@"123" forKey:LNAccount]; // ä½¿ç”¨constå¸¸é‡ [[NSUserDefaults standardUserDefaults] setValue:@"123" forKey:account];&#125; æœªå®Œâ€”â€”â€”-ã€‚å¾…ç»­æœªå®Œâ€”â€”â€”-ã€‚å¾…ç»­æœªå®Œâ€”â€”â€”-ã€‚å¾…ç»­ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>OCå…³é”®å­—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AFNetworking3.1â€”æ¡†æ¶ç»“æ„]]></title>
    <url>%2FSourceAnnotations%2FAFNLibraryStructure.html</url>
    <content type="text"><![CDATA[Write in the first AFNetWorking åŸºæœ¬æ˜¯iOSå¼€å‘ä¸­ä½¿ç”¨ç½‘ç»œé€šä¿¡æ¡†æ¶çš„æ ‡é…ï¼Œè¿™ä¸ªæ¡†æ¶æœ¬èº«æ¯”è¾ƒåºå¤§ï¼Œä¹Ÿå¾ˆå¤æ‚ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸éå¸¸ç®€å•ã€‚æå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ã€‚åƒè¿™ç§ç»å¸¸ä½¿ç”¨ç”¨åˆæ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—è¦åšåˆ° çŸ¥å…¶ç„¶äº¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œç„¶åæ¢³ç†æ€»ç»“å¸¸ç”¨æ–¹æ³•ï¼Œåˆ°æœ€åå¤¯å®åŸºç¡€ã€æ´»å­¦æ´»ç”¨ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€AFN æ¡†æ¶ç»“æ„ã€‘å­¦ä¹ æ€»ç»“ï¼Œåœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š AFN éœ€æ±‚ | ç‰ˆæœ¬åŒºåˆ« AFN å†…éƒ¨ä½“ç³»ç»“æ„ AFN å·¥ç¨‹ç›®å½• AFN åç»­ã€æ¡†æ¶ | æºç  å­¦ä¹ æ€»ç»“ã€‘ æœŸå¾… &amp; About me é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ï¼Œå®˜æ–¹ä»‹ç» AFNetworkingï¼Œå¦‚ä¸‹ï¼š AFNetworking is a delightful networking library for iOS and Mac OS X. Itâ€™s built on top of the Foundation URL Loading System, extending the powerful high-level networking abstractions built into Cocoa. It has a modular architecture with well-designed, feature-rich APIs that are a joy to use. Perhaps the most important feature of all, however, is the amazing community of developers who use and contribute to AFNetworking every day. AFNetworking powers some of the most popular and critically-acclaimed apps on the iPhone, iPad, and Mac. Choose AFNetworking for your next project, or migrate over your existing projectsâ€”youâ€™ll be happy you did! ç¿»è¯‘è¿‡æ¥ç®€å•ç‚¹è¯´å°±æ˜¯ AFNetworking æ˜¯ä¸€ä¸ªé€‚ç”¨äº iOS å’Œ Mac OS X ä¸¤ä¸ªå¹³å°çš„ç½‘ç»œåº“ï¼Œå®ƒæ˜¯åŸºäº Foundation URL Loading System ä¸Šè¿›è¡Œäº†ä¸€å¥—å°è£…ï¼Œå¹¶ä¸”æä¾›äº†ä¸°å¯Œä¸”ä¼˜ç¾çš„APIæ¥å£ç»™ä½¿ç”¨è€…ä½¿ç”¨ã€‚ Requirementsã€éœ€æ±‚ | ç‰ˆæœ¬åŒºåˆ«ã€‘ 1.x ç‰ˆæœ¬ï¼Œå†…éƒ¨åº•å±‚æ˜¯åŸºäº NSURLConnection çš„ï¼Œæ˜¯å¯¹ NSURLConnection ä¸€æ¬¡å°è£…ã€‚ åœ¨13å¹´ï¼Œè‹¹æœæ¨å‡º NSURLSession ä¹Ÿå°±æ˜¯ä¼šè¯ç®¡ç†è€…ï¼Œåæ¥ 2.x AFNæ¡†æ¶åˆå¯¹ NSURLSession è¿›è¡Œä¸€æ¬¡å°è£…ï¼Œå…¶å®åœ¨ 2.0-2.6.3 AFNå†…éƒ¨æ˜¯ä½¿ç”¨ä¸¤å¥—ç³»ç»Ÿï¼Œä¸€å¥—æ˜¯åŸºäº NSURLConnection çš„ï¼Œä¸€å¥—æ˜¯åŸºäº NSURLSessionçš„ã€‚ ç‰ˆæœ¬å‡çº§åˆ°3.0ä¹‹åï¼ŒAFN å°±ä¸åœ¨æ”¯æŒ NSURLConnection äº†ï¼ŒæŠŠæœ‰å…³ URLConnection çš„ä»£ç å·²å…¨éƒ¨ç§»é™¤ã€‚ Architectureã€AFN å†…éƒ¨ä½“ç³»ç»“æ„ã€‘ NSURLSessionã€ç®¡ç†è€…ã€‘ AFURLSessionManager AFHTTPSessionManagerï¼ˆå°è£…äº†å¸¸ç”¨çš„ HTTP æ–¹æ³•ï¼‰ GET POST UIKit + AFNetworking åˆ†ç±» NSProgressï¼šåˆ©ç”¨KVO Serializationã€åºåˆ—åŒ–ã€‘ AFURLRequestSerializationã€è¯·æ±‚åºåˆ—åŒ–ã€‘ AFHTTPRequestSerializerï¼ˆè¯·æ±‚çš„æ•°æ®æ ¼å¼ï¼Œé»˜è®¤äºŒè¿›åˆ¶ï¼‰ AFJSONRequestSerializer AFPropertyListRequestSerializer AFURLResponseSerializationã€å“åº”è€…åºåˆ—åŒ–ã€‘ AFHTTPResponseSerializerï¼ˆé»˜è®¤äºŒè¿›åˆ¶å“åº”æ•°æ®ï¼Œè§£ææ–¹æ¡ˆï¼‰ AFJSONResponseSerializerï¼ˆè¿”å›JSONç±»å‹ï¼ŒJSONè§£ææ–¹æ¡ˆ.é»˜è®¤ï¼‰ AFXMLParserResponseSerializerï¼ˆè¿”å›XMLç±»å‹ï¼ŒXMLè§£ææ–¹æ¡ˆï¼‰ Additional Functionalityã€é¢å¤–çš„åŠŸèƒ½ã€‘ AFSecurityPolicyã€å®‰å…¨ç­–ç•¥ç›¸å…³ã€‘ HTTPSï¼ˆHTTP+SSLåŠ å¯†åè®®ï¼‰ AFNetworkReachabilityManagerã€ç½‘ç»œçŠ¶æ€ç›‘å¬ç®¡ç†è€…ã€‘ UIKitã€ç±»åº“æ‰©å±•ä¸å·¥å…·ç±»ã€‘ UIKit+AFNetworking NSURLConnectionï¼ˆiOS9.0åºŸå¼ƒï¼‰ AFURLConnectionOperation AFHTTPRequestOperation AFHTTPRequestOperationManagerï¼ˆå°è£…äº†å¸¸ç”¨çš„ HTTP æ–¹æ³•ï¼‰ å±æ€§ baseURLï¼šAFNå»ºè®®å¼€å‘è€…é’ˆå¯¹ AFHTTPRequestOperationManager è‡ªå®šä¹‰ä¸ªä¸€ä¸ªå•ä¾‹å­ç±»ï¼Œè®¾ç½® baseURL, æ‰€æœ‰çš„ç½‘ç»œè®¿é—®ï¼Œéƒ½åªä½¿ç”¨ç›¸å¯¹è·¯å¾„å³å¯ requestSerializerï¼šè¯·æ±‚æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯äºŒè¿›åˆ¶çš„ HTTP responseSerializerï¼šå“åº”çš„æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯ JSON æ ¼å¼ operationQueueï¼šæ“ä½œé˜Ÿåˆ— reachabilityManagerï¼šç½‘ç»œçŠ¶æ€æ£€æµ‹ç®¡ç†è€… æ–¹æ³• manager :æ–¹ä¾¿åˆ›å»ºç®¡ç†å™¨çš„ç±»æ–¹æ³• HTTPRequestOperationWithRequest :åœ¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œå¦‚æœ è¦å‘Šè¯‰æœåŠ¡å™¨ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œéƒ½éœ€è¦åœ¨ Request ä¸­è®¾ç½® GET POST Directoryã€AFN å·¥ç¨‹ç›®å½•ã€‘ ç›®å‰ç‰ˆæœ¬æ˜¯ 3.1.0ï¼Œæˆ‘é€šè¿‡ CocoaPods å¯¼å…¥çš„ AFNetworkingï¼Œå¯¼å…¥åç›®å½•å¦‚ä¸‹ ä½¿ç”¨ CocoaPods å¯¼å…¥åå¯ä»¥çœ‹åˆ°ç›®å½•å¾ˆæ¸…æ™°ä¸»è¦æ˜¯åœ¨äº”ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œ é™¤å» Support Filesï¼Œå¯ä»¥çœ‹åˆ°AFåˆ†ä¸ºå¦‚ä¸‹5ä¸ªåŠŸèƒ½æ¨¡å—ï¼š NSURLSessionï¼ˆç½‘ç»œé€šä¿¡æ¨¡å—ï¼‰ ReachAbilityï¼ˆç½‘ç»œçŠ¶æ€ç›‘å¬æ¨¡å—ï¼‰ Securityï¼ˆç½‘ç»œé€šä¿¡å®‰å…¨ç­–ç•¥æ¨¡å—ï¼‰ Serializationï¼ˆç½‘ç»œé€šä¿¡ä¿¡æ¯åºåˆ—åŒ–/ååºåˆ—åŒ–æ¨¡å—ï¼‰ UIKitï¼ˆUIKitåº“çš„æ‰©å±•ï¼‰ å…¶æ ¸å¿ƒå½“ç„¶æ˜¯ç½‘ç»œé€šä¿¡æ¨¡å—ï¼Œå…¶ä½™çš„å››ä¸ªæ¨¡å—ï¼Œå‡æ˜¯ä¸ºäº†é…åˆç½‘ç»œé€šä¿¡æˆ–å¯¹å·²æœ‰ UIKit çš„ä¸€ä¸ªæ‰©å±•åŠå·¥å…·åŒ…ã€‚è¿™äº”ä¸ªæ¨¡å—æ‰€å¯¹åº”çš„ç±»çš„ç»“æ„å…³ç³»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼ŒAFN çš„æ ¸å¿ƒæ˜¯ AFURLSessionManager ç±»ï¼ŒAFHTTPSessionManager ç»§æ‰¿äº AFURLSessionManagerï¼Œ é’ˆå¯¹HTTPåè®®ä¼ è¾“åšäº†ç‰¹åŒ–ã€‚è€Œ AFURLResponseSerializationï¼ŒAFSecurityPolicyï¼ŒAFNetworkReachabilityManageråˆ™è¢«AFURLSessionManageræ‰€ç”¨ã€‚å…¶æ¬¡ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå•ç‹¬çš„UIKit åŒ…æä¾›äº†å¯¹ iOS UIKit ç±»åº“çš„æ‰©å±•ä¸å·¥å…·ç±»ã€‚ å»ºè®®ï¼šå¯ä»¥å­¦ä¹ ä¸‹AFNå¯¹ UIKit åšäº†ä¸€äº›åˆ†ç±»ï¼Œå¯¹è‡ªå·±èƒ½åŠ›æå‡æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚ å½“ä¸‹è½½å¥½ï¼Œæ‰‹åŠ¨å¯¼å…¥çš„æ—¶å€™ï¼Œæ˜¾ç¤ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹ å¾ˆæ˜æ˜¾ç¬¬ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œè¾¹æ˜¯è·Ÿç½‘ç»œè¯·æ±‚ç›¸å…³çš„ï¼Œç¬¬äºŒä¸ªæ˜¯è·ŸUIç›¸å…³çš„ã€‚ è¡¥å……1ã€å¯å‚è€ƒ AFNetworking æä¾›çš„ Example å­¦ä¹  AFNetworking æºç é˜…è¯»ç³»åˆ—ã€Exampleã€‘ 2ã€ã€ŒHTTPS ç›¸å…³ã€ AFNetworkingä¹‹äºhttpsè®¤è¯ HTTPSä¸ºä»€ä¹ˆå®‰å…¨ &amp;åˆ†æ HTTPS è¿æ¥å»ºç«‹å…¨è¿‡ç¨‹ çŸ¥è¯† | HTTPSåˆ°åº•æ˜¯å•¥ï¼Ÿ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŠªåŠ›åšè‡ªå·±]]></title>
    <url>%2FPerceptionWork%2Fyourself.html</url>
    <content type="text"><![CDATA[è´¨æœ´æ— åå‡€æ— å°˜ï¼Œç©ºæ˜æ¾„æ¾ˆç£Šè½èº«ã€‚å…¥å£¶è«é—®æ¥æ—¶è·¯ï¼Œæ¸…è‚ºæ»‹è…‘æ¶¦å›å¿ƒã€‚ã€Šä¸ƒå¾‹ã€‹â€”â€” ç™½å¼€æ°´ çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚ã€Šå†¬å¤œè¯»ä¹¦ç¤ºå­è¿ã€‹â€”â€” é™†æ¸¸ æœŸå¾…å–œæ¬¢ä½ å¯æ‹¿èµ°ï¼Œæˆ‘æ— éœ€åŠ æ°´å°ï¼›æ‡‚å¾—åˆ†äº«ï¼Œä¹åœ¨å…¶ä¸­ã€‚æˆ‘åªæ˜¯ä¸ªã€çˆ±å–ç™½å¼€æ°´ã€‘çš„äººã€‚]]></content>
      <categories>
        <category>æ„Ÿæ‚Ÿ</category>
      </categories>
      <tags>
        <tag>æ„Ÿæ‚Ÿ</tag>
        <tag>æ‘„å½±</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å¼è¯¦è§£â€”ã€ŒNSNotificationé€šçŸ¥ã€]]></title>
    <url>%2FiOSUI%2FNSNotification.html</url>
    <content type="text"><![CDATA[Write in the firstã€å†™åœ¨æœ€å‰ã€‘ Notification(é€šçŸ¥) æ˜¯ iOS ç³»ç»Ÿä¸‹é‡è¦çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ä¹‹ä¸€ï¼Œé€šçŸ¥å°è£…äº†è¯¸å¦‚çª—å£è·å¾—ç„¦ç‚¹ã€ç½‘ç»œè¿æ¥å…³é—­ç­‰äº‹ä»¶ä¿¡æ¯ï¼Œé€šçŸ¥çš„å†…å®¹å¯æŒ‰ç…§æˆ‘ä»¬å®é™…çš„éœ€æ±‚æ¥å®šåˆ¶ã€‚åœ¨å®é™…å¼€å‘ä¸­æˆ–å¤šæˆ–å°‘éƒ½ä¼šæ¥è§¦åˆ°ï¼ŒNSNotificationCenter ä¸ å…¶å®ƒå¯¹è±¡ä¹‹é—´é€šä¿¡æ–¹å¼ç±»ä¼¼ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯é€‰æ‹©ï¼ˆæˆ–ä¼˜å…ˆé€‰æ‹©ï¼‰æ°å½“çš„é€šä¿¡æ–¹å¼ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€NSNotificationå’ŒNSNotificationCenter ä½¿ç”¨å’Œæ³¨æ„ç‚¹ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š NSNotification1.NSNotification æ¦‚å¿µ2.NSNotification.h ç³»ç»Ÿæ–‡ä»¶ NSNotificationCenter1.NSNotificationCenter æ¦‚å¿µ2.NSNotificationCenter ç³»ç»Ÿæ–‡ä»¶ NSNotificationCenter çš„ä½¿ç”¨æµç¨‹1.æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰2.å‘é€é€šçŸ¥3.ç§»é™¤è§‚å¯Ÿè€…ï¼ˆç§»é™¤ç›‘å¬ï¼‰ NSNotificationQueue1.NSNotificationQueue æ¦‚å¿µ2.NSNotificationQueue.h ç³»ç»Ÿæ–‡ä»¶3.NSNotificatinonCenter å®ç°åŸç† NSNotificatinonCenter å®æˆ˜ä½¿ç”¨1.åŸºæœ¬ä½¿ç”¨2.é€šçŸ¥åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨3.é€šçŸ¥åœ¨å¤šçº¿ç¨‹ä¸­æ³¨æ„ç‚¹ NSNotification Demoæ•ˆæœå›¾ æœŸå¾… &amp; åç»­ &amp; About me NSNotification æœ¬ç€å¥½å¥½å­¦ä¹ ï¼Œäº†è§£æƒå¨çš„ç›®çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸»åŠ¨çœ‹å®˜ç½‘çš„è¯´æ˜ã€‚ NSNotification æ¦‚å¿µä¸Šå›¾ç®€å•ç‚¹é‡Šä¹‰å°±æ˜¯NSNotificationæ˜¯æ–¹ä¾¿NSNotificationCenter å¹¿æ’­åˆ°å…¶ä»–å¯¹è±¡æ—¶çš„å°è£…å¯¹è±¡ï¼Œç®€å•è®²å³é€šçŸ¥ä¸­å¿ƒå¯¹é€šçŸ¥è°ƒåº¦è¡¨ä¸­çš„å¯¹è±¡å¹¿æ’­æ—¶å‘é€NSNotificationå¯¹è±¡ã€‚NSNotificationå¯¹è±¡(ç§°ä¸ºé€šçŸ¥)åŒ…å«åç§°ã€object å’Œä¸€ä¸ªå¯é€‰å­—å…¸ä¸‰ä¸ªå±æ€§ï¼Œåç§°æ˜¯ç”¨æ¥æ ‡è¯†é€šçŸ¥çš„æ ‡è®°ï¼ˆä¸€èˆ¬ä¸ºå¸¸é‡å­—ç¬¦ä¸²ï¼‰ï¼Œobjectæ˜¯ä»»æ„æƒ³è¦æºå¸¦çš„å¯¹è±¡ï¼ˆé€šå¸¸ä¸ºå‘é€è€…è‡ªå·± æˆ–ä¸ºnilï¼‰ï¼Œå­—å…¸ç”¨æ¥å­˜å‚¨å‘é€é€šçŸ¥æ—¶é™„å¸¦çš„ä¿¡æ¯ï¼ˆå¯ä¸ºnilï¼‰ã€‚NSNotification å¯¹è±¡æ˜¯ä¸å¯å˜çš„å¯¹è±¡ã€‚ NSNotification.h ç³»ç»Ÿæ–‡ä»¶çœ‹å®Œå®˜ç½‘ï¼Œæ¥ä¸‹æ¥å½“ç„¶æ˜¯çœ‹ç³»ç»Ÿæ–‡ä»¶äº†ã€‚ä½ è¯´æ˜¯å§ï¼ 12345678910/**************** Notifications ****************/@interface NSNotification : NSObject &lt;NSCopying, NSCoding&gt;@property (readonly, copy) NSNotificationName name;// é€šçŸ¥çš„æ ‡è¯†åç§°(ä¸€èˆ¬ä¸ºå¸¸é‡å­—ç¬¦ä¸²)@property (nullable, readonly, retain) id object;// ä»»æ„æƒ³è¦æºå¸¦çš„å¯¹è±¡(é€šå¸¸ä¸ºå‘é€è€…è‡ªå·±,å¯ä¸ºnil)ï¼Œ@property (nullable, readonly, copy) NSDictionary *userInfo;// å…³äºé€šçŸ¥çš„é™„åŠ ä¿¡æ¯(å¯ä¸ºnil)- (instancetype)initWithName:(NSNotificationName)name object:(nullable id)object userInfo:(nullable NSDictionary *)userInfo NS_AVAILABLE(10_6, 4_0) NS_DESIGNATED_INITIALIZER;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder NS_DESIGNATED_INITIALIZER; æ¥ä¸‹æ¥çœ‹ä¸‹ä¸‰ä¸ªåˆå§‹åŒ–æ–¹æ³• 12345+ (instancetype)notificationWithName:(NSNotificationName)aName object:(nullable id)anObject;// æœ‰é™„åŠ ä¿¡æ¯+ (instancetype)notificationWithName:(NSNotificationName)aName object:(nullable id)anObject userInfo:(nullable NSDictionary *)aUserInfo;- (instancetype)init /*NS_UNAVAILABLE*/; /* do not invoke; not a valid initializer for this class */ NSNotificationCenter æˆ‘ä»¬è¿˜æ˜¯ä¸»åŠ¨çœ‹å®˜ç½‘çš„è¯´æ˜ã€‚ NSNotificationCenter æ¦‚å¿µä¸Šå›¾ç®€å•ç‚¹é‡Šä¹‰å°±æ˜¯NSNotificationCenterå¯¹è±¡(é€šçŸ¥ä¸­å¿ƒ) æ˜¯ Foundation æ¡†æ¶çš„ä¸€ä¸ªå­ç³»ç»Ÿï¼Œæä¾›äº†åœ¨ç¨‹åºä¸­å¹¿æ’­æ¶ˆæ¯çš„æœºåˆ¶ã€‚é€šè¿‡ï¼»NSNotificationCenter defaultCenterï¼½è·å–å¼•ç”¨æ€»çš„é€šçŸ¥ä¸­å¿ƒï¼Œå¯ä»¥åœ¨ä¸åŒç±»ä¹‹é—´é€šä¿¡çš„æ—¶å€™ä½¿ç”¨ã€‚ åœ¨é€šçŸ¥ä¸­å¿ƒæ³¨å†Œè§‚å¯Ÿè€…ï¼Œå‘é€è€…ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒå¹¿æ’­æ—¶ï¼Œä»¥NSNotificationçš„nameå’Œobjectæ¥ç¡®å®šéœ€è¦å‘é€ç»™å“ªä¸ªè§‚å¯Ÿè€…ã€‚ä¸ºä¿è¯è§‚å¯Ÿè€…èƒ½æ¥æ”¶åˆ°é€šçŸ¥ï¼Œæ‰€ä»¥åº”å…ˆå‘é€šçŸ¥ä¸­å¿ƒæ³¨å†Œè§‚å¯Ÿè€…ï¼Œæ¥ç€å†å‘é€é€šçŸ¥è¿™æ ·æ‰èƒ½åœ¨é€šçŸ¥ä¸­å¿ƒè°ƒåº¦è¡¨ä¸­æŸ¥æ‰¾åˆ°ç›¸åº”è§‚å¯Ÿè€…è¿›è¡Œé€šçŸ¥ã€‚ NSNotificationCenter ç³»ç»Ÿæ–‡ä»¶çœ‹å®Œå®˜ç½‘ï¼Œæ¥ä¸‹æ¥å½“ç„¶æ˜¯çœ‹ç³»ç»Ÿæ–‡ä»¶äº†ã€‚ä½ è¯´æ˜¯å§ï¼ 123456789101112/**************** Notification Center ****************/@interface NSNotificationCenter : NSObject &#123; @package void *_impl; void *_callback; void *_pad[11];&#125;#if FOUNDATION_SWIFT_SDK_EPOCH_AT_LEAST(8)// è·å–é€šçŸ¥ä¸­å¿ƒ@property (class, readonly, strong) NSNotificationCenter *defaultCenter; æ€»ç»“ï¼šè·å–NSNotificationCenterçš„æ–¹æ³•åªæœ‰ä¸€ç§ï¼Œå³[NSNotificationCenter defaultCenter]ï¼Œå¹¶ä¸”NSNotificationCenteræ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼Œä¸€æ—¦åˆ›å»ºï¼Œè¿™ä¸ªé€šçŸ¥ä¸­å¿ƒçš„å¯¹è±¡ä¼šä¸€ç›´å­˜åœ¨äºä¸€ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚ é€šçŸ¥ä¸­å¿ƒçš„ä½¿ç”¨æµç¨‹è·å–é€šçŸ¥ä¸­å¿ƒå¯¹è±¡åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒæ¥å¤„ç†é€šçŸ¥ç›¸å…³çš„æ“ä½œäº†ï¼ŒåŒ…æ‹¬æ³¨å†Œè§‚å¯Ÿè€…ã€å‘é€é€šçŸ¥ å’Œ ç§»é™¤è§‚å¯Ÿè€…ã€‚ 1ã€æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ³¨å†Œè§‚å¯Ÿè€… 123456789101112131415161718192021222324252627//--------------------------- æ³¨å†Œè§‚å¯Ÿè€…æ–¹å¼ä¸€ ------------------------------///** Observer: è§‚å¯Ÿè€… selector: åªè¦ä¸€ç›‘å¬åˆ°é€šçŸ¥,å°±ä¼šè°ƒç”¨è§‚å¯Ÿè€…è¿™ä¸ªæ–¹æ³• Name: é€šçŸ¥åç§°ä¹Ÿæ˜¯é€šçŸ¥çš„å”¯ä¸€æ ‡ç¤ºï¼Œç¼–è¯‘å™¨å°±æ˜¯é€šè¿‡è¿™ä¸ªæ‰¾åˆ°é€šçŸ¥çš„ã€‚ object: è°å‘å‡ºçš„é€šçŸ¥,è¡¨ç¤ºä¼šå¯¹å“ªä¸ªå‘é€è€…å¯¹è±¡å‘å‡ºçš„äº‹ä»¶ä½œå‡ºå“åº”ï¼Œnil æ—¶è¡¨ç¤ºæ¥å—æ‰€æœ‰å‘é€è€…çš„äº‹ä»¶ã€‚ */- (void)addObserver:(id)observer selector:(SEL)aSelector name:(nullable NSNotificationName)aName object:(nullable id)anObject;//--------------------------- æ³¨å†Œè§‚å¯Ÿè€…æ–¹å¼äºŒ ------------------------------///** Name: é€šçŸ¥åç§° object: è°å‘å‡ºçš„é€šçŸ¥ queue: å†³å®šblockåœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œ,nil:åœ¨å‘å¸ƒé€šçŸ¥çš„çº¿ç¨‹ä¸­æ‰§è¡Œ [NSOperationQueue mainQueue]: ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ä¸»é˜Ÿåˆ— usingBlock: åªè¦ç›‘å¬åˆ°é€šçŸ¥,å°±ä¼šæ‰§è¡Œè¿™ä¸ªblock æ³¨æ„: ä¸€å®šè¦è®°å¾—ç§»é™¤ */- (id &lt;NSObject&gt;)addObserverForName:(nullable NSNotificationName)name object:(nullable id)obj queue:(nullable NSOperationQueue *)queue usingBlock:(void (^)(NSNotification *note))block NS_AVAILABLE(10_6, 4_0);// The return value is retained by the system, and should be held onto by the caller in// order to remove the observer with removeObserver: later, to stop observation. æ€»ç»“ï¼š ç¬¬ä¸€ç§æ–¹å¼æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ·»åŠ Oberverçš„æ–¹å¼ï¼Œæ¥åˆ°é€šçŸ¥æ—¶æ‰§è¡ŒSelectoræ–¹æ³•ï¼Œè§‚å¯Ÿè€…æ¥æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œä»»åŠ¡çš„ä»£ç åœ¨å‘é€é€šçŸ¥çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆä¸‹é¢ç¤ºä¾‹ä»£ç éªŒè¯ï¼‰ã€‚ ç¬¬äºŒç§æ–¹å¼æ˜¯æä¾›äº†ä¸€ä¸ªä»¥blockæ–¹å¼å®ç°çš„æ·»åŠ è§‚å¯Ÿè€…çš„æ–¹æ³•ã€‚å¤§å®¶ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªæ–¹æ³•æ—¶æ˜¯å¦ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šè§‚å¯Ÿè€…å‘¢ï¼Ÿå‚æ•°ä¸­å¹¶æ²¡æœ‰æŒ‡å®šå…·ä½“çš„è§‚å¯Ÿè€…ï¼Œé‚£è°æ˜¯è§‚å¯Ÿè€…å‘¢ï¼Ÿéœ€è¦ç§»é™¤å—ï¼Ÿ å®é™…ä¸Šï¼Œä¸å‰ä¸€ä¸ªæ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œå‰è€…ä½¿ç”¨ä¸€ä¸ªç°å­˜çš„å¯¹è±¡ä½œä¸ºè§‚å¯Ÿè€…ï¼Œè€Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åçš„å¯¹è±¡ä½œä¸ºè§‚å¯Ÿè€…(å³æ–¹æ³•è¿”å›çš„id&lt;NSObject&gt;å¯¹è±¡)ï¼Œè¿™ä¸ªåŒ¿åå¯¹è±¡ä¼šåœ¨æŒ‡å®šçš„é˜Ÿåˆ—(queue)ä¸Šå»æ‰§è¡Œæˆ‘ä»¬çš„blockã€‚ ç¬¬äºŒç§æ³¨å†Œæ–¹å¼æ³¨æ„ç‚¹ï¼š 1ã€å‚æ•°queue å†³å®šblockåœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå³æˆ‘ä»¬æŒ‡å®šäº†æ“ä½œé˜Ÿåˆ—ã€‚å¦‚æœqueueä¸ºnilï¼Œåˆ™æ¶ˆæ¯æ˜¯é»˜è®¤åœ¨postçº¿ç¨‹ä¸­åŒæ­¥å¤„ç†ï¼Œå³ è§‚å¯Ÿè€…æ¥æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œä»»åŠ¡çš„ä»£ç åœ¨å‘é€é€šçŸ¥çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆä¸‹é¢ç¤ºä¾‹ä»£ç éªŒè¯ï¼‰ã€‚ 2ã€blockå—ä¼šè¢«é€šçŸ¥ä¸­å¿ƒæ‹·è´ä¸€ä»½(æ‰§è¡Œcopyæ“ä½œ)ï¼Œä»¥åœ¨å †ä¸­ç»´æŠ¤ä¸€ä¸ªblockå¯¹è±¡ï¼Œç›´åˆ°è§‚å¯Ÿè€…è¢«ä»é€šçŸ¥ä¸­å¿ƒä¸­ç§»é™¤ã€‚æ‰€ä»¥ï¼Œåº”è¯¥ç‰¹åˆ«æ³¨æ„åœ¨blockä¸­ä½¿ç”¨å¤–éƒ¨å¯¹è±¡ï¼Œé¿å…å‡ºç°å¯¹è±¡çš„å¾ªç¯å¼•ç”¨ã€‚ 3ã€å¦‚æœä¸€ä¸ªç»™å®šçš„é€šçŸ¥è§¦å‘äº†å¤šä¸ªè§‚å¯Ÿè€…çš„blockæ“ä½œï¼Œåˆ™è¿™äº›æ“ä½œä¼šåœ¨å„è‡ªçš„Operation Queueä¸­è¢«å¹¶å‘æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬ ä¸èƒ½å»å‡è®¾æ“ä½œçš„æ‰§è¡Œä¼šæŒ‰ç…§æ·»åŠ è§‚å¯Ÿè€…çš„é¡ºåºæ¥æ‰§è¡Œã€‚ 4ã€è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¡¨ç¤ºè§‚å¯Ÿè€…çš„å¯¹è±¡ï¼Œè®°å¾—åœ¨ä¸ç”¨æ—¶ç§»é™¤è¿™ä¸ªå¯¹è±¡ã€‚ ç¬¬2ç‚¹ç¤ºä¾‹ï¼Œç”±äºä½¿ç”¨çš„æ˜¯blockï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„çš„å°±æ˜¯é¿å…å¼•èµ·å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142@interface Observer : NSObject@property (nonatomic, assign) NSInteger i;@property (nonatomic, weak) id&lt;NSObject&gt; observer;@end @implementation Observer- (instancetype)init &#123; self = [super init]; if (self) &#123; NSLog(@"Init Observer"); // æ·»åŠ è§‚å¯Ÿè€… _observer = [[NSNotificationCenter defaultCenter] addObserverForName:TEST_NOTIFICATION object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) &#123; NSLog(@"handle notification"); // ä½¿ç”¨self self.i = 10; &#125;]; &#125; return self;&#125;@end #pragma mark - ViewController@implementation ViewController - (void)viewDidLoad &#123; [super viewDidLoad]; [self createObserver]; // å‘é€æ¶ˆæ¯ [[NSNotificationCenter defaultCenter] postNotificationName:TEST_NOTIFICATION object:nil];&#125;- (void)createObserver &#123; Observer *observer = [[Observer alloc] init];&#125;@end//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------//// æ‰“å°è¾“å‡ºInit Observerhandle notification æˆ‘ä»¬å¯ä»¥çœ‹åˆ°createObserverä¸­åˆ›å»ºçš„observerå¹¶æ²¡æœ‰è¢«é‡Šæ”¾ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨addObserverForName:object:queue:usingBlock:ä¸€å®šè¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚ 2ã€å‘é€é€šçŸ¥å‘é€é€šçŸ¥å¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•123- (void)postNotification:(NSNotification *)notification;- (void)postNotificationName:(NSNotificationName)aName object:(nullable id)anObject;- (void)postNotificationName:(NSNotificationName)aName object:(nullable id)anObject userInfo:(nullable NSDictionary *)aUserInfo; æ€»ç»“ï¼š ä¸‰ç§æ–¹å¼éƒ½æ˜¯å‘é€NSNotificationå¯¹è±¡ç»™é€šçŸ¥ä¸­å¿ƒæ³¨å†Œçš„æ‰€æœ‰è§‚å¯Ÿè€…ã€‚ å‘é€é€šçŸ¥é€šè¿‡nameå’Œobjectæ¥ç¡®å®šæ¥æ ‡è¯†è§‚å¯Ÿè€…ï¼Œnameå’Œobjectä¸¤ä¸ªå‚æ•°çš„è§„åˆ™ç›¸åŒå³å½“é€šçŸ¥è®¾ç½®nameä¸ºkChangeNotifitionæ—¶ï¼Œé‚£ä¹ˆåªä¼šå‘é€ç»™ç¬¦åˆnameä¸ºkChangeNotifitionçš„è§‚å¯Ÿè€…ï¼ŒåŒç†objectæŒ‡å‘é€ç»™æŸä¸ªç‰¹å®šå¯¹è±¡é€šçŸ¥ï¼Œå¦‚æœåªè®¾ç½®äº†nameï¼Œé‚£ä¹ˆåªæœ‰å¯¹åº”åç§°çš„é€šçŸ¥ä¼šè§¦å‘ã€‚å¦‚æœåŒæ—¶è®¾ç½®nameå’Œobjectå‚æ•°æ—¶å°±å¿…é¡»åŒæ—¶ç¬¦åˆè¿™ä¸¤ä¸ªæ¡ä»¶çš„è§‚å¯Ÿè€…æ‰èƒ½æ¥æ”¶åˆ°é€šçŸ¥ã€‚ 3ã€ç§»é™¤è§‚å¯Ÿè€…ï¼ˆç§»é™¤ç›‘å¬ï¼‰åœ¨å¯¹è±¡è¢«é‡Šæ”¾å‰éœ€è¦ç§»é™¤æ‰è§‚å¯Ÿè€…ï¼Œé¿å…å·²ç»è¢«é‡Šæ”¾çš„å¯¹è±¡è¿˜æ¥æ”¶åˆ°é€šçŸ¥å¯¼è‡´å´©æºƒã€‚ç§»é™¤è§‚å¯Ÿè€…æœ‰ä¸¤ç§æ–¹å¼ï¼š 12- (void)removeObserver:(id)observer;- (void)removeObserver:(id)observer name:(nullable NSNotificationName)aName object:(nullable id)anObject; æ€»ç»“ï¼š ä¼ å…¥ç›¸åº”çš„éœ€è¦ç§»é™¤çš„observer æˆ–è€…ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ä¸‰ä¸ªå‚æ•°æ¥ç§»é™¤æŒ‡å®šæŸä¸ªè§‚å¯Ÿè€…ã€‚ å¦‚æœä½¿ç”¨åŸºäº-[NSNotificationCenter addObserverForName:object:queue:usingBlock:]æ–¹æ³•åœ¨è·å–æ–¹æ³•è¿”å›çš„è§‚å¯Ÿè€…è¿›è¡Œé‡Šæ”¾ã€‚åŸºäºè¿™ä¸ªæ–¹æ³•æˆ‘ä»¬è¿˜å¯ä»¥è®©è§‚å¯Ÿè€…æ¥åˆ°é€šçŸ¥ååªæ‰§è¡Œä¸€æ¬¡ï¼š 1234__block __weak id&lt;NSObject&gt; observer = [[NSNotificationCenter defaultCenter] addObserverForName:@"note" object:nil queue:nil usingBlock:^(NSNotification * _Nonnull note) &#123; NSLog(@"%@",[NSThread currentThread]);&#125;]; é€šçŸ¥çš„å‘é€ä¸å¤„ç†æ˜¯åŒæ­¥çš„ï¼Œåœ¨æŸä¸ªåœ°æ–¹postä¸€ä¸ªæ¶ˆæ¯æ—¶ï¼Œä¼šç­‰åˆ°æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡æ‰§è¡Œå®Œå¤„ç†æ“ä½œåï¼Œæ‰å›åˆ°postçš„åœ°æ–¹ï¼Œç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚ 123456789101112131415161718192021222324- (void)viewDidLoad &#123; [super viewDidLoad]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reciveNote1) name:@"note" object:nil]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reciveNote2) name:@"note" object:nil]; [[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil]; NSLog(@"continue");&#125;- (void)reciveNote1 &#123; NSLog(@"æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1"); &#125;- (void)reciveNote2 &#123; NSLog(@"æ¥æ”¶åˆ°é€šçŸ¥--reciveNote2"); &#125;//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------////æ‰“å°è¾“å‡º2016-03-28 15:33:48.423 03-é€šçŸ¥è¡¥å……[8711:298506] æ¥æ”¶åˆ°é€šçŸ¥--reciveNote12016-03-28 15:33:48.423 03-é€šçŸ¥è¡¥å……[8711:298506] æ¥æ”¶åˆ°é€šçŸ¥--reciveNote22016-03-28 15:33:48.423 03-é€šçŸ¥è¡¥å……[8711:298506] continue NSNotificationQueue æˆ‘ä»¬è¿˜æ˜¯ä¸»åŠ¨çœ‹å®˜ç½‘çš„è¯´æ˜ã€‚ NSNotificationQueue æ¦‚å¿µä¸Šå›¾ç®€å•ç‚¹é‡Šä¹‰å°±æ˜¯NSNotificationQueue é€šçŸ¥é˜Ÿåˆ—ï¼Œæ›´åƒæ˜¯é€šçŸ¥ä¸­å¿ƒçš„ç¼“å†²åŒºï¼Œç”¨æ¥ç®¡ç†å¤šä¸ªé€šçŸ¥çš„è°ƒç”¨ã€‚é€šçŸ¥é˜Ÿåˆ—é€šå¸¸ä»¥å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰é¡ºåºç®¡ç†é€šçŸ¥ã€‚å½“ä¸€ä¸ªé€šçŸ¥ä¸Šå‡åˆ°é˜Ÿåˆ—çš„å‰é¢æ—¶ï¼Œé˜Ÿåˆ—å°±å°†å®ƒå‘é€ç»™é€šçŸ¥ä¸­å¿ƒ(NSNotificationCenter)ï¼Œé€šçŸ¥ä¸­å¿ƒéšåå°†å®ƒæ´¾å‘ç»™æ‰€æœ‰æ³¨å†Œä¸ºè§‚å¯Ÿè€…çš„å¯¹è±¡ã€‚ã€‚ NSNotificationQueue.h ç³»ç»Ÿæ–‡ä»¶çœ‹å®Œå®˜ç½‘ï¼Œæ¥ä¸‹æ¥å½“ç„¶æ˜¯çœ‹ç³»ç»Ÿæ–‡ä»¶äº†ã€‚ä½ è¯´æ˜¯å§ï¼ åˆ›å»ºé€šçŸ¥é˜Ÿåˆ—æ–¹æ³• 12// åˆ›å»ºé€šçŸ¥é˜Ÿåˆ—æ–¹æ³•- (instancetype)initWithNotificationCenter:(NSNotificationCenter *)notificationCenter NS_DESIGNATED_INITIALIZER; å¾€é˜Ÿåˆ—åŠ å…¥é€šçŸ¥æ–¹æ³•(å¼‚æ­¥) 123// å¾€é˜Ÿåˆ—åŠ å…¥é€šçŸ¥æ–¹æ³•- (void)enqueueNotification:(NSNotification *)notification postingStyle:(NSPostingStyle)postingStyle;- (void)enqueueNotification:(NSNotification *)notification postingStyle:(NSPostingStyle)postingStyle coalesceMask:(NSNotificationCoalescing)coalesceMask forModes:(nullable NSArray&lt;NSRunLoopMode&gt; *)modes; ç§»é™¤é˜Ÿåˆ—ä¸­çš„é€šçŸ¥æ–¹æ³• 12// ç§»é™¤é˜Ÿåˆ—ä¸­çš„é€šçŸ¥æ–¹æ³•- (void)dequeueNotificationsMatching:(NSNotification *)notification coalesceMask:(NSUInteger)coalesceMask; å‘é€æ–¹å¼ 12345678910// NSPostingStyleåŒ…æ‹¬ä¸‰ç§ç±»å‹typedef NS_ENUM(NSUInteger, NSPostingStyle) &#123; NSPostWhenIdle = 1, NSPostASAP = 2, NSPostNow = 3&#125;;æ³¨è§£ï¼šNSPostWhenIdleï¼šç©ºé—²å‘é€é€šçŸ¥ å½“è¿è¡Œå¾ªç¯å¤„äºç­‰å¾…æˆ–ç©ºé—²çŠ¶æ€æ—¶ï¼Œå‘é€é€šçŸ¥ï¼Œå¯¹äºä¸é‡è¦çš„é€šçŸ¥å¯ä»¥ä½¿ç”¨ã€‚NSPostASAPï¼šå°½å¿«å‘é€é€šçŸ¥ å½“å‰è¿è¡Œå¾ªç¯è¿­ä»£å®Œæˆæ—¶ï¼Œé€šçŸ¥å°†ä¼šè¢«å‘é€ï¼Œæœ‰ç‚¹ç±»ä¼¼æ²¡æœ‰å»¶è¿Ÿçš„å®šæ—¶å™¨ã€‚NSPostNow ï¼šåŒæ­¥å‘é€é€šçŸ¥ å¦‚æœä¸ä½¿ç”¨åˆå¹¶é€šçŸ¥ å’ŒpostNotification:ä¸€æ ·æ˜¯åŒæ­¥é€šçŸ¥ã€‚ åˆå¹¶é€šçŸ¥ é€šè¿‡åˆå¹¶æˆ‘ä»¬å¯ä»¥ç”¨æ¥ä¿è¯ç›¸åŒçš„é€šçŸ¥åªè¢«å‘é€ä¸€æ¬¡ã€‚ forModes:(nullable NSArray&lt;NSRunLoopMode&gt; *)modeså¯ä»¥ä½¿ç”¨ä¸åŒçš„NSRunLoopModeé…åˆæ¥å‘é€é€šçŸ¥ï¼Œå¯ä»¥çœ‹å‡ºå®é™…ä¸ŠNSNotificationQueueä¸RunLoopçš„æœºåˆ¶ä»¥åŠè¿è¡Œå¾ªç¯æœ‰å…³ç³»ï¼Œé€šè¿‡NSNotificationQueueé˜Ÿåˆ—æ¥å‘é€çš„é€šçŸ¥å’Œå…³è”çš„RunLoopè¿è¡Œæœºåˆ¶æ¥è¿›è¡Œçš„ã€‚ 12345678910// NSNotificationCoalescingä¹ŸåŒ…æ‹¬ä¸‰ç§ç±»å‹typedef NS_OPTIONS(NSUInteger, NSNotificationCoalescing) &#123; NSNotificationNoCoalescing = 0, NSNotificationCoalescingOnName = 1, NSNotificationCoalescingOnSender = 2&#125;;æ³¨è§£ï¼šNSNotificationNoCoalescingï¼šä¸åˆå¹¶é€šçŸ¥ã€‚NSNotificationCoalescingOnNameï¼šåˆå¹¶ç›¸åŒåç§°çš„é€šçŸ¥ã€‚NSNotificationCoalescingOnSenderï¼šåˆå¹¶ç›¸åŒé€šçŸ¥å’ŒåŒä¸€å¯¹è±¡çš„é€šçŸ¥ã€‚ NSNotificatinonCenter å®ç°åŸç† NSNotificatinonCenteræ˜¯ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥å®ç°çš„ç”¨äºè·¨å±‚ä¼ é€’æ¶ˆæ¯ï¼Œç”¨æ¥é™ä½è€¦åˆåº¦ã€‚ NSNotificatinonCenterç”¨æ¥ç®¡ç†é€šçŸ¥ï¼Œå°†è§‚å¯Ÿè€…æ³¨å†Œåˆ°NSNotificatinonCenterçš„é€šçŸ¥è°ƒåº¦è¡¨ä¸­ï¼Œç„¶åå‘é€é€šçŸ¥æ—¶åˆ©ç”¨æ ‡è¯†ç¬¦nameå’Œobjectè¯†åˆ«å‡ºè°ƒåº¦è¡¨ä¸­çš„è§‚å¯Ÿè€…ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼Œå³ä¼ é€’æ¶ˆæ¯ï¼ˆåœ¨Objective-Cä¸­å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œå°±æ˜¯ä¼ é€’æ¶ˆæ¯ï¼Œæ¶ˆæ¯æœ‰nameæˆ–è€…selectorï¼Œå¯ä»¥æ¥å—å‚æ•°ï¼Œè€Œä¸”å¯èƒ½æœ‰è¿”å›å€¼ï¼‰ï¼Œå¦‚æœæ˜¯åŸºäºblockåˆ›å»ºçš„é€šçŸ¥å°±è°ƒç”¨NSNotificationçš„blockã€‚ NSNotificatinonCenter å®æˆ˜ä½¿ç”¨ åŸºæœ¬ä½¿ç”¨ç¬¬ä¸€ç§æ³¨å†Œè§‚å¯Ÿè€…çš„æ–¹å¼ï¼š 1234567891011121314151617181920212223- (void)viewDidLoad &#123; [super viewDidLoad]; // 1.æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reciveNote1) name:@"note" object:nil]; // 2.å‘é€é€šçŸ¥ [[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil];&#125;// ä¸€ä¸ªå¯¹è±¡å³å°†é”€æ¯å°±ä¼šè°ƒç”¨- (void)dealloc &#123; // 3.ç§»é™¤é€šçŸ¥ [[NSNotificationCenter defaultCenter] removeObserver:self];&#125;// è§‚å¯Ÿè€…æ¥æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œä»»åŠ¡çš„ä»£ç - (void)reciveNote1 &#123; NSLog(@"æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1"); &#125;æ‰“å°è¾“å‡ºï¼š2016-03-28 16:57:45.320 03-é€šçŸ¥è¡¥å……[10343:376649] æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1 ç¬¬äºŒç§æ³¨å†Œè§‚å¯Ÿè€…çš„æ–¹å¼ï¼š 123456789@property (nonatomic, weak) id observe;// 1.æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰_observe = [[NSNotificationCenter defaultCenter] addObserverForName:@"note" object:nil queue:nil usingBlock:^(NSNotification * _Nonnull note) &#123; NSLog(@"æˆ‘æ˜¯blockæ–¹å¼æ³¨å†Œè§‚å¯Ÿè€…");&#125;]; // 2.å‘é€é€šçŸ¥[[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil]; æ€»ç»“ï¼šè¿™ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹åœ¨äºæ·»åŠ è§‚å¯Ÿè€…çš„æ“ä½œä¸å›è°ƒå¤„ç†æ“ä½œçš„ä»£ç æ›´åŠ ç´§å‡‘ï¼Œä¸éœ€è¦æ‹¼å‘½æ»šåŠ¨é¼ æ ‡å°±èƒ½ç›´æ¥æ‰¾åˆ°å¤„ç†ä»£ç ï¼Œç®€å•ç›´è§‚ã€‚ä¸ªäººæ¯”è¾ƒå–œæ¬¢ã€‚ é€šçŸ¥åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨æ³¨å†Œè§‚å¯Ÿè€…ä¸¤ç§æ–¹å¼ï¼Œåœ¨å¤šçº¿ç¨‹ä¸­çš„ä½¿ç”¨å’Œæ³¨æ„ç‚¹ï¼Œä»¥ä¸‹ ä¼šåˆ†åˆ«è¯´æ˜ã€‚ ç¬¬ä¸€ç§æ³¨å†Œè§‚å¯Ÿè€…æ–¹å¼ï¼Œä»¥ä¸‹ä»£ç æˆ‘ä»¬å°†éªŒè¯è¿™ä¸ªç»“è®ºï¼šæ¥æ”¶é€šçŸ¥ä»£ç  ç”± å‘å‡ºé€šçŸ¥çº¿ç¨‹å†³å®šï¼Œå³è§‚å¯Ÿè€…æ¥æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œä»»åŠ¡çš„ä»£ç åœ¨å‘é€é€šçŸ¥çš„çº¿ç¨‹ä¸­æ‰§è¡Œ 123456789101112131415161718// 1.æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reciveNote1) name:@"note" object:nil];// 2.å‘é€é€šçŸ¥ï¼ˆä¸»çº¿ç¨‹ï¼‰[[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil];// å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥çº¿ç¨‹ï¼‰dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil];&#125;);//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------////// æ¥æ”¶åˆ°é€šçŸ¥æ‰§è¡Œä»£ç - (void)reciveNote1 &#123; NSLog(@"%@",[NSThread currentThread]); NSLog(@"æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1"); &#125; 1234567å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥çº¿ç¨‹ï¼‰æ‰“å°è¾“å‡ºï¼š2016-03-28 17:21:36.122 03-é€šçŸ¥è¡¥å……[10818:402396] &lt;NSThread: 0x600000267cc0&gt;&#123;number = 3, name = (null)&#125;2016-03-28 17:21:36.122 03-é€šçŸ¥è¡¥å……[10818:402396] æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1å‘é€é€šçŸ¥ï¼ˆä¸»çº¿ç¨‹ï¼‰æ‰“å°è¾“å‡ºï¼š2016-03-28 17:23:42.705 03-é€šçŸ¥è¡¥å……[10868:404679] &lt;NSThread: 0x60800007a6c0&gt;&#123;number = 1, name = main&#125;2016-03-28 17:23:42.705 03-é€šçŸ¥è¡¥å……[10868:404679] æ¥æ”¶åˆ°é€šçŸ¥--reciveNote1 ç¬¬äºŒç§æ³¨å†Œè§‚å¯Ÿè€…æ–¹å¼ï¼Œä»¥ä¸‹ä»£ç æˆ‘ä»¬å°†éªŒè¯è¿™ä¸ªç»“è®ºï¼šæ¥æ”¶é€šçŸ¥ä»£ç  ç”± å‘å‡ºé€šçŸ¥çº¿ç¨‹å†³å®šï¼Œå³è§‚å¯Ÿè€…æ¥æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œä»»åŠ¡çš„ä»£ç åœ¨å‘é€é€šçŸ¥çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæŒ‡å®šæ“ä½œé˜Ÿåˆ—é™¤å¤–ï¼‰ 1234567891011121314151617// æŒ‡å®šæ“ä½œé˜Ÿåˆ— [NSOperationQueue mainQueue] // _observe = [[NSNotificationCenter defaultCenter] addObserverForName:@"note" object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification * _Nonnull note) &#123;// 1.æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆæ·»åŠ ç›‘å¬ï¼‰_observe = [[NSNotificationCenter defaultCenter] addObserverForName:@"note" object:nil queue:nil usingBlock:^(NSNotification * _Nonnull note) &#123; // åªè¦ç›‘å¬åˆ°é€šçŸ¥ å°±ä¼šè°ƒç”¨ NSLog(@"%@",[NSThread currentThread]); NSLog(@"æˆ‘æ˜¯blockæ–¹å¼æ³¨å†Œè§‚å¯Ÿè€…");&#125;];// 2.å‘é€é€šçŸ¥ï¼ˆä¸»çº¿ç¨‹ï¼‰[[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil];// å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥çº¿ç¨‹ï¼‰dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:@"note" object:nil];&#125;); 1234567891011å‘é€é€šçŸ¥ï¼ˆä¸»çº¿ç¨‹ï¼‰æ‰“å°è¾“å‡ºï¼š2016-03-28 18:17:08.587 03-é€šçŸ¥è¡¥å……[11305:421194] &lt;NSThread: 0x608000072940&gt;&#123;number = 1, name = main&#125;2016-03-28 18:17:08.587 03-é€šçŸ¥è¡¥å……[11305:421194] æˆ‘æ˜¯blockæ–¹å¼æ³¨å†Œè§‚å¯Ÿè€…å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥çº¿ç¨‹ï¼‰æ‰“å°è¾“å‡ºï¼š2016-03-28 18:24:56.248 03-é€šçŸ¥è¡¥å……[11503:431482] &lt;NSThread: 0x60000007ec40&gt;&#123;number = 3, name = (null)&#125;2016-03-28 18:24:56.248 03-é€šçŸ¥è¡¥å……[11503:431482] æˆ‘æ˜¯blockæ–¹å¼æ³¨å†Œè§‚å¯Ÿè€…æ³¨å†Œè§‚å¯Ÿè€…,æŒ‡å®šæ“ä½œé˜Ÿåˆ—ï¼ˆä¸ç®¡å‘é€é€šçŸ¥åœ¨é‚£ä¸ªçº¿ç¨‹éƒ½æŒ‰æŒ‡å®šæ“ä½œé˜Ÿåˆ—æ‰§è¡Œï¼‰2016-03-28 18:27:04.567 03-é€šçŸ¥è¡¥å……[11555:433722] &lt;NSThread: 0x600000073e40&gt;&#123;number = 1, name = main&#125;2016-03-28 18:27:04.567 03-é€šçŸ¥è¡¥å……[11555:433722] æˆ‘æ˜¯blockæ–¹å¼æ³¨å†Œè§‚å¯Ÿè€… é€šçŸ¥åœ¨å¤šçº¿ç¨‹ä¸­æ³¨æ„ç‚¹å¼€å‘ä¸­ä½¿ç”¨åœºæ™¯ï¼Œç¬¬ä¸€ç§æ–¹å¼ï¼Œä¸€èˆ¬åœ¨æ¥æ”¶é€šçŸ¥æ‰§è¡Œä»£ç ä¸­ï¼Œåšä¸€ä¸‹å¤„ç†ï¼š 123456789- (void)reciveNote1&#123; // æ›´æ–°UI dispatch_sync(dispatch_get_main_queue(), ^&#123; // æ›´æ–°UI NSLog(@"%@",[NSThread currentThread]); &#125;);&#125; ç¬¬äºŒç§æ–¹å¼ï¼Œä¸€èˆ¬åœ¨æ¥æ”¶é€šçŸ¥æ‰§è¡Œä»£ç ä¸­ï¼Œåšä¸€ä¸‹å¤„ç†ï¼š 1234567// ä¸€èˆ¬ä¸è¦å†™nil ,æ›´æ–°UIæŒ‡å®šä¸»é˜Ÿåˆ—_observe = [[NSNotificationCenter defaultCenter] addObserverForName:@"note" object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification * _Nonnull note) &#123; // æ›´æ–°UI NSLog(@"%@",[NSThread currentThread]);&#125;]; æ€»ç»“ åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡ä¹‹é—´å¦‚ä½•é€šä¿¡ã€‚æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯ä¼˜å…ˆé€‰æ‹©å“ªä¸€ç§é€šä¿¡æ–¹å¼ã€‚å¯¹è±¡ä¹‹é—´çš„é€šä¿¡æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š ç›´æ¥æ–¹æ³•è°ƒç”¨ Target-Actionäº‹ä»¶ Delegateä»£ç† blockå›è°ƒ KVOç›‘å¬ NSNotificationé€šçŸ¥ ä¼˜å…ˆé€‰æ‹©å“ªä¸€ç§é€šä¿¡æ–¹å¼ï¼š é€šä¿¡å¯¹è±¡æ˜¯ä¸€å¯¹ä¸€çš„è¿˜æ˜¯ä¸€å¯¹å¤šçš„å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦. å»ºè®®ï¼š 1.åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨é€šçŸ¥ï¼Œè¦æ±‚: å¿…é¡»å¾—ä¿è¯é€šçŸ¥çš„åç§°åœ¨ç›‘å¬å’Œå‘å‡ºæ—¶æ˜¯ä¸€è‡´çš„ã€‚ 2.æ³¨å†Œçš„è§‚å¯Ÿè€…åœ¨ä¸ä½¿ç”¨æ—¶ä¸€å®šè¦è®°å¾—ç§»é™¤ï¼Œå³æ·»åŠ å’Œç§»é™¤è¦é…å¯¹å‡ºç°ã€‚ 3.å°½å¯èƒ½è¿Ÿåœ°å»æ³¨å†Œä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå¹¶å°½å¯èƒ½æ—©å°†å…¶ç§»é™¤ï¼Œè¿™æ ·å¯ä»¥æ”¹å–„ç¨‹åºçš„æ€§èƒ½ã€‚å› ä¸ºï¼Œæ¯postä¸€ä¸ªé€šçŸ¥ï¼Œéƒ½ä¼šæ˜¯éå†é€šçŸ¥ä¸­å¿ƒçš„åˆ†å‘è¡¨ï¼Œç¡®ä¿é€šçŸ¥å‘ç»™æ¯ä¸€ä¸ªè§‚å¯Ÿè€…ã€‚ 4.è®°ä½é€šçŸ¥çš„å‘é€å’Œå¤„ç†æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ã€‚ 5.ä½¿ç”¨-addObserverForName:object:queue:usingBlock:åŠ¡å¿…å¤„ç†å¥½å†…å­˜é—®é¢˜ï¼Œé¿å…å‡ºç°å¾ªç¯å¼•ç”¨ã€‚ 6.NSNotificationCenteræ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å¹¶ä¸æ„å‘³ç€åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¸éœ€è¦å…³æ³¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¸æ°å½“çš„ä½¿ç”¨ä»ç„¶ä¼šå¼•å‘çº¿ç¨‹é—®é¢˜ã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å¼è¯¦è§£â€”ã€ŒKVCç¼–ç  & KVOç›‘å¬ã€]]></title>
    <url>%2FiOSUI%2FKVCKVO.html</url>
    <content type="text"><![CDATA[Write in the firstã€å†™åœ¨æœ€å‰ã€‘ å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯ç¨‹åºçš„æµç¨‹å–å†³äºä½ æ‰€ä½¿ç”¨çš„å„ç§å˜é‡å’Œå±æ€§çš„å€¼ï¼Œæ ¹æ®å˜é‡å’Œå±æ€§çš„å€¼ç¡®å®šåé¢è¿è¡Œçš„ä»£ç ã€‚å­¦å¥½ã€Œè·å–ç±»ä¸­å±æ€§çš„å˜åŒ–ã€è¿™ä¸€æ¨¡å—æ˜¯å¼€å‘é‡è¦éƒ¨åˆ†ä¹‹ä¸€ï¼Œç›®åœ°ï¼šä¸ºäº†è§£å†³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±éœ€æ±‚æ”¹å˜å¼•å‘çš„å„ç§è›‹ç–¼ã€ç¹ççš„é—®é¢˜ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€KVC &amp; KVO ä½¿ç”¨åœºæ™¯ç›¸å…³ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š å¼•å¯¼ KVC æ¦‚è®º KVC å¸¸ç”¨æ–¹æ³• KVC å¯¹å¤šç§æ•°æ®ç±»å‹çš„æ”¯æŒ KVC å®ç°åŸç† KVC åŸºæœ¬ä½¿ç”¨1.KVC ç®€å•èµ‹å€¼ &amp; å–å€¼2.KVC è®¿é—®ç§æœ‰æˆå‘˜å˜é‡3.KVC å­—å…¸è½¬æ¨¡å‹ KVO æ¦‚è®º KVO ä½¿ç”¨æ­¥éª¤ KVO å®ç°åŸç† KVO æ‰‹åŠ¨å‘é€é€šçŸ¥æœºåˆ¶ å¼•å¯¼ æˆ‘ä»¬æœ‰å¤šç§æ–¹å¼è·å–å¯¹è±¡çš„æ”¹å˜ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨å§”æ‰˜ã€é€šçŸ¥è·å–å€¼çš„æ”¹å˜ã€‚å¦‚æœéœ€è¦è§‚å¯Ÿå¤šä¸ªå±æ€§çš„å˜åŒ–ï¼Œä½¿ç”¨å§”æ‰˜æˆ–é€šçŸ¥ä¼šäº§ç”Ÿå¤§é‡ä»£ç ï¼Œä¸€ä¸ªæ›´å¥½ç”¨æ¥è§‚å¯Ÿå±æ€§å˜åŒ–çš„æ–¹æ³•æ˜¯ä½¿ç”¨ é”®å€¼ç›‘å¬ï¼ˆKey Value Observingï¼Œç®€ç§°KVOï¼‰ï¼ŒApple åœ¨è‡ªå·±çš„è½¯ä»¶ä¸­å¤§é‡ä½¿ç”¨ KVOã€‚ä½¿ç”¨ KVO è·Ÿè¸ªå•ä¸ªå±æ€§æˆ–é›†åˆï¼ˆå¦‚æ•°ç»„ï¼‰çš„å˜åŒ–éå¸¸é«˜æ•ˆï¼Œé”®å€¼è§‚å¯Ÿå»ºç«‹åœ¨ é”®å€¼ç¼–ç ï¼ˆKey Value Codingï¼Œç®€ç§°KVCï¼‰ åŸºç¡€ä¸Šï¼Œä¹Ÿå°±æ˜¯ä»»ä½•ä½ æƒ³ä½¿ç”¨ KVO ç›‘å¬çš„å±æ€§å¿…é¡»ç¬¦åˆé”®å€¼ç¼–ç ã€‚KVO åªéœ€è¦åœ¨è§‚å¯Ÿè€…æ–¹æ³•ä¸­æ·»åŠ ä»£ç ï¼Œä¸éœ€è¦ä¿®æ”¹è¢«è§‚å¯Ÿæ–‡ä»¶å†…ä»£ç ï¼Œè¿™ä¸€ç‚¹å’Œå§”æ‰˜ã€é€šçŸ¥ä¸åŒã€‚ KVC å’Œ KVO æä¾›äº†ä¸€ä¸ªå¼ºå¤§é«˜æ•ˆçš„æ–¹å¼æ¥ç¼–å†™ä»£ç ï¼Œå­¦ä¹  KVO å‰å¿…é¡»å…ˆæŒæ¡ KVCï¼Œæ‰€ä»¥ æˆ‘ä»¬æŒ‰å®ç”¨å¼€å‘æŠ€å·§ä¸€ç‚¹ç‚¹å‰–æå®ƒã€‚ KVC æ¦‚è®º KVCï¼ˆå…¨ç§° key-value-codingï¼‰å³é”®å€¼ç¼–ç ã€‚KVC çš„æ“ä½œæ–¹æ³•ç”±NSKeyValueCoding éæ­£å¼åè®®æä¾›ï¼Œè€ŒNSObject(NSKeyValueCoding)å°±å®ç°äº†è¿™ä¸ªåè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ObjCä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æ”¯æŒ KVC æ“ä½œï¼Œå®ƒæ˜¯ä¸€ç§ä¸é€šè¿‡å­˜å–æ–¹æ³•ï¼ˆSetterã€Getterï¼‰ï¼Œè€Œé€šè¿‡å±æ€§åç§°å­—ç¬¦ä¸²ï¼ˆkeyï¼‰é—´æ¥è®¿é—®ç±»å±æ€§(å®ä¾‹å˜é‡)çš„æœºåˆ¶ã€‚ KVC å¸¸ç”¨æ–¹æ³• KVC å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼š èµ‹å€¼ 123456- (void)setValue:(nullable id)value forKey:(NSString *)key;- (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath;// æ³¨è§£:setValue:(å±æ€§å€¼) forKey:(å±æ€§å),ï¼ˆç”¨äºç®€å•å±æ€§ï¼‰ã€‚setValue:(å±æ€§å€¼) forKeyPath:(å±æ€§å),ï¼ˆç”¨äºå¤åˆå±æ€§ï¼Œè¿›è¡Œå†…éƒ¨çš„ç‚¹è¯­æ³•ï¼Œå±‚å±‚è®¿é—®å†…éƒ¨çš„å±æ€§; ä¾‹å¦‚student.nameï¼ŒStudentå­¦ç”Ÿæ¨¡å‹ç±»ä¸­çš„nameå±æ€§ã€‚ è·å–å€¼ 123456- (id)valueForKey:(NSString *)key;- (nullable id)valueForKeyPath:(NSString *)keyPath;// æ³¨è§£:valueForKey:å±æ€§åvalueForKeyPath:å±æ€§å(ç”¨äºå¤åˆå±æ€§ï¼‰ KVC å¯¹å¤šç§æ•°æ®ç±»å‹çš„æ”¯æŒ é¦–å…ˆè¦è¯´çš„æ˜¯å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„å±æ€§ï¼ŒKVC çš„è¿™å‡ ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±ã€‚å…¶æ¬¡ï¼ŒKVC ä¹Ÿæ”¯æŒæ•°ç»„å’Œå­—å…¸ç­‰é›†åˆæ•°æ®ã€‚è¿™é‡Œäº†è§£ä¸å¤šï¼Œä¸åšè¿‡å¤šæ€»ç»“ï¼Œæœ‰å…´è¶£å¯å‚è€ƒï¼šKVC/KVOåŸç†è¯¦è§£åŠç¼–ç¨‹æŒ‡å— ç®€å•ç¤ºä¾‹ï¼šKVC è‡ªåŠ¨ç±»å‹è½¬æ¢å¦‚ï¼šæ¨¡å‹ç±»å®šä¹‰çš„å±æ€§æ˜¯ float money123456@property (nonatomic, assign) float money;// KVC èµ‹å€¼[person setValue:@"18" forKeyPath:@"money"];[person setValue:[NSNumber numberWithInteger:18] forKeyPath:@"money"];æ‰“å°è¾“å‡ºä¼šè‡ªåŠ¨è½¬æ¢æˆ float ç±»å‹ 18.00; KVC å®ç°åŸç† 1ã€[item setValue:@&quot;ç™½å¼€æ°´lnç®€ä¹¦&quot; forKey:@&quot;name&quot;]; 1.é¦–å…ˆå»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰ setNameï¼Œè‹¥æœ‰ï¼Œç›´æ¥è°ƒç”¨èµ‹å€¼ [self setName:@&quot;ç™½å¼€æ°´lnç®€ä¹¦&quot;]ã€‚ 2.è‹¥æ— ï¼Œå»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰ name å±æ€§ï¼Œè‹¥æœ‰ï¼Œç›´æ¥è®¿é—®å±æ€§èµ‹å€¼ name = valueã€‚ 3.è‹¥æ— ï¼Œå†å»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰ _name æˆå‘˜å˜é‡ï¼Œè‹¥æœ‰ï¼Œç›´æ¥è®¿é—®å±æ€§èµ‹å€¼ _name = valueã€‚ 4.æ‰¾ä¸åˆ°ï¼Œå°±ä¼šç›´æ¥æŠ¥æ‰¾ä¸åˆ°çš„é”™è¯¯ï¼ˆvalueForUndefinedKey:ï¼‰ã€‚ 2ã€[item setValuesForKeysWithDictionary:dict]; 1.éå†å­—å…¸ä¸­æ‰€æœ‰ keyã€‚ 2.å»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„å±æ€§ã€‚ 1234[dict enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull value, BOOL * _Nonnull stop) &#123; // 2.å»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”å±æ€§ KVC [item setValue:value forKey:key];&#125;]; KVC åŸºæœ¬ä½¿ç”¨ KVC ç®€å•èµ‹å€¼ &amp; å–å€¼123456LNPerson *person = [[LNPerson alloc] init]; person.dog = [[LNDog alloc] init]; [person.dog setValue:@"é˜¿é»„" forKey:@"name"];[person setValue:@"æ—ºè´¢" forKeyPath:@"dog.name"];NSLog(@"%@", person.dog.name); åŒºåˆ«ï¼šforKey: å’Œ forKeyPath:1ã€forKeyPath åŒ…å«äº†æ‰€æœ‰ forKey çš„åŠŸèƒ½2ã€forKeyPath è¿›è¡Œå†…éƒ¨çš„ç‚¹è¯­æ³•,å±‚å±‚è®¿é—®å†…éƒ¨çš„å±æ€§3ã€æ³¨æ„ï¼škey å€¼ä¸€å®šè¦åœ¨å±æ€§ä¸­æ‰¾åˆ°ï¼Œå¼€å‘ä¸­æœ€å¥½ä½¿ç”¨forKeyPathã€‚ KVC å–å€¼12345[person valueForKeyPath:@"name"]// å–å‡ºæ•°ç»„ä¸­æ‰€æœ‰æ¨¡å‹çš„æŸä¸ªå±æ€§å€¼NSArray *allPersons = @[person1, person2, person3];NSArray *allPersonName = [allPersons valueForKeyPath:@"name"]; KVC è®¿é—®ç§æœ‰æˆå‘˜å˜é‡1234567@implementation LNPerson&#123; int _age; &#125;LNPerson *person = [[LNPerson alloc] init];[person setValue:@"88" forKeyPath:@"age"]; æ³¨æ„ï¼šä¸Šé¢çš„ keyPath å†™age æˆ– _ageéƒ½å¯ä»¥ï¼ŒKVC ä¼šè‡ªåŠ¨å»æŸ¥æ‰¾ã€‚ KVC å­—å…¸è½¬æ¨¡å‹ç®€å•ç¤ºä¾‹ï¼š12345678910111213141516171819202122NSDictionary *dict = @&#123; @"name" :@"lurry", @"money" : @189.88, //@"development" : @"iOS"--&gt;é—®é¢˜1æ¨¡å‹çš„å±æ€§å’Œå­—å…¸ä¸èƒ½ä¸€ä¸€å¯¹åº” /* @"dog" : @&#123; @"name" : @"wangcai", @"price" : @8 &#125;, */ //--&gt;é—®é¢˜2æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ &#125;;LNPerson *person = [[LNPerson alloc] init];[person setValuesForKeysWithDictionary:dict];// ç­‰åŒäºä¸‹é¢çš„ä»£ç // setValuesForKeysWithDictionary: åŸç†:// 1.éå†å­—å…¸ä¸­æ‰€æœ‰key,å»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„å±æ€§[dict enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull value, BOOL * _Nonnull stop) &#123; // 2.å»æ¨¡å‹ä¸­æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”å±æ€§ KVC [item setValue:value forKey:key]; &#125;];NSLog(@"%@", person); å¼€å‘ä¸­ä¸å»ºè®®ä½¿ç”¨ setValuesForKeysWithDictionary:ï¼ˆæŠŠå­—å…¸ä¸­æ‰€æœ‰å€¼ç»™æ¨¡å‹çš„å±æ€§èµ‹å€¼ï¼‰ é—®é¢˜1ï¼šå¦‚æœæœåŠ¡å™¨å¤šè¿”å›å‡ ä¸ªæ•°æ® Keyï¼Œåœ¨æ¨¡å‹ä¸­ç³»ç»Ÿæ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ã€‚ 1reason: '[&lt;LNPerson 0x100304730&gt; valueForUndefinedKey:]: this class is not key value coding-compliant for the key nam. è§£å†³ï¼šé‡å†™ç³»ç»Ÿæ–¹æ³• setValue:forUndefinedKey:ï¼Œå°±ä¸ä¼šæœ‰æŠ¥é”™ä¿¡æ¯äº†ã€‚è¡¥å……ï¼šä»€ä¹ˆæ—¶å€™é‡å†™ç³»ç»Ÿæ–¹æ³•?1ã€æƒ³ç»™ç³»ç»Ÿæ–¹æ³•æ·»åŠ é¢å¤–åŠŸèƒ½ 2ã€ä¸æƒ³è¦ç³»ç»Ÿæ–¹æ³•å®ç° é—®é¢˜2ï¼šå¦‚æœæ¨¡å‹ä¸­å¸¦æœ‰æ¨¡å‹å‹ï¼ŒsetValuesForKeysWithDictionary ä¸èƒ½ç”¨ã€‚è§£å†³ï¼šæ€è·¯ï¼Œæ‹¿åˆ°æ¯ä¸€ä¸ªæ¨¡å‹å±æ€§ï¼Œå»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„å€¼ï¼Œç»™æ¨¡å‹èµ‹å€¼ï¼ˆæé†’ï¼šä»å­—å…¸ä¸­å–å€¼,ä¸ä¸€å®šè¦å…¨éƒ¨å–å‡ºæ¥ï¼‰ã€‚å»ºè®®ä½¿ç”¨ï¼šMJExtension å­—å…¸è½¬æ¨¡å‹ å’Œ Runtimeï¼ˆæ ¹æ®æ¨¡å‹ä¸­å±æ€§ï¼Œå»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„ value ç»™æ¨¡å‹å±æ€§èµ‹å€¼ï¼‰ æ¨¡å‹è½¬æˆå­—å…¸ 1NSDictionary *dict = [person dictionaryWithValuesForKeys:@[@"name", @"money"]]; KVO æ¦‚è®º KVOï¼ˆKey-Value-Obersverï¼‰å³é”®å€¼ç›‘å¬ï¼Œåˆ©ç”¨ä¸€ä¸ªkeyæ¥æ‰¾åˆ°æŸä¸ªå±æ€§å¹¶ç›‘å¬å…¶å±æ€§å€¼å¾—æ”¹å˜ï¼Œå½“è¯¥å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨çš„é€šçŸ¥è§‚å¯Ÿè€…ï¼Œè¿™æ¯”é€šçŸ¥ä¸­å¿ƒéœ€è¦posté€šçŸ¥æ¥è¯´ï¼Œç®€å•äº†è®¸å¤šã€‚å…¶å®è¿™ä¹Ÿæ˜¯ä¸€ç§å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚ KVO ä½¿ç”¨æ­¥éª¤ ç»™ç›®æ ‡å¯¹è±¡çš„å±æ€§æ·»åŠ è§‚å¯Ÿè€… åœ¨å›è°ƒæ–¹æ³•ä¸­ç›‘å¬å±æ€§çš„å˜åŒ– ç§»é™¤è§‚å¯Ÿè€… å…·ä½“ä»£ç å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132- (void)viewDidLoad &#123; [super viewDidLoad]; self.person = [[LNPerson alloc] init]; person.name = @"zs"; /* - Observer è§‚å¯Ÿè€… - KeyPath è¦ç›‘å¬çš„å±æ€§ - options é€‰é¡¹(å¯é€‰å±æ€§å€¼ï¼Œç¤ºä¾‹ï¼šæ—§å€¼å’Œæ–°å€¼) */ // 1.æ·»åŠ è§‚å¯Ÿè€… [self.person addObserver:self forKeyPath:@"name" options: NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:nil]; person.name = @"ls";// è¿™é‡Œé‡æ–°èµ‹å€¼ person.name = @"ww";&#125;- (void)dealloc&#123; // 2.ç§»é™¤è§‚å¯Ÿè€… [self.person removeObserver:self forKeyPath:@"name"];&#125;/** * å½“ç›‘å¬çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ * @param keyPath è¦ç›‘å¬çš„å±æ€§ * @param object è¦ç›‘å¬çš„å±æ€§æ‰€å±çš„å¯¹è±¡ * @param change æ”¹å˜çš„å†…å®¹ * @param context ä¸Šä¸‹æ–‡ */#pragma mark - KVO// 3.ç›‘å¬å±æ€§çš„å˜åŒ–- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(LNPerson *)person change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context&#123; NSLog(@"%@------%@------%@", keyPath, change);&#125; KVO å®ç°åŸç† å½“ä¸€ä¸ªç±»çš„å±æ€§è¢«è§‚å¯Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé€šè¿‡runtimeåŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„æ´¾ç”Ÿç±»ï¼Œå¹¶ä¸”ä¼šåœ¨è¿™ä¸ªç±»ä¸­é‡å†™åŸºç±»è¢«è§‚å¯Ÿçš„å±æ€§çš„setteræ–¹æ³•ï¼Œè€Œä¸”ç³»ç»Ÿå°†è¿™ä¸ªç±»çš„isaæŒ‡é’ˆæŒ‡å‘äº†æ´¾ç”Ÿç±»ï¼Œä»è€Œå®ç°äº†ç»™ç›‘å¬çš„å±æ€§èµ‹å€¼æ—¶è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»çš„setteræ–¹æ³•ã€‚é‡å†™çš„setteræ–¹æ³•ä¼šåœ¨è°ƒç”¨åŸsetteræ–¹æ³•å‰åï¼Œé€šçŸ¥è§‚å¯Ÿå¯¹è±¡å€¼å¾—æ”¹å˜ã€‚æ­¤å¤–ï¼Œæ´¾ç”Ÿç±»è¿˜é‡å†™äº† dealloc æ–¹æ³•æ¥é‡Šæ”¾èµ„æºã€‚ å¯ä»¥çœ‹åˆ°é‡å†™çš„ setter æ–¹æ³•ï¼Œç»™å±æ€§èµ‹å€¼çš„å‰ååˆ†åˆ«è°ƒç”¨äº†ä¸¤ä¸ªæ–¹æ³•ã€‚12- (void)willChangeValueForKey:(NSString *)key;- (void)didChangeValueForKey:(NSString *)key; è€Œ- (void)didChangeValueForKey:(NSString *)key;ä¼šè°ƒç”¨1- (void)observeValueForKeyPath:(nullable NSString *)keyPath ofObject:(nullable id)object change:(nullable NSDictionary&lt;NSString*, id&gt; *)change context:(nullable void *)context; KVO æ‰‹åŠ¨å‘é€é€šçŸ¥æœºåˆ¶ é»˜è®¤æƒ…å†µä¸‹ï¼ŒKVO è§‚å¯Ÿåˆ°å±æ€§å˜åŒ–ç³»ç»Ÿä¼šè‡ªåŠ¨å‘é€é€šçŸ¥ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æ§åˆ¶ä½•æ—¶å‘é€é€šçŸ¥ã€‚ä¾‹å¦‚ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ä¸éœ€è¦å‘é€é€šçŸ¥ï¼Œæˆ–å°†å¤šä¸ªæ”¹å˜åˆå¹¶ä¸ºä¸€ä¸ªé€šçŸ¥å‘é€ã€‚å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ï¼Œæ˜¾å¼çš„è°ƒç”¨ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ï¼Œä»¥ä½¿å…¶å…·æœ‰é€šçŸ¥æœºåˆ¶ã€‚ä¸¾ä¸ªç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526- (void)viewDidLoad &#123; [super viewDidLoad]; self.person = [[LNPerson alloc] init]; person.name = @"zs"; // 1.æ·»åŠ è§‚å¯Ÿè€… [self.person addObserver:self forKeyPath:@"name" options: NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:nil]; [self willChangeValueForKey:@"name"]; person.name = @"this is a test"; // ç›´æ¥ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ï¼Œæ‰‹åŠ¨çš„è°ƒç”¨ä¸Šä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œä½¿å…¶å°±æœ‰é€šçŸ¥æœºåˆ¶ [self didChangeValueForKey:@"name"];&#125;- (void)dealloc&#123; // 2.ç§»é™¤è§‚å¯Ÿè€… [self.person removeObserver:self forKeyPath:@"name"];&#125;#pragma mark - KVO// 3.ç›‘å¬å±æ€§çš„å˜åŒ–- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(LNPerson *)person change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context&#123; if(object == self &amp;&amp; [keyPath isEqualToString:@"name"]) &#123; NSLog(@"%@------%@------%@", keyPath, change); &#125; else &#123; [super observeValueForKeyPath:keyPath ofObject: person change:change context:context]; &#125;&#125; æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Markdownâ€”å†™ä½œä¾¿æ·é«˜æ•ˆ]]></title>
    <url>%2FToolsAndPlugins%2FMarkdown.html</url>
    <content type="text"><![CDATA[Markdown è®¤çŸ¥Markdown Markdown æ˜¯ä»€ä¹ˆ? Markdown æ˜¯ä¸€ç§ç”¨æ¥å†™ä½œçš„ã€Œè½»é‡çº§æ ‡è®°è¯­è¨€ã€ï¼Œåˆ›å§‹äººä¸ºçº¦ç¿°Â·æ ¼é²ä¼¯ï¼ˆJohn Gruberï¼‰ã€‚å®ƒå…è®¸äººä»¬ã€Œä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ï¼Œç„¶åè½¬æ¢æˆæœ‰æ•ˆçš„XHTML(æˆ–è€…HTML)æ–‡æ¡£ ã€â€”â€” ç»´åŸºç™¾ç§‘ å¦‚æœä½ çœ‹ä¸æ‡‚ä»¥ä¸Šç»´åŸºç™¾ç§‘å¯¹ Markdown çš„å®šä¹‰ï¼Œå°±å½“è¿™æ®µæäº†æ²¡æ’­ã€‚çº¦ç¿°Â·æ ¼é²ä¼¯è‡ªå·±å¯¹Markdownçš„æè¿°çš„é‡ç‚¹ä¹Ÿåœ¨äº ã€Œeasy-to-readï¼Œeasy-to-writeã€ã€‚ é‚£ä¹ˆåˆ°åº• easy åœ¨å“ªé‡Œå‘¢ è™½ç„¶ç§°ä½œ ã€Œæ ‡è®°è¯­è¨€ã€ï¼Œä½†ç®€å•ç†è§£ Markdown å°±æ˜¯åœ¨æ–‡æœ¬å‰å¢åŠ ç¬¦å·æ¥è¡¨ç¤ºæ–‡æœ¬æ ¼å¼ã€‚å®ƒç”¨ç®€æ´çš„ã€Œæ ‡è®°ã€è¯­æ³•ä»£æ›¿æ’ç‰ˆï¼Œè€Œä¸åƒä¸€èˆ¬æˆ‘ä»¬ç”¨çš„å¤„ç†è½¯ä»¶ Word æˆ– Pages æœ‰å¤§é‡çš„æ’ç‰ˆã€å­—ä½“è®¾ç½®ã€‚å®ƒä½¿æˆ‘ä»¬ä¸“æ³¨äºå†…å®¹çš„ç¼–å†™ï¼Œ ä¸ä»…æ”¯æŒæ–‡å­—æ’ç‰ˆï¼Œè¿˜æ”¯æŒ æ’å…¥å›¾ç‰‡(åŒ…æ‹¬gif)ã€ é“¾æ¥ ç­‰ã€‚è€Œè¿™äº›æ“ä½œåªç”¨é”®ç›˜å°±å¯ä»¥é€šé€šæå®šäº†ã€‚ç›®å‰ä¹Ÿè¢«è¶Šæ¥è¶Šå¤šçš„å†™ä½œçˆ±å¥½è€…å¹¿æ³›ä½¿ç”¨ï¼Œæ”¯æŒ Markdown è¯­æ³•çš„ç¼–è¾‘å™¨æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬å¾ˆå¤šç½‘ç«™ï¼ˆå¦‚ç®€ä¹¦ï¼‰éƒ½æ”¯æŒ Markdown è¯­æ³•çš„å½•å…¥ã€‚Markdown ä»å†™ä½œåˆ°å®Œæˆï¼Œå†…å®¹ã€Œæ˜“è¯»æ˜“å†™ã€ï¼Œå¯¼å‡ºæ ¼å¼ã€Œéšå¿ƒæ‰€æ¬²ã€ï¼Œä½ å¯ä»¥å¯¼å‡º HTML æ ¼å¼çš„æ–‡ä»¶ç”¨æ¥ç½‘ç«™å‘å¸ƒï¼Œä¹Ÿå¯ä»¥å¯¼å‡º PDF æ ¼å¼æ‰“å°æµè§ˆã€‚å¯¹æ±‚èŒè€…æ¥è¯´ï¼ŒMarkdown å†™å‡ºçš„ç®€å†æ›´èƒ½å¾—åˆ° HR çš„å¥½æ„Ÿã€‚ æ— å›¾æ— çœŸç›¸ï¼š ä½¿ç”¨ Markdown çš„ä¼˜ç‚¹ 1. ç¼–è¾‘ï¼Œä¸ç”¨æ“å¿ƒæ’ç‰ˆ ä½ åªéœ€è¦æŠŠæ³¨æ„åŠ›æ”¾åœ¨å†…å®¹ä¸Šã€‚ç¬”è€…åœ¨ç”¨ Markdown ä¹‹å‰ï¼Œæ‰“å¼€word å…ˆæƒ³æƒ³ï¼Œæ ‡é¢˜ç”¨å•¥å­—ä½“å‘¢ï¼Œå‡ å·å­—å‘¢ï¼Ÿä¸çŸ¥ä¸è§‰æˆ‘çš„æ„å¿—åŠ›å°±è¢«æ¶ˆè€—äº†ã€‚å®é™…ä¸Šæ‰€è°“æ’ç‰ˆï¼Œä¸å°±æ˜¯ä½œè€…çš„æ€è·¯ä»¥åŠå†…å®¹çš„å±‚çº§å’Œç»“æ„ä¹ˆï¼Œåœ¨å­¦ä¼šä½¿ç”¨ Markdown ä¹‹åï¼Œå‡ ä¸ªç®€å•çš„ç¬¦å·å°±æŠŠè¿™äº›äº‹å„¿æå®šï¼Œæ ·å¼è¿˜ç‰¹åˆ«å·¥æ•´ç²¾ç¾ã€‚2. ä¿®æ”¹ï¼Œä¸ç”¨æ‹…å¿ƒæ’ç‰ˆ æƒ³æƒ³é‚£äº›ä½ æ±—æ´’çš„ word æ–‡æ¡£å§ï¼Œå¦‚æœç«¥é‹ä½ ä»å¤–éƒ¨ç²˜è´´äº†ä¸€æ®µå¸¦æ ¼å¼çš„æ–‡å­—ï¼Œç²˜è´´åå‘ç°æ•´ä¸ªäººéƒ½ä¸å¥½äº†ï¼šæ ¼å¼è¢«æ”¹çš„ä¹±ä¸ƒå…«ç³Ÿï¼Œè¿˜è¦é‡æ–°è°ƒæ•´ã€‚å¦‚æœç”¨ Markdown ç¼–å†™ ï¼Œæƒ³æ”¹å“ªé‡Œæ”¹å“ªé‡Œï¼Œæ ¹æœ¬ä¸ç”¨æ‹…å¿ƒæ ¼å¼ï¼Œæ”¹å®Œå‘å¸ƒæ”¶å·¥ï¼Œå¤šè½»æ¾ï¼3. å¯¼å‡ºï¼Œä¸ç”¨è´¹å¿ƒæ ¼å¼ å¯ä»¥å¯¼å‡ºä¸º PDFã€ HTML ä»¥åŠ.md æœ¬èº«çš„æ ¼å¼æ–‡ä»¶ï¼Œä¸ç®¡åœ¨ä»€ä¹ˆè®¾å¤‡ä¸Šï¼Œçœ‹èµ·æ¥éƒ½æ˜¯ä¸€ä¸ªå·¥æ•´çš„æ ·å­ã€‚ ä¸€å¥è¯æ¥è¯´ï¼ŒMarkdown æ˜¯ç”¨æœ€ç®€å•çš„æ–¹å¼ï¼Œé›¶æ’ç‰ˆæˆæœ¬ï¼Œå†™å‡ºå¸ƒå±€å·¥æ•´ã€é˜…è¯»èˆ’é€‚çš„ç¬”è®°ã€‚å‡å°‘å¹²æ‰°ï¼Œé™ä½æˆæœ¬ï¼Œæé«˜æ•ˆç‡ï¼Œä¸ä»…è‡ªå·±é˜…è¯»çˆ½ï¼Œåˆ†äº«ç»™æœ‹å‹ä¹Ÿæœ‰é¢å„¿ä¸æ˜¯~ P.S : Markdown ä¸­æ–‡ç‰ˆè¯­æ³•è¯´æ˜ å¦‚ä½•åˆ›å»º Markdown ç¬”è®° ä¸ç®¡æˆ‘å†æ€ä¹ˆè¯´ Markdown çš„è¯­æ³•è®°å¿†è´Ÿæ‹…å°ã€ç®€å•ï¼Œåœ¨æœ€åˆä½ éƒ½ä¼šæœ‰ç‚¹å„¿æ™•ã€‚åœ¨è¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸ªå°æŠ€å·§ï¼š æœ€åˆåªéœ€è¦è®°ä½ # æ ‡é¢˜ä¸€ã€## æ ‡é¢˜äºŒã€1. ç¬¬ä¸€ç‚¹ã€* è¿™ä¸€ç‚¹ï¼Œç”¨è¿™å‡ ä¸ªå†™å†™æ—¥å¿—ã€éœ€æ±‚æ–‡æ¡£ã€å°æ–‡ç« ï¼Œæ’ç‰ˆä¸Šè¶³å¤Ÿäº†ï¼› é€æ¸çš„ä½ å‘ç°æœ‰äº›æ–‡å­—éœ€è¦é‡ç‚¹æŒ‡å‡ºï¼Œé‚£ä¹ˆè¿˜å¯ä»¥ä½¿ç”¨ **åŠ ç²—**ã€*æ–œä½“* æ¥å¯¹æ–‡å­—åšé‡ç‚¹è¯´æ˜ï¼› å¦‚æœä½ æ˜¯åç¨‹åºå‘˜ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ ` æŠŠä»£ç å—åŒ…èµ·æ¥ï¼Œæ¸²æŸ“åå¯ä»¥å…³é”®å­—é«˜äº®ï¼›123456789101112131415161718194. å­¦ç”Ÿçš„è¯ï¼Œä½ å¯ä»¥ç”¨ &gt; åšå¼•ç”¨&gt; ä¹¦æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯ï¼Œç»ˆç”Ÿçš„ä¼´ä¾£ï¼Œæœ€è¯šæŒšçš„æœ‹å‹ã€‚â€”â€”é«˜å°”åŸº#### Markdown æ ‡è®°ç¬¦å·ç®€è¦è§„èŒƒ**ä¸‹æ–‡ä»…æ˜¯æˆ‘ä»¥è‡ªå·±çš„æ–¹å¼é˜è¿°è¿™äº›è¯­æ³•çš„å…·ä½“ç”¨æ³•ï¼Œä¾›å‚è€ƒ****1. æ ‡é¢˜**åœ¨è¡Œé¦–æ’å…¥ 1 åˆ° 6ä¸ª `#`ï¼Œåˆ†åˆ«è¡¨ç¤ºæ ‡é¢˜ 1 åˆ°æ ‡é¢˜ 6![æ ‡é¢˜](http://oiizs6l0g.bkt.clouddn.com/Markdownæ´»å­¦æ´»ç”¨3.png)**2. æœ‰åºåˆ—è¡¨ / æ— åºåˆ—è¡¨**åœ¨è¡Œé¦–å¢åŠ  `1.`ã€`2.`ã€`3.`ï¼Œå³æ•°å­—å’Œè‹±æ–‡å¥ç‚¹, ä¸è¦æ±‚æ•°å­—ä¸€å®šè¦è¿ç»­ï¼Œå¯ä»¥éƒ½æ˜¯`1.`åœ¨è¡Œé¦–å¢åŠ  `*` æˆ– `-`![æœ‰ã€æ— åºåˆ—è¡¨](http://oiizs6l0g.bkt.clouddn.com/Markdownæ´»å­¦æ´»ç”¨2.png)**3. æ–‡æœ¬æ ·å¼**![ç²—ä½“ã€æ–œä½“ã€åˆ é™¤çº¿](http://oiizs6l0g.bkt.clouddn.com/Markdownæ´»å­¦æ´»ç”¨4.png)**4. åˆ†å‰²çº¿** 123456789-------------************______________**5. å¼•ç”¨**å¦‚æœä½ éœ€è¦å¼•ç”¨ä¸€å°æ®µåˆ«å¤„çš„å¥å­ï¼Œä½ å¯ä»¥ç”¨ `&gt; è¿™é‡Œæ˜¯å¼•ç”¨çš„è¯`&gt; ä¹¦æ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯ï¼Œç»ˆç”Ÿçš„ä¼´ä¾£ï¼Œæœ€è¯šæŒšçš„æœ‹å‹ã€‚â€”â€”é«˜å°”åŸºå¹¶æ”¯æŒ **å¤šçº§å¼•ç”¨** ä½¿ç”¨å¤šä¸ª å³å°–æ‹¬å· `&gt;`ï¼Œè¡¨ç¤ºå¤šçº§å¼•ç”¨ã€‚ è¿™é‡Œæ˜¯ä¸€çº§å¼•ç”¨å†…å®¹ è¿™é‡Œæ˜¯äºŒçº§å¼•ç”¨å†…å®¹ è¿™é‡Œæ˜¯ä¸‰çº§å¼•ç”¨å†…å®¹12345678&gt; è¿™é‡Œæ˜¯ä¸€çº§å¼•ç”¨å†…å®¹&gt; &gt; è¿™é‡Œæ˜¯äºŒçº§å¼•ç”¨å†…å®¹&gt; &gt; &gt; è¿™é‡Œæ˜¯ä¸‰çº§å¼•ç”¨å†…å®¹**6. è¡Œå†…ä»£ç å— å’Œ ä»£ç æ¡†**å¦‚æœä½ æ˜¯ä¸ªç¨‹åºçŒ¿ï¼Œéœ€è¦åœ¨æ–‡ç« é‡Œä¼˜é›…çš„å¼•ç”¨ä»£ç æ¡†ï¼Œåªéœ€åœ¨ä»£ç å‰åå¢åŠ  ä¸‰ä¸ªåå•å¼•å·ï¼š` ``` `ï¼Œ å¦‚æœéœ€è¦åœ¨è¡Œå†…æ·»åŠ ä»£ç å—ï¼Œä½¿ç”¨ `ä»£ç ` è¡¨ç¤ºè¡Œå†…ä»£ç å—ï¼›è®©æˆ‘ä»¬èŠèŠ `iOSæ”»åŸç‹®` int main(int argc, char * argv[]) {@autoreleasepool {return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));}}12345678910111213141516171819202122**7. æ’å…¥å›¾ç‰‡ å’Œ é“¾æ¥** æ’å…¥å›¾ç‰‡æ ¼å¼ï¼š `![æœ¬åœ°å›¾ç‰‡](http://cdn.wiz.cn/wp-content/uploads/custompbwaters.github.io)` æ’å…¥é“¾æ¥æ ¼å¼ï¼š` [é“¾æ¥æ˜¾ç¤ºè¯´æ˜](ç½‘å€)` &gt; P.S : è¿™é‡Œçš„å›¾ç‰‡å¯ä»¥æ˜¯æœ¬åœ°å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯ ç½‘ç»œå›¾ç‰‡ã€‚ ![](http://upload-images.jianshu.io/upload_images/2230763-05939fa7a5df62c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) ![æœ¬åœ°å›¾ç‰‡](http://upload-images.jianshu.io/upload_images/2230763-cdd0fc1a085fcbdf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![](http://upload-images.jianshu.io/upload_images/2230763-a00835b06e5ec64c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![ç½‘ç»œå›¾ç‰‡](http://upload-images.jianshu.io/upload_images/2230763-2fd3aceb036ac541.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æ’å…¥é“¾æ¥ï¼š`[ç®€ä¹¦](http://jianshu.io)` ---&gt; [ç®€ä¹¦](http://jianshu.io) **8. æ’å…¥è¡¨æ ¼**æ’å…¥è¡¨æ ¼ä½¿ç”¨ä»¥ä¸‹è¯­æ³•: ` | åˆ—å | ` ` |:-:| ` æ°´å¹³æ’åˆ—æ¨¡å¼**æ„æ€ä¸º**ï¼š`| :- |` å±…å·¦ï¼Œ `| :-: |` å±…ä¸­, `| -: | ` å±…å³æ ·å¼ä¸€ï¼š è¡¨æ ¼1 è¡¨æ ¼2 è¡¨æ ¼3 å±…å·¦ å±…ä¸­ å±…å³ 12345| è¡¨æ ¼1 |è¡¨æ ¼2 | è¡¨æ ¼3 ||:--- |:-:|---:|| å±…å·¦ | å±…ä¸­ | å±…å³|æ ·å¼äºŒï¼š | è¡¨æ ¼1 |è¡¨æ ¼2 | è¡¨æ ¼3||-|-|-| P.S: ä¸­é—´å‡ ä¸ªå‡å·éƒ½å¯ä»¥| å±…å·¦ | å±…ä¸­ | å±…å³ || å±…å·¦ | å±…ä¸­ | å±…å³ |12345678| è¡¨æ ¼1 |è¡¨æ ¼2 | è¡¨æ ¼3 ||-|-|-|| å±…å·¦ | å±…ä¸­ | å±…å³|| å±…å·¦ | å±…ä¸­ | å±…å³|**P.S : æ³¨è„š**ä½¿ç”¨ [^keyword] è¡¨ç¤ºæ³¨è„šã€‚ è¿™æ˜¯ä¸€ä¸ªæ³¨è„š[^footnote]çš„æ ·ä¾‹ã€‚è¿™æ˜¯ç¬¬äºŒä¸ªæ³¨è„š[^footnote2]çš„æ ·ä¾‹ã€‚ [^footnote]: è¿™æ˜¯ä¸€ä¸ª æ³¨è„š çš„ æ–‡æœ¬ã€‚[^footnote2]: è¿™æ˜¯å¦ä¸€ä¸ª æ³¨è„š çš„ æ–‡æœ¬ã€‚P.S:[^è¿™é‡Œé¢å¯ä»¥ä»»ä¸€å†™]```è¿™æ˜¯ä¸€ä¸ªæ³¨è„š1çš„æ ·ä¾‹ã€‚è¿™æ˜¯ç¬¬äºŒä¸ªæ³¨è„š2çš„æ ·ä¾‹ è¿™æ˜¯ä¸€ä¸ª æ³¨è„š1 çš„ æ–‡æœ¬ã€‚ â†©è¿™æ˜¯å¦ä¸€ä¸ª æ³¨è„š2 çš„ æ–‡æœ¬ã€‚ â†© 9. ç›®å½•åœ¨ä»»ä½•ä½ æƒ³è¦å±•ç¤ºMarkdown ç¬”è®°ç›®å½•çš„åœ°æ–¹ï¼Œæ·»åŠ  [TOC] ï¼Œ åœ¨é˜…è¯»æ¨¡å¼ä¸‹ï¼Œæ ‡é¢˜1~6æ ·å¼çš„å†…å®¹ä¼šè¢«æå–å‡ºæ¥ä½œä¸ºç›®å½•ï¼Œç›¸å½“äºå¤§çº²åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å·¥å…·&amp;æ’ä»¶</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
        <tag>å·¥å…·&amp;æ’ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç®¡ç†åº“å·¥å…·CocoaPodsã€Œå®‰è£…+é—®é¢˜è§£å†³+æ´»ç”¨ã€ç»­æ›´]]></title>
    <url>%2FToolsAndPlugins%2FCocoaPods.html</url>
    <content type="text"><![CDATA[Write in the first åœ¨å¼€å‘ OS X å’Œ iOS åº”ç”¨ç¨‹åºä¸­ï¼ŒCocoaPods ä½œä¸ºåº“ä¾èµ–ç®¡ç†å·¥å…·å°±æ˜¯ä¸€æŠŠåˆ©å™¨ã€‚ ç›¸ä¿¡å¾ˆå¤šå¼€å‘è€…è·Ÿæˆ‘å½“åˆä¸€æ ·ï¼Œåœ¨ CocoaPods çš„å®‰è£…ä¸Šè¸©äº†æ— æ•°çš„å‘ï¼Œæ¥ç€å°±æ˜¯æŠ¥é”™é—®é¢˜ä¸€ä¸ªä¸€ä¸ªçš„æ¥ï¼Œä»¥è‡³äºä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ›´ä¸ç”¨è¯´æ´»ç”¨çš„æŠ€å·§äº†ã€‚ä½œä¸ºã€iOS ç¨‹åºå‘˜ã€‘çš„æˆ‘ä»¬ï¼ŒæŒæ¡CocoaPods çš„ä½¿ç”¨æ˜¯å¿…ä¸å¯å°‘çš„åŸºæœ¬æŠ€èƒ½äº†ã€‚ åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@jianshu - ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š CocoaPods ç›¸å…³ä»‹ç» CocoaPods å®‰è£… å¼€å§‹ä½¿ç”¨ å®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™é—®é¢˜è§£å†³ æŒ‡ä»¤è¡¥å…… CocoaPods å‡å¯å‚è€ƒçš„èµ„æ–™ Contentsã€ç›¸å…³ä»‹ç»ã€‘ 1. CocoaPods æ˜¯ä»€ä¹ˆ? CocoaPods æ˜¯å¼€å‘ OS X å’Œ iOS åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚åˆ©ç”¨ CocoaPodsï¼Œå¯ä»¥å®šä¹‰è‡ªå·±çš„ä¾èµ–å…³ç³» (ç§°ä½œ pods)ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„å˜åŒ–ï¼Œä»¥ åŠåœ¨æ•´ä¸ªå¼€å‘ç¯å¢ƒä¸­å¯¹ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ç®¡ç†éå¸¸æ–¹ä¾¿ã€‚ 2. CocoaPods èƒŒåçš„ç†å¿µä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ åœ¨å·¥ç¨‹ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹ä»£ç  ä¼šæ¶‰åŠåˆ°è®¸å¤šå†…å®¹ã€‚é’ˆå¯¹ Objective-C åˆçº§å¼€å‘è€…æ¥è¯´ï¼Œå·¥ç¨‹æ–‡ä»¶çš„é…ç½®ä¼šè®© äººå¾ˆæ²®ä¸§ã€‚ åœ¨é…ç½® build phases å’Œ linker flags è¿‡ç¨‹ä¸­ï¼Œä¼šå¼•èµ·è®¸å¤šäººä¸ºå› ç´ çš„ é”™è¯¯ï¼ŒCocoaPods ç®€åŒ–äº†è¿™ä¸€åˆ‡ï¼Œå®ƒèƒ½å¤Ÿè‡ªåŠ¨é…ç½®ç¼–è¯‘é€‰é¡¹ï¼Œè€Œä¸”æ¶‰åŠåˆ°ç¬¬ä¸‰æ–¹åº“çš„æ›´æ–°å‡çº§ä¹Ÿå¯ä»¥é€šè¿‡ CocoaPods è¿›è¡Œæ‰‹åŠ¨ç®¡ç†æ›´æ–°ã€‚ 3. CocoaPods çš„åŸç† å®ƒæ˜¯å°†æ‰€æœ‰çš„ä¾èµ–åº“éƒ½æ”¾åˆ°å¦ä¸€ä¸ªåä¸º Pods é¡¹ç›®ä¸­ï¼Œç„¶å è®©ä¸»é¡¹ç›®ä¾èµ– Pods é¡¹ç›®ï¼Œè¿™æ ·ï¼Œæºç ç®¡ç†å·¥ä½œéƒ½ä»ä¸»é¡¹ç›®ç§»åˆ°äº†Podsé¡¹ç›®ä¸­ã€‚ Podsé¡¹ç›®æœ€ç»ˆä¼šç¼–è¯‘æˆä¸€ä¸ªåä¸º libPods.a çš„æ–‡ä»¶ï¼Œä¸»é¡¹ç›®åªéœ€è¦ä¾èµ–è¿™ä¸ª.a æ–‡ä»¶å³å¯ã€‚ å¯¹äºèµ„æºæ–‡ä»¶ï¼ŒCocoaPods æä¾›äº†ä¸€ä¸ªåä¸º Pods-resources.sh çš„ bash è„šæœ¬ï¼Œè¯¥è„šæœ¬åœ¨æ¯æ¬¡é¡¹ç›®ç¼–è¯‘çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œï¼Œå°†ç¬¬ä¸‰æ–¹åº“çš„å„ç§èµ„æºæ–‡ä»¶å¤åˆ¶åˆ°ç›® æ ‡ç›®å½•ä¸­ã€‚ CocoaPods é€šè¿‡ä¸€ä¸ªåä¸º Pods.xcconfig çš„æ–‡ä»¶æ¥åœ¨ç¼–è¯‘æ—¶è®¾ç½®æ‰€æœ‰çš„ä¾èµ– å’Œ å‚æ•°ã€‚ CocoaPods æ˜¯ç”¨ ruby å®ç°çš„ï¼Œè¦æƒ³ä½¿ç”¨å®ƒé¦–å…ˆéœ€è¦æœ‰ ruby çš„ç¯å¢ƒã€‚å¹¸è¿çš„æ˜¯ OS Xç³»ç»Ÿ é»˜è®¤å·²ç»å¯ä»¥è¿è¡Œ ruby äº†ã€‚ä½†æ˜¯æœ‰æ—¶å€™ ruby ç‰ˆæœ¬è¿‡ä½æ˜¯æ— æ³•æ­£å¸¸æ”¯æŒ CocoaPods çš„ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦å…ˆå®‰è£…æ›´æ–°å‡çº§ rvm å’Œ rubyã€‚ 3. Homebrewã€Rvmã€Ruby ç®€ä»‹ å®˜ç½‘åŠç›¸å…³é“¾æ¥ã€Rvm å®˜ç½‘ã€‘:https://www.rvm.io/ã€Ruby å®˜ç½‘ã€‘:https://rubygems.org/ã€Rvm å®‰è£…æŒ‡å—ã€‘:https://rvm.io/rvm/installã€Homebrew å®˜ç½‘ã€‘:http://brew.sh/index_zh-cn.htmlã€ruby é•œåƒ - taobaoã€‘:https://ruby.taobao.org/ã€ruby é•œåƒ - chinaã€‘:https://gems.ruby-china.org/ Homebrew ä»‹ç»Homebrew æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œç”¨äºåœ¨macä¸Šå®‰è£…ä¸€äº›os xä¸Šæ²¡æœ‰çš„UNiXå·¥å…·ï¼›ç±»ä¼¼äº360è½¯ä»¶ç®¡ç†å™¨ã€‚ Rvm ä»‹ç»Rvm å…¨ç§° Ruby Version Manager ï¼Œæ˜¯å®‰è£…å’Œç®¡ç† ruby çš„ä¸€ç§å·¥å…·ã€‚ æ‘˜å½•ï¼šRVM is a command-line tool which allows you to easily install,manage, and work with multiple ruby environments from interpreters to sets of gems. Ruby ä»‹ç»Ruby æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ï¼Œç®€å•æ˜“ç”¨ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚èƒ½è·¨å¹³å°å’Œå¯ç§»æ¤æ€§å¥½ç­‰ç­‰ã€‚å…¶å®å°±æ˜¯ç§è„šæœ¬è¯­è¨€ã€‚Ruby çš„è½¯ä»¶æºä½¿ç”¨çš„æ˜¯äºšé©¬é€Šçš„äº‘æœåŠ¡ï¼Œå›½å†…ç½‘ç»œç¯å¢ƒä¸‹è½½æ—¶å¯èƒ½ä¼šå‡ºç°å„ç§ä¸ç¨³å®šå’Œè¶…æ—¶ï¼Œæ‰€ä»¥è‡ªå¸¦çš„éœ€è¦ç¿»å¢™ï¼Œå¯ä»¥å°† å®˜æ–¹ ruby æº æ›¿æ¢æˆå›½å†… æ·˜å® ruby æºï¼ˆhttps://ruby.taobao.org/ ï¼‰æˆ–è€…æ˜¯ç”± China ruby æº ï¼ˆhttps://gems.ruby-china.org/ ï¼‰ã€‚æ®æ¶ˆæ¯äº†è§£ï¼Œ2016.06ã€taboo Gemsã€‘åœæ­¢ç»´æŠ¤äº†ï¼Œå»ºè®®ä½¿ç”¨ ã€ruby-chinaã€‘æºã€‚ Installationã€CocoaPods å®‰è£…ã€‘ ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥å®‰è£… rvm ç¯å¢ƒæç¤ºï¼šä¸ç®¡éœ€ä¸éœ€è¦å‡çº§ rubyï¼Œrvm å¯ä»¥è®©ä½ æ‹¥æœ‰å¤šä¸ªç‰ˆæœ¬çš„Rubyï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šä¸ªç‰ˆæœ¬ä¹‹é—´è‡ªç”±åˆ‡æ¢ã€‚å¦‚æœå·²ç»å®‰è£…è¿‡è·³åˆ°ç¬¬2æ­¥ã€‚12345678910æŸ¥çœ‹æ˜¯å¦å®‰è£…$ rvm -v è¾“å‡ºç»“æœ:ï¼ˆ å­˜åœ¨ rvm ç¯å¢ƒï¼‰LNdeMacBook-Pro:~ sunhui$ rvm -vrvm 1.29.1 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io/]è¾“å‡ºç»“æœ:ï¼ˆä¸å­˜åœ¨ rvm ç¯å¢ƒï¼‰LNdeMacBook-Pro:~ sunhui$ rvm -v-bash: rvm: command not found 1234567891011æƒ…å†µäºŒï¼šå¦‚æœä¸å­˜åœ¨ rvm ç¯å¢ƒï¼Œå…ˆå®‰è£…é…ç½® rvm ç¯å¢ƒâ‘  æŒ‡ä»¤å®‰è£… rvm$ curl -L get.rvm.io | bash -s stableâ‘¡ ç„¶åï¼Œè½½å…¥ RVM ç¯å¢ƒ$ source ~/.bashrc$ source ~/.bash_profileâ‘¢ ç­‰å¾…ç»ˆç«¯åŠ è½½å®Œæ¯•ï¼Œåè¾“å…¥$ rvm -vå¦‚æœèƒ½æ˜¾ç¤ºç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸäº†ã€‚ ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ ruby ç‰ˆæœ¬ç¯å¢ƒæç¤ºï¼šCocoaPods ç›®å‰å®‰è£…éœ€è¦Rubyçš„ç‰ˆæœ¬å¤§äº2.2.2ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼šError installing pods: activesupport requires Rubyversion &gt;= 2.2.2ã€‚ç›®å‰Macç³»ç»Ÿé»˜è®¤è‡ªå¸¦æ˜¯2.0ï¼Œæ‰€ä»¥éœ€è¦å‡çº§ã€‚1234567891011121314151617181920212223â‘  æŸ¥çœ‹å·²å®‰è£…çš„ruby:$ ruby -vâ‘¡ åˆ—å‡ºrubyå¯å®‰è£…çš„ç‰ˆæœ¬ä¿¡æ¯rvm list knownâ‘¢ æŒ‡å®š ruby ç‰ˆæœ¬è¿›è¡Œæ›´æ–°$ rvm install 2.3.0â‘£ è¿™é‡Œä¸€å®šè¦è®¾ç½®ä¸ºé»˜è®¤ç‰ˆæœ¬rvm use 2.3.0 --defaultç­‰å¾…æ—¶é—´ï¼Œå®Œæˆå Ruby Gems å°±å®‰è£…å¥½äº†è¡¥å……ï¼š1.å¸è½½ä¸€ä¸ªå·²å®‰è£…ç‰ˆæœ¬$ rvm remove 1.9.22.æ£€æŸ¥ gem ruby ç‰ˆæœ¬å·$ sudo gem -v3.æ›´æ–° gem ruby ç‰ˆæœ¬å·:ï¼ˆå»ºè®® å‡çº§åˆ° 2.6.x ä»¥ä¸Šï¼‰$ gem update --system ç¬¬ä¸‰æ­¥ï¼šæ›´æ¢æºæˆ‘ä»¬éœ€è¦æ¥ä¿®æ”¹æ›´æ¢æºï¼ˆç”±äºå›½å†…è¢«å¢™ï¼‰æ‰€ä»¥è¦æŠŠæºåˆ‡æ¢è‡³ ruby-china åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤12345678910111213141516171.æ›´æ–°gem$ sudo gem update --system2.å…ˆç§»é™¤ç°æœ‰çš„æº$ gem sources --remove https://rubygems.org/å¦‚æœå®‰è£…äº†æ·˜å®çš„é•œåƒ$ gem sources --remove https://ruby.taobao.org/ 3.ä½¿ç”¨æ–°çš„æº$ gem sources -a https://gems.ruby-china.org/4.éªŒè¯æ–°æºæ˜¯å¦æ›¿æ¢æˆåŠŸ$ gem sources -låªæœ‰åœ¨ç»ˆç«¯ä¸­å‡ºç°ä¸‹é¢æ–‡å­—æ‰è¡¨æ˜ä½ ä¸Šé¢çš„å‘½ä»¤æ˜¯æˆåŠŸçš„ï¼š*** CURRENT SOURCES ***è¯´æ˜ CocoaPods å‰æœŸé…ç½®å®Œæ¯• ç¬¬å››æ­¥ï¼šå®‰è£…Cocoapodsæç¤ºï¼šå®‰è£… CocoaPodsï¼ˆ sudo è¡¨ç¤ºç®¡ç†å‘˜æ‰§è¡ŒæŒ‡ä»¤ ï¼‰ï¼ˆ æ­¤å¤„éœ€è¦è¾“å…¥ä¸€æ¬¡å¯†ç  ï¼‰è¿™é‡Œæœ‰å‡ ç§é€‰æ‹©ï¼Œä½ çœ‹å¿ƒæƒ…æ¥å§ ~ é€‰æ‹©ä¸€ï¼š123451.åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š$ sudo gem install -n /usr/local/bin cocoapods$ pod setupè¿™ä¸ªè¿‡ç¨‹ä¼šå¾ˆæ…¢ï¼Œæ®è¯´å¤§å¤šéƒ½æ˜¯æŒ‚æœºä¸€æ™šä¸Šæ‰è£…å¥½çš„ï¼Œç»§ç»­å¾€ä¸‹çœ‹å§ï¼Œæ€»æœ‰æ›´å¥½çš„ã€‚ é€‰æ‹©äºŒï¼š1234561.æ‰§è¡Œï¼š$ git clone https://git.coding.net/CocoaPods/Specs.git ~/.cocoapods/repos/master2.åˆ‡è®°è¦ï¼š$ pod repo updateæ„Ÿè§‰ä¹Ÿå°±å‡ åˆ†é’Ÿçš„æ ·å­ï¼Œ å…ˆéšä¾¿æœç´¢ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ï¼š12$ pod search AFNetWorkingæœ‰ç»“æœä¸æŠ¥é”™è¯´æ˜å·²ç»å®‰è£…æˆåŠŸäº†ã€‚ é€‰æ‹©ä¸‰ï¼š1234æŠŠä½ åŒäº‹å·²ç»è£…å¥½äº†CocoaPodscocoapodsç›®å½•ä¸‹çš„ repo ç›®å½•æ‹·è´ä¸‹æ¥ï¼Œæ”¾è¿›è‡ªå·±çš„ç›®å½•é‡Œã€‚å† $ pod setupã€‚ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ1234$ pod --versionå¦‚æœéªŒè¯æˆåŠŸï¼Œæ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œå¦‚ï¼Œ0.39.0ï¼Œè¯´æ˜å¯ä»¥å®‰è£…å…¨éƒ¨å®Œæˆ.å¦‚æœæ˜¾ç¤º-bash: po: command not foundï¼Œè¯´æ˜æ²¡æœ‰è£…å¥½ Getting Startedã€å¼€å§‹ä½¿ç”¨ã€‘ ç¬¬ä¸€æ­¥ ï¼šæˆ‘ä»¬å…ˆåˆ›å»ºè¿™ä¸ªç¥å¥‡çš„ PodFileã€‚åœ¨ç»ˆç«¯ä¸­è¿›å…¥ï¼ˆcdå‘½ä»¤ï¼‰ä½ é¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œç„¶ååœ¨å½“å‰ç›®å½•ä¸‹ï¼Œåˆ©ç”¨vimåˆ›å»ºPodfile123456789101.cd åˆ°ç›®å½•æ–‡ä»¶å¤¹$ cd /Users/ln/Desktop/LNTestDemo2.æç¤ºå¦‚æœä¸çŸ¥é“ç¬¬ä¸‰æ–¹åº“ç‰ˆæœ¬çš„æƒ…å†µä¸‹ï¼Œå»ºè®®å…ˆæŸ¥æ‰¾ä¸€ä¸‹å½“å‰æ‰€éœ€ç¬¬ä¸‰æ–¹åº“çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚ï¼š$ pod search &apos;AFNetworking&apos;3.åˆ›å»º Podfile é…ç½®æ–‡ä»¶$ vim Podfile ç¬¬äºŒæ­¥ ï¼šé”®ç›˜è¾“å…¥ i ï¼Œè¿›å…¥ Podfile é…ç½®æ–‡ä»¶çš„ç¼–è¾‘æ¨¡å¼Podfile é…ç½®æ–‡ä»¶å›ºå®šè¯­å¥ï¼š 12345678910111213141516171819è¯´æ˜ï¼šå¯èƒ½æœ‰äº›äººçœ‹åˆ°çš„å›ºå®šè¯­å¥ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¤§åŒå°å¼‚ï¼ŒåŸºæœ¬ä¸Šéƒ½èƒ½å®ç°æœ€ç»ˆæ•ˆæœã€‚(~&gt; å¯ä»¥æŒ‡å®šå¯¹åº”ç‰ˆæœ¬ï¼Œä¸æŒ‡å®šé»˜è®¤ä¸ºæœ€æ–°ç‰ˆæœ¬)# Uncomment this line to define a global platform for your projectplatform :ios, &apos;8.0&apos;target &apos;LNTestDemo&apos; do // ä½ çš„é¡¹ç›®åç§°,è‡ªè¡Œæ›¿æ¢# Uncomment this line if you&apos;re using Swift or would like to use dynamic frameworks# Pods for LNTestDemopod &apos;AFNetworking&apos;, &apos;~&gt;3.1.0&apos;pod &apos;SDWebImage&apos;pod &apos;MBProgressHUD&apos;pod &apos;FMDB&apos;pod &apos;Masonry&apos;pod &apos;MJExtension&apos;pod &apos;MJRefresh&apos;# use_frameworks!# pod &apos;ReactiveCocoa&apos;end æŒ‰ä¸€æ¬¡ Esc æŒ‰é”®é€€å‡ºç¼–è¾‘æ¨¡å¼12ä¿å­˜å¹¶é€€å‡º:wq è¿™æ—¶å€™ï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ç›®å½•ä¸­ï¼Œå‡ºç°ä¸€ä¸ªåå­—ä¸ºPodfileçš„æ–‡ä»¶ï¼Œè€Œä¸”æ–‡ä»¶å†…å®¹å°±æ˜¯ä½ åˆšåˆšè¾“å…¥çš„å†…å®¹ã€‚æ³¨æ„ï¼ŒPodfileæ–‡ä»¶åº”è¯¥å’Œä½ çš„å·¥ç¨‹æ–‡ä»¶.xcodeprojåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ ç°åœ¨ï¼Œä½ å°±å¯ä»¥åˆ©ç”¨CocoPodsä¸‹è½½AFNetworkingç­‰ç±»åº“äº†ã€‚è¿˜æ˜¯åœ¨ç»ˆç«¯ä¸­çš„å½“å‰é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š12ä¸‹è½½ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶åˆ°é¡¹ç›®å·¥ç¨‹ä¸­$ pod install æ³¨æ„ï¼š 1ã€ä»¥åæ‰“å¼€é¡¹ç›®å°±ç”¨ CocoaPodsDemo.xcworkspace æ‰“å¼€ï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„.xcodeprojæ–‡ä»¶ã€‚å¦åˆ™æ— æ³•å…³è”podä¸‹æ¥çš„ç±»åº“ã€‚ 2ã€æ¯æ¬¡æ›´æ”¹äº†Podfileæ–‡ä»¶,ä½ éœ€è¦é‡æ–°æ‰§è¡Œä¸€æ¬¡pod updateå‘½ä»¤ã€‚ 3ã€CocoaPodsåœ¨æ‰§è¡Œpod installå’Œpod updateæ—¶ï¼Œä¼šé»˜è®¤å…ˆæ›´æ–°ä¸€æ¬¡CocoPodsçš„specä»“åº“ç´¢å¼•ã€‚ä½¿ç”¨--no-repo-updateå‚æ•°å¯ä»¥ç¦æ­¢å…¶åšç´¢å¼•æ›´æ–°æ“ä½œ12$ pod install --no-repo-update$ pod update --no-repo-update 4ã€éªŒè¯æ¡†æ¶æ˜¯å¦æ”¯æŒcocoaPods1$ pod search MJRefresh æä¾›ï¼šåœ¨çº¿æœç´¢éªŒè¯åœ¨çº¿ï¼Œèƒ½æœå‡ºè¯´æ˜æ”¯æŒ https://cocoapods.org 5ã€cocoaPods éšè—ç›®å½• å‰å¾€â€”&gt;ä¸ªäººâ€”&gt;.cocoapods .cocoapods/repos/master/Specsæ”¾ç€æ‰€æœ‰ç¬¬ä¸‰æ–¹åº“çš„ç´¢å¼•æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ æŠ€å·§ï¼šå¦‚æœmaster/Specsä¸‹è½½ä¸æˆåŠŸï¼Œè¯•ç€ï¼Œæ‰‹åŠ¨æ‹·è´è¿™ä¸ªç›®å½•è¯•è¯• 6ã€ã€å¸è½½ CocoaPods å®‰è£…ã€‘å’Œã€å›é€€åˆ°æŒ‡å®š CocoaPods ç‰ˆæœ¬ã€‘12345å¸è½½ CocoaPods å®‰è£…$ sudo gem uninstall cocoa podså›é€€åˆ°æŒ‡å®š CocoaPods ç‰ˆæœ¬$ sudo gem install -n /usr/local/bin cocoapods --version 0.39 7ã€æŸ¥çœ‹ CocoaPods ä¸‹è½½è¿›åº¦è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œpod setupåœ¨æ‰§è¡Œæ—¶ï¼Œä¼šè¾“å‡ºSetting up CocoaPods master repoï¼Œä½†æ˜¯ä¼šç­‰å¾…æ¯”è¾ƒä¹…çš„æ—¶é—´ã€‚è¿™æ­¥å…¶å®æ˜¯ Cocoapods åœ¨å°†å®ƒçš„ä¿¡æ¯ä¸‹è½½åˆ° ~/.cocoapodsç›®å½•ä¸‹ï¼Œå¦‚æœä½ ç­‰å¤ªä¹…ï¼Œå¯ä»¥è¯•ç€ cd åˆ°é‚£ä¸ªç›®å½•ï¼Œç”¨du -sh *æ¥æŸ¥çœ‹ä¸‹è½½è¿›åº¦12æ‰§è¡Œè¯­å¥$ sudo gem install -n /usr/local/bin cocoapods 8ã€åœ¨ä½¿ç”¨æ—¶ï¼Œå¯¼å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œåº”æ˜¯&lt; &gt;12#import &lt;UIImageView+WebCache.h&gt;#import &lt;AFNetworking.h&gt; 9ã€ä½¿ç”¨pod installå‘½ä»¤å®‰è£…æ¡†æ¶åçš„å¤§è‡´è¿‡ç¨‹ï¼š1234567891.åˆ†æä¾èµ–:è¯¥æ­¥éª¤ä¼šåˆ†æPodfile,æŸ¥çœ‹ä¸åŒç±»åº“ä¹‹é—´çš„ä¾èµ–æƒ…å†µã€‚å¦‚æœæœ‰å¤šä¸ªç±»åº“ä¾èµ–äºåŒä¸€ä¸ªç±»åº“ï¼Œä½†æ˜¯ä¾èµ–äºä¸åŒçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆcocoaPodsä¼šè‡ªåŠ¨è®¾ç½®ä¸€ä¸ªå…¼å®¹çš„ç‰ˆæœ¬ã€‚2.ä¸‹è½½ä¾èµ–:æ ¹æ®åˆ†æä¾èµ–çš„ç»“æœï¼Œä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„ç±»åº“åˆ°æœ¬åœ°é¡¹ç›®ä¸­ã€‚3.ç”ŸæˆPodsé¡¹ç›®ï¼šåˆ›å»ºä¸€ä¸ªPodsé¡¹ç›®ä¸“é—¨ç”¨æ¥ç¼–è¯‘å’Œç®¡ç†ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ŒCocoaPodsä¼šå°†æ‰€éœ€çš„æ¡†æ¶ï¼Œåº“ç­‰å†…å®¹æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œå¹¶ä¸”è¿›è¡Œç›¸åº”çš„é…ç½®ã€‚4.æ•´åˆPodsé¡¹ç›®ï¼šå°†Podså’Œé¡¹ç›®æ•´åˆåˆ°ä¸€ä¸ªå·¥ä½œç©ºé—´ä¸­ï¼Œå¹¶ä¸”è®¾ç½®æ–‡ä»¶é“¾æ¥ã€‚ CocoaPodsã€å®‰è£…è¿‡ç¨‹ä¸­æŠ¥é”™é—®é¢˜è§£å†³ã€‘è¯´æ˜ï¼šæ­¤éƒ¨åˆ†æ‰€åˆ—ä¸¾çš„é—®é¢˜å‡æ˜¯åœ¨æ‰§è¡Œç›¸å…³æŒ‡ä»¤æ—¶å‡ºç°çš„æŠ¥é”™1ã€Rvm ç¯å¢ƒæ­å»º1234567891011121314151617181920211.æŠ¥é”™æŒ‡ä»¤ï¼š$ rvm install 2.3.02.æŠ¥é”™é—®é¢˜ï¼šError running &apos;requirements_osx_brew_update_system ruby-2.3.0&apos;,showing last 15 lines of /Users/jijiucheng/.rvm/log/1475769205_ruby-2.3.0/update_system.log............Requirements installation failed with status: 1.curl: (35) Server aborted the SSL handshake3.æŠ¥é”™åŸå› ï¼šç½‘ç»œé—®é¢˜ï¼Œå› ä¸ºéœ€è¦ç¿»å¢™ï¼Œæ‰€ä»¥ç½‘ç»œä¸ç¨³å®šï¼›å»ºè®®é€‰æ‹© VPNï¼Œä¿è¯çº¿è·¯çš„ç¨³å®šæ€§ã€‚4.é—®é¢˜è§£å†³ï¼šï¼ˆæŒ‡ä»¤ä¸€è¡Œä¸€è¡Œè¾“å…¥ï¼‰$ cd /usr/local$ git remote set-url origin git://mirrors.ustc.edu.cn/brew.git$ echo &apos;export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles&apos; &gt;&gt; ~/.bashrc5.è§£å†³æ–¹æ¡ˆï¼š è§£å†³æ–¹æ¡ˆè¿æ¥ï¼šhttps://segmentfault.com/q/1010000004276750 1234567891011121314151.æŠ¥é”™æŒ‡ä»¤ï¼š$ rvm install 2.3.02.æŠ¥é”™ä¿¡æ¯ï¼šError running &apos;__rvm_make -j 1&apos;,showing last 15 lines of /Users/jijiucheng/.rvm/log/1475769349_ruby-2.3.0/make.log............There has been an error while running make. Halting the installation.3.æŠ¥é”™åŸå› ï¼šç¼ºå°‘ Xcode å·¥å…·ï¼Œxcode command line4.é—®é¢˜è§£å†³ï¼š$ xcode-select --install è§£å†³æ–¹æ¡ˆè¿æ¥1ï¼šhttp://stackoverflow.com/questions/35228481/error-running-rvm-make-installè§£å†³æ–¹æ¡ˆè¿æ¥2ï¼šhttp://www.th7.cn/Program/Ruby/201609/966343.shtml 12345678910111213141516171.æŠ¥é”™æŒ‡ä»¤ï¼š$ rvm install 2.3.02.æŠ¥é”™ä¿¡æ¯ï¼šmuxuguixiandeMacBook-Pro:local jijiucheng$ rvm install 2.3.0Already installed ruby-2.3.0.To reinstall use:.rvm reinstall ruby-2.3.0.Gemset &apos;&apos; does not exist, &apos;rvm ruby-2.3.0 do rvm gemset create &apos; first, or append &apos;--create&apos;.3.æŠ¥é”™åŸå› ï¼šæŒ‡ä»¤ä¸å¯¹ï¼Œå·²ç»å­˜åœ¨ ruby-2.3.0 çš„æ–‡ä»¶æ®‹ç•™ï¼Œéœ€è¦é‡æ–°å®‰è£…ï¼›4.é—®é¢˜è§£å†³ï¼š$ rvm reinstall ruby-2.3.0 2ã€Ruby ç¯å¢ƒæ­å»ºå¾…æ€»ç»“ ~ ~æ¬¢è¿ä½ è¡¥å……ï¼Œæˆ‘ä¼šåŠæ—¶åŠ ä¸Šï¼Œç›¸äº’å­¦ä¹ ï¼Œæˆ‘ä»¬çš„åˆ†äº«ä¼šè®©å¾ˆå¤šäººå°‘è¸©ä¸€äº›å‘ï¼Œå°‘èŠ±è´¹ä¸€ç‚¹æ—¶é—´ï¼Œå­¦ä¹ åˆ°å®ç”¨çš„çŸ¥è¯†ã€‚å¯ä¸‹é¢ç•™è¨€~ 3ã€CocoaPods é…ç½®ä½¿ç”¨1234567891011121314151617181920211.æŠ¥é”™æŒ‡ä»¤ï¼š$ pod install2.æŠ¥é”™ä¿¡æ¯ï¼šmuxuguixiandeMacBook-Pro:NFCustomer jijiucheng$ pod installSetting up CocoaPods master repo[!] Unable to add a source with url `https://github.com/CocoaPods/Specs.git` named `master`.You can try adding it manually in `~/.cocoapods/repos` or via `pod repo add`.3.æŠ¥é”™åŸå› ï¼šç”±äºå®‰è£…äº†å¤šä¸ªXcodeå¯¼è‡´è·¯å¾„å˜äº†ï¼Œéœ€è¦å˜æ¢è·¯å¾„ï¼šsudo xcode-select -switch /Applications/Xcode.app sudo xcode-select -switch /Applications/Xcode\ 2.app4.é—®é¢˜è§£å†³ï¼š$ sudo xcode-select -switch /Applications/Xcode.app5.èµ„æ–™è¡¥å……ï¼šå‡ºç° Setting up CocoaPods master repoï¼Œè¯´æ˜ Cocoapods åœ¨å°†å®ƒçš„ä¿¡æ¯ä¸‹è½½åˆ° ~/.cocoapods é‡Œï¼›æ–°åˆ›å»ºç»ˆç«¯çª—å£ï¼Œè¾“å…¥ cd ~/.cocoapods ï¼Œå›è½¦ï¼Œè¾“å…¥ du -sh * å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶å¤§å°ï¼Œæ¯éš”å‡ åˆ†é’ŸæŸ¥çœ‹ä¸€æ¬¡ï¼Œè¿™ä¸ªç›®å½•æœ€ç»ˆå¤§å°æ˜¯100å¤šMï¼ˆ æœ¬äººè¿™é‡Œå¤§æ¦‚ 800M + ï¼‰ï¼Œå°±æ˜¯å®Œæˆäº†ã€‚ è§£å†³æ–¹æ¡ˆè¿æ¥1ï¼šhttps://zhidao.baidu.com/question/2205760733872673348.htmlè§£å†³æ–¹æ¡ˆè¿æ¥2ï¼šhttp://blog.csdn.net/zhangjunjian127/article/details/47954981 instructionã€æŒ‡ä»¤è¡¥å……ã€‘ 1ã€Rvm æŒ‡ä»¤åº“12345678910111213$ ruby -v # æŸ¥çœ‹ruby ç‰ˆæœ¬ $ rvm list known # åˆ—å‡ºå·²çŸ¥çš„ ruby ç‰ˆæœ¬$ rvm install 2.3.0 # é€‰æ‹©æŒ‡å®š ruby ç‰ˆæœ¬è¿›è¡Œæ›´æ–° $ rvm get stable # æ›´æ–° rvm$ rvm use 2.2.2 # åˆ‡æ¢åˆ°æŒ‡å®š ruby ç‰ˆæœ¬$ rvm use 2.2.2 --default # è®¾ç½®æŒ‡å®š ruby ç‰ˆæœ¬ä¸ºé»˜è®¤ç‰ˆæœ¬ $ rvm list # æŸ¥è¯¢å·²å®‰è£…çš„ ruby ç‰ˆæœ¬ $ rvm remove 1.9.2 # å¸è½½ç§»é™¤ æŒ‡å®š ruby ç‰ˆæœ¬$ curl -L https://get.rvm.io | bash -s stable # å®‰è£… rvm ç¯å¢ƒ$ curl -sSL https://get.rvm.io | bash -s stable --ruby # é»˜è®¤å®‰è£… rvm æœ€æ–°ç‰ˆæœ¬$ curl -sSL https://get.rvm.io | bash -s stable --ruby=2.3.0 # å®‰è£… rvm æŒ‡å®šç‰ˆæœ¬$ source ~/.rvm/scripts/rvm # è½½å…¥ rvm 2ã€gem æŒ‡ä»¤åº“123456789101112131415161718192021222324252627282930313233343536373839$ gem -v # æŸ¥çœ‹ gem ç‰ˆæœ¬$ gem source # æŸ¥çœ‹ gem é…ç½®æº$ gem source -l # æŸ¥çœ‹ gem é…ç½®æºç›®å½•$ gem sources -a url # æ·»åŠ  gem é…ç½®æºï¼ˆurl éœ€æ¢æˆç½‘å€ï¼‰$ gem sources --add url # æ·»åŠ  gem é…ç½®æºï¼ˆurl éœ€æ¢æˆç½‘å€ï¼‰$ gem sources -r url # åˆ é™¤ gem é…ç½®æºï¼ˆurl éœ€æ¢æˆç½‘å€ï¼‰$ gem sources --remove url # åˆ é™¤ gem é…ç½®æºï¼ˆurl éœ€æ¢æˆç½‘å€ï¼‰$ gem update # æ›´æ–° æ‰€æœ‰åŒ…$ gem update --system # æ›´æ–° Ruby Gems è½¯ä»¶$$ gem install rake # å®‰è£… rakeï¼Œä»æœ¬åœ°æˆ–è¿œç¨‹æœåŠ¡å™¨$ gem install rake --remote # å®‰è£… rakeï¼Œä»è¿œç¨‹æœåŠ¡å™¨$ gem install watir -v 1.6.2 # å®‰è£… æŒ‡å®šç‰ˆæœ¬çš„ watir$ gem install watir --version 1.6.2 # å®‰è£… æŒ‡å®šç‰ˆæœ¬çš„ watir$ gem uninstall rake # å¸è½½ rake åŒ…$ gem list d # åˆ—å‡º æœ¬åœ°ä»¥ d æ‰“å¤´çš„åŒ…$ gem query -n &apos;&apos;[0-9]&apos;&apos; --local # æŸ¥æ‰¾ æœ¬åœ°å«æœ‰æ•°å­—çš„åŒ…$ gem search log --both # æŸ¥æ‰¾ ä»æœ¬åœ°å’Œè¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾å«æœ‰ log å­—ç¬¦ä¸²çš„åŒ…$ gem search log --remoter # æŸ¥æ‰¾ åªä»è¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾å«æœ‰ log å­—ç¬¦ä¸²çš„åŒ…$ gem search -r log # æŸ¥æ‰¾ åªä»è¿œç¨‹æœåŠ¡å™¨ä¸ŠæŸ¥æ‰¾å«æœ‰logå­—ç¬¦ä¸²çš„åŒ…$$ gem help # æé†’å¼çš„å¸®åŠ©$ gem help install # åˆ—å‡º install å‘½ä»¤ å¸®åŠ©$ gem help examples # åˆ—å‡º gem å‘½ä»¤ä½¿ç”¨ä¸€äº›ä¾‹å­$ gem build rake.gemspec # æŠŠ rake.gemspec ç¼–è¯‘æˆ rake.gem$ gem check -v pkg/rake-0.4.0.gem # æ£€æµ‹ rake æ˜¯å¦æœ‰æ•ˆ$ gem cleanup # æ¸…é™¤ æ‰€æœ‰åŒ…æ—§ç‰ˆæœ¬ï¼Œä¿ç•™æœ€æ–°ç‰ˆæœ¬$ gem contents rake # æ˜¾ç¤º rake åŒ…ä¸­æ‰€åŒ…å«çš„æ–‡ä»¶$ gem dependency rails -v 0.10.1 # åˆ—å‡º ä¸ rails ç›¸äº’ä¾èµ–çš„åŒ…$ gem environment # æŸ¥çœ‹ gem çš„ç¯å¢ƒ$$ sudo gem -v # æŸ¥çœ‹ gem ç‰ˆæœ¬ï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem install cocoa pods # å®‰è£… CocoaPodsï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem install cocoapods # å®‰è£… CocoaPodsï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem install cocoapods --pre # å®‰è£… CocoaPods è‡³é¢„è§ˆç‰ˆï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem install cocoapods -v 0.39.0 # å®‰è£… CocoaPods æŒ‡å®šç‰ˆæœ¬ï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem update cocoapods # æ›´æ–° CocoaPods è‡³æœ€æ–°ç‰ˆï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem update cocoapods --pre # æ›´æ–° CocoaPods è‡³é¢„è§ˆç‰ˆï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰$ sudo gem uninstall cocoapods -v 0.39.0 # ç§»é™¤ CocoaPods æŒ‡å®šç‰ˆæœ¬ï¼ˆä»¥ç®¡ç†å‘˜æƒé™ï¼‰ 3ã€pod æŒ‡ä»¤åº“123456$ pod setup # CocoaPods å°†ä¿¡æ¯ä¸‹è½½åˆ°~/.cocoapods/repos ç›®å½•ä¸‹ã€‚å¦‚æœå®‰è£… CocoaPods æ—¶ä¸æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œåœ¨åˆæ¬¡æ‰§è¡Œ pod intall å‘½ä»¤æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥æŒ‡ä»¤$ pod --version # æ£€æŸ¥ CocoaPods æ˜¯å¦å®‰è£…æˆåŠŸåŠå…¶ç‰ˆæœ¬å·$ pod install # å®‰è£… CocoaPods çš„é…ç½®æ–‡ä»¶ Podfile CocoaPods å‡å¯å‚è€ƒçš„èµ„æ–™ 01 rvmã€Rubyç¯å¢ƒå’ŒCocoaPodså®‰è£…ä½¿ç”¨åŠç›¸å…³æŠ¥é”™é—®é¢˜è§£å†³02 2017æœ€æ–°CocoaPodså®‰è£…03 CocoaPods: pod search æœç´¢ç±»åº“å¤±è´¥çš„è§£å†³åŠæ³•04 æ•´ç†Cocoapodså®‰è£…05 cocoa podså®‰è£…æŠ¥é”™06 æ–°æ‰‹å®‰è£…CocoaPods07 å®‰è£…cocoaPodsä»¥åŠåœ¨OSX10.11.5é—®é¢˜æ€»ç»“08 CocoaPodså®‰è£…è¿‡ç¨‹ä¸é—®é¢˜è§£å†³09 Cocoapods çš„å®‰è£…å’Œä½¿ç”¨ä»¥åŠé—®é¢˜è§£å†³10 æœ€æ–°cocoapodsæ­¥éª¤ï¼ˆä¸»è¦é’ˆå¯¹Xcode8ä»¥ä¸Šï¼‰11 åˆ›å»ºCocoaPodsçš„åˆ¶ä½œè¿‡ç¨‹12 CocoaPodsæ–°ç‰ˆä½¿ç”¨ï¼Œé‡åˆ°çš„é‚£äº›å‘ï¼13 Write in the last é™„ä¸Šä¸€å¼ å›¾ï¼š æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å·¥å…·&amp;æ’ä»¶</category>
      </categories>
      <tags>
        <tag>å·¥å…·&amp;æ’ä»¶</tag>
        <tag>CocoaPods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ ¸å¿ƒåŠ¨ç”»â€”ã€ŒCALayerå›¾å±‚ã€]]></title>
    <url>%2FiOSNET%2FCALayer.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€Core Animation ä¹‹ CALayerã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š UIViewå’ŒCALayerçš„ç±»å®šä¹‰ UIViewå’ŒCALayerçš„åŒºåˆ«å’Œé€‰æ‹© CALayerçš„åŸºæœ¬æ“ä½œ CATransform3D CGAffineTransform çœŸæ­£çš„é«˜é˜¶æŠ€å·§ iOS Core Animation 1.UIViewå’ŒCALayerçš„ç±»å®šä¹‰1.CALayerçš„ä»‹ç»CALayer æ˜¯å®šä¹‰åœ¨ QuartzCore æ¡†æ¶ä¸­ï¼Œä»ä¸‹å›¾å¯ä»¥çœ‹å‡ºUIViewå†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªCALayerå¯¹è±¡ï¼Œå®ƒæ˜¯ç”¨æ¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå†…å®¹å±•ç¤ºçš„çŸ©å½¢åŒºåŸŸï¼›CALayeræ˜¯ä¸ªä¸UIViewå¾ˆç±»ä¼¼çš„æ¦‚å¿µï¼ŒåŒæ ·æœ‰backgroundColorã€frameç­‰ç›¸ä¼¼çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†UIViewçœ‹åšä¸€ç§ç‰¹æ®Šçš„CALayerã€‚ä½†å®é™…ä¸ŠUIViewæ˜¯å¯¹CALayerå°è£…ï¼Œåœ¨CALayerçš„åŸºç¡€ä¸Šå†æ·»åŠ äº¤äº’åŠŸèƒ½ã€‚UIViewçš„æ˜¾ç¤ºå¿…é¡»ä¾èµ–äºCALayerã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥è·Ÿæ–°å»ºviewä¸€æ ·æ–°å»ºä¸€ä¸ªlayerï¼Œç„¶åæ·»åŠ åˆ°æŸä¸ªå·²æœ‰çš„layerä¸Šï¼ŒåŒæ ·å¯ä»¥å¯¹layerè°ƒæ•´å¤§å°ã€ä½ç½®ã€é€æ˜åº¦ç­‰ã€‚ä¸€layerå¯ä»¥æœ‰ä¸¤ç§ç”¨é€”ï¼šä¸€æ˜¯å¯¹viewç›¸å…³å±æ€§çš„è®¾ç½®ï¼ŒåŒ…æ‹¬åœ†è§’ã€é˜´å½±ã€è¾¹æ¡†ç­‰å‚æ•°ï¼›äºŒæ˜¯å®ç°å¯¹viewçš„åŠ¨ç”»æ“æ§ã€‚å› æ­¤å¯¹ä¸€ä¸ªviewè¿›è¡ŒåŠ¨ç”»ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹è¯¥viewçš„.layerè¿›è¡ŒåŠ¨ç”»æ“ä½œï¼› 2.UIViewå’ŒCALayerçš„åŒºåˆ«å’Œé€‰æ‹©UIViewå’ŒCALayeråŒºåˆ«1.åœ¨åˆ›å»ºUIViewå¯¹è±¡æ—¶ï¼ŒUIViewå†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå›¾å±‚(å³CALayerå¯¹è±¡)ï¼ŒCALayer åœ¨èƒŒåæä¾›å†…å®¹çš„ç»˜åˆ¶å’Œæ˜¾ç¤ºï¼›ä¸¤è€…éƒ½æœ‰æ ‘çŠ¶å±‚çº§ç»“æ„ï¼Œlayer å†…éƒ¨æœ‰ SubLayersï¼ŒView å†…éƒ¨æœ‰ SubViews.ä½†æ˜¯ Layer æ¯” View å¤šäº†ä¸ªAnchorPoint(é”šç‚¹)ã€‚ 2.å½“UIViewéœ€è¦æ˜¾ç¤ºåˆ°å±å¹•ä¸Šæ—¶ï¼ˆUIView åšä¸º Layer çš„ CALayerDelegateï¼ŒView æ˜¾ç¤ºå†…å®¹ç”±CALayer çš„ displayï¼‰ï¼Œä¼šè°ƒç”¨drawRect:æ–¹æ³•è¿›è¡Œç»˜å›¾ï¼Œå¹¶ä¸”ä¼šå°†æ‰€æœ‰å†…å®¹ç»˜åˆ¶åœ¨è‡ªå·±çš„å›¾å±‚ä¸Šï¼Œç»˜å›¾å®Œæ¯•åï¼Œç³»ç»Ÿä¼šå°†å›¾å±‚æ‹·è´åˆ°å±å¹•ä¸Šï¼Œäºæ˜¯å°±å®Œæˆäº†UIViewçš„æ˜¾ç¤ºã€‚æ¢å¥è¯è¯´ï¼ŒUIViewæœ¬èº«ä¸å…·å¤‡æ˜¾ç¤ºçš„åŠŸèƒ½ï¼Œæ˜¯å› ä¸ºå®ƒå†…éƒ¨çš„å›¾å±‚ï¼ˆCALayerï¼‰æ‰æœ‰æ˜¾ç¤ºåŠŸèƒ½ 3.Layer çš„ frame æ˜¯ç”±å®ƒçš„ boundsã€positionã€anchorPoint å’Œ transform å…±åŒå†³å®šçš„ï¼›View çš„ frame åªæ˜¯ç®€å•çš„è¿”å› Layerçš„ frameï¼ŒåŒæ · View çš„ bounds å’Œ center ä¹Ÿæ˜¯è¿”å› Layer çš„ä¸€äº›å±æ€§ã€‚ 4.UIView å¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½,ä¹Ÿå°±æ˜¯è¯´ UIView å¯ä»¥å¤„ç†ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶,è€Œ CALayer ä¸å¯ä»¥ã€‚ UIViewå’ŒCALayeré€‰æ‹©é€šè¿‡CALayerï¼Œä¹Ÿèƒ½åšå‡ºå’Œ UIImageView ä¸€æ ·çš„æ•ˆæœï¼Œç›¸æ¯”è¾ƒUIViewå¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼› æ‰€ä»¥ï¼Œå¦‚æœæ˜¾ç¤ºå‡ºæ¥çš„ä¸œè¥¿éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¯ï¼Œç”¨UIViewï¼›å¦‚æœä¸éœ€è¦è¿›è¡Œäº¤äº’ï¼Œç”¨UIViewå’ŒCALayeréƒ½å¯ä»¥ï¼› å½“ç„¶ï¼ŒCALayer çš„æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå› ä¸ºå®ƒå°‘äº†äº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼Œæ›´è½»é‡çº§(å®é™…å¼€å‘ä¸­è¿˜æ˜¯å»ºè®®ä½¿ç”¨UIView,å¯æ‰©å±•æ€§å¼º)ï¼› 2.CALayerçš„åŸºæœ¬æ“ä½œ1.CALayerçš„å¸¸ç”¨å±æ€§ å±æ€§ æè¿° bounds å›¾å±‚å¤§å° position å›¾å±‚ä¸­å¿ƒç‚¹ä½ç½®ï¼Œç›¸å½“äºUIViewçš„center opacity é€æ˜åº¦ï¼Œç›¸å½“äºUIViewçš„alpha anchorPoint å’Œä¸­å¿ƒpositioné‡åˆçš„ç‚¹ï¼Œç§°ä¸ºé”šç‚¹ï¼ŒèŒƒå›´åœ¨(0~1,0~1)ï¼Œé»˜æ˜¯ï¼ˆ0.5,0.5ï¼‰ contents imageæ·»åŠ åˆ°layerçš„contents opacity é€æ˜åº¦ï¼Œç›¸å½“äºUIViewçš„alpha contentsRect è®¾ç½®å›¾ç‰‡æ˜¾ç¤ºçš„å°ºå¯¸ï¼Œå–å€¼0~1(x0, y0, W1, H1)ï¼Œå¦‚ CGRectMake(0, 0, 1, 0.5);åªå°†å›¾åƒçš„ä¸ŠåŠéƒ¨åˆ†æ˜¾ç¤ºåœ¨æ•´ä¸ªlayerä¸­ï¼› CATransform3D å½¢å˜å±æ€§(è®¾ç½®å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬æ—¶çš„ 3Dæ•ˆæœ) cornerRadius / masksToBounds åœ†è§’åŠå¾„ / å±æ€§ä¸ºYESæ‰æ˜¾ç¤ºåœ†è§’æ•ˆæœ 2.åˆ›å»ºè‡ªå®šä¹‰çš„CALayer1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586// layeråŸºæœ¬ä½¿ç”¨- (void)layerWithUIView&#123; // è‡ªå®šä¹‰å›¾å±‚ CALayer *layer = [CALayer layer]; layer.bounds = CGRectMake(0, 0, 100, 100); layer.contents = (id)[UIImage imageNamed:@"é˜¿ç‹¸å¤´åƒ"].CGImage;? layer.backgroundColor = [UIColor redColor].CGColor;? layer.position = self.view.center; layer.anchorPoint = CGPointMake(0.5, 1); // é»˜è®¤æ˜¯è‡ªå¸¦é˜´å½±çš„æ•ˆæœ, é»˜è®¤ä¸º0. self.redView.layer.shadowOpacity = 1; // æ·»åŠ å›¾å±‚åˆ°æ ¹å›¾å±‚ [self.view.layer addSublayer:layer]; ***********å…¶å®ƒå±æ€§**************** // è®¾ç½®é˜´å½±çš„é¢œè‰² layer.shadowColor = [UIColor blackColor].CGColor; // è®¾ç½®é˜´å½±çš„åç§»é‡((x,y) ä¾‹:å³ä¸‹) layer.shadowOffset = CGSizeMake(10, 10); // è®¾ç½®é˜´å½±çš„æ¨¡ç³Šç¨‹åº¦ layer.shadowRadius = 10; // è®¾ç½®è¾¹æ¡†çš„å®½åº¦(æ³¨æ„:æ˜¯å¾€é‡Œé¢èµ°çš„) å’Œ é¢œè‰² layer.borderWidth = 5; layer.borderColor = [UIColor blueColor].CGColor; // è®¾ç½®åœ†è§’åŠå¾„ layer.cornerRadius = 50; // å›¾å±‚ä¸­ç»˜åˆ¶çš„å›¾ç‰‡æ— æ³•æ­£ç¡®æ˜¾ç¤ºï¼Œè§£å†³:æŠŠè¶…è¿‡æ ¹å±‚ä»¥å¤–çš„ä¸œè¥¿å‰ªåˆ‡æ‰(UIViewè‡ªå¸¦çš„å±‚,æˆ‘ä»¬ç§°ä¸ºæ˜¯æ ¹å±‚) layer.masksToBounds = YES; // è®¾ç½®å›¾å±‚çš„ä»£ç† layer.delegate = self; // setNeedsDisplayhä¼šè°ƒç”¨drawRect:æ–¹æ³• [layer setNeedsDisplay];&#125;``` æ³¨è§£ï¼š- 1ã€é˜´å½±æ•ˆæœæ— æ³• å’Œ `masksToBounds`åŒæ—¶ä½¿ç”¨;- 2ã€è£å‰ªï¼š`masksToBounds` æ˜¯ `CALayer` çš„å±æ€§ï¼›`clipsToBounds` æ˜¯ `UIView` çš„å±æ€§ï¼›- 3ã€`CGImage` å’Œ `CGColor` çš„è§£é‡Šï¼š - `CALayer`æ˜¯å®šä¹‰åœ¨`QuartzCore`æ¡†æ¶ä¸­çš„`CGImageRef`ã€`CGColorRef`ä¸¤ç§æ•°æ®ç±»å‹æ˜¯å®šä¹‰åœ¨`CoreGraphics`æ¡†æ¶ä¸­çš„ - `UIColor`ã€`UIImage`æ˜¯å®šä¹‰åœ¨`UIKit`æ¡†æ¶ä¸­çš„`QuartzCore`æ¡†æ¶å’Œ`CoreGraphics`æ¡†æ¶æ˜¯å¯ä»¥è·¨å¹³å°ä½¿ç”¨çš„ï¼Œåœ¨`iOS`å’Œ`Mac OS X`ä¸Šéƒ½èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯`UIKit`åªèƒ½åœ¨`iOS`ä¸­ä½¿ç”¨ï¼Œä¸ºäº†ä¿è¯å¯ç§»æ¤æ€§ï¼Œ`QuartzCore`ä¸èƒ½ä½¿ç”¨`UIImage`ã€`UIColor`ï¼Œåªèƒ½ä½¿ç”¨`CGImageRef`ã€`CGColorRef`ï¼Œå³éœ€è¦ï¼š`.CGImage` å’Œ `.CGColor`. #### 3.CATransform3D&gt;æ³¨æ„ï¼šä½¿ç”¨KVCå¿«é€Ÿè®¾ç½®æ—¶ï¼ŒKey Pathså€¼ä¸€å®šä¸è¦å†™é”™```objc// è§¦æ‘¸å¼€å§‹è°ƒç”¨- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; // CATransform3Dï¼Œè®¾ç½®å¹³ç§»ã€ç¼©æ”¾å’Œæ—‹è½¬æ—¶çš„ 3Dæ•ˆæœ [UIView animateWithDuration:1 animations:^&#123; // æ–¹å¼ä¸€ï¼šCATransform3Dæ™®é€šè®¾ç½® // å¹³ç§» (CGFloat sx, CGFloat sy, CGFloat sz) self.imageView.layer.transform = CATransform3DTranslate(self.imageView.layer.transform, 10, 0, 0); // ç¼©æ”¾ self.imageView.layer.transform = CATransform3DScale(self.imageView.layer.transform, 1.2, 1.2, 0); // æ—‹è½¬ self.imageView.layer.transform = CATransform3DMakeRotation(M_PI, 0, 0, 1); // æ–¹å¼äºŒï¼šCATransform3D KVCå¿«é€Ÿè®¾ç½® // æŠŠç»“æ„ä½“è½¬æˆå¯¹è±¡ //NSValue *value = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_PI, 0, 0, 1)]; //[self.imageView.layer setValue:value forKeyPath:@"transform"]; // é€šè¿‡KVCå¿«é€Ÿå¹³ç§»(translation)ã€ç¼©æ”¾(sacle)ã€æ—‹è½¬(rotation) // å¹³ç§» [self.imageView.layer setValue:@(100) forKeyPath:@"transform.translation.y"]; // ç¼©æ”¾ [self.imageView.layer setValue:@(0.5) forKeyPath:@"transform.scale"]; // æ—‹è½¬ [self.imageView.layer setValue:@(M_PI_4) forKeyPath:@"transform.rotation"]; &#125;];&#125; PS.åœ¨è¿™é‡Œæˆ‘å°±ä¸ç”¨å›¾ç‰‡äº†ï¼Œæˆ‘å°±åŠ³åŠ¨ä¸€ä¸‹å§(å›¾ç‰‡çš„ä¸å¥½å¤åˆ¶ä¸æ˜¯å—)ï¼Œç¦åˆ©å¥‰ä¸Šè½¬åœºæ•ˆæœkey paths Transform field value key paths Field Key Path Description translation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ²¿ç€xè½´å¹³ç§»ã€‚ translation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿yè½´å¹³ç§»ã€‚ translation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿zè½´å¹³ç§»ã€‚ translation è®¾ç½®ä¸ºä¸€ä¸ªNSValueå¯¹è±¡åŒ…å«ä¸€ä¸ªNSSizeæˆ–CGSizeæ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹è¡¨ç¤ºå°†åœ¨xå’Œyè½´ã€‚ scale.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯xè½´ç¼©æ”¾ã€‚ scale.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯yè½´ç¼©æ”¾ã€‚ scale.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯zè½´ç¼©æ”¾ã€‚ scale è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ‰€æœ‰ä¸‰ä¸ªè§„æ¨¡å› ç´ çš„å¹³å‡å€¼ã€‚ rotation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,xè½´ã€‚ rotation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,yè½´ã€‚ rotation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚ rotation è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€æ ·è®¾ç½®æ—‹è½¬ã€‚zåŸŸã€‚ 4.CGAffineTransform1234567891011121314// æ—‹è½¬ï¼Œå‚æ•°æŒ‡å®šä¸ºå¼§åº¦ï¼ŒM_PI &lt;ï¼&gt; 180CGAffineTransformMakeRotation(CGFloat angle);// ç¼©æ”¾, sxï¼šæŒ‡xè½´ç¼©æ”¾çš„æ¯”ä¾‹,sy åœ¨yè½´ä¸Šçš„ç¼©æ”¾æ¯”ä¾‹CGAffineTransformMakeScale(CGFloat sx, CGFloat sy);// å¹³ç§» txï¼šåœ¨xè½´ä¸Šå¹³ç§» ty æ˜¯åœ¨yä¸Šå¹³ç§»CGAffineTransformMakeTranslation(CGFloat tx, CGFloat ty);// è®©ä½ çš„viewå›åˆ°æœ€åŸå§‹çš„çŠ¶æ€ï¼Œæ²¡æœ‰ç¼©æ”¾ï¼Œæ²¡æœ‰æ—‹è½¬ï¼Œæ²¡æœ‰å¹³ç§»ballView.transform = CGAffineTransformIdentity;// æŒ‡å®šåœ¨yè½´ä¸Š å¹³ç§»ballView.transform = CGAffineTransformMakeTranslation(0, -300); çœŸæ­£çš„é«˜é˜¶æŠ€å·§ iOS Core Animationå¼ºåŠ›æ¨èğŸ‘ã€ŠiOS Core Animation: Advanced Techniquesã€‹è¿™æœ¬ä¹¦å¾ˆæ·±å…¥çš„å°†äº†Core Animationçš„åŸç†æ€§çš„ä¸œè¥¿ï¼Œæ˜¯ä¸€æœ¬è®²è§£Core AnimationåŸç†éå¸¸æ·±å…¥çš„ä¹¦ï¼Œå¦‚æœæŠŠæ•´æœ¬ä¹¦å…¨éƒ¨è¯»å®Œï¼Œç†è§£ï¼Œæˆ‘ç›¸ä¿¡iOS ä¸­çš„åŠ¨ç”»å°±æ˜¯ä»¶å¾ˆè½»æ¾çš„äº‹æƒ…äº†ï¼Œå¯æƒœæ˜¯è‹±æ–‡çš„; åœ¨ç½‘ä¸Šä¹Ÿæ‰¾åˆ°äº†è¿™æœ¬ä¹¦å®Œæ•´çš„ä¸­æ–‡ç¿»è¯‘ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥å»çœ‹çœ‹ iosæ ¸å¿ƒåŠ¨ç”»é«˜çº§æŠ€å·§ æœ€åé™„ä¸Šè¿™å¼ å›¾ï¼š æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° errorï¼Œå¸Œæœ›ä½ èƒ½ Issues æˆ‘ï¼Œè°¢è°¢ã€‚ å¦‚æœä½ æƒ³ä¸ºã€æœ¬æ–‡ç›¸å…³ã€‘åˆ†äº«ç‚¹ä»€ä¹ˆï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½ Issues æˆ‘ï¼Œæˆ‘éå¸¸æƒ³ä¸ºè¿™ç¯‡æ–‡ç« å¢åŠ æ›´å¤šå®ç”¨çš„å†…å®¹ï¼Œè°¢è°¢ã€‚ ã€Œåšå®¢åŸæ–‡ã€ï¼Œå¯¹æœ¬æ–‡æˆ‘ä¼šã€ä¸å®šæ—¶ã€æŒç»­æ›´æ–°ã€ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç†ã€‘^_^. Write in the firstã€å†™åœ¨æœ€å‰ã€‘ iOS åŠ¨ç”»ä¸»è¦æ˜¯æŒ‡ Core Animation æ¡†æ¶ã€‚å®˜æ–¹ä½¿ç”¨æ–‡æ¡£åœ°å€ä¸º: Core Animation Guideã€‚ Core Animation æ˜¯iOSå’ŒmacOSå¹³å°ä¸Šè´Ÿè´£å›¾å½¢æ¸²æŸ“ä¸åŠ¨ç”»çš„åŸºç¡€æ¡†æ¶ã€‚Core Animation å¯ä»¥ä½œç”¨ä¸åŠ¨ç”»è§†å›¾æˆ–è€…å…¶ä»–å¯è§†å…ƒç´ ï¼Œä¸ºä½ å®Œæˆäº†åŠ¨ç”»æ‰€éœ€çš„å¤§éƒ¨åˆ†ç»˜å¸§å·¥ä½œã€‚ä½ åªéœ€è¦é…ç½®å°‘é‡çš„åŠ¨ç”»å‚æ•°ï¼ˆå¦‚å¼€å§‹ç‚¹çš„ä½ç½®å’Œç»“æŸç‚¹çš„ä½ç½®ï¼‰å³å¯ä½¿ç”¨ Core Animation çš„åŠ¨ç”»æ•ˆæœã€‚ Core Animation å°†å¤§éƒ¨åˆ†å®é™…çš„ç»˜å›¾ä»»åŠ¡äº¤ç»™äº†å›¾å½¢ç¡¬ä»¶æ¥å¤„ç†ï¼Œå›¾å½¢ç¡¬ä»¶ä¼šåŠ é€Ÿå›¾å½¢æ¸²æŸ“çš„é€Ÿåº¦ã€‚|è¿™ç§è‡ªåŠ¨åŒ–çš„å›¾å½¢åŠ é€ŸæŠ€æœ¯è®©åŠ¨ç”»æ‹¥æœ‰æ›´é«˜çš„å¸§ç‡å¹¶ä¸”æ˜¾ç¤ºæ•ˆæœæ›´åŠ å¹³æ»‘ï¼Œä¸ä¼šåŠ é‡CPUçš„è´Ÿæ‹…è€Œå½±å“ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€iOSåŠ¨ç”» Core Animationã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ï¼›@ ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š ç³»ç»Ÿè‡ªå¸¦çš„ animationImages UIViewä»£ç å—åŠ Block UIView [begin commit]æ¨¡å¼ ä½¿ç”¨CoreAnimationä¸­çš„ç±»1.CATransition è½¬åœºåŠ¨ç”»1.CATransactionåŠ¨ç”»äº‹åŠ¡2.CABasicAnimation åŸºç¡€åŠ¨ç”»2.CASpringAnimation å¼¹ç°§åŠ¨ç”»3.CAKeyframeAnimation å…³é”®å¸§åŠ¨ç”»4.CAAnimationGroup åŠ¨ç”»ç»„5.AnimationWithKeyPathçš„å€¼ ç‰©ç†åŠ¨æ•ˆ(é‡åŠ›ã€ç¢°æ’ã€å¸é™„ã€æ¨åŠ›ã€å…³è”)1.UICollisionBehaviorç¢°æ’2.UISnapBehaviorå¸é™„3.UIPushBehavioræ¨åŠ›4.UIAttachmentBehaviorå…³è” ç²’å­ç³»ç»Ÿ facebook popåŠ¨ç”» iOSåŠ¨ç”»è°ƒç”¨æ–¹å¼1.ç³»ç»Ÿè‡ªå¸¦çš„ animationImages1234UIImageView *imageView;imageView.animationImages = @[image1,image2...];[imageView startAnimating];[imageView stopAnimating]; 2.UIViewä»£ç å—åŠ Block123456789101112131415161718192021222324/** Duration åŠ¨ç”»æŒç»­æ—¶é—´ animations åŠ¨ç”»è¿‡ç¨‹ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt;];// æ‰§è¡ŒåŠ¨ç”» å’Œ åŠ¨ç”»å®Œæˆçš„å›è°ƒ[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];/** delay ç­‰å¾…æ—¶é—´ options åŠ¨ç”»ç±»å‹ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];/** å¼¹æ€§åŠ¨ç”» damping é˜»å°¼ï¼ŒèŒƒå›´0-1ï¼Œé˜»å°¼è¶Šæ¥è¿‘äº0ï¼Œå¼¹æ€§æ•ˆæœè¶Šæ˜æ˜¾ velocity å¼¹æ€§å¤ä½çš„é€Ÿåº¦ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; usingSpringWithDamping:&lt;#(CGFloat)#&gt; initialSpringVelocity:&lt;#(CGFloat)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];// å…³é”®å¸§åŠ¨ç”»[UIView animateKeyframesWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; options:&lt;#(UIViewKeyframeAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;]; 3.UIView [begin commit]æ¨¡å¼123456789101112131415161718192021222324#pragma mark - ä½¿ç”¨UIView [begin,commit]æ¨¡å¼- (void)uiViewAnimation &#123; // å¯ä»¥åµŒå¥—ä½†æ˜¯å¿…é¡»æˆå¯¹å‡ºç° UIViewAnimationTransition type = UIViewAnimationTransitionNone; [UIView beginAnimations:nil context:nil]; // åŠ¨ç”»çš„æŒç»­æ—¶é—´ [UIView setAnimationDuration:1]; // åŠ¨ç”»ç±»å‹ [UIView setAnimationTransition:type forView:_redView cache:YES]; // åŠ¨ç”»ä»£ç† //[UIView setAnimationDelegate:self]; //[UIView setAnimationWillStartSelector:@selector(annimationStart)]; //[UIView setAnimationDidStopSelector:@selector(annimationStop)]; [UIView commitAnimations];&#125;- (void)animationDidStart:(CAAnimation *)anim &#123; NSLog(@"%s, line = %d",__FUNCTION__,__LINE__);&#125;- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123; NSLog(@"%s, line = %d",__FUNCTION__,__LINE__);&#125; 4.ä½¿ç”¨CoreAnimationä¸­çš„ç±» 1.CATransition è½¬åœºåŠ¨ç”» CATransitionå±æ€§ æè¿° type è¿‡æ¸¡çš„ç±»å‹ subType è¿‡æ¸¡çš„æ–¹å‘ startProgress åŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) endProgress åŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) addAnimation: forKey: æŠŠè½¬åœºåŠ¨ç”»æ·»åŠ åˆ°layerä¸Š åˆ›å»ºæ­¥éª¤ 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ 2.è®¾ç½®è½¬åœºç±»å‹ 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» ç¤ºä¾‹ä»£ç ï¼š123456789101112131415#pragma mark - äº¤å‰æ·¡åŒ–è¿‡æ¸¡-(void)fadeAnimation&#123; [self changeShowContens]; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ CATransition *anima = [CATransition animation]; // 2.è®¾ç½®è½¬åœºç±»å‹ anima.type = kCATransitionFade;// è®¾ç½®åŠ¨ç”»çš„ç±»å‹ //anima.type = @"cube";// è®¾ç½®åŠ¨ç”»çš„ç±»å‹ anima.subtype = kCATransitionFromRight; // è®¾ç½®åŠ¨ç”»çš„æ–¹å‘ //anima.startProgress = 0.3;// è®¾ç½®åŠ¨ç”»èµ·ç‚¹ //anima.endProgress = 0.8;// è®¾ç½®åŠ¨ç”»ç»ˆç‚¹ anima.duration = 1.0f;// è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶é•¿ // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» [_imageView.layer addAnimation:anima forKey:@"fadeAnimation"];&#125; æ•ˆæœï¼š 2.CATransitionè½¬åœºåŠ¨ç”»è¿‡æ¸¡ç±»å‹åœ¨è¿™é‡Œæˆ‘å°±ä¸ç”¨å›¾ç‰‡äº†ï¼Œæˆ‘å°±åŠ³åŠ¨ä¸€ä¸‹å§(å›¾ç‰‡çš„ä¸å¥½å¤åˆ¶ä¸æ˜¯å—)ï¼Œå¥‰ä¸Šè½¬åœºæ•ˆæœ api ç±»å‹å­—ç¬¦ä¸² æ•ˆæœè¯´æ˜ å…³é”®å­— æ–¹å‘ fade äº¤å‰æ·¡åŒ–è¿‡æ¸¡ YES push æ–°è§†å›¾æŠŠæ—§è§†å›¾æ¨å‡ºå» YES moveIn æ–°è§†å›¾ç§»åˆ°æ—§è§†å›¾ä¸Šé¢ YES reveal å°†æ—§è§†å›¾ç§»å¼€,æ˜¾ç¤ºä¸‹é¢çš„æ–°è§†å›¾ YES cube ç«‹æ–¹ä½“ç¿»æ»šæ•ˆæœ oglFlip ä¸Šä¸‹å·¦å³ç¿»æ»šæ•ˆæœ suckEffect æ”¶ç¼©æ•ˆæœ,å¦‚ä¸€å—å¸ƒè¢«æŠ½èµ° NO rippleEffect æ°´æ»´æ•ˆæœ NO pageCurl å‘ä¸Šç¿»é¡µæ•ˆæœ pageUnCurl å‘ä¸‹ç¿»é¡µæ•ˆæœ cameraIrisHollowOpen ç›¸æœºé•œå¤´æ‰“å¼€æ•ˆæœ NO cameraIrisHollowClose ç›¸æœºé•œå¤´å…³é—­æ•ˆæœ NO åŠ¨ç”»å¸¸ç”¨å±æ€§ æè¿° rotation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,xè½´ã€‚ duration åŠ¨ç”»çš„æŒç»­æ—¶é—´ beginTime åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ repeatCount åŠ¨ç”»çš„é‡å¤æ¬¡æ•° autoreverses æ‰§è¡Œçš„åŠ¨ç”»æŒ‰ç…§åŸåŠ¨ç”»è¿”å›æ‰§è¡Œ timingFunction æ§åˆ¶åŠ¨ç”»çš„æ˜¾ç¤ºèŠ‚å¥ Linear åŒ€é€Ÿï¼ŒEaseIn å…ˆæ…¢åå¿«ï¼ŒEaseOut å…ˆå¿«åæ…¢ï¼ŒEaseInEaseOut å…ˆæ…¢åå¿«å†æ…¢ï¼ŒDefault é»˜è®¤ä¸­é—´æ¯”è¾ƒå¿« 3.CATransactionåŠ¨ç”»äº‹åŠ¡äº‹åŠ¡(CATransaction)è´Ÿè´£åè°ƒå¤šä¸ªåŠ¨ç”»åŸå­æ›´æ–°çš„æ˜¾ç¤ºæ“ä½œ,æ˜¯åŠ¨ç”»é‡Œé¢çš„ä¸€ä¸ªåŸºæœ¬å•å…ƒï¼ŒåŠ¨ç”»çš„äº§ç”Ÿå¿…ç„¶ä¼´éšç€layerçš„Animatableå±æ€§çš„å˜åŒ–ï¼Œè€Œlayerå±æ€§çš„å˜åŒ–å¿…é¡»å±äºæŸä¸€ä¸ªäº‹åŠ¡ã€‚å› æ­¤ ï¼Œæ ¸å¿ƒåŠ¨ç”»ä¾èµ–äºäº‹åŠ¡ã€‚å¯ä»¥é€šè¿‡äº‹ç‰©å…³é—­éšå¼åŠ¨ç”»:1234567891011121314151617181920212223241ã€äº‹åŠ¡çš„ä½œç”¨ï¼šä¿è¯ä¸€ä¸ªæˆ–å¤šä¸ªlayerçš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å˜åŒ–åŒæ—¶è¿›è¡Œã€‚2ã€äº‹åŠ¡çš„ç§ç±»ï¼šéšå¼å’Œæ˜¾ç¤º3ã€éšå¼ï¼šæ²¡æœ‰æ˜æ˜¾è°ƒç”¨äº‹åŠ¡çš„æ–¹æ³•ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆäº‹åŠ¡ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„è®¾ç½®ä¸€ä¸ªlayerçš„positionå±æ€§ï¼Œåˆ™ä¼šåœ¨å½“å‰çº¿ç¨‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªrunLoopä¸­è‡ªåŠ¨commit.é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å…³é—­éšå¼åŠ¨ç”»çš„è®¾ç½®:[CATransaction begin];// å¼€å¯äº‹åŠ¡[CATransaction setDisableActions:YES];// å…³é—­éšå¼åŠ¨ç”»self.myview.layer.position = CGPointMake(10, 10);[CATransaction commit];// æäº¤äº‹åŠ¡4ã€æ˜¾ç¤º:æ˜æ˜¾è°ƒç”¨äº‹åŠ¡çš„æ–¹æ³•[CATransaction begin] å’Œ [CATransaction commit]ï¼Œå¿…é¡»å†™åœ¨ä¸¤è€…ä¹‹é—´.5ã€CAäº‹åŠ¡çš„å¯è®¾ç½®å±æ€§(ä¼šè¦†ç›–éšå¼åŠ¨ç”»çš„è®¾ç½®)animationDurationï¼šåŠ¨ç”»æ—¶é—´animationTimingFunctionï¼šåŠ¨ç”»æ—¶é—´æ›²çº¿disableActionsï¼šæ˜¯å¦å…³é—­åŠ¨ç”»completionBlockï¼šåŠ¨ç”»æ‰§è¡Œå®Œæ¯•çš„å›è°ƒäº‹åŠ¡æ”¯æŒåµŒå¥—ä½¿ç”¨:å½“æœ€å¤–å±‚çš„äº‹åŠ¡commitååŠ¨ç”»æ‰ä¼šå¼€å§‹ã€‚6ã€é€šè¿‡ä¿®æ”¹layerä¸Šçš„å±æ€§äº§ç”Ÿçš„åŠ¨ç”»æ•ˆæœï¼Œç§°ä¹‹ä¸º éšå¼åŠ¨ç”»é€šè¿‡æ‰‹åŠ¨æ·»åŠ åŠ¨ç”»å¯¹è±¡äº§ç”Ÿçš„åŠ¨ç”»ï¼Œç§°ä¹‹ä¸º æ˜¾å¼åŠ¨ç”» 4.CABasicAnimation åŸºç¡€åŠ¨ç”» CABasicAnimationé‡è¦å±æ€§ æè¿° fromValue keyPathå¯¹åº”çš„åˆå§‹å€¼ toValue keyPathå¯¹åº”çš„ç»“æŸå€¼ removedOnCompletion åŠ¨ç”»å®Œæˆæ—¶,æ˜¯å¦åˆ é™¤åŠ¨ç”» fillMode è®¾ç½®è®©åŠ¨ç”»æ•ˆæœæœ€åæ‰§è¡ŒçŠ¶æ€ åŸºç¡€åŠ¨ç”»åˆ›å»ºæ­¥éª¤ 1ã€åˆå§‹åŒ–åŠ¨ç”»å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ 2ã€è®¾ç½®åŠ¨ç”»å±æ€§åˆå§‹å€¼ï¼ˆå¯ä»¥çœç•¥ï¼‰ã€ç»“æŸå€¼ä»¥åŠå…¶ä»–åŠ¨ç”»å±æ€§ 3ã€ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢è¿™ä¸ªç§»åŠ¨åŠ¨ç”»å®ä¾‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243#pragma mark - ä½ç§»åŠ¨ç”»- (void)positionAnimation &#123; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ CABasicAnimation *basicAnimation = [CABasicAnimation animationWithKeyPath:@"position"]; // 2.è®¾ç½®åŠ¨ç”» åˆå§‹å€¼(å¯ä»¥çœç•¥) å’Œ ç»“æŸå€¼ // æŠŠCGPointè½¬æ¢æˆidç±»å‹,ä½¿ç”¨NSValue basicAnimation.fromValue = [NSValue valueWithCGPoint:CGPointMake(50, kScreenHeight/2)]; basicAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth- 50, kScreenHeight/2)]; // è®¾ç½®åŠ¨ç”»çš„å…¶ä»–å±æ€§å€¼ // åŠ¨ç”»æ‰§è¡Œæ—¶é•¿2ç§’ï¼ˆé»˜è®¤0.2s) basicAnimation.duration = 1.0f; // è®¾ç½®é‡å¤æ¬¡æ•°,HUGE_VALFå¯çœ‹åšæ— ç©·å¤§ //basicAnimation.repeatCount = HUGE_VALF; // è®¾ç½®é‡å¤æ—¶é—´ï¼ˆé‡å¤æ—¶é—´ / æ‰§è¡Œæ—¶é•¿ = é‡å¤æ¬¡æ•°) //basicAnimation.repeatDuration = 4; // è®¾ç½®å»¶è¿Ÿæ‰§è¡Œ2ç§’ //basicAnimation.beginTime = CACurrentMediaTime() + 2; // åŠ¨ç”»æ—¶é—´æ›²çº¿ kCAMediaTimingFunctionLinear çº¿æ€§å˜æ¢ å¹³ç¼“ //basicAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; // è‡ªåŠ¨åè½¬(æ€ä¹ˆå»å°±æ€ä¹ˆå›æ¥) //basicAnimation.autoreverses = YES; // è®¾ç½®åŠ¨ç”»ä»£ç† //basicAnimation.delegate = self; /** å¦‚æœfillMode=kCAFillModeForwardså’ŒremovedOnComletion=NOï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾å±‚ä¼šä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡Œåçš„çŠ¶æ€ã€‚ä½†åœ¨å®è´¨ä¸Šï¼Œå›¾å±‚çš„å±æ€§å€¼è¿˜æ˜¯åŠ¨ç”»æ‰§è¡Œå‰çš„åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¢«æ”¹å˜ã€‚(ä¸è®¾ç½®è¿™ä¸¤ä¸ªå±æ€§å€¼é»˜è®¤å›åˆ°åŸå§‹ä½ç½®) 2016-06-15 13:15:24.350 iOSå¸¸ç”¨åŠ¨ç”»[14625:325800] åŠ¨ç”»å‰X = 137.500000 2016-06-15 13:15:24.350 iOSå¸¸ç”¨åŠ¨ç”»[14625:325800] åŠ¨ç”»åX = 137.500000 */ //basicAnimation.removedOnCompletion = NO;// åŠ¨ç”»å®Œæˆæ—¶,ä¼šè‡ªåŠ¨åˆ é™¤åŠ¨ç”» //basicAnimation.fillMode = kCAFillModeForwards;// è®¾ç½®è®©åŠ¨ç”»æ•ˆæœæœ€åæ‰§è¡ŒçŠ¶æ€ // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”»ï¼ˆæ³¨æ„keyç›¸å½“äºç»™åŠ¨ç”»è¿›è¡Œå‘½åï¼Œä»¥åè·å¾—è¯¥åŠ¨ç”»æ—¶å¯ä»¥ä½¿ç”¨æ­¤åç§°è·å–ï¼‰ [self.redView.layer addAnimation:basicAnimation forKey:@"positionAnimation"]; // ç§»é™¤åŠ¨ç”» //[self.redView.layer removeAnimationForKey:@"positionAnimation"]; //[self.redView.layer removeAllAnimations];&#125; æ•ˆæœï¼š CASpringAnimation å¼¹ç°§åŠ¨ç”» å±æ€§ æè¿° mass è´¨é‡ï¼Œå½±å“å›¾å±‚è¿åŠ¨æ—¶çš„å¼¹ç°§æƒ¯æ€§ï¼Œè´¨é‡è¶Šå¤§ï¼Œå¼¹ç°§æ‹‰ä¼¸å’Œå‹ç¼©çš„å¹…åº¦è¶Šå¤§ stiffnes åˆšåº¦ç³»æ•°(åŠ²åº¦ç³»æ•°/å¼¹æ€§ç³»æ•°)ï¼Œåˆšåº¦ç³»æ•°è¶Šå¤§ï¼Œå½¢å˜äº§ç”Ÿçš„åŠ›å°±è¶Šå¤§ï¼Œè¿åŠ¨è¶Šå¿« damping é˜»å°¼ç³»æ•°ï¼Œé˜»æ­¢å¼¹ç°§ä¼¸ç¼©çš„ç³»æ•°ï¼Œé˜»å°¼ç³»æ•°è¶Šå¤§ï¼Œåœæ­¢è¶Šå¿« initivelocity åˆå§‹é€Ÿç‡ï¼ŒåŠ¨ç”»è§†å›¾çš„åˆå§‹é€Ÿåº¦å¤§å°;é€Ÿç‡ä¸ºæ­£æ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸è¿åŠ¨æ–¹å‘ä¸€è‡´ï¼Œé€Ÿç‡ä¸ºè´Ÿæ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸è¿åŠ¨æ–¹å‘ç›¸å settingDuration ç»“ç®—æ—¶é—´(æ ¹æ®åŠ¨ç”»ç›¸å…³å‚æ•°ä¼°ç®—å¼¹ç°§å¼€å§‹è¿åŠ¨åˆ°åœæ­¢çš„æ—¶é—´ï¼ŒåŠ¨ç”»è®¾ç½®çš„æ—¶é—´æœ€å¥½æ ¹æ®æ­¤æ—¶é—´æ¥è®¾ç½®) CASpringAnimationå’ŒUIViewçš„SpringAnimationå¯¹æ¯”:CASpringAnimation å¯ä»¥è®¾ç½®æ›´å¤šå¼¹ç°§åŠ¨ç”»æ•ˆæœçš„å±æ€§ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„å¼¹ç°§æ•ˆæœï¼Œå¯ä»¥å’Œå…¶ä»–åŠ¨ç”»ç»„åˆUIViewçš„SpringAnimationå®é™…ä¸Šå°±æ˜¯é€šè¿‡CASpringAnimationæ¥å®ç°çš„ã€‚ ä»£ç ç¤ºä¾‹ï¼š12345678910111213141516171819202122#pragma mark - å¼¹ç°§åŠ¨ç”»- (void)springAnimation &#123; CASpringAnimation * springAnimation = [CASpringAnimation animationWithKeyPath:@"transform.scale"]; // è´¨é‡,è¶Šå¤§å¼¹ç°§å¹…åº¦è¶Šå¤§ springAnimation.mass = 10.0; // å¼¹æ€§ç³»æ•°,è¶Šå¤§è¿åŠ¨è¶Šå¿« springAnimation.stiffness = 500; // é˜»å°¼ç³»æ•°,è¶Šå¤§åœæ­¢è¶Šå¿« springAnimation.damping = 100.0; // åˆå§‹é€Ÿç‡,æ­£æ–¹å‘ç›¸åŒã€è´Ÿæ–¹å‘ç›¸å springAnimation.initialVelocity = 30.f; springAnimation.duration = springAnimation.settlingDuration; springAnimation.toValue = [NSNumber numberWithFloat:1.5]; //springAnimation.removedOnCompletion = NO; //springAnimation.fillMode = kCAFillModeForwards; springAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; [self.redView.layer addAnimation:springAnimation forKey:@"boundsAni"];&#125; æ•ˆæœï¼š 3.CAKeyframeAnimation å…³é”®å¸§åŠ¨ç”»å¯ä»¥è®©æˆ‘ä»¬åœ¨æ›´ç»†çš„ç²’åº¦ä¸Šæ§åˆ¶åŠ¨ç”»çš„è¡Œä¸ºï¼Œå…³é”®å¸§åŠ¨ç”»éœ€è¦æŒ‡å®šå‡ ä¸ªå…³é”®çš„ç‚¹ï¼Œä»è€Œè®©åŠ¨ç”»æ²¿ç€è¿™äº›ç‚¹è¿åŠ¨ï¼Œè¿™å‡ ä¸ªç‚¹å°±ç§°ä¹‹ä¸º å…³é”®å¸§ CAKeyframeAnimationå±æ€§ æè¿° values æŒ‡å®šå…³é”®ç‚¹çš„å€¼ path å¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRef / CGMutablePathRefï¼Œè®©å±‚è·Ÿç€è·¯å¾„ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚å¦‚æœä½ è®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥. keyTimes æ˜¯èµ°åˆ°æŸä¸€ä¸ªå…³é”®ç‚¹èŠ±è´¹çš„æ—¶é—´ç™¾åˆ†æ¯”(0ï½1)ï¼ŒkeyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§(ä¸¤ä¸ªæ•°ç»„çš„ä¸ªæ•°å¿…é¡»ä¸€è‡´)ï¼Œå½“keyTimesæ²¡æœ‰è®¾ç½®çš„æ—¶å€™,å„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ã€‚ é€šè¿‡ è®¾ç½®ä¸åŒçš„å±æ€§å€¼values åŠ¨ç”» å…³é”®å¸§åŠ¨ç”»åˆ›å»ºç¬¬ä¸€ç§æ–¹å¼ é€šè¿‡ ç»˜åˆ¶è·¯å¾„path åŠ¨ç”» å…³é”®å¸§åŠ¨ç”»åˆ›å»ºç¬¬äºŒç§æ–¹å¼ ä»£ç ç¤ºä¾‹ï¼š12345678910111213141516171819202122232425// è§’åº¦è½¬å¼§åº¦#define angleToRadian(angle) ((angle) / 180.0 * M_PI)#pragma mark å…³é”®å¸§åŠ¨ç”»values- (void)valuesAnimation &#123; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"]; // 2.è®¾ç½®åŠ¨ç”»å±æ€§å€¼ //NSValue *value1 = [NSValue valueWithCGPoint:&lt;#(CGPoint)#&gt;]; animation.values = @[@(angleToRadian(-5)),@(angleToRadian(5)),@(angleToRadian(-5))]; animation.duration = 1; animation.repeatCount = MAXFLOAT; //animation.keyTimes = @[@(0.0),@(1),@(0.1)]; // å¦‚æœä¸ç”¨åè½¬,ä¹Ÿå¯ä»¥åœ¨valuesé‡Œé¢å†™ //animation.autoreverses = YES; // åŠ¨ç”»ç»“æŸæ—¶çš„çŠ¶æ€ï¼ˆä¸è®¾ç½®å›åˆ°åŸå§‹ä½ç½®ï¼‰ //anim.removedOnCompletion = NO; //anim.fillMode = kCAFillModeForwards; // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» [self.iconImage.layer addAnimation:animation forKey:@"valuesAnimation"];&#125; ä»£ç ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526#pragma mark å…³é”®å¸§åŠ¨ç”»ç¬¬äºŒç§æ–¹å¼- (void)translationAnimation2 &#123; // 1.åˆ›å»ºå…³é”®å¸§åŠ¨ç”»å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ CAKeyframeAnimation *moveAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"]; moveAnimation.duration = 2; // 2.è®¾ç½®å…³é”®å¸§åŠ¨ç”»çš„è¡Œè¿›è·¯å¾„ï¼ˆç»˜åˆ¶è´å¡å°”æ›²çº¿ï¼‰ moveAnimation.path = self.path.CGPath; // 3.æ·»åŠ åŠ¨ç”»åˆ°å›¾å±‚ï¼Œæ·»åŠ åŠ¨ç”»åå°±ä¼šæ‰§è¡ŒåŠ¨ç”» [self.ballView.layer addAnimation:moveAnimation forKey:nil]; // è®¾ç½®æœ€ç»ˆçš„çŠ¶æ€(ä¸è®¾ç½®å°±æ˜¯å›åˆ°åŸå§‹ä½ç½®) self.ballView.layer.position = CGPointMake(330, 200);&#125;// ç»˜åˆ¶è´å¡å°”æ›²çº¿- (void)drawRect:(CGRect)rect &#123; self.path = [[UIBezierPath alloc]init]; [[UIColor redColor] setStroke]; self.path.lineWidth = 5; [self.path moveToPoint:CGPointMake(30, 200)]; [self.path addCurveToPoint:CGPointMake(330, 200) controlPoint1:CGPointMake(100, 50) controlPoint2:CGPointMake(200, 300)]; [self.path stroke];&#125; æ•ˆæœï¼š 4.CAAnimationGroup åŠ¨ç”»ç»„ CAAnimationGroupå±æ€§ æè¿° animations ç”¨æ¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡çš„NSArray CFTimeInterval æ—¶é—´é—´éš” ä»£ç ç¤ºä¾‹ï¼š123456789101112131415161718192021222324252627#pragma mark åŠ¨ç”»ç»„(åŒæ—¶)- (void)groupAnimation1 &#123; // ä½ç§»åŠ¨ç”» CAKeyframeAnimation *animation1 = [CAKeyframeAnimation animationWithKeyPath:@"position"]; NSValue *value0 = [NSValue valueWithCGPoint:CGPointMake(0, kScreenHeight/2-50)]; NSValue *value1 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth/3, kScreenHeight/2-50)]; NSValue *value2 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth/3, kScreenHeight/2+50)]; NSValue *value3 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth*2/3, kScreenHeight/2+50)]; NSValue *value4 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth*2/3, kScreenHeight/2-50)]; NSValue *value5 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth, kScreenHeight/2-50)]; animation1.values = @[value0,value1,value2,value3,value4,value5]; // ç¼©æ”¾åŠ¨ç”» CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform.scale"]; animation2.fromValue = [NSNumber numberWithFloat:0.8f]; animation2.toValue = [NSNumber numberWithFloat:2.0f]; // æ—‹è½¬åŠ¨ç”» CABasicAnimation *animation3 = [CABasicAnimation animationWithKeyPath:@"transform.rotation"]; animation3.toValue = [NSNumber numberWithFloat:M_PI *4]; // åˆ›å»ºåŠ¨ç”»ç»„ CAAnimationGroup *groupAnimation = [CAAnimationGroup animation]; groupAnimation.animations = @[animation1,animation2,animation3]; groupAnimation.duration = 4; [self.redView.layer addAnimation:groupAnimation forKey:@"groupAnimation"];&#125; æ•ˆæœï¼š 5.AnimationWithKeyPathçš„å€¼åœ¨è¿™é‡Œæˆ‘å°±ä¸ç”¨å›¾ç‰‡äº†ï¼Œæˆ‘å°±åŠ³åŠ¨ä¸€ä¸‹å§(å›¾ç‰‡çš„ä¸å¥½å¤åˆ¶ä¸æ˜¯å—)ï¼Œç¦åˆ©å¥‰ä¸Šè½¬åœºæ•ˆæœ key pathsTransform field value key paths Field Key Path Description rotation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,xè½´ã€‚ rotation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,yè½´ã€‚ rotation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚ rotation è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€æ ·è®¾ç½®æ—‹è½¬ã€‚zåŸŸã€‚ scale.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯xè½´çš„æ¯”ä¾‹å› å­ã€‚ scale.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯yè½´çš„æ¯”ä¾‹å› å­ã€‚ scale.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯zè½´çš„æ¯”ä¾‹å› å­ã€‚ scale è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ‰€æœ‰ä¸‰ä¸ªè§„æ¨¡å› ç´ çš„å¹³å‡å€¼ã€‚ translation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ²¿ç€xè½´ã€‚ translation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿yè½´ã€‚ translation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿zè½´ã€‚ translation è®¾ç½®ä¸ºä¸€ä¸ªNSValueå¯¹è±¡åŒ…å«ä¸€ä¸ªNSSizeæˆ–CGSizeæ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹è¡¨ç¤ºå°†åœ¨xå’Œyè½´ã€‚ æ ¸å¿ƒåŠ¨ç”»ç»¼åˆæ¡ˆä¾‹ 5.ç‰©ç†åŠ¨æ•ˆ(é‡åŠ›ã€ç¢°æ’ã€å¸é™„ã€æ¨åŠ›ã€å…³è”)123456ios7ä¹‹åæä¾›çš„ç‰©ç†åŠ¨æ•ˆUIGravityBehavior é‡åŠ›UICollisionBehavior ç¢°æ’UISnapBehavior å¸é™„UIPushBehavior æ¨åŠ›UIAttachmentBehavior å…³è” ä»¥ä¸‹ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ¥ä»£ç ï¼Œçœ‹æ•ˆæœäº†ï¼Œä¸­é—´ä¼šæœ‰éƒ¨åˆ†è§£é‡Šï¼› 1.UICollisionBehaviorç¢°æ’ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿é‡åŠ› + ç¢°æ’ çš„è¡Œä¸º12345678910111213141516171819202122232425262728// å…ˆæŒ‡å®šä¸€ä¸ªå‚è€ƒè§†å›¾æ¥åˆå§‹åŒ–animatorself.animator = [[UIDynamicAnimator alloc] initWithReferenceView:self.view];#pragma mark æ¨¡ä»¿é‡åŠ› å’Œ ç¢°æ’æ•ˆæœ- (void)animations &#123; // æ·»åŠ é‡åŠ› UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.ballView]]; // æ·»åŠ ç¢°æ’ UICollisionBehavior *collision = [[UICollisionBehavior alloc]initWithItems:@[self.ballView]]; // æŠŠå‚è€ƒè§†å›¾çš„è¾¹ç•Œä½œä¸ºæˆ‘çš„ç¢°æ’è¾¹ç•Œ collision.translatesReferenceBoundsIntoBoundary = YES; // æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„è¡Œä¸ºï¼Œä¿®æ”¹åŠ¨æ•ˆå‚æ•° UIDynamicItemBehavior *itemBehavior = [[UIDynamicItemBehavior alloc]initWithItems:@[self.ballView]]; /** å¼¹æ€§ç³»æ•° density 1.0 å¯†åº¦ elasticity 0.0 å¼¹æ€§ friction 0.0 æ‘©æ“¦ resistance 0.0 é˜»åŠ› */ itemBehavior.elasticity = 0.5; // æŠŠé‡åŠ›å’Œç¢°æ’è¡Œä¸ºæ·»åŠ åˆ°åŠ¨ç”»æ‰§è¡Œè€…ä¸­ [self.animator addBehavior:gravity]; [self.animator addBehavior:collision]; [self.animator addBehavior:itemBehavior];&#125; æ•ˆæœï¼š 2.UISnapBehaviorå¸é™„ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿å¸é™„ + é‡åŠ› çš„è¡Œä¸º123456789101112- (void)doAnimation&#123; //[self.animator removeAllBehaviors]; // æ·»åŠ ä¸€ä¸ªå¸é™„è¡Œä¸ºï¼ŒæŒ‡å®šå¸é™„çš„ç‚¹ UISnapBehavior *snap = [[UISnapBehavior alloc]initWithItem:self.ballView snapToPoint:CGPointMake(self.view.frame.size.width *0.5, self.view.frame.size.height - 100)]; // æ·»åŠ ä¸€ä¸ªé‡åŠ›çš„è¡Œä¸º UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.ballView]]; [self.animator addBehavior:snap]; [self.animator addBehavior:gravity];&#125; æ•ˆæœï¼š 3.UIPushBehavioræ¨åŠ›ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿æ¨åŠ› + ç¢°æ’ çš„è¡Œä¸º123456789101112131415161718192021222324252627282930313233#pragma mark æ·»åŠ ç‚¹å‡»æ‰‹åŠ¿- (void)addTapGestrue &#123; UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTapGestrue:)]; [self.ballView addGestureRecognizer:tap];&#125;- (void)handleTapGestrue:(UITapGestureRecognizer*)gesture&#123; // çƒçš„ä¸­å¿ƒç‚¹ CGPoint ballCenter = self.ballView.center; // ç‚¹å‡»ç‚¹ CGPoint tapPoint = [gesture locationInView:self.view]; CGFloat offsetX = tapPoint.x - ballCenter.x; CGFloat offsetY = tapPoint.y - ballCenter.y; CGFloat angle = atan2(offsetY, offsetX); CGFloat distance = sqrt(pow(offsetX, 2) + pow(offsetY, 2)); // æ·»åŠ æ¨åŠ›è¡Œä¸º UIPushBehavior *push = [[UIPushBehavior alloc]initWithItems:@[self.ballView] mode:UIPushBehaviorModeInstantaneous]; // è®¾ç½®è§’åº¦ [push setAngle:angle]; // è®¾ç½®æ¨åŠ›å¤§å° // æ¯1ä¸ªmagnigudeå°†ä¼šå¼•èµ·100/å¹³æ–¹ç§’çš„åŠ é€Ÿåº¦ [push setMagnitude:distance/100]; // æ·»åŠ ç¢°æ’è¡Œä¸º UICollisionBehavior *collision = [[UICollisionBehavior alloc]initWithItems:@[self.ballView]]; collision.translatesReferenceBoundsIntoBoundary = YES; [self.animator addBehavior:push]; [self.animator addBehavior:collision];&#125; æ•ˆæœï¼š 4.UIAttachmentBehaviorå…³è”ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿æ¨åŠ› + ç¢°æ’ çš„è¡Œä¸º123456789- (void)doAnimation&#123; // UIAttachmentBehavior å¯ä»¥è®¾ç½®å’ŒæŸä¸€ä¸ªç‚¹ UIAttachmentBehavior *attachment = [[UIAttachmentBehavior alloc]initWithItem:self.blueView attachedToItem:self.ballView]; // å…³è”çš„é•¿åº¦ [attachment setLength:100]; UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.blueView]]; [self.animator addBehavior:attachment]; [self.animator addBehavior:gravity];&#125; æ•ˆæœï¼š 6.ç²’å­ç³»ç»Ÿ12CAEmitterCellCAEmitterLayer 7.facebook popåŠ¨ç”»123456ä½¿ç”¨ä¹‹å‰å…ˆè®¨è®ºä»¥ä¸‹POPå’Œæ ¸å¿ƒåŠ¨ç”»çš„ä¸»è¦åŒºåˆ«CoreAnimation çš„åŠ¨ç”»æ˜¯åŠ åœ¨layerä¸ŠCoreAnimationçš„åŠ¨ç”»åªæ˜¯è¡¨é¢è€Œå·²ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„ä¿®æ”¹frameç­‰å±æ€§å€¼popçš„åŠ¨ç”»å¯ä»¥æ·»åŠ åˆ°ä»»ä½•å¯¹è±¡popçš„åº•å±‚æ˜¯åŸºäºCADisplaylinkpopçš„åŠ¨ç”»çœŸæ­£çš„ä¿®æ”¹frameç­‰å±æ€§å€¼ popä½¿ç”¨ï¼š1234POPé»˜è®¤æ”¯æŒä¸‰ç§åŠ¨ç”»ï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»POPDecayAnimation å‡é€ŸåŠ¨ç”»POPSpringAnimation å¼¹ç°§æ•ˆæœPOPSpringAnimation é£å…¥æ•ˆæœ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ ¸å¿ƒåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ ¸å¿ƒåŠ¨ç”»â€”ã€ŒCore AnimationåŠ¨ç”»åŸºç¡€æ¡†æ¶ã€]]></title>
    <url>%2FiOSNET%2FCoreAnimation.html</url>
    <content type="text"><![CDATA[Write in the first iOS åŠ¨ç”»ä¸»è¦æ˜¯æŒ‡ Core Animation æ¡†æ¶ã€‚å®˜æ–¹ä½¿ç”¨æ–‡æ¡£åœ°å€ä¸º: Core Animation Guideã€‚ Core Animation æ˜¯iOSå’ŒmacOSå¹³å°ä¸Šè´Ÿè´£å›¾å½¢æ¸²æŸ“ä¸åŠ¨ç”»çš„åŸºç¡€æ¡†æ¶ã€‚Core Animation å¯ä»¥ä½œç”¨ä¸åŠ¨ç”»è§†å›¾æˆ–è€…å…¶ä»–å¯è§†å…ƒç´ ï¼Œä¸ºä½ å®Œæˆäº†åŠ¨ç”»æ‰€éœ€çš„å¤§éƒ¨åˆ†ç»˜å¸§å·¥ä½œã€‚ä½ åªéœ€è¦é…ç½®å°‘é‡çš„åŠ¨ç”»å‚æ•°ï¼ˆå¦‚å¼€å§‹ç‚¹çš„ä½ç½®å’Œç»“æŸç‚¹çš„ä½ç½®ï¼‰å³å¯ä½¿ç”¨ Core Animation çš„åŠ¨ç”»æ•ˆæœã€‚ Core Animation å°†å¤§éƒ¨åˆ†å®é™…çš„ç»˜å›¾ä»»åŠ¡äº¤ç»™äº†å›¾å½¢ç¡¬ä»¶æ¥å¤„ç†ï¼Œå›¾å½¢ç¡¬ä»¶ä¼šåŠ é€Ÿå›¾å½¢æ¸²æŸ“çš„é€Ÿåº¦ã€‚|è¿™ç§è‡ªåŠ¨åŒ–çš„å›¾å½¢åŠ é€ŸæŠ€æœ¯è®©åŠ¨ç”»æ‹¥æœ‰æ›´é«˜çš„å¸§ç‡å¹¶ä¸”æ˜¾ç¤ºæ•ˆæœæ›´åŠ å¹³æ»‘ï¼Œä¸ä¼šåŠ é‡CPUçš„è´Ÿæ‹…è€Œå½±å“ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€iOSåŠ¨ç”» Core Animationã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š ç³»ç»Ÿè‡ªå¸¦çš„ animationImages UIViewä»£ç å—åŠ Block UIView [begin commit]æ¨¡å¼ ä½¿ç”¨CoreAnimationä¸­çš„ç±»1.CATransition è½¬åœºåŠ¨ç”»1.CATransactionåŠ¨ç”»äº‹åŠ¡2.CABasicAnimation åŸºç¡€åŠ¨ç”»2.CASpringAnimation å¼¹ç°§åŠ¨ç”»3.CAKeyframeAnimation å…³é”®å¸§åŠ¨ç”»4.CAAnimationGroup åŠ¨ç”»ç»„5.AnimationWithKeyPathçš„å€¼ ç‰©ç†åŠ¨æ•ˆ(é‡åŠ›ã€ç¢°æ’ã€å¸é™„ã€æ¨åŠ›ã€å…³è”)1.UICollisionBehaviorç¢°æ’2.UISnapBehaviorå¸é™„3.UIPushBehavioræ¨åŠ›4.UIAttachmentBehaviorå…³è” ç²’å­ç³»ç»Ÿ facebook popåŠ¨ç”» iOSåŠ¨ç”»è°ƒç”¨æ–¹å¼1.ç³»ç»Ÿè‡ªå¸¦çš„ animationImages1234UIImageView *imageView;imageView.animationImages = @[image1,image2...];[imageView startAnimating];[imageView stopAnimating]; 2.UIViewä»£ç å—åŠ Block123456789101112131415161718192021222324/** Duration åŠ¨ç”»æŒç»­æ—¶é—´ animations åŠ¨ç”»è¿‡ç¨‹ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt;];// æ‰§è¡ŒåŠ¨ç”» å’Œ åŠ¨ç”»å®Œæˆçš„å›è°ƒ[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];/** delay ç­‰å¾…æ—¶é—´ options åŠ¨ç”»ç±»å‹ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];/** å¼¹æ€§åŠ¨ç”» damping é˜»å°¼ï¼ŒèŒƒå›´0-1ï¼Œé˜»å°¼è¶Šæ¥è¿‘äº0ï¼Œå¼¹æ€§æ•ˆæœè¶Šæ˜æ˜¾ velocity å¼¹æ€§å¤ä½çš„é€Ÿåº¦ */[UIView animateWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; usingSpringWithDamping:&lt;#(CGFloat)#&gt; initialSpringVelocity:&lt;#(CGFloat)#&gt; options:&lt;#(UIViewAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;];// å…³é”®å¸§åŠ¨ç”»[UIView animateKeyframesWithDuration:&lt;#(NSTimeInterval)#&gt; delay:&lt;#(NSTimeInterval)#&gt; options:&lt;#(UIViewKeyframeAnimationOptions)#&gt; animations:&lt;#^(void)animations#&gt; completion:&lt;#^(BOOL finished)completion#&gt;]; 3.UIView [begin commit]æ¨¡å¼123456789101112131415161718192021222324#pragma mark - ä½¿ç”¨UIView [begin,commit]æ¨¡å¼- (void)uiViewAnimation &#123; // å¯ä»¥åµŒå¥—ä½†æ˜¯å¿…é¡»æˆå¯¹å‡ºç° UIViewAnimationTransition type = UIViewAnimationTransitionNone; [UIView beginAnimations:nil context:nil]; // åŠ¨ç”»çš„æŒç»­æ—¶é—´ [UIView setAnimationDuration:1]; // åŠ¨ç”»ç±»å‹ [UIView setAnimationTransition:type forView:_redView cache:YES]; // åŠ¨ç”»ä»£ç† //[UIView setAnimationDelegate:self]; //[UIView setAnimationWillStartSelector:@selector(annimationStart)]; //[UIView setAnimationDidStopSelector:@selector(annimationStop)]; [UIView commitAnimations];&#125;- (void)animationDidStart:(CAAnimation *)anim &#123; NSLog(@"%s, line = %d",__FUNCTION__,__LINE__);&#125;- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag &#123; NSLog(@"%s, line = %d",__FUNCTION__,__LINE__);&#125; 4.ä½¿ç”¨CoreAnimationä¸­çš„ç±» 1.CATransition è½¬åœºåŠ¨ç”» CATransitionå±æ€§ æè¿° type è¿‡æ¸¡çš„ç±»å‹ subType è¿‡æ¸¡çš„æ–¹å‘ startProgress åŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) endProgress åŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) addAnimation: forKey: æŠŠè½¬åœºåŠ¨ç”»æ·»åŠ åˆ°layerä¸Š åˆ›å»ºæ­¥éª¤ 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ 2.è®¾ç½®è½¬åœºç±»å‹ 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» ç¤ºä¾‹ä»£ç ï¼š123456789101112131415#pragma mark - äº¤å‰æ·¡åŒ–è¿‡æ¸¡-(void)fadeAnimation&#123; [self changeShowContens]; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ CATransition *anima = [CATransition animation]; // 2.è®¾ç½®è½¬åœºç±»å‹ anima.type = kCATransitionFade;// è®¾ç½®åŠ¨ç”»çš„ç±»å‹ //anima.type = @"cube";// è®¾ç½®åŠ¨ç”»çš„ç±»å‹ anima.subtype = kCATransitionFromRight; // è®¾ç½®åŠ¨ç”»çš„æ–¹å‘ //anima.startProgress = 0.3;// è®¾ç½®åŠ¨ç”»èµ·ç‚¹ //anima.endProgress = 0.8;// è®¾ç½®åŠ¨ç”»ç»ˆç‚¹ anima.duration = 1.0f;// è®¾ç½®åŠ¨ç”»æ‰§è¡Œæ—¶é•¿ // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» [_imageView.layer addAnimation:anima forKey:@"fadeAnimation"];&#125; æ•ˆæœï¼š 2.CATransitionè½¬åœºåŠ¨ç”»è¿‡æ¸¡ç±»å‹åœ¨è¿™é‡Œæˆ‘å°±ä¸ç”¨å›¾ç‰‡äº†ï¼Œæˆ‘å°±åŠ³åŠ¨ä¸€ä¸‹å§(å›¾ç‰‡çš„ä¸å¥½å¤åˆ¶ä¸æ˜¯å—)ï¼Œå¥‰ä¸Šè½¬åœºæ•ˆæœ api ç±»å‹å­—ç¬¦ä¸² æ•ˆæœè¯´æ˜ å…³é”®å­— æ–¹å‘ fade äº¤å‰æ·¡åŒ–è¿‡æ¸¡ YES push æ–°è§†å›¾æŠŠæ—§è§†å›¾æ¨å‡ºå» YES moveIn æ–°è§†å›¾ç§»åˆ°æ—§è§†å›¾ä¸Šé¢ YES reveal å°†æ—§è§†å›¾ç§»å¼€,æ˜¾ç¤ºä¸‹é¢çš„æ–°è§†å›¾ YES cube ç«‹æ–¹ä½“ç¿»æ»šæ•ˆæœ oglFlip ä¸Šä¸‹å·¦å³ç¿»æ»šæ•ˆæœ suckEffect æ”¶ç¼©æ•ˆæœ,å¦‚ä¸€å—å¸ƒè¢«æŠ½èµ° NO rippleEffect æ°´æ»´æ•ˆæœ NO pageCurl å‘ä¸Šç¿»é¡µæ•ˆæœ pageUnCurl å‘ä¸‹ç¿»é¡µæ•ˆæœ cameraIrisHollowOpen ç›¸æœºé•œå¤´æ‰“å¼€æ•ˆæœ NO cameraIrisHollowClose ç›¸æœºé•œå¤´å…³é—­æ•ˆæœ NO åŠ¨ç”»å¸¸ç”¨å±æ€§ æè¿° rotation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,xè½´ã€‚ duration åŠ¨ç”»çš„æŒç»­æ—¶é—´ beginTime åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ repeatCount åŠ¨ç”»çš„é‡å¤æ¬¡æ•° autoreverses æ‰§è¡Œçš„åŠ¨ç”»æŒ‰ç…§åŸåŠ¨ç”»è¿”å›æ‰§è¡Œ timingFunction æ§åˆ¶åŠ¨ç”»çš„æ˜¾ç¤ºèŠ‚å¥ Linear åŒ€é€Ÿï¼ŒEaseIn å…ˆæ…¢åå¿«ï¼ŒEaseOut å…ˆå¿«åæ…¢ï¼ŒEaseInEaseOut å…ˆæ…¢åå¿«å†æ…¢ï¼ŒDefault é»˜è®¤ä¸­é—´æ¯”è¾ƒå¿« 3.CATransactionåŠ¨ç”»äº‹åŠ¡äº‹åŠ¡(CATransaction)è´Ÿè´£åè°ƒå¤šä¸ªåŠ¨ç”»åŸå­æ›´æ–°çš„æ˜¾ç¤ºæ“ä½œ,æ˜¯åŠ¨ç”»é‡Œé¢çš„ä¸€ä¸ªåŸºæœ¬å•å…ƒï¼ŒåŠ¨ç”»çš„äº§ç”Ÿå¿…ç„¶ä¼´éšç€layerçš„Animatableå±æ€§çš„å˜åŒ–ï¼Œè€Œlayerå±æ€§çš„å˜åŒ–å¿…é¡»å±äºæŸä¸€ä¸ªäº‹åŠ¡ã€‚å› æ­¤ ï¼Œæ ¸å¿ƒåŠ¨ç”»ä¾èµ–äºäº‹åŠ¡ã€‚å¯ä»¥é€šè¿‡äº‹ç‰©å…³é—­éšå¼åŠ¨ç”»:1234567891011121314151617181920212223241ã€äº‹åŠ¡çš„ä½œç”¨ï¼šä¿è¯ä¸€ä¸ªæˆ–å¤šä¸ªlayerçš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å˜åŒ–åŒæ—¶è¿›è¡Œã€‚2ã€äº‹åŠ¡çš„ç§ç±»ï¼šéšå¼å’Œæ˜¾ç¤º3ã€éšå¼ï¼šæ²¡æœ‰æ˜æ˜¾è°ƒç”¨äº‹åŠ¡çš„æ–¹æ³•ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆäº‹åŠ¡ã€‚æ¯”å¦‚ä¸Šé¢æåˆ°çš„è®¾ç½®ä¸€ä¸ªlayerçš„positionå±æ€§ï¼Œåˆ™ä¼šåœ¨å½“å‰çº¿ç¨‹è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªäº‹åŠ¡ï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªrunLoopä¸­è‡ªåŠ¨commit.é€šè¿‡å¦‚ä¸‹æ–¹æ³•å¯ä»¥å…³é—­éšå¼åŠ¨ç”»çš„è®¾ç½®:[CATransaction begin];// å¼€å¯äº‹åŠ¡[CATransaction setDisableActions:YES];// å…³é—­éšå¼åŠ¨ç”»self.myview.layer.position = CGPointMake(10, 10);[CATransaction commit];// æäº¤äº‹åŠ¡4ã€æ˜¾ç¤º:æ˜æ˜¾è°ƒç”¨äº‹åŠ¡çš„æ–¹æ³•[CATransaction begin] å’Œ [CATransaction commit]ï¼Œå¿…é¡»å†™åœ¨ä¸¤è€…ä¹‹é—´.5ã€CAäº‹åŠ¡çš„å¯è®¾ç½®å±æ€§(ä¼šè¦†ç›–éšå¼åŠ¨ç”»çš„è®¾ç½®)animationDurationï¼šåŠ¨ç”»æ—¶é—´animationTimingFunctionï¼šåŠ¨ç”»æ—¶é—´æ›²çº¿disableActionsï¼šæ˜¯å¦å…³é—­åŠ¨ç”»completionBlockï¼šåŠ¨ç”»æ‰§è¡Œå®Œæ¯•çš„å›è°ƒäº‹åŠ¡æ”¯æŒåµŒå¥—ä½¿ç”¨:å½“æœ€å¤–å±‚çš„äº‹åŠ¡commitååŠ¨ç”»æ‰ä¼šå¼€å§‹ã€‚6ã€é€šè¿‡ä¿®æ”¹layerä¸Šçš„å±æ€§äº§ç”Ÿçš„åŠ¨ç”»æ•ˆæœï¼Œç§°ä¹‹ä¸º éšå¼åŠ¨ç”»é€šè¿‡æ‰‹åŠ¨æ·»åŠ åŠ¨ç”»å¯¹è±¡äº§ç”Ÿçš„åŠ¨ç”»ï¼Œç§°ä¹‹ä¸º æ˜¾å¼åŠ¨ç”» 4.CABasicAnimation åŸºç¡€åŠ¨ç”» CABasicAnimationé‡è¦å±æ€§ æè¿° fromValue keyPathå¯¹åº”çš„åˆå§‹å€¼ toValue keyPathå¯¹åº”çš„ç»“æŸå€¼ removedOnCompletion åŠ¨ç”»å®Œæˆæ—¶,æ˜¯å¦åˆ é™¤åŠ¨ç”» fillMode è®¾ç½®è®©åŠ¨ç”»æ•ˆæœæœ€åæ‰§è¡ŒçŠ¶æ€ åŸºç¡€åŠ¨ç”»åˆ›å»ºæ­¥éª¤ 1ã€åˆå§‹åŒ–åŠ¨ç”»å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ 2ã€è®¾ç½®åŠ¨ç”»å±æ€§åˆå§‹å€¼ï¼ˆå¯ä»¥çœç•¥ï¼‰ã€ç»“æŸå€¼ä»¥åŠå…¶ä»–åŠ¨ç”»å±æ€§ 3ã€ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» æˆ‘ä»¬å…ˆçœ‹ä¸‹é¢è¿™ä¸ªç§»åŠ¨åŠ¨ç”»å®ä¾‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243#pragma mark - ä½ç§»åŠ¨ç”»- (void)positionAnimation &#123; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ CABasicAnimation *basicAnimation = [CABasicAnimation animationWithKeyPath:@"position"]; // 2.è®¾ç½®åŠ¨ç”» åˆå§‹å€¼(å¯ä»¥çœç•¥) å’Œ ç»“æŸå€¼ // æŠŠCGPointè½¬æ¢æˆidç±»å‹,ä½¿ç”¨NSValue basicAnimation.fromValue = [NSValue valueWithCGPoint:CGPointMake(50, kScreenHeight/2)]; basicAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth- 50, kScreenHeight/2)]; // è®¾ç½®åŠ¨ç”»çš„å…¶ä»–å±æ€§å€¼ // åŠ¨ç”»æ‰§è¡Œæ—¶é•¿2ç§’ï¼ˆé»˜è®¤0.2s) basicAnimation.duration = 1.0f; // è®¾ç½®é‡å¤æ¬¡æ•°,HUGE_VALFå¯çœ‹åšæ— ç©·å¤§ //basicAnimation.repeatCount = HUGE_VALF; // è®¾ç½®é‡å¤æ—¶é—´ï¼ˆé‡å¤æ—¶é—´ / æ‰§è¡Œæ—¶é•¿ = é‡å¤æ¬¡æ•°) //basicAnimation.repeatDuration = 4; // è®¾ç½®å»¶è¿Ÿæ‰§è¡Œ2ç§’ //basicAnimation.beginTime = CACurrentMediaTime() + 2; // åŠ¨ç”»æ—¶é—´æ›²çº¿ kCAMediaTimingFunctionLinear çº¿æ€§å˜æ¢ å¹³ç¼“ //basicAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]; // è‡ªåŠ¨åè½¬(æ€ä¹ˆå»å°±æ€ä¹ˆå›æ¥) //basicAnimation.autoreverses = YES; // è®¾ç½®åŠ¨ç”»ä»£ç† //basicAnimation.delegate = self; /** å¦‚æœfillMode=kCAFillModeForwardså’ŒremovedOnComletion=NOï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾å±‚ä¼šä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡Œåçš„çŠ¶æ€ã€‚ä½†åœ¨å®è´¨ä¸Šï¼Œå›¾å±‚çš„å±æ€§å€¼è¿˜æ˜¯åŠ¨ç”»æ‰§è¡Œå‰çš„åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¢«æ”¹å˜ã€‚(ä¸è®¾ç½®è¿™ä¸¤ä¸ªå±æ€§å€¼é»˜è®¤å›åˆ°åŸå§‹ä½ç½®) 2016-06-15 13:15:24.350 iOSå¸¸ç”¨åŠ¨ç”»[14625:325800] åŠ¨ç”»å‰X = 137.500000 2016-06-15 13:15:24.350 iOSå¸¸ç”¨åŠ¨ç”»[14625:325800] åŠ¨ç”»åX = 137.500000 */ //basicAnimation.removedOnCompletion = NO;// åŠ¨ç”»å®Œæˆæ—¶,ä¼šè‡ªåŠ¨åˆ é™¤åŠ¨ç”» //basicAnimation.fillMode = kCAFillModeForwards;// è®¾ç½®è®©åŠ¨ç”»æ•ˆæœæœ€åæ‰§è¡ŒçŠ¶æ€ // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”»ï¼ˆæ³¨æ„keyç›¸å½“äºç»™åŠ¨ç”»è¿›è¡Œå‘½åï¼Œä»¥åè·å¾—è¯¥åŠ¨ç”»æ—¶å¯ä»¥ä½¿ç”¨æ­¤åç§°è·å–ï¼‰ [self.redView.layer addAnimation:basicAnimation forKey:@"positionAnimation"]; // ç§»é™¤åŠ¨ç”» //[self.redView.layer removeAnimationForKey:@"positionAnimation"]; //[self.redView.layer removeAllAnimations];&#125; æ•ˆæœï¼š CASpringAnimation å¼¹ç°§åŠ¨ç”» å±æ€§ æè¿° mass è´¨é‡ï¼Œå½±å“å›¾å±‚è¿åŠ¨æ—¶çš„å¼¹ç°§æƒ¯æ€§ï¼Œè´¨é‡è¶Šå¤§ï¼Œå¼¹ç°§æ‹‰ä¼¸å’Œå‹ç¼©çš„å¹…åº¦è¶Šå¤§ stiffnes åˆšåº¦ç³»æ•°(åŠ²åº¦ç³»æ•°/å¼¹æ€§ç³»æ•°)ï¼Œåˆšåº¦ç³»æ•°è¶Šå¤§ï¼Œå½¢å˜äº§ç”Ÿçš„åŠ›å°±è¶Šå¤§ï¼Œè¿åŠ¨è¶Šå¿« damping é˜»å°¼ç³»æ•°ï¼Œé˜»æ­¢å¼¹ç°§ä¼¸ç¼©çš„ç³»æ•°ï¼Œé˜»å°¼ç³»æ•°è¶Šå¤§ï¼Œåœæ­¢è¶Šå¿« initivelocity åˆå§‹é€Ÿç‡ï¼ŒåŠ¨ç”»è§†å›¾çš„åˆå§‹é€Ÿåº¦å¤§å°;é€Ÿç‡ä¸ºæ­£æ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸è¿åŠ¨æ–¹å‘ä¸€è‡´ï¼Œé€Ÿç‡ä¸ºè´Ÿæ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸è¿åŠ¨æ–¹å‘ç›¸å settingDuration ç»“ç®—æ—¶é—´(æ ¹æ®åŠ¨ç”»ç›¸å…³å‚æ•°ä¼°ç®—å¼¹ç°§å¼€å§‹è¿åŠ¨åˆ°åœæ­¢çš„æ—¶é—´ï¼ŒåŠ¨ç”»è®¾ç½®çš„æ—¶é—´æœ€å¥½æ ¹æ®æ­¤æ—¶é—´æ¥è®¾ç½®) CASpringAnimationå’ŒUIViewçš„SpringAnimationå¯¹æ¯”:CASpringAnimation å¯ä»¥è®¾ç½®æ›´å¤šå¼¹ç°§åŠ¨ç”»æ•ˆæœçš„å±æ€§ï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„å¼¹ç°§æ•ˆæœï¼Œå¯ä»¥å’Œå…¶ä»–åŠ¨ç”»ç»„åˆUIViewçš„SpringAnimationå®é™…ä¸Šå°±æ˜¯é€šè¿‡CASpringAnimationæ¥å®ç°çš„ã€‚ ä»£ç ç¤ºä¾‹ï¼š12345678910111213141516171819202122#pragma mark - å¼¹ç°§åŠ¨ç”»- (void)springAnimation &#123; CASpringAnimation * springAnimation = [CASpringAnimation animationWithKeyPath:@"transform.scale"]; // è´¨é‡,è¶Šå¤§å¼¹ç°§å¹…åº¦è¶Šå¤§ springAnimation.mass = 10.0; // å¼¹æ€§ç³»æ•°,è¶Šå¤§è¿åŠ¨è¶Šå¿« springAnimation.stiffness = 500; // é˜»å°¼ç³»æ•°,è¶Šå¤§åœæ­¢è¶Šå¿« springAnimation.damping = 100.0; // åˆå§‹é€Ÿç‡,æ­£æ–¹å‘ç›¸åŒã€è´Ÿæ–¹å‘ç›¸å springAnimation.initialVelocity = 30.f; springAnimation.duration = springAnimation.settlingDuration; springAnimation.toValue = [NSNumber numberWithFloat:1.5]; //springAnimation.removedOnCompletion = NO; //springAnimation.fillMode = kCAFillModeForwards; springAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; [self.redView.layer addAnimation:springAnimation forKey:@"boundsAni"];&#125; æ•ˆæœï¼š 3.CAKeyframeAnimation å…³é”®å¸§åŠ¨ç”»å¯ä»¥è®©æˆ‘ä»¬åœ¨æ›´ç»†çš„ç²’åº¦ä¸Šæ§åˆ¶åŠ¨ç”»çš„è¡Œä¸ºï¼Œå…³é”®å¸§åŠ¨ç”»éœ€è¦æŒ‡å®šå‡ ä¸ªå…³é”®çš„ç‚¹ï¼Œä»è€Œè®©åŠ¨ç”»æ²¿ç€è¿™äº›ç‚¹è¿åŠ¨ï¼Œè¿™å‡ ä¸ªç‚¹å°±ç§°ä¹‹ä¸º å…³é”®å¸§ CAKeyframeAnimationå±æ€§ æè¿° values æŒ‡å®šå…³é”®ç‚¹çš„å€¼ path å¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRef / CGMutablePathRefï¼Œè®©å±‚è·Ÿç€è·¯å¾„ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚å¦‚æœä½ è®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥. keyTimes æ˜¯èµ°åˆ°æŸä¸€ä¸ªå…³é”®ç‚¹èŠ±è´¹çš„æ—¶é—´ç™¾åˆ†æ¯”(0ï½1)ï¼ŒkeyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§(ä¸¤ä¸ªæ•°ç»„çš„ä¸ªæ•°å¿…é¡»ä¸€è‡´)ï¼Œå½“keyTimesæ²¡æœ‰è®¾ç½®çš„æ—¶å€™,å„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ã€‚ é€šè¿‡ è®¾ç½®ä¸åŒçš„å±æ€§å€¼values åŠ¨ç”» å…³é”®å¸§åŠ¨ç”»åˆ›å»ºç¬¬ä¸€ç§æ–¹å¼ é€šè¿‡ ç»˜åˆ¶è·¯å¾„path åŠ¨ç”» å…³é”®å¸§åŠ¨ç”»åˆ›å»ºç¬¬äºŒç§æ–¹å¼ ä»£ç ç¤ºä¾‹ï¼š12345678910111213141516171819202122232425// è§’åº¦è½¬å¼§åº¦#define angleToRadian(angle) ((angle) / 180.0 * M_PI)#pragma mark å…³é”®å¸§åŠ¨ç”»values- (void)valuesAnimation &#123; // 1.åˆ›å»ºåŠ¨ç”»å¯¹è±¡ CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation"]; // 2.è®¾ç½®åŠ¨ç”»å±æ€§å€¼ //NSValue *value1 = [NSValue valueWithCGPoint:&lt;#(CGPoint)#&gt;]; animation.values = @[@(angleToRadian(-5)),@(angleToRadian(5)),@(angleToRadian(-5))]; animation.duration = 1; animation.repeatCount = MAXFLOAT; //animation.keyTimes = @[@(0.0),@(1),@(0.1)]; // å¦‚æœä¸ç”¨åè½¬,ä¹Ÿå¯ä»¥åœ¨valuesé‡Œé¢å†™ //animation.autoreverses = YES; // åŠ¨ç”»ç»“æŸæ—¶çš„çŠ¶æ€ï¼ˆä¸è®¾ç½®å›åˆ°åŸå§‹ä½ç½®ï¼‰ //anim.removedOnCompletion = NO; //anim.fillMode = kCAFillModeForwards; // 3.ç»™å›¾å±‚æ·»åŠ åŠ¨ç”» [self.iconImage.layer addAnimation:animation forKey:@"valuesAnimation"];&#125; ä»£ç ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526#pragma mark å…³é”®å¸§åŠ¨ç”»ç¬¬äºŒç§æ–¹å¼- (void)translationAnimation2 &#123; // 1.åˆ›å»ºå…³é”®å¸§åŠ¨ç”»å¹¶è®¾ç½®åŠ¨ç”»å±æ€§ CAKeyframeAnimation *moveAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"]; moveAnimation.duration = 2; // 2.è®¾ç½®å…³é”®å¸§åŠ¨ç”»çš„è¡Œè¿›è·¯å¾„ï¼ˆç»˜åˆ¶è´å¡å°”æ›²çº¿ï¼‰ moveAnimation.path = self.path.CGPath; // 3.æ·»åŠ åŠ¨ç”»åˆ°å›¾å±‚ï¼Œæ·»åŠ åŠ¨ç”»åå°±ä¼šæ‰§è¡ŒåŠ¨ç”» [self.ballView.layer addAnimation:moveAnimation forKey:nil]; // è®¾ç½®æœ€ç»ˆçš„çŠ¶æ€(ä¸è®¾ç½®å°±æ˜¯å›åˆ°åŸå§‹ä½ç½®) self.ballView.layer.position = CGPointMake(330, 200);&#125;// ç»˜åˆ¶è´å¡å°”æ›²çº¿- (void)drawRect:(CGRect)rect &#123; self.path = [[UIBezierPath alloc]init]; [[UIColor redColor] setStroke]; self.path.lineWidth = 5; [self.path moveToPoint:CGPointMake(30, 200)]; [self.path addCurveToPoint:CGPointMake(330, 200) controlPoint1:CGPointMake(100, 50) controlPoint2:CGPointMake(200, 300)]; [self.path stroke];&#125; æ•ˆæœï¼š 4.CAAnimationGroup åŠ¨ç”»ç»„ CAAnimationGroupå±æ€§ æè¿° animations ç”¨æ¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡çš„NSArray CFTimeInterval æ—¶é—´é—´éš” ä»£ç ç¤ºä¾‹ï¼š123456789101112131415161718192021222324252627#pragma mark åŠ¨ç”»ç»„(åŒæ—¶)- (void)groupAnimation1 &#123; // ä½ç§»åŠ¨ç”» CAKeyframeAnimation *animation1 = [CAKeyframeAnimation animationWithKeyPath:@"position"]; NSValue *value0 = [NSValue valueWithCGPoint:CGPointMake(0, kScreenHeight/2-50)]; NSValue *value1 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth/3, kScreenHeight/2-50)]; NSValue *value2 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth/3, kScreenHeight/2+50)]; NSValue *value3 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth*2/3, kScreenHeight/2+50)]; NSValue *value4 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth*2/3, kScreenHeight/2-50)]; NSValue *value5 = [NSValue valueWithCGPoint:CGPointMake(kScreenWidth, kScreenHeight/2-50)]; animation1.values = @[value0,value1,value2,value3,value4,value5]; // ç¼©æ”¾åŠ¨ç”» CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"transform.scale"]; animation2.fromValue = [NSNumber numberWithFloat:0.8f]; animation2.toValue = [NSNumber numberWithFloat:2.0f]; // æ—‹è½¬åŠ¨ç”» CABasicAnimation *animation3 = [CABasicAnimation animationWithKeyPath:@"transform.rotation"]; animation3.toValue = [NSNumber numberWithFloat:M_PI *4]; // åˆ›å»ºåŠ¨ç”»ç»„ CAAnimationGroup *groupAnimation = [CAAnimationGroup animation]; groupAnimation.animations = @[animation1,animation2,animation3]; groupAnimation.duration = 4; [self.redView.layer addAnimation:groupAnimation forKey:@"groupAnimation"];&#125; æ•ˆæœï¼š 5.AnimationWithKeyPathçš„å€¼åœ¨è¿™é‡Œæˆ‘å°±ä¸ç”¨å›¾ç‰‡äº†ï¼Œæˆ‘å°±åŠ³åŠ¨ä¸€ä¸‹å§(å›¾ç‰‡çš„ä¸å¥½å¤åˆ¶ä¸æ˜¯å—)ï¼Œç¦åˆ©å¥‰ä¸Šè½¬åœºæ•ˆæœ key pathsTransform field value key paths Field Key Path Description rotation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,xè½´ã€‚ rotation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,yè½´ã€‚ rotation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚ rotation è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ—‹è½¬,å¼§åº¦,zè½´ã€‚è¿™ä¸ªå­—æ®µæ˜¯ä¸€æ ·è®¾ç½®æ—‹è½¬ã€‚zåŸŸã€‚ scale.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯xè½´çš„æ¯”ä¾‹å› å­ã€‚ scale.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯yè½´çš„æ¯”ä¾‹å› å­ã€‚ scale.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯zè½´çš„æ¯”ä¾‹å› å­ã€‚ scale è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ‰€æœ‰ä¸‰ä¸ªè§„æ¨¡å› ç´ çš„å¹³å‡å€¼ã€‚ translation.x è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ˜¯æ²¿ç€xè½´ã€‚ translation.y è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿yè½´ã€‚ translation.z è®¾ç½®ä¸ºä¸€ä¸ªNSNumberå¯¹è±¡çš„å€¼æ²¿zè½´ã€‚ translation è®¾ç½®ä¸ºä¸€ä¸ªNSValueå¯¹è±¡åŒ…å«ä¸€ä¸ªNSSizeæˆ–CGSizeæ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹è¡¨ç¤ºå°†åœ¨xå’Œyè½´ã€‚ æ ¸å¿ƒåŠ¨ç”»ç»¼åˆæ¡ˆä¾‹ 5.ç‰©ç†åŠ¨æ•ˆ(é‡åŠ›ã€ç¢°æ’ã€å¸é™„ã€æ¨åŠ›ã€å…³è”)123456ios7ä¹‹åæä¾›çš„ç‰©ç†åŠ¨æ•ˆUIGravityBehavior é‡åŠ›UICollisionBehavior ç¢°æ’UISnapBehavior å¸é™„UIPushBehavior æ¨åŠ›UIAttachmentBehavior å…³è” ä»¥ä¸‹ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ¥ä»£ç ï¼Œçœ‹æ•ˆæœäº†ï¼Œä¸­é—´ä¼šæœ‰éƒ¨åˆ†è§£é‡Šï¼› 1.UICollisionBehaviorç¢°æ’ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿é‡åŠ› + ç¢°æ’ çš„è¡Œä¸º12345678910111213141516171819202122232425262728// å…ˆæŒ‡å®šä¸€ä¸ªå‚è€ƒè§†å›¾æ¥åˆå§‹åŒ–animatorself.animator = [[UIDynamicAnimator alloc] initWithReferenceView:self.view];#pragma mark æ¨¡ä»¿é‡åŠ› å’Œ ç¢°æ’æ•ˆæœ- (void)animations &#123; // æ·»åŠ é‡åŠ› UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.ballView]]; // æ·»åŠ ç¢°æ’ UICollisionBehavior *collision = [[UICollisionBehavior alloc]initWithItems:@[self.ballView]]; // æŠŠå‚è€ƒè§†å›¾çš„è¾¹ç•Œä½œä¸ºæˆ‘çš„ç¢°æ’è¾¹ç•Œ collision.translatesReferenceBoundsIntoBoundary = YES; // æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰çš„è¡Œä¸ºï¼Œä¿®æ”¹åŠ¨æ•ˆå‚æ•° UIDynamicItemBehavior *itemBehavior = [[UIDynamicItemBehavior alloc]initWithItems:@[self.ballView]]; /** å¼¹æ€§ç³»æ•° density 1.0 å¯†åº¦ elasticity 0.0 å¼¹æ€§ friction 0.0 æ‘©æ“¦ resistance 0.0 é˜»åŠ› */ itemBehavior.elasticity = 0.5; // æŠŠé‡åŠ›å’Œç¢°æ’è¡Œä¸ºæ·»åŠ åˆ°åŠ¨ç”»æ‰§è¡Œè€…ä¸­ [self.animator addBehavior:gravity]; [self.animator addBehavior:collision]; [self.animator addBehavior:itemBehavior];&#125; æ•ˆæœï¼š 2.UISnapBehaviorå¸é™„ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿å¸é™„ + é‡åŠ› çš„è¡Œä¸º123456789101112- (void)doAnimation&#123; //[self.animator removeAllBehaviors]; // æ·»åŠ ä¸€ä¸ªå¸é™„è¡Œä¸ºï¼ŒæŒ‡å®šå¸é™„çš„ç‚¹ UISnapBehavior *snap = [[UISnapBehavior alloc]initWithItem:self.ballView snapToPoint:CGPointMake(self.view.frame.size.width *0.5, self.view.frame.size.height - 100)]; // æ·»åŠ ä¸€ä¸ªé‡åŠ›çš„è¡Œä¸º UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.ballView]]; [self.animator addBehavior:snap]; [self.animator addBehavior:gravity];&#125; æ•ˆæœï¼š 3.UIPushBehavioræ¨åŠ›ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿æ¨åŠ› + ç¢°æ’ çš„è¡Œä¸º123456789101112131415161718192021222324252627282930313233#pragma mark æ·»åŠ ç‚¹å‡»æ‰‹åŠ¿- (void)addTapGestrue &#123; UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTapGestrue:)]; [self.ballView addGestureRecognizer:tap];&#125;- (void)handleTapGestrue:(UITapGestureRecognizer*)gesture&#123; // çƒçš„ä¸­å¿ƒç‚¹ CGPoint ballCenter = self.ballView.center; // ç‚¹å‡»ç‚¹ CGPoint tapPoint = [gesture locationInView:self.view]; CGFloat offsetX = tapPoint.x - ballCenter.x; CGFloat offsetY = tapPoint.y - ballCenter.y; CGFloat angle = atan2(offsetY, offsetX); CGFloat distance = sqrt(pow(offsetX, 2) + pow(offsetY, 2)); // æ·»åŠ æ¨åŠ›è¡Œä¸º UIPushBehavior *push = [[UIPushBehavior alloc]initWithItems:@[self.ballView] mode:UIPushBehaviorModeInstantaneous]; // è®¾ç½®è§’åº¦ [push setAngle:angle]; // è®¾ç½®æ¨åŠ›å¤§å° // æ¯1ä¸ªmagnigudeå°†ä¼šå¼•èµ·100/å¹³æ–¹ç§’çš„åŠ é€Ÿåº¦ [push setMagnitude:distance/100]; // æ·»åŠ ç¢°æ’è¡Œä¸º UICollisionBehavior *collision = [[UICollisionBehavior alloc]initWithItems:@[self.ballView]]; collision.translatesReferenceBoundsIntoBoundary = YES; [self.animator addBehavior:push]; [self.animator addBehavior:collision];&#125; æ•ˆæœï¼š 4.UIAttachmentBehaviorå…³è”ï¼Œç¤ºä¾‹ï¼šæ¨¡ä»¿æ¨åŠ› + ç¢°æ’ çš„è¡Œä¸º123456789- (void)doAnimation&#123; // UIAttachmentBehavior å¯ä»¥è®¾ç½®å’ŒæŸä¸€ä¸ªç‚¹ UIAttachmentBehavior *attachment = [[UIAttachmentBehavior alloc]initWithItem:self.blueView attachedToItem:self.ballView]; // å…³è”çš„é•¿åº¦ [attachment setLength:100]; UIGravityBehavior *gravity = [[UIGravityBehavior alloc]initWithItems:@[self.blueView]]; [self.animator addBehavior:attachment]; [self.animator addBehavior:gravity];&#125; æ•ˆæœï¼š 6.ç²’å­ç³»ç»Ÿ12CAEmitterCellCAEmitterLayer 7.facebook popåŠ¨ç”»123456ä½¿ç”¨ä¹‹å‰å…ˆè®¨è®ºä»¥ä¸‹POPå’Œæ ¸å¿ƒåŠ¨ç”»çš„ä¸»è¦åŒºåˆ«CoreAnimation çš„åŠ¨ç”»æ˜¯åŠ åœ¨layerä¸ŠCoreAnimationçš„åŠ¨ç”»åªæ˜¯è¡¨é¢è€Œå·²ï¼Œå¹¶æ²¡æœ‰çœŸæ­£çš„ä¿®æ”¹frameç­‰å±æ€§å€¼popçš„åŠ¨ç”»å¯ä»¥æ·»åŠ åˆ°ä»»ä½•å¯¹è±¡popçš„åº•å±‚æ˜¯åŸºäºCADisplaylinkpopçš„åŠ¨ç”»çœŸæ­£çš„ä¿®æ”¹frameç­‰å±æ€§å€¼ popä½¿ç”¨ï¼š1234POPé»˜è®¤æ”¯æŒä¸‰ç§åŠ¨ç”»ï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»POPDecayAnimation å‡é€ŸåŠ¨ç”»POPSpringAnimation å¼¹ç°§æ•ˆæœPOPSpringAnimation é£å…¥æ•ˆæœ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ ¸å¿ƒåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¼ç çŒ¿è‡ªæ£€â€”ã€ŒMasonryçº¦æŸã€]]></title>
    <url>%2FToolsAndPlugins%2FMasonry.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€Masonry ä½¿ç”¨ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š Masonryç®€æ˜ä»‹ç» å¯¼å…¥Masonryæ¡†æ¶ Masonry å¸¸ç”¨API &amp; ç‰¹æ€§1.åŸºç¡€API2.4ç§è®¾ç½®å¸¸é‡çš„æ–¹æ³•3.ç®€åŒ–å‰ç¼€çš„å®å®šä¹‰ &amp; ç®€å†™4.æ›´æ–°çº¦æŸå’Œå¸ƒå±€ Masonryå¸¸ç”¨æ–¹æ³•1.åŸºæœ¬ä½¿ç”¨ï¼šè®¾ç½®å†…è¾¹è·2.ç®€å•åŠ¨ç”»ï¼špriorityä¼˜å…ˆçº§3.æ›´æ–°çº¦æŸ mas_updateConstraints4.é‡å†™çº¦æŸ mas_remakeConstraints5.æ¯”ä¾‹ä½¿ç”¨ multipliedBy6.å¤§äºç­‰äºå’Œå°äºç­‰äºæŸä¸ªå€¼çš„çº¦æŸ Demoå°æ · é‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç° Star åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@jianshu - ç™½å¼€æ°´lnã€‚ Masonryç®€æ˜ä»‹ç» Masonryæ˜¯ä¸€ä¸ªè½»é‡çº§çš„å¸ƒå±€æ¡†æ¶ï¼Œé€‚ç”¨äºiOSä»¥åŠOS Xã€‚å®ƒç”¨ç®€æ´çš„è¯­æ³•å¯¹å®˜æ–¹çš„AutoLayoutè¿›è¡Œäº†å°è£…ã€‚ Masonryæœ‰å®ƒè‡ªå·±çš„ä¸€å¥—æ¡†æ¶ç”¨æ¥æè¿°NSLayoutConstraintså¸ƒå±€çš„DSLï¼Œæé«˜äº†çº¦æŸä»£ç çš„ç®€æ´æ€§ä¸å¯è¯»æ€§ã€‚ å¯¼å…¥Masonryæ¡†æ¶ ä½¿ç”¨Cocoapodsæ¥å¯¼å…¥æ¡†æ¶ï¼Œåœ¨ä½¿ç”¨åˆ°è¯¥æ¡†æ¶çš„æ–‡ä»¶ä¸­æ·»åŠ ä¸»å¤´æ–‡ä»¶ï¼š#import &lt;Masonry/Masonry.h&gt;ã€‚ ä½¿ç”¨ç›´æ¥æ‹–æ‹½çš„æ–¹å¼æ‹‰å…¥æ¡†æ¶æ–‡ä»¶å¤¹ï¼Œåœ¨ä½¿ç”¨åˆ°è¯¥æ¡†æ¶çš„æ–‡ä»¶ä¸­æ·»åŠ ä¸»å¤´æ–‡ä»¶ï¼š#import &quot;Masonry.h&quot;ã€‚ Masonry å¸¸ç”¨API &amp; ç‰¹æ€§ åŸºç¡€API123456789mas_makeConstraints() æ·»åŠ çº¦æŸmas_remakeConstraints() ç§»é™¤ä¹‹å‰çš„çº¦æŸï¼Œé‡æ–°æ·»åŠ æ–°çš„çº¦æŸmas_updateConstraints() æ›´æ–°çº¦æŸequalTo() å‚æ•°æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¸€èˆ¬æ˜¯è§†å›¾å¯¹è±¡æˆ–è€…mas_widthè¿™æ ·çš„åæ ‡ç³»å¯¹è±¡mas_equalTo() å’Œä¸Šé¢åŠŸèƒ½ç›¸åŒï¼Œå‚æ•°å¯ä»¥ä¼ é€’åŸºç¡€æ•°æ®ç±»å‹å¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯”ä¸Šé¢çš„APIæ›´å¼ºå¤§width() ç”¨æ¥è¡¨ç¤ºå®½åº¦ï¼Œä¾‹å¦‚ä»£è¡¨viewçš„å®½åº¦mas_width() ç”¨æ¥è·å–å®½åº¦çš„å€¼ã€‚å’Œä¸Šé¢çš„åŒºåˆ«åœ¨äºï¼Œä¸€ä¸ªä»£è¡¨æŸä¸ªåæ ‡ç³»å¯¹è±¡ï¼Œä¸€ä¸ªç”¨æ¥è·å–åæ ‡ç³»å¯¹è±¡çš„å€¼ Constantï¼šMasonryæä¾›äº†4ç§è®¾ç½®constantçš„æ–¹æ³•1234567- (MASConstraint * (^)(MASEdgeInsets insets))insets;- (MASConstraint * (^)(CGSize offset))sizeOffset;- (MASConstraint * (^)(CGPoint offset))centerOffset;- (MASConstraint * (^)(CGFloat offset))offset; æ³¨è§£ï¼š insets: ç”¨æ¥è®¾ç½®left, right, top, bottomã€‚æ¥å—MASEdgeInsetsç±»å‹å€¼ sizeOffset: ç”¨æ¥è®¾ç½®width, heightã€‚æ¥å—CGSizeç±»å‹çš„å€¼ centerOffset: ç”¨æ¥è®¾ç½®centerX, centerYã€‚æ¥å—CGPointç±»å‹çš„å€¼ offset: å¯ä»¥ç”¨æ¥è®¾ç½®æ‰€æœ‰çš„ä¸œè¥¿ã€‚æ¥å—CGFloatç±»å‹çš„å€¼ ç®€åŒ–å‰ç¼€çš„å®å®šä¹‰ &amp; ç®€å†™1234// å®šä¹‰è¿™ä¸ªå¸¸é‡ï¼Œå°±å¯ä»¥ä¸ç”¨åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨"mas_"å‰ç¼€ã€‚#define MAS_SHORTHAND// å®šä¹‰è¿™ä¸ªå¸¸é‡ï¼Œå°±å¯ä»¥è®©Masonryå¸®æˆ‘ä»¬è‡ªåŠ¨æŠŠåŸºç¡€æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œè‡ªåŠ¨è£…ç®±ä¸ºå¯¹è±¡ç±»å‹ã€‚#define MAS_SHORTHAND_GLOBALS æ³¨è§£ï¼šè¿™ä¸¤ä¸ªå®å¦‚æœæƒ³æœ‰æ•ˆä½¿ç”¨ï¼Œå¿…é¡»è¦åœ¨æ·»åŠ Masonryå¤´æ–‡ä»¶ä¹‹å‰å¯¼å…¥è¿›å»ã€‚ 1234567891011121314// å®Œæ•´çš„make.left.equalTo(view1.superview.mas_left).offset(0);//çœç•¥Attributeçš„make.left.equalTo(view1.superview).offset(0);//çœç•¥equalToçš„make.left.offset(0);//ä½¿ç”¨equalToæ›¿ä»£offsetçš„make.left.equalTo(@0);//çœç•¥æ‰€æœ‰çš„... å¯æƒœä¼šæœ‰warningmake.left; æ›´æ–°çº¦æŸå’Œå¸ƒå±€ å¯¹äºçº¦æŸçš„è®¾ç½®ï¼ŒMasonryæä¾›äº†3ç§æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºè®¾ç½®çº¦æŸã€æ›´æ–°çº¦æŸã€é‡å†™è®¾ç½®çº¦æŸ 123456789101112131415161718// è®¾ç½®çº¦æŸ - (NSArray *)mas_makeConstraints:(void(^)(MASConstraintMaker *make))block;// æ›´æ–°çº¦æŸ- (NSArray *)mas_updateConstraints:(void(^)(MASConstraintMaker *make))block;// é‡æ–°è®¾ç½®çº¦æŸ- (NSArray *)mas_remakeConstraints:(void(^)(MASConstraintMaker *make))block;æ³¨è§£ï¼šmas_makeConstraints: åˆæ¬¡è®¾ç½®çº¦æŸä½¿ç”¨ã€‚mas_updateConstraints: æ›´æ–°çº¦æŸæ—¶ä½¿ç”¨ã€‚å¦‚æœæ‰¾ä¸ç€è¿™æ¡çº¦æŸï¼Œä¼šæ–°å¢ï¼Œç›¸å½“äºmas_makeConstraintsã€‚mas_remakeConstraints: é‡æ–°è®¾ç½®çº¦æŸã€‚å…ˆå°†viewä¸Šæ‰€æœ‰çº¦æŸç§»é™¤ï¼Œå†æ–°å¢çº¦æŸæ³¨æ„ï¼šmas_updateConstraintsåªèƒ½æ›´æ–°å·²æœ‰çº¦æŸã€‚å¦‚æœç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ˜¯left, rightè®¾ç½®çš„ç›¸å¯¹å®½åº¦ã€‚æ›´æ–°çš„æ—¶å€™æƒ³æ¢æˆä½¿ç”¨widthã€‚ä¸èƒ½ä½¿ç”¨mas_updateConstraintsï¼Œå› ä¸ºå·²æœ‰çº¦æŸé‡Œé¢æ²¡æœ‰widthçš„çº¦æŸï¼Œæ–°å¢widthä¹‹åä¼šè·ŸåŸæœ‰left, rightçº¦æŸå†²çªã€‚æ­¤æ—¶åº”è¯¥ä½¿ç”¨mas_remakeConstraints å…³äºæ›´æ–°çº¦æŸå¸ƒå±€ç›¸å…³çš„APIï¼Œä¸»è¦ç”¨ä»¥ä¸‹å››ä¸ªAPIï¼š - (void)updateConstraintsIfNeeded è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¦‚æœæœ‰æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€çš„çº¦æŸï¼Œåˆ™ç«‹å³è¿›è¡Œé‡æ–°å¸ƒå±€ï¼Œå†…éƒ¨ä¼šè°ƒç”¨updateConstraintsæ–¹æ³•ã€‚ - (void)updateConstraints é‡å†™æ­¤æ–¹æ³•ï¼Œå†…éƒ¨å®ç°è‡ªå®šä¹‰å¸ƒå±€è¿‡ç¨‹ã€‚ - (BOOL)needsUpdateConstraints å½“å‰æ˜¯å¦éœ€è¦é‡æ–°å¸ƒå±€ï¼Œå†…éƒ¨ä¼šåˆ¤æ–­å½“å‰æœ‰æ²¡æœ‰è¢«æ ‡è®°çš„çº¦æŸã€‚ - (void)setNeedsUpdateConstraints æ ‡è®°éœ€è¦è¿›è¡Œé‡æ–°å¸ƒå±€ã€‚ å…³äºUIViewé‡æ–°å¸ƒå±€ç›¸å…³çš„APIï¼Œä¸»è¦ç”¨ä»¥ä¸‹ä¸‰ä¸ªAPIï¼š - (void)setNeedsLayout æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ã€‚ - (void)layoutIfNeeded æŸ¥çœ‹å½“å‰è§†å›¾æ˜¯å¦è¢«æ ‡è®°éœ€è¦é‡æ–°å¸ƒå±€ï¼Œæœ‰åˆ™åœ¨å†…éƒ¨è°ƒç”¨layoutSubviewsæ–¹æ³•è¿›è¡Œé‡æ–°å¸ƒå±€ã€‚ - (void)layoutSubviews é‡å†™å½“å‰æ–¹æ³•ï¼Œåœ¨å†…éƒ¨å®Œæˆé‡æ–°å¸ƒå±€æ“ä½œã€‚ Masonryç»™æˆ‘ä»¬æä¾›äº†4ä¸ªè®¾ç½®ä¼˜å…ˆçº§æ¥å£ 1234567891011// å¯ä»¥è®¾ç½®ä»»æ„çš„ä¼˜å…ˆçº§ï¼Œæ¥å—çš„å‚æ•°æ˜¯0-1000çš„æ•°å­—- (MASConstraint * (^)(MASLayoutPriority priority))priority; // è®¾ç½®ä½ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ä¸º250- (MASConstraint * (^)())priorityLow; // è®¾ç½®ä¸­ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ä¸º500- (MASConstraint * (^)())priorityMedium; // è®¾ç½®é«˜ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§ä¸º750- (MASConstraint * (^)())priorityHigh; Masonryå¸¸ç”¨æ–¹æ³• åŸºæœ¬ä½¿ç”¨ï¼šè®¾ç½®å†…è¾¹è·æ•ˆæœå›¾å¾€ä¸‹çœ‹ï¼šåˆ›å»ºä¸€ä¸ªViewï¼Œå·¦å³ä¸Šä¸‹ç©ºå‡º10ä¸ªåƒç´  123456789101112[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.view.mas_top).with.offset(150); make.left.equalTo(self.view.mas_left).with.offset(30); make.bottom.equalTo(self.view.mas_bottom).with.offset(30); make.right.equalTo(self.view.mas_right).with.offset(30);&#125;];//ã€é€šè¿‡insetsç®€åŒ–è®¾ç½®å†…è¾¹è·çš„æ–¹å¼ã€‘ï¼Œä¸€å¥ä»£ç ä»£æ›¿ä¸Šé¢çš„å¤šè¡Œ[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.edges.equalTo(self.view).with.insets(UIEdgeInsetsMake(150, 30, 30, 30));&#125;]; ç®€å•åŠ¨ç”»ï¼špriorityä¼˜å…ˆçº§æ•ˆæœå›¾å¾€ä¸‹çœ‹ï¼šä¼˜å…ˆçº§çº¦æŸä¸€èˆ¬æ”¾åœ¨ä¸€ä¸ªæ§ä»¶çº¦æŸçš„æœ€åé¢ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950- (void)testView2 &#123; // çº¢è‰²View UIView *redView = [[UIView alloc]init]; redView.backgroundColor = [UIColor redColor]; [self.view addSubview:redView]; // è“è‰²View self.blueView = [[UIView alloc]init]; self.blueView.backgroundColor = [UIColor blueColor]; [self.view addSubview:self.blueView]; // é»„è‰²View UIView *yellowView = [[UIView alloc]init]; yellowView.backgroundColor = [UIColor yellowColor]; [self.view addSubview:yellowView]; // ---çº¢è‰²View--- æ·»åŠ çº¦æŸ [redView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.equalTo(self.view.mas_left).with.offset(20); make.bottom.equalTo(self.view.mas_bottom).with.offset(-80); make.height.equalTo([NSNumber numberWithInt:50]); &#125;]; // ---è“è‰²View--- æ·»åŠ çº¦æŸ [self.blueView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.mas_equalTo(redView.mas_right).with.offset(40); make.bottom.width.height.mas_equalTo(redView); &#125;]; // ---é»„è‰²View--- æ·»åŠ çº¦æŸ [yellowView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.mas_equalTo(self.blueView.mas_right).with.offset(40); make.right.mas_equalTo(self.view.mas_right).with.offset(-20); make.bottom.width.height.mas_equalTo(redView); // ã€ä¼˜å…ˆçº§è®¾ç½®ä¸º250ï¼Œæœ€é«˜1000ï¼ˆé»˜è®¤)ã€‘ make.left.mas_equalTo(redView.mas_right).with.offset(100).priority(250); &#125;]; NSLog(@"%@",redView);&#125;// ç‚¹å‡»å±å¹•ç§»é™¤è“è‰²View- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; [self.blueView removeFromSuperview]; [UIView animateWithDuration:1.0 animations:^&#123; [self.view layoutIfNeeded]; &#125;];&#125; æ³¨è§£ï¼š è¿™é‡Œçš„ä¸‰ä¸ªViewçš„å®½åº¦æ˜¯æ ¹æ®çº¦æŸè‡ªåŠ¨æ¨æ–­è®¾ç½®çš„ï¼Œå¯¹é»„è‰²çš„Viewè®¾ç½®äº†ä¸€ä¸ªä¸çº¢è‰²Viewæœ‰å…³çš„priority(250)çš„ä¼˜å…ˆçº§ï¼Œ å®ƒåŒæ—¶æœ‰å¯¹è“è‰²Viewæœ‰ä¸ªæœ€é«˜çš„ä¼˜å…ˆçº§çº¦æŸï¼ˆmake.left.mas_equalTo(self.blueView.mas_right).with.offset(40);ï¼‰ã€‚ å½“ç‚¹å‡»å±å¹•æ˜¯ï¼Œæˆ‘å°†è“è‰²Viewç§»é™¤ï¼Œæ­¤æ—¶ç¬¬äºŒä¼˜å…ˆçº§å°±æ˜¯ç”Ÿæ•ˆã€‚ æ›´æ–°çº¦æŸ mas_updateConstraintsæ•ˆæœå›¾å¾€ä¸‹çœ‹ï¼šåˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œçº¦æŸå¥½å®ƒçš„ä½ç½®ï¼ˆå±…ä¸­ï¼Œå®½é«˜ç­‰äº100ä¸”å°äºå±å¹•å®½é«˜å€¼ï¼‰ã€‚æ¯æ¬¡ç‚¹å‡»ä¸€æ¬¡è¿™ä¸ªæŒ‰é’®ï¼Œå…¶å®½é«˜å°†å¢å¤§ä¸€å®šçš„å€æ•°ï¼Œæœ€ç»ˆå…¶å®½é«˜ç­‰äºå±å¹•å®½é«˜æ—¶å°†ä¸å†å˜åŒ–ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344- (void)testView3 &#123; self.growingButton = [UIButton buttonWithType:UIButtonTypeSystem]; [self setWithButton:self.growingButton title:@"mas_updateConstraintsæ›´æ–°çº¦æŸ-ç‚¹æˆ‘æ”¾å¤§"]; [self.growingButton addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:self.growingButton]; self.scacle = 1.0; [self.growingButton mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.center.mas_equalTo(self.view); // åˆå§‹å®½ã€é«˜ä¸º100ï¼Œä¼˜å…ˆçº§æœ€ä½ make.width.height.mas_equalTo(100 * self.scacle); // æœ€å¤§æ”¾å¤§åˆ°æ•´ä¸ªview + make.width.height.lessThanOrEqualTo(self.view); &#125;];&#125;- (void)buttonClick &#123; self.scacle += 1.0; // å‘Šè¯‰self.viewçº¦æŸéœ€è¦æ›´æ–° [self.view setNeedsUpdateConstraints]; // è°ƒç”¨æ­¤æ–¹æ³•å‘Šè¯‰self.viewæ£€æµ‹æ˜¯å¦éœ€è¦æ›´æ–°çº¦æŸï¼Œè‹¥éœ€è¦åˆ™æ›´æ–°ï¼Œä¸‹é¢æ·»åŠ åŠ¨ç”»æ•ˆæœæ‰èµ·ä½œç”¨ [self.view updateConstraintsIfNeeded]; [UIView animateWithDuration:0.3 animations:^&#123; [self.view layoutIfNeeded]; &#125;];&#125;#pragma mark - updateViewConstraints// é‡å†™è¯¥æ–¹æ³•æ¥æ›´æ–°çº¦æŸ- (void)updateViewConstraints &#123; [self.growingButton mas_updateConstraints:^(MASConstraintMaker *make) &#123; // è¿™é‡Œå†™éœ€è¦æ›´æ–°çš„çº¦æŸï¼Œä¸ç”¨æ›´æ–°çš„çº¦æŸå°†ç»§ç»­å­˜åœ¨ // ä¸ä¼šè¢«å–ä»£ï¼Œå¦‚ï¼šå…¶å®½é«˜å°äºå±å¹•å®½é«˜ä¸éœ€è¦é‡æ–°å†çº¦æŸ make.width.height.mas_equalTo(100 * self.scacle); &#125;]; [super updateViewConstraints];&#125; é‡å†™çº¦æŸ mas_remakeConstraintsåˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œçº¦æŸå¥½å…¶ä½ç½®ï¼ˆä¸å±å¹•ä¸Šå·¦å³çš„è·ç¦»ä¸º0ï¼Œä¸å±å¹•åº•éƒ¨è·ç¦»ä¸º350ï¼‰ï¼Œç‚¹å‡»æŒ‰é’®åå…¨å±å±•ç°ï¼ˆå³ä¸å±å¹•åº•éƒ¨è·ç¦»ä¸º0ï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849- (void)testView4 &#123; self.isExpanded = NO; self.growingButton = [UIButton buttonWithType:UIButtonTypeSystem]; [self setWithButton:self.growingButton title:@"mas_remakeConstraintsé‡å†™çº¦æŸ-ç‚¹æˆ‘å±•å¼€"]; [self.growingButton addTarget:self action:@selector(testView4BtnClick) forControlEvents:UIControlEventTouchUpInside]; [self.view addSubview:self.growingButton]; [self.growingButton mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.mas_equalTo(0); make.left.right.mas_equalTo(0); make.bottom.mas_equalTo(-350); &#125;]; &#125;- (void)testView4BtnClick &#123; self.isExpanded = !self.isExpanded; if (!self.isExpanded) &#123; [self.growingButton setTitle:@"mas_remakeConstraintsé‡å†™çº¦æŸ-ç‚¹æˆ‘å±•å¼€" forState:UIControlStateNormal]; &#125; else &#123; [self.growingButton setTitle:@"mas_remakeConstraintsé‡å†™çº¦æŸ-ç‚¹æˆ‘æ”¶èµ·" forState:UIControlStateNormal]; &#125; // å‘Šè¯‰self.viewçº¦æŸéœ€è¦æ›´æ–° [self.view setNeedsUpdateConstraints]; // è°ƒç”¨æ­¤æ–¹æ³•å‘Šè¯‰self.viewæ£€æµ‹æ˜¯å¦éœ€è¦æ›´æ–°çº¦æŸï¼Œè‹¥éœ€è¦åˆ™æ›´æ–°ï¼Œä¸‹é¢æ·»åŠ åŠ¨ç”»æ•ˆæœæ‰èµ·ä½œç”¨ [self.view updateConstraintsIfNeeded]; [UIView animateWithDuration:0.3 animations:^&#123; [self.view layoutIfNeeded]; &#125;];&#125;#pragma mark - updateViewConstraints- (void)updateViewConstraints &#123; // è¿™é‡Œä½¿ç”¨updateä¹Ÿèƒ½å®ç°æ•ˆæœ // remakeä¼šå°†ä¹‹å‰çš„å…¨éƒ¨ç§»é™¤ï¼Œç„¶åé‡æ–°æ·»åŠ  __weak __typeof(self) weakSelf = self; [self.growingButton mas_remakeConstraints:^(MASConstraintMaker *make) &#123; // è¿™é‡Œé‡å†™å…¨éƒ¨çº¦æŸï¼Œä¹‹å‰çš„çº¦æŸéƒ½å°†å¤±æ•ˆ make.top.mas_equalTo(0); make.left.right.mas_equalTo(0); if (weakSelf.isExpanded) &#123; make.bottom.mas_equalTo(0); &#125; else &#123; make.bottom.mas_equalTo(-350); &#125; &#125;]; [super updateViewConstraints];&#125; æ³¨è§£ï¼š mas_remakeConstraintså’Œmas_updateConstraints çš„åŒºåˆ«åœ¨äº å‰è€…é‡æ–°å¯¹è§†å›¾è¿›è¡Œäº†çº¦æŸï¼ˆæŠ›å¼ƒäº†ä¹‹å‰çš„çº¦æŸï¼‰ï¼Œåè€…æ˜¯æ›´æ–°çº¦æŸæ¡ä»¶ï¼ˆä¿ç•™æœªæ›´æ–°çš„çº¦æŸ)ï¼Œ å¦‚ï¼šè¿™æ¬¡æ›´æ–°äº†å¯¹ height çš„çº¦æŸï¼Œå…¶ä»–å¯¹X&amp;Yä»¥åŠå®½çš„çº¦æŸä¸å˜ï¼‰ã€‚ æ¯”ä¾‹ä½¿ç”¨ multipliedByä½¿ç”¨multipliedByå¿…é¡»æ˜¯å¯¹åŒä¸€ä¸ªæ§ä»¶æœ¬èº«ï¼Œå¦‚æœä¿®æ”¹æˆç›¸å¯¹äºå…¶å®ƒæ§ä»¶ä¼šå‡ºå¯¼è‡´Crashã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546- (void)testView5 &#123; UIView *topView = [[UIView alloc]init]; [topView setBackgroundColor:[UIColor redColor]]; [self.view addSubview:topView]; UIView *topInnerView = [[UIView alloc]init]; [topInnerView setBackgroundColor:[UIColor greenColor]]; [topView addSubview:topInnerView]; UIView *bottomView = [[UIView alloc]init]; [bottomView setBackgroundColor:[UIColor blueColor]]; [self.view addSubview:bottomView]; UIView *bottomInnerView = [[UIView alloc]init]; [bottomInnerView setBackgroundColor:[UIColor blackColor]]; [bottomView addSubview:bottomInnerView]; [topView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.left.right.mas_equalTo(0); make.height.mas_equalTo(bottomView); &#125;]; [topInnerView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.right.mas_equalTo(0); // æ±‚è§£â“ make.width.mas_equalTo(topInnerView.mas_height).multipliedBy(2); make.center.mas_equalTo(topView); &#125;]; [bottomView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.bottom.right.mas_equalTo(0); make.height.mas_equalTo(topView); make.top.mas_equalTo(topView.mas_bottom); &#125;]; [bottomInnerView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.bottom.mas_equalTo(bottomView); make.height.mas_equalTo(bottomInnerView.mas_width).multipliedBy(4); make.center.mas_equalTo(bottomView); &#125;]; // NSLog(@"%@",NSStringFromCGRect(topInnerView.bounds));&#125;åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@jianshu - ç™½å¼€æ°´lnã€‚ å¤§äºç­‰äºå’Œå°äºç­‰äºæŸä¸ªå€¼çš„çº¦æŸ å‚è€ƒï¼šhttp://www.jianshu.com/p/99c418cd11f7 æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å·¥å…·&amp;æ’ä»¶</category>
      </categories>
      <tags>
        <tag>Masonry</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¼ç çŒ¿çœŸçˆ±â€”ã€Œå·æ‡’ || æ•ˆç‡ å·¥å…·ç±»ã€]]></title>
    <url>%2FToolsAndPlugins%2FTools.html</url>
    <content type="text"><![CDATA[è‡ªæ£€ä»£ç ä¸ä¼šå¯ä»¥å¤šæ•²å‡ æ¬¡ï¼Œå­¦ä¹ çš„é‡ç‚¹æ˜¯æ€æƒ³ï¼›â€“ è®¤åŒã€‚BUTå¦‚æœä½ æŠŠè‡ªå·±ä¼šçš„ã€ç†ŸçŸ¥çš„ã€å¯ä»¥è¯´å†™çš„ä¼¼æµæ°´çš„ä»£ç ï¼Œä¸ç®¡æ˜¯åœ¨å·¥ä½œ æˆ–æ˜¯ è‡ªå­¦ä¹ ä¸­ä½ è¿˜æ˜¯ä¸€ç‚¹ä¸€ç‚¹çš„æ•²å‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹â€¦&lt;ä½ è„‘è¡¥çš„æ˜¯å•¥å°±æ˜¯å•¥&gt;ï¼Œcopy &amp; paste ä½ å¯ä»¥è®¤ä¸ºæ˜¯å·æ‡’ï¼Œæˆ‘è®¤ä¸ºæ˜¯ä¸ºäº†æ•ˆç‡ğŸ˜Šï¼› æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ä¼ç çŒ¿ å·æ‡’ || æ•ˆç‡ å·¥å…·ç±»ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@jianshu - ç™½å¼€æ°´lnã€‚ å·¥å…·ç±» ç¤ºä¾‹ MyUIKit-Category UITextField+Placeholder.h 12345678910111213/* *ã€è®¾ç½®å ä½æ–‡å­—çš„é¢œè‰²ã€‘ * @param placeholderColor å ä½æ–‡å­—çš„é¢œè‰² å±æ€§ * é€šè¿‡è¿™ä¸ªå±æ€§åï¼Œå°±å¯ä»¥ä¿®æ”¹textFieldå†…éƒ¨çš„å ä½æ–‡å­—é¢œè‰² */@property UIColor *placeholderColor;/* *ã€æ–¹å¼å››ï¼šruntimeäº¤æ¢æ–¹æ³•(ä¿®æ”¹UITextFieldçš„å ä½æ–‡å­—ï¼Œä¸”è®¾ç½®æ–‡å­—å’Œæ–‡å­—é¢œè‰²æ˜¯æ— åºçš„)ã€‘ * @param placeholder å ä½æ–‡å­— */- (void)setLN_Placeholder:(NSString *)placeholder; UIImage+image.h 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/* *ã€è¿”å›ä¸€å¼ æ²¡æœ‰ç»è¿‡æ¸²æŸ“çš„å›¾ç‰‡ã€‘ * @param imageName åŸå§‹çš„å›¾ç‰‡ */+ (UIImage *)ln_imageWithOriginalImageName:(NSString *)imageName;- (UIImage *)ln_imageWithOriginalImage;/* *ã€è¿”å›ä¸€å¼ å—ä¿æŠ¤çš„å›¾ç‰‡(è¢«æ‹‰ä¼¸çš„)ã€‘ * @param prImageName åŸå§‹çš„å›¾ç‰‡ */+ (instancetype)ln_resizeImage:(NSString *)imageName;- (UIImage *)ln_resizeImage;/* *ã€æ ¹æ®é¢œè‰²ç”Ÿæˆä¸€å¼ å°ºå¯¸ä¸º1*1çš„ç›¸åŒé¢œè‰²å›¾ç‰‡ã€‘ * @param color é¢œè‰² */+ (UIImage *)ln_imageWithColor:(UIColor *)color;/* *ã€æ ¹æ®ä¼ å…¥çš„å›¾ç‰‡,ç”Ÿæˆä¸€å¼ å¸¦æœ‰è¾¹æ¡†çš„åœ†å½¢å›¾ç‰‡ã€‘ * * @param image åŸå§‹å›¾ç‰‡ * @param borderW è¾¹æ¡†å®½åº¦ * @param borderColor è¾¹æ¡†é¢œè‰² */+ (UIImage *)ln_imageWithCircleImage:(NSString *)imageName Border:(CGFloat)borderW color:(UIColor *)borderColor;- (instancetype)ln_circleImageWithBorder:(CGFloat)borderW color:(UIColor *)borderColor;/* *ã€è¿”å›ä¸€å¼ ç»˜åˆ¶å­—ç¬¦ä¸²çš„å›¾ç‰‡ã€‘ */+ (UIImage *)ln_imageWithNSString:(NSString *)string font:(CGFloat)textFont color:(UIColor *)textColor clip:(BOOL)clip drawAtImage:(UIImage *)image drawAtPoint:(CGPoint)atPoint;/* *ã€æ ¹æ®ä¼ å…¥çš„å›¾ç‰‡,è¿”å›ä¸€å¼ åœ†å½¢å›¾ç‰‡ã€‘ */- (instancetype)ln_circleImage;+ (instancetype)ln_circleImageNamed:(NSString *)name;/* *ã€è¿”å›ä¸€å¼ æŠ—é”¯é½¿å›¾ç‰‡ã€‘ * æœ¬è´¨ï¼šåœ¨å›¾ç‰‡ç”Ÿæˆä¸€ä¸ªé€æ˜ä¸º1çš„åƒç´ è¾¹æ¡† */- (UIImage *)ln_imageAntialias;/* *ã€å›ºå®šå®½åº¦ä¸å›ºå®šé«˜åº¦ã€‘ */- (UIImage *)scaleWithFixedWidth:(CGFloat)width;- (UIImage *)scaleWithFixedHeight:(CGFloat)height;/* *ã€è£å‰ªå›¾ç‰‡çš„ä¸€éƒ¨åˆ†ã€‘ */- (UIImage *)croppedImageAtFrame:(CGRect)frame;/* *ã€å°†è‡ªèº«å¡«å……åˆ°æŒ‡å®šçš„sizeã€‘ */- (UIImage *)fillClipSize:(CGSize)size; MyFoundation-Category NSString+String.h 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374/** * è®¡ç®—å­—ç¬¦ä¸²å®½åº¦(æŒ‡å½“è¯¥å­—ç¬¦ä¸²æ”¾åœ¨viewæ—¶çš„è‡ªé€‚åº”å®½åº¦) * * @param size å¡«å…¥é¢„ç•™çš„å¤§å° * @param font å­—ä½“å¤§å° * @param isBold å­—ä½“æ˜¯å¦åŠ ç²— * * @return è¿”å›CGRect */- (CGRect)stringWidthRectWithSize:(CGSize)size fontOfSize:(CGFloat)font isBold:(BOOL)isBold;/** * @brief æ ¹æ®å­—æ•°çš„ä¸åŒ,è¿”å›UILabelä¸­çš„textæ–‡å­—éœ€è¦å ç”¨å¤šå°‘Size * @param size çº¦æŸçš„å°ºå¯¸ * @param font æ–‡æœ¬å­—ä½“ * @return æ–‡æœ¬çš„å®é™…å°ºå¯¸ */- (CGSize)textSizeWithContentSize:(CGSize)size font:(UIFont *)font;/** * @brief æ ¹æ®æ–‡æœ¬å­—æ•°/æ–‡æœ¬å®½åº¦çº¦æŸ/æ–‡æœ¬å­—ä½“ æ±‚å¾—textçš„Size * @param width å®½åº¦çº¦æŸ * @param font æ–‡æœ¬å­—ä½“ * @return æ–‡æœ¬çš„å®é™…é«˜åº¦ */- (CGFloat)textHeightWithContentWidth:(CGFloat)width font:(UIFont *)font;/** * @brief æ ¹æ®æ–‡æœ¬å­—æ•°/æ–‡æœ¬å®½åº¦çº¦æŸ/æ–‡æœ¬å­—ä½“ æ±‚å¾—textçš„Size * @param height å®½åº¦çº¦æŸ * @param font æ–‡æœ¬å­—ä½“ * @return æ–‡æœ¬çš„å®é™…é•¿åº¦ */- (CGFloat)textWidthWithContentHeight:(CGFloat)height font:(UIFont *)font;//--------------------------- ã€æ­£åˆ™è¡¨è¾¾å¼ã€‘ ------------------------------////- (BOOL)isQQ;- (BOOL)isPhoneNumber;- (BOOL)isIPAddress;//--------------------------- ã€ç›®å½•å…¨è·¯å¾„ã€‘ ------------------------------/////** * md5åŠ å¯† */+ (NSString*)md5HexDigest:(NSString*)input;/** * æ ¹æ®æ–‡ä»¶åè®¡ç®—å‡ºæ–‡ä»¶å¤§å° */- (unsigned long long)lx_fileSize;/** * ç”Ÿæˆç¼“å­˜ç›®å½•å…¨è·¯å¾„ */- (instancetype)cacheDir;/** * ç”Ÿæˆæ–‡æ¡£ç›®å½•å…¨è·¯å¾„ */- (instancetype)docDir;/** * ç”Ÿæˆä¸´æ—¶ç›®å½•å…¨è·¯å¾„ */- (instancetype)tmpDir; NSDictionary+Property.h 1234/* *ã€å­—å…¸è½¬æ¨¡å‹KVCå®ç°(è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹å±æ€§ä»£ç )ã€‘ */- (void)createPropertyCode; å·¥å…·å›¾ ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘]]></content>
      <categories>
        <category>å·¥å…·&amp;æ’ä»¶</category>
      </categories>
      <tags>
        <tag>å·¥å…·ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å—è¯¦è§£â€”ã€Œå¤šçº¿ç¨‹é¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^.]]></title>
    <url>%2FiOSNET%2FMultithreading.html</url>
    <content type="text"><![CDATA[å¼•å¯¼Copyright Â© ç™½å¼€æ°´ln Unauthorized shall not be *copy reprinted* ã€‚Authorization Â© JaneBookï¼šç™½å¼€æ°´ln E-mailï¼špbwaterln@sina.com è°ˆåˆ°iOSå¤šçº¿ç¨‹ï¼Œæƒ³å¿…å¤§å®¶ç¬¬ä¸€ååº”å°±æ˜¯å¤šçº¿ç¨‹4ç§å®ç°æ–¹æ¡ˆ 1.pthreadã€2.NSThreadã€3.GCDã€4.NSOperationï¼›å®ƒä»¬æ¯ä¸ªçš„ç”¨æ³•ã€ç‰¹ç‚¹ã€åº”ç”¨åœºæ™¯åŠæ³¨æ„ç‚¹ï¼Œæ–‡ç« ä¼šä¸€ä¸€è®²åˆ°ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€iOSå¤šçº¿ç¨‹æ¨¡å—ã€‘å­¦ä¹ æ€»ç»“ï¼Œåœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µ1.è¿›ç¨‹å’Œçº¿ç¨‹æ¦‚å¿µ2.å¤šçº¿ç¨‹æ¦‚å¿µ3.ä¸»çº¿ç¨‹4.GCDç›¸å…³æ¦‚å¿µ pthread &amp; NSThread1.pthread2.NSThread1&gt; NSThreadåˆ›å»ºçº¿ç¨‹æœ‰3ä¸ªæ–¹æ³•2&gt; NSThreadå…¶å®ƒæ–¹æ³•3&gt; NSThreadçº¿ç¨‹å®‰å…¨4&gt; NSThreadçº¿ç¨‹é—´é€šä¿¡5&gt; NSThreadçº¿ç¨‹çŠ¶æ€è½¬æ¢ GCDä¸­æ¢è°ƒåº¦å™¨1.ä»€ä¹ˆæ˜¯GCD2.GCDåŸºæœ¬æ¦‚å¿µ3.ä»»åŠ¡&amp;é˜Ÿåˆ—ç»„åˆä½¿ç”¨4.GCDçš„ä¼˜åŠ¿5.GCDåŸºæœ¬ä½¿ç”¨6.GCDå¸¸è§ç”¨æ³•å’Œåº”ç”¨åœºæ™¯7.å†…å­˜å’Œå®‰å…¨8.å•ä¾‹æ¨¡å¼9.æ€»ç»“ NSOperationæ“ä½œé˜Ÿåˆ—1.ä»€ä¹ˆæ˜¯NSOperation2.NSOperationç›¸å…³æ¦‚å¿µ3.NSInvocationOperation &amp; NSBlockOperation4.NSOperationä¼˜åŠ¿5.NSOperationåŸºæœ¬ä½¿ç”¨6.NSOperationç»“åˆNSOperationQueueä½¿ç”¨7.éä¸»é˜Ÿåˆ—æ§åˆ¶ä¸²è¡Œå’Œå¹¶è¡Œæ‰§è¡Œçš„å…³é”®8.æ·»åŠ æ“ä½œä¾èµ–å’Œæ“ä½œç›‘å¬9.NSOperationçº¿ç¨‹é—´é€šä¿¡10.ç®¡ç†æ“ä½œï¼šæ˜¯æ“ä½œé˜Ÿåˆ—çš„æ–¹æ³• å¤šçº¿ç¨‹ç›¸å…³æ¦‚å¿µç¯‡ 1.è¿›ç¨‹è¿›ç¨‹æ˜¯æŒ‡åœ¨ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨å…¶ä¸“ç”¨ä¸”å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´å†…ã€‚ 2.çº¿ç¨‹åŸºæœ¬æ¦‚å¿µï¼š1ä¸ªè¿›ç¨‹è¦æƒ³æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»å¾—æœ‰çº¿ç¨‹ï¼ˆæ¯1ä¸ªè¿›ç¨‹è‡³å°‘è¦æœ‰1æ¡çº¿ç¨‹ï¼‰ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰çš„æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œã€‚çº¿ç¨‹çš„ä¸²è¡Œï¼š1ä¸ªçº¿ç¨‹ä¸­çš„ä»»åŠ¡çš„æ‰§è¡Œæ˜¯ä¸²è¡Œ(æŒ‰é¡ºåºåœ°æ‰§è¡Œ)ï¼Œå¦‚æœè¦åœ¨1ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆåªèƒ½ä¸€ä¸ªä¸€ä¸ªæŒ‰é¡ºåºæ‰§è¡Œè¿™äº›ä»»åŠ¡ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€æ—¶é—´å†…ï¼Œ1ä¸ªçº¿ç¨‹åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼‰ 3.è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¯”è¾ƒ1ã€è¿›ç¨‹æ˜¯CPUåˆ†é…èµ„æºå’Œè°ƒåº¦çš„å•ä½2ã€çº¿ç¨‹æ˜¯CPUè°ƒç”¨(æ‰§è¡Œä»»åŠ¡)çš„æœ€å°å•ä½3ã€ä¸€ä¸ªç¨‹åºå¯ä»¥å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘è¦æœ‰ä¸€ä¸ªçº¿ç¨‹4ã€åŒä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æº å¤šçº¿ç¨‹æ¦‚å¿µå¤šçº¿ç¨‹æ¦‚å¿µï¼šå³1ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¯ä»¥å¹¶è¡Œï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œä¸åŒçš„ä»»åŠ¡å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼šåœ¨åŒä¸€æ—¶é—´é‡Œï¼ŒCPUåªèƒ½å¤„ç†1æ¡çº¿ç¨‹ï¼Œåªæœ‰1æ¡çº¿ç¨‹åœ¨å·¥ä½œï¼ˆæ‰§è¡Œï¼‰ï¼›å¤šçº¿ç¨‹å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼Œå…¶å®æ˜¯CPUå¿«é€Ÿåœ°åœ¨å¤šæ¡çº¿ç¨‹ä¹‹é—´è°ƒåº¦ï¼ˆåˆ‡æ¢ï¼‰ï¼Œå¦‚æœCPUè°ƒåº¦çº¿ç¨‹çš„æ—¶é—´è¶³å¤Ÿå¿«ï¼Œå°±é€ æˆäº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„å‡è±¡ã€‚ å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ï¼šä¼˜ç‚¹ï¼š1ã€èƒ½é€‚å½“æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡2ã€èƒ½é€‚å½“æé«˜èµ„æºåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜åˆ©ç”¨ç‡ï¼‰ç¼ºç‚¹ï¼š1ã€å¼€å¯çº¿ç¨‹éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹å ç”¨1Mï¼Œå­çº¿ç¨‹å ç”¨512KBï¼‰ï¼Œå¦‚æœå¼€å¯å¤§é‡çš„çº¿ç¨‹ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œé™ä½ç¨‹åºçš„æ€§èƒ½2ã€çº¿ç¨‹è¶Šå¤šï¼ŒCPUåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šçš„å¼€é”€å°±è¶Šå¤§3ã€ç¨‹åºè®¾è®¡æ›´åŠ å¤æ‚ï¼šæ¯”å¦‚çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€å¤šçº¿ç¨‹çš„æ•°æ®å…±äº« ä¸»çº¿ç¨‹ä¸»çº¿ç¨‹ï¼šç¨‹åºè¿è¡Œåï¼Œé»˜è®¤ä¼šå¼€å¯1æ¡çº¿ç¨‹ä½œç”¨ï¼šåˆ·æ–°æ˜¾ç¤ºUI,å¤„ç†UIäº‹ä»¶ä½¿ç”¨æ³¨æ„ï¼š1ã€ä¸è¦å°†è€—æ—¶æ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­å»å¤„ç†ï¼Œä¼šå¡ä½çº¿ç¨‹ï¼Œä¸¥é‡å½±å“UIç•Œé¢çš„æµç•…åº¦ï¼Œç»™ç”¨æˆ·ç•Œé¢å¡é¡¿çš„ç°è±¡(æ”¾åˆ°å­çº¿ç¨‹ä¸­æ‰§è¡Œ)ï¼›2ã€å’ŒUIç›¸å…³çš„åˆ·æ–°æ“ä½œå¿…é¡»æ”¾åˆ°ä¸»çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç† å¤šçº¿ç¨‹å®ç°æ–¹æ¡ˆ ç‰¹ç‚¹ è¯­è¨€ é¢‘ç‡ çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ pthread 1ã€ä¸€å¥—é€šç”¨çš„å¤šçº¿ç¨‹API 2ã€é€‚ç”¨äºUnix\Linux\Windowsç­‰ç³»ç»Ÿ 3ã€è·¨å¹³å°\å¯ç§»æ¤ 4ã€ä½¿ç”¨éš¾åº¦å¤§ cè¯­è¨€ å‡ ä¹ä¸ç”¨ ç”±ç¨‹åºå‘˜è¿›è¡Œç®¡ç† NSThread 1ã€ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ 2ã€ç®€å•æ˜“ç”¨ï¼Œå¯ç›´æ¥æ“ä½œçº¿ç¨‹å¯¹è±¡ OCè¯­è¨€ å¶å°”ä½¿ç”¨ ç”±ç¨‹åºå‘˜è¿›è¡Œç®¡ç† GCD 1ã€æ—¨åœ¨æ›¿ä»£NSThreadç­‰çº¿ç¨‹æŠ€æœ¯ 2ã€å……åˆ†åˆ©ç”¨è®¾å¤‡çš„å¤šæ ¸ï¼ˆè‡ªåŠ¨ï¼‰ Cè¯­è¨€ ç»å¸¸ä½¿ç”¨ è‡ªåŠ¨ç®¡ç† NSOperation 1ã€åŸºäºGCDï¼ˆåº•å±‚æ˜¯GCDï¼‰ 2ã€æ¯”GCDå¤šäº†ä¸€äº›æ›´ç®€å•å®ç”¨çš„åŠŸèƒ½ 3ã€ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ OCè¯­è¨€ ç»å¸¸ä½¿ç”¨ è‡ªåŠ¨ç®¡ç† GCDç›¸å…³æ¦‚å¿µåˆå­¦GCDçš„æ—¶å€™ï¼Œè‚¯å®šä¼šçº ç»“ä¸€äº›çœ‹ä¼¼å¾ˆå…³é”®ä½†å´æ¯«æ— æ„ä¹‰çš„é—®é¢˜(ä¸è¦çº ç»“ï¼Œæ¦‚å¿µç†è§£çš„åŸºç¡€+å®æˆ˜ï¼Œå°±ä¼šè§£å†³ä½ çš„ç–‘æƒ‘)ï¼Œå¯¹äºGCDéœ€è¦å…³æ³¨çš„åªæœ‰ä¸¤ä¸ªæ¦‚å¿µï¼šä»»åŠ¡ã€é˜Ÿåˆ—ã€‚ 1.ä»»åŠ¡linuxå†…æ ¸ä¸­çš„ä»»åŠ¡çš„å®šä¹‰æ˜¯æè¿°è¿›ç¨‹çš„ä¸€ç§ç»“æ„ä½“ï¼Œè€ŒGCDä¸­çš„ä»»åŠ¡åªæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå®ƒå¯ä»¥æŒ‡ä¸€ä¸ªblockæˆ–è€…å‡½æ•°æŒ‡é’ˆã€‚æ ¹æ®è¿™ä¸ªä»£ç å—æ·»åŠ è¿›å…¥é˜Ÿåˆ—çš„æ–¹å¼ï¼Œå°†ä»»åŠ¡åˆ†ä¸ºå¼‚æ­¥ä»»åŠ¡å’ŒåŒæ­¥ä»»åŠ¡ï¼šå¼‚æ­¥ä»»åŠ¡ï¼šä½¿ç”¨dispatch_asyncå°†ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ã€‚å°†å¼‚æ­¥ä»»åŠ¡åŠ å…¥å¹¶å‘é˜Ÿåˆ—ï¼Œä¼šå¼€å¯å¤šæ¡çº¿ç¨‹ä¸”ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œ(è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼)ï¼›å°†å¼‚æ­¥ä»»åŠ¡åŠ å…¥ä¸²è¡Œé˜Ÿåˆ—ï¼Œä¼šå¼€å¯ä¸€æ¡çº¿ç¨‹ä¸”ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ(æŒ‰é¡ºåºæ‰§è¡Œ)ï¼›å°†å¼‚æ­¥ä»»åŠ¡åŠ å…¥ä¸»é˜Ÿåˆ—ï¼Œä¸ä¼šå¼€å¯çº¿ç¨‹ä¸”ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚åŒæ­¥ä»»åŠ¡ï¼šä½¿ç”¨dispatch_syncå°†ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ã€‚å°†åŒæ­¥ä»»åŠ¡åŠ å…¥å¹¶å‘é˜Ÿåˆ—ï¼Œä¸ä¼šå¼€å¯çº¿ç¨‹ä¸”ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œï¼›å°†åŒæ­¥ä»»åŠ¡åŠ å…¥ä¸²è¡Œé˜Ÿåˆ—ï¼Œä¸ä¼šå¼€å¯çº¿ç¨‹ä¸”ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ(ä¹Ÿæ²¡ä»€ä¹ˆæ„ä¹‰æ˜¯å§)ï¼›å°†åŒæ­¥ä»»åŠ¡åŠ å…¥ä¸»é˜Ÿåˆ—ï¼Œä¸ä¼šå¼€å¯çº¿ç¨‹ä¸”ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæ³¨æ„ï¼šæ–¹æ³•åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ä¼šé€ æˆæ­»é”ï¼Œåœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨ä¸ä¼šé€ æˆæ­»é”ï¼‰ã€‚ 2.é˜Ÿåˆ—è°ƒåº¦é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¼šä»¥first-inã€first-outçš„æ–¹å¼ç®¡ç†æ‚¨æäº¤çš„ä»»åŠ¡ã€‚GCDæœ‰ä¸‰ç§é˜Ÿåˆ—ç±»å‹å¹¶è¡Œé˜Ÿåˆ—ï¼šå¹¶å‘é˜Ÿåˆ—è™½ç„¶æ˜¯èƒ½åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œä½†è¿™äº›ä»»åŠ¡ä»ç„¶æ˜¯æŒ‰ç…§å…ˆåˆ°å…ˆæ‰§è¡Œ(FIFO)çš„é¡ºåºæ¥æ‰§è¡Œçš„ã€‚å¹¶å‘é˜Ÿåˆ—ä¼šåŸºäºç³»ç»Ÿè´Ÿè½½æ¥åˆé€‚åœ°é€‰æ‹©å¹¶å‘æ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚å¹¶å‘é˜Ÿåˆ—ä¸€èˆ¬æŒ‡çš„å°±æ˜¯å…¨å±€é˜Ÿåˆ—(Global queue)ï¼Œè¿›ç¨‹ä¸­å­˜åœ¨å››ä¸ªå…¨å±€é˜Ÿåˆ—ï¼šé«˜ã€ä¸­(é»˜è®¤)ã€ä½ã€åå°å››ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¯ä»¥è°ƒç”¨dispatch_get_global_queueå‡½æ•°ä¼ å…¥ä¼˜å…ˆçº§æ¥è®¿é—®é˜Ÿåˆ—ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨dispatch_queue_createï¼Œå¹¶æŒ‡å®šé˜Ÿåˆ—ç±»å‹DISPATCH_QUEUE_CONCURRENTï¼Œæ¥è‡ªå·±åˆ›å»ºä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ ä¸²è¡Œé˜Ÿåˆ—ï¼šä¸²è¡Œé˜Ÿåˆ—å°†ä»»åŠ¡ä»¥å…ˆè¿›å…ˆå‡º(FIFO)çš„é¡ºåºæ¥æ‰§è¡Œï¼Œæ‰€ä»¥ä¸²è¡Œé˜Ÿåˆ—ç»å¸¸ç”¨æ¥åšè®¿é—®æŸäº›ç‰¹å®šèµ„æºçš„åŒæ­¥å¤„ç†ã€‚ä½ å¯ä»¥ä¹Ÿæ ¹æ®éœ€è¦åˆ›å»ºå¤šä¸ªé˜Ÿåˆ—ï¼Œè€Œè¿™äº›é˜Ÿåˆ—ç›¸å¯¹å…¶ä»–é˜Ÿåˆ—éƒ½æ˜¯å¹¶å‘æ‰§è¡Œçš„ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ åˆ›å»ºäº†4ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œæ¯ä¸€ä¸ªé˜Ÿåˆ—åœ¨åŒä¸€æ—¶é—´éƒ½åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå¯¹è¿™å››ä¸ªä»»åŠ¡æ¥è¯´ï¼Œä»–ä»¬æ˜¯ç›¸äº’ç‹¬ç«‹ä¸”å¹¶å‘æ‰§è¡Œçš„ã€‚å¦‚æœéœ€è¦åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œä¸€èˆ¬ç”¨dispatch_queue_createè¿™ä¸ªæ–¹æ³•æ¥å®ç°ï¼Œå¹¶æŒ‡å®šé˜Ÿåˆ—ç±»å‹DISPATCH_QUEUE_SERIALã€‚ ä¸»é˜Ÿåˆ—ï¼šä¸»é˜Ÿåˆ—ï¼Œä¸ä¸»çº¿ç¨‹åŠŸèƒ½ç›¸åŒã€‚å®é™…ä¸Šï¼Œæäº¤è‡³main queueçš„ä»»åŠ¡ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚main queueå¯ä»¥è°ƒç”¨dispatch_get_main_queue()æ¥è·å¾—ã€‚å› ä¸ºmain queueæ˜¯ä¸ä¸»çº¿ç¨‹ç›¸å…³çš„ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ã€‚å’Œå…¶å®ƒä¸²è¡Œé˜Ÿåˆ—ä¸€æ ·ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªã€‚å®ƒèƒ½ä¿è¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œè€Œä¸»çº¿ç¨‹æ˜¯å”¯ä¸€å¯ç”¨äºæ›´æ–° UI çš„çº¿ç¨‹ã€‚ æ³¨ï¼šé˜Ÿåˆ—é—´çš„æ‰§è¡Œæ˜¯å¹¶è¡Œçš„ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚æ¯”å¦‚ï¼Œå¹¶è¡Œæ‰§è¡Œçš„é˜Ÿåˆ—æ•°é‡å—åˆ°å†…æ ¸æ•°çš„é™åˆ¶ï¼Œæ— æ³•çœŸæ­£åšåˆ°å¤§é‡é˜Ÿåˆ—å¹¶è¡Œæ‰§è¡Œï¼›æ¯”å¦‚ï¼Œå¯¹äºå¹¶è¡Œé˜Ÿåˆ—ä¸­çš„å…¨å±€é˜Ÿåˆ—è€Œè¨€ï¼Œå…¶å­˜åœ¨ä¼˜å…ˆçº§å…³ç³»ï¼Œæ‰§è¡Œçš„æ—¶å€™ä¹Ÿä¼šéµå¾ªå…¶ä¼˜å…ˆé¡ºåºï¼Œè€Œä¸æ˜¯å¹¶è¡Œã€‚ ä»¥ä¸Šæ¦‚å¿µæ–‡è¨€æ–‡ä½ ä¹Ÿè®¸æ„Ÿåˆ°æœ‰ç‚¹ä»€ä¹ˆï¼Œä¸‹é¢æ€»ç»“ç®€å•å°è¡¨æ ¼æ–¹ä¾¿ä½ æŸ¥çœ‹ 3.GCDæ€»ç»“å°è¡¨æ ¼ GCD ç‰¹ç‚¹ æ ¸å¿ƒæ¦‚å¿µ ä»»åŠ¡ï¼šæ‰§è¡Œä»€ä¹ˆæ“ä½œ é˜Ÿåˆ—ï¼šç”¨æ¥å­˜æ”¾ä»»åŠ¡ å‡½æ•° å¼‚æ­¥ï¼šå¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› åŒæ­¥ï¼šåªèƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› é˜Ÿåˆ— å¹¶å‘ï¼šå…è®¸å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼ˆè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼‰ï¼Œå¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥å‡½æ•°ä¸‹æ‰æœ‰æ•ˆ ä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰ å…¨å±€å¹¶å‘é˜Ÿåˆ— ç‰¹ç‚¹ï¼šå­˜åœ¨ä¼˜å…ˆçº§å…³ç³»ï¼ˆDEFAULTé»˜è®¤çš„ã€HIGHé«˜çš„ã€LOWä½çš„ã€BACKGROUNDæœ€ä½çš„ï¼‰ ä¸»é˜Ÿåˆ— ç‰¹ç‚¹ï¼šæ·»åŠ åˆ°ä¸»é˜Ÿåˆ—ä¸Šçš„ä»»åŠ¡ï¼Œå¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœä¸»é˜Ÿåˆ—å‘ç°å½“å‰ä¸»çº¿ç¨‹æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆä¸»é˜Ÿåˆ—ä¼šæš‚åœè°ƒç”¨é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œç›´åˆ°ä¸»çº¿ç¨‹ç©ºé—²ä¸ºæ­¢ å¯¹äº ä»»åŠ¡ä¸é˜Ÿåˆ— ä¹‹é—´çš„å…³ç³»ï¼Œä¸‹é¢æ€»ç»“ç®€å•å°è¡¨æ ¼æ–¹ä¾¿ä½ æŸ¥çœ‹ ä»»åŠ¡ &amp; é˜Ÿåˆ— å¹¶å‘é˜Ÿåˆ—(concurrent) ä¸²è¡Œé˜Ÿåˆ—(serial) ä¸»é˜Ÿåˆ—(get_main) å¼‚æ­¥å‡½æ•°(async) ä¼šå¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œ ä¼šå¼€å¯ä¸€æ¡çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ åŒæ­¥å‡½æ•°(sync) ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæ³¨æ„ï¼šåœ¨ä¸»çº¿ç¨‹è°ƒç”¨ä¼šé€ æˆæ­»é”ï¼Œåœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨ä¸ä¼šé€ æˆæ­»é”ï¼‰ pthread &amp; NSThreadç¯‡ 1.pthreadå…¶å®è¿™ä¸ªæ–¹æ¡ˆå¼€å‘å‡ ä¹ä¸ç”¨ï¼Œåªæ˜¯æ‹¿æ¥å……ä¸ªæ•°ï¼Œä¸ºè®©å¤§å®¶äº†è§£ä¸€ä¸‹å°±å¥½äº†ç®€å•ä»‹ç»ä¸‹ï¼Œpthreadæ˜¯ä¸€å¥—é€šç”¨çš„å¤šçº¿ç¨‹çš„APIï¼Œå¯ä»¥åœ¨Unix / Linux / Windows ç­‰ç³»ç»Ÿè·¨å¹³å°ä½¿ç”¨ï¼Œä½¿ç”¨Cè¯­è¨€ç¼–å†™ï¼Œéœ€è¦ç¨‹åºå‘˜è‡ªå·±ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨éš¾åº¦è¾ƒå¤§ï¼Œæ‰€ä»¥ä»…äº†è§£ï¼Œçœ‹ä¸€éæœ‰ä¸ªå°è±¡ã€‚ pthreadä½¿ç”¨æ–¹æ³•1234567891011121314#pragma mark - pthreadåˆ›å»ºå­çº¿ç¨‹- (void)pthread &#123; //1.åˆ›å»ºçº¿ç¨‹å¯¹è±¡ pthread_t thread; //2.åˆ›å»ºçº¿ç¨‹ //å‚æ•°:çº¿ç¨‹å¯¹è±¡(ä¼ é€’åœ°å€)ï¼Œçº¿ç¨‹çš„å±æ€§(NULL)ï¼ŒæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œå‡½æ•°éœ€è¦æ¥å—çš„å‚æ•° pthread_create(&amp;thread, NULL, task, NULL);&#125;void *task(void *param) &#123; NSLog(@"%@",[NSThread currentThread]); return NULL;&#125; æ‰“å°è¾“å‡ºï¼š12016-02-10 19:10:36.902 å¤šçº¿ç¨‹2.4[9565:222926] &lt;NSThread: 0x600000275540&gt;&#123;number = 3, name = (null)&#125; åº”ç”¨åœºæ™¯ï¼šæˆ‘ä»¬åœ¨iOSå¼€å‘ä¸­å‡ ä¹ä¸ä½¿ç”¨pthread 2.NSThreadè¿™ä¸ªæ–¹æ¡ˆæ˜¯ç»è¿‡è‹¹æœå°è£…åçš„ï¼Œä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ï¼Œç®€å•æ˜“ç”¨å¯ç›´æ¥æ“ä½œçº¿ç¨‹å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç®¡ç†ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯å¶å°”ç”¨ç”¨ï¼Œæ¯”å¦‚ [NSThread currentThread]ç”¨æ¥è·å¾—å½“å‰çº¿ç¨‹ç±»ï¼Œä½ å°±å¯ä»¥çŸ¥é“å½“å‰çº¿ç¨‹çš„å„ç§å±æ€§ï¼Œç”¨äºè°ƒè¯•ååˆ†æ–¹ä¾¿ã€‚ä¸‹é¢æ¥çœ‹çœ‹å®ƒçš„ä¸€äº›ç”¨æ³• 1.NSThreadåˆ›å»ºçº¿ç¨‹æœ‰3ä¸ªæ–¹æ³•é¦–å…ˆè¦åŒ…å«å¤´æ–‡ä»¶#import &lt;pthread.h&gt; æ–¹æ³•ä¸€ï¼šåˆ›å»ºçº¿ç¨‹ä¸”æ‰‹åŠ¨å¯åŠ¨12NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(task:) object:nil];[thread start]; æ–¹æ³•äºŒï¼šåˆ†ç¦»å­çº¿ç¨‹å¹¶è‡ªåŠ¨å¯åŠ¨1[NSThread detachNewThreadSelector:@selector(thread:) toTarget:self withObject:nil]; æ–¹æ³•ä¸‰ï¼šåå°çº¿ç¨‹å¹¶è‡ªåŠ¨å¯åŠ¨1[self performSelectorInBackground:@selector(thread:) withObject:@"å¼€å¯åå°çº¿ç¨‹"]; 2.NSThreadå…¶ä»–æ–¹æ³•é™¤äº†åˆ›å»ºå¯åŠ¨å¤–ï¼ŒNSThread è¿˜ä»¥å¾ˆå¤šæ–¹æ³•ï¼Œä¸‹é¢æˆ‘åˆ—ä¸¾ä¸€äº›å¸¸è§çš„æ–¹æ³•ï¼Œå½“ç„¶æˆ‘åˆ—ä¸¾çš„å¹¶ä¸å®Œæ•´ï¼Œæ›´å¤šæ–¹æ³•å¤§å®¶å¯ä»¥å»ç±»çš„å®šä¹‰é‡Œå»çœ‹1234567891011121314151617181920212223242526272829303132333435// å–æ¶ˆçº¿ç¨‹- (void)cancel;// å¯åŠ¨çº¿ç¨‹- (void)start;// å¼ºåˆ¶åœæ­¢çº¿ç¨‹+ (void)exit;// åˆ¤æ–­æŸä¸ªçº¿ç¨‹çš„çŠ¶æ€çš„å±æ€§@property (readonly, getter=isExecuting) BOOL executing;@property (readonly, getter=isFinished) BOOL finished;@property (readonly, getter=isCancelled) BOOL cancelled;// è®¾ç½®å’Œè·å–çº¿ç¨‹åå­—-(void)setName:(NSString *)n;-(NSString *)name;// è®¾ç½®ä¼˜å…ˆçº§ï¼ˆå–å€¼èŒƒå›´ 0.0 ~ 1.0 ä¹‹é—´ æœ€é«˜æ˜¯1.0 é»˜è®¤ä¼˜å…ˆçº§æ˜¯0.5ï¼‰+ (double)threadPriority;+ (BOOL)setThreadPriority:(double)p;// è·å–å½“å‰çº¿ç¨‹ä¿¡æ¯+ (NSThread *)currentThread;// è·å–ä¸»çº¿ç¨‹ä¿¡æ¯+ (NSThread *)mainThread;// åˆ¤æ–­æ˜¯å¦ä¸ºä¸»çº¿ç¨‹(å¯¹è±¡æ–¹æ³•)- (BOOL)isMainThread;// åˆ¤æ–­æ˜¯å¦ä¸ºä¸»çº¿ç¨‹(ç±»æ–¹æ³•)+ (BOOL)isMainThread;// é˜»å¡çº¿ç¨‹ï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼‰+ (void)sleepForTimeInterval:(NSTimeInterval)time;+ (void)sleepUntilDate:(NSDate *)date; 2.NSThreadçº¿ç¨‹å®‰å…¨ çº¿ç¨‹å®‰å…¨ï¼Œè§£å†³æ–¹æ³•é‡‡ç”¨çº¿ç¨‹åŠ é”ï¼Œéœ€äº†è§£äº’æ–¥é” äº’æ–¥é”ä½¿ç”¨æ ¼å¼:@synchronized (self) {// éœ€è¦é”å®šçš„ä»£ç  }æ³¨æ„ï¼šé”å®šä¸€ä»½ä»£ç åªç”¨ä¸€æŠŠé”ï¼Œç”¨å¤šæŠŠé”æ˜¯æ— æ•ˆçš„ äº’æ–¥é”çš„ä¼˜ç¼ºç‚¹:ä¼˜ç‚¹:èƒ½æœ‰æ•ˆé˜²æ­¢å› å¤šçº¿ç¨‹æŠ¢å¤ºèµ„æºé€ æˆçš„æ•°æ®å®‰å…¨é—®é¢˜ç¼ºç‚¹:éœ€è¦æ¶ˆè€—å¤§é‡çš„CPUèµ„æº äº’æ–¥é”æ³¨æ„ç‚¹:é”:å¿…é¡»æ˜¯å…¨å±€å”¯ä¸€çš„ï¼ˆé€šå¸¸ç”¨selfï¼‰1.æ³¨æ„åŠ é”çš„ä½ç½®2.æ³¨æ„åŠ é”çš„å‰ææ¡ä»¶,å¤šçº¿ç¨‹å…±äº«åŒä¸€å—èµ„æº3.æ³¨æ„åŠ é”æ˜¯éœ€è¦ä»£ä»·çš„,éœ€è¦è€—è´¹æ€§èƒ½çš„4.åŠ é”çš„ç»“æœ:çº¿ç¨‹åŒæ­¥ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰ è¡¥å……:æˆ‘ä»¬çŸ¥é“, å±æ€§ä¸­æœ‰atomicå’Œnonatomicå±æ€§ atomic : setteræ–¹æ³•çº¿ç¨‹å®‰å…¨, éœ€è¦æ¶ˆè€—å¤§é‡çš„èµ„æº nonatomic : setteræ–¹æ³•éçº¿ç¨‹å®‰å…¨, é€‚åˆå†…å­˜å°çš„ç§»åŠ¨è®¾å¤‡ 3.NSThreadçº¿ç¨‹é—´é€šä¿¡çº¿ç¨‹é—´é€šä¿¡ï¼šä»»åŠ¡ä»å­çº¿ç¨‹å›åˆ°ä¸»çº¿ç¨‹1234567/** çº¿ç¨‹é—´é€šä¿¡(å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI) å‚æ•°ï¼šå›åˆ°ä¸»çº¿ç¨‹è¦è°ƒç”¨é‚£ä¸ªæ–¹æ³•ã€å‰é¢æ–¹æ³•éœ€è¦ä¼ é€’çš„å‚æ•°ã€æ˜¯å¦ç­‰å¾…ï¼ˆYESæ‰§è¡Œå®Œå†æ‰§è¡Œä¸‹é¢ä»£ç ï¼ŒNOå¯å…ˆæ‰§è¡Œä¸‹é¢ä»£ç ï¼‰*/[self performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:NO];[self performSelector:@selector(setImage:) onThread:[NSThread mainThread] withObject:image waitUntilDone:NO]; 4.NSThreadçº¿ç¨‹çŠ¶æ€è½¬æ¢ GCDä¸­æ¢è°ƒåº¦å™¨ 1.ä»€ä¹ˆæ˜¯GCD GCDå…¨ç§° Grand Central Dispathï¼Œå¯è¯‘ä¸ºâ€å¼ºå¤§çš„ä¸­æ¢è°ƒåº¦å™¨â€ï¼ŒåŸºäºlibdispatch çº¯Cè¯­è¨€ï¼Œé‡Œé¢åŒ…å«äº†è®¸å¤šå¤šçº¿ç¨‹ç›¸å…³éå¸¸å¼ºå¤§çš„å‡½æ•°. ç¨‹åºå‘˜å¯ä»¥æ—¢ä¸å†™ä¸€å¥çº¿ç¨‹ç®¡ç†çš„ä»£ç åˆèƒ½å¾ˆå¥½åœ°ä½¿ç”¨å¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚ 2.GCDåŸºæœ¬æ¦‚å¿µåˆå­¦GCDçš„æ—¶å€™ï¼Œè‚¯å®šä¼šçº ç»“ä¸€äº›çœ‹ä¼¼å¾ˆå…³é”®ä½†å´æ¯«æ— æ„ä¹‰çš„é—®é¢˜(ä¸è¦çº ç»“ï¼Œæ¦‚å¿µç†è§£çš„åŸºç¡€+å®æˆ˜ï¼Œå°±ä¼šè§£å†³ä½ çš„ç–‘æƒ‘)ï¼Œå¯¹äºGCDéœ€è¦å…³æ³¨çš„åªæœ‰ä¸¤ä¸ªæ¦‚å¿µï¼šä»»åŠ¡ &amp; é˜Ÿåˆ—ã€‚è€Œå¯¹äºGCDç›¸å…³çš„æ¦‚å¿µè§£è¯»ï¼Œå¦‚æœä½ å¯¹è¿™äº›éƒ½å·²æœ‰äº†è§£ å¯ä»¥å¿½ç•¥ï¼Œå¦‚æœè¿˜æœ‰ç–‘è™‘å¯ä»¥å‚è€ƒä¸€ä¸‹ ã€ŒiOSå¤šçº¿ç¨‹â€”å¤¯å®åŸºç¡€ã€Œå¤šçº¿ç¨‹åŸºæœ¬æ¦‚å¿µã€ åœ¨è¿™é‡Œå°±æä¾› GCDä¸»è¦æ¦‚å¿µç®€å•æ€»ç»“å°è¡¨æ ¼ï¼Œæ–¹ä¾¿ä½ æŸ¥çœ‹ã€‚ GCD ç‰¹ç‚¹ æ ¸å¿ƒæ¦‚å¿µ ä»»åŠ¡ï¼šæ‰§è¡Œä»€ä¹ˆæ“ä½œ é˜Ÿåˆ—ï¼šç”¨æ¥å­˜æ”¾ä»»åŠ¡ å‡½æ•° å¼‚æ­¥ï¼šå¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› åŒæ­¥ï¼šåªèƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ› é˜Ÿåˆ— å¹¶å‘ï¼šå…è®¸å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼ˆè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼‰ï¼Œå¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥å‡½æ•°ä¸‹æ‰æœ‰æ•ˆ ä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰ å…¨å±€å¹¶å‘é˜Ÿåˆ— ç‰¹ç‚¹ï¼šå­˜åœ¨ä¼˜å…ˆçº§å…³ç³»ï¼ˆDEFAULTé»˜è®¤çš„ã€HIGHé«˜çš„ã€LOWä½çš„ã€BACKGROUNDæœ€ä½çš„ï¼‰ ä¸»é˜Ÿåˆ— ç‰¹ç‚¹ï¼šæ·»åŠ åˆ°ä¸»é˜Ÿåˆ—ä¸Šçš„ä»»åŠ¡ï¼Œå¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¦‚æœä¸»é˜Ÿåˆ—å‘ç°å½“å‰ä¸»çº¿ç¨‹æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆä¸»é˜Ÿåˆ—ä¼šæš‚åœè°ƒç”¨é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œç›´åˆ°ä¸»çº¿ç¨‹ç©ºé—²ä¸ºæ­¢ 3.ä»»åŠ¡&amp;é˜Ÿåˆ—ç»„åˆä½¿ç”¨ä¸‹é¢æ€»ç»“ç®€å•å°è¡¨æ ¼æ–¹ä¾¿ä½ æŸ¥çœ‹ ä»»åŠ¡ &amp; é˜Ÿåˆ— å¹¶å‘é˜Ÿåˆ—(concurrent) ä¸²è¡Œé˜Ÿåˆ—(serial) ä¸»é˜Ÿåˆ—(get_main) å¼‚æ­¥å‡½æ•°(async) ä¼šå¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œ ä¼šå¼€å¯ä¸€æ¡çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ åŒæ­¥å‡½æ•°(sync) ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ˜¯ä¸²è¡Œæ‰§è¡Œ ä¸ä¼šå¼€å¯çº¿ç¨‹ï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæ³¨æ„ï¼šåœ¨ä¸»çº¿ç¨‹è°ƒç”¨ä¼šé€ æˆæ­»é”ï¼Œåœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨ä¸ä¼šé€ æˆæ­»é”ï¼‰ 4.GCDçš„ä¼˜åŠ¿æ˜“ç”¨: GCD æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å¹¶å‘æ¨¡å‹è€Œä¸ä»…ä»…åªæ˜¯é”å’Œçº¿ç¨‹ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬é¿å¼€å¹¶å‘é™·é˜±,è€Œæ˜¯å› ä¸ºåŸºäºblockï¼Œå®ƒèƒ½æä¸ºç®€å•å¾—åœ¨ä¸åŒä»£ç ä½œç”¨åŸŸä¹‹é—´ä¼ é€’ä¸Šä¸‹æ–‡ã€‚çµæ´»: GCD å…·æœ‰åœ¨å¸¸è§æ¨¡å¼(æ¯”å¦‚äº’æ–¥é”ã€å•ä¾‹æ¨¡å¼)ä¸Šçš„ç‰¹ç‚¹ï¼Œä¸”ä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸåˆ›å»ºçº¿ç¨‹ã€è°ƒåº¦ä»»åŠ¡ã€é”€æ¯çº¿ç¨‹ï¼‰ï¼Œç”¨æ›´é«˜æ€§èƒ½çš„æ–¹æ³•ä¼˜åŒ–ä»£ç ï¼Œè€Œä¸”GCD(C API)èƒ½æä¾›æ›´å¤šçš„æ§åˆ¶æƒåŠ›ä»¥åŠå¤§é‡çš„åº•å±‚å‡½æ•°ã€‚æ€§èƒ½: GCD ä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„CPUå†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰,ä¸”è‡ªåŠ¨æ ¹æ®ç³»ç»Ÿè´Ÿè½½æ¥å¢å‡çº¿ç¨‹æ•°é‡ï¼Œè¿™å°±å‡å°‘äº†çº¿ç¨‹é—´åˆ‡æ¢ä»¥åŠå¢åŠ äº†è®¡ç®—æ•ˆç‡ã€‚ æ€ä¹ˆæ ·? å¿ƒåŠ¨ä¸, è¿«ä¸åŠå¾…æƒ³è¦çŸ¥é“æ€ä¹ˆä½¿ç”¨GCDäº†å§, é‚£æˆ‘ä»¬æ­£å¼æŠ•å…¥GCDçš„æ€€æŠ±äº†~æˆ‘ä¼šé€šè¿‡ä»£ç å±•ç¤ºã€‚ 5.GCDåŸºæœ¬ä½¿ç”¨12345678910111213141516171819/** 1.åˆ›å»ºé˜Ÿåˆ— queue1:å…¨å±€å¹¶è¡Œé˜Ÿåˆ—ï¼ˆé»˜è®¤ä¼˜å…ˆçº§ï¼Œå¯ä¸º0ï¼‰ã€queue2:ä¸»é˜Ÿåˆ—ã€queue3:æœªæŒ‡å®štypeåˆ™ä¸ºä¸²è¡Œé˜Ÿåˆ—ã€queue4:æŒ‡å®šä¸²è¡Œé˜Ÿåˆ—ã€queue5:æŒ‡å®šå¹¶å‘é˜Ÿåˆ— */dispatch_queue_t queue1 = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);dispatch_queue_t queue2 = dispatch_get_main_queue();dispatch_queue_t queue3 = dispatch_queue_create("queue3", NULL);dispatch_queue_t queue4 = dispatch_queue_create("queue4", DISPATCH_QUEUE_SERIAL);dispatch_queue_t queue5 = dispatch_queue_create("queue5", DISPATCH_QUEUE_CONCURRENT);// 2.å°è£…å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—dispatch_async(queue1, ^&#123; // ä»»åŠ¡&#125;);// å°è£…åŒæ­¥ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—dispatch_sync(queue1, ^&#123; // ä»»åŠ¡&#125;); 6.GCDå¸¸è§ç”¨æ³•å’Œåº”ç”¨åœºæ™¯1.dispatch_async å¼‚æ­¥å‡½æ•°ä½¿ç”¨æ–¹æ³•:(çº¿ç¨‹é—´é€šä¿¡)12345678// 1.åˆ›å»ºå­çº¿ç¨‹dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; // æ‰§è¡Œä»»åŠ¡ ... dispatch_async(dispatch_get_main_queue(), ^&#123; // å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI ... &#125;);&#125;); åº”ç”¨åœºæ™¯:è¿™ç§ç”¨æ³•éå¸¸å¸¸è§ï¼Œæ¯”å¦‚å¼€å¯ä¸€ä¸ªå¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚ï¼Œå¾…æ•°æ®è¿”å›åè¿”å›ä¸»é˜Ÿåˆ—åˆ·æ–°UIï¼›åˆæ¯”å¦‚è¯·æ±‚å›¾ç‰‡ï¼Œå¾…å›¾ç‰‡è¿”å›åˆ·æ–°UIæˆ–æ˜¯è€—æ—¶æ–‡ä»¶æ“ä½œç­‰ç­‰ã€‚ 2.dispatch_after å»¶è¿Ÿæ‰§è¡Œä½¿ç”¨æ–¹æ³•:(å¤šä¸ªæ–¹æ³•ï¼Œå¥½å¯¹æ¯”)123456789101112131415161718// æ–¹æ³•ä¸€:è°ƒç”¨NSObjectçš„æ–¹æ³•//[self performSelector:@selector(task) withObject:nil afterDelay:2.0];// æ–¹æ³•äºŒ:ä½¿ç”¨NSTimer//[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(task) userInfo:nil repeats:YES];// æ–¹æ³•ä¸‰:ä½¿ç”¨GCD(ä¼˜ç‚¹:å¯ä»¥æ§åˆ¶ä»»åŠ¡åœ¨é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œ)//dispatch_queue_t queue = dispatch_get_main_queue();dispatch_queue_t queue = dispatch_get_global_queue(0, 0);/* ç¬¬ä¸€ä¸ªå‚æ•°:DISPATCH_TIME_NOW ä»ç°åœ¨å¼€å§‹è®¡ç®—æ—¶é—´ ç¬¬äºŒä¸ªå‚æ•°:å»¶è¿Ÿçš„æ—¶é—´ 2.0 GCDæ—¶é—´å•ä½:çº³ç§’ ç¬¬ä¸‰ä¸ªå‚æ•°:é˜Ÿåˆ— */dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), queue, ^&#123; NSLog(@"GCD----%@",[NSThread currentThread]);&#125;); åº”ç”¨åœºæ™¯:è¿™ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€å•çš„å»¶è¿Ÿæ‰§è¡Œçš„æ–¹å¼ï¼Œæ¯”å¦‚åœ¨viewåŠ è½½ç»“æŸå»¶è¿Ÿæ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ç­‰ç­‰ 3.dispatch_time å»¶è¿Ÿæ—¶é—´ä½¿ç”¨æ–¹æ³•:123456789// dispatch_time_tä¸€èˆ¬åœ¨dispatch_afterå’Œdispatch_group_waitç­‰æ–¹æ³•é‡Œä½œä¸ºå‚æ•°ä½¿ç”¨ã€‚è¿™é‡Œæœ€éœ€è¦æ³¨æ„çš„æ˜¯ä¸€äº›å®çš„å«ä¹‰ã€‚// NSEC_PER_SECï¼Œæ¯ç§’æœ‰å¤šå°‘çº³ç§’ã€‚// USEC_PER_SECï¼Œæ¯ç§’æœ‰å¤šå°‘æ¯«ç§’ã€‚// NSEC_PER_USECï¼Œæ¯æ¯«ç§’æœ‰å¤šå°‘çº³ç§’ã€‚// DISPATCH_TIME_NOW ä»ç°åœ¨å¼€å§‹// DISPATCH_TIME_FOREVE æ°¸ä¹…// timeä¸º2sçš„å†™æ³•dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, 2.0 * NSEC_PER_SEC); 4.dispatch_once_t ä¸€æ¬¡æ€§ä»£ç ä½¿ç”¨æ–¹æ³•:(ä¿è¯æŸæ®µä»£ç åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªè¢«æ‰§è¡Œ1æ¬¡)123456// onceTokenç”¨æ¥è®°å½•è¯¥éƒ¨åˆ†çš„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œè¿‡static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123; // åªæ‰§è¡Œ1æ¬¡çš„ä»£ç (è¿™é‡Œé¢é»˜è®¤æ˜¯çº¿ç¨‹å®‰å…¨çš„) NSLog(@"---once----");&#125;); åº”ç”¨åœºæ™¯:å¯ä»¥ä½¿ç”¨å…¶åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œä¹Ÿå¯ä»¥åšä¸€äº›å…¶ä»–åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç ï¼Œæ³¨æ„:çœ‹åˆ°ä¸€æ¬¡æ€§ä»£ç ä½ å¯èƒ½ä¼šæƒ³åˆ°æ‡’åŠ è½½ï¼Œæé†’dispatch_once_t ä¸èƒ½æ”¾åœ¨æ‡’åŠ è½½ä¸­çš„ 5.dispatch_barrier_async æ …æ å‡½æ•°ä½¿ç”¨æ–¹æ³•:1234567891011121314151617181920212223// dispatch_barrier_async ä½œç”¨å¯ä¸€ä¸ªè¯æ¦‚æ‹¬ä¸€ä¸€æ‰¿ä¸Šå¯ä¸‹- (void)barrier &#123; // æ³¨æ„:æ …æ å‡½æ•°(ä¸èƒ½ä½¿ç”¨å…¨å±€å¹¶å‘é˜Ÿåˆ—) //dispatch_queue_t queue = dispatch_get_global_queue(0, 0); dispatch_queue_t queue = dispatch_queue_create("concurrent", DISPATCH_QUEUE_CONCURRENT); dispatch_async(queue, ^&#123; NSLog(@"download1---%@",[NSThread currentThread]); &#125;); [NSThread sleepForTimeInterval:5];// ç¡çœ 5s dispatch_async(queue, ^&#123; NSLog(@"download2---%@",[NSThread currentThread]); &#125;); [NSThread sleepForTimeInterval:5]; // æ …æ å‡½æ•° dispatch_barrier_async(queue, ^&#123; NSLog(@"++++++++++++++++++++++"); &#125;); dispatch_async(queue, ^&#123; NSLog(@"download3---%@",[NSThread currentThread]); &#125;);&#125; æ …æ å‡½æ•°ä½¿ç”¨å…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œæ‰“å°è¾“å‡º12342016-02-11 14:45:43.228 å¤šçº¿ç¨‹2.4[17420:450903] download1---&lt;NSThread: 0x60800007dd00&gt;&#123;number = 3, name = (null)&#125;2016-02-11 14:45:43.228 å¤šçº¿ç¨‹2.4[17420:450906] ++++++++++++++++++++++2016-02-11 14:45:43.228 å¤šçº¿ç¨‹2.4[17420:450943] download3---&lt;NSThread: 0x600000264440&gt;&#123;number = 5, name = (null)&#125;2016-02-11 14:45:43.228 å¤šçº¿ç¨‹2.4[17420:450904] download2---&lt;NSThread: 0x600000260b40&gt;&#123;number = 4, name = (null)&#125; æ …æ å‡½æ•°ä½¿ç”¨æ‰‹åŠ¨åˆ›å»ºå¹¶å‘é˜Ÿåˆ—ï¼Œæ‰“å°è¾“å‡º12342016-02-11 14:51:27.502 å¤šçº¿ç¨‹2.4[17537:454708] download2---&lt;NSThread: 0x60000007e6c0&gt;&#123;number = 4, name = (null)&#125;2016-02-11 14:51:27.502 å¤šçº¿ç¨‹2.4[17537:454709] download1---&lt;NSThread: 0x60800007f5c0&gt;&#123;number = 3, name = (null)&#125;2016-02-11 14:51:27.502 å¤šçº¿ç¨‹2.4[17537:454709] ++++++++++++++++++++++2016-02-11 14:51:27.503 å¤šçº¿ç¨‹2.4[17537:454709] download3---&lt;NSThread: 0x60800007f5c0&gt;&#123;number = 3, name = (null)&#125; åº”ç”¨åœºæ™¯:å’Œdispatch_groupç±»ä¼¼ï¼Œdispatch_barrierä¹Ÿæ˜¯å¼‚æ­¥ä»»åŠ¡é—´çš„ä¸€ç§åŒæ­¥æ–¹å¼ï¼Œå¯ä»¥åœ¨æ¯”å¦‚æ–‡ä»¶çš„è¯»å†™æ“ä½œæ—¶ä½¿ç”¨ï¼Œä¿è¯è¯»æ“ä½œçš„å‡†ç¡®æ€§ã€‚æ³¨æ„:dispatch_barrier_asyncåªåœ¨è‡ªå·±åˆ›å»ºçš„å¹¶å‘é˜Ÿåˆ—ä¸Šæœ‰æ•ˆã€‚ 6.dispatch_apply å¿«é€Ÿè¿­ä»£ä½¿ç”¨æ–¹æ³•:1234567891011// æ³¨æ„:ä¼šå¼€å­çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸€èµ·å®Œæˆéå†ä»»åŠ¡ï¼Œä»»åŠ¡çš„æ‰§è¡Œæ˜¯å¹¶å‘çš„- (void)apply &#123; /** iterations éå†çš„æ¬¡æ•° queue é˜Ÿåˆ—(åªèƒ½æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼Œä¼ ä¸»é˜Ÿåˆ—ä¼šé€ æˆæ­»é”ï¼Œä¼ ä¸²è¡Œé˜Ÿåˆ—æ— æ•ˆæœ) index ç´¢å¼• */ dispatch_apply(4, dispatch_get_global_queue(0, 0), ^(size_t index) &#123; NSLog(@"download--%zd--%@",index,[NSThread currentThread]); &#125;);&#125; æ‰“å°è¾“å‡º:12342016-02-11 15:19:53.490 å¤šçº¿ç¨‹2.4[18411:477679] download--3--&lt;NSThread: 0x608000073940&gt;&#123;number = 5, name = (null)&#125;2016-02-11 15:19:53.490 å¤šçº¿ç¨‹2.4[18411:477641] download--0--&lt;NSThread: 0x608000066c00&gt;&#123;number = 1, name = main&#125;2016-02-11 15:19:53.490 å¤šçº¿ç¨‹2.4[18411:477682] download--1--&lt;NSThread: 0x600000076f00&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:19:53.490 å¤šçº¿ç¨‹2.4[18411:477680] download--2--&lt;NSThread: 0x600000077100&gt;&#123;number = 4, name = (null)&#125; åº”ç”¨åœºæ™¯:dispatch_applyå¹¶è¡Œçš„è¿è¡Œæœºåˆ¶ï¼Œæ•ˆç‡ä¸€èˆ¬å¿«äºforå¾ªç¯çš„ç±»ä¸²è¡Œæœºåˆ¶ï¼ˆåœ¨forä¸€æ¬¡å¾ªç¯ä¸­çš„å¤„ç†ä»»åŠ¡å¾ˆå¤šæ—¶å·®è·æ¯”è¾ƒå¤§ï¼‰ã€‚æ¯”å¦‚è¿™å¯ä»¥ç”¨æ¥æ‹‰å–ç½‘ç»œæ•°æ®åæå‰ç®—å‡ºå„ä¸ªæ§ä»¶çš„å¤§å°ï¼Œé˜²æ­¢ç»˜åˆ¶æ—¶è®¡ç®—ï¼Œæé«˜è¡¨å•æ»‘åŠ¨æµç•…æ€§ï¼Œå¦‚æœç”¨forå¾ªç¯ï¼Œè€—æ—¶è¾ƒå¤šï¼Œå¹¶ä¸”æ¯ä¸ªè¡¨å•çš„æ•°æ®æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥ç”¨dispatch_applyæ¯”è¾ƒå¥½ã€‚ 7.dispatch_group_t é˜Ÿåˆ—ç»„ä½¿ç”¨æ–¹æ³•:123456789101112131415161718192021222324252627282930// é˜Ÿåˆ—ç»„ï¼šä¼šç›‘å¬ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œé€šçŸ¥group- (void)group1 &#123; dispatch_queue_t queue = dispatch_get_global_queue(0, 0); dispatch_group_t group = dispatch_group_create(); dispatch_group_async(group, queue, ^&#123; NSLog(@"1-----%@", [NSThread currentThread]); &#125;); [NSThread sleepForTimeInterval:2]; dispatch_group_async(group, queue, ^&#123; NSLog(@"2-----%@", [NSThread currentThread]); &#125;); [NSThread sleepForTimeInterval:2]; dispatch_group_async(group, queue, ^&#123; NSLog(@"3-----%@", [NSThread currentThread]); &#125;); [NSThread sleepForTimeInterval:2]; // æ–¹æ³•ä¸€:ç»„é€šçŸ¥ // æ‹¦æˆªé€šçŸ¥ï¼Œå½“é˜Ÿåˆ—ç»„ä¸­æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™å›è¿›å…¥åˆ°è¿™ä¸ªæ–¹æ³• //dispatch_group_notify(group, queue, ^&#123; // NSLog(@"----group_notify---"); //&#125;); // æ–¹æ³•äºŒ:ç»„ç­‰å¾… dispatch_group_wait(group, DISPATCH_TIME_FOREVER); NSLog(@"----end----");&#125; group_notify æ‰“å°è¾“å‡º:123452016-02-11 15:40:30.083 å¤šçº¿ç¨‹2.4[19029:495158] 1-----&lt;NSThread: 0x608000073ac0&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:40:32.084 å¤šçº¿ç¨‹2.4[19029:495158] 2-----&lt;NSThread: 0x608000073ac0&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:40:34.084 å¤šçº¿ç¨‹2.4[19029:495158] 3-----&lt;NSThread: 0x608000073ac0&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:40:36.085 å¤šçº¿ç¨‹2.4[19029:494872] ----end----2016-02-11 15:40:36.085 å¤šçº¿ç¨‹2.4[19029:495158] ----group_notify--- group_wait æ‰“å°è¾“å‡º:12342016-02-11 15:38:30.374 å¤šçº¿ç¨‹2.4[18909:492794] 1-----&lt;NSThread: 0x608000266900&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:38:35.374 å¤šçº¿ç¨‹2.4[18909:492794] 2-----&lt;NSThread: 0x608000266900&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:38:40.376 å¤šçº¿ç¨‹2.4[18909:492794] 3-----&lt;NSThread: 0x608000266900&gt;&#123;number = 3, name = (null)&#125;2016-02-11 15:38:45.377 å¤šçº¿ç¨‹2.4[18909:492734] ----end---- æ³¨æ„:group_notify æ‹¦æˆªé€šçŸ¥ï¼Œå½“é˜Ÿåˆ—ç»„ä¸­æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™å›è¿›å…¥åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œé—®é¢˜? è¯¥æ–¹æ³•æ˜¯é˜»å¡çš„å—? â€“&gt; å†…éƒ¨æœ¬èº«æ˜¯å¼‚æ­¥çš„ã€‚group_wait ç­‰å¾….æ­»ç­‰. ç›´åˆ°é˜Ÿåˆ—ç»„ä¸­æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ä¹‹åæ‰èƒ½æ‰§è¡Œï¼Œ(DISPATCH_TIME_NOW : ç°åœ¨ï¼ŒDISPATCH_TIME_FOREVER : æ°¸è¿œ) ä½œç”¨ï¼šé˜»å¡ã€‚ 8.dispatch_sync æ­»é”æ€æ ·ä¼šé€ æˆæ­»é” &amp; å¦‚ä½•é¿å¼€æ­»é”ä½¿ç”¨æ–¹æ³•:12345678910111213141516- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // ç›´æ¥è°ƒç”¨ï¼Œä¸»çº¿ç¨‹è°ƒç”¨ ä¼šé€ æˆæ­»é” //[self syncMain]; // æ­£ç¡®è°ƒç”¨ï¼Œå­çº¿ç¨‹ä¸­è°ƒç”¨ ä¸ä¼šé€ æˆæ­»é” [NSThread detachNewThreadSelector:@selector(syncMain) toTarget:self withObject:nil]; &#125;- (void)syncMain &#123; // 1.è·å¾—ä¸»é˜Ÿåˆ— dispatch_queue_t queue = dispatch_get_main_queue(); // 2.åŒæ­¥å‡½æ•° dispatch_sync(queue, ^&#123; NSLog(@"download1---%@",[NSThread currentThread]); &#125;); æ‰“å°è¾“å‡º:12341.åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ ä¼šé€ æˆæ­»é”2.åœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨ ä¸ä¼šé€ æˆæ­»é”2016-02-11 16:29:59.410 å¤šçº¿ç¨‹2.4[19986:525068] download1---&lt;NSThread: 0x60800007a640&gt;&#123;number = 1, name = main&#125; ä¸‹é¢è¿™ç§æƒ…å†µï¼Œä¹Ÿä¼šé€ æˆæ­»é”123456789101112// æ­»é”- (void)syncMain2 &#123; // å› ä¸ºdispatch_applyä¼šå¡ä½å½“å‰çº¿ç¨‹ï¼Œå†…éƒ¨çš„dispatch_applyä¼šç­‰å¾…å¤–éƒ¨ï¼Œå¤–éƒ¨çš„ç­‰å¾…å†…éƒ¨ï¼Œæ‰€ä»¥æ­»é”ã€‚ dispatch_queue_t queue = dispatch_queue_create("queue", DISPATCH_QUEUE_SERIAL); dispatch_apply(4, queue, ^(size_t index) &#123; NSLog(@"download1--%zd--%@",index,[NSThread currentThread]); NSLog(@"+++++++++++++++"); dispatch_apply(4, queue, ^(size_t index) &#123; NSLog(@"download2--%zd--%@",index,[NSThread currentThread]); &#125;); &#125;);&#125; 9.dispatch_suspend&amp;dispatch_resume æŒ‚èµ·é˜Ÿåˆ—å’Œæ¢å¤é˜Ÿåˆ—ä½¿ç”¨æ–¹æ³•:123dispatch_queue_t queue = dispatch_get_main_queue();dispatch_suspend(queue); // æŒ‚èµ·(æš‚åœ)é˜Ÿåˆ—dispatch_resume(queue); // æ¢å¤é˜Ÿåˆ— åº”ç”¨åœºæ™¯:æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³è®©é˜Ÿåˆ—ä¸­çš„æŸäº›ä»»åŠ¡é©¬ä¸Šæ‰§è¡Œï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‚èµ·æ“ä½œæ¥é˜»æ­¢ä¸€ä¸ªé˜Ÿåˆ—ä¸­å°†è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚æ³¨æ„:æ‰§è¡ŒæŒ‚èµ·æ“ä½œä¸ä¼šå¯¹å·²ç»å¼€å§‹æ‰§è¡Œçš„ä»»åŠ¡èµ·ä½œç”¨ï¼Œå®ƒä»…ä»…åªä¼šé˜»æ­¢å°†è¦è¿›è¡Œä½†æ˜¯è¿˜æœªå¼€å§‹çš„ä»»åŠ¡ã€‚ 7.å†…å­˜å’Œå®‰å…¨å†…å­˜MRCï¼šç”¨dispatch_retainå’Œdispatch_releaseç®¡ç†dispatch_object_tå†…å­˜ã€‚ARCï¼šARCåœ¨ç¼–è¯‘æ—¶åˆ»è‡ªåŠ¨ç®¡ç†dispatch_object_tå†…å­˜ï¼Œä½¿ç”¨retainå’Œreleaseä¼šæŠ¥é”™ã€‚ å®‰å…¨dispatch_queueæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½ å¯ä»¥éšæ„å¾€é‡Œé¢æ·»åŠ ä»»åŠ¡ã€‚ è¡¥å……1.æ³¨æ„ARCä¸æ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§é…ç½®MRCç¯å¢ƒï¼šbuild setting -&gt;æœç´¢automatic ref-&gt;ä¿®æ”¹ä¸ºNO 2.åœ¨MRCç¯å¢ƒä¸‹ï¼Œå¦‚æœç”¨æˆ·retainäº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›instanceå˜é‡ï¼Œä¸å¯¹å¼•ç”¨è®¡æ•°å™¨+1å¦‚æœç”¨æˆ·releaseäº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åšï¼Œå› ä¸ºå•ä¾‹æ¨¡å¼åœ¨æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éƒ½æ‹¥æœ‰ä¸”åªæœ‰ä¸€ä»½ï¼Œç¨‹åºé€€å‡ºä¹‹åè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹å¼•ç”¨è®¡æ•°å™¨æ“ä½œ 8.å•ä¾‹æ¨¡å¼å•ä¾‹ä¹Ÿå°±æ˜¯åœ¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­, è¯¥ç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡, æ­¤æ—¶ä¸ºäº†ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡, æˆ‘ä»¬è¿™é‡Œç”¨åˆ°äº†dispatch_onceå‡½æ•° åœ¨è¿™é‡Œæˆ‘å°±æ•´ç†å¥½å§ï¼Œå°±ä¸ç›´æ¥ç²˜ä¸Šä»£ç äº†ï¼Œå¯èƒ½ä¼šå¾ˆå¤šåœ°æ–¹ç”¨åˆ°ï¼Œåˆ°æ—¶ä¼šå¾ˆéº»çƒ¦ã€‚ä¸‹é¢æ•´ç†äº†å•ä¾‹æ¨¡å¼é€šç”¨çš„å®ï¼Œå¦‚æœä½ éœ€è¦å¯ä»¥ç›´æ¥æ‹·èµ°ï¼Œæ˜¯å§~1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// å®šä¹‰å¸¦å‚æ•°çš„å®// MRCå•ä¾‹æ¨¡å¼ &amp; ARCå•ä¾‹æ¨¡å¼#define SingleH(name) +(instancetype)share##name;#if __has_feature(objc_arc)//æ¡ä»¶æ»¡è¶³ ARC#define SingleM(name) static id _instance;\+(instancetype)allocWithZone:(struct _NSZone *)zone\&#123;\ static dispatch_once_t onceToken;\ dispatch_once(&amp;onceToken, ^&#123;\ _instance = [super allocWithZone:zone];\ &#125;);\ return _instance;\&#125;\+(instancetype)share##name\&#123;\ return [[self alloc]init];\&#125;\-(id)copyWithZone:(NSZone *)zone\&#123;\ return _instance;\&#125;\-(id)mutableCopyWithZone:(NSZone *)zone\&#123;\ return _instance;\&#125;#else//MRC#define SingleM(name) static id _instance;\+(instancetype)allocWithZone:(struct _NSZone *)zone\&#123;\ static dispatch_once_t onceToken;\ dispatch_once(&amp;onceToken, ^&#123;\ _instance = [super allocWithZone:zone];\ &#125;);\ return _instance;\&#125;\+(instancetype)share##name\&#123;\ return [[self alloc]init];\&#125;\-(id)copyWithZone:(NSZone *)zone\&#123;\ return _instance;\&#125;\-(id)mutableCopyWithZone:(NSZone *)zone\&#123;\ return _instance;\&#125;\-(oneway void)release&#123;&#125;\-(instancetype)retain\&#123;\ return _instance;\&#125;\-(NSUInteger)retainCount\&#123;\ return MAXFLOAT;\&#125;#endif 9.æ€»ç»“GCDå¯è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡GCDå¯ä»¥åŠåˆ°çº¿ç¨‹å®‰å…¨GCDå¯ç”¨äºå»¶è¿Ÿæ‰§è¡ŒGCDéœ€è¦æ³¨æ„æ­»é”é—®é¢˜(ä¸è¦åœ¨å½“å‰é˜Ÿåˆ—è°ƒç”¨åŒæ­¥å‡½æ•°) NSOperationæ“ä½œé˜Ÿåˆ—ç¯‡ 1.ä»€ä¹ˆæ˜¯NSOperationNSOperationæ˜¯è‹¹æœæä¾›ç»™æˆ‘ä»¬çš„ä¸€å¥—å¤šçº¿ç¨‹è§£å†³æ–¹æ¡ˆã€‚å®é™…ä¸ŠNSOperationæ˜¯åŸºäºGCD çš„å°è£…ï¼Œå®Œå…¨é¢å‘å¯¹è±¡ï¼Œä½†æ˜¯æ¯”GCDæ›´ç®€å•æ˜“ç”¨ã€ä»£ç å¯è¯»æ€§ä¹Ÿæ›´é«˜ï¼Œä½¿ç”¨ä¹Ÿæ›´å¥½ç†è§£ã€‚ä½¿ç”¨èµ·æ¥ä¹Ÿå’ŒGCDå·®ä¸å¤šï¼Œå…¶ä¸­ NSOperationç›¸å½“äºGCDä¸­çš„ä»»åŠ¡ï¼Œè€ŒNSOperationQueueåˆ™ç›¸å½“äºGCDä¸­çš„é˜Ÿåˆ—ã€‚æ³¨æ„:NSOperationéœ€è¦é…åˆNSOperationQueueæ¥å®ç°å¤šçº¿ç¨‹ï¼ˆ1.å°†è¦æ“ä½œä»»åŠ¡å°è£…åˆ°ä¸€ä¸ªNSOperationå¯¹è±¡ä¸­ï¼Œ2.å°†æ­¤ä»»åŠ¡æ·»åŠ åˆ°ä¸€ä¸ªNSOperationQueueå¯¹è±¡ä¸­ï¼Œç„¶åç³»ç»Ÿå°±ä¼šè‡ªåŠ¨åœ¨æ‰§è¡Œä»»åŠ¡ï¼‰ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼ŒNSOperationå•ç‹¬ä½¿ç”¨æ—¶ç³»ç»ŸåŒæ­¥æ‰§è¡Œæ“ä½œï¼Œå¹¶æ²¡æœ‰å¼€è¾Ÿæ–°çº¿ç¨‹çš„èƒ½åŠ›ï¼Œåªæœ‰é…åˆNSOperationQueueæ‰èƒ½å®ç°å¼‚æ­¥æ‰§è¡Œã€‚ 2.NSOperationç›¸å…³æ¦‚å¿µ å¹¶è¡Œ(Concurrent) &amp; ä¸²è¡Œ(Serial)å¹¶è¡Œå’Œä¸²è¡Œæè¿°çš„æ˜¯ä»»åŠ¡å’Œä»»åŠ¡ä¹‹é—´çš„æ‰§è¡Œæ–¹å¼ï¼Œå¹¶è¡Œæ˜¯ä»»åŠ¡Aå’Œä»»åŠ¡Bå¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œä¸²è¡Œæ˜¯ä»»åŠ¡Aæ‰§è¡Œå®Œäº†ä»»åŠ¡Bæ‰èƒ½æ‰§è¡Œ(æŒ‰é¡ºåºæ‰§è¡Œ)ã€‚ å¼‚æ­¥(Asynchronous) &amp; åŒæ­¥(Synchronous)å¼‚æ­¥å’ŒåŒæ­¥æè¿°çš„å…¶å®å°±æ˜¯å‡½æ•°ä»€ä¹ˆæ—¶å€™è¿”å›. æ¯”å¦‚ç”¨æ¥ä¸‹è½½å›¾ç‰‡çš„å‡½æ•°: åŒæ­¥å‡½æ•°åªæœ‰åœ¨imageä¸‹è½½ç»“æŸä¹‹åæ‰è¿”å›, ä¸‹è½½çš„è¿™æ®µæ—¶é—´å‡½æ•°åªèƒ½ç­‰å¾…ï¼Œè€Œå¼‚æ­¥å‡½æ•°,ä¸ä¼šå»ç­‰å®ƒå®Œæˆ(å¼‚æ­¥å‡½æ•°ä¸ä¼šå µå¡å½“å‰çº¿ç¨‹å»æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°)ã€‚ å¹¶å‘(Concurrency) &amp; å¹¶è¡Œ(Parallelism)è¿™ä¸ªæ›´å®¹æ˜“æ··æ·†äº†, å¹¶å‘å’Œå¹¶è¡Œéƒ½æ˜¯ç”¨æ¥è®©ä¸åŒçš„ä»»åŠ¡å¯ä»¥â€åŒæ—¶æ‰§è¡Œâ€ã€‚ åªæ˜¯å¹¶è¡Œæ˜¯çœŸåŒæ—¶ï¼Œè€Œå¹¶å‘æ˜¯å‡åŒæ—¶(æ˜¯CPUåœ°åœ¨å„ä¸ªè¿›ç¨‹ä¹‹é—´å¿«é€Ÿåˆ‡æ¢, ç»™äººä¸€ç§èƒ½åŒæ—¶å¤„ç†å¤šä»»åŠ¡çš„é”™è§‰)ã€‚ 3.NSInvocationOperation&amp; NSBlockOperationNSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,å®ƒä¸èƒ½ç›´æ¥ä½¿ç”¨,æ‰€ä»¥ä½ å¿…é¡»ä½¿ç”¨NSOperationå­ç±»,ç³»ç»Ÿå·²ç»ç»™æˆ‘ä»¬å°è£…äº†NSBlockOperationå’Œ NSInvocationOperationè¿™ä¸¤ä¸ªå®ä½“ç±»ï¼Œä¸è¿‡æˆ‘ä»¬æ›´å¤šçš„ä½¿ç”¨æ˜¯è‡ªå·±ç»§æ‰¿å¹¶å®šåˆ¶è‡ªå·±çš„æ“ä½œã€‚ 1.NSInvocationOperationï¼šä½¿ç”¨è¿™ä¸ªç±»æ¥åˆå§‹åŒ–ä¸€ä¸ªæ“ä½œ,å®ƒåŒ…æ‹¬æŒ‡å®šå¯¹è±¡çš„è°ƒç”¨selectorã€‚ 2.NSBlockOperationï¼šä½¿ç”¨è¿™ä¸ªç±»æ¥ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªblockåˆå§‹åŒ–æ“ä½œ,æ“ä½œæœ¬èº«å¯ä»¥åŒ…å«å¤šä¸ªå—ã€‚å½“æ‰€æœ‰blockè¢«æ‰§è¡Œæ“ä½œå°†è¢«è§†ä¸ºå®Œæˆã€‚ 4.NSOperationä¼˜åŠ¿ NSOperationæ˜¯åŸºäºGCDçš„å°è£…, æ‹¥æœ‰æ›´å¤šçš„API(suspended, cancelled). åœ¨NSOperationQueueä¸­, å¯ä»¥æŒ‡å®šå„ä¸ªNSOperationä¹‹é—´çš„ä¾èµ–å…³ç³»(æ³¨æ„:ä¸èƒ½ç›¸äº’ä¾èµ–). ç”¨KVOå¯ä»¥æ–¹ä¾¿çš„ç›‘æµ‹NSOperationçš„çŠ¶æ€(isExecuted, isFinished, isCancelled). æ›´é«˜çš„å¯å®šåˆ¶èƒ½åŠ›, ä½ å¯ä»¥ç»§æ‰¿NSOperationå®ç°å¯å¤ç”¨çš„é€»è¾‘æ¨¡å—. 5.NSOperationåŸºæœ¬ä½¿ç”¨åœ¨ä¸ä½¿ç”¨NSOperationQueueï¼Œéœ€è¦è°ƒç”¨ start æ–¹æ³•æ¥å¯åŠ¨ä»»åŠ¡ï¼Œä¸å¼€å¯æ–°çº¿ç¨‹ï¼Œå®ƒä¼š é»˜è®¤åœ¨å½“å‰é˜Ÿåˆ—åŒæ­¥æ‰§è¡Œã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ä¸­é€”å–æ¶ˆä¸€ä¸ªä»»åŠ¡ï¼Œåªéœ€è¦è°ƒç”¨å…¶ cancel æ–¹æ³•å³å¯ã€‚ 1.NSInvocationOperation12345678910NSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(download) object:nil];[op1 start];// å¯åŠ¨``` 2.NSBlockOperation```objcNSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(download) object:nil];[op1 start]; è¿™é‡Œï¼ŒNSBlockOperation è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ï¼šaddExecutionBlock:(è¿½åŠ ä»»åŠ¡)ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥ç»™ NSBlockOperation æ·»åŠ å¤šä¸ªæ‰§è¡Œ Blockã€‚é¢å¤–æ“ä½œä¸­çš„ä»»åŠ¡ ä¼šå¼€å­çº¿ç¨‹å¹¶å‘æ‰§è¡Œä»»åŠ¡(è¿™é‡Œå¯èƒ½æ˜¯å­çº¿ç¨‹ä¹Ÿå¯èƒ½æ˜¯ä¸»çº¿ç¨‹æ‰§è¡Œ) æ³¨æ„ä¸‹é¢çš„æ‰“å°ç»“æœï¼š1234567891011121314151617181920212223242526// 1.åˆ›å»ºæ“ä½œ,å°è£…ä»»åŠ¡NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"1----%@",[NSThread currentThread]);&#125;];NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"2----%@",[NSThread currentThread]);&#125;];NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"3----%@",[NSThread currentThread]);&#125;];// 2.è¿½åŠ ä»»åŠ¡[op3 addExecutionBlock:^&#123; NSLog(@"4----%@",[NSThread currentThread]);&#125;];[op3 addExecutionBlock:^&#123; NSLog(@"5----%@",[NSThread currentThread]);&#125;];[op3 addExecutionBlock:^&#123; NSLog(@"6----%@",[NSThread currentThread]);&#125;];// 3.å¯åŠ¨[op1 start];[op2 start];[op3 start]; æ‰“å°è¾“å‡º:1234562016-02-13 16:13:15.690 å¤šçº¿ç¨‹2.4[6890:173737] 1----&lt;NSThread: 0x60000006be40&gt;&#123;number = 1, name = main&#125;2016-02-13 16:13:15.691 å¤šçº¿ç¨‹2.4[6890:173737] 2----&lt;NSThread: 0x60000006be40&gt;&#123;number = 1, name = main&#125;2016-02-13 16:13:15.692 å¤šçº¿ç¨‹2.4[6890:173737] 3----&lt;NSThread: 0x60000006be40&gt;&#123;number = 1, name = main&#125;2016-02-13 16:13:15.692 å¤šçº¿ç¨‹2.4[6890:174061] 4----&lt;NSThread: 0x600000079d00&gt;&#123;number = 3, name = (null)&#125;2016-02-13 16:13:15.692 å¤šçº¿ç¨‹2.4[6890:173737] 6----&lt;NSThread: 0x60000006be40&gt;&#123;number = 1, name = main&#125;2016-02-13 16:13:15.692 å¤šçº¿ç¨‹2.4[6890:174072] 5----&lt;NSThread: 0x600000079080&gt;&#123;number = 4, name = (null)&#125; 3.è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperation,å®ç°å†…éƒ¨ç›¸åº”çš„æ–¹æ³•(é‡å†™main)1234567891011121314151617// LNOperation.m#import "LNOperation.h"@implementation LNOperation- (void)main &#123; NSLog(@"è‡ªå®šä¹‰NSOperation----%@",[NSThread currentThread]);&#125;// **********************æˆ‘æ˜¯åˆ†å‰²çº¿***************************//// 1.å°è£…æ“ä½œLNOperation *op1 = [[LNOperation alloc] init];LNOperation *op2 = [[LNOperation alloc] init];// 2.åˆ›å»ºé˜Ÿåˆ—[op1 start];[op2 start]; æ‰“å°è¾“å‡º:122016-02-13 16:18:28.687 å¤šçº¿ç¨‹2.4[7015:177012] è‡ªå®šä¹‰NSOperation----&lt;NSThread: 0x60800007f780&gt;&#123;number = 1, name = main&#125;2016-02-13 16:18:28.688 å¤šçº¿ç¨‹2.4[7015:177012] è‡ªå®šä¹‰NSOperation----&lt;NSThread: 0x60800007f780&gt;&#123;number = 1, name = main&#125; 6.NSOperationç»“åˆNSOperationQueueä½¿ç”¨NSOperationQueue æŒ‰ç±»å‹æ¥è¯´å…±æœ‰ä¸¤ç§ç±»å‹ï¼šä¸»é˜Ÿåˆ—ã€å…¶ä»–é˜Ÿåˆ—ã€‚åªè¦æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ä»»åŠ¡çš„ start æ–¹æ³•ã€‚1.ä¸»é˜Ÿåˆ—å‡¡æ˜¯æ·»åŠ åˆ°ä¸»é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼ˆNSOperationï¼‰ï¼Œéƒ½ä¼šæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­ ä¸²è¡Œæ‰§è¡Œã€‚NSOperationQueue *queue1 = [NSOperationQueue mainQueue];2.å…¶ä»–é˜Ÿåˆ—ï¼ˆéä¸»é˜Ÿåˆ—ï¼‰æ·»åŠ åˆ°è¿™ç§é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼ˆNSOperationï¼‰ï¼Œå°±ä¼šè‡ªåŠ¨æ”¾åˆ°å­çº¿ç¨‹ä¸­ å¹¶å‘æ‰§è¡Œï¼ŒåŒæ—¶å…·æœ‰ï¼šä¸²è¡Œã€å¹¶å‘åŠŸèƒ½ã€‚NSOperationQueue *queue = [[NSOperationQueue alloc] init]; ç»“åˆä½¿ç”¨:1.æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—ä¸­ addOperation:12345678910111213141516171819202122- (void)addOperationQueue &#123; // 1.åˆ›å»ºé˜Ÿåˆ— //NSOperationQueue *queue = [NSOperationQueue mainQueue]; NSOperationQueue *queue = [[NSOperationQueue alloc] init]; // 2.å°è£…æ“ä½œ NSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task) object:nil]; NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; NSLog(@"op2--%@", [NSThread currentThread]); &#125; &#125;]; // 3.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ— [queue addOperation:op1]; [queue addOperation:op2];&#125;- (void)task &#123; for (int i = 0; i &lt; 2; i++) &#123; NSLog(@"op1--%@", [NSThread currentThread]); &#125;&#125; ä½¿ç”¨éä¸»é˜Ÿåˆ—æ‰“å°è¾“å‡º:12342016-02-13 16:54:53.312 å¤šçº¿ç¨‹2.4[7731:198138] op1--&lt;NSThread: 0x60800026f400&gt;&#123;number = 3, name = (null)&#125;2016-02-13 16:54:53.312 å¤šçº¿ç¨‹2.4[7731:198134] op2--&lt;NSThread: 0x6000002662c0&gt;&#123;number = 4, name = (null)&#125;2016-02-13 16:54:53.313 å¤šçº¿ç¨‹2.4[7731:198138] op1--&lt;NSThread: 0x60800026f400&gt;&#123;number = 3, name = (null)&#125;2016-02-13 16:54:53.313 å¤šçº¿ç¨‹2.4[7731:198134] op2--&lt;NSThread: 0x6000002662c0&gt;&#123;number = 4, name = (null)&#125; ä½¿ç”¨ä¸»é˜Ÿåˆ—æ‰“å°è¾“å‡º:12342016-02-13 17:34:30.241 å¤šçº¿ç¨‹2.4[8595:228001] op1--&lt;NSThread: 0x600000072340&gt;&#123;number = 1, name = main&#125;2016-02-13 17:34:30.241 å¤šçº¿ç¨‹2.4[8595:228001] op1--&lt;NSThread: 0x600000072340&gt;&#123;number = 1, name = main&#125;2016-02-13 17:34:30.242 å¤šçº¿ç¨‹2.4[8595:228001] op2--&lt;NSThread: 0x600000072340&gt;&#123;number = 1, name = main&#125;2016-02-13 17:34:30.242 å¤šçº¿ç¨‹2.4[8595:228001] op2--&lt;NSThread: 0x600000072340&gt;&#123;number = 1, name = main&#125; 2.æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—ä¸­ addOperationWithBlock:,ç®€æ˜“æ–¹æ³•:12345678910111213NSOperationQueue *queue = [[NSOperationQueue alloc] init];// æ·»åŠ ä»»åŠ¡åˆ°é˜Ÿåˆ—ä¸­[queue addOperationWithBlock:^&#123; for (NSInteger i= 0; i &lt;2; i++) &#123; NSLog(@"op1--%@", [NSThread currentThread]); &#125;&#125;];[queue addOperationWithBlock:^&#123; for (NSInteger i= 0; i &lt;2; i++) &#123; NSLog(@"op2--%@", [NSThread currentThread]); &#125;&#125;]; æ‰“å°è¾“å‡º:12342016-02-13 17:28:12.586 å¤šçº¿ç¨‹2.4[8446:222668] op1--&lt;NSThread: 0x600000262740&gt;&#123;number = 3, name = (null)&#125;2016-02-13 17:28:12.586 å¤šçº¿ç¨‹2.4[8446:222667] op2--&lt;NSThread: 0x608000263d40&gt;&#123;number = 4, name = (null)&#125;2016-02-13 17:28:12.587 å¤šçº¿ç¨‹2.4[8446:222668] op1--&lt;NSThread: 0x600000262740&gt;&#123;number = 3, name = (null)&#125;2016-02-13 17:28:12.587 å¤šçº¿ç¨‹2.4[8446:222667] op2--&lt;NSThread: 0x608000263d40&gt;&#123;number = 4, name = (null)&#125; 7.éä¸»é˜Ÿåˆ—æ§åˆ¶ä¸²è¡Œå’Œå¹¶è¡Œæ‰§è¡Œçš„å…³é”®NSOperationQueueåˆ›å»ºçš„å…¶ä»–é˜Ÿåˆ— åŒæ—¶å…·æœ‰ä¸²è¡Œã€å¹¶å‘åŠŸèƒ½ï¼Œä¸Šè¾¹æˆ‘ä»¬æ¼”ç¤ºäº†å¹¶å‘åŠŸèƒ½ï¼Œé‚£ä¹ˆä¸‹é¢è®²è®²ä¸²è¡ŒåŠŸèƒ½ï¼Œè¿™é‡Œæœ‰ä¸ªå…³é”®å‚æ•°ï¼šmaxConcurrentOperationCount é˜Ÿåˆ—æœ€å¤§å¹¶å‘æ•°(åŒä¸€æ—¶é—´æœ€å¤šå‡ ä¸ªä»»åŠ¡å¯ä»¥æ‰§è¡Œ)è¯¯åŒº:ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ä¸ç­‰äºåªå¼€ä¸€æ¡çº¿ç¨‹(çº¿ç¨‹åŒæ­¥,è¦çœ‹ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼æ˜¯é¡ºåºè¿˜æ˜¯å¹¶å‘çš„) maxConcurrentOperationCount æè¿° .&gt; 1 å¹¶å‘é˜Ÿåˆ— = 1 ä¸²è¡Œé˜Ÿåˆ— = 0 ä¸ä¼šæ‰§è¡Œä»»åŠ¡ = -1 ç‰¹æ®Šæ„ä¹‰,æœ€å¤§å€¼è¡¨ç¤ºä¸å—é™åˆ¶ 123456789101112131415161718192021// 1.åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// 2.è®¾ç½®é˜Ÿåˆ—æœ€å¤§å¹¶å‘æ•°(åŒä¸€æ—¶é—´æœ€å¤šå‡ ä¸ªä»»åŠ¡å¯ä»¥æ‰§è¡Œ)queue.maxConcurrentOperationCount = 1;// ä¸²è¡Œ// 3.å°è£…æ“ä½œNSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"1---- %@",[NSThread currentThread]);&#125;];NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"2---- %@",[NSThread currentThread]);&#125;];NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"3---- %@",[NSThread currentThread]);&#125;];// 4.æ·»åŠ åˆ°é˜Ÿåˆ—[queue addOperation:op1];[queue addOperation:op2];[queue addOperation:op3]; æœ€å¤§å¹¶å‘æ•° =1ï¼Œæ‰“å°è¾“å‡º:1232016-02-13 17:59:24.702 å¤šçº¿ç¨‹2.4[9096:244592] 1---- &lt;NSThread: 0x600000071e80&gt;&#123;number = 3, name = (null)&#125;2016-02-13 17:59:24.703 å¤šçº¿ç¨‹2.4[9096:244593] 2---- &lt;NSThread: 0x608000077080&gt;&#123;number = 4, name = (null)&#125;2016-02-13 17:59:24.703 å¤šçº¿ç¨‹2.4[9096:244592] 3---- &lt;NSThread: 0x600000071e80&gt;&#123;number = 3, name = (null)&#125; æœ€å¤§å¹¶å‘æ•° =2ï¼Œæ‰“å°è¾“å‡º:1232016-02-13 18:03:17.608 å¤šçº¿ç¨‹2.4[9178:246935] 2---- &lt;NSThread: 0x600000267d80&gt;&#123;number = 4, name = (null)&#125;2016-02-13 18:03:17.608 å¤šçº¿ç¨‹2.4[9178:246936] 1---- &lt;NSThread: 0x600000262280&gt;&#123;number = 3, name = (null)&#125;2016-02-13 18:03:17.612 å¤šçº¿ç¨‹2.4[9178:246936] 3---- &lt;NSThread: 0x600000262280&gt;&#123;number = 3, name = (null)&#125; 8.æ·»åŠ æ“ä½œä¾èµ–å’Œæ“ä½œç›‘å¬NSOperation æœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯ æ·»åŠ ä¾èµ–addDependency:ï¼ˆä¹Ÿå¯ä»¥è·¨é˜Ÿåˆ—ä¾èµ–ï¼‰ï¼Œæ³¨æ„:è¿™é‡Œä¸èƒ½ç›¸äº’ä¾èµ–ã€‚åªæœ‰æ‰€æœ‰ä¾èµ–çš„å¯¹è±¡éƒ½å·²ç»å®Œæˆæ“ä½œï¼Œå½“å‰NSOperationå¯¹è±¡æ‰ä¼šå¼€å§‹æ‰§è¡Œæ“ä½œã€‚éœ€è¦å…ˆæ·»åŠ ä¾èµ–å…³ç³»,å†å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚å¦å¤–ï¼Œé€šè¿‡removeDependencyæ–¹æ³•æ¥åˆ é™¤ä¾èµ–å¯¹è±¡ã€‚ç»™æ“ä½œä»»åŠ¡ æ·»åŠ ç›‘å¬addExecutionBlock:ï¼Œå½“ä»»åŠ¡å®Œæˆåå°±ä¼šï¼Œèµ°åˆ°è¿™ä¸ªBlockå—é‡Œé¢ï¼Œå…·ä½“æ€ä¹ˆæ·»åŠ ä¾èµ–å’Œç›‘å¬å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334- (void)addDependency &#123; // 1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue1 = [[NSOperationQueue alloc] init]; NSOperationQueue *queue2 = [[NSOperationQueue alloc] init]; // 2.å°è£…æ“ä½œ NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"1---- %@",[NSThread currentThread]); &#125;]; NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"2---- %@",[NSThread currentThread]); &#125;]; NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"3---- %@",[NSThread currentThread]); &#125;]; NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"4---- %@",[NSThread currentThread]); &#125;]; // 3.æ·»åŠ æ“ä½œä¾èµ–,ä¹Ÿå¯ä»¥è·¨é˜Ÿåˆ—ä¾èµ–(æ³¨æ„ï¼šè¿™é‡Œä¸èƒ½ç›¸äº’ä¾èµ–) [op1 addDependency:op4]; [op4 addDependency:op3]; // 4.æ·»åŠ æ“ä½œç›‘å¬ [op2 addExecutionBlock:^&#123; NSLog(@"ç›‘å¬op2--%@",[NSThread currentThread]); &#125;]; // 5.æ·»åŠ åˆ°é˜Ÿåˆ— [queue1 addOperation:op1]; [queue1 addOperation:op2]; [queue1 addOperation:op3]; [queue2 addOperation:op4];&#125; æ‰“å°è¾“å‡º:123452016-02-13 19:04:12.166 å¤šçº¿ç¨‹2.4[10372:280459] 2---- &lt;NSThread: 0x60800007c440&gt;&#123;number = 3, name = (null)&#125;2016-02-13 19:04:12.166 å¤šçº¿ç¨‹2.4[10372:280473] ç›‘å¬op2-- &lt;NSThread: 0x60800007cbc0&gt;&#123;number = 5, name = (null)&#125;2016-02-13 19:04:12.166 å¤šçº¿ç¨‹2.4[10372:280462] 3---- &lt;NSThread: 0x60000007aa40&gt;&#123;number = 4, name = (null)&#125;2016-02-13 19:04:12.168 å¤šçº¿ç¨‹2.4[10372:280459] 4---- &lt;NSThread: 0x60800007c440&gt;&#123;number = 3, name = (null)&#125;2016-02-13 19:04:12.169 å¤šçº¿ç¨‹2.4[10372:280473] 1---- &lt;NSThread: 0x60800007cbc0&gt;&#123;number = 5, name = (null)&#125; 9.NSOperationçº¿ç¨‹é—´é€šä¿¡12345678910111213141516// 1.åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc] init];// 2.å°è£…ä»»åŠ¡NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSURL *url = [NSURL URLWithString:@"http://s15.sinaimg.cn/bmiddle/4c0b78455061c1b7f1d0e"]; NSData *data = [NSData dataWithContentsOfURL:url]; UIImage *image = [UIImage imageWithData:data]; [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; self.imageView.image = image; NSLog(@"UI-- %@",[NSThread currentThread]); &#125;];&#125;]; // 3.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ— [queue addOperation:op1]; æ‰“å°è¾“å‡º:12016-02-13 19:13:29.759 å¤šçº¿ç¨‹2.4[10553:285311] UI-- &lt;NSThread: 0x60800006d2c0&gt;&#123;number = 1, name = main&#125; ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ 10.ç®¡ç†æ“ä½œï¼šæ˜¯æ“ä½œé˜Ÿåˆ—çš„æ–¹æ³•é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¹Ÿæ˜¯æœ‰çŠ¶æ€ï¼šå·²ç»æ‰§è¡Œå®Œæˆçš„ã€æ­£åœ¨æ‰§è¡Œã€ç­‰å¾…æ‰§è¡Œ åº”ç”¨åœºæ™¯ï¼šæé«˜ç”¨æˆ·ä½“éªŒç¬¬ä¸€ï¼Œå½“ç”¨æˆ·æ“ä½œæ—¶ï¼Œå–æ¶ˆä¸€åˆ‡è·Ÿç”¨æˆ·å½“å‰æ“ä½œæ— å…³çš„è¿›ç¨‹ï¼Œæå‡æµç•…åº¦ã€‚ï¼ˆå¼€å§‹æ»šåŠ¨çš„æ—¶å€™ æš‚åœæ“ä½œã€æ»‘åŠ¨ç»“æŸçš„æ—¶å€™ æ¢å¤æ“ä½œã€æ¥æ”¶åˆ°å†…å­˜è­¦å‘Š å–æ¶ˆæ‰€æœ‰æ“ä½œï¼‰1.æ·»åŠ æ“ä½œä¾èµ–2.ç®¡ç†æ“ä½œï¼šé‡ç‚¹ï¼æ˜¯æ“ä½œé˜Ÿåˆ—çš„æ–¹æ³• æš‚åœ/æ¢å¤ å–æ¶ˆæ“ä½œï¼Œ(æš‚åœå’Œå–æ¶ˆ,ä¸èƒ½æš‚åœæˆ–å–æ¶ˆæ­£åœ¨æ‰§è¡ŒçŠ¶æ€çš„ä»»åŠ¡ï¼Œä¸”å–æ¶ˆä¸å¯ä»¥æ¢å¤) å¼€å¯åˆé€‚çš„çº¿ç¨‹æ•°é‡ï¼ï¼ˆæœ€å¤šä¸è¶…è¿‡6æ¡ï¼‰ ä¸€èˆ¬å¼€å‘çš„æ—¶å€™ï¼Œä¼šå°†æ“ä½œé˜Ÿåˆ—è®¾ç½®æˆä¸€ä¸ªå…¨å±€çš„å˜é‡ï¼ˆå±æ€§ï¼‰ æ–¹æ³•ï¼š123456// åˆ¤æ–­æš‚åœçŠ¶æ€,YESæš‚åœ NOæ¢å¤@property (getter=isSuspended) BOOL suspended;// å–æ¶ˆ(ä¸å¯ä»¥æ¢å¤)// è¯¥æ–¹æ³•å†…éƒ¨è°ƒç”¨äº†æ‰€æœ‰æ“ä½œçš„cancelæ–¹æ³•- (void)cancelAllOperations; å¥½äº†ï¼Œå°±åˆ°è¿™é‡Œå§ã€‚å½“ç„¶ï¼Œæˆ‘è®²çš„å¹¶ä¸å®Œæ•´ï¼Œå¯èƒ½æœ‰ä¸€äº›çŸ¥è¯†æˆ‘å¹¶æ²¡æœ‰è®²åˆ°ï¼Œä½†ä½œä¸ºå¸¸ç”¨æ–¹æ³•ï¼Œè¿™äº›å·²ç»è¶³å¤Ÿäº†ã€‚ä¸è¿‡æˆ‘åœ¨è¿™é‡Œåªæ˜¯å‘Šè¯‰ä½ äº†ä¸€äº›æ–¹æ³•çš„åŠŸèƒ½ï¼Œåªæ˜¯æ€ä¹ˆæŠŠä»–ä»¬ç”¨åˆ°åˆé€‚çš„åœ°æ–¹ï¼Œå°±éœ€è¦å¤šå¤šå®è·µäº†ï¼Œçœ‹æˆ‘å†™çš„è¿™ä¹ˆå–åŠ›ï¼Œä¸æ‰“èµçš„è¯å¾—ç‚¹ä¸ªå–œæ¬¢ä¹Ÿæ˜¯æå¥½çš„ã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç½‘ç»œè¯·æ±‚â€”ã€ŒNSURLSessionä¼šè¯ã€]]></title>
    <url>%2FiOSNET%2FNSURLSession.html</url>
    <content type="text"><![CDATA[Write in the first è‹¹æœåœ¨ iOS9 ä¹‹åå·²ç»åºŸå¼ƒäº† NSURLConnectionï¼Œæ‰€ä»¥åœ¨ç°åœ¨çš„å®é™…å¼€å‘ä¸­ï¼Œé™¤äº†å¤§å®¶å¸¸è§çš„ AFN æ¡†æ¶ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ iOS7 ä¹‹åæ¨å‡ºçš„ NSURLSessionï¼Œä½œä¸ºä¸€åã€iOS å¼€å‘è€…ã€‘ï¼Œå¦‚æœä½ åªçŸ¥é“ AFN æ¡†æ¶ æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œé‚£å°± X x äº†ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€NSURLSession è¯¦è§£ä½¿ç”¨ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•: NSURLSession ä»‹ç» NSURLSession ä¼˜åŠ¿ NSURLSession å­ç±»åŸºæœ¬ä½¿ç”¨ NSURLSessionDownloadTask å¤§æ–‡ä»¶ä¸‹è½½ NSURLSessionDataTask æ–­ç‚¹ä¸‹è½½ | æ”¯æŒç¦»çº¿ URLSessionDataTask æ–­ç‚¹ä¸‹è½½æ•ˆæœ 1. NSURLSession ä»‹ç»1234567891011å…³äºtaskNSURLSessionTask æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ¬èº«ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨å®ƒçš„å­ç±»NSURLSessionTask æœ‰ä¸¤ä¸ªå­ç±»1.NSURLSessionDataTaskï¼šå¯ä»¥ç”¨æ¥å¤„ç†ä¸€èˆ¬çš„ç½‘ç»œè¯·æ±‚ï¼Œå¦‚ GET | POST è¯·æ±‚DataTaskå­ç±» NSURLSessionUploadTaskï¼šç”¨äºå¤„ç†ä¸Šä¼ è¯·æ±‚çš„æ—¶å€™æœ‰ä¼˜åŠ¿2.NSURLSessionDownloadTaskï¼šä¸»è¦ç”¨äºå¤„ç†ä¸‹è½½è¯·æ±‚ï¼Œæœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ä½¿ç”¨æ­¥éª¤1.ä½¿ç”¨NSURLSessionåˆ›å»ºtask2.æ‰§è¡Œtask [dataTask resume] Taskçš„ç±»å‹ 2. NSURLSession ä¼˜åŠ¿1234561.NSURLSession æ”¯æŒ http2.0 åè®®2.åœ¨å¤„ç†ä¸‹è½½ä»»åŠ¡çš„æ—¶å€™å¯ä»¥ç›´æ¥æŠŠæ•°æ®ä¸‹è½½åˆ°ç£ç›˜3.æ”¯æŒåå°ä¸‹è½½|ä¸Šä¼ 4.åŒä¸€ä¸ª session å‘é€å¤šä¸ªè¯·æ±‚ï¼Œåªéœ€è¦å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼ˆå¤ç”¨äº†TCPï¼‰5.æä¾›äº†å…¨å±€çš„ session å¹¶ä¸”å¯ä»¥ç»Ÿä¸€é…ç½®ï¼Œä½¿ç”¨æ›´åŠ æ–¹ä¾¿6.ä¸‹è½½çš„æ—¶å€™æ˜¯å¤šçº¿ç¨‹å¼‚æ­¥å¤„ç†ï¼Œæ•ˆç‡æ›´é«˜ 3. NSURLSession å­ç±»åŸºæœ¬ä½¿ç”¨1.GETè¯·æ±‚12345678910111213141516171819202122232425262728293031323334353637// 1.ç¡®å®šurlNSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON"];// 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];// 3.åˆ›å»ºSessionä¼šè¯å¯¹è±¡ï¼ˆå¯ä»¥è·å–å•ä¾‹å¯¹è±¡ï¼‰NSURLSession *session = [NSURLSession sharedSession];// 4.åˆ›å»ºTask/** Request:è¯·æ±‚å¯¹è±¡ completionHandler å½“è¯·æ±‚å®Œæˆä¹‹åè°ƒç”¨ data:å“åº”ä½“ä¿¡æ¯ response:å“åº”å¤´ä¿¡æ¯ error:é”™è¯¯ä¿¡æ¯å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™,erroræœ‰å€¼ */// æ–¹æ³•ä¸€ï¼šdataTaskWithRequest: completionHandler:NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; // æ‹¿åˆ°å“åº”å¤´ä¿¡æ¯ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; // 6.è§£ææ•°æ® NSLog(@"%@\n%@",[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding],res.allHeaderFields);&#125;];-----------------------------------------// æ–¹æ³•äºŒï¼šdataTaskWithURL: completionHandler:// æ³¨æ„:dataTaskWithURL å†…éƒ¨ä¼šè‡ªåŠ¨çš„å°†è¯·æ±‚è·¯å¾„ä½œä¸ºå‚æ•°åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡NSURLSessionDataTask *dataTask = [session dataTaskWithURL:url completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123;&#125;];// 5.æ‰§è¡ŒTask[dataTask resume];//[dataTask cancel];// å–æ¶ˆä»»åŠ¡//[dataTask suspend];// æš‚åœä»»åŠ¡ 2.POSTè¯·æ±‚12345678910111213141516171819202122232425// 1.ç¡®å®šurlNSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/login"];// 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];// 3.åˆ›å»ºSessionä¼šè¯å¯¹è±¡ï¼ˆå¯ä»¥è·å–å•ä¾‹å¯¹è±¡ï¼‰NSURLSession *session = [NSURLSession sharedSession];// è®¾ç½® è¯·æ±‚æ–¹æ³•request.HTTPMethod = @"POST";// è®¾ç½® è¯·æ±‚ä½“request.HTTPBody = [@"username=520&amp;pwd=520&amp;type=JSON" dataUsingEncoding:NSUTF8StringEncoding];// è®¾ç½® è¯·æ±‚è¶…æ—¶//request.timeoutInterval = 10;// è®¾ç½® è¯·æ±‚å¤´User-Agent// æ³¨æ„:keyä¸€å®šè¦ä¸€è‡´(ç”¨äºä¼ é€’æ•°æ®ç»™åå°)//[request setValue:@"ios 10.1" forHTTPHeaderField:@"User-Agent"];// 4.åˆ›å»ºTask// æ³¨æ„ï¼šå¦‚æœè¦å‘é€POSTè¯·æ±‚ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨dataTaskWithRequest,è®¾ç½®ä¸€äº›è¯·æ±‚å±æ€§NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; // 6.è§£ææ•°æ®&#125;];// 5.æ‰§è¡ŒTask[dataTask resume]; 3.è®¾ç½®ä»£ç†å‘é€è¯·æ±‚1234567891011121314151617// 1.ç¡®å®šURLNSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON"];// 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];// 3.åˆ›å»ºä¼šè¯å¯¹è±¡,è®¾ç½®ä»£ç†/** Configuration:é…ç½®ä¿¡æ¯,ç”¨é»˜è®¤çš„å³å¯ delegate:ä»£ç† delegateQueue:è®¾ç½®ä»£ç†æ–¹æ³•åœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ */NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];// 4.åˆ›å»ºTaskNSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request];// 5.æ‰§è¡ŒTask[dataTask resume]; éµå®ˆ&lt;NSURLSessionDataDelegate&gt; å®ç° ä»£ç†æ–¹æ³•123456789101112131415161718192021222324252627282930// 1.æ¥æ”¶åˆ°æœåŠ¡å™¨çš„æ—¶å€™/** session ä¼šè¯å¯¹è±¡ dataTask è¯·æ±‚ä»»åŠ¡ response å“åº”å¤´ä¿¡æ¯ completionHandler å›è°ƒ,ä¼ ç»™ç³»ç»Ÿ */- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler &#123; /** NSURLSessionResponseCancel = 0, å–æ¶ˆè¯·æ±‚,é»˜è®¤ NSURLSessionResponseAllow = 1, æ¥æ”¶æ•°æ® NSURLSessionResponseBecomeDownload = 2, å˜æˆä¸‹è½½ä»»åŠ¡ NSURLSessionResponseBecomeStream å˜æˆä¸‹è½½ä»»åŠ¡ 9.0ä¹‹åå¯ä»¥ç”¨ */ completionHandler(NSURLSessionResponseAllow);&#125;// 2.æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®,ä¼šè°ƒç”¨å¤šæ¬¡ï¼ˆdataå¯èƒ½æ˜¯éƒ¨åˆ†ï¼‰- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data &#123; // æ‹¼æ¥æ•°æ® [self.fileData appendData:data];&#125;// 3.è¯·æ±‚å®Œæˆ æˆ– å¤±è´¥çš„æ—¶å€™è°ƒç”¨- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123; if (error) &#123; return; &#125; else &#123; // è§£ææ•°æ® NSLog(@&quot;%@&quot;,[[NSString alloc] initWithData:self.fileData encoding:NSUTF8StringEncoding]); &#125;&#125; 4. è®¾ç½®ä»£ç†ä¹‹åçš„å¼ºå¼•ç”¨é—®é¢˜1234567é—®é¢˜ï¼š`NSURLSession` å¯¹è±¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœè®¾ç½®äº†ä»£ç†ï¼Œ é‚£ä¹ˆ session ä¼šå¯¹ä»£ç†å¯¹è±¡ä¿æŒä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œåœ¨ä¸ç”¨çš„æ—¶å€™åº”è¯¥ä¸»åŠ¨è¿›è¡Œé‡Šæ”¾è§£å†³ï¼šåœ¨`dealloc`æ–¹æ³•ä¸­è¿›è¡Œé‡Šæ”¾ï¼Œ å¯ä»¥é€šè¿‡è°ƒç”¨ `finishTasksAndInvalidate`æˆ–`resetWithCompletionHandler` æ¥é‡Šæ”¾å¯¹ä»£ç†å¯¹è±¡çš„å¼ºå¼•ç”¨[self.session finishTasksAndInvalidate]; 4. NSURLSessionDownloadTask å¤§æ–‡ä»¶ä¸‹è½½1.DownloadTask:Blockæ–¹å¼12345678910111213141516171819202122232425262728// 1.ç¡®å®šURLNSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/images/minion_03.png"];// 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];// 3.åˆ›å»ºä¼šè¯å¯¹è±¡NSURLSession *session = [NSURLSession sharedSession];// 4.åˆ›å»ºTask/** downloadTaskWithRequest: Blockæ–¹å¼ æ³¨æ„:è¯¥æ–¹æ³•å†…éƒ¨å·²ç»å®ç°äº†è¾¹æ¥å—æ•°æ®è¾¹å†™å…¥æ²™ç›’(tmpä¸´æ—¶æ–‡ä»¶ç›®å½•)çš„æ“ä½œ, éœ€è¦å‰ªåˆ‡æ–‡ä»¶,æŠŠå®ƒç§»åŠ¨åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ã€‚ */NSURLSessionDownloadTask *downloadTask = [session downloadTaskWithRequest:request completionHandler:^(NSURL * _Nullable location, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; // 6.æ•°æ®è§£æ NSLog(@"%@---%@",location,[NSThread currentThread]); // 7.æ‹¼æ¥æ–‡ä»¶å…¨è·¯å¾„ // æ‹¼æ¥æ–‡ä»¶åçš„æœ¬åœ°åç§°:FileName @"123.png"æˆ– [url lastPathComponent] è·å–URLæœ€åä¸€ä¸ªå­—èŠ‚å‘½å NSString *fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:[url lastPathComponent]]; // 8.å‰ªåˆ‡æ–‡ä»¶ [[NSFileManager defaultManager] moveItemAtURL:location toURL:[NSURL fileURLWithPath:fullPath] error:nil]; NSLog(@"%@",fullPath);&#125;];// 5.æ‰§è¡ŒTask[downloadTask resume]; æ³¨DownloadTask:Blockæ–¹å¼ä¼˜ç‚¹:ä¸éœ€è¦æ‹…å¿ƒå†…å­˜(è¾¹æ¥å—æ•°æ®è¾¹å†™å…¥æ²™ç›’(tmpä¸´æ—¶æ–‡ä»¶ç›®å½•)çš„æ“ä½œ)ç¼ºç‚¹:æ— æ³•ç›‘å¬æ–‡ä»¶ä¸‹è½½è¿›åº¦ 2.DownloadTask:Dlegateæ–¹å¼éµå®ˆ&lt;NSURLSessionDownloadDelegate&gt;åè®®ï¼Œå®ç°ä»£ç†æ–¹æ³•ã€‚å¯ä»¥åœ¨didWriteData(å†™æ•°æ®)ä»£ç†æ–¹æ³•ï¼Œç›‘å¬ä¸‹è½½è¿›åº¦12345678NSURL *url = [NSURL URLWithString:@"[http://120.25.226.186:32812/resources/images/minion_03.png"];](http://120.25.226.186:32812/resources/images/minion_03.png%22];)// Configuration:é…ç½®ä¿¡æ¯,ç”¨é»˜è®¤çš„å³å¯NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];NSURLSessionDownloadTask *downloadTask = [session downloadTaskWithRequest:[NSURLRequest requestWithURL:url]];[downloadTask resume];// æ‰§è¡ŒTask æ³¨DownloadTask:Dlegateæ–¹å¼ï¼Œè§£å†³äº†æ— æ³•ç›‘å¬ä¸‹è½½è¿›åº¦çš„é—®é¢˜ 5.DownloadTaskæ–­ç‚¹ä¸‹è½½1234567891011121314151617181920212223242526272829303132333435// å¼€å§‹ä¸‹è½½- (IBAction)starBtnClick:(id)sender &#123; NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_01.mp4"]; self.session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]]; self.downloadTask = [self.session downloadTaskWithRequest:[NSURLRequest requestWithURL:url]]; [self.downloadTask resume];&#125;// æš‚åœä¸‹è½½(æ˜¯å¯ä»¥æ¢å¤çš„)- (IBAction)suspendBtnClick:(id)sender &#123; NSLog(@"+++++++++++++++++++æš‚åœ"); [self.downloadTask suspend];&#125;// å–æ¶ˆä¸‹è½½(æ³¨æ„)// cancel:å–æ¶ˆæ˜¯ä¸èƒ½æ¢å¤// cancelByProducingResumeData:æ˜¯å¯ä»¥æ¢å¤- (IBAction)cancelBtnClick:(id)sender &#123; NSLog(@"+++++++++++++++++++å–æ¶ˆ"); //[self.downloadTask cancel]; [self.downloadTask cancelByProducingResumeData:^(NSData * _Nullable resumeData) &#123; self.resumData = resumeData; &#125;];&#125;// ç»§ç»­ä¸‹è½½- (IBAction)goOnBtnClick:(id)sender &#123; NSLog(@"+++++++++++++++++++ç»§ç»­ä¸‹è½½"); if (self.resumData) &#123; // æ¢å¤ä¸‹è½½æ•°æ®(æ–‡ä»¶ä¿å­˜ä¿¡æ¯,ä¿å­˜åˆ°é‚£ä¸ªå­—èŠ‚) != æ–‡ä»¶æ•°æ® self.downloadTask = [self.session downloadTaskWithResumeData:self.resumData]; &#125; [self.downloadTask resume];&#125; NSURLSessionDownloadDelegateä»£ç†æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445/** 1.å†™æ•°æ®(ç›‘å¬ä¸‹è½½è¿›åº¦) session ä¼šè¯å¯¹è±¡ downloadTask ä¸‹è½½ä»»åŠ¡ bytesWritten æœ¬æ¬¡å†™å…¥çš„æ•°æ®å¤§å° totalBytesWritten ä¸‹è½½çš„æ•°æ®æ€»å¤§å° totalBytesExpectedToWrite æ–‡ä»¶çš„æ€»å¤§å° */-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite &#123; // è·å¾—æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦ NSLog(@"%f",1.0 * totalBytesWritten/totalBytesExpectedToWrite); self.proessView.progress = 1.0 * totalBytesWritten/totalBytesExpectedToWrite;&#125;/** 2.å½“æ¢å¤ä¸‹è½½çš„æ—¶å€™è°ƒç”¨æ–¹æ³• fileOffset ä»ä»€ä¹ˆåœ°æ–¹ä¸‹è½½ expectedTotalBytes æ–‡ä»¶çš„æ€»å¤§å° */-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes &#123; NSLog(@"æ¢å¤ä¸‹è½½--%s",__func__);&#125;/** 3.å½“ä¸‹è½½å®Œæˆçš„æ—¶å€™è°ƒç”¨ location æ–‡ä»¶çš„ä¸´æ—¶å­˜å‚¨è·¯å¾„ */-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location &#123; NSLog(@"æ–‡ä»¶çš„ä¸´æ—¶å­˜å‚¨è·¯å¾„--%@",location); // 1.æ‹¼æ¥æ–‡ä»¶å…¨è·¯å¾„ // downloadTask.response.suggestedFilename æ–‡ä»¶åç§° NSString *fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:downloadTask.response.suggestedFilename]; // 2.å‰ªåˆ‡æ–‡ä»¶ [[NSFileManager defaultManager]moveItemAtURL:location toURL:[NSURL fileURLWithPath:fullPath] error:nil]; NSLog(@"%@",fullPath);&#125;/** 4.è¯·æ±‚å¤±è´¥ */-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123; NSLog(@"didCompleteWithError");&#125; æ³¨123å±€é™æ€§:1.å¦‚æœç”¨æˆ·ç‚¹å‡»æš‚åœä¹‹åé€€å‡ºç¨‹åºï¼Œé‚£ä¹ˆéœ€è¦æŠŠæ¢å¤ä¸‹è½½çš„æ•°æ®å†™ä¸€ä»½åˆ°æ²™ç›’ï¼Œä»£ç å¤æ‚åº¦é«˜2.å¦‚æœç”¨æˆ·åœ¨ä¸‹è½½ä¸­é€”æœªä¿å­˜æ¢å¤ä¸‹è½½æ•°æ®å³é€€å‡ºç¨‹åºï¼Œåˆ™ä¸å…·å¤‡å¯æ“ä½œæ€§ 6. NSURLSessionDataTask æ–­ç‚¹ä¸‹è½½ | æ”¯æŒç¦»çº¿ NSURLSessionDataTask å®ç°å¤§æ–‡ä»¶1.å¼€å§‹ä¸‹è½½ã€æš‚åœä¸‹è½½ã€å–æ¶ˆä¸‹è½½ã€æ¢å¤ä¸‹è½½2.æ”¯æŒåå°ä¸‹è½½|ä¸Šä¼ ï¼ˆç¦»çº¿ æ–­ç‚¹ï¼‰3.åœ¨å¤„ç†ä¸‹è½½ä»»åŠ¡çš„æ—¶å€™å¯ä»¥ç›´æ¥æŠŠæ•°æ®ä¸‹è½½åˆ°ç£ç›˜4.ä¸‹è½½çš„æ—¶å€™ æ˜¯å­çº¿ç¨‹å¼‚æ­¥å¤„ç†ï¼Œæ•ˆç‡æ›´é«˜ å±æ€§å®šä¹‰:123456789101112131415@interface DataTaskViewController ()&lt;NSURLSessionDataDelegate&gt;@property (weak, nonatomic) IBOutlet UIProgressView *proessView;/** åˆ›å»ºæ–‡ä»¶å¥æŸ„ */@property (nonatomic, strong) NSFileHandle *handle;/** æ–‡ä»¶çš„æ€»å¤§å° */@property (nonatomic, assign) NSInteger totalSize;/** å½“å‰ä¸‹è½½æ•°æ®å¤§å° */@property (nonatomic, assign) NSInteger currentSize;/** è·å¾—æ–‡ä»¶å…¨è·¯å¾„ */@property (nonatomic, strong) NSString *fullPath;/** åˆ›å»ºTask */@property (nonatomic, strong) NSURLSessionDataTask *dataTask;/** åˆ›å»ºä¼šè¯å¯¹è±¡ */@property (nonatomic, strong) NSURLSession *session; æ‡’åŠ è½½ï¼ˆæ–¹æ³•çš„ç‹¬ç«‹ä¸æŠ½å–ï¼‰:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849-(NSString *)fullPath &#123; if (!_fullPath) &#123; // è·å¾—æ–‡ä»¶å…¨è·¯å¾„ // æ‹¼æ¥æ–‡ä»¶åçš„æœ¬åœ°åç§° FileName @"123.mp4" æˆ–è€… [url lastPathComponent] è·å–URLæœ€åä¸€ä¸ªå­—èŠ‚å‘½å _fullPath = [[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:FileName]; &#125; return _fullPath;&#125;-(NSURLSession *)session &#123; if (!_session) &#123; // åˆ›å»ºä¼šè¯å¯¹è±¡,è®¾ç½®ä»£ç† /* Configuration:é…ç½®ä¿¡æ¯ [NSURLSessionConfiguration defaultSessionConfiguration] delegate:ä»£ç† delegateQueue:è®¾ç½®ä»£ç†æ–¹æ³•åœ¨å“ªä¸ªçº¿ç¨‹ä¸­è°ƒç”¨ */ _session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]]; &#125; return _session;&#125;-(NSURLSessionDataTask *)dataTask &#123; if (!_dataTask) &#123; // 1.ç¡®å®šurl NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_01.mp4"]; // 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; // 3 è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯,å‘Šè¯‰æœåŠ¡å™¨è¯·æ±‚é‚£ä¸€éƒ¨åˆ†æ•°æ® self.currentSize = [self getFileSize]; NSString *range = [NSString stringWithFormat:@"bytes=%zd-",self.currentSize]; [request setValue:range forHTTPHeaderField:@"Range"]; // 4.åˆ›å»ºTask _dataTask = [self.session dataTaskWithRequest:request]; &#125; return _dataTask;&#125;-(NSInteger)getFileSize &#123; // è·å¾—æŒ‡å®šæ–‡ä»¶è·¯å¾„å¯¹åº”æ–‡ä»¶çš„æ•°æ®å¤§å° NSDictionary *fileInfoDict = [[NSFileManager defaultManager]attributesOfItemAtPath:self.fullPath error:nil]; NSLog(@"%@",fileInfoDict); NSInteger currentSize = [fileInfoDict[@"NSFileSize"] integerValue]; return currentSize;&#125; NSURLSessionDataDelegate ä»£ç†æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273#pragma mark - NSURLSessionDataDelegate// 1.æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº” å®ƒé»˜è®¤ä¼šå–æ¶ˆè¯¥è¯·æ±‚/** session ä¼šè¯å¯¹è±¡ dataTask è¯·æ±‚ä»»åŠ¡ response å“åº”å¤´ä¿¡æ¯ completionHandler å›è°ƒ ä¼ ç»™ç³»ç»Ÿ expectedContentLength æœ¬æ¬¡è¯·æ±‚çš„æ•°æ®å¤§å° */-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler &#123; // è·å¾—æ–‡ä»¶çš„æ€»å¤§å° self.totalSize = response.expectedContentLength + self.currentSize; if (self.currentSize == 0) &#123; // åˆ›å»ºç©ºçš„æ–‡ä»¶ [[NSFileManager defaultManager]createFileAtPath:self.fullPath contents:nil attributes:nil]; &#125; // åˆ›å»ºæ–‡ä»¶å¥æŸ„ self.handle = [NSFileHandle fileHandleForWritingAtPath:self.fullPath]; // ç§»åŠ¨æŒ‡é’ˆ(æ¯æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œå°±ç§»åŠ¨æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶æœ«å°¾) [self.handle seekToEndOfFile]; /* NSURLSessionResponseCancel = 0,å–æ¶ˆ é»˜è®¤ NSURLSessionResponseAllow = 1,æ¥æ”¶ NSURLSessionResponseBecomeDownload = 2,å˜æˆä¸‹è½½ä»»åŠ¡ NSURLSessionResponseBecomeStream å˜æˆæµ */ completionHandler(NSURLSessionResponseAllow);&#125;// 2.æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ® è°ƒç”¨å¤šæ¬¡/** session ä¼šè¯å¯¹è±¡ dataTask è¯·æ±‚ä»»åŠ¡ data æœ¬æ¬¡ä¸‹è½½çš„æ•°æ® */-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data &#123; // å†™å…¥æ•°æ®åˆ°æ–‡ä»¶ [self.handle writeData:data]; // è®¡ç®—æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦ self.currentSize += data.length; NSLog(@"%f",1.0 * self.currentSize / self.totalSize); self.proessView.progress = 1.0 * self.currentSize / self.totalSize;&#125;// 3.è¯·æ±‚å®Œæˆ æˆ–è€… å¤±è´¥çš„æ—¶å€™è°ƒç”¨/** session ä¼šè¯å¯¹è±¡ dataTask è¯·æ±‚ä»»åŠ¡ error é”™è¯¯ä¿¡æ¯ */-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123; // å…³é—­æ–‡ä»¶å¥æŸ„ï¼ˆåˆ›å»ºå¥æŸ„,è¦è®°å¾—åœ¨å®Œæˆæ–¹æ³•é‡Œ å…³é—­å¥æŸ„ç½®ç©ºï¼‰ [self.handle closeFile]; self.handle = nil; NSLog(@"%@",self.fullPath);&#125;// 4.æ¸…ç†å·¥ä½œ/** NSURLSession,å¦‚æœè®¾ç½®ä»£ç†çš„è¯ä¼šæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨ä¸ä¼šè¢«é‡Šæ”¾æ‰,å½“ä¸ç”¨Sessionçš„æ—¶å€™ï¼Œ ä¸€å®šè¦è°ƒç”¨finishTasksAndInvalidate å’Œ invalidateAndCancel é‡Šæ”¾æ‰. */-(void)dealloc &#123; //finishTasksAndInvalidate [self.session invalidateAndCancel];&#125; ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯·æ±‚</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SDWebImageæºç 3â€”SDWebImageDownloader]]></title>
    <url>%2FSourceAnnotations%2FSDSourceCode3.html</url>
    <content type="text"><![CDATA[Write in the first SDWebImageDownloaderå®Œæˆäº†å¯¹ç½‘ç»œå›¾ç‰‡çš„å¼‚æ­¥ä¸‹è½½å·¥ä½œï¼Œå‡†ç¡®è¯´è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½(å·¥å…·ç±»)ï¼Œè€ŒçœŸæ­£çš„ç½‘ç»œè¯·æ±‚æ˜¯åœ¨ç»§æ‰¿äºNSOperationçš„SDWebImageDownloaderOperationç±»å®ç°çš„ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€SDWebImageDownloader æ–‡ä»¶ä¸‹è½½ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ SDWebImageDownloaderçš„å¤´æ–‡ä»¶å†…å®¹æ¯”è¾ƒå°‘ï¼Œä¸»è¦æ˜¯å®šä¹‰äº†ä¸€äº›åŸºæœ¬å‚æ•°å¦‚ä¸‹è½½ä¼˜å…ˆçº§ç­–ç•¥ã€æœ€å¤§å¹¶å‘æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ï¼Œæ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ SDWebImageDownloader ä¸­æ ¸å¿ƒæ–¹æ³•ï¼šä¸‹è½½å›¾ç‰‡çš„æ“ä½œ12345678/* * ä½¿ç”¨ç»™å®šçš„ URL åˆ›å»º SDWebImageDownloader å¼‚æ­¥ä¸‹è½½å™¨å®ä¾‹ * å›¾åƒä¸‹è½½å®Œæˆæˆ–è€…å‡ºç°é”™è¯¯æ—¶ä¼šé€šçŸ¥ä»£ç† */- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock; åœ¨çœ‹è¿™ä¸ªæ–¹æ³•ä¹‹å‰æˆ‘ä»¬å…ˆçœ‹å¦å¤–ä¸€ä¸ªæ–¹æ³•: 12345678910111213141516171819202122232425262728293031323334353637383940//å¤„ç†SDWebImageDownloaderProgressBlockå’ŒSDWebImageDownloaderCompletedBlock//ä¸»è¦å¤„ç†å¯¹è±¡ä¸ºself.URLCallbackså­—å…¸- (void)addProgressCallback:(SDWebImageDownloaderProgressBlock)progressBlock completedBlock:(SDWebImageDownloaderCompletedBlock)completedBlock forURL:(NSURL *)url createCallback:(SDWebImageNoParamsBlock)createCallback &#123; // The URL will be used as the key to the callbacks dictionary so it cannot be nil. If it is nil immediately call the completed block with no image or data. //å¦‚æœURLä¸ºç©ºï¼Œåˆ™æ‰§è¡ŒcompletedBlockå›è°ƒï¼Œå¹¶ç›´æ¥è¿”å› if (url == nil) &#123; if (completedBlock != nil) &#123; completedBlock(nil, nil, nil, NO); &#125; return; &#125; //æ …æ å‡½æ•° dispatch_barrier_sync(self.barrierQueue, ^&#123; BOOL first = NO; //å¦‚æœURLCallbackså­—å…¸ä¸­urlå¯¹åº”çš„æ•°ç»„ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±åˆ›å»ºä¸€ä¸ªç©ºçš„å¯å˜æ•°ç»„ï¼Œå¹¶è®¾ç½®firstçš„å€¼ä¸ºYES if (!self.URLCallbacks[url]) &#123; self.URLCallbacks[url] = [NSMutableArray new]; first = YES; &#125; // Handle single download of simultaneous download request for the same URL // ä¿è¯å¦‚æœç»Ÿä¸€URLæœ‰å¤šä¸ªä¸‹è½½è¯·æ±‚ï¼Œé‚£ä¹ˆåªä¸‹è½½ä¸€æ¬¡ //å¾—åˆ°URLCallbackså­—å…¸ä¸­urlå¯¹åº”çš„æ•°ç»„ NSMutableArray *callbacksForURL = self.URLCallbacks[url]; //åˆ›å»ºå¯å˜å­—å…¸ï¼Œåœ¨è¯¥å­—å…¸ä¸­å­˜æ”¾progressBlockå’ŒcompletedBlockï¼Œå¹¶æŠŠè¯¥å­—å…¸ä½œä¸ºå…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼ˆå³urlå¯¹åº”çš„valueï¼‰ NSMutableDictionary *callbacks = [NSMutableDictionary new]; if (progressBlock) callbacks[kProgressCallbackKey] = [progressBlock copy]; if (completedBlock) callbacks[kCompletedCallbackKey] = [completedBlock copy]; [callbacksForURL addObject:callbacks]; self.URLCallbacks[url] = callbacksForURL; //å¦‚æœURLCallbackså­—å…¸ä¸­urlå¯¹åº”çš„æ•°ç»„ä¸å­˜åœ¨,é‚£ä¹ˆå°±è°ƒç”¨createCallbackï¼ˆï¼‰ if (first) &#123; createCallback(); &#125; &#125;);&#125; èµ°å®Œä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½ç¡®ä¿æ¯ä¸ªè¯·æ±‚éƒ½èƒ½å’Œå®ƒçš„progressBlockå’ŒcompletedBlockå›è°ƒä¸€ä¸€å¯¹åº”ï¼Œæ¥ç€å›åˆ°downloadæ–¹æ³•ç»§ç»­çœ‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137//æ ¸å¿ƒæ–¹æ³•ï¼šä¸‹è½½å›¾ç‰‡çš„æ“ä½œ/* * ä½¿ç”¨ç»™å®šçš„ URL åˆ›å»º SDWebImageDownloader å¼‚æ­¥ä¸‹è½½å™¨å®ä¾‹ * å›¾åƒä¸‹è½½å®Œæˆæˆ–è€…å‡ºç°é”™è¯¯æ—¶ä¼šé€šçŸ¥ä»£ç† * url:è¦ä¸‹è½½çš„å›¾åƒ URL * SDWebImageDownloaderOptionsï¼šä¸‹è½½é€‰é¡¹|ç­–ç•¥ * progressBlockï¼šå›¾åƒä¸‹è½½è¿‡ç¨‹ä¸­è¢«é‡å¤è°ƒç”¨çš„ blockï¼Œç”¨æ¥æŠ¥å‘Šä¸‹è½½è¿›åº¦ * completedBlockï¼šå›¾åƒä¸‹è½½å®Œæˆåè¢«è°ƒç”¨ä¸€æ¬¡çš„ block * image:å¦‚æœä¸‹è½½æˆåŠŸï¼Œimage å‚æ•°ä¼šè¢«è®¾ç½® * error:å¦‚æœå‡ºç°é”™è¯¯ï¼Œerror å‚æ•°ä¼šè¢«è®¾ç½® * finished: * å¦‚æœæ²¡æœ‰ä½¿ç”¨ SDWebImageDownloaderProgressiveDownloadï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸€ç›´æ˜¯ YES * å¦‚æœä½¿ç”¨äº† SDWebImageDownloaderProgressiveDownload é€‰é¡¹ï¼Œæ­¤ block ä¼šè¢«é‡å¤è°ƒç”¨ * 1)ä¸‹è½½å®Œæˆå‰ï¼Œimage å‚æ•°æ˜¯éƒ¨åˆ†å›¾åƒï¼Œfinished å‚æ•°æ˜¯ NO * 2)æœ€åä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œimage å‚æ•°æ˜¯å®Œæ•´å›¾åƒï¼Œè€Œ finished å‚æ•°æ˜¯ YES * 3)å¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆfinished å‚æ•°ä¹Ÿæ˜¯ YES * è¿”å›å€¼ï¼šå¯è¢«å–æ¶ˆçš„ SDWebImageOperation */- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock &#123; __block SDWebImageDownloaderOperation *operation; __weak __typeof(self)wself = self; //ä¸ºäº†é¿å…blockçš„å¾ªç¯å¼•ç”¨ //å¤„ç†è¿›åº¦å›è°ƒ|å®Œæˆå›è°ƒç­‰ï¼Œå¦‚æœè¯¥urlåœ¨self.URLCallbackså¹¶ä¸å­˜åœ¨ï¼Œåˆ™è°ƒç”¨createCallback blockå— [self addProgressCallback:progressBlock completedBlock:completedBlock forURL:url createCallback:^&#123; //å¤„ç†ä¸‹è½½è¶…æ—¶ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¿‡åˆ™åˆå§‹åŒ–ä¸º15ç§’ NSTimeInterval timeoutInterval = wself.downloadTimeout; if (timeoutInterval == 0.0) &#123; timeoutInterval = 15.0; &#125; // In order to prevent from potential duplicate caching (NSURLCache + SDImageCache) we disable the cache for image requests if told otherwise //æ ¹æ®ç»™å®šçš„URLå’Œç¼“å­˜ç­–ç•¥åˆ›å»ºå¯å˜çš„è¯·æ±‚å¯¹è±¡ï¼Œè®¾ç½®è¯·æ±‚è¶…æ—¶ //è¯·æ±‚ç­–ç•¥ï¼šå¦‚æœæ˜¯SDWebImageDownloaderUseNSURLCacheåˆ™ä½¿ç”¨NSURLRequestUseProtocolCachePolicyï¼Œå¦åˆ™ä½¿ç”¨NSURLRequestReloadIgnoringLocalCacheData /* NSURLRequestUseProtocolCachePolicy:é»˜è®¤çš„ç¼“å­˜ç­–ç•¥ 1)å¦‚æœç¼“å­˜ä¸å­˜åœ¨ï¼Œç›´æ¥ä»æœåŠ¡ç«¯è·å–ã€‚ 2)å¦‚æœç¼“å­˜å­˜åœ¨ï¼Œä¼šæ ¹æ®responseä¸­çš„Cache-Controlå­—æ®µåˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œï¼Œå¦‚: Cache-Controlå­—æ®µä¸ºmust-revalidata, åˆ™è¯¢é—®æœåŠ¡ç«¯è¯¥æ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œæ— æ›´æ–°çš„è¯ç›´æ¥è¿”å›ç»™ç”¨æˆ·ç¼“å­˜æ•°æ®ï¼Œè‹¥å·²æ›´æ–°ï¼Œåˆ™è¯·æ±‚æœåŠ¡ç«¯. NSURLRequestReloadIgnoringLocalCacheData:å¿½ç•¥æœ¬åœ°ç¼“å­˜æ•°æ®ï¼Œç›´æ¥è¯·æ±‚æœåŠ¡ç«¯ã€‚ */ NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:(options &amp; SDWebImageDownloaderUseNSURLCache ? NSURLRequestUseProtocolCachePolicy : NSURLRequestReloadIgnoringLocalCacheData) timeoutInterval:timeoutInterval]; //è®¾ç½®æ˜¯å¦ä½¿ç”¨Cookies(é‡‡ç”¨æŒ‰ä½ä¸ï¼‰ /* å…³äºcookieså‚è€ƒï¼šhttp://blog.csdn.net/chun799/article/details/17206907 */ request.HTTPShouldHandleCookies = (options &amp; SDWebImageDownloaderHandleCookies); //å¼€å¯HTTPç®¡é“ï¼Œè¿™å¯ä»¥æ˜¾è‘—é™ä½è¯·æ±‚çš„åŠ è½½æ—¶é—´ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è¢«æœåŠ¡å™¨å¹¿æ³›æ”¯æŒï¼Œé»˜è®¤æ˜¯ç¦ç”¨çš„ request.HTTPShouldUsePipelining = YES; //è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ï¼ˆè¿‡æ»¤ç­‰ï¼‰ if (wself.headersFilter) &#123; request.allHTTPHeaderFields = wself.headersFilter(url, [wself.HTTPHeaders copy]); &#125; else &#123; request.allHTTPHeaderFields = wself.HTTPHeaders; &#125; //æ ¸å¿ƒæ–¹æ³•ï¼šåˆ›å»ºä¸‹è½½å›¾ç‰‡çš„æ“ä½œ operation = [[wself.operationClass alloc] initWithRequest:request options:options progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; SDWebImageDownloader *sself = wself; if (!sself) return; __block NSArray *callbacksForURL; dispatch_sync(sself.barrierQueue, ^&#123; callbacksForURL = [sself.URLCallbacks[url] copy]; &#125;); //éå†callbacksForURLæ•°ç»„ä¸­çš„æ‰€æœ‰å­—å…¸ï¼Œæ‰§è¡ŒSDWebImageDownloaderProgressBlockå›è°ƒ for (NSDictionary *callbacks in callbacksForURL) &#123; //è¯´æ˜ï¼šSDWebImageDownloaderProgressBlockä½œè€…å¯èƒ½è€ƒè™‘åˆ°ç”¨æˆ·æ‹¿åˆ°è¿›åº¦æ•°æ®åä¼šè¿›è¡Œåˆ·æ–°å¤„ç†ï¼Œå› æ­¤åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†äº†å›è°ƒ dispatch_async(dispatch_get_main_queue(), ^&#123; SDWebImageDownloaderProgressBlock callback = callbacks[kProgressCallbackKey]; if (callback) callback(receivedSize, expectedSize); &#125;); &#125; &#125; completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) &#123; SDWebImageDownloader *sself = wself; if (!sself) return; __block NSArray *callbacksForURL; dispatch_barrier_sync(sself.barrierQueue, ^&#123; callbacksForURL = [sself.URLCallbacks[url] copy]; //å¦‚æœå®Œæˆï¼Œé‚£ä¹ˆæŠŠURLä»URLCallbackså­—å…¸ä¸­åˆ é™¤ if (finished) &#123; [sself.URLCallbacks removeObjectForKey:url]; &#125; &#125;); //éå†callbacksForURLæ•°ç»„ä¸­çš„æ‰€æœ‰å­—å…¸ï¼Œæ‰§è¡ŒSDWebImageDownloaderCompletedBlockå›è°ƒ for (NSDictionary *callbacks in callbacksForURL) &#123; SDWebImageDownloaderCompletedBlock callback = callbacks[kCompletedCallbackKey]; if (callback) callback(image, data, error, finished); &#125; &#125; cancelled:^&#123; SDWebImageDownloader *sself = wself; if (!sself) return; //æŠŠå½“å‰çš„urlä»URLCallbackså­—å…¸ä¸­ç§»é™¤ dispatch_barrier_async(sself.barrierQueue, ^&#123; [sself.URLCallbacks removeObjectForKey:url]; &#125;); &#125;]; //è®¾ç½®æ˜¯å¦éœ€è¦è§£ç  operation.shouldDecompressImages = wself.shouldDecompressImages; //èº«ä»½è®¤è¯ if (wself.urlCredential) &#123; operation.credential = wself.urlCredential; &#125; else if (wself.username &amp;&amp; wself.password) &#123; //è®¾ç½® https è®¿é—®æ—¶èº«ä»½éªŒè¯ä½¿ç”¨çš„å‡­æ® operation.credential = [NSURLCredential credentialWithUser:wself.username password:wself.password persistence:NSURLCredentialPersistenceForSession]; &#125; //åˆ¤æ–­ä¸‹è½½ç­–ç•¥æ˜¯å¦æ˜¯é«˜ä¼˜å…ˆçº§çš„æˆ–ä½ä¼˜å…ˆçº§ï¼Œä»¥è®¾ç½®æ“ä½œçš„é˜Ÿåˆ—ä¼˜å…ˆçº§ if (options &amp; SDWebImageDownloaderHighPriority) &#123; operation.queuePriority = NSOperationQueuePriorityHigh; &#125; else if (options &amp; SDWebImageDownloaderLowPriority) &#123; operation.queuePriority = NSOperationQueuePriorityLow; &#125; //æŠŠä¸‹è½½æ“ä½œæ·»åŠ åˆ°ä¸‹è½½é˜Ÿåˆ—ä¸­ //è¯¥æ–¹æ³•ä¼šè°ƒç”¨operationå†…éƒ¨çš„startæ–¹æ³•å¼€å¯å›¾ç‰‡çš„ä¸‹è½½ä»»åŠ¡ [wself.downloadQueue addOperation:operation]; //åˆ¤æ–­ä»»åŠ¡çš„æ‰§è¡Œä¼˜å…ˆçº§ï¼Œå¦‚æœæ˜¯åè¿›å…ˆå‡ºï¼Œåˆ™è°ƒæ•´ä»»åŠ¡çš„ä¾èµ–å…³ç³»ï¼Œä¼˜å…ˆæ‰§è¡Œå½“å‰çš„ï¼ˆæœ€åæ·»åŠ ï¼‰ä»»åŠ¡ if (wself.executionOrder == SDWebImageDownloaderLIFOExecutionOrder) &#123; // Emulate LIFO execution order by systematically adding new operations as last operation's dependency [wself.lastAddedOperation addDependency:operation]; wself.lastAddedOperation = operation;//è®¾ç½®å½“å‰ä¸‹è½½æ“ä½œä¸ºæœ€åä¸€ä¸ªæ“ä½œ &#125; &#125;]; return operation;&#125; downloadImageWithURLæ–¹æ³•çš„å†…å®¹ä¸å¤šï¼Œé€šè¿‡ä¸€æ­¥æ­¥çš„æ‹†åˆ†æˆ‘ä»¬å¯ä»¥çœ‹çš„æ¯”è¾ƒæ˜äº†ï¼Œä¸‹é¢ç»§ç»­çœ‹çœ‹SDWebImageDownloaderOperationè¿™ä¸ªç±»ä¸­åšäº†å“ªäº›äº‹æƒ… SDWebImageDownloaderOperationSDWebImageDownloaderOperationç»§æ‰¿äºNSOperationé‡å†™äº†startæ–¹æ³•ï¼Œåœ¨startæ–¹æ³•é‡Œåˆ›å»ºäº†NSURLConnectioné“¾æ¥å¯¹è±¡ã€‚å…ˆçœ‹çœ‹å¯¹å¤–å¼€æ”¾çš„åˆå§‹åŒ–operationæ–¹æ³•åšäº†å“ªäº›å·¥ä½œï¼š123456789101112131415161718192021//åˆå§‹åŒ–operationçš„æ–¹æ³•- (id)initWithRequest:(NSURLRequest *)request options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock cancelled:(SDWebImageNoParamsBlock)cancelBlock &#123; if ((self = [super init])) &#123; _request = request; //åœ¨SDWebImageDownloaderä¸­åˆ›å»ºçš„NSMutableURLRequestå¯¹è±¡ _shouldDecompressImages = YES; //æ˜¯å¦è§£å›¾ç‰‡ _shouldUseCredentialStorage = YES; //URL è¿æ¥æ˜¯å¦è¯¢é—®ä¿å­˜è¿æ¥èº«ä»½éªŒè¯çš„å‡­æ®ï¼Œé»˜è®¤æ˜¯ `YES _options = options; //ä¸‹è½½ç­–ç•¥ _progressBlock = [progressBlock copy]; //è¿›åº¦å›è°ƒ _completedBlock = [completedBlock copy]; //ä¸‹è½½å®Œæˆå›è°ƒ _cancelBlock = [cancelBlock copy]; //å–æ¶ˆå›è°ƒ _executing = NO; _finished = NO; _expectedSize = 0; responseFromCached = YES; // Initially wrong until `connection:willCacheResponse:` is called or not called &#125; return self;&#125; åˆå§‹åŒ–ä¸»è¦è¿˜æ˜¯å¯¹ä¸€äº›å‚æ•°åšäº†é…ç½®ï¼Œä¸‹é¢çœ‹startæ–¹æ³•ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102//æ ¸å¿ƒæ–¹æ³•ï¼šåœ¨è¯¥æ–¹æ³•ä¸­å¤„ç†å›¾ç‰‡ä¸‹è½½æ“ä½œ- (void)start &#123; @synchronized (self) &#123; //åˆ¤æ–­å½“å‰æ“ä½œæ˜¯å¦è¢«å–æ¶ˆï¼Œå¦‚æœè¢«å–æ¶ˆäº†ï¼Œåˆ™æ ‡è®°ä»»åŠ¡ç»“æŸï¼Œå¹¶å¤„ç†åç»­çš„blockå’Œæ¸…ç†æ“ä½œ if (self.isCancelled) &#123; self.finished = YES; [self reset]; return; &#125; //å¼€å¯åå°ä¸‹è½½ä»»åŠ¡//æ¡ä»¶ç¼–è¯‘ï¼Œå¦‚æœæ˜¯iphoneè®¾å¤‡ä¸”å¤§äº4.0#if TARGET_OS_IPHONE &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_4_0 //å…ˆéªŒè¯UIApplicationå®ä½“æ˜¯å¦å­˜åœ¨ Class UIApplicationClass = NSClassFromString(@"UIApplication"); BOOL hasApplication = UIApplicationClass &amp;&amp; [UIApplicationClass respondsToSelector:@selector(sharedApplication)]; //å¦‚æœå­˜åœ¨ä¸”å…è®¸åå°ä¸‹è½½ if (hasApplication &amp;&amp; [self shouldContinueWhenAppEntersBackground]) &#123; __weak __typeof__ (self) wself = self; //è·å¾—UIApplicationå•ä¾‹å¯¹è±¡ UIApplication * app = [UIApplicationClass performSelector:@selector(sharedApplication)]; //UIBackgroundTaskIdentifierï¼šé€šè¿‡UIBackgroundTaskIdentifierå¯ä»¥å®ç°æœ‰é™æ—¶é—´å†…åœ¨åå°è¿è¡Œç¨‹åº //åœ¨åå°è·å–ä¸€å®šçš„æ—¶é—´å»æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç  self.backgroundTaskId = [app beginBackgroundTaskWithExpirationHandler:^&#123; //è¿™ä¸ªå›è°ƒæ˜¯åå°ä»»åŠ¡å°†è¢«ç³»ç»Ÿæ€æ­»æ—¶æ‰§è¡Œï¼Œè¿™é‡Œå–æ¶ˆäº†ä¸‹è½½ä»»åŠ¡ __strong __typeof (wself) sself = wself;#warning 3 if (sself) &#123; [sself cancel]; //å–æ¶ˆå½“å‰ä¸‹è½½æ“ä½œ [app endBackgroundTask:sself.backgroundTaskId]; //ç»“æŸåå°ä»»åŠ¡ sself.backgroundTaskId = UIBackgroundTaskInvalid; &#125; &#125;]; &#125;#endif //æ„å»ºNSURLConnectionå‘æœåŠ¡å™¨å‘é€è¯·æ±‚(å½“å‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œ) self.executing = YES; //åˆ›å»ºNSURLConnectionå¯¹è±¡ï¼Œå¹¶è®¾ç½®ä»£ç†ï¼ˆæ²¡æœ‰é©¬ä¸Šå‘é€è¯·æ±‚ï¼‰ self.connection = [[NSURLConnection alloc] initWithRequest:self.request delegate:self startImmediately:NO]; //è·å¾—å½“å‰çº¿ç¨‹ self.thread = [NSThread currentThread]; &#125; [self.connection start]; //å‘é€ç½‘ç»œè¯·æ±‚ if (self.connection) &#123; if (self.progressBlock) &#123; //è¿›åº¦blockçš„å›è°ƒ self.progressBlock(0, NSURLResponseUnknownLength); &#125; //æ³¨å†Œé€šçŸ¥ä¸­å¿ƒï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­å‘é€é€šçŸ¥SDWebImageDownloadStartNotificationã€ä»»åŠ¡å¼€å§‹ä¸‹è½½ã€‘ dispatch_async(dispatch_get_main_queue(), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:SDWebImageDownloadStartNotification object:self]; &#125;); //éœ€è¦æ‰‹åŠ¨å¼€å¯çº¿ç¨‹å¯¹åº”çš„Runloop,connectionæ‰èƒ½æ­£å¸¸æ¥æ”¶delegateå›è°ƒ if (floor(NSFoundationVersionNumber) &lt;= NSFoundationVersionNumber_iOS_5_1) &#123; // Make sure to run the runloop in our background thread so it can process downloaded data //ç¡®ä¿åå°çº¿ç¨‹çš„runloopè·‘èµ·æ¥ // Note: we use a timeout to work around an issue with NSURLConnection cancel under iOS 5 // not waking up the runloop, leading to dead threads (see https://github.com/rs/SDWebImage/issues/466) CFRunLoopRunInMode(kCFRunLoopDefaultMode, 10, false); &#125; else &#123; //å¼€å¯Runloop CFRunLoopRun(); &#125; //runloopå…³é—­ä¹‹åæ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç  if (!self.isFinished) &#123; [self.connection cancel]; //è¯·æ±‚å¤±è´¥(å–æ¶ˆç½‘ç»œè¿æ¥) //å¤„ç†é”™è¯¯ä¿¡æ¯ [self connection:self.connection didFailWithError:[NSError errorWithDomain:NSURLErrorDomain code:NSURLErrorTimedOut userInfo:@&#123;NSURLErrorFailingURLErrorKey : self.request.URL&#125;]]; &#125; &#125; else &#123; //NSURLConnectionåˆå§‹åŒ–å¤±è´¥ï¼Œæ‰§è¡ŒcompletedBlockå›è°ƒ if (self.completedBlock) &#123; self.completedBlock(nil, nil, [NSError errorWithDomain:NSURLErrorDomain code:0 userInfo:@&#123;NSLocalizedDescriptionKey : @"Connection can't be initialized"&#125;], YES); &#125; &#125; //åˆ°è¿™é‡Œï¼Œä¸ç®¡ä¸‹è½½æˆåŠŸä¸å¦ï¼Œéƒ½æ³¨é”€ä¹‹å‰æ³¨å†Œçš„åå°ä»»åŠ¡#if TARGET_OS_IPHONE &amp;&amp; __IPHONE_OS_VERSION_MAX_ALLOWED &gt;= __IPHONE_4_0 Class UIApplicationClass = NSClassFromString(@"UIApplication"); if(!UIApplicationClass || ![UIApplicationClass respondsToSelector:@selector(sharedApplication)]) &#123; return; &#125; if (self.backgroundTaskId != UIBackgroundTaskInvalid) &#123; UIApplication * app = [UIApplication performSelector:@selector(sharedApplication)]; [app endBackgroundTask:self.backgroundTaskId]; self.backgroundTaskId = UIBackgroundTaskInvalid; &#125;#endif&#125; start æ–¹æ³•æ˜¯å®ç°å¹¶å‘NSOperationçš„æ ¸å¿ƒæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œåˆ›å»ºäº†NSURLConnectionè¯·æ±‚å¹¶å‘èµ·è¯·æ±‚ã€‚å†é‡ç‚¹çœ‹ä¸‹ NSURLConnectionçš„ä¸¤ä¸ªä»£ç†æ–¹æ³•ï¼š å½“æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›æ•°æ®çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¤šæ¬¡12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//å½“æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›æ•°æ®çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¯èƒ½ä¼šè°ƒç”¨å¤šæ¬¡- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data &#123; //ä¸æ–­æ‹¼æ¥æ¥æ”¶åˆ°çš„å›¾ç‰‡æ•°æ®ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ [self.imageData appendData:data]; //å¦‚æœä¸‹è½½å›¾ç‰‡è®¾ç½®çš„ç­–ç•¥æ˜¯optionså€¼ä¸º SDWebImageDownloaderProgressiveDownload //å³è¾¹ä¸‹è½½è¾¹æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯ä¸‹è½½å®Œæˆä¸€æ¬¡æ´—æ˜¾ç¤ºï¼Œåˆ™éœ€è¦éšç€æ¥æ”¶åˆ°dataæ•°æ®ç«‹å³è¿›è¡Œå›¾ç‰‡è½¬åŒ–ã€‚ if ((self.options &amp; SDWebImageDownloaderProgressiveDownload) &amp;&amp; self.expectedSize &gt; 0 &amp;&amp; self.completedBlock) &#123; // The following code is from http://www.cocoaintheshell.com/2011/05/progressive-images-download-imageio/ // Thanks to the author @Nyx0uf // Get the total bytes downloaded //è·å¾—å½“å‰å·²ç»æ¥æ”¶åˆ°çš„äºŒè¿›åˆ¶æ•°æ®å¤§å° const NSInteger totalSize = self.imageData.length; // Update the data source, we must pass ALL the data, not just the new bytes // æŠŠå›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºCGImageSourceRef CGImageSourceRef imageSource = CGImageSourceCreateWithData((__bridge CFDataRef)self.imageData, NULL); //å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ï¼ˆå³æ¥æ”¶åˆ°ç¬¬ä¸€éƒ¨åˆ†çš„å›¾ç‰‡æ•°æ®ï¼‰ if (width + height == 0) &#123; CFDictionaryRef properties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, NULL); if (properties) &#123; NSInteger orientationValue = -1; CFTypeRef val = CFDictionaryGetValue(properties, kCGImagePropertyPixelHeight); if (val) CFNumberGetValue(val, kCFNumberLongType, &amp;height); val = CFDictionaryGetValue(properties, kCGImagePropertyPixelWidth); if (val) CFNumberGetValue(val, kCFNumberLongType, &amp;width); val = CFDictionaryGetValue(properties, kCGImagePropertyOrientation); if (val) CFNumberGetValue(val, kCFNumberNSIntegerType, &amp;orientationValue); CFRelease(properties); // When we draw to Core Graphics, we lose orientation information, // which means the image below born of initWithCGIImage will be // oriented incorrectly sometimes. (Unlike the image born of initWithData // in connectionDidFinishLoading.) So save it here and pass it on later. orientation = [[self class] orientationFromPropertyValue:(orientationValue == -1 ? 1 : orientationValue)]; &#125; &#125; //æ¥æ”¶æ•°æ®ä¸­æœŸï¼ˆä¹‹å‰æ¥æ”¶è¿‡ä¸€éƒ¨åˆ†ï¼Œä½†ä¸ºå®Œå…¨ï¼‰ if (width + height &gt; 0 &amp;&amp; totalSize &lt; self.expectedSize) &#123; // Create the image CGImageRef partialImageRef = CGImageSourceCreateImageAtIndex(imageSource, 0, NULL);#ifdef TARGET_OS_IPHONE // Workaround for iOS anamorphic image if (partialImageRef) &#123; const size_t partialHeight = CGImageGetHeight(partialImageRef); CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); CGContextRef bmContext = CGBitmapContextCreate(NULL, width, height, 8, width * 4, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst); CGColorSpaceRelease(colorSpace); if (bmContext) &#123; CGContextDrawImage(bmContext, (CGRect)&#123;.origin.x = 0.0f, .origin.y = 0.0f, .size.width = width, .size.height = partialHeight&#125;, partialImageRef); CGImageRelease(partialImageRef); partialImageRef = CGBitmapContextCreateImage(bmContext); CGContextRelease(bmContext); &#125; else &#123; CGImageRelease(partialImageRef); partialImageRef = nil; &#125; &#125;#endif if (partialImageRef) &#123; UIImage *image = [UIImage imageWithCGImage:partialImageRef scale:1 orientation:orientation]; NSString *key = [[SDWebImageManager sharedManager] cacheKeyForURL:self.request.URL]; UIImage *scaledImage = [self scaledImageForKey:key image:image]; if (self.shouldDecompressImages) &#123; image = [UIImage decodedImageWithImage:scaledImage]; &#125; else &#123; image = scaledImage; &#125; CGImageRelease(partialImageRef); dispatch_main_sync_safe(^&#123; if (self.completedBlock) &#123; self.completedBlock(image, nil, nil, NO); &#125; &#125;); &#125; &#125; //é‡Šæ”¾imageSourceå¯¹è±¡ CFRelease(imageSource); &#125; //æ‰§è¡ŒprogressBlockè¿›åº¦å›è°ƒï¼Œä¸æ–­æ›´æ–°è¿›åº¦ä¿¡æ¯ if (self.progressBlock) &#123; self.progressBlock(self.imageData.length, self.expectedSize); &#125;&#125; ä¸‹è½½å®Œæˆçš„ä»£ç†æ–¹æ³•ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//å½“è¯·æ±‚ç»“æŸçš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•- (void)connectionDidFinishLoading:(NSURLConnection *)aConnection &#123; SDWebImageDownloaderCompletedBlock completionBlock = self.completedBlock; @synchronized(self) &#123; //å…³åœå½“å‰çš„runloop é‡Šæ”¾èµ„æº CFRunLoopStop(CFRunLoopGetCurrent()); //æŠŠçº¿ç¨‹å’Œè¿æ¥å¯¹è±¡æ¸…ç©º self.thread = nil; self.connection = nil; //åœ¨ä¸»çº¿ç¨‹ä¸­å‘å‡ºé€šçŸ¥ï¼š //SDWebImageDownloadStopNotification ä»»åŠ¡åœæ­¢ //SDWebImageDownloadFinishNotification ä»»åŠ¡å®Œæˆ dispatch_async(dispatch_get_main_queue(), ^&#123; [[NSNotificationCenter defaultCenter] postNotificationName:SDWebImageDownloadStopNotification object:self]; [[NSNotificationCenter defaultCenter] postNotificationName:SDWebImageDownloadFinishNotification object:self]; &#125;); &#125; #warning 5 //è¯·æ±‚å¤´æ˜¯å¦æ˜¯ä»ç¼“å­˜è·å–ï¼Ÿ if (![[NSURLCache sharedURLCache] cachedResponseForRequest:_request]) &#123; responseFromCached = NO; &#125; if (completionBlock) &#123; //å¦‚æœä¸‹è½½ç­–ç•¥optionsæ˜¯SDWebImageDownloaderIgnoreCachedResponse&amp;&amp;responseFromCachedä¸ºçœŸï¼Œæ‰§è¡ŒcompletionBlock æˆåŠŸå›è°ƒ if (self.options &amp; SDWebImageDownloaderIgnoreCachedResponse &amp;&amp; responseFromCached) &#123; completionBlock(nil, nil, nil, YES); &#125; else if (self.imageData) &#123; //å¦‚æœå¾—åˆ°å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ® //æŠŠäºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå›¾ç‰‡ UIImage *image = [UIImage sd_imageWithData:self.imageData]; //è¿”å›æŒ‡å®šURLçš„ç¼“å­˜é”®å€¼,å³URLå­—ç¬¦ä¸² NSString *key = [[SDWebImageManager sharedManager] cacheKeyForURL:self.request.URL]; //æ ¹æ®æ‰‹æœºå±å¹•åˆ†è¾¨ç‡å¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ image = [self scaledImageForKey:key image:image]; // Do not force decoding animated GIFs //å¦‚æœä¸æ˜¯gifå›¾ï¼Œè§£å‹å›¾ç‰‡ if (!image.images) &#123; //å¦‚æœéœ€è¦ï¼Œé‚£ä¹ˆå¯¹å›¾ç‰‡è¿›è¡Œè§£å‹ç¼©å¤„ç† if (self.shouldDecompressImages) &#123; image = [UIImage decodedImageWithImage:image]; &#125; &#125; //å¦‚æœå‘ç°è½¬æ¢ä¹‹åå›¾ç‰‡çš„Sizeä¸º0ï¼Œåˆ™æ‰§è¡ŒcompletionBlockæˆåŠŸå›è°ƒï¼Œå›¾ç‰‡å‚æ•°ä¼ nilå¹¶æŠ¥é”™ if (CGSizeEqualToSize(image.size, CGSizeZero)) &#123; completionBlock(nil, nil, [NSError errorWithDomain:SDWebImageErrorDomain code:0 userInfo:@&#123;NSLocalizedDescriptionKey : @"Downloaded image has 0 pixels"&#125;], YES); &#125; else &#123; completionBlock(image, self.imageData, nil, YES); &#125; &#125; else &#123; completionBlock(nil, nil, [NSError errorWithDomain:SDWebImageErrorDomain code:0 userInfo:@&#123;NSLocalizedDescriptionKey : @"Image data is nil"&#125;], YES); &#125; &#125; //é‡Šæ”¾èµ„æº self.completionBlock = nil; [self done]; //ç»“æŸåçš„å¤„ç†&#125; SDWebImage â€”â€”çŸ¥å…¶ç„¶äº¦çŸ¥å…¶æ‰€ä»¥ç„¶ ä¸‹è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•ä½¿ç”¨#import &quot;SDWebImageDownloader.h&quot;12345678910111213141516171819202122232425262728293031323334/* * ä½¿ç”¨ç»™å®šçš„ URL åˆ›å»º SDWebImageDownloader å¼‚æ­¥ä¸‹è½½å™¨å®ä¾‹ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options å›¾ç‰‡ä¸‹è½½é€‰é¡¹ï¼ˆç­–ç•¥ï¼‰,å‚è€ƒSDWebImageOptionsçš„æšä¸¾å€¼ * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒ * receivedSize å·²ç»ä¸‹è½½çš„æ•°æ®å¤§å° * expectedSize è¦ä¸‹è½½å›¾ç‰‡çš„æ€»å¤§å° * @param completedBlock æ“ä½œæˆåŠŸå›è°ƒå›è°ƒ,è¯¥å›è°ƒæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * dataï¼šå›¾ç‰‡äºŒè¿›åˆ¶æ•°æ® * errorï¼šå¦‚æœå›¾ç‰‡ä¸‹è½½æˆåŠŸåˆ™errorä¸ºnil,å¦åˆ™erroræœ‰å€¼ * @param finishedï¼š * 1.å¦‚æœå›¾åƒä¸‹è½½å®Œæˆåˆ™ä¸ºYES * 2.å¦‚æœæ²¡æœ‰ä½¿ç”¨ SDWebImageDownloaderProgressiveDownloadï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸€ç›´æ˜¯ YES * 3.å¦‚æœä½¿ç”¨äº† SDWebImageDownloaderProgressiveDownload é€‰é¡¹ï¼Œæ­¤ block ä¼šè¢«é‡å¤è°ƒç”¨ * 1)ä¸‹è½½å®Œæˆå‰ï¼Œimage å‚æ•°æ˜¯éƒ¨åˆ†å›¾åƒï¼Œfinished å‚æ•°æ˜¯ NO * 2)æœ€åä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œimage å‚æ•°æ˜¯å®Œæ•´å›¾åƒï¼Œè€Œ finished å‚æ•°æ˜¯ YES * 3)å¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆfinished å‚æ•°ä¹Ÿæ˜¯ YES * * @return è¿”å›å€¼ï¼šå¯è¢«å–æ¶ˆçš„ SDWebImageOperation */- (void)download3 &#123; [[SDWebImageDownloader sharedDownloader] downloadImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) &#123; /** æ³¨æ„:completedå®Œæˆåè¿™é‡Œæ˜¯åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œçš„ */ // çº¿ç¨‹é—´é€šä¿¡(å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI) [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; self.imageView.image = image; NSLog(@"download3--%@",[NSThread currentThread]); &#125;]; &#125;];&#125; æ‰“å°è¾“å‡ºæ•ˆæœ åº”ç”¨åœºæ™¯:ä¸éœ€è¦ä»»ä½•çš„ç¼“å­˜å¤„ç†çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•æ²¡æœ‰åšä»»ä½•ç¼“å­˜å¤„ç†ã€‚æ³¨æ„ï¼šè¯¥æ–¹æ³•completedå®Œæˆåè¿™é‡ŒBlockæ˜¯åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œçš„ã€‚è¿™é‡Œè¦è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡ï¼Œä¸ç„¶ä¼šæœ‰è­¦å‘Šã€‚ è¿™ä¸ªæ¡†æ¶æœ‰å¤ªå¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ æ¨æ•²ï¼Œæ–¹æ–¹é¢é¢éƒ½é€éœ²ç€ä½œè€…ä»¥åŠä¼—å¤šè´¡çŒ®è€…çš„æ™ºæ…§ï¼Œæˆ‘ä»¬è¯»èµ·æ¥ä¹Ÿä¸€å®šä¼šå—ç›Šè‰¯å¤šã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SDWebImageæºç 1â€”SDWebImageManager]]></title>
    <url>%2FSourceAnnotations%2FSDSourceCode1.html</url>
    <content type="text"><![CDATA[Write in the first SDWebImage æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå¼‚æ­¥å›¾ç‰‡åŠ è½½åº“ï¼Œåƒè¿™ç§ç»å¸¸ç”¨åˆæ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—è¦åšåˆ°åˆæ­¥ç†è§£ï¼Œç„¶åæ¢³ç†æ€»ç»“å¸¸ç”¨æ–¹æ³•ï¼Œåˆ°æœ€åå¤¯å®åŸºç¡€ã€æ´»å­¦æ´»ç”¨ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€SDWebImageManager ç®¡ç†è€…ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ SDWebImage â€”&gt;çŸ¥å…¶ç„¶äº¦çŸ¥å…¶æ‰€ä»¥ç„¶æˆ‘ä»¬å°±ç›´æ¥ä» SDWebImageManager.h å…¥æ‰‹å§ SDWebImageManager.h123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450/* * This file is part of the SDWebImage package. * (c) Olivier Poitrey &lt;rs@dailymotion.com&gt; * * For the full copyright and license information, please view the LICENSE * file that was distributed with this source code. */#import "SDWebImageCompat.h"#import "SDWebImageOperation.h"#import "SDWebImageDownloader.h"#import "SDImageCache.h"#pragma mark --------------------#pragma mark typedef//ä½¿ç”¨ä½ç§»æšä¸¾ï¼Œé€šè¿‡æŒ‰ä½ä¸&amp;æŒ‰ä½æˆ–|çš„ç»„åˆæ–¹å¼ä¼ é€’å¤šä¸ªå€¼typedef NS_OPTIONS(NSUInteger, SDWebImageOptions) &#123; /** * By default, when a URL fail to be downloaded, the URL is blacklisted so the library won't keep trying. * This flag disable this blacklisting. * * é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€ä¸ªurlåœ¨ä¸‹è½½çš„æ—¶å€™å¤±è´¥äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªurlä¼šè¢«åŠ å…¥é»‘åå•ï¼Œä¸ä¼šå°è¯•å†æ¬¡ä¸‹è½½ã€‚å¦‚æœä½¿ç”¨è¯¥å‚æ•°ï¼Œåˆ™è¯¥URLä¸ä¼šè¢«æ·»åŠ åˆ°é»‘åå•ä¸­ã€‚æ„å‘³ç€ä¼šå¯¹ä¸‹è½½å¤±è´¥çš„URLå°è¯•é‡æ–°ä¸‹è½½ã€‚ * æ­¤æ ‡è®°å–æ¶ˆé»‘åå• */ SDWebImageRetryFailed = 1 &lt;&lt; 0, //å¤±è´¥åå°è¯•é‡æ–°ä¸‹è½½ /** * By default, image downloads are started during UI interactions, this flags disable this feature, * leading to delayed download on UIScrollView deceleration for instance. * * é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ UI äº¤äº’æ—¶ä¹Ÿä¼šå¯åŠ¨å›¾åƒä¸‹è½½ï¼Œæ­¤æ ‡è®°å–æ¶ˆè¿™ä¸€ç‰¹æ€§ * ä¼šæ¨è¿Ÿåˆ°æ»šåŠ¨è§†å›¾åœæ­¢æ»šåŠ¨ä¹‹åå†ç»§ç»­ä¸‹è½½ * å¤‡æ³¨ï¼šNSURLConnection çš„ç½‘ç»œä¸‹è½½äº‹ä»¶ç›‘å¬çš„è¿è¡Œå¾ªç¯æ¨¡å¼æ˜¯ NSDefaultRunLoopMode */ SDWebImageLowPriority = 1 &lt;&lt; 1, //ä½ä¼˜å…ˆçº§ /** * This flag disables on-disk caching * * ä½¿ç”¨è¯¥å‚æ•°ï¼Œå°†ç¦æ­¢ç£ç›˜ç¼“å­˜ï¼Œåªåšå†…å­˜ç¼“å­˜ */ SDWebImageCacheMemoryOnly = 1 &lt;&lt; 2, //åªä½¿ç”¨å†…å­˜ç¼“å­˜ /** * This flag enables progressive download, the image is displayed progressively during download as a browser would do. * By default, the image is only displayed once completely downloaded. * * æ­¤æ ‡è®°å…è®¸æ¸è¿›å¼ä¸‹è½½ï¼Œå°±åƒæµè§ˆå™¨ä¸­é‚£æ ·ï¼Œä¸‹è½½è¿‡ç¨‹ä¸­ï¼Œå›¾åƒä¼šé€æ­¥æ˜¾ç¤ºå‡ºæ¥ * é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾åƒä¼šåœ¨ä¸‹è½½å®Œæˆåä¸€æ¬¡æ€§æ˜¾ç¤º */ SDWebImageProgressiveDownload = 1 &lt;&lt; 3, //æ¸è¿›å¼ä¸‹è½½ /** * Even if the image is cached, respect the HTTP response cache control, and refresh the image from remote location if needed. * The disk caching will be handled by NSURLCache instead of SDWebImage leading to slight performance degradation. * This option helps deal with images changing behind the same request URL, e.g. Facebook graph api profile pics. * If a cached image is refreshed, the completion block is called once with the cached image and again with the final image. * * Use this flag only if you can't make your URLs static with embedded cache busting parameter. * * éµå®ˆ HTPP å“åº”çš„ç¼“å­˜æ§åˆ¶ï¼Œå¦‚æœéœ€è¦ï¼Œä»è¿œç¨‹åˆ·æ–°å›¾åƒ * ç£ç›˜ç¼“å­˜å°†ç”± NSURLCache å¤„ç†ï¼Œè€Œä¸æ˜¯ SDWebImageï¼Œè¿™ä¼šå¯¹æ€§èƒ½æœ‰è½»å¾®çš„å½±å“ * æ­¤é€‰é¡¹ç”¨äºå¤„ç†URLæŒ‡å‘å›¾ç‰‡å‘ç”Ÿå˜åŒ–çš„æƒ…å†µ * å¦‚æœç¼“å­˜çš„å›¾åƒè¢«åˆ·æ–°ï¼Œä¼šè°ƒç”¨ä¸€æ¬¡ completion blockï¼Œå¹¶ä¼ é€’æœ€ç»ˆçš„å›¾åƒ */ SDWebImageRefreshCached = 1 &lt;&lt; 4, //åˆ·æ–°ç¼“å­˜ /** * In iOS 4+, continue the download of the image if the app goes to background. This is achieved by asking the system for * extra time in background to let the request finish. If the background task expires the operation will be cancelled. * * å¦‚æœç³»ç»Ÿç‰ˆæœ¬æ˜¯iOS 4+çš„ï¼Œé‚£ä¹ˆå½“Appè¿›å…¥åå°åä»ç„¶ä¼šç»§ç»­ä¸‹è½½å›¾åƒã€‚ * è¿™æ˜¯å‘ç³»ç»Ÿè¯·æ±‚é¢å¤–çš„åå°æ—¶é—´ä»¥ä¿è¯ä¸‹è½½è¯·æ±‚å®Œæˆçš„ * å¦‚æœåå°ä»»åŠ¡è¿‡æœŸï¼Œè¯·æ±‚å°†ä¼šè¢«å–æ¶ˆ */ SDWebImageContinueInBackground = 1 &lt;&lt; 5, //åå°ä¸‹è½½ /** * Handles cookies stored in NSHTTPCookieStore by setting * NSMutableURLRequest.HTTPShouldHandleCookies = YES; * * é€šè¿‡è®¾ç½®ï¼Œå¤„ç†ä¿å­˜åœ¨ NSHTTPCookieStore ä¸­çš„ cookies */ SDWebImageHandleCookies = 1 &lt;&lt; 6, //å¤„ç†ä¿å­˜åœ¨NSHTTPCookieStoreä¸­çš„cookies /** * Enable to allow untrusted SSL certificates. * Useful for testing purposes. Use with caution in production. * * å…è®¸ä¸ä¿¡ä»»çš„ SSL è¯ä¹¦ * å¯ä»¥å‡ºäºæµ‹è¯•ç›®çš„ä½¿ç”¨ï¼Œåœ¨æ­£å¼äº§å“ä¸­æ…ç”¨ */ SDWebImageAllowInvalidSSLCertificates = 1 &lt;&lt; 7, //å…è®¸ä¸ä¿¡ä»»çš„ SSL è¯ä¹¦ /** * By default, image are loaded in the order they were queued. This flag move them to * the front of the queue and is loaded immediately instead of waiting for the current queue to be loaded (which * could take a while). * * é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾åƒä¼šæŒ‰ç…§æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„é¡ºåºè¢«åŠ è½½ï¼Œæ­¤æ ‡è®°ä¼šå°†å®ƒä»¬ç§»åŠ¨åˆ°é˜Ÿåˆ—å‰ç«¯è¢«ç«‹å³åŠ è½½ * è€Œä¸æ˜¯ç­‰å¾…å½“å‰é˜Ÿåˆ—è¢«åŠ è½½ï¼Œå› ä¸ºç­‰å¾…é˜Ÿåˆ—åŠ è½½ä¼šéœ€è¦ä¸€æ®µæ—¶é—´ */ SDWebImageHighPriority = 1 &lt;&lt; 8, //é«˜ä¼˜å…ˆçº§ï¼ˆä¼˜å…ˆä¸‹è½½ï¼‰ /** * By default, placeholder images are loaded while the image is loading. This flag will delay the loading * of the placeholder image until after the image has finished loading. * * é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åŠ è½½å›¾åƒæ—¶ï¼Œå ä½å›¾åƒå·²ç»ä¼šè¢«åŠ è½½ã€‚ * æ­¤æ ‡è®°ä¼šå»¶è¿ŸåŠ è½½å ä½å›¾åƒï¼Œç›´åˆ°å›¾åƒå·²ç»å®ŒæˆåŠ è½½ */ SDWebImageDelayPlaceholder = 1 &lt;&lt; 9, //å»¶è¿Ÿå ä½å›¾ç‰‡ /** * We usually don't call transformDownloadedImage delegate method on animated images, * as most transformation code would mangle it. * Use this flag to transform them anyway. * * é€šå¸¸ä¸ä¼šåœ¨å¯åŠ¨ç”»çš„å›¾åƒä¸Šè°ƒç”¨transformDownloadedImageä»£ç†æ–¹æ³•ï¼Œå› ä¸ºå¤§å¤šæ•°è½¬æ¢ä»£ç ä¼šç ´ååŠ¨ç”»æ–‡ä»¶ * ä½¿ç”¨æ­¤æ ‡è®°å°è¯•è½¬æ¢ */ SDWebImageTransformAnimatedImage = 1 &lt;&lt; 10, //è½¬æ¢åŠ¨ç”»å›¾åƒ /** * By default, image is added to the imageView after download. But in some cases, we want to * have the hand before setting the image (apply a filter or add it with cross-fade animation for instance) * Use this flag if you want to manually set the image in the completion when success * * ä¸‹è½½å®Œæˆåæ‰‹åŠ¨è®¾ç½®å›¾ç‰‡ï¼Œé»˜è®¤æ˜¯ä¸‹è½½å®Œæˆåè‡ªåŠ¨æ”¾åˆ°ImageViewä¸Š */ SDWebImageAvoidAutoSetImage = 1 &lt;&lt; 11 //æ‰‹åŠ¨è®¾ç½®å›¾åƒ&#125;;//å®šä¹‰ä»»åŠ¡å®Œæˆçš„blockå—typedef void(^SDWebImageCompletionBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL);//å®šä¹‰ä»»åŠ¡ç»“æŸçš„blockå—typedef void(^SDWebImageCompletionWithFinishedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL);//å®šä¹‰ç¼“å­˜è¿‡æ»¤å™¨çš„blockå—typedef NSString *(^SDWebImageCacheKeyFilterBlock)(NSURL *url);#pragma mark --------------------#pragma mark SDWebImageManagerDelegate/***************SDWebImageManagerDelegateä»£ç†åè®®å¼€å§‹***************///@class SDWebImageManager;@protocol SDWebImageManagerDelegate &lt;NSObject&gt;@optional#warning 1/** * Controls which image should be downloaded when the image is not found in the cache. * * @param imageManager The current `SDWebImageManager` * @param imageURL The url of the image to be downloaded * * @return Return NO to prevent the downloading of the image on cache misses. If not implemented, YES is implied. * * å¦‚æœè¯¥å›¾ç‰‡æ²¡æœ‰ç¼“å­˜ï¼Œé‚£ä¹ˆä¸‹è½½ * * @param imageManagerï¼šå½“å‰çš„SDWebImageManager * @param imageURLï¼šè¦ä¸‹è½½å›¾ç‰‡çš„URLåœ°å€ * * @return å¦‚æœè¦ä¸‹è½½çš„å›¾ç‰‡åœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›NOï¼Œå¦åˆ™è¿”å›YES */- (BOOL)imageManager:(SDWebImageManager *)imageManager shouldDownloadImageForURL:(NSURL *)imageURL;/** * Allows to transform the image immediately after it has been downloaded and just before to cache it on disk and memory. * NOTE: This method is called from a global queue in order to not to block the main thread. * * @param imageManager The current `SDWebImageManager` * @param image The image to transform * @param imageURL The url of the image to transform * * @return The transformed image object. * * å…è®¸åœ¨ä¸‹è½½åç«‹å³å°†å›¾åƒè½¬æ¢ï¼Œå¹¶è¿›è¡Œç£ç›˜å’Œå†…å­˜ç¼“å­˜ã€‚ * * @param imageManager å½“å‰çš„SDWebImageManager * @param image è¦è½¬æ¢ä½ çš„å›¾ç‰‡ * @param imageURL è¦è½¬æ¢çš„å›¾ç‰‡çš„URLåœ°å€ * * @return å˜æ¢åçš„å›¾ç‰‡å¯¹è±¡ */- (UIImage *)imageManager:(SDWebImageManager *)imageManager transformDownloadedImage:(UIImage *)image withURL:(NSURL *)imageURL;@end///***************SDWebImageManagerDelegateä»£ç†åè®®ç»“æŸ***************/#pragma mark --------------------#pragma mark SDWebImageManager-property//å¯¹SDWebImageManagerçš„åŠŸèƒ½åšå‡ºè¯´æ˜ï¼Œå¹¶æä¾›ç¤ºä¾‹ä»£ç /** * The SDWebImageManager is the class behind the UIImageView+WebCache category and likes. * It ties the asynchronous downloader (SDWebImageDownloader) with the image cache store (SDImageCache). * You can use this class directly to benefit from web image downloading with caching in another context than * a UIView. * * Here is a simple example of how to use SDWebImageManager: * * @codeSDWebImageManager *manager = [SDWebImageManager sharedManager];[manager downloadImageWithURL:imageURL options:0 progress:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) &#123; if (image) &#123; // do something with image &#125; &#125;]; * @endcode * * SDWebImageManageræ˜¯UIImageView+WebCache ç­‰åˆ†ç±»åå°å·¥ä½œçš„ç±» * SDWebImageManageræ˜¯å¼‚æ­¥ä¸‹è½½å™¨ (SDWebImageDownloader) å’Œå›¾åƒç¼“å­˜å­˜å‚¨ (SDImageCache) ä¹‹é—´çš„çº½å¸¦ * å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤ç±»å®ç°ç½‘ç»œå›¾åƒçš„ä¸‹è½½ * ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ SDWebImageManager çš„ç¤ºä¾‹ä»£ç  *@code SDWebImageManager *manager = [SDWebImageManager sharedManager]; [manager downloadImageWithURL:imageURL options:0 progress:nil completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) &#123; if (image) &#123; // do something with image &#125; &#125;]; *@endcode */@interface SDWebImageManager : NSObject@property (weak, nonatomic) id &lt;SDWebImageManagerDelegate&gt; delegate; //éµå®ˆäº†SDWebImageManagerDelegateåè®®çš„ä»£ç†@property (strong, nonatomic, readonly) SDImageCache *imageCache; //å¤„ç†ç¼“å­˜@property (strong, nonatomic, readonly) SDWebImageDownloader *imageDownloader; //å›¾ç‰‡ä¸‹è½½å·¥å…·ç±»/** * The cache filter is a block used each time SDWebImageManager need to convert an URL into a cache key. This can * be used to remove dynamic part of an image URL. * * The following example sets a filter in the application delegate that will remove any query-string from the * URL before to use it as a cache key: * * @code[[SDWebImageManager sharedManager] setCacheKeyFilter:^(NSURL *url) &#123; url = [[NSURL alloc] initWithScheme:url.scheme host:url.host path:url.path]; return [url absoluteString];&#125;]; * @endcode * * "ç¼“å­˜è¿‡æ»¤å™¨"æ˜¯ä¸€ä¸ªblockï¼Œç”¨äºæ¯æ¬¡SDWebImageManageréœ€è¦å°†ä¸€ä¸ªURLè½¬æ¢æˆä¸€ä¸ªç¼“å­˜çš„é”®å€¼ * å¯ç”¨äºåˆ é™¤å›¾åƒ URL ä¸­åŠ¨æ€çš„éƒ¨åˆ† * ä»¥ä¸‹ç¤ºä¾‹åœ¨ application ä»£ç†ä¸­è®¾ç½®ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¯¥è¿‡æ»¤å™¨ä¼šåœ¨å°†URLå½“ä½œç¼“å­˜é”®å€¼ä¹‹å‰ï¼Œä»URLä¸­åˆ é™¤è¯·æ±‚å­—ç¬¦ä¸² * [[SDWebImageManager sharedManager] setCacheKeyFilter:^(NSURL *url) &#123; url = [[NSURL alloc] initWithScheme:url.scheme host:url.host path:url.path]; return [url absoluteString]; &#125;]; **/@property (nonatomic, copy) SDWebImageCacheKeyFilterBlock cacheKeyFilter; //ç¼“å­˜è¿‡æ»¤å™¨#pragma mark --------------------#pragma mark SDWebImageManager-Methods/** * Returns global SDWebImageManager instance. * * @return SDWebImageManager shared instance * * å•ä¾‹æ–¹æ³• * @return è¿”å›å…¨å±€çš„ SDWebImageManager å®ä¾‹(å•ä¾‹) */+ (SDWebImageManager *)sharedManager;//è¯´æ˜ï¼šä¸‹è½½å›¾ç‰‡è°ƒç”¨çš„ä¸»æ–¹æ³•/** * Downloads the image at the given URL if not present in cache or return the cached version otherwise. * * @param url The URL to the image * @param options A mask to specify options to use for this request * @param progressBlock A block called while image is downloading * @param completedBlock A block called when operation has been completed. * * This parameter is required. * * This block has no return value and takes the requested UIImage as first parameter. * In case of error the image parameter is nil and the second parameter may contain an NSError. * * The third parameter is an `SDImageCacheType` enum indicating if the image was retrieved from the local cache * or from the memory cache or from the network. * * The last parameter is set to NO when the SDWebImageProgressiveDownload option is used and the image is * downloading. This block is thus called repeatedly with a partial image. When image is fully downloaded, the * block is called a last time with the full image and the last parameter set to YES. * * @return Returns an NSObject conforming to SDWebImageOperation. Should be an instance of SDWebImageDownloaderOperation * * å¦‚æœURLå¯¹åº”çš„å›¾åƒåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¸‹è½½æŒ‡å®šçš„å›¾ç‰‡ ï¼Œå¦åˆ™è¿”å›ç¼“å­˜çš„å›¾åƒ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options æŒ‡å®šæ­¤æ¬¡è¯·æ±‚ç­–ç•¥çš„é€‰é¡¹ * @param progressBlock å›¾ç‰‡ä¸‹è½½è¿›åº¦çš„å›è°ƒ * @param completedBlock æ“ä½œå®Œæˆåçš„å›è°ƒ * æ­¤å‚æ•°æ˜¯å¿…é¡»çš„ï¼Œæ­¤blockæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * errorï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™erroræœ‰å€¼ * cacheTypeï¼š`SDImageCacheType` æšä¸¾ï¼Œæ ‡ç¤ºè¯¥å›¾åƒçš„åŠ è½½æ–¹å¼ * SDImageCacheTypeNoneï¼šä»ç½‘ç»œä¸‹è½½ * SDImageCacheTypeDiskï¼šä»æœ¬åœ°ç¼“å­˜åŠ è½½ * SDImageCacheTypeMemoryï¼šä»å†…å­˜ç¼“å­˜åŠ è½½ * finishedï¼šå¦‚æœå›¾åƒä¸‹è½½å®Œæˆåˆ™ä¸ºYESï¼Œå¦‚æœä½¿ç”¨ SDWebImageProgressiveDownload é€‰é¡¹ï¼ŒåŒæ—¶åªè·å–åˆ°éƒ¨åˆ†å›¾ç‰‡æ—¶ï¼Œè¿”å› NO * imageURLï¼šå›¾ç‰‡çš„URLåœ°å€ * * @return SDWebImageOperationå¯¹è±¡ï¼Œåº”è¯¥æ˜¯SDWebimageDownloaderOperationå®ä¾‹ */- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBloc completed:(SDWebImageCompletionWithFinishedBlock)completedBlock;/** * Saves image to cache for given URL * * @param image The image to cache * @param url The URL to the image * * æ ¹æ®å›¾ç‰‡çš„URLä¿å­˜å›¾ç‰‡åˆ°ç¼“å­˜ * * @param imageï¼šç¼“å­˜çš„å›¾ç‰‡ * @param urlï¼šè¯¥å›¾ç‰‡çš„URLåœ°å€ */- (void)saveImageToCache:(UIImage *)image forURL:(NSURL *)url;/** * Cancel all current operations * * å–æ¶ˆå½“å‰æ‰€æœ‰æ“ä½œ */- (void)cancelAll;/** * Check one or more operations running * * æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œæ˜¯å¦æ­£åœ¨è¿è¡Œ */- (BOOL)isRunning;/** * Check if image has already been cached * * @param url image url * * @return if the image was already cached * * æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»è¢«ç¼“å­˜,å¦‚æœå·²ç»ç¼“å­˜åˆ™è¿”å›YES * @param url:å›¾ç‰‡å¯¹åº”çš„URL * * @return è¿”å›æ˜¯å¦å­˜åœ¨çš„BOOLå€¼ */- (BOOL)cachedImageExistsForURL:(NSURL *)url;/** * Check if image has already been cached on disk only * * @param url image url * * @return if the image was already cached (disk only) * * æ£€æŸ¥å›¾åƒæ˜¯å¦å­˜åœ¨ç£ç›˜ç¼“å­˜ï¼ˆæ­¤æ–¹æ³•ä»…é’ˆå¯¹ç£ç›˜è¿›è¡Œæ£€æŸ¥ï¼Œåªè¦å­˜åœ¨å°±è¿”å›YESï¼‰ * * @param url å›¾ç‰‡çš„url * * @return æ˜¯å¦å­˜åœ¨ï¼ˆåªæ£€æŸ¥ç£ç›˜ç¼“å­˜ï¼‰ */- (BOOL)diskImageExistsForURL:(NSURL *)url;/** * Async check if image has already been cached * * @param url image url * @param completionBlock the block to be executed when the check is finished * * @note the completion block is always executed on the main queue * * å¼‚æ­¥æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»æœ‰å†…å­˜ç¼“å­˜ * * @param URL å›¾ç‰‡å¯¹åº”çš„URL * @param completionBlock å½“ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åè°ƒç”¨çš„block * @note completionBlockå§‹ç»ˆåœ¨ä¸»é˜Ÿåˆ—æ‰§è¡Œ */- (void)cachedImageExistsForURL:(NSURL *)url completion:(SDWebImageCheckCacheCompletionBlock)completionBlock;/** * Async check if image has already been cached on disk only * * @param url image url * @param completionBlock the block to be executed when the check is finished * * @note the completion block is always executed on the main queue * * å¼‚æ­¥æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»æœ‰ç£ç›˜ç¼“å­˜ * * @param URL å›¾ç‰‡å¯¹åº”çš„URL * @param completionBlock å½“ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åè°ƒç”¨çš„block * @note completionBlockå§‹ç»ˆåœ¨ä¸»é˜Ÿåˆ—æ‰§è¡Œ */- (void)diskImageExistsForURL:(NSURL *)url completion:(SDWebImageCheckCacheCompletionBlock)completionBlock;/** * Return the cache key for a given URL * * è¿”å›æŒ‡å®šURLçš„ç¼“å­˜é”®å€¼ï¼Œå°±æ˜¯URLå­—ç¬¦ä¸² */- (NSString *)cacheKeyForURL:(NSURL *)url;@end#pragma mark --------------------#pragma mark Deprecated(è¿‡æ—¶çš„ï¼‰typedef void(^SDWebImageCompletedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType) __deprecated_msg("Block type deprecated. Use `SDWebImageCompletionBlock`");typedef void(^SDWebImageCompletedWithFinishedBlock)(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished) __deprecated_msg("Block type deprecated. Use `SDWebImageCompletionWithFinishedBlock`");@interface SDWebImageManager (Deprecated)/** * Downloads the image at the given URL if not present in cache or return the cached version otherwise. * * @deprecated This method has been deprecated. Use `downloadImageWithURL:options:progress:completed:` */- (id &lt;SDWebImageOperation&gt;)downloadWithURL:(NSURL *)url options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletedWithFinishedBlock)completedBlock __deprecated_msg("Method deprecated. Use `downloadImageWithURL:options:progress:completed:`");@end SDWebImageManager.m123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448/* * This file is part of the SDWebImage package. * (c) Olivier Poitrey &lt;rs@dailymotion.com&gt; * * For the full copyright and license information, please view the LICENSE * file that was distributed with this source code. */#import "SDWebImageManager.h"#import &lt;objc/message.h&gt;@interface SDWebImageCombinedOperation : NSObject &lt;SDWebImageOperation&gt;@property (assign, nonatomic, getter = isCancelled) BOOL cancelled; //å–æ¶ˆ@property (copy, nonatomic) SDWebImageNoParamsBlock cancelBlock; //å–æ¶ˆçš„å›è°ƒ@property (strong, nonatomic) NSOperation *cacheOperation; //å¤„ç†ç¼“å­˜çš„æ“ä½œ@end@interface SDWebImageManager ()@property (strong, nonatomic, readwrite) SDImageCache *imageCache; //å¯å†™çš„å›¾ç‰‡ç¼“å­˜@property (strong, nonatomic, readwrite) SDWebImageDownloader *imageDownloader; //å›¾ç‰‡ä¸‹è½½ä»»åŠ¡@property (strong, nonatomic) NSMutableSet *failedURLs; //URLé»‘åå•é›†åˆ@property (strong, nonatomic) NSMutableArray *runningOperations; //å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ•°ç»„@end@implementation SDWebImageManager//å•ä¾‹ç±»æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æä¾›ä¸€ä¸ªå…¨å±€çš„SDWebImageManagerå®ä¾‹+ (id)sharedManager &#123; static dispatch_once_t once; static id instance; dispatch_once(&amp;once, ^&#123; instance = [self new]; //è¯¥æ–¹æ³•å†…éƒ¨è°ƒç”¨alloc initæ–¹æ³• &#125;); return instance;&#125;//åˆå§‹åŒ–æ–¹æ³•- (id)init &#123; if ((self = [super init])) &#123; _imageCache = [self createCache]; //åˆå§‹åŒ–imageCacheï¼ˆå•ä¾‹ï¼‰ _imageDownloader = [SDWebImageDownloader sharedDownloader]; //åˆå§‹åŒ–imageDownloaderï¼ˆå•ä¾‹ï¼‰ _failedURLs = [NSMutableSet new]; //åˆå§‹åŒ–ä¸‹è½½å¤±è´¥çš„URLï¼ˆé»‘åå•Â·ç©ºçš„é›†åˆï¼‰ _runningOperations = [NSMutableArray new]; //åˆå§‹åŒ–å½“å‰æ­£åœ¨å¤„ç†çš„ä»»åŠ¡ï¼ˆå›¾ç‰‡ä¸‹è½½æ“ä½œÂ·ç©ºçš„å¯å˜æ•°ç»„ï¼‰ &#125; return self;&#125;//è·å–SDImageCacheå•ä¾‹- (SDImageCache *)createCache &#123; return [SDImageCache sharedImageCache];&#125;//è¿”å›æŒ‡å®šURLçš„ç¼“å­˜é”®å€¼ï¼Œå°±æ˜¯URLå­—ç¬¦ä¸²- (NSString *)cacheKeyForURL:(NSURL *)url &#123; //å…ˆåˆ¤æ–­æ˜¯å¦è®¾ç½®äº†ç¼“å­˜è¿‡æ»¤å™¨ï¼Œå¦‚æœè®¾ç½®äº†åˆ™èµ°cacheKeyFilterBlock,å¦åˆ™ç›´æ¥æŠŠURLè½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¹‹åè¿”å› if (self.cacheKeyFilter) &#123; return self.cacheKeyFilter(url); &#125; else &#123; return [url absoluteString]; &#125;&#125;//æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»è¢«ç¼“å­˜,å¦‚æœå·²ç»ç¼“å­˜åˆ™è¿”å›YES- (BOOL)cachedImageExistsForURL:(NSURL *)url &#123; NSString *key = [self cacheKeyForURL:url]; //å¾—åˆ°å›¾ç‰‡å¯¹åº”çš„ç¼“å­˜KEY if ([self.imageCache imageFromMemoryCacheForKey:key] != nil) return YES; //å¦‚æœè¯¥å›¾ç‰‡çš„å†…å­˜ç¼“å­˜å­˜åœ¨åˆ™è¿”å›YES return [self.imageCache diskImageExistsWithKey:key]; //å¦‚æœè¯¥å›¾ç‰‡å¯¹åº”çš„å†…å­˜ç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ™æ£€æŸ¥ç£ç›˜ç¼“å­˜ï¼Œå¹¶è¿”å›å¯¹åº”çš„å€¼&#125;//æ£€æŸ¥å›¾åƒæ˜¯å¦å­˜åœ¨ç£ç›˜ç¼“å­˜,å¦‚æœå·²ç»ç¼“å­˜åˆ™è¿”å›YES- (BOOL)diskImageExistsForURL:(NSURL *)url &#123; NSString *key = [self cacheKeyForURL:url]; //å¾—åˆ°å›¾ç‰‡å¯¹åº”çš„ç¼“å­˜KEY return [self.imageCache diskImageExistsWithKey:key]; //æ£€æŸ¥ç£ç›˜ç¼“å­˜ï¼Œå¹¶è¿”å›å¯¹åº”çš„å€¼&#125;//å†…å­˜ç¼“å­˜å¤„ç†- (void)cachedImageExistsForURL:(NSURL *)url completion:(SDWebImageCheckCacheCompletionBlock)completionBlock &#123; NSString *key = [self cacheKeyForURL:url]; //æ£€æŸ¥è¯¥urlå¯¹åº”çš„å›¾ç‰‡å†…å­˜ç¼“å­˜æ˜¯å¦å·²ç»å­˜åœ¨ BOOL isInMemoryCache = ([self.imageCache imageFromMemoryCacheForKey:key] != nil); //å¦‚æœå†…å­˜ç¼“å­˜å­˜åœ¨ï¼Œåˆ™ç›´æ¥åœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒcompletionBlockï¼Œå¹¶è¿”å› if (isInMemoryCache) &#123; // making sure we call the completion block on the main queue // ç¡®ä¿completionBlockåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨ dispatch_async(dispatch_get_main_queue(), ^&#123; if (completionBlock) &#123; completionBlock(YES); &#125; &#125;); return; &#125; //å¦‚æœå†…å­˜ç¼“å­˜ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå¤„ç†æŸ¥çœ‹ç£ç›˜ç¼“å­˜ [self.imageCache diskImageExistsWithKey:key completion:^(BOOL isInDiskCache) &#123; // the completion block of checkDiskCacheForImageWithKey:completion: is always called on the main queue, no need to further dispatch if (completionBlock) &#123; completionBlock(isInDiskCache); &#125; &#125;];&#125;//ç£ç›˜ç¼“å­˜å¤„ç†- (void)diskImageExistsForURL:(NSURL *)url completion:(SDWebImageCheckCacheCompletionBlock)completionBlock &#123; NSString *key = [self cacheKeyForURL:url]; //åŒä¸Š [self.imageCache diskImageExistsWithKey:key completion:^(BOOL isInDiskCache) &#123; // the completion block of checkDiskCacheForImageWithKey:completion: is always called on the main queue, no need to further dispatch if (completionBlock) &#123; completionBlock(isInDiskCache); &#125; &#125;];&#125;//åŠ è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•/* * å¦‚æœURLå¯¹åº”çš„å›¾åƒåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¸‹è½½æŒ‡å®šçš„å›¾ç‰‡ ï¼Œå¦åˆ™è¿”å›ç¼“å­˜çš„å›¾åƒ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options æŒ‡å®šæ­¤æ¬¡è¯·æ±‚ç­–ç•¥çš„é€‰é¡¹ * @param progressBlock å›¾ç‰‡ä¸‹è½½è¿›åº¦çš„å›è°ƒ * @param completedBlock æ“ä½œå®Œæˆåçš„å›è°ƒ * æ­¤å‚æ•°æ˜¯å¿…é¡»çš„ï¼Œæ­¤blockæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * errorï¼šå¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™erroræœ‰å€¼ * cacheTypeï¼š`SDImageCacheType` æšä¸¾ï¼Œæ ‡ç¤ºè¯¥å›¾åƒçš„åŠ è½½æ–¹å¼ * SDImageCacheTypeNoneï¼šä»ç½‘ç»œä¸‹è½½ * SDImageCacheTypeDiskï¼šä»æœ¬åœ°ç¼“å­˜åŠ è½½ * SDImageCacheTypeMemoryï¼šä»å†…å­˜ç¼“å­˜åŠ è½½ * finishedï¼šå¦‚æœå›¾åƒä¸‹è½½å®Œæˆåˆ™ä¸ºYESï¼Œå¦‚æœä½¿ç”¨ SDWebImageProgressiveDownload é€‰é¡¹ï¼ŒåŒæ—¶åªè·å–åˆ°éƒ¨åˆ†å›¾ç‰‡æ—¶ï¼Œè¿”å› NO * imageURLï¼šå›¾ç‰‡çš„URLåœ°å€ * * @return SDWebImageOperationå¯¹è±¡ï¼Œåº”è¯¥æ˜¯SDWebimageDownloaderOperationå®ä¾‹ */- (id &lt;SDWebImageOperation&gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletionWithFinishedBlock)completedBlock &#123; // Invoking this method without a completedBlock is pointless //æ²¡æœ‰completedblockï¼Œé‚£ä¹ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ˜¯æ¯«æ— æ„ä¹‰çš„ NSAssert(completedBlock != nil, @"If you mean to prefetch the image, use -[SDWebImagePrefetcher prefetchURLs] instead"); // Very common mistake is to send the URL using NSString object instead of NSURL. For some strange reason, XCode won't // throw any warning for this type mismatch. Here we failsafe this error by allowing URLs to be passed as NSString. //æ£€æŸ¥ç”¨æˆ·ä¼ å…¥çš„URLæ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœè¯¥URLæ˜¯NSStringç±»å‹çš„ï¼Œé‚£ä¹ˆå°è¯•è½¬æ¢ if ([url isKindOfClass:NSString.class]) &#123; url = [NSURL URLWithString:(NSString *)url]; &#125; // Prevents app crashing on argument type error like sending NSNull instead of NSURL //é˜²æ­¢å› å‚æ•°ç±»å‹é”™è¯¯è€Œå¯¼è‡´åº”ç”¨ç¨‹åºå´©æºƒï¼Œåˆ¤æ–­URLæ˜¯å¦æ˜¯NSURLç±»å‹çš„ï¼Œå¦‚æœä¸æ˜¯åˆ™ç›´æ¥è®¾ç½®ä¸ºnil if (![url isKindOfClass:NSURL.class]) &#123; url = nil; &#125; //åˆå§‹åŒ–ä¸€ä¸ªSDWebImageCombinedOperationBlockå— __block SDWebImageCombinedOperation *operation = [SDWebImageCombinedOperation new]; __weak SDWebImageCombinedOperation *weakOperation = operation; BOOL isFailedUrl = NO; //åˆå§‹åŒ–è®¾å®šè¯¥URLæ˜¯æ­£ç¡®çš„ //åŠ äº’æ–¥é”ï¼Œæ£€ç´¢è¯·æ±‚å›¾ç‰‡çš„URLæ˜¯å¦åœ¨æ›¾ä¸‹è½½å¤±è´¥çš„é›†åˆä¸­ï¼ˆURLé»‘åå•ï¼‰ @synchronized (self.failedURLs) &#123; isFailedUrl = [self.failedURLs containsObject:url]; &#125; //å¦‚æœurlä¸æ­£ç¡®æˆ–è€… é€‰æ‹©çš„ä¸‹è½½ç­–ç•¥ä¸æ˜¯ã€ä¸‹è½½å¤±è´¥å°è¯•é‡æ–°ä¸‹è½½ã€ä¸”è¯¥URLå­˜åœ¨äºé»‘åå•ä¸­ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ï¼Œå›è°ƒä»»åŠ¡å®Œæˆblockå—ï¼Œä¼ é€’é”™è¯¯ä¿¡æ¯ if (url.absoluteString.length == 0 || (!(options &amp; SDWebImageRetryFailed) &amp;&amp; isFailedUrl)) &#123; //è¯¥å®ä¿è¯äº†completedBlockå›è°ƒåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ dispatch_main_sync_safe(^&#123; NSError *error = [NSError errorWithDomain:NSURLErrorDomain code:NSURLErrorFileDoesNotExist userInfo:nil]; completedBlock(nil, error, SDImageCacheTypeNone, YES, url); &#125;); return operation; &#125; //åŠ äº’æ–¥é”ï¼ŒæŠŠå½“å‰çš„ä¸‹è½½ä»»åŠ¡æ·»åŠ åˆ°ã€å½“å‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡æ•°ç»„ã€ä¸­ @synchronized (self.runningOperations) &#123; [self.runningOperations addObject:operation]; &#125; //å¾—åˆ°è¯¥URLå¯¹åº”çš„ç¼“å­˜KEY NSString *key = [self cacheKeyForURL:url]; //è¯¥æ–¹æ³•æŸ¥æ‰¾URLKEYå¯¹åº”çš„å›¾ç‰‡ç¼“å­˜æ˜¯å¦å­˜åœ¨ï¼ŒæŸ¥æ‰¾å®Œæ¯•ä¹‹åæŠŠè¯¥å›¾ç‰‡ï¼ˆå­˜åœ¨|ä¸å­˜åœ¨ï¼‰å’Œè¯¥å›¾ç‰‡çš„ç¼“å­˜æ–¹æ³•ä»¥blockçš„æ–¹å¼ä¼ é€’ //ç¼“å­˜æƒ…å†µæŸ¥æ‰¾å®Œæ¯•ä¹‹åï¼Œåœ¨blockå—ä¸­è¿›è¡Œåç»­å¤„ç†ï¼ˆå¦‚æœè¯¥å›¾ç‰‡æ²¡æœ‰ç¼“å­˜Â·ä¸‹è½½|å¦‚æœç¼“å­˜å­˜åœ¨|å¦‚æœç”¨æˆ·è®¾ç½®äº†ä¸‹è½½çš„ç¼“å­˜ç­–ç•¥æ˜¯åˆ·æ–°ç¼“å­˜å¦‚ä½•å¤„ç†ç­‰ç­‰ï¼‰ operation.cacheOperation = [self.imageCache queryDiskCacheForKey:key done:^(UIImage *image, SDImageCacheType cacheType) &#123; //å…ˆåˆ¤æ–­è¯¥ä¸‹è½½æ“ä½œæ˜¯å¦å·²ç»è¢«å–æ¶ˆï¼Œå¦‚æœè¢«å–æ¶ˆåˆ™æŠŠå½“å‰æ“ä½œä»runningOperationsæ•°ç»„ä¸­ç§»é™¤ï¼Œå¹¶ç›´æ¥è¿”å› if (operation.isCancelled) &#123; @synchronized (self.runningOperations) &#123; [self.runningOperations removeObject:operation]; &#125; return; &#125; //ï¼ˆå›¾ç‰‡ä¸å­˜åœ¨||ä¸‹è½½ç­–ç•¥ä¸ºåˆ·æ–°ç¼“å­˜ï¼‰ä¸”ï¼ˆshouldDownloadImageForURLä¸èƒ½å“åº”||è¯¥å›¾ç‰‡å­˜åœ¨ç¼“å­˜ï¼‰ if ((!image || options &amp; SDWebImageRefreshCached) &amp;&amp; (![self.delegate respondsToSelector:@selector(imageManager:shouldDownloadImageForURL:)] || [self.delegate imageManager:self shouldDownloadImageForURL:url])) &#123; //ä»æ­¤å¤„å¼€å§‹ï¼Œä¸€ç›´åœ¨å¤„ç†downloaderOptionsï¼ˆå³ä¸‹è½½ç­–ç•¥ï¼‰ if (image &amp;&amp; options &amp; SDWebImageRefreshCached) &#123; //å¦‚æœå›¾åƒå­˜åœ¨ï¼Œä½†æ˜¯ä¸‹è½½ç­–ç•¥ä¸ºåˆ·æ–°ç¼“å­˜ï¼Œåˆ™é€šçŸ¥ç¼“å­˜å›¾åƒå¹¶å°è¯•é‡æ–°ä¸‹è½½ dispatch_main_sync_safe(^&#123; // If image was found in the cache but SDWebImageRefreshCached is provided, notify about the cached image // AND try to re-download it in order to let a chance to NSURLCache to refresh it from server. completedBlock(image, nil, cacheType, YES, url); &#125;); &#125; // download if no image or requested to refresh anyway, and download allowed by delegate SDWebImageDownloaderOptions downloaderOptions = 0; //å¦‚æœä¸‹è½½ç­–ç•¥ä¸ºSDWebImageLowPriority é‚£ä¹ˆdownloaderOptions = å…¶æœ¬èº« if (options &amp; SDWebImageLowPriority) downloaderOptions |= SDWebImageDownloaderLowPriority; if (options &amp; SDWebImageProgressiveDownload) downloaderOptions |= SDWebImageDownloaderProgressiveDownload; if (options &amp; SDWebImageRefreshCached) downloaderOptions |= SDWebImageDownloaderUseNSURLCache; if (options &amp; SDWebImageContinueInBackground) downloaderOptions |= SDWebImageDownloaderContinueInBackground; if (options &amp; SDWebImageHandleCookies) downloaderOptions |= SDWebImageDownloaderHandleCookies; if (options &amp; SDWebImageAllowInvalidSSLCertificates) downloaderOptions |= SDWebImageDownloaderAllowInvalidSSLCertificates; if (options &amp; SDWebImageHighPriority) downloaderOptions |= SDWebImageDownloaderHighPriority; if (image &amp;&amp; options &amp; SDWebImageRefreshCached) &#123; //å¦‚æœå›¾ç‰‡å­˜åœ¨ï¼Œä¸”ä¸‹è½½ç­–ç•¥ä¸ºåˆ·æ–°åˆ·æ–°ç¼“å­˜ // force progressive off if image already cached but forced refreshing //å¦‚æœå›¾åƒå·²ç¼“å­˜ï¼Œä½†éœ€è¦åˆ·æ–°ç¼“å­˜ï¼Œé‚£ä¹ˆå¼ºåˆ¶è¿›è¡Œåˆ·æ–° downloaderOptions &amp;= ~SDWebImageDownloaderProgressiveDownload; // ignore image read from NSURLCache if image if cached but force refreshing //å¿½ç•¥ä»NSURLCacheè¯»å–å›¾ç‰‡ downloaderOptions |= SDWebImageDownloaderIgnoreCachedResponse; &#125; //åˆ°æ­¤å¤„ä½ç½®ï¼ŒdownloaderOptionsï¼ˆå³ä¸‹è½½ç­–ç•¥ï¼‰å¤„ç†æ“ä½œç»“æŸ //æ ¸å¿ƒæ–¹æ³•ï¼šä½¿ç”¨ä¸‹è½½å™¨ï¼Œä¸‹è½½å›¾ç‰‡ id &lt;SDWebImageOperation&gt; subOperation = [self.imageDownloader downloadImageWithURL:url options:downloaderOptions progress:progressBlock completed:^(UIImage *downloadedImage, NSData *data, NSError *error, BOOL finished) &#123; if (weakOperation.isCancelled) &#123; //å¦‚æœæ­¤æ—¶æ“ä½œè¢«å–æ¶ˆï¼Œé‚£ä¹ˆä»€ä¹ˆä¹Ÿä¸åš // Do nothing if the operation was cancelled // See #699 for more details // if we would call the completedBlock, there could be a race condition between this block and another completedBlock for the same object, so if this one is called second, we will overwrite the new data &#125; else if (error) &#123; //å¦‚æœä¸‹è½½å¤±è´¥ï¼Œåˆ™å¤„ç†ç»“æŸçš„å›è°ƒï¼Œåœ¨åˆé€‚çš„æƒ…å†µä¸‹æŠŠå¯¹åº”å›¾ç‰‡çš„URLæ·»åŠ åˆ°é»‘åå•ä¸­ dispatch_main_sync_safe(^&#123; if (!weakOperation.isCancelled) &#123; completedBlock(nil, error, SDImageCacheTypeNone, finished, url); &#125; &#125;); if ( error.code != NSURLErrorNotConnectedToInternet &amp;&amp; error.code != NSURLErrorCancelled &amp;&amp; error.code != NSURLErrorTimedOut &amp;&amp; error.code != NSURLErrorInternationalRoamingOff &amp;&amp; error.code != NSURLErrorDataNotAllowed &amp;&amp; error.code != NSURLErrorCannotFindHost &amp;&amp; error.code != NSURLErrorCannotConnectToHost) &#123; @synchronized (self.failedURLs) &#123; [self.failedURLs addObject:url]; &#125; &#125; &#125; else &#123;//ä¸‹è½½æˆåŠŸ //å…ˆåˆ¤æ–­å½“å‰çš„ä¸‹è½½ç­–ç•¥æ˜¯å¦æ˜¯SDWebImageRetryFailedï¼Œå¦‚æœæ˜¯é‚£ä¹ˆæŠŠè¯¥URLä»é»‘åå•ä¸­åˆ é™¤ if ((options &amp; SDWebImageRetryFailed)) &#123; @synchronized (self.failedURLs) &#123; [self.failedURLs removeObject:url]; &#125; &#125; //æ˜¯å¦è¦è¿›è¡Œç£ç›˜ç¼“å­˜ï¼Ÿ BOOL cacheOnDisk = !(options &amp; SDWebImageCacheMemoryOnly); //å¦‚æœä¸‹è½½ç­–ç•¥ä¸ºSDWebImageRefreshCachedä¸”è¯¥å›¾ç‰‡ç¼“å­˜ä¸­å­˜åœ¨ä¸”æœªä¸‹è½½ä¸‹æ¥ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åš if (options &amp; SDWebImageRefreshCached &amp;&amp; image &amp;&amp; !downloadedImage) &#123; // Image refresh hit the NSURLCache cache, do not call the completion block &#125; else if (downloadedImage &amp;&amp; (!downloadedImage.images || (options &amp; SDWebImageTransformAnimatedImage)) &amp;&amp; [self.delegate respondsToSelector:@selector(imageManager:transformDownloadedImage:withURL:)]) &#123; //å¦åˆ™ï¼Œå¦‚æœä¸‹è½½å›¾ç‰‡å­˜åœ¨ä¸”ï¼ˆä¸æ˜¯å¯åŠ¨ç”»å›¾ç‰‡æ•°ç»„||ä¸‹è½½ç­–ç•¥ä¸ºSDWebImageTransformAnimatedImage&amp;&amp;transformDownloadedImageæ–¹æ³•å¯ç”¨ï¼‰ //å¼€å­çº¿ç¨‹å¤„ç† dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123; //åœ¨ä¸‹è½½åç«‹å³å°†å›¾åƒè½¬æ¢ï¼Œå¹¶è¿›è¡Œç£ç›˜å’Œå†…å­˜ç¼“å­˜ UIImage *transformedImage = [self.delegate imageManager:self transformDownloadedImage:downloadedImage withURL:url];#warning 2 if (transformedImage &amp;&amp; finished) &#123; BOOL imageWasTransformed = ![transformedImage isEqual:downloadedImage]; [self.imageCache storeImage:transformedImage recalculateFromImage:imageWasTransformed imageData:(imageWasTransformed ? nil : data) forKey:key toDisk:cacheOnDisk]; &#125; //åœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒcompletedBlock dispatch_main_sync_safe(^&#123; if (!weakOperation.isCancelled) &#123; completedBlock(transformedImage, nil, SDImageCacheTypeNone, finished, url); &#125; &#125;); &#125;); &#125; else &#123; //å¾—åˆ°ä¸‹è½½çš„å›¾ç‰‡ä¸”å·²ç»å®Œæˆï¼Œåˆ™è¿›è¡Œç¼“å­˜å¤„ç† if (downloadedImage &amp;&amp; finished) &#123; [self.imageCache storeImage:downloadedImage recalculateFromImage:NO imageData:data forKey:key toDisk:cacheOnDisk]; &#125; dispatch_main_sync_safe(^&#123; if (!weakOperation.isCancelled) &#123; completedBlock(downloadedImage, nil, SDImageCacheTypeNone, finished, url); &#125; &#125;); &#125; &#125; if (finished) &#123; @synchronized (self.runningOperations) &#123; [self.runningOperations removeObject:operation]; &#125; &#125; &#125;]; //å¤„ç†cancelBlock operation.cancelBlock = ^&#123; [subOperation cancel]; @synchronized (self.runningOperations) &#123; [self.runningOperations removeObject:weakOperation]; &#125; &#125;; &#125; else if (image) &#123; //å¦‚æœå›¾ç‰‡å­˜åœ¨ï¼Œä¸”æ“ä½œæ²¡æœ‰è¢«å–æ¶ˆï¼Œé‚£ä¹ˆåœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒcompletedBlockï¼Œå¹¶æŠŠå½“å‰æ“ä½œç§»é™¤ dispatch_main_sync_safe(^&#123; if (!weakOperation.isCancelled) &#123; completedBlock(image, nil, cacheType, YES, url); &#125; &#125;); @synchronized (self.runningOperations) &#123; [self.runningOperations removeObject:operation]; &#125; &#125; else &#123; // Image not in cache and download disallowed by delegate //å›¾ç‰‡ä¸å­˜åœ¨ç¼“å­˜ä¸”ä¸å…è®¸ä»£ç†ä¸‹è½½ï¼Œé‚£ä¹ˆåœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒcompletedBlockï¼Œå¹¶æŠŠå½“å‰æ“ä½œç§»é™¤ dispatch_main_sync_safe(^&#123; if (!weakOperation.isCancelled) &#123; completedBlock(nil, nil, SDImageCacheTypeNone, YES, url); &#125; &#125;); @synchronized (self.runningOperations) &#123; [self.runningOperations removeObject:operation]; &#125; &#125; &#125;]; return operation;&#125;/* * æ ¹æ®å›¾ç‰‡çš„URLä¿å­˜å›¾ç‰‡åˆ°ç¼“å­˜ * * @param imageï¼šç¼“å­˜çš„å›¾ç‰‡ * @param urlï¼šè¯¥å›¾ç‰‡çš„URLåœ°å€ */- (void)saveImageToCache:(UIImage *)image forURL:(NSURL *)url &#123; //å¦‚æœå›¾ç‰‡å’Œurlå­˜åœ¨ï¼Œåˆ™å¯¹è¯¥å›¾ç‰‡è¿›è¡Œç¼“å­˜å¤„ç† if (image &amp;&amp; url) &#123; NSString *key = [self cacheKeyForURL:url]; [self.imageCache storeImage:image forKey:key toDisk:YES]; &#125;&#125;//å–æ¶ˆå½“å‰æ‰€æœ‰çš„æ“ä½œ- (void)cancelAll &#123; @synchronized (self.runningOperations) &#123; //å¾—åˆ°å½“å‰æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ NSArray *copiedOperations = [self.runningOperations copy]; //éå†æ•°ç»„ä¸­æ‰€æœ‰çš„æ“ä½œï¼Œè°ƒç”¨æ‰€æœ‰æ­£åœ¨æ‰§è¡Œæ“ä½œçš„cancelæ–¹æ³• [copiedOperations makeObjectsPerformSelector:@selector(cancel)]; //æŠŠè¿™äº›æ“ä½œä»runningOperationsæ•°ç»„ä¸­ç§»é™¤ [self.runningOperations removeObjectsInArray:copiedOperations]; &#125;&#125;//æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œæ˜¯å¦æ­£åœ¨è¿è¡Œ- (BOOL)isRunning &#123; BOOL isRunning = NO; //åˆå§‹è®¾å®šä¸ºNOï¼Œå³æ²¡æœ‰ //åŠ äº’æ–¥é”ï¼Œæ ¹æ®runningOperationsæ•°ç»„ä¸­å…ƒç´ çš„ä¸ªæ•°æ¥åˆ¤æ–­å½“å‰æ˜¯å¦æœ‰ä»»åŠ¡æ­£åœ¨æ‰§è¡Œ @synchronized(self.runningOperations) &#123; isRunning = (self.runningOperations.count &gt; 0); &#125; return isRunning;&#125;@end@implementation SDWebImageCombinedOperation//å–æ¶ˆblockçš„å›è°ƒ- (void)setCancelBlock:(SDWebImageNoParamsBlock)cancelBlock &#123; // check if the operation is already cancelled, then we just call the cancelBlock if (self.isCancelled) &#123; if (cancelBlock) &#123; cancelBlock(); &#125; _cancelBlock = nil; // don't forget to nil the cancelBlock, otherwise we will get crashes &#125; else &#123; _cancelBlock = [cancelBlock copy]; &#125;&#125;//å–æ¶ˆæ“ä½œ- (void)cancel &#123; self.cancelled = YES; //å¦‚æœç¼“å­˜æ“ä½œå­˜åœ¨ï¼Œé‚£ä¹ˆå–æ¶ˆè¯¥æ“ä½œçš„æ‰§è¡Œå¹¶èµ‹å€¼ä¸ºnil if (self.cacheOperation) &#123; [self.cacheOperation cancel]; self.cacheOperation = nil; &#125; //å–æ¶ˆblockçš„å›è°ƒ if (self.cancelBlock) &#123; self.cancelBlock(); // TODO: this is a temporary fix to #809. // Until we can figure the exact cause of the crash, going with the ivar instead of the setter// self.cancelBlock = nil; _cancelBlock = nil; &#125;&#125;@end//è¿‡æ—¶çš„æ–¹æ³•@implementation SDWebImageManager (Deprecated)// deprecated method, uses the non deprecated method// adapter for the completion block- (id &lt;SDWebImageOperation&gt;)downloadWithURL:(NSURL *)url options:(SDWebImageOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageCompletedWithFinishedBlock)completedBlock &#123; return [self downloadImageWithURL:url options:options progress:progressBlock completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) &#123; if (completedBlock) &#123; completedBlock(image, error, cacheType, finished); &#125; &#125;];&#125;@end SDWebImage â€“&gt;çŸ¥å…¶ç„¶**äº¦çŸ¥å…¶æ‰€ä»¥ç„¶ä¸‹è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•ä½¿ç”¨#import &quot;SDWebImageManager.h&quot;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/* * å¦‚æœURLå¯¹åº”çš„å›¾åƒåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¸‹è½½æŒ‡å®šçš„å›¾ç‰‡ï¼Œå¦åˆ™è¿”å›ç¼“å­˜çš„å›¾åƒ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options å›¾ç‰‡ä¸‹è½½é€‰é¡¹ï¼ˆç­–ç•¥ï¼‰,å‚è€ƒSDWebImageOptionsçš„æšä¸¾å€¼ * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒ * receivedSize å·²ç»ä¸‹è½½çš„æ•°æ®å¤§å° * expectedSize è¦ä¸‹è½½å›¾ç‰‡çš„æ€»å¤§å° * @param completedBlock æ“ä½œæˆåŠŸå›è°ƒå›è°ƒ,è¯¥å›è°ƒæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * errorï¼šå¦‚æœå›¾ç‰‡ä¸‹è½½æˆåŠŸåˆ™errorä¸ºnil,å¦åˆ™erroræœ‰å€¼ * @param cacheTypeï¼šå›¾ç‰‡ç¼“å­˜ç±»å‹ï¼ˆå†…å­˜ç¼“å­˜|æ²™ç›’ç¼“å­˜|ç›´æ¥ä¸‹è½½ï¼‰,SDImageCacheTypeæšä¸¾ * SDImageCacheTypeNoneï¼šä»ç½‘ç»œä¸‹è½½ * SDImageCacheTypeDiskï¼šä»æœ¬åœ°ç¼“å­˜åŠ è½½ * SDImageCacheTypeMemoryï¼šä»å†…å­˜ç¼“å­˜åŠ è½½ * @param finishedï¼š * 1.å¦‚æœå›¾åƒä¸‹è½½å®Œæˆåˆ™ä¸ºYES * 2.å¦‚æœæ²¡æœ‰ä½¿ç”¨ SDWebImageDownloaderProgressiveDownloadï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸€ç›´æ˜¯ YES * 3.å¦‚æœä½¿ç”¨äº† SDWebImageDownloaderProgressiveDownload é€‰é¡¹ï¼Œæ­¤ block ä¼šè¢«é‡å¤è°ƒç”¨ * 1)ä¸‹è½½å®Œæˆå‰ï¼Œimage å‚æ•°æ˜¯éƒ¨åˆ†å›¾åƒï¼Œfinished å‚æ•°æ˜¯ NO * 2)æœ€åä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œimage å‚æ•°æ˜¯å®Œæ•´å›¾åƒï¼Œè€Œ finished å‚æ•°æ˜¯ YES * 3)å¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆfinished å‚æ•°ä¹Ÿæ˜¯ YES * @param imageURLï¼šå›¾ç‰‡çš„URLåœ°å€ * * @return SDWebImageOperationå¯¹è±¡ï¼Œåº”è¯¥æ˜¯SDWebimageDownloaderOperationå®ä¾‹ */- (void)download2 &#123; [[SDWebImageManager sharedManager] downloadImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) &#123; self.imageView.image = image; NSLog(@"download2--%@",[NSThread currentThread]); switch (cacheType) &#123; case SDImageCacheTypeNone: NSLog(@"ç½‘ç»œä¸‹è½½"); break; case SDImageCacheTypeDisk: NSLog(@"ä½¿ç”¨ç£ç›˜ç¼“å­˜"); break; case SDImageCacheTypeMemory: NSLog(@"ä½¿ç”¨å†…å­˜ç¼“å­˜"); break; default: break; &#125; &#125;];&#125; æ‰“å°è¾“å‡ºæ•ˆæœ: åº”ç”¨åœºæ™¯:åªéœ€è¦ç®€å•è·å¾—ä¸€å¼ å›¾ç‰‡,ä¸è¿›è¡Œå…¶å®ƒè®¾ç½®ï¼Œè¯¥æ–¹æ³•ä¼šåšå†…å­˜ç¼“å­˜&amp;ç£ç›˜ç¼“å­˜ã€‚ è¿™ä¸ªæ¡†æ¶æœ‰å¤ªå¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ æ¨æ•²ï¼Œæ–¹æ–¹é¢é¢éƒ½é€éœ²ç€ä½œè€…ä»¥åŠä¼—å¤šè´¡çŒ®è€…çš„æ™ºæ…§ï¼Œæˆ‘ä»¬è¯»èµ·æ¥ä¹Ÿä¸€å®šä¼šå—ç›Šè‰¯å¤šã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç½‘ç»œè¯·æ±‚â€”ã€ŒNSURLConnectionè¿æ¥ã€]]></title>
    <url>%2FiOSNET%2FNSURLConnection.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€NSURLConnection è¯¦è§£ä½¿ç”¨ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š æ–‡ä»¶ä¸‹è½½åˆ†ç±» ä½¿ç”¨æ­¥éª¤ NSData(å°æ–‡ä»¶ä¸‹è½½) NSURLConnectionä½¿ç”¨1.NSURLConnectionå¼‚æ­¥GETè¯·æ±‚2.NSURLConnectionä»£ç†GETè¯·æ±‚3.NSURLConnectionç›¸å…³ä»£ç†æ–¹æ³•4.NSURLConnectionPOSTè¯·æ±‚ httpé€šä¿¡è¿‡ç¨‹ GET å’Œ POST åŒºåˆ« å¤§æ–‡ä»¶æ–­ç‚¹ä¸‹è½½ æ–‡ä»¶ä¸Šä¼ æ­¥éª¤ å¤šçº¿ç¨‹ä¸‹è½½æ–‡ä»¶æ€è·¯ 1.æ–‡ä»¶ä¸‹è½½åˆ†ç±» æŒ‰ç…§å¼€å‘ä¸­å®é™…éœ€æ±‚ï¼Œå¦‚æœæŒ‰ä¸‹è½½çš„ [æ–‡ä»¶å¤§å°] åˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºï¼šå°æ–‡ä»¶ä¸‹è½½ã€å¤§æ–‡ä»¶ä¸‹è½½ã€‚å› ä¸ºå°æ–‡ä»¶ä¸‹è½½åŸºæœ¬ä¸éœ€è¦ç­‰å¾…ï¼Œå¯ä»¥ä½¿ç”¨è¿”å›æ•´ä¸ªæ–‡ä»¶çš„ä¸‹è½½æ–¹å¼æ¥è¿›è¡Œæ–‡ä»¶ä¸‹è½½ï¼Œæ¯”å¦‚è¯´å›¾ç‰‡ã€‚ä½†æ˜¯å¤§æ–‡ä»¶ä¸‹è½½éœ€è¦è€ƒè™‘å¾ˆå¤šæƒ…å†µæ¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚è¯´ï¼šä¸‹è½½è¿›åº¦çš„æ˜¾ç¤ºã€æš‚åœä¸‹è½½ä»¥åŠæ–­ç‚¹ç»­ä¼ ã€ç¦»çº¿æ–­ç‚¹ç»­ä¼ ï¼Œè¿˜æœ‰ä¸‹è½½æ—¶å ç”¨æ‰‹æœºå†…å­˜æƒ…å†µç­‰ç­‰ã€‚ æŒ‰ç…§å¼€å‘ä¸­è¯·æ±‚æ–¹å¼ï¼Œå¦‚æœæŒ‰å¼€å‘ [å®ç°æ–¹æ¡ˆ] åˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºï¼šNSDataã€NSURLConnectionï¼ˆiOS9.0ä¹‹åèˆå¼ƒï¼‰ã€NSURLSessionï¼ˆæ¨èï¼‰ï¼Œä»¥åŠä½¿ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶AFNetworking æ–¹å¼ä¸‹è½½æ–‡ä»¶ã€‚ 2.ä½¿ç”¨æ­¥éª¤NSURLConnectionå‘é€è¯·æ±‚æ­¥éª¤ï¼š åˆ›å»ºä¸€ä¸ªNSURLå¯¹è±¡ï¼Œè®¾ç½®è¯·æ±‚è·¯å¾„ ä¼ å…¥NSURLåˆ›å»ºä¸€ä¸ªNSURLRequestå¯¹è±¡ï¼Œè®¾ç½®è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ ä½¿ç”¨NSURLConnectionå‘é€è¯·æ±‚ NSURLConnectionå‘é€è¯·æ±‚æ–¹æ³•ï¼š1234567891.åŒæ­¥è¯·æ±‚+ (NSData *)sendSynchronousRequest:(NSURLRequest *)request returningResponse:(NSURLResponse **)response error:(NSError **)error;2.å¼‚æ­¥è¯·æ±‚ï¼šæ ¹æ®å¯¹æœåŠ¡å™¨è¿”å›æ•°æ®çš„å¤„ç†æ–¹å¼çš„ä¸åŒblockå›è°ƒï¼š+ (void)sendAsynchronousRequest:(NSURLRequest*) request queue:(NSOperationQueue*) queue completionHandler:(void (^)(NSURLResponse* response, NSData* data, NSError* connectionError)) handler;delegateå¼‚æ­¥ï¼šè®¾ç½®ä»£ç†ï¼Œé€šè¿‡ä»£ç†æ–¹æ³• 3.NSData(å°æ–‡ä»¶ä¸‹è½½)12345NSURL *url = [NSURL URLWithString:@"[http://pic73.nipic.com/file/20150724/18576408_175304314596_2.jpg"];](http://pic73.nipic.com/file/20150724/18576408_175304314596_2.jpg%22];)NSData *data = [NSData dataWithContentsOfURL:url];UIImage *image = [UIImage imageWithData:data];self.imageView.image = image;åˆ·æ–°UIè¦æ”¾åœ¨ä¸»çº¿ç¨‹ 4.NSURLConnectionä½¿ç”¨NSURLConnectionå¼‚æ­¥GETè¯·æ±‚123456789101112131415161718192021222324// 1.ç¡®å®šè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@"[http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON"];](http://120.25.226.186:32812/login?username=520it&amp;pwd=520it&amp;type=JSON%22];)// 2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];// 3.å‘é€å¼‚æ­¥è¯·æ±‚/* Request:è¯·æ±‚å¯¹è±¡ queue:é˜Ÿåˆ—ï¼ˆå†³å®šä»£ç å—completionHandlerçš„åœ¨é‚£ä¸ªçº¿ç¨‹è°ƒç”¨ï¼‰ completionHandler:å½“è¯·æ±‚å®Œæˆ(æˆåŠŸ|å¤±è´¥)çš„æ—¶å€™å›è°ƒ response:å“åº”å¤´ data:å“åº”ä½“ connectionError:é”™è¯¯ä¿¡æ¯ */[NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc]init] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; // 4.è§£ææ•°æ® NSLog(@"%@",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]); NSLog(@"%@",[NSThread currentThread]); // è½¬æ¢å¹¶æ‰“å°å“åº”å¤´ä¿¡æ¯ NSHTTPURLResponse *r = (NSHTTPURLResponse *)response; NSLog(@"--%zd---%@--",r.statusCode,r.allHeaderFields);&#125;]; NSURLConnectionä»£ç†GETè¯·æ±‚12345678910// 1.ç¡®å®šurlNSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/resources/videos/minion_11.mp4"];// 2.å¼‚æ­¥(è‡ªåŠ¨)å‘é€GETè¯·æ±‚ï¼Œå¹¶å®ç°ç›¸åº”çš„ä»£ç†æ–¹æ³•// è¯¥æ–¹æ³•iOS9.0ä¹‹ååºŸé™¤äº†ï¼ˆæ¨èä½¿ç”¨NSURLSessionï¼‰ã€‚NSURLConnection * connect = [NSURLConnection connectionWithRequest:[NSURLRequest requestWithURL:url] delegate:self];// è®¾ç½®ä»£ç†æ–¹æ³•çš„æ‰§è¡Œé˜Ÿåˆ—// è¯´æ˜ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç†æ–¹æ³•ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œè°ƒç”¨ï¼ˆä¸ºäº†æ–¹ä¾¿å¼€å‘è€…æ‹¿åˆ°æ•°æ®åå¤„ç†ä¸€äº›åˆ·æ–°UIçš„æ“ä½œä¸éœ€è¦è€ƒè™‘åˆ°çº¿ç¨‹é—´é€šä¿¡ï¼‰[connect setDelegateQueue:[[NSOperationQueue alloc]init]]; NSURLConnectionç›¸å…³ä»£ç†æ–¹æ³•1234567891011121314151617#pragma mark - NSURLConnectionDataDelegate// 1.å½“ æ¥æ”¶åˆ°æœåŠ¡å™¨å“åº” çš„æ—¶å€™è°ƒç”¨-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response&#123;&#125;;// 2.æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›æ•°æ® çš„æ—¶å€™è°ƒç”¨,è°ƒç”¨å¤šæ¬¡ï¼ˆè¿”å›çš„NSDataäºŒè¿›åˆ¶æ•°æ®(å¯èƒ½æ˜¯ç‰‡æ®µ)ï¼‰-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data &#123; // æ‹¼æ¥æ•°æ® [self.resultData appendData:data];&#125;// 3.è¯·æ±‚å®Œæˆ çš„æ—¶å€™è°ƒç”¨ï¼ˆé€šå¸¸åœ¨è¯¥æ–¹æ³•ä¸­è§£ææœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼‰-(void)connectionDidFinishLoading:(NSURLConnection *)connection &#123; NSLog(@"%@",[[NSString alloc]initWithData:self.resultData encoding:NSUTF8StringEncoding]);&#125;// 4.å½“è¯·æ±‚å¤±è´¥ çš„æ—¶å€™è°ƒç”¨-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error&#123;&#125;; NSURLConnectionPOSTè¯·æ±‚12345678910111213141516171819202122232425// 1.ç¡®å®šè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/login"];// 2.åˆ›å»ºå¯å˜è¯·æ±‚å¯¹è±¡NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];// 3.è®¾ç½® NSMutableURLRequest å±æ€§// è¯·æ±‚æ–¹æ³•ï¼ˆPOSTå¿…é¡»å¤§å†™ï¼‰request.HTTPMethod = @"POST";// è¯·æ±‚è¶…æ—¶request.timeoutInterval = 10;// è¯·æ±‚å¤´User-Agentï¼ˆæ³¨æ„:keyä¸€å®šè¦ä¸€è‡´(ç”¨äºä¼ é€’æ•°æ®ç»™åå°)ï¼‰[request setValue:@"ios 10.1" forHTTPHeaderField:@"User-Agent"];// è¯·æ±‚ä½“ä¿¡æ¯,å­—ç¬¦ä¸²---&gt;NSDatarequest.HTTPBody = [@"username=520it&amp;pwd=123&amp;type=JSON" dataUsingEncoding:NSUTF8StringEncoding];// 4.å‘é€è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; if (connectionError) &#123; NSLog(@"--è¯·æ±‚å¤±è´¥--"); &#125; else &#123; // 5.è§£ææ•°æ® NSLog(@"%@",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]); &#125;&#125;]; 5.httpé€šä¿¡è¿‡ç¨‹1234567è¯·æ±‚ï¼šè¯·æ±‚å¤´(NSURLRequesté»˜è®¤åŒ…å«)+è¯·æ±‚ä½“(GETæ²¡æœ‰)å“åº”ï¼šå“åº”å¤´(çœŸå®ç±»å‹-&gt;NSHTTPURLResponse)+å“åº”ä½“(è¦è§£æçš„æ•°æ®)GETï¼šhttp://120.25.226.186:32812/login?username=123&amp;pwd=456&amp;type=JSONåè®®+ä¸»æœºåœ°å€+æ¥å£åç§°+?+å‚æ•°1&amp;å‚æ•°2&amp;å‚æ•°3POSTï¼šhttp://120.25.226.186:32812/loginåè®®+ä¸»æœºåœ°å€+æ¥å£åç§° 6.GET å’Œ POST åŒºåˆ«123456781.getè¯·æ±‚å’Œpostè¯·æ±‚éƒ½å¯ä»¥ç”¨äºåšè·å–æ•°æ®è¯·æ±‚2.åœ¨è¯·æ±‚æ•°æ®å®‰å…¨æ–¹é¢postè¯·æ±‚æ¯”getè¯·æ±‚å®‰å…¨ 1).getæ˜¯ä»¥æ˜æ–‡çš„æ–¹å¼å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ 2).postæ˜¯åŒ…è£…åˆ°è¯·æ±‚ä½“bodyä¸­åï¼Œåœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ 3).getè¯·æ±‚çš„å‚æ•°å…¨éƒ¨æš´éœ²åœ¨æ¥å£ä¸­ï¼Œä¸€èˆ¬å«åšæ˜æ–‡è¯·æ±‚æˆ–è€…å‚»ç“œå¼è¯·æ±‚ï¼Œpostè¯·æ±‚çš„å‚æ•°ä¸€èˆ¬æ˜¯ä»¥å­—å…¸çš„æ–¹å¼è¿›è¡Œæ‹¼æ¥ï¼Œç›¸å¯¹äºgetæ¯”è¾ƒå®‰å…¨3.getè¯·æ±‚çš„URLåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼šé™åˆ¶é•¿åº¦ï¼Œå› æ­¤é•¿åº¦éå¸¸é•¿çš„è¯·æ±‚å»ºè®®ç”¨postè¯·æ±‚4.å¯¹æ–‡ä»¶å¤§å°çš„è¯·æ±‚ï¼šgetä¸å…è®¸å‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶(å›¾ç‰‡ï¼Œpdfï¼ŒéŸ³è§†é¢‘)5.å¦‚æœä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œæˆ–è€…æŸ¥è¯¢æ•°æ®ï¼Œä½¿ç”¨getè¯·æ±‚;å¦‚æœä¸Šä¼ æ•°æ®åˆ°æœåŠ¡å™¨æˆ–è€…ä¿®æ”¹æœåŠ¡å™¨ä¸Šä¼ æ•°æ®ä½¿ç”¨postè¯·æ±‚ 7.å¤§æ–‡ä»¶æ–­ç‚¹ä¸‹è½½12341.å®ç°æ€è·¯åœ¨ä¸‹è½½æ–‡ä»¶çš„æ—¶å€™ä¸å†æ˜¯æ•´å—çš„ä»å¤´å¼€å§‹ä¸‹è½½ï¼Œè€Œæ˜¯çœ‹å½“å‰æ–‡ä»¶å·²ç»ä¸‹è½½åˆ°å“ªä¸ªåœ°æ–¹ï¼Œç„¶åä»è¯¥åœ°æ–¹æ¥ç€å¾€åé¢ä¸‹è½½ã€‚2.è§£å†³æ–¹æ¡ˆï¼ˆé€šè¿‡è®¾ç½®è¯·æ±‚å¤´ä¸­çš„Rangeå‘Šè¯‰æœåŠ¡å™¨å€¼è¯·æ±‚ä¸€éƒ¨åˆ†æ•°æ® æ¥å®ç°ï¼‰è¾¹ä¸‹è½½å˜å†™å…¥æ²™ç›’ï¼Œé‡‡ç”¨è¿½åŠ çš„æ–¹å¼ã€‚(è¿™é‡Œæ˜¯ä¸€ä¸ªçº¿ç¨‹) 8.æ–‡ä»¶ä¸Šä¼ æ­¥éª¤123456789101.ç¡®å®šè¯·æ±‚è·¯å¾„2.æ ¹æ®URLåˆ›å»ºä¸€ä¸ªå¯å˜çš„è¯·æ±‚å¯¹è±¡3.è®¾ç½®è¯·æ±‚å¯¹è±¡ï¼Œä¿®æ”¹è¯·æ±‚æ–¹å¼ä¸ºPOST4.è®¾ç½®è¯·æ±‚å¤´ï¼Œå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬å°†è¦ä¸Šä¼ æ–‡ä»¶ï¼ˆContent-Typeï¼‰5.è®¾ç½®è¯·æ±‚ä½“ï¼ˆåœ¨è¯·æ±‚ä½“ä¸­æŒ‰ç…§æ—¢å®šçš„æ ¼å¼æ‹¼æ¥è¦ä¸Šä¼ çš„æ–‡ä»¶å‚æ•°å’Œéæ–‡ä»¶å‚æ•°ç­‰æ•°æ®ï¼‰1).æ‹¼æ¥æ–‡ä»¶å‚æ•°2).æ‹¼æ¥éæ–‡ä»¶å‚æ•°3).æ·»åŠ ç»“å°¾æ ‡è®°6.ä½¿ç”¨NSURLConnection sendAsyncå‘é€å¼‚æ­¥è¯·æ±‚ä¸Šä¼ æ–‡ä»¶7.è§£ææœåŠ¡å™¨è¿”å›çš„æ•°æ® 9.å¤šçº¿ç¨‹ä¸‹è½½æ–‡ä»¶æ€è·¯12345678910éœ€æ±‚:ä¼˜åŒ–ä¸‹è½½è§£å†³:å¼€å¯å¤šä¸ªçº¿ç¨‹ä¸‹è½½æ³¨æ„:1.ç›®å‰æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶å·¥ä½œä¸”å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè¿™æ—¶å°±ä¸èƒ½é‡‡ç”¨ç›´æ¥è¿½åŠ çš„æ–¹å¼äº†(ä¼šå‡ºç°æ•°æ®é”™ä¹±çš„ç°è±¡)1.å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹éƒ½åªä¸‹è½½æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ˆé‡‡ç”¨:é€šè¿‡è®¾ç½®è¯·æ±‚å¤´ä¸­çš„Rangeå‘Šè¯‰æœåŠ¡å™¨å€¼è¯·æ±‚ä¸€éƒ¨åˆ†æ•°æ® æ¥å®ç°ï¼‰2.åˆ›å»ºä¸€ä¸ªå’Œéœ€è¦ä¸‹è½½æ–‡ä»¶å¤§å°ä¸€è‡´çš„æ–‡ä»¶ï¼Œåˆ¤æ–­å½“å‰æ˜¯é‚£ä¸ªçº¿ç¨‹ï¼Œæ ¹æ®å½“å‰çš„çº¿ç¨‹æ¥åˆ¤æ–­ä¸‹è½½çš„æ•°æ®åº”è¯¥å†™å…¥åˆ°æ–‡ä»¶ä¸­çš„å“ªä¸ªä½ç½®ã€‚ï¼ˆå‡è®¾å¼€5æ¡çº¿ç¨‹æ¥ä¸‹è½½10Mçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆçº¿ç¨‹1ä¸‹è½½0-2Mï¼Œçº¿ç¨‹2ä¸‹è½½2-4Mä¸€æ¬¡ç±»æ¨ï¼Œå½“æ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä¹‹ååº”è¯¥å…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œå‡å¦‚å½“å‰çº¿ç¨‹æ˜¯çº¿ç¨‹2ï¼Œé‚£ä¹ˆåœ¨å†™æ•°æ®çš„æ—¶å€™å°±ä»æ–‡ä»¶çš„2Mä½ç½®å¼€å§‹å†™å…¥ï¼‰3.ä»£ç ç›¸å…³ï¼šä½¿ç”¨NSFileHandleè¿™ä¸ªç±»çš„seekToFileOfSetæ–¹æ³•ï¼Œæ¥å‘æ–‡ä»¶ä¸­ç‰¹å®šçš„ä½ç½®å†™å…¥æ•°æ®ã€‚4.æŠ€æœ¯ç›¸å…³1).æ¯ä¸ªçº¿ç¨‹é€šè¿‡è®¾ç½®è¯·æ±‚å¤´ä¸‹è½½æ–‡ä»¶ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†2).é€šè¿‡NSFileHandleå‘æ–‡ä»¶ä¸­çš„æŒ‡å®šä½ç½®å†™æ•°æ® ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯·æ±‚</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SDWebImageæ¡†æ¶å­¦ä¹ ]]></title>
    <url>%2FSourceAnnotations%2FSDLibrary.html</url>
    <content type="text"><![CDATA[Write in the first SDWebImage æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªå¼‚æ­¥å›¾ç‰‡åŠ è½½åº“ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨SDWebImageæ¥ç®¡ç†å›¾ç‰‡åŠ è½½ç›¸å…³æ“ä½œå¯ä»¥æå¤§åœ°æé«˜å¼€å‘æ•ˆç‡ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å®ç°ã€‚åƒè¿™ç§ç»å¸¸ç”¨åˆæ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—è¦åšåˆ°åˆæ­¥ç†è§£ï¼Œç„¶åæ¢³ç†æ€»ç»“å¸¸ç”¨æ–¹æ³•ï¼Œåˆ°æœ€åå¤¯å®åŸºç¡€ã€æ´»å­¦æ´»ç”¨ã€‚ä¸ºæ­¤ï¼Œè‡ªå·±æœ¬ç€å¥½å¥½å­¦ä¹ ï¼Œäº†è§£æƒå¨çš„ç›®çš„ï¼Œå†³å®šè§£è¯» SDWebImageæ¡†æ¶ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€SD æ¡†æ¶ç»“æ„ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š SDWebImageçš„æ¦‚è®º SDWebImageçš„å†…éƒ¨ç»“æ„ SDWebImageçš„å®ç°åŸç† SDWebImageçš„å·¥ä½œæµç¨‹ SDWebImageæ¡†æ¶åŸºæœ¬ä½¿ç”¨ SDWebImageæ¡†æ¶å†…éƒ¨ç»†èŠ‚ 1. SDWebImageçš„æ¦‚è®º æä¾›äº†ä¸€ä¸ªUIImageViewçš„categoryç”¨æ¥åŠ è½½ç½‘ç»œå›¾ç‰‡å¹¶ä¸”å¯¹ç½‘ç»œå›¾ç‰‡çš„ç¼“å­˜è¿›è¡Œç®¡ç† é‡‡ç”¨å¼‚æ­¥æ–¹å¼æ¥ä¸‹è½½ç½‘ç»œå›¾ç‰‡ é‡‡ç”¨å¼‚æ­¥æ–¹å¼ï¼Œä½¿ç”¨memoryï¼‹diskæ¥ç¼“å­˜ç½‘ç»œå›¾ç‰‡ï¼Œè‡ªåŠ¨ç®¡ç†ç¼“å­˜ã€‚ æ”¯æŒGIFåŠ¨ç”» æ”¯æŒWebPæ ¼å¼ åŒä¸€ä¸ªURLçš„ç½‘ç»œå›¾ç‰‡ä¸ä¼šè¢«é‡å¤ä¸‹è½½ å¤±æ•ˆçš„URLä¸ä¼šè¢«æ— é™é‡è¯• è€—æ—¶æ“ä½œéƒ½åœ¨å­çº¿ç¨‹ï¼Œç¡®ä¿ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ ä½¿ç”¨GCDå’ŒARC æ”¯æŒArm64 2. SDWebImageçš„å†…éƒ¨ç»“æ„ 3. SDWebImageçš„å®ç°åŸç†SDWebImage æ˜¯ç”±ä¸€ä¸ª SDImageCache(ä¸€ä¸ªå¤„ç†ç¼“å­˜çš„ç±») å’Œ SDWebImageDownloader(è´Ÿè´£ä¸‹è½½ç½‘ç»œå›¾ç‰‡) ï¼Œè€Œ SDWebImageManageråˆ™æ˜¯ç®¡ç†è€…å°†å‰ä¸¤è€…ç»“åˆèµ·æ¥å®Œæˆæ•´ä¸ªå·¥ä½œæµç¨‹ã€‚ é€šè¿‡å¯¹UIImageViewçš„ç±»åˆ«æ‰©å±•æ¥å®ç°å¼‚æ­¥åŠ è½½æ›¿æ¢å›¾ç‰‡çš„å·¥ä½œã€‚ä¸»è¦ç”¨åˆ°çš„å¯¹è±¡ï¼š 1.UIImageView (WebCache)ç±»åˆ«ï¼Œå…¥å£å°è£…ï¼Œå®ç°è¯»å–å›¾ç‰‡å®Œæˆåçš„å›è°ƒ 2.SDWebImageManagerï¼Œå¯¹å›¾ç‰‡è¿›è¡Œç®¡ç†çš„ä¸­è½¬ç«™ï¼Œè®°å½•é‚£äº›å›¾ç‰‡æ­£åœ¨è¯»å–ã€‚å‘ä¸‹å±‚è¯»å–Cacheï¼ˆè°ƒç”¨SDImageCacheï¼‰ï¼Œæˆ–è€…å‘ç½‘ç»œè¯»å–å¯¹è±¡ï¼ˆè°ƒç”¨SDWebImageDownloaderï¼‰ã€‚å®ç°SDImageCacheå’ŒSDWebImageDownloaderçš„å›è°ƒã€‚ 3.SDImageCacheï¼Œæ ¹æ®URLçš„MD5æ‘˜è¦å¯¹å›¾ç‰‡è¿›è¡Œå­˜å‚¨å’Œè¯»å–ï¼ˆå®ç°å­˜åœ¨å†…å­˜ä¸­æˆ–è€…å­˜åœ¨ç¡¬ç›˜ä¸Šä¸¤ç§å®ç°ï¼‰å®ç°å›¾ç‰‡å’Œå†…å­˜æ¸…ç†å·¥ä½œã€‚ 4.SDWebImageDownloaderï¼Œæ ¹æ®URLå‘ç½‘ç»œè¯»å–æ•°æ®ï¼ˆå®ç°éƒ¨åˆ†è¯»å–å’Œå…¨éƒ¨è¯»å–åå†é€šçŸ¥å›è°ƒä¸¤ç§æ–¹å¼ 4. SDWebImageçš„å·¥ä½œæµç¨‹ SDWebImageæ˜¯ä¸€ä¸ªæˆç†Ÿè€Œä¸”æ¯”è¾ƒåºå¤§çš„æ¡†æ¶ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¹¶ä¸éœ€è¦å¤ªå¤šçš„æ¥å£,è¿™ç®—æ˜¯ä¸€ç§ä»£ç å°è£…ç¨‹åº¦çš„ä½“ç°ã€‚è¿™é‡Œå°±ä»‹ç»æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ¥å£ã€‚123456789101112131415161718192021222324252627282930313233343536æ¢³ç†SDWebImageçš„ å·¥ä½œæµç¨‹1.å…¥å£æ–¹æ³•ï¼šè°ƒç”¨ UIImageView+WebCache çš„åˆ†ç±»æ–¹æ³•self.imageViewï¼š sd_setImageWithURL: placeholderImage: options: progress: completed:è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä¼ å…¥çš„ä¸‹è½½ç­–ç•¥ä¸æ˜¯SDWebImageDelayPlaceholder å»¶è¿Ÿæ˜¾ç¤ºå ä½å›¾ç‰‡ï¼Œé»˜è®¤æƒ…å†µä¸‹å…ˆæ˜¾ç¤º placeholderImage ï¼ŒåŒæ—¶ç”±SDWebImageManageræ ¹æ® URL æ¥åœ¨æœ¬åœ°æŸ¥æ‰¾å›¾ç‰‡ã€‚2.è¿›å…¥æ–¹æ³•ï¼šåˆå§‹åŒ– SDWebImageManager ç®¡ç†å™¨å¹¶è°ƒç”¨ï¼šSDWebImageManagerï¼šdownloadImageWithURL: options: progress: completed:1). SDWebImageManager æ˜¯å°†UIImageView+WebCacheåŒSDImageCache é“¾æ¥èµ·æ¥çš„ç±»ï¼Œå›¾ç‰‡ç¼“å­˜æ˜¯åœ¨å†…å­˜ç¼“å­˜ä¸€ä»½,åœ¨ç£ç›˜ç¼“å­˜ä¸€ä»½.3.SDImageCacheï¼šqueryDiskCacheForKey: done:è¯¥æ–¹æ³•æŸ¥æ‰¾ cacheKey(URLå¯¹åº”çš„ç¼“å­˜KEY) å¯¹åº”ä¸‹è½½å›¾ç‰‡çš„ç¼“å­˜æƒ…å†µï¼Œå…ˆæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜ç¼“å­˜4.æ£€æŸ¥è¯¥`cacheKey`å¯¹åº”çš„å†…å­˜ç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨å†…å­˜ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¹¶æŠŠå›¾ç‰‡å’Œå­˜å‚¨æ–¹å¼ï¼ˆå†…å­˜ç¼“å­˜ï¼‰é€šè¿‡blockå—ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ã€‚å‰ç«¯æ¥æ˜¾ç¤ºå›¾ç‰‡ã€‚5.å¦‚æœç¼“å­˜å¯¹åº”çš„keyä¸ºç©ºï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªæ“ä½œNSOperation æ·»åŠ åˆ°ä¸²è¡Œé˜Ÿåˆ—ï¼Œä»ç£ç›˜æŸ¥æ‰¾å›¾ç‰‡æ˜¯å¦å·²è¢«ä¸‹è½½ç¼“å­˜ã€‚6.æ£€æŸ¥è¯¥ cacheKey åœ¨ç¡¬ç›˜ç¼“å­˜ç›®å½•ä¸‹å°è¯•è¯»å–å›¾ç‰‡æ–‡ä»¶ï¼Œè¿™é‡Œå›è°ƒdoneBlock ç»“æœï¼Œè¦åœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒã€‚7.å¦‚æœå­˜åœ¨ç£ç›˜ç¼“å­˜ï¼Œä¸”åº”è¯¥æŠŠè¯¥å›¾ç‰‡ä¿å­˜ä¸€ä»½åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼ˆåˆ™å…ˆè®¡ç®—è¯¥å›¾ç‰‡çš„cost(æˆæœ¬)ï¼Œå¦‚æœç©ºé—²å†…å­˜è¿‡å°ï¼Œä¼šå…ˆæ¸…ç©ºå†…å­˜ç¼“å­˜ï¼‰ã€‚ç„¶åå¹¶æŠŠå›¾ç‰‡å’Œå­˜å‚¨æ–¹å¼ï¼ˆç£ç›˜ç¼“å­˜ï¼‰é€šè¿‡blockå—ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ï¼Œå±•ç¤ºå›¾ç‰‡ã€‚8.å¦‚æœä»ç¡¬ç›˜ç¼“å­˜ç›®å½•æ²¡æœ‰è¯»å–åˆ°å›¾ç‰‡,è¯´æ˜æ‰€æœ‰ç¼“å­˜éƒ½ä¸å­˜åœ¨è¯¥å›¾ç‰‡(æ— ç¼“å­˜)ï¼Œéœ€è¦ä¸‹è½½å›¾ç‰‡ã€‚9.ä½¿ç”¨å¼‚æ­¥ä¸‹è½½å™¨ä¸‹è½½å›¾ç‰‡ï¼šåˆå§‹åŒ– SDWebImageDownloader å¹¶åˆ›å»ºæ–°çš„å›¾ç‰‡ä¸‹è½½ä»»åŠ¡ï¼Œå¾—åˆ°ä¸€çš„ SDWebImageOperation å¯¹è±¡ã€‚SDWebImageDownloaderï¼šdownloadImageWithURL: options: progress: completed: å›¾åƒä¸‹è½½å®Œæˆæˆ–è€…å‡ºç°é”™è¯¯æ—¶ä¼šé€šçŸ¥ä»£ç†10.æ ¸å¿ƒæ–¹æ³•ï¼šä¸‹è½½å›¾ç‰‡çš„æ“ä½œæŠŠ SDWebImageOperation å¯¹è±¡æ·»åŠ åˆ° NSOperationQueue é˜Ÿåˆ—ä¸­å¼€å§‹å¼‚æ­¥ä¸‹è½½ï¼Œä¼šè°ƒç”¨ start æ–¹æ³•ï¼šSDWebImageDownloaderOperation ï¼šåœ¨ start æ–¹æ³•ä¸­å¤„ç†å›¾ç‰‡ä¸‹è½½æ“ä½œåˆ›å»º NSURLConnectioné“¾æ¥å¯¹è±¡å‘é€è¯·æ±‚ï¼Œå¹¶è®¾ç½®ä»£ç† 5. SDWebImageæ¡†æ¶åŸºæœ¬ä½¿ç”¨UIImageView+WebCache.h ä¸‹è½½å›¾ç‰‡12345678910111213141516171819202122232425262728293031323334353637383940//ä¸‹è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•/* * ä¸‹è½½å›¾ç‰‡ä¸”éœ€è¦è·å–ä¸‹è½½è¿›åº¦(å†…å­˜ç¼“å­˜&amp;ç£ç›˜ç¼“å­˜) * æ ¹æ®å›¾ç‰‡çš„urlä¸‹è½½å›¾ç‰‡å¹¶è®¾ç½®åˆ°ImageViewä¸Šé¢å»ï¼Œå¼‚æ­¥ä¸‹è½½å¹¶ç¼“å­˜ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options å›¾ç‰‡ä¸‹è½½é€‰é¡¹ï¼ˆç­–ç•¥ï¼‰,å‚è€ƒSDWebImageOptionsçš„æšä¸¾å€¼ * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒ * receivedSize å·²ç»ä¸‹è½½çš„æ•°æ®å¤§å° * expectedSize è¦ä¸‹è½½å›¾ç‰‡çš„æ€»å¤§å° * @param completedBlock æ“ä½œæˆåŠŸå›è°ƒå›è°ƒ,è¯¥å›è°ƒæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * errorï¼šå¦‚æœå›¾ç‰‡ä¸‹è½½æˆåŠŸåˆ™errorä¸ºnil,å¦åˆ™erroræœ‰å€¼ * @param cacheTypeï¼šå›¾ç‰‡ç¼“å­˜ç±»å‹ï¼ˆå†…å­˜ç¼“å­˜|æ²™ç›’ç¼“å­˜|ç›´æ¥ä¸‹è½½ï¼‰,SDImageCacheTypeæšä¸¾ * SDImageCacheTypeNoneï¼šä»ç½‘ç»œä¸‹è½½ * SDImageCacheTypeDiskï¼šä»æœ¬åœ°ç¼“å­˜åŠ è½½ * SDImageCacheTypeMemoryï¼šä»å†…å­˜ç¼“å­˜åŠ è½½ * @param imageURLï¼šå›¾ç‰‡çš„URLåœ°å€ */- (void)download1 &#123; [self.imageView sd_setImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] placeholderImage:[UIImage imageNamed:@"placeholder"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) &#123; self.imageView.image = image; NSLog(@"download3--%@",[NSThread currentThread]); switch (cacheType) &#123; case SDImageCacheTypeNone: NSLog(@"ç½‘ç»œä¸‹è½½"); break; case SDImageCacheTypeDisk: NSLog(@"ä½¿ç”¨ç£ç›˜ç¼“å­˜"); break; case SDImageCacheTypeMemory: NSLog(@"ä½¿ç”¨å†…å­˜ç¼“å­˜"); break; default: break; &#125; &#125;];&#125; SDWebImageManager ç®¡ç†è€…123456789101112131415161718192021222324252627282930313233/* * åªéœ€è¦ç®€å•è·å¾—ä¸€å¼ å›¾ç‰‡,ä¸è®¾ç½®ï¼ˆå†…å­˜ç¼“å­˜&amp;ç£ç›˜ç¼“å­˜ï¼‰ * å¦‚æœURLå¯¹åº”çš„å›¾åƒåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ä¸‹è½½æŒ‡å®šçš„å›¾ç‰‡ï¼Œå¦åˆ™è¿”å›ç¼“å­˜çš„å›¾åƒ * * @param finishedï¼š * 1.å¦‚æœå›¾åƒä¸‹è½½å®Œæˆåˆ™ä¸ºYES * 2.å¦‚æœæ²¡æœ‰ä½¿ç”¨ SDWebImageDownloaderProgressiveDownloadï¼Œæœ€åä¸€ä¸ªå‚æ•°ä¸€ç›´æ˜¯ YES * 3.å¦‚æœä½¿ç”¨äº† SDWebImageDownloaderProgressiveDownload é€‰é¡¹ï¼Œæ­¤ block ä¼šè¢«é‡å¤è°ƒç”¨ * 1)ä¸‹è½½å®Œæˆå‰ï¼Œimage å‚æ•°æ˜¯éƒ¨åˆ†å›¾åƒï¼Œfinished å‚æ•°æ˜¯ NO * 2)æœ€åä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œimage å‚æ•°æ˜¯å®Œæ•´å›¾åƒï¼Œè€Œ finished å‚æ•°æ˜¯ YES * 3)å¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆfinished å‚æ•°ä¹Ÿæ˜¯ YES */- (void)download2 &#123; [[SDWebImageManager sharedManager] downloadImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) &#123; self.imageView.image = image; NSLog(@"download2--%@",[NSThread currentThread]); switch (cacheType) &#123; case SDImageCacheTypeNone: NSLog(@"ç½‘ç»œä¸‹è½½"); break; case SDImageCacheTypeDisk: NSLog(@"ä½¿ç”¨ç£ç›˜ç¼“å­˜"); break; case SDImageCacheTypeMemory: NSLog(@"ä½¿ç”¨å†…å­˜ç¼“å­˜"); break; default: break; &#125; &#125;];&#125; SDWebImageDownloader å·¥å…·ç±»(æ–‡ä»¶ä¸‹è½½)12345678910111213141516171819// ä¸‹è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•/* * ä¸éœ€è¦ä»»ä½•çš„ç¼“å­˜å¤„ç†(æ²¡æœ‰åšä»»ä½•ç¼“å­˜å¤„ç†) * ä½¿ç”¨ç»™å®šçš„ URL åˆ›å»º SDWebImageDownloader å¼‚æ­¥ä¸‹è½½å™¨å®ä¾‹ */- (void)download3 &#123; [[SDWebImageDownloader sharedDownloader] downloadImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) &#123; /** æ³¨æ„:completedå®Œæˆåè¿™é‡Œæ˜¯åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œçš„ */ // çº¿ç¨‹é—´é€šä¿¡(å›åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI) [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; self.imageView.image = image; NSLog(@"download3--%@",[NSThread currentThread]); &#125;]; &#125;];&#125; 6. SDWebImageæ¡†æ¶å†…éƒ¨ç»†èŠ‚1.SDImageCacheæ˜¯æ€ä¹ˆåšæ•°æ®ç®¡ç†çš„? SDImageCacheåˆ†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯å†…å­˜å±‚é¢çš„ï¼Œä¸€ä¸ªæ˜¯ç£ç›˜å±‚é¢çš„ã€‚å†…å­˜å±‚é¢çš„ç›¸å½“æ˜¯ä¸ªç¼“å­˜å™¨ï¼Œä»¥Key-Valueçš„å½¢å¼å­˜å‚¨å›¾ç‰‡ã€‚å½“å†…å­˜ä¸å¤Ÿçš„æ—¶å€™ä¼šæ¸…é™¤æ‰€æœ‰ç¼“å­˜å›¾ç‰‡ã€‚ç”¨æœç´¢æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼åšç®¡ç†ï¼Œæ–‡ä»¶æ›¿æ¢æ–¹å¼æ˜¯ä»¥æ—¶é—´ä¸ºå•ä½ï¼Œå‰”é™¤æ—¶é—´å¤§äºä¸€å‘¨çš„å›¾ç‰‡æ–‡ä»¶ã€‚å½“SDWebImageManagerå‘SDImageCacheè¦èµ„æºæ—¶ï¼Œå…ˆæœç´¢å†…å­˜å±‚é¢çš„æ•°æ®ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å›ï¼Œæ²¡æœ‰çš„è¯å»è®¿é—®ç£ç›˜ï¼Œå°†å›¾ç‰‡ä»ç£ç›˜è¯»å–å‡ºæ¥ï¼Œå°†å›¾ç‰‡å¯¹è±¡æ”¾åˆ°å†…å­˜å±‚é¢åšå¤‡ä»½ï¼Œå†è¿”å›è°ƒç”¨å±‚ 2.ç³»ç»Ÿçº§å†…å­˜è­¦å‘Šå¦‚ä½•å¤„ç†ï¼ˆé¢è¯•ï¼‰?123456789// 1.æ¸…ç©ºç¼“å­˜// clearDisk æ¸…é™¤ç£ç›˜ç¼“å­˜,ç›´æ¥åˆ é™¤ç„¶åé‡æ–°åˆ›å»º(æ‰€æœ‰ç¼“å­˜ç›®å½•ä¸­çš„æ–‡ä»¶å…¨éƒ¨åˆ é™¤ï¼Œå†åˆ›å»ºä¸€ä¸ªåŒåç©ºç›®å½•)// cleanDisk æ¸…é™¤è¿‡æœŸçš„ç£ç›˜ç¼“å­˜,è®¡ç®—å½“å‰ç¼“å­˜çš„å¤§å°,å’Œè®¾ç½®çš„æœ€å¤§ç¼“å­˜æ•°é‡æ¯”è¾ƒ, å¦‚æœè¶…å‡ºé‚£ä¹ˆä¼šç»§ç»­åˆ é™¤(æŒ‰ç…§æ–‡ä»¶çš„åˆ›å»ºçš„å…ˆåé¡ºåº)ï¼Œç›´åˆ°å°äºæœ€å¤§ç¼“å­˜æ•°é‡ è¿‡æœŸæ˜¯ maxCacheAge =7å¤©[[SDWebImageManager sharedManager].imageCache cleanDisk]; // 2.å–æ¶ˆå½“å‰æ‰€æœ‰çš„æ“ä½œ[[SDWebImageManager sharedManager] cancelAll]; 3.è¯¥æ¡†æ¶å†…éƒ¨å¯¹å†…å­˜è­¦å‘Šçš„å¤„ç†æ–¹å¼?å†…éƒ¨é€šè¿‡ç›‘å¬é€šçŸ¥çš„æ–¹å¼æ¸…ç†ç¼“å­˜ 1.ç›‘å¬åˆ°UIApplicationDidReceiveMemoryWarningNotificationæ¥æ”¶åˆ°å†…å­˜è­¦å‘Šçš„é€šçŸ¥åï¼Œè°ƒç”¨ clearMemory æ–¹æ³•,æ¸…é™¤å†…å­˜ç¼“å­˜ 2.å½“ç›‘å¬åˆ°UIApplicationWillTerminateNotificationæ¥æ”¶åˆ°åº”ç”¨ç¨‹åºå°†è¦ç»ˆæ­¢é€šçŸ¥ï¼Œè°ƒç”¨ cleanDisk æ–¹æ³•,æ¸…ç†è¿‡æœŸ(é»˜è®¤å¤§äºä¸€å‘¨)çš„ç£ç›˜ç¼“å­˜ 3.å½“ç›‘å¬åˆ°UIApplicationDidEnterBackgroundNotificationæ¥æ”¶åˆ°åº”ç”¨ç¨‹åºè¿›å…¥åå°é€šçŸ¥ï¼Œè°ƒç”¨ backgroundCleanDisk æ–¹æ³•,æ¸…ç†è¿‡æœŸç£ç›˜ç¼“å­˜ è¡¥å……ï¼šå†…å­˜ç¼“å­˜: ä½¿ç”¨NSCahceå¯¹è±¡å®ç°ï¼Œæœ€å¤§å†…å­˜ç¼“å­˜å€¼ä»¥åƒç´ ä¸ºå•ä½ç£ç›˜ç¼“å­˜: ä½¿ç”¨ NSFileManager å­˜å‚¨åœ¨ Cache ç›®å½•ä¸­ï¼Œæœ€å¤§ç£ç›˜ç¼“å­˜æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œæœ€å¤§ç£ç›˜ç¼“å­˜çš„æ—¶é—´é»˜è®¤ä¸º1å‘¨ 4.æœ€å¤§å¹¶å‘æ•°é‡1maxConcurrentOperationCount = 6 5.ç¼“å­˜æ–‡ä»¶çš„ä¿å­˜åç§°å¦‚ä½•å¤„ç†?SDImageCacheï¼Œæ‹¿åˆ°å›¾ç‰‡çš„URLè·¯å¾„,å¯¹è¯¥è·¯å¾„è¿›è¡ŒMD5åŠ å¯†å¯¹å›¾ç‰‡è¿›è¡Œå­˜å‚¨å’Œè¯»å–ã€‚ 6.è¯¥æ¡†æ¶è¿›è¡Œç¼“å­˜å¤„ç†çš„æ–¹å¼?å¯å˜å­—å…¸â€”&gt;NSCache 7.å¦‚ä½•åˆ¤æ–­å›¾ç‰‡çš„ç±»å‹?12345678910111213141516åœ¨åˆ¤æ–­å›¾ç‰‡ç±»å‹çš„æ—¶å€™ï¼ŒåªåŒ¹é…ç¬¬ä¸€ä¸ªå­—èŠ‚#import "NSData+ImageContentType.h"// åˆ¤æ–­å›¾ç‰‡ç±»å‹æ‹¿åˆ°æ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå–å‡ºç¬¬ä¸€ä¸ªå­—èŠ‚å’Œswitché‡Œçš„åˆ†æ”¯æ¯”è¾ƒæ¥åˆ¤æ–­PNGï¼šå‹ç¼©æ¯”æ²¡æœ‰JPGé«˜ï¼Œä½†æ˜¯æ— æŸå‹ç¼©ï¼Œè§£å‹ç¼©æ€§èƒ½é«˜ï¼Œè‹¹æœæ¨èçš„å›¾åƒæ ¼å¼ï¼JPGï¼šå‹ç¼©æ¯”æœ€é«˜çš„ä¸€ç§å›¾ç‰‡æ ¼å¼ï¼Œæœ‰æŸå‹ç¼©ï¼æœ€å¤šä½¿ç”¨çš„åœºæ™¯ï¼Œç…§ç›¸æœºï¼è§£å‹ç¼©çš„æ€§èƒ½ä¸å¥½ï¼GIFï¼šåºåˆ—æ¡¢åŠ¨å›¾ï¼Œç‰¹ç‚¹ï¼šåªæ”¯æŒ256ç§é¢œè‰²ï¼æœ€æµè¡Œçš„æ—¶å€™åœ¨1998ï½1999ï¼Œæœ‰ä¸“åˆ©çš„ï¼SDWebImageç¼“å­˜å›¾ç‰‡çš„åç§°æ˜¯ç”¨URLçš„md5åŠ å¯†åç”Ÿæˆçš„32ä½å­—ç¬¦ä¸²ä½œä¸ºæ–‡ä»¶åçš„åˆ©ç”¨é€šçŸ¥ä¸­å¿ƒè§‚å¯Ÿï¼Œèƒ½å¤Ÿä¿è¯ç¼“å­˜æ–‡ä»¶çš„å¤§å°å§‹ç»ˆåœ¨æ§åˆ¶èŒƒå›´ä¹‹å†…ï¼``` ç¤ºä¾‹ï¼š```objc// 5.åˆ¤æ–­å›¾ç‰‡ç±»å‹NSData *imageData = [NSData dataWithContentsOfFile:@"/Users/sunhui/Desktop/Snip20170209_1.png"];NSString *typeStr = [NSData sd_contentTypeForImageData:imageData];NSLog(@"%@",typeStr);// image/png 8.æ’­æ”¾Gifå›¾ç‰‡?1234#import "UIImage+GIF.h"// æ’­æ”¾Gifå›¾ç‰‡UIImage *image = [UIImage sd_animatedGIFNamed:@"imageGif"];self.imageView.image = image; 9.é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„å¤„ç†æ–¹å¼?FIFO,ä¸‹è½½ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ï¼šé»˜è®¤ä¸ºå…ˆè¿›å…ˆå‡º 10.è¯·æ±‚è¶…æ—¶çš„æ—¶é—´?1downloadTimeout é»˜è®¤ï¼š15ç§’ PS.æœ€ååˆ†äº«ä¸€ä¸‹å­¦ä¹ å¤šçº¿ç¨‹è‡ªå®šä¹‰NSOperationä¸‹è½½å›¾ç‰‡æ€è·¯ï¼š æ–‡å­—è§£æ: 1.æ ¹æ®å›¾ç‰‡çš„urlå…ˆå»æ£€æŸ¥images(å†…å­˜ç¼“å­˜)ä¸­è¯¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ç›´æ¥æ˜¾ç¤ºåˆ°cellä¸Šï¼›å¦åˆ™å»æ£€æŸ¥ç£ç›˜ç¼“å­˜(æ²™ç›’)ã€‚ 2.å¦‚æœæœ‰ç£ç›˜ç¼“å­˜(æ²™ç›’)ï¼ŒåŠ è½½æ²™ç›’ä¸­å¯¹åº”çš„å›¾ç‰‡æ˜¾ç¤ºåˆ°cellä¸Šï¼Œå†ä¿å­˜ä¸€ä»½åˆ°å†…å­˜ç¼“å­˜ï¼›å¦åˆ™å…ˆæ˜¾ç¤ºå ä½å›¾ç‰‡ï¼Œå†æ£€æŸ¥operations(æ“ä½œç¼“å­˜)ä¸­è¯¥å›¾ç‰‡æ˜¯å¦æ­£åœ¨ä¸‹è½½ï¼Œå¦‚æœæ˜¯ å°±ç­‰å¾…ä¸‹è½½ï¼›å¦åˆ™åˆ›å»ºä¸‹è½½operationsæ“ä½œä»»åŠ¡,ä¿å­˜åˆ°æ“ä½œç¼“å­˜ä¸­å»ä¸‹è½½ã€‚ 3.ä¸‹è½½å®Œæˆå(éœ€è¦ä¸»åŠ¨åˆ·æ–°æ˜¾ç¤º(é‡‡ç”¨å±€éƒ¨åˆ·æ–°))ï¼Œå°†æ“ä½œä»æ“ä½œç¼“å­˜ä¸­ç§»é™¤ï¼Œå°†å›¾ç‰‡åœ¨å†…å­˜ç¼“å­˜(å…ˆ) å’Œ æ²™ç›’(å)ä¸­å„ä¿å­˜ä¸€ä»½ã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIViewAppleè¯‘æ–‡]]></title>
    <url>%2FAppleTranslation%2FUIViewApple.html</url>
    <content type="text"><![CDATA[ğŸ“Œ å¯¼è¯­åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ï£¿ é¦–å…ˆé™„ä¸Šå®˜æ–¹åŸæ–‡åœ°å€ API Reference - UIView Class Relationships Inherits From ç»§æ‰¿è‡ª: UIResponder : NSObject Conforms To éµå®ˆ: UICoordinateSpaceï¼ŒUIDynamicItemï¼ŒUIFocusItemï¼ŒUITraitEnvironmentï¼ŒCALayerDelegateï¼ŒNSCodingï¼ŒUIAppearanceï¼ŒUIAppearanceContainer Framework SDKs iOS 2.0+ ClassğŸ“Œ UIView The UIView class defines a rectangular area on the screen and the interfaces for managing the content in that area. UIView ç±»åœ¨å±å¹•å’Œç•Œé¢ä¸Šå®šä¹‰äº†ä¸€å—çŸ©å½¢åŒºåŸŸï¼Œç”¨æ¥ç®¡ç†é‚£å—åŒºåŸŸçš„å†…å®¹ã€‚ ğŸ“Œ Overview At runtime, a view object handles the rendering of any content in its area and also handles any interactions with that content. The UIView class itself provides basic behavior for filling its rectangular area with a background color. More sophisticated content can be presented by subclassing UIView and implementing the necessary drawing and event-handling code yourself. The UIKit framework also includes a set of standard subclasses that range from simple buttons to complex tables and can be used as-is. For example, a UILabel object draws a text string and a UIImageView object draws an image. åœ¨è¿è¡Œæ—¶ï¼Œä¸€ä¸ªViewå¯¹è±¡å¤„ç†å®ƒæ‰€åœ¨åŒºåŸŸçš„å†…å®¹æ¸²æŸ“å’Œäº¤äº’ã€‚UIViewç±»ä¼šä½¿ç”¨èƒŒæ™¯é¢œè‰²å¡«å……æ‰€åœ¨çš„çŸ©å½¢åŒºåŸŸã€‚æ›´å¤æ‚çš„å†…å®¹å¯ä»¥ç”¨UIViewçš„å­ç±»æ¥å‘ˆç°ï¼Œä½ è‡ªå·±æ¥å®ç°å¿…è¦çš„ç»˜ç”»å’Œäº‹ä»¶å¤„ç†ä»£ç ã€‚UIKitæ¡†æ¶åŒæ—¶æä¾›äº†ä¸€äº›æ ‡å‡†å­ç±»ï¼Œä»ç®€å•çš„æŒ‰é’®åˆ°å¤æ‚çš„è¡¨æ ¼ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚ï¼ŒUILabel å¯¹è±¡ç”»æ–‡æœ¬å­—ç¬¦ä¸²ï¼ŒUIImageView å¯¹è±¡ç”»å›¾åƒã€‚ ğŸ·Because view objects are the main way your application interacts with the user, they have a number of responsibilities. Here are just a few: Drawing and animation Views draw content in their rectangular area using technologies such as UIKit, Core Graphics, and OpenGL ES. Some view Declared property can be animated to new values. Layout and subview management A view may contain zero or more subviews. Each view defines its own default resizing behavior in relation to its parent view. A view can define the size and position of its subviews as needed. Event handling A view is a responder and can handle touch events and other events defined by the UIResponder class. Views can use the addGestureRecognizer: method to install gesture recognizers to handle common gestures. å› ä¸ºViewå¯¹è±¡æ˜¯åº”ç”¨ä¸ç”¨æˆ·äº¤äº’çš„ä¸»è¦é€”å¾„ï¼Œä»–ä»¬æœ‰ä¸€ç³»åˆ—çš„èŒè´£ã€‚ä»¥ä¸‹åˆ—å‡ºä¸€äº›: ç»˜ç”»å’ŒåŠ¨ç”»: Viewåœ¨ä»–ä»¬çš„çŸ©å½¢åŒºåŸŸä½¿ç”¨UIKitï¼ŒCore Graphicså’ŒOpenGL ESä¹‹ç±»çš„æŠ€æœ¯ç»˜ç”»ã€‚ ä¸€äº›è§†å›¾å±æ€§å¯ä»¥åŠ¨ç”»åˆ°æ–°çš„å€¼ã€‚ å¸ƒå±€å’Œå­ View ç®¡ç† ä¸€ä¸ªViewå¯ä»¥åŒ…å«0ä¸ªæˆ–å¤šä¸ªå­Viewã€‚ æ¯ä¸ªViewéƒ½å®šä¹‰äº†ç›¸å¯¹çˆ¶Viewå¤§å°æ”¹å˜çš„é»˜è®¤è¡Œä¸ºã€‚ å¦‚æœ‰éœ€è¦ï¼Œä¸€ä¸ªViewå¯ä»¥å®šä¹‰å­Viewçš„å¤§å°å’Œä½ç½®ã€‚ äº‹ä»¶å¤„ç† Viewæ˜¯ä¸€ä¸ªå“åº”è€…ï¼Œå¯ä»¥å¤„ç† UIResponder ç±»å®šä¹‰çš„è§¦æ‘¸å’Œå…¶ä»–äº‹ä»¶ã€‚ Viewå¯ä»¥ä½¿ç”¨ addGestureRecognizer æ–¹æ³•å®‰è£…æ‰‹åŠ¿è¯†åˆ«å™¨æ¥å¤„ç†å¸¸ç”¨æ‰‹åŠ¿ã€‚ ğŸ·Views can embed other views and create sophisticated visual hierarchies. This creates a parent-child relationship between the view being embedded (known as the subview) and the parent view doing the embedding (known as the superview). Normally, a subviewâ€™s visible area is not clipped to the bounds of its superview, but in iOS you can use the clipsToBounds property to alter that behavior. A parent view may contain any number of subviews but each subview has only one superview, which is responsible for positioning its subviews appropriately. Viewå¯ä»¥å†…åµŒåˆ°å…¶ä»–Viewï¼Œåˆ›å»ºå¤æ‚çš„å¯è§†å±‚çº§ã€‚è¿™ä¼šåœ¨åµŒå…¥çš„View(å­View)å’Œè¢«åµŒå…¥çš„View(çˆ¶View)é—´åˆ›å»ºçˆ¶å­å…³ç³»ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œå­Viewçš„å¯è§†åŒºåŸŸä¸ä¼šè¢«çˆ¶Viewçš„è¾¹ç•Œå‰ªè¾‘ï¼Œä½†åœ¨iOSé‡Œä½ å¯ä»¥ä½¿ç”¨ clipsToBounds å±æ€§æ¥ä¿®æ”¹è¿™ä¸ªè¡Œä¸ºã€‚ä¸€ä¸ªçˆ¶Viewå¯èƒ½æœ‰å¤šä¸ªå­View,ä½†ä¸€ä¸ªå­Viewåªæœ‰ä¸€ä¸ªçˆ¶Viewï¼Œå®ƒè´Ÿè´£ç¡®å®šå­Viewçš„ä½ç½®ã€‚ ğŸ·The geometry of a view is defined by its frame , bounds , and center properties. The frame defines the origin and dimensions of the view in the coordinate system of its superview and is commonly used during layout to adjust the size or position of the view. The center property can be used to adjust the position of the view without changing its size. The bounds defines the internal dimensions of the view as it sees them and is used almost exclusively in custom drawing code. The size portion of the frame and bounds rectangles are coupled together so that changing the size of either rectangle updates the size of both. For detailed information about how to use the UIView class, see View Programming Guide for iOS . Viewçš„å‡ ä½•ç»“æ„æ˜¯é€šè¿‡å®ƒçš„æ¡†æ¶(frame)ï¼Œè¾¹ç•Œ(bounds)å’Œä¸­å¿ƒ(center)å±æ€§æ¥å®šä¹‰çš„ã€‚frameå®šä¹‰äº†Viewç›¸å¯¹çˆ¶Viewåæ ‡ç³»çš„åŸç‚¹å’Œå¤§å°ï¼Œä¸€èˆ¬åœ¨Viewå¸ƒå±€å’Œè°ƒæ•´å°ºå¯¸æˆ–ä½ç½®æ—¶ä½¿ç”¨ã€‚centerå±æ€§å¯ä»¥åœ¨ä¸æ”¹å˜viewçš„å¤§å°æ¥è°ƒæ•´viewçš„ä½ç½®ã€‚boundså®šä¹‰äº†viewçš„å†…éƒ¨å°ºå¯¸ï¼Œå‡ ä¹åªåœ¨è‡ªå®šä¹‰ç»˜ç”»ä»£ç æ—¶ä½¿ç”¨ã€‚frameçš„sizeéƒ¨åˆ†å’ŒboundsçŸ©å½¢éƒ¨åˆ†è€¦åˆåœ¨ä¸€èµ·ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸¤è€…ä¸­çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªåŒæ—¶æ¥æ”¹å˜viewçš„å¤§å°ã€‚ æ›´å¤šå…³äºå¦‚ä½•ä½¿ç”¨ UIView ç±»ï¼Œå‚è§iOS Viewç¼–ç¨‹å‘å¯¼(View Programming Guide for iOS) NoteIn iOS 2.x, the maximum size of a UIView object is 1024 x 1024 points. In iOS 3.0 and later, views are no longer restricted to this maximum size but are still limited by the amount of memory they consume. It is in your best interests to keep view sizes as small as possible. Regardless of which version of iOS is running, you should consider tiling any content that is significantly larger than the dimensions of the screen. æ³¨æ„åœ¨iOS 2.xæ—¶ï¼ŒUIViewçš„æœ€å¤§å°ºå¯¸æ˜¯1024*1024ç‚¹ï¼Œåœ¨iOS 3.0ä»¥åï¼Œä¸å†å¼ºåˆ¶é™åˆ¶å¤§å°ï¼Œè€Œæ˜¯å—é™äºå†…å­˜æ¶ˆè€—ã€‚è®©Viewå°½å¯èƒ½å°ï¼Œæ— è®ºè¿è¡Œåœ¨å“ªä¸ªç‰ˆæœ¬çš„iOSä¸Šï¼Œéƒ½åº”è¯¥è€ƒè™‘é¿å…Viewæ˜æ˜¾å¤§äºå±å¹•å°ºå¯¸ ğŸ“Œ Creating a Viewã€Œåˆ›å»ºä¸€ä¸ªViewã€ To create a view programmatically, you can use code like the following:ä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»£ç å¦‚ä¸‹: Objective-c12CGRect viewRect = CGRectMake(10, 10, 100, 100);UIView* myView = [[UIView alloc] initWithFrame:viewRect]; swift12let viewRect = CGRect(x: 10, y: 10, width: 100, height: 100)let myView = UIView(frame: viewRect) This code creates the view and positions it at the point (10, 10) in its superviewâ€™s coordinate system (once it is added to that superview). To add a subview to another view, you use the addSubview: method. In iOS, sibling views may overlap each other without any issues, allowing complex view placement. The addSubview: method places the specified view on top of other siblings. You can specify the relative z-order of a subview by adding it using the insertSubview:aboveSubview: and insertSubview:belowSubview: methods. You can also exchange the position of already added subviews using the exchangeSubviewAtIndex:withSubviewAtIndex: method. è¿™æ®µä»£ç åˆ›å»ºäº†viewï¼Œå¹¶æŠŠå®ƒæ”¾åœ¨çˆ¶viewåæ ‡ç³»çš„(10,10)ç‚¹(ä¸€æ—¦å®ƒè¢«åŠ åˆ°çˆ¶view)ã€‚æ·»åŠ ä¸€ä¸ªå­viewåˆ°å¦ä¸€ä¸ªviewä¸Šï¼Œç”¨addSubview:æ–¹æ³•ã€‚åœ¨ iOS é‡Œï¼ŒåŒçº§çš„viewå¯ä»¥ç›¸äº’è¦†ç›–ï¼Œè€Œä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ï¼Œå…è®¸å¤æ‚çš„viewå¸ƒç½®ã€‚addSubviewæ”¾ç½®æŒ‡å®šçš„viewåˆ°å®ƒçš„åŒçº§viewçš„é¡¶éƒ¨ã€‚ä½ å¯ä»¥ä½¿ç”¨insertSubview:aboveSubview: å’Œ insertSubview:belowSubview: æ–¹æ³•æŒ‡å®šå­viewçš„ç›¸å¯¹zåæ ‡ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨exchangeSubviewAtIndex:withSubviewAtIndex:æ–¹æ³•äº¤æ¢å·²ç»æ·»åŠ çš„å­viewçš„ä½ç½®ã€‚ ğŸ·When creating a view, it is important to assign an appropriate value to the autoresizingMask property to ensure the view resizes correctly. View resizing primarily occurs when the orientation of your applicationâ€™s interface changes but it may happen at other times as well. For example, calling the setNeedsLayout method forces your view to update its layout. å½“åˆ›å»ºä¸€ä¸ªè§†å›¾ï¼Œé€‚å½“çš„å±æ€§å€¼åˆ†é…ç»™autoresizingMaskï¼Œä»¥ç¡®ä¿è§†å›¾å°ºå¯¸æ­£ç¡®ã€‚è§†å›¾è°ƒæ•´ä¸»è¦å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºçš„æ¥å£çš„æ–¹å‘å˜åŒ–ï¼Œä½†ä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨å…¶ä»–æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨setNeedsLayoutæ–¹æ³•è¿«ä½¿ä½ çš„è§†å›¾æ›´æ–°å®ƒçš„å¸ƒå±€ã€‚ ğŸ“Œ The View Drawing Cycleã€Œç»˜åˆ¶å‘¨æœŸã€ View drawing occurs on an as-needed basis. When a view is first shown, or when all or part of it becomes visible due to layout changes, the system asks the view to draw its contents. For views that contain custom content using UIKit or Core Graphics, the system calls the viewâ€™s drawRect: method. Your implementation of this method is responsible for drawing the viewâ€™s content into the current graphics context, which is set up by the system automatically prior to calling this method. This creates a static visual representation of your viewâ€™s content that can then be displayed on the screen. Viewç»˜ç”»å‘ç”Ÿåœ¨éœ€è¦æ—¶ã€‚å½“ä¸€ä¸ªviewç¬¬ä¸€æ¬¡å±•ç¤ºæ—¶ï¼Œæˆ–è€…åœ¨å¸ƒå±€å˜åŒ–æ—¶ï¼Œå®ƒçš„æ•´ä½“æˆ–éƒ¨åˆ†å˜å¾—å¯è§æ—¶ï¼Œç³»ç»Ÿè¯·æ±‚viewç»˜å‡ºå®ƒçš„å†…å®¹ã€‚å¯¹é‚£äº›ä½¿ç”¨UIKitæˆ–Core GraphicsåŒ…å«è‡ªå®šä¹‰å†…å®¹çš„viewæ¥è¯´ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å®ƒçš„ drawRect: æ–¹æ³•ã€‚ä½ å¯¹è¯¥æ–¹æ³•çš„å®ç°ï¼Œè´Ÿè´£å°†viewçš„å†…å®¹ç”»è¿›å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡(graphics context),ç³»ç»Ÿè‡ªåŠ¨ä¼˜å…ˆè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¿™é‡Œåˆ›å»ºäº†viewå†…å®¹çš„é™æ€å¯è§†å±•ç°ï¼Œæ¥ç€ä¼šè¢«å±•ç¤ºåœ¨å±å¹•ä¸Šã€‚ ğŸ·When the actual content of your view changes, it is your responsibility to notify the system that your view needs to be redrawn. You do this by calling your viewâ€™s setNeedsDisplay or setNeedsDisplayInRect: method of the view. These methods let the system know that it should update the view during the next drawing cycle. Because it waits until the next drawing cycle to update the view, you can call these methods on multiple views to update them at the same time. å½“viewçš„çœŸå®å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½ æœ‰è´£ä»»é€šçŸ¥ç³»ç»Ÿä½ çš„viewéœ€è¦é‡ç»˜ã€‚é€šè¿‡è°ƒç”¨viewçš„ setNeedsDisplay æˆ–setNeedsDisplayInRect: æ–¹æ³•æ¥é€šçŸ¥ã€‚è¿™äº›æ–¹æ³•è®©ç³»ç»ŸçŸ¥é“å®ƒåº”è¯¥åœ¨ä¸‹æ¬¡ç»˜ç”»å‘¨æœŸæ›´æ–°View.å› ä¸ºå®ƒä¸€ç›´ç­‰å¾…ç›´åˆ°ä¸‹æ¬¡ç»˜ç”»å‘¨æœŸæ¥æ›´æ–°Viewï¼Œä½ å¯ä»¥åœ¨å¤šä¸ªviewä¸Šè°ƒç”¨è¿™äº›æ–¹æ³•ï¼ŒåŒæ—¶æ›´æ–°å®ƒä»¬. NoteIf you are using OpenGL ES to do your drawing, you should use the GLKView class instead of subclassing UIView. For more information about how to draw using OpenGL ES, see OpenGL ES Programming Guide . æ³¨æ„å¦‚æœä½ ç”¨OpenGL ESæ¥ç»˜ç”»ï¼Œåº”è¯¥ç”¨GLKViewç±»æ¥ä»£æ›¿UIView.æ›´å¤šä¿¡æ¯å…³äºå¦‚ä½•ç”¨OpenGL ESç»˜ç”»ï¼Œå‚è§ iOS OpenGL ESç¼–ç¨‹å‘å¯¼ï¼ˆsee OpenGL ES Programming Guideï¼‰ For detailed information about the view drawing cycle and the role your views have in this cycle, see View Programming Guide for iOS.æ›´å¤šå…³äºViewç»˜ç”»å‘¨æœŸå’Œä½ çš„viewçš„è§’è‰²ï¼Œå‚è§iOS Viewç¼–ç¨‹å‘å¯¼(View Programming Guide for iOS.) ğŸ“Œ Animationsã€ŒåŠ¨ç”»ã€ Changes to several view properties can be animatedâ€”that is, changing the property creates an animation that conveys the change to the user over a short period of time. The UIView class does most of the work of performing the actual animations but you must still indicate which property changes you want to be animated. There are two different ways to initiate animations: In iOS 4 and later, use the block-based animation methods. (Recommended) Use the begin/commit animation methods. æ”¹å˜å¤šä¸ªViewå±æ€§å¯ä»¥è¢«åŠ¨ç”»å±•ç°ï¼Œåœ¨ä¸€ä¸ªçŸ­å‘¨æœŸæ—¶é—´å†…ï¼Œæ”¹å˜å±æ€§å¯ä»¥åˆ›å»ºåŠ¨ç”»ã€‚UIViewç±»åšäº†å¾ˆå¤šæ‰§è¡ŒåŠ¨ç”»çš„å·¥ä½œï¼Œä½†ä½ ä»ç„¶å¿…é¡»åˆ¤æ–­ä½ éœ€è¦å“ªäº›å±æ€§æ”¹å˜è¢«åŠ¨ç”»ã€‚ä¸‹é¢æ˜¯ä¸¤ç§ä¸åŒçš„åˆå§‹åŒ–åŠ¨ç”»æ–¹æ³•ï¼š åœ¨iOS4.0åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨åŸºäºå—çš„åŠ¨ç”»æ–¹æ³•(æ¨è) ä½¿ç”¨å¼€å§‹/æäº¤(begin/commit)åŠ¨ç”»æ–¹æ³•ã€‚ ğŸ·The block-based animation methods (such as animateWithDuration:animations: ) greatly simplify the creation of animations. With one method call, you specify the animations to be performed and the options for the animation. However, block-based animations are available only in iOS 4 and later. If your application runs on earlier versions of iOS, you must use the beginAnimations:context: and commitAnimations class methods to mark the beginning and ending of your animations. åŸºäºå—çš„åŠ¨ç”»æ–¹æ³•(åƒ animateWithDuration:animations: )æå¤§åœ°ç®€åŒ–äº†åŠ¨ç”»åˆ›å»ºã€‚åªè¦è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼ŒæŒ‡å®šåŠ¨ç”»çš„å‚æ•°ï¼Œå¹¶ä¸”æ‰§è¡ŒåŠ¨ç”»ã€‚ç„¶åï¼ŒåŸºäºå—çš„åŠ¨ç”»ä»…åœ¨iOS4åŠä»¥åç‰ˆæœ¬ä¸­å¯ç”¨ã€‚å¦‚æœä½ çš„è®¾å¤‡è¿è¡Œè€ç‰ˆæœ¬çš„iOS,å¿…é¡»ä½¿ç”¨ beginAnimations:context: å’Œ commitAnimations ç±»æ–¹æ³•æ ‡è®°åŠ¨ç”»å¼€å§‹å’Œç»“æŸã€‚ The following properties of the UIView class are animatable: frame bounds center transform alpha backgroundColor å¯ä»¥åšæˆåŠ¨ç”»UIViewç±»çš„å±æ€§å¦‚ä¸‹: @property frame @property bounds @property center @property transform @property alpha @property backgroundColor For more information about how to configure animations, see View Programming Guide for iOS .æ›´å¤šå…³äºå¦‚ä½•é…ç½®åŠ¨ç”»ï¼Œè¯·å‚è§è§†å›¾iOSç¼–ç¨‹æŒ‡å— View Programming Guide for iOS ã€‚ ğŸ“Œ Threading Considerationsã€Œçº¿ç¨‹æ³¨æ„äº‹é¡¹ã€ Manipulations to your applicationâ€™s user interface must occur on the main thread. Thus, you should always call the methods of the UIView class from code running in the main thread of your application. The only time this may not be strictly necessary is when creating the view object itself but all other manipulations should occur on the main thread. æ“ä½œç”¨æˆ·ç•Œé¢å¿…é¡»å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ã€‚å› æ­¤ï¼Œä½ å¿…é¡»åœ¨åº”ç”¨ä¸»çº¿ç¨‹è°ƒç”¨UIViewç±»çš„æ–¹æ³•ã€‚åªæœ‰åœ¨åˆ›å»ºviewå¯¹è±¡è‡ªèº«æ—¶å¯ä»¥ä¸ç”¨ä¸¥æ ¼éµå®ˆï¼Œä½†å…¶ä»–æ“ä½œå¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ã€‚ ğŸ“Œ Subclassing Notesã€Œå­ç±»åŒ–(ç»§æ‰¿)è¯´æ˜ã€ The UIView class is a key subclassing point for visual content that also requires user interactions. Although there are many good reasons to subclass UIView, it is recommended that you do so only when the basic UIView class or the standard system views do not provide the capabilities that you need. Subclassing requires more work on your part to implement the view and to tune its performance. å¯¹åŒæ ·éœ€è¦ç”¨æˆ·äº¤äº’çš„å¯è§å†…å®¹æ¥è¯´ï¼ŒUIViewç±»æ˜¯ä¸€ä¸ªå…³é”®çš„å­ç±»åŒ–ç‚¹ã€‚å°½ç®¡æœ‰å¾ˆå¤šå¥½ç†ç”±ç»§æ‰¿UIViewï¼Œä½†æˆ‘ä»¬åªæ¨èåœ¨åŸºæœ¬çš„UIViewå’Œç³»ç»Ÿè‡ªå¸¦çš„å…¶ä»–ç»„ä»¶ä¸èƒ½æ»¡è¶³éœ€è¦æ—¶ç»§æ‰¿UIView.ç»§æ‰¿UIViewä¼šåœ¨ä½ å®ç°çš„ä»£ç é‡Œæ¶ˆè€—æ›´å¤šæ€§èƒ½.(Appleå†™çš„ä»£ç æ¯”ä½ çš„æ›´å¥½ï¼Œæœ‰ç°æˆçš„å°±ç”¨ç°æˆçš„)ã€‚ For information about ways to avoid subclassing, see Alternatives to Subclassing .æ›´å¤šå…³äºå­ç±»åŒ–ä¿¡æ¯ï¼Œè¯·å‚è§é€‰æ‹©å­ç±»åŒ– Alternatives to Subclassingã€‚ ğŸ“Œ Methods to Overrideã€Œè¦†ç›–æ–¹æ³•ã€ When subclassing UIView, there are only a handful of methods you should override and many methods that you might override depending on your needs. Because UIView is a highly configurable class, there are also many ways to implement sophisticated view behaviors without overriding custom methods, which are discussed in the Alternatives to Subclassing section. In the meantime, the following list includes the methods you might consider overriding in your UIView subclasses: Initialization: initWithFrame: - It is recommended that you implement this method. You can also implement custom initialization methods in addition to, or instead of, this method. initWithCoder: - Implement this method if you load your view from an Interface Builder nib file and your view requires custom initialization. layerClass Use this property only if you want your view to use a different Core Animation layer for its backing store. For example, if your view uses tiling to display a large scrollable area, you might want to set the property to the CATiledLayer class. Drawing and printing: drawRect: - Implement this method if your view draws custom content. If your view does not do any custom drawing, avoid overriding this method. drawRect:forViewPrintFormatter: - Implement this method only if you want to draw your viewâ€™s content differently during printing. Constraints: requiresConstraintBasedLayout Use this property if your view class requires constraints to work properly. updateConstraints - Implement this method if your view needs to create custom constraints between your subviews. alignmentRectForFrame:, frameForAlignmentRect: - Implement these methods to override how your views are aligned to other views. Layout: sizeThatFits: - Implement this method if you want your view to have a different default size than it normally would during resizing operations. For example, you might use this method to prevent your view from shrinking to the point where subviews cannot be displayed correctly. layoutSubviews - Implement this method if you need more precise control over the layout of your subviews than either the constraint or autoresizing behaviors provide. didAddSubview: , willRemoveSubview: - Implement these methods as needed to track the additions and removals of subviews. willMoveToSuperview:, didMoveToSuperview - Implement these methods as needed to track the movement of the current view in your view hierarchy. willMoveToWindow: , didMoveToWindow - Implement these methods as needed to track the movement of your view to a different window. Event Handling: touchesBegan:withEvent:, touchesMoved:withEvent:, touchesEnded:withEvent: , touchesCancelled:withEvent: - Implement these methods if you need to handle touch events directly. (For gesture-based input, use gesture recognizers.) gestureRecognizerShouldBegin: - Implement this method if your view handles touch events directly and might want to prevent attached gesture recognizers from triggering additional actions. å½“å­ç±»åŒ– UIView æ—¶ï¼Œåªæœ‰å°‘æ•°çš„æ–¹æ³•ä½ å¿…é¡»è¦†ç›–ï¼Œå¤§å¤šæ•°æ–¹æ³•ä½ å¯ä»¥æŒ‰éœ€è¦†ç›–ã€‚å› ä¸ºUIViewæ˜¯ä¸€ä¸ªé«˜åº¦å¯é…çš„ç±»ï¼Œä¸ç”¨è¦†ç›–çˆ¶ç±»æ–¹æ³•ï¼ŒåŒæ ·æœ‰å¾ˆå¤šå®ç°å¤æ‚çš„è¡Œä¸ºçš„é€”å¾„ï¼Œè¿™äº›åœ¨ é€‰æ‹©å­ç±»åŒ– ä¸€èŠ‚ä¸­ä»‹ç»ã€‚ä½ å¯ä»¥åœ¨ä½ çš„UIViewå­ç±»ä¸­è€ƒè™‘è¦†ç›–ä¸‹é¢åˆ—è¡¨ä¸­çš„æ–¹æ³•ï¼š åˆå§‹åŒ– initWithFrame : æ¨èè¦†ç›–ã€‚ä½ åŒæ ·å¯ä»¥å®ç°è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•æ·»åŠ æˆ–ä»£æ›¿æ­¤æ–¹æ³• initWithCoder : å¦‚æœä½ ä»ä¸€ä¸ªInterface Builderçš„nibæ–‡ä»¶åŠ è½½viewï¼Œå¹¶ä¸”éœ€è¦è‡ªå®šä¹‰åˆå§‹åŒ–ï¼Œè¦†ç›–è¯¥æ–¹æ³•ã€‚ layerClass : ä»…å½“ä½ çš„viewéœ€è¦ç”¨ä¸åŒçš„Core Animationå±‚åå¤‡ä¿å­˜æ—¶æ‰è¦è¦†ç›–ã€‚ä¾‹å¦‚ï¼Œå½“ä½ çš„viewéœ€è¦ç”¨å¹³é“ºæ–¹å¼æ˜¾ç¤ºä¸€å—å¾ˆå¤§çš„å¯æ»šåŠ¨åŒºåŸŸæ—¶ï¼Œä½ å¯èƒ½æƒ³è¦è¦†ç›–è¯¥æ–¹æ³•è¿”å›CATiledLayerç±».(è¿™é‡Œä¸æ˜¯å¾ˆæ˜ç™½) ç»˜ç”»å’Œæ‰“å° drawRect : å¦‚æœä½ çš„Viewç”»è‡ªå®šä¹‰çš„å†…å®¹ï¼Œå°±è¦å®ç°è¯¥æ–¹æ³•ï¼Œå¦åˆ™é¿å…è¦†ç›–è¯¥æ–¹æ³•ã€‚ drawRect : forViewPrintFormatter:ä»…å½“ä½ éœ€è¦åœ¨æ‰“å°æ—¶ï¼Œæ‰“å°ä¸åŒå†…å®¹(ä¸æ˜¾ç¤ºä¸åŒ)æ‰éœ€è¦å®ç°è¯¥æ–¹æ³•ã€‚ çº¦æŸ requiresConstraintBasedLayout : â€“ å¦‚æœä½ çš„Viewç±»éœ€è¦çº¦æŸæ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œå®ç°è¯¥æ–¹æ³• updateConstraints : å¦‚æœä½ çš„viewéœ€è¦åœ¨å­viewé—´åˆ›å»ºçº¦æŸï¼Œéœ€è¦å®ç°è¯¥æ–¹æ³• alignmentRectForFrame :, frameForAlignmentRect:â€“ å®ç°è¿™äº›æ–¹æ³•è¦†ç›–ä½ çš„viewå¦‚ä½•ä¸å…¶ä»–viewå¯¹é½ å¸ƒå±€ sizeThatFits :: â€“ å½“ä½ æƒ³åœ¨æ‰§è¡Œresizeæ“ä½œæ—¶æœ‰ä¸€ä¸ªä¸åŒäºé»˜è®¤çš„sizeï¼Œå®ç°è¯¥æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œä½ å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•é˜»æ­¢viewæ”¶ç¼©åˆ°å­viewä¸èƒ½æ­£ç¡®æ˜¾ç¤ºçš„ç‚¹ layoutSubviews : â€“ å¦‚æœä½ éœ€è¦æ›´ç²¾ç¡®æ§åˆ¶å­viewï¼Œè€Œä¸æ˜¯ä½¿ç”¨é™åˆ¶æˆ–autoresizingè¡Œä¸ºï¼Œå°±éœ€è¦å®ç°è¯¥æ–¹æ³•ã€‚ didAddSubview :: , willRemoveSubview:è·Ÿè¸ªå­viewæ·»åŠ æˆ–åˆ é™¤äº‹ä»¶ willMoveToSuperview :, didMoveToSuperview è·Ÿè¸ªå½“å‰viewåœ¨viewå±‚æ¬¡é‡Œçš„è¿åŠ¨ willMoveToWindow :,didMoveToWindow è·Ÿè¸ªview(å³å°†æˆ–å·²ç»)ç§»åŠ¨åˆ°å¦ä¸€ä¸ªWindow äº‹ä»¶å¤„ç†: touchesBegan:withEvent :, touchesMoved:withEvent:, touchesEnded:withEvent:,touchesCancelled:withEvent: ç›´æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶(å¦‚æœæ˜¯æ‰‹åŠ¿ï¼Œä½¿ç”¨gesture recognizers) gestureRecognizerShouldBegin : å¦‚æœéœ€è¦ç›´æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆéœ€è¦è¦†ç›–è¯¥æ–¹æ³•ï¼Œé˜»æ­¢æ‰‹åŠ¿è¯†åˆ«å™¨è§¦å‘é¢å¤–åŠ¨ä½œã€‚ ğŸ“Œ Alternatives to Subclassingã€Œæ›¿ä»£å­ç±»åŒ–ã€Many view behaviors can be configured without the need for subclassing. Before you start overriding methods, consider whether modifying the following properties or behaviors would provide the behavior you need. addConstraint: - Define automatic layout behavior for the view and its subviews. autoresizingMask: - Provides automatic layout behavior when the superviewâ€™s frame changes. These behaviors can be combined with constraints. contentMode: - Provides layout behavior for the viewâ€™s content, as opposed to the frame of the view. This property also affects how the content is scaled to fit the view and whether it is cached or redrawn. hidden or alpha: - Change the transparency of the view as a whole rather than hiding or applying alpha to your viewâ€™s rendered content. backgroundColor: - Set the viewâ€™s color rather than drawing that color yourself. Subviews - Rather than draw your content using a drawRect: method, embed image and label subviews with the content you want to present. Gesture recognizers - Rather than subclass to intercept and handle touch events yourself, you can use gesture recognizers to send an Target-Action to a target object. Animations - Use the built-in animation support rather than trying to animate changes yourself. The animation support provided by Core Animation is fast and easy to use. Image-based backgrounds - For views that display relatively static content, consider using a UIImageView object with gesture recognizers instead of subclassing and drawing the image yourself. Alternatively, you can also use a generic UIView object and assign your image as the content of the viewâ€™s CALayer object. å¾ˆå¤šviewè¡Œä¸ºå¯ä»¥é…ç½®è€Œä¸ç”¨å­ç±»åŒ–ã€‚åœ¨ä½ å¼€å§‹è¦†ç›–è¿™äº›æ–¹æ³•æ—¶ï¼Œè€ƒè™‘æ˜¯å¦å¯ä»¥ä¿®æ”¹ä¸‹é¢çš„å±æ€§æˆ–è¡Œä¸ºæ¥æä¾›ä½ éœ€è¦çš„åŠŸèƒ½ã€‚ addConstraint: â€“ ä¸ºviewå’Œå®ƒçš„å­viewå®šä¹‰è‡ªåŠ¨å¸ƒå±€è¡Œä¸º. autoresizingMask: â€“ å½“çˆ¶viewçš„frameæ”¹å˜æ—¶ï¼Œæä¾›è‡ªåŠ¨å¸ƒå±€è¡Œä¸ºã€‚è¿™äº›è¡Œä¸ºå¯ä»¥å’Œçº¦æŸ(Constraint)åˆå¹¶ contentMode: -ä¸ºviewå†…å®¹æä¾›å¸ƒå±€è¡Œä¸ºï¼Œä¸viewçš„frameç›¸åã€‚è¿™ä¸ªå±æ€§åŒæ ·å½±å“å†…å®¹åº”ç”¨viewçš„ç¼©æ”¾ï¼Œæ˜¯ç¼“å­˜è¿˜æ˜¯é‡ç»˜ã€‚ contentStretch:-å®šä¹‰viewçš„éƒ¨åˆ†å¯ä¼¸ç¼©ã€‚è¿™ä¸ªè¡Œä¸ºé€šå¸¸ç”¨äºå®ç°æŒ‰é’®å’Œå…¶ä»–å¤æ‚å¸ƒå±€ã€å¯å˜å°ºå¯¸ã€é‡ç»˜ä»£ä»·é«˜çš„viewã€‚ hidden æˆ– alpha: æ”¹å˜viewçš„ä¸é€æ˜åº¦æˆ–éšè—view backgroundColor: â€“ è®¾ç½®viewçš„èƒŒæ™¯é¢œè‰² Subviews:ä¸åœ¨drawRectæ–¹æ³•é‡Œç»˜åˆ¶ä½ çš„å†…å®¹ï¼Œä½¿ç”¨åµŒå…¥å›¾ç‰‡æˆ–æ–‡æœ¬å­viewç­‰æ–¹å¼ Gesture recognizers: â€“ ä½¿ç”¨æ‰‹åŠ¿è¯†åˆ«å™¨æ›¿ä»£è‡ªå·±æ‰‹å·¥å¤„ç†touchäº‹ä»¶ Animations:â€“ ä½¿ç”¨å†…å»ºåŠ¨ç”»æ”¯æŒä»£æ›¿è‡ªå·±å†™åŠ¨ç”»ã€‚Core Animationæä¾›çš„åŠ¨ç”»æ”¯æŒå¾ˆå¿«å¾ˆå¥½ç”¨ åŸºäºå›¾ç‰‡çš„èƒŒæ™¯ â€“ å¯¹é‚£äº›æ˜¾ç¤ºç›¸å¯¹é™æ€å†…å®¹çš„viewæ¥è¯´ï¼Œè€ƒè™‘ä½¿ç”¨UIImageViewå¯¹è±¡åŠ ä¸Šæ‰‹åŠ¿è¯†åˆ«æ›¿ä»£å­ç±»åŒ–å’Œè‡ªå·±ç»˜åˆ¶å›¾ç‰‡ã€‚åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„UIViewå¯¹è±¡ï¼Œåˆ†é…ä½ çš„å›¾ç‰‡ä½œä¸ºviewçš„CALayerå¯¹è±¡å†…å®¹ã€‚ ğŸ·Animations are another way to make visible changes to a view without requiring you to subclass and implement complex drawing code. Many properties of the UIView class are animatable, which means changes to those properties can trigger system-generated animations. Starting animations requires as little as one line of code to indicate that any changes that follow should be animated. For more information about animation support for views, see Animations. åŠ¨ç”»æ˜¯ä¸éœ€è¦å­ç±»åŒ–å’Œå®ç°å¤æ‚ä»£ç è€Œè®©è§†è§‰æ”¹å˜çš„å¦ä¸€ç§æ–¹å¼ã€‚å¾ˆå¤šUIViewçš„å±æ€§æ˜¯å¯ä»¥åŠ¨ç”»çš„ï¼Œæ„å‘³ç€æ”¹å˜è¿™äº›å±æ€§å¯ä»¥è§¦å‘ç³»ç»Ÿç”ŸæˆåŠ¨ç”»ã€‚å¯åŠ¨åŠ¨ç”»åªéœ€è¦å¾ˆå°‘çš„ä¸€è¡Œä»£ç æŒ‡ç¤ºé‚£äº›æ”¹å˜éœ€è¦è¢«åŠ¨ç”»ã€‚æ›´å¤šviewåŠ¨ç”»çš„ä¿¡æ¯ï¼Œå‚è€ƒ Animations For more information about appearance and behavior configuration, see About Views in UIKit User Interface Catalog .æ›´å¤šå…³äºå¤–è§‚å’Œè¡Œä¸ºé…ç½®çš„ä¿¡æ¯ï¼Œè§ UIKit User Interface Catalog ç›®å½•é‡Œçš„ About Views ğŸ“Œ Initializing a View Objectã€Œåˆå§‹åŒ–Viewå¯¹è±¡ã€ - initWithFrame: ä½¿ç”¨æŒ‡å®šçš„frameçŸ©å½¢ï¼Œåˆå§‹åŒ–å¹¶ä¸”è¿”å›æ–°çš„Viewå¯¹è±¡ã€‚ å£°æ˜ï¼šSWIFT:1init(frame aRect: CGRect) OBJECTIVE-C: 1- (instancetype)initWithFrame:(CGRect)frame å‚æ•°aRect viewçš„frameçŸ©å½¢ï¼Œä½¿ç”¨pointæµ‹é‡ã€‚frameçš„åŸç‚¹æ˜¯ç›¸å¯¹ä½ å°†æ·»åŠ åˆ°çš„çˆ¶viewçš„ã€‚è¿™ä¸ªæ–¹æ³•ç”¨frameçŸ©å½¢æ¥è®¾ç½®ä¸­å¿ƒç‚¹å’Œè¾¹ç•Œã€‚ è¿”å›å€¼ï¼šä¸€ä¸ªåˆå§‹åŒ–çš„å¯¹è±¡ï¼Œå¦‚æœä¸èƒ½åˆ›å»ºï¼Œè¿”å›nil. è¯´æ˜ï¼šä¸€ä¸ªæ–°çš„viewå¯¹è±¡å¿…é¡»æ’å…¥åˆ°ä¸€ä¸ªwindowsçš„viewå±‚çº§é‡Œæ‰èƒ½ä½¿ç”¨ã€‚å¦‚æœä½ ç”¨ç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªviewå¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯UIViewç±»çš„æŒ‡å®šåˆå§‹å™¨ã€‚å­ç±»å¯ä»¥è¦†ç›–è¿™ä¸ªæ–¹æ³•æ¥æ‰§è¡Œä¸€äº›è‡ªå®šä¹‰çš„åˆå§‹åŒ–ï¼Œä½†å¿…é¡»åœ¨ç¬¬ä¸€è¡Œè°ƒç”¨superå®ç°ã€‚å¦‚æœä½ ç”¨Interface Builderæ¥è®¾è®¡ä½ çš„ç•Œé¢ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ä»nibæ–‡ä»¶åˆ›å»ºviewå¯¹è±¡æ—¶ä¸ä¼šè¢«è°ƒç”¨ã€‚nibé‡Œçš„å¯¹è±¡ä½¿ç”¨initWithCoder:æ–¹æ³•é‡å»ºå’Œåˆå§‹åŒ–ï¼Œå®ƒä¼šä¿®æ”¹viewå±æ€§æ¥åŒ¹é…å­˜å‚¨åœ¨nibæ–‡ä»¶é‡Œçš„å±æ€§ã€‚å…³äºviewå¦‚ä½•ä»nibæ–‡ä»¶è½½å…¥çš„è¯¦ç»†ä¿¡æ¯ï¼Œå‚è§ Resource Programming Guide. ğŸ“Œ é…ç½®Viewçš„å¯è§å¤–è§‚ ğŸ· - backgroundColor: Viewçš„èƒŒæ™¯é¢œè‰² å£°æ˜SWIFT:1@NSCopying var backgroundColor: UIColor? OBJECTIVE-C1@property(nonatomic, copy) UIColor *backgroundColor è¯´æ˜:æ”¹å˜è¿™ä¸ªå±æ€§å¯ä»¥åŠ¨ç”»ï¼Œé»˜è®¤å€¼æ˜¯nil,è¡¨ç°ä¸ºé€æ˜ã€‚ æ‰©å±• alpha opaque ğŸ· hiddenï¼šä¸€ä¸ªåˆ¤æ–­viewæ˜¯å¦éšè—çš„boolå€¼ å£°æ˜SWIFT:1var hidden: Bool OBJECTIVE-C1@property(nonatomic, getter=isHidden) BOOL hidden è¯´æ˜:è®¾ç½®è¿™ä¸ªå€¼ä¸ºYESéšè—view,NOæ˜¾ç¤ºView,é»˜è®¤æ˜¯NOä¸€ä¸ªéšè—çš„viewä»çª—å£æ¶ˆå¤±å¹¶ä¸”ä¸æ¥æ”¶è¾“å…¥äº‹ä»¶ã€‚ç„¶è€Œï¼Œå®ƒè¿˜ç•™åœ¨å®ƒçš„çˆ¶viewçš„å­viewåˆ—è¡¨ä¸­ï¼Œå¹¶ä¸”è·Ÿå¾€å¸¸ä¸€æ ·å‚ä¸autoresizingã€‚éšè—ä¸€ä¸ªå¸¦æœ‰å­viewçš„view,è·Ÿéšè—è¿™äº›å­view(åŒ…æ‹¬ä»–ä»¬çš„å­viewï¼‰æœ‰ä¸€æ ·çš„æ•ˆæœã€‚è¿™ä¸ªæ•ˆæœæ˜¯å«è“„çš„å¹¶ä¸”ä¸ä¼šä¿®æ”¹å­viewçš„hiddenå±æ€§.å¦‚æœéšè—çš„viewæ˜¯çª—å£çš„å½“å‰ç¬¬ä¸€å“åº”è€…ï¼Œä¼šå¯¼è‡´ä¸‹ä¸€ä¸ªviewæˆä¸ºç¬¬ä¸€å“åº”è€…(å¾—åˆ°ç„¦ç‚¹ï¼Œæ˜¯è¿™ä¸ªæ„æ€ä¹ˆï¼Ÿ) å‚è€ƒåŸè‘—ï¼šhttps://www.pocketdigi.com/20150105/1413.html ğŸ· alpha: Viewçš„ä¸é€æ˜åº¦ å£°æ˜SWIFT:1var alpha: CGFloat OBJECTIVE-C1@property(nonatomic) CGFloat alpha è¯´æ˜:è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼ŒèŒƒå›´ä»0.0åˆ°1.0,0.0ä»£è¡¨å®Œå…¨é€æ˜ï¼Œ1.0ä»£è¡¨å®Œå…¨ä¸é€æ˜ã€‚è¿™ä¸ªå€¼åªèƒ½å½“å‰viewæœ‰æ•ˆï¼Œä¸å½±å“å†…åµŒçš„å­view æ”¹å˜è¿™ä¸ªå±æ€§å¯ä»¥åŠ¨ç”» æ‰©å±• backgroundColor opaque ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MJExtensionæ¡†æ¶å­¦ä¹ ]]></title>
    <url>%2FSourceAnnotations%2FMJExtensionLibrary.html</url>
    <content type="text"><![CDATA[MJExtensionå­—å…¸è½¬æ¨¡å‹æ¡†æ¶1234A fast, convenient and nonintrusive conversion between JSON and model.è½¬æ¢é€Ÿåº¦å¿«ã€ä½¿ç”¨ç®€å•æ–¹ä¾¿çš„å­—å…¸è½¬æ¨¡å‹æ¡†æ¶ Contents ä½œç”¨12345678910111213141516171819201.MJExtensionæ˜¯ä¸€å¥—å­—å…¸å’Œæ¨¡å‹ä¹‹é—´äº’ç›¸è½¬æ¢çš„è¶…è½»é‡çº§æ¡†æ¶2.JSON --&gt; Modelã€Core Data Model3.JSONString --&gt; Modelã€Core Data Model4.Modelã€Core Data Model --&gt; JSON5.JSON Array --&gt; Model Arrayã€Core Data Model Array6.JSONString --&gt; Model Arrayã€Core Data Model Array7.Model Arrayã€Core Data Model Array --&gt; JSON Array8.Coding all properties of model in one line code.åªéœ€è¦ä¸€è¡Œä»£ç ï¼Œå°±èƒ½å®ç°æ¨¡å‹çš„æ‰€æœ‰å±æ€§è¿›è¡ŒCodingï¼ˆå½’æ¡£å’Œè§£æ¡£ï¼‰1.ç®€å•çš„å­—å…¸ --&gt; æ¨¡å‹2.JSONå­—ç¬¦ä¸² --&gt; æ¨¡å‹3.å¤æ‚çš„å­—å…¸ --&gt; æ¨¡å‹ (æ¨¡å‹é‡Œé¢åŒ…å«äº†æ¨¡å‹)4.å¤æ‚çš„å­—å…¸ --&gt; æ¨¡å‹ (æ¨¡å‹çš„æ•°ç»„å±æ€§é‡Œé¢åˆè£…ç€æ¨¡å‹)5.å¤æ‚çš„å­—å…¸ --&gt; æ¨¡å‹ï¼ˆæ¨¡å‹å±æ€§åå’Œå­—å…¸çš„keyä¸ä¸€æ ·ï¼‰6.å­—å…¸æ•°ç»„ --&gt; æ¨¡å‹æ•°ç»„7.æ¨¡å‹ --&gt; å­—å…¸8.æ¨¡å‹æ•°ç»„ --&gt; å­—å…¸æ•°ç»„9.å­—å…¸ --&gt; CoreDataæ¨¡å‹10.å½’æ¡£ä¸è§£æ¡£NSCoding11.è¿‡æ»¤å­—å…¸çš„å€¼ å®‰è£…12345ä½¿ç”¨CocoaPods `pod 'MJExtension'`æ‰‹åŠ¨å¯¼å…¥1.å°†`MJExtension`æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æºä»£ç æ‹½å…¥é¡¹ç›®ä¸­2.å¯¼å…¥ä¸»å¤´æ–‡ä»¶ï¼š`#import "MJExtension.h"` Getting Startedã€å¼€å§‹ä½¿ç”¨ã€‘ 1.JSON -&gt; Modelã€æœ€ç®€å•çš„å­—å…¸è½¬æ¨¡å‹ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectWithKeyValues:12345678910111213141516171819202122232425262728æ¨¡å‹ç±»Userå®šä¹‰typedef enum &#123; SexMale, SexFemale&#125; Sex;@interface User : NSObject@property (copy, nonatomic) NSString *name;/* å§“å */@property (copy, nonatomic) NSString *icon;/* å¤´åƒ */@property (assign, nonatomic) unsigned int age;/* å¹´é¾„ */@property (copy, nonatomic) NSString *height;/* èº«é«˜ */@property (strong, nonatomic) NSNumber *money;/* èµ„äº§ */@property (assign, nonatomic) Sex sex;/* æ€§åˆ« */@property (assign, nonatomic, getter=isGay) BOOL gay;/* æ˜¯å¦æ˜¯åŒæ€§æ‹ */@end// ç®€å•çš„å­—å…¸ NSDictionary *dict_user = @&#123; @"name" : @"Jack", @"icon" : @"lufy.png", @"age" : @20, @"height" : @"1.55", @"money" : @100.9, @"sex" : @(SexFemale),/* æšä¸¾éœ€è¦ä½¿ç”¨NSNumberåŒ…è£… */ @"gay" : @YES &#125;; User *user = [User mj_objectWithKeyValues:dict_user]; NSLog(@"MJ-%@-%@-%u-%@-%@-%u-%d",user.name,user.icon,user.age,user.height,user.money,user.sex,user.gay);//æ‰“å°ç»“æœ//2016-07-04 11:06:59.746 PPDemos[2432:73824] MJ-Jack-lufy.png-20-1.55-100.9-1-1 2.JSONString -&gt; Modelã€JSONå­—ç¬¦ä¸²è½¬æ¨¡å‹ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectWithKeyValues:123456// å®šä¹‰ä¸€ä¸ªJSONå­—ç¬¦ä¸² NSString *jsonStr = @"&#123;\"name\":\"Jack\", \"icon\":\"lufy.png\", \"age\":20&#125;"; User *user = [User mj_objectWithKeyValues:jsonStr]; NSLog(@"MJ---%@----%@---%u",user.name,user.icon,user.age); // æ‰“å°ç»“æœ // 2016-07-04 11:16:04.655 PPDemos[2563:78561] MJ---Jack----lufy.png---20 3.å¤æ‚çš„å­—å…¸ã€æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectWithKeyValues:123456789101112131415//å¤æ‚çš„å­—å…¸[æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹çš„å­—å…¸]NSDictionary *dict_m8m = @&#123; @"text" : @"Agree!Nice weather!", @"user" : @&#123; @"name" : @"Jack", @"icon" : @"lufy.png" &#125;, @"retweetedStatus" : @&#123; @"text" : @"Nice weather!", @"user" : @&#123; @"name" : @"Rose", @"icon" : @"nami.png" &#125; &#125; &#125;; 1234567891011121314151617181920212223#import &lt;Foundation/Foundation.h&gt;@class User;@class Status;//Statusæ¨¡å‹@interface Status : NSObject@property (copy, nonatomic) NSString *text;@property (strong, nonatomic) User *user;/* å…¶ä»–æ¨¡å‹ç±»å‹ */@property (strong, nonatomic) Status *retweetedStatus;/* è‡ªæˆ‘æ¨¡å‹ç±»å‹ */@end//// å­—å…¸è½¬æ¨¡å‹ï¼Œæ¨¡å‹é‡Œé¢å«æœ‰æ¨¡å‹ Status *status = [Status mj_objectWithKeyValues:dict_m8m]; NSString *text = status.text; NSString *name = status.user.name; NSString *icon = status.user.icon; NSLog(@"mj-----text=%@, name=%@, icon=%@", text, name, icon); NSString *text2 = status.retweetedStatus.text; NSString *name2 = status.retweetedStatus.user.name; NSString *icon2 = status.retweetedStatus.user.icon; NSLog(@"mj-----text2=%@, name2=%@, icon2=%@", text2, name2, icon2); // æ‰“å°ç»“æœ //2016-07-04 11:45:39.675 PPDemos[2781:87089] mj-----text=Agree!Nice weather!, name=Jack, icon=lufy.png //2016-07-04 11:45:39.675 PPDemos[2781:87089] mj-----text2=Nice weather!, name2=Rose, icon2=nami.png 4.ã€æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectWithKeyValues: å’Œmj_objectClassInArray12345678910111213141516171819@interface Ad : NSObject@property (copy, nonatomic) NSString *image;@property (copy, nonatomic) NSString *url;@end@interface StatusResult : NSObject/** æ•°ç»„ä¸­å­˜å‚¨æ¨¡å‹Statusç±»å‹æ•°æ® */@property (strong, nonatomic) NSMutableArray *statuses;/** æ•°ç»„ä¸­å­˜å‚¨æ¨¡å‹Adç±»å‹æ•°æ® */@property (strong, nonatomic) NSArray *ads;@property (strong, nonatomic) NSNumber *totalNumber;@end #import "StatusResult.h"#import "MJExtension.h"@implementation StatusResult/* æ•°ç»„ä¸­å­˜å‚¨æ¨¡å‹æ•°æ®ï¼Œéœ€è¦è¯´æ˜æ•°ç»„ä¸­å­˜å‚¨çš„æ¨¡å‹æ•°æ®ç±»å‹,å®ç°è¯¥æ–¹æ³• */+(NSDictionary *)mj_objectClassInArray&#123; return @&#123; @"statuses" : @"Status", @"ads" : @"Ad" &#125;;&#125;@end åœ¨VCé‡Œå®ç°ä»¥ä¸‹æ¥è§£ææ•°æ®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061//æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ NSDictionry *dict_m8a = @&#123; @"statuses" : @[ @&#123; @"text" : @"Nice weather!", @"user" : @&#123; @"name" : @"Rose", @"icon" : @"nami.png" &#125; &#125;, @&#123; @"text" : @"Go camping tomorrow!", @"user" : @&#123; @"name" : @"Jack", @"icon" : @"lufy.png" &#125; &#125; ], @"ads" : @[ @&#123; @"image" : @"ad01.png", @"url" : @"http://www.ad01.com" &#125;, @&#123; @"image" : @"ad02.png", @"url" : @"http://www.ad02.com" &#125; ], @"totalNumber" : @"2014" &#125;;ã€é‡ç‚¹ï¼Œæ ¸å¿ƒã€‘&gt;&gt;æ•°ç»„ä¸­å­˜å‚¨æ¨¡å‹æ•°æ®ï¼Œéœ€è¦è¯´æ˜æ•°ç»„ä¸­å­˜å‚¨çš„æ¨¡å‹æ•°æ®ç±»å‹&lt;&lt; /* [StatusResult mj_setupObjectClassInArray:^NSDictionary *&#123; return @&#123; @"statuses" : @"Status", // @"statuses" : [Status class], @"ads" : @"Ad" // @"ads" : [Ad class] &#125;; &#125;]; // Equals: StatusResult.m implements +mj_objectClassInArray method.*/ // ä»¥ä¸Šæ–¹æ³•åœ¨VCé‡Œå†™ï¼Œå¦‚æœå¤šä¸ªåœ°æ–¹è§£æè¯¥modelï¼Œå°±è¦å†™å¤šæ¬¡ï¼Œæœ€å¥½åœ¨modelçš„.mæ–‡ä»¶å†™ï¼ // å­—å…¸è½¬æ¨¡å‹ï¼Œæ”¯æŒæ¨¡å‹çš„æ•°ç»„å±æ€§é‡Œé¢åˆè£…ç€æ¨¡å‹ StatusResult *result = [StatusResult mj_objectWithKeyValues:dict_m8a]; // æ‰“å°åšä¸»ä¿¡æ¯ for (Status *status in result.statuses) &#123; NSString *text = status.text; NSString *name = status.user.name; NSString *icon = status.user.icon; NSLog(@"mj---text=%@, name=%@, icon=%@", text, name, icon); &#125; // æ‰“å°å¹¿å‘Š for (Ad *ad in result.ads) &#123; NSLog(@"mj---image=%@, url=%@", ad.image, ad.url); &#125;// æ‰“å°ç»“æœ//2016-07-04 13:47:58.994 PPDemos[3353:113055] mj---text=Nice weather!, name=Rose, icon=nami.png //2016-07-04 13:47:58.995 PPDemos[3353:113055] mj---text=Go camping tomorrow!, name=Jack, icon=lufy.png //2016-07-04 13:47:58.995 PPDemos[3353:113055] mj---image=ad01.png, url=http://www.ad01.com //2016-07-04 13:47:58.995 PPDemos[3353:113055] mj---image=ad02.png, url=http://www.ad02.com 5.ã€æ¨¡å‹ä¸­çš„å±æ€§åå’Œå­—å…¸ä¸­çš„keyä¸ç›¸åŒ(æˆ–è€…éœ€è¦å¤šçº§æ˜ å°„)ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectWithKeyValues: å’Œmj_replacedKeyFromPropertyName123456789101112131415161718192021222324252627282930@interface Bag : NSObject@property (copy, nonatomic) NSString *name;@property (assign, nonatomic) double price;@end#import &lt;Foundation/Foundation.h&gt;@class Bag;@interface Student : NSObject@property (copy, nonatomic) NSString *ID;@property (copy, nonatomic) NSString *desc;@property (copy, nonatomic) NSString *nowName;@property (copy, nonatomic) NSString *oldName;@property (copy, nonatomic) NSString *nameChangedTime;@property (strong, nonatomic) Bag *bag;@end// å¤šçº§æ˜ å°„ï¼Œç”¨ç‚¹è¯­æ³•è®¾ç½®@implementation Student/* è®¾ç½®æ¨¡å‹å±æ€§åå’Œå­—å…¸keyä¹‹é—´çš„æ˜ å°„å…³ç³» */+(NSDictionary *)mj_replacedKeyFromPropertyName&#123; /* è¿”å›çš„å­—å…¸ï¼Œkeyä¸ºæ¨¡å‹å±æ€§åï¼Œvalueä¸ºè½¬åŒ–çš„å­—å…¸çš„å¤šçº§key */ return @&#123; @"ID" : @"id", @"desc" : @"desciption", @"oldName" : @"name.oldName", @"nowName" : @"name.newName", @"nameChangedTime" : @"name.info[1].nameChangedTime", @"bag" : @"other.bag" &#125;;&#125;@end 1234567891011121314151617181920212223242526272829303132333435363738394041NSDictionry *dict_nokey = @&#123; @"id" : @"20", @"desciption" : @"kids", @"name" : @&#123; @"newName" : @"lufy", @"oldName" : @"kitty", @"info" : @[ @"test-data", @&#123; @"nameChangedTime" : @"2013-08" &#125; ] &#125;, @"other" : @&#123; @"bag" : @&#123; @"name" : @"a red bag", @"price" : @100.7 &#125; &#125; &#125;;//// // How to map// [Student mj_setupReplacedKeyFromPropertyName:^NSDictionary *&#123;// return @&#123;// @"ID" : @"id",// @"desc" : @"desciption",// @"oldName" : @"name.oldName",// @"nowName" : @"name.newName",// @"nameChangedTime" : @"name.info[1].nameChangedTime",// @"bag" : @"other.bag"// &#125;;// &#125;];// // Equals: Student.m implements +mj_replacedKeyFromPropertyName method. // å­—å…¸è½¬æ¨¡å‹ï¼Œæ”¯æŒå¤šçº§æ˜ å°„ Student *stu = [Student mj_objectWithKeyValues:dict_nokey]; // æ‰“å° NSLog(@"ID=%@, desc=%@, oldName=%@, nowName=%@, nameChangedTime=%@", stu.ID, stu.desc, stu.oldName, stu.nowName, stu.nameChangedTime); NSLog(@"bagName=%@, bagPrice=%f", stu.bag.name, stu.bag.price); //2016-07-04 14:20:28.082 PPDemos[3602:126004] ID=20, desc=kids, oldName=kitty, nowName=lufy, nameChangedTime=2013-08 //2016-07-04 14:20:28.082 PPDemos[3602:126004] bagName=a red bag, bagPrice=100.700000 6.ã€å°†ä¸€ä¸ªå­—å…¸æ•°ç»„è½¬æˆæ¨¡å‹æ•°ç»„ã€‘æ ¸å¿ƒæ–¹æ³•:mj_objectArrayWithKeyValuesArray:123456789101112131415161718NSArray *dictArray = @[ @&#123; @"name" : @"Jack", @"icon" : @"lufy.png" &#125;, @&#123; @"name" : @"Rose", @"icon" : @"nami.png" &#125; ]; // å­—å…¸æ•°ç»„è½¬æ¨¡å‹æ•°ç»„ï¼Œä½¿ç”¨çš„æ˜¯mj_objectArrayWithKeyValuesArray:æ–¹æ³• NSArray *userArray = [User mj_objectArrayWithKeyValuesArray:dictArray]; //æ‰“å° for (User *user in userArray) &#123; NSLog(@"name=%@, icon=%@", user.name, user.icon); &#125; // name=Jack, icon=lufy.png // name=Rose, icon=nami.png 7.ã€å°†ä¸€ä¸ªæ¨¡å‹è½¬æˆå­—å…¸ã€‘æ ¸å¿ƒæ–¹æ³•:mj_keyValues:12345678910111213141516171819//åˆ›å»ºä¸€ä¸ªæ¨¡å‹å¯¹è±¡User *user = [[User alloc] init];user.name = @"Jack";user.icon = @"lufy.png";Status *status = [[Status alloc] init];status.user = user;status.text = @"Nice mood!";//æ¨¡å‹è½¬å­—å…¸ï¼Œä½¿ç”¨çš„æ˜¯mj_keyValueså±æ€§NSDictionary *statusDict = status.mj_keyValues;NSLog(@"%@", statusDict);/*&#123;text = "Nice mood!"; user = &#123; icon = "lufy.png"; name = Jack; &#125;;&#125;*/ 8.ã€å°†ä¸€ä¸ªæ¨¡å‹æ•°ç»„è½¬æˆå­—å…¸æ•°ç»„ã€‘æ ¸å¿ƒä»£ç :mj_keyValuesArrayWithObjectArray1234567891011121314151617181920212223// åˆ›å»ºæ¨¡å‹æ•°ç»„User *user1 = [[User alloc] init];user1.name = @"Jack";user1.icon = @"lufy.png";User *user2 = [[User alloc] init];user2.name = @"Rose";user2.icon = @"nami.png";NSArray *userArray = @[user1, user2];//æ¨¡å‹æ•°ç»„è½¬å­—å…¸æ•°ç»„ï¼Œä½¿ç”¨çš„æ˜¯mj_keyValuesArrayWithObjectArray:æ–¹æ³•NSArray *dictArray = [User mj_keyValuesArrayWithObjectArray:userArray];NSLog(@"%@", dictArray);/*( &#123; icon = "lufy.png"; name = Jack; &#125;, &#123; icon = "nami.png"; name = Rose; &#125;)*/ 9.Core Data1234567891011121314NSDictionary *dict = @&#123; @"name" : @"Jack", @"icon" : @"lufy.png", @"age" : @20, @"height" : @1.55, @"money" : @"100.9", @"sex" : @(SexFemale), @"gay" : @"true" &#125;;//å­—å…¸è½¬ä¸ºCoreDataæ¨¡å‹NSManagedObjectContext *context = nil;User *user = [User mj_objectWithKeyValues:dict context:context];[context save:nil]; 10.å½’æ¡£ä¸è§£æ¡£NSCoding12345678910111213@interface Bag : NSObject &lt;NSCoding&gt;@property (copy, nonatomic) NSString *name;@property (assign, nonatomic) double price;@end#import "MJExtension.h"@implementation Bag//æ·»åŠ äº†ä¸‹é¢çš„å®å®šä¹‰MJExtensionCodingImplementation/* å®ç°ä¸‹é¢çš„æ–¹æ³•ï¼Œè¯´æ˜å“ªäº›å±æ€§ä¸éœ€è¦å½’æ¡£å’Œè§£æ¡£ */+ (NSArray *)mj_ignoredCodingPropertyNames&#123; return @[@"name"];&#125;@end 123456789101112//åˆ›å»ºæ¨¡å‹Bag *bag = [[Bag alloc] init];bag.name = @"Red bag";bag.price = 200.8;//è·å–å½’æ¡£è·¯å¾„NSString *file = [NSHomeDirectory() stringByAppendingPathComponent:@"Desktop/bag.data"];//å½’æ¡£[NSKeyedArchiver archiveRootObject:bag toFile:file];//è§£æ¡£Bag *decodedBag = [NSKeyedUnarchiver unarchiveObjectWithFile:file];NSLog(@"name=%@, price=%f", decodedBag.name, decodedBag.price);// name=(null), price=200.800000 11.ã€ç»Ÿä¸€è½¬æ¢å±æ€§åï¼ˆæ¯”å¦‚é©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‘12345678910111213141516171819// Dog#import "MJExtension.h"@implementation Dog+ (NSString *)mj_replacedKeyFromPropertyName121:(NSString *)propertyName&#123; // nickName -&gt; nick_name return [propertyName mj_underlineFromCamel];&#125;@end// NSDictionaryNSDictionary *dict = @&#123; @"nick_name" : @"æ—ºè´¢", @"sale_price" : @"10.5", @"run_speed" : @"100.9" &#125;;// NSDictionary -&gt; DogDog *dog = [Dog mj_objectWithKeyValues:dict];// printingNSLog(@"nickName=%@, scalePrice=%f runSpeed=%f", dog.nickName, dog.salePrice, dog.runSpeed); 12.ã€è¿‡æ»¤å­—å…¸çš„å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²æ—¥æœŸå¤„ç†ä¸ºNSDateã€å­—ç¬¦ä¸²nilå¤„ç†ä¸º@â€â€ï¼‰ã€‘123456789101112131415161718192021@interface Book: NSObject@property (copy, nonatomic) NSString *name;@property (strong, nonatomic) NSDate *publishedTime;@end#import "MJExtension.h"@implementation Book/* è½¬åŒ–è¿‡ç¨‹ä¸­å¯¹å­—å…¸çš„å€¼è¿›è¡Œè¿‡æ»¤å’Œè¿›ä¸€æ­¥è½¬åŒ– */- (id)mj_newValueFromOldValue:(id)oldValue property:(MJProperty *)property&#123; if ([property.name isEqualToString:@"publisher"]) &#123; if (oldValue == nil) &#123; return @""; &#125; &#125; else if (property.type.typeClass == [NSDate class]) &#123; NSDateFormatter *fmt = [[NSDateFormatter alloc] init]; fmt.dateFormat = @"yyyy-MM-dd"; return [fmt dateFromString:oldValue]; &#125; return oldValue;&#125;@end 12345678NSDictionary *dict = @&#123; @"name" : @"5åˆ†é’Ÿçªç ´iOSå¼€å‘", @"publishedTime" : @"2011-09-10" &#125;;//å­—å…¸è½¬æ¨¡å‹ï¼Œè¿‡æ»¤nameä¸ºnilçš„æƒ…å†µï¼ŒæŠŠNSStringè½¬ä¸ºNSDateBook *book = [Book mj_objectWithKeyValues:dict];//æ‰“å°NSLog(@"name=%@, publishedTime=%@", book.name, book.publishedTime); 1.æ¨¡å‹ä¸­æœ‰ä¸ªæ•°ç»„å±æ€§ï¼Œæ•°ç»„é‡Œé¢åˆè¦è£…ç€å…¶ä»–æ¨¡å‹ 12345678910111213141516171819202122//1.æŠŠå­—å…¸æ•°ç»„è½¬æ¢ä¸ºæ¨¡å‹æ•°ç»„//ä½¿ç”¨MJExtensionæ¡†æ¶è¿›è¡Œå­—å…¸è½¬æ¨¡å‹self.videos = [XMGVideo objectArrayWithKeyValuesArray:videoArray];//2.é‡å‘½åæ¨¡å‹å±æ€§çš„åç§°//ç¬¬ä¸€ç§é‡å‘½åå±æ€§åç§°çš„æ–¹æ³•ï¼Œæœ‰ä¸€å®šçš„ä»£ç ä¾µå…¥æ€§//è®¾ç½®å­—å…¸ä¸­çš„idè¢«æ¨¡å‹ä¸­çš„IDæ›¿æ¢+(NSDictionary *)replacedKeyFromPropertyName &#123; return @&#123; @"ID":@"id" &#125;;&#125;//ç¬¬äºŒç§é‡å‘½åå±æ€§åç§°çš„æ–¹æ³•ï¼Œä»£ç ä¾µå…¥æ€§ä¸ºé›¶[LNVideo setupReplacedKeyFromPropertyName:^NSDictionary *&#123; return @&#123; @"ID":@"id" &#125;;&#125;];//3.MJExtensionæ¡†æ¶å†…éƒ¨å®ç°åŸç†-è¿è¡Œæ—¶ è¿™ä¸ªæ¡†æ¶æœ‰å¤ªå¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ æ¨æ•²ï¼Œæ–¹æ–¹é¢é¢éƒ½é€éœ²ç€ä½œè€…ä»¥åŠä¼—å¤šè´¡çŒ®è€…çš„æ™ºæ…§ï¼Œæˆ‘ä»¬ä½¿ç”¨èµ·æ¥ä¹Ÿä¸€å®šä¼šå—ç›Šè‰¯å¤šã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å¼è¯¦è§£â€”ã€Œruntimeé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^.]]></title>
    <url>%2FiOSNET%2Fruntime.html</url>
    <content type="text"><![CDATA[å¼•å¯¼Copyright Â© PBWln Unauthorized shall not be *copy reprinted* ã€‚ å¯¹äºä»äº‹ iOS å¼€å‘äººå‘˜æ¥è¯´ï¼Œæ‰€æœ‰çš„äººéƒ½ä¼šç­”å‡ºã€Œruntime æ˜¯è¿è¡Œæ—¶ã€ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨runtime?ï¼Œå¤§éƒ¨åˆ†äººèƒ½è¯´å‡ºã€Œç»™åˆ†ç±»åŠ¨æ€æ·»åŠ å±æ€§ || äº¤æ¢æ–¹æ³•ã€ï¼Œå†é—®ä¸€å¥ã€Œruntime æ¶ˆæ¯æœºåˆ¶çš„è°ƒç”¨æµç¨‹ || èƒ½ä½“ç°runtime å¼ºå¤§ä¹‹å¤„çš„åº”ç”¨åœºæ™¯ã€ï¼Œåˆ°è¿™ï¼Œèƒ½çŸ¥é“ç­”æ¡ˆçš„å¯¥å¯¥æ— å‡ ï¼Œå¾ˆå°‘æœ‰äººä¼šè¯´åˆ°â€œé»‘é­”æ³•â€è¿™ä¸‰ä¸ªå­—ï¼Œ runtime æ˜¯ iOS ç¼–ç¨‹ä¸­æ¯”è¾ƒéš¾çš„æ¨¡å—ï¼Œæƒ³è¦æ·±å…¥å­¦ä¹  OCï¼Œé‚£ runtime æ˜¯ä½ å¿…é¡»è¦ç†Ÿç»ƒæŒæ¡çš„ä¸œè¥¿ï¼Œä¸‹é¢æ˜¯æˆ‘å¯¹ runtime çš„æ•´ç†ï¼Œä»é›¶å¼€å§‹ï¼Œç”±æµ…å…¥æ·±ï¼Œå¹¶ä¸”å¸¦äº†å‡ ä¸ª runtime å®é™…å¼€å‘çš„åº”ç”¨åœºæ™¯ã€‚â€“&gt; å¤§ç¥å¯é€‰æ‹©æ€§è·¯è¿‡ã€Œæ€æƒ³ã€ã€‚ åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œå¯ç•™è¨€æŒ‡æ­£æˆ–æ˜¯è¡¥å……ï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@ ç™½å¼€æ°´lnï¼› ä¸ç®¡è°çš„åšå®¢ä¸Šé¢å†™çš„æ–‡ç« (ä¹ŸåŒ…æ‹¬è‡ªå·±)ï¼Œé˜…è¯»çš„ä½ è¦æ•¢äºå»éªŒè¯ï¼Œåœæ­¢æ— æ„ä¹‰çš„â¹copy pasteã€‚ ç›®å½•ï¼š runtime æ¦‚å¿µ runtime æ¶ˆæ¯æœºåˆ¶ runtime æ–¹æ³•è°ƒç”¨æµç¨‹ã€Œæ¶ˆæ¯æœºåˆ¶ã€ runtime è¿è¡Œæ—¶å¸¸è§ä½œç”¨ runtime å¸¸ç”¨å¼€å‘åº”ç”¨åœºæ™¯ã€Œå·¥ä½œæŒæ¡ã€1.runtime äº¤æ¢æ–¹æ³•2.runtime ç»™åˆ†ç±»åŠ¨æ€æ·»åŠ å±æ€§3.runtime å­—å…¸è½¬æ¨¡å‹ï¼ˆRuntime è€ƒè™‘ä¸‰ç§æƒ…å†µå®ç°ï¼‰ runtime è¿è¡Œæ—¶å…¶å®ƒä½œç”¨ã€Œé¢è¯•ç†Ÿæ‚‰ã€1.åŠ¨æ€æ·»åŠ æ–¹æ³•2.åŠ¨æ€å˜é‡æ§åˆ¶3.å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œè§£æ¡£4.runtime ä¸‹Classçš„å„é¡¹æ“ä½œ5.runtime å‡ ä¸ªå‚æ•°æ¦‚å¿µ ä»€ä¹ˆæ˜¯ method swizzlingï¼ˆä¿—ç§°é»‘é­”æ³•ï¼‰ æœ€åä¸€é“é¢è¯•é¢˜çš„æ³¨è§£ runtimeæ¨¡å—ç®€å‹æ–‡ç« æ¨è(â¤ï¸æ•°é‡è¾ƒå¤š) å®æˆ˜åº”ç”¨åœºæ™¯ï¼ˆæŒç»­ï¼‰ åç»­æ›´æ–° Swift3.1-runtimeé¢è¯•ã€å·¥ä½œ OC &amp; Swift runtime &amp; runloop é¢è¯•æœ€å¸¸é—®åˆ°çš„é¢˜æ•´ç†ã€å»ºè®®çœ‹ã€‘ runtime.h å±æ€§&amp;æ–¹æ³• &amp; Demo runtime æ¦‚å¿µ Objective-C æ˜¯åŸºäº C çš„ï¼Œå®ƒä¸º C æ·»åŠ äº†é¢å‘å¯¹è±¡çš„ç‰¹æ€§ã€‚å®ƒå°†å¾ˆå¤šé™æ€è¯­è¨€åœ¨ç¼–è¯‘å’Œé“¾æ¥æ—¶æœŸåšçš„äº‹æ”¾åˆ°äº† runtime è¿è¡Œæ—¶æ¥å¤„ç†ï¼Œå¯ä»¥è¯´ runtime æ˜¯æˆ‘ä»¬ Objective-C å¹•åå·¥ä½œè€…ã€‚ runtimeï¼ˆç®€ç§°è¿è¡Œæ—¶ï¼‰ï¼Œæ˜¯ä¸€å¥— çº¯C(Cå’Œæ±‡ç¼–å†™çš„) çš„APIã€‚è€Œ OC å°±æ˜¯ è¿è¡Œæ—¶æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯åœ¨è¿è¡Œæ—¶å€™çš„ä¸€äº›æœºåˆ¶ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ˜¯ æ¶ˆæ¯æœºåˆ¶ã€‚ å¯¹äº C è¯­è¨€ï¼Œå‡½æ•°çš„è°ƒç”¨åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šå†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚ OCçš„å‡½æ•°è°ƒç”¨æˆä¸ºæ¶ˆæ¯å‘é€ï¼Œå±äº åŠ¨æ€è°ƒç”¨è¿‡ç¨‹ã€‚åœ¨ç¼–è¯‘çš„æ—¶å€™å¹¶ä¸èƒ½å†³å®šçœŸæ­£è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œåªæœ‰åœ¨çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šæ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ã€‚ äº‹å®è¯æ˜ï¼šåœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOC å¯ä»¥ è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°å¹¶æœªå®ç°ï¼Œåªè¦å£°æ˜è¿‡å°±ä¸ä¼šæŠ¥é”™ï¼Œåªæœ‰å½“è¿è¡Œçš„æ—¶å€™æ‰ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºOCæ˜¯è¿è¡Œæ—¶åŠ¨æ€è°ƒç”¨çš„ã€‚è€Œ C è¯­è¨€ è°ƒç”¨æœªå®ç°çš„å‡½æ•° å°±ä¼šæŠ¥é”™ã€‚ runtime æ¶ˆæ¯æœºåˆ¶ æˆ‘ä»¬å†™ OC ä»£ç ï¼Œå®ƒåœ¨è¿è¡Œçš„æ—¶å€™ä¹Ÿæ˜¯è½¬æ¢æˆäº† runtime æ–¹å¼è¿è¡Œçš„ã€‚ä»»ä½•æ–¹æ³•è°ƒç”¨æœ¬è´¨ï¼šå°±æ˜¯å‘é€ä¸€ä¸ªæ¶ˆæ¯ï¼ˆç”¨ runtimeå‘é€æ¶ˆæ¯ï¼ŒOC åº•å±‚å®ç°é€šè¿‡ runtime å®ç°ï¼‰ã€‚ æ¶ˆæ¯æœºåˆ¶åŸç†ï¼šå¯¹è±¡æ ¹æ®æ–¹æ³•ç¼–å·SELå»æ˜ å°„è¡¨æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å®ç°ã€‚ æ¯ä¸€ä¸ª OC çš„æ–¹æ³•ï¼Œåº•å±‚å¿…ç„¶æœ‰ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ runtime æ–¹æ³•ã€‚ ç®€å•ç¤ºä¾‹ï¼šéªŒè¯ï¼šæ–¹æ³•è°ƒç”¨ï¼Œæ˜¯å¦çœŸçš„æ˜¯è½¬æ¢ä¸ºæ¶ˆæ¯æœºåˆ¶ï¼Ÿ å¿…é¡»è¦å¯¼å…¥å¤´æ–‡ä»¶ #import &lt;objc/message.h&gt; æ³¨è§£1ï¼šæˆ‘ä»¬å¯¼å…¥ç³»ç»Ÿçš„å¤´æ–‡ä»¶ï¼Œä¸€èˆ¬ç”¨å°–æ‹¬å·ã€‚ æ³¨è§£2ï¼šOC è§£å†³æ¶ˆæ¯æœºåˆ¶æ–¹æ³•æç¤ºæ­¥éª¤ã€æŸ¥æ‰¾build setting -&gt; æœç´¢msg -&gt; objc_msgSendï¼ˆYES â€“&gt; NOï¼‰ã€‘ æ³¨è§£3ï¼šæœ€ç»ˆç”Ÿæˆæ¶ˆæ¯æœºåˆ¶,ç¼–è¯‘å™¨åšçš„äº‹æƒ…ï¼Œæœ€ç»ˆä»£ç ï¼Œéœ€è¦æŠŠå½“å‰ä»£ç é‡æ–°ç¼–è¯‘ï¼Œç”¨xcodeç¼–è¯‘å™¨ï¼Œã€clang -rewrite-objc main.m æŸ¥çœ‹æœ€ç»ˆç”Ÿæˆä»£ç ã€‘ï¼Œç¤ºä¾‹ï¼šcd main.m --&gt; è¾“å…¥å‰é¢æŒ‡ä»¤ï¼Œå°±ä¼šç”Ÿæˆ .oppæ–‡ä»¶(C++ä»£ç ) æ³¨è§£4ï¼šè¿™é‡Œä¸€èˆ¬ä¸ä¼šç›´æ¥å¯¼å…¥&lt;objc/runtime.h&gt; ç¤ºä¾‹ä»£ç ï¼šOC æ–¹æ³•â€“&gt;runtime æ–¹æ³• 123456789101112131415161718192021222324è¯´æ˜: eat(æ— å‚) å’Œ run(æœ‰å‚) æ˜¯ Personæ¨¡å‹ç±»ä¸­çš„ç§æœ‰æ–¹æ³•ã€Œå¯ä»¥å¸®æˆ‘è°ƒç”¨ç§æœ‰æ–¹æ³•ã€ï¼›// Person *p = [Person alloc];// åº•å±‚çš„å®é™…å†™æ³•Person *p = objc_msgSend(objc_getClass("Person"), sel_registerName("alloc"));// p = [p init];p = objc_msgSend(p, sel_registerName("init"));// è°ƒç”¨å¯¹è±¡æ–¹æ³•ï¼ˆæœ¬è´¨ï¼šè®©å¯¹è±¡å‘é€æ¶ˆæ¯ï¼‰//[p eat];// æœ¬è´¨ï¼šè®©ç±»å¯¹è±¡å‘é€æ¶ˆæ¯objc_msgSend(p, @selector(eat));objc_msgSend([Person class], @selector(run:),20);//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------//// ä¹Ÿè®¸ä¸‹é¢è¿™ç§å¥½ç†è§£ä¸€ç‚¹// id objc = [NSObject alloc];id objc = objc_msgSend([NSObject class], @selector(alloc));// objc = [objc init];objc = objc_msgSend(objc, @selector(init)); runtime æ–¹æ³•è°ƒç”¨æµç¨‹ã€Œæ¶ˆæ¯æœºåˆ¶ã€ é¢è¯•ï¼šæ¶ˆæ¯æœºåˆ¶æ–¹æ³•è°ƒç”¨æµç¨‹ æ€ä¹ˆå»è°ƒç”¨eatæ–¹æ³•ï¼Œå¯¹è±¡æ–¹æ³•ï¼š(ä¿å­˜åˆ°ç±»å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨) ï¼Œç±»æ–¹æ³•ï¼š(ä¿å­˜åˆ°å…ƒç±»(Meta Class)ä¸­æ–¹æ³•åˆ—è¡¨)ã€‚ 1.OC åœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntime åº“ä¼šæ ¹æ®å¯¹è±¡çš„ isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å¯¹åº”çš„ç±»æˆ–å…¶çˆ¶ç±»ä¸­æŸ¥æ‰¾æ–¹æ³•ã€‚ã€‚ 2.æ³¨å†Œæ–¹æ³•ç¼–å·ï¼ˆè¿™é‡Œç”¨æ–¹æ³•ç¼–å·çš„å¥½å¤„ï¼Œå¯ä»¥å¿«é€ŸæŸ¥æ‰¾ï¼‰ã€‚ 3.æ ¹æ®æ–¹æ³•ç¼–å·å»æŸ¥æ‰¾å¯¹åº”æ–¹æ³•ã€‚ 4.æ‰¾åˆ°åªæ˜¯æœ€ç»ˆå‡½æ•°å®ç°åœ°å€ï¼Œæ ¹æ®åœ°å€å»æ–¹æ³•åŒºè°ƒç”¨å¯¹åº”å‡½æ•°ã€‚ è¡¥å……ï¼šä¸€ä¸ªobjc å¯¹è±¡çš„ isa çš„æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæ˜¯æŒ‡å‘å®ƒçš„çœŸå®ç±»å‹ï¼Œæ ¹æ®è¿™ä¸ªæŒ‡é’ˆå°±èƒ½çŸ¥é“å°†æ¥è°ƒç”¨å“ªä¸ªç±»çš„æ–¹æ³•ã€‚ runtime å¸¸è§ä½œç”¨ åŠ¨æ€äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç° åŠ¨æ€æ·»åŠ å±æ€§ å®ç°å­—å…¸è½¬æ¨¡å‹çš„è‡ªåŠ¨è½¬æ¢ å‘é€æ¶ˆæ¯ åŠ¨æ€æ·»åŠ æ–¹æ³• æ‹¦æˆªå¹¶æ›¿æ¢æ–¹æ³• å®ç° NSCoding çš„è‡ªåŠ¨å½’æ¡£å’Œè§£æ¡£ runtime å¸¸ç”¨å¼€å‘åº”ç”¨åœºæ™¯ã€Œå·¥ä½œæŒæ¡ã€ runtime äº¤æ¢æ–¹æ³•åº”ç”¨åœºæ™¯ï¼šå½“ç¬¬ä¸‰æ–¹æ¡†æ¶ æˆ–è€… ç³»ç»ŸåŸç”Ÿæ–¹æ³•åŠŸèƒ½ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿æŒç³»ç»ŸåŸæœ‰æ–¹æ³•åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚ éœ€æ±‚ï¼šåŠ è½½ä¸€å¼ å›¾ç‰‡ç›´æ¥ç”¨[UIImage imageNamed:@&quot;image&quot;];æ˜¯æ— æ³•çŸ¥é“åˆ°åº•æœ‰æ²¡æœ‰åŠ è½½æˆåŠŸã€‚ç»™ç³»ç»Ÿçš„imageNamedæ·»åŠ é¢å¤–åŠŸèƒ½ï¼ˆæ˜¯å¦åŠ è½½å›¾ç‰‡æˆåŠŸï¼‰ã€‚ æ–¹æ¡ˆä¸€ï¼šç»§æ‰¿ç³»ç»Ÿçš„ç±»ï¼Œé‡å†™æ–¹æ³•.ï¼ˆå¼Šç«¯ï¼šæ¯æ¬¡ä½¿ç”¨éƒ½éœ€è¦å¯¼å…¥ï¼‰ æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ runtimeï¼Œäº¤æ¢æ–¹æ³•. å®ç°æ­¥éª¤ï¼š 1.ç»™ç³»ç»Ÿçš„æ–¹æ³•æ·»åŠ åˆ†ç±» 2.è‡ªå·±å®ç°ä¸€ä¸ªå¸¦æœ‰æ‰©å±•åŠŸèƒ½çš„æ–¹æ³• 3.äº¤æ¢æ–¹æ³•,åªéœ€è¦äº¤æ¢ä¸€æ¬¡, æ¡ˆä¾‹ä»£ç ï¼šæ–¹æ³•+è°ƒç”¨+æ‰“å°è¾“å‡º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354- (void)viewDidLoad &#123; [super viewDidLoad]; // æ–¹æ¡ˆä¸€ï¼šå…ˆæä¸ªåˆ†ç±»ï¼Œå®šä¹‰ä¸€ä¸ªèƒ½åŠ è½½å›¾ç‰‡å¹¶ä¸”èƒ½æ‰“å°çš„æ–¹æ³•+ (instancetype)imageWithName:(NSString *)name; // æ–¹æ¡ˆäºŒï¼šäº¤æ¢ imageNamed å’Œ ln_imageNamed çš„å®ç°ï¼Œå°±èƒ½è°ƒç”¨ imageNamedï¼Œé—´æ¥è°ƒç”¨ ln_imageNamed çš„å®ç°ã€‚ UIImage *image = [UIImage imageNamed:@"123"];&#125;#import &lt;objc/message.h&gt;@implementation UIImage (Image)/** loadæ–¹æ³•: æŠŠç±»åŠ è½½è¿›å†…å­˜çš„æ—¶å€™è°ƒç”¨,åªä¼šè°ƒç”¨ä¸€æ¬¡ æ–¹æ³•åº”å…ˆäº¤æ¢ï¼Œå†å»è°ƒç”¨ */+ (void)load &#123; // 1.è·å– imageNamedæ–¹æ³•åœ°å€ // class_getClassMethodï¼ˆè·å–æŸä¸ªç±»çš„æ–¹æ³•ï¼‰ Method imageNamedMethod = class_getClassMethod(self, @selector(imageNamed:)); // 2.è·å– ln_imageNamedæ–¹æ³•åœ°å€ Method ln_imageNamedMethod = class_getClassMethod(self, @selector(ln_imageNamed:)); // 3.äº¤æ¢æ–¹æ³•åœ°å€ï¼Œç›¸å½“äºäº¤æ¢å®ç°æ–¹å¼;ã€Œmethod_exchangeImplementations äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç°ã€ method_exchangeImplementations(imageNamedMethod, ln_imageNamedMethod);&#125;/** çœ‹æ¸…æ¥šä¸‹é¢æ˜¯ä¸ä¼šæœ‰æ­»å¾ªç¯çš„ è°ƒç”¨ imageNamed =&gt; ln_imageNamed è°ƒç”¨ ln_imageNamed =&gt; imageNamed */// åŠ è½½å›¾ç‰‡ ä¸” å¸¦åˆ¤æ–­æ˜¯å¦åŠ è½½æˆåŠŸ+ (UIImage *)ln_imageNamed:(NSString *)name &#123; UIImage *image = [UIImage ln_imageNamed:name]; if (image) &#123; NSLog(@"runtimeæ·»åŠ é¢å¤–åŠŸèƒ½--åŠ è½½æˆåŠŸ"); &#125; else &#123; NSLog(@"runtimeæ·»åŠ é¢å¤–åŠŸèƒ½--åŠ è½½å¤±è´¥"); &#125; return image;&#125;/** ä¸èƒ½åœ¨åˆ†ç±»ä¸­é‡å†™ç³»ç»Ÿæ–¹æ³•imageNamedï¼Œå› ä¸ºä¼šæŠŠç³»ç»Ÿçš„åŠŸèƒ½ç»™è¦†ç›–æ‰ï¼Œè€Œä¸”åˆ†ç±»ä¸­ä¸èƒ½è°ƒç”¨super æ‰€ä»¥ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬è¦ è‡ªå·±å®ç°ä¸€ä¸ªå¸¦æœ‰æ‰©å±•åŠŸèƒ½çš„æ–¹æ³•. + (UIImage *)imageNamed:(NSString *)name &#123; &#125; */@end// æ‰“å°è¾“å‡º2016-02-17 17:52:14.693 runtime[12761:543574] runtimeæ·»åŠ é¢å¤–åŠŸèƒ½--åŠ è½½æˆåŠŸ æ€»ç»“ï¼šæˆ‘ä»¬æ‰€åšçš„å°±æ˜¯åœ¨æ–¹æ³•è°ƒç”¨æµç¨‹ç¬¬ä¸‰æ­¥çš„æ—¶å€™ï¼Œäº¤æ¢ä¸¤ä¸ªæ–¹æ³•åœ°å€æŒ‡å‘ã€‚è€Œä¸”æˆ‘ä»¬æ”¹å˜æŒ‡å‘è¦åœ¨ç³»ç»Ÿçš„imageNamed:æ–¹æ³•è°ƒç”¨å‰ï¼Œæ‰€ä»¥å°†ä»£ç å†™åœ¨äº†åˆ†ç±»çš„loadæ–¹æ³•é‡Œã€‚æœ€åå½“è¿è¡Œçš„æ—¶å€™ç³»ç»Ÿçš„æ–¹æ³•å°±ä¼šå»æ‰¾æˆ‘ä»¬çš„æ–¹æ³•çš„å®ç°ã€‚ runtime ç»™åˆ†ç±»åŠ¨æ€æ·»åŠ å±æ€§åŸç†ï¼šç»™ä¸€ä¸ªç±»å£°æ˜å±æ€§ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯ç»™è¿™ä¸ªç±»æ·»åŠ å…³è”ï¼Œå¹¶ä¸æ˜¯ç›´æ¥æŠŠè¿™ä¸ªå€¼çš„å†…å­˜ç©ºé—´æ·»åŠ åˆ°ç±»å­˜ç©ºé—´ã€‚ åº”ç”¨åœºæ™¯ï¼šç»™ç³»ç»Ÿçš„ç±»æ·»åŠ å±æ€§çš„æ—¶å€™,å¯ä»¥ä½¿ç”¨runtimeåŠ¨æ€æ·»åŠ å±æ€§æ–¹æ³•ã€‚æ³¨è§£ï¼šç³»ç»Ÿ NSObject æ·»åŠ ä¸€ä¸ªåˆ†ç±»ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨åˆ†ç±»ä¸­æ˜¯ä¸èƒ½å¤Ÿæ·»åŠ æˆå‘˜å±æ€§çš„ï¼Œè™½ç„¶æˆ‘ä»¬ç”¨äº†@propertyï¼Œä½†æ˜¯ä»…ä»…ä¼šè‡ªåŠ¨ç”Ÿæˆgetå’Œsetæ–¹æ³•çš„å£°æ˜ï¼Œå¹¶æ²¡æœ‰å¸¦ä¸‹åˆ’çº¿çš„å±æ€§å’Œæ–¹æ³•å®ç°ç”Ÿæˆã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡runtimeå°±å¯ä»¥åšåˆ°ç»™å®ƒæ–¹æ³•çš„å®ç°ã€‚ éœ€æ±‚ï¼šç»™ç³»ç»Ÿ NSObject ç±»åŠ¨æ€æ·»åŠ å±æ€§ name å­—ç¬¦ä¸²ã€‚ æ¡ˆä¾‹ä»£ç ï¼šæ–¹æ³•+è°ƒç”¨+æ‰“å°123456789101112131415161718192021222324252627282930@interface NSObject (Property)// @propertyåˆ†ç±»:åªä¼šç”Ÿæˆget,setæ–¹æ³•å£°æ˜,ä¸ä¼šç”Ÿæˆå®ç°,ä¹Ÿä¸ä¼šç”Ÿæˆä¸‹åˆ’çº¿æˆå‘˜å±æ€§@property NSString *name;@property NSString *height;@end@implementation NSObject (Property)- (void)setName:(NSString *)name &#123; // objc_setAssociatedObjectï¼ˆå°†æŸä¸ªå€¼è·ŸæŸä¸ªå¯¹è±¡å…³è”èµ·æ¥ï¼Œå°†æŸä¸ªå€¼å­˜å‚¨åˆ°æŸä¸ªå¯¹è±¡ä¸­ï¼‰ // object:ç»™å“ªä¸ªå¯¹è±¡æ·»åŠ å±æ€§ // key:å±æ€§åç§° // value:å±æ€§å€¼ // policy:ä¿å­˜ç­–ç•¥ objc_setAssociatedObject(self, @"name", name, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;- (NSString *)name &#123; return objc_getAssociatedObject(self, @"name");&#125;// è°ƒç”¨NSObject *objc = [[NSObject alloc] init];objc.name = @"123";NSLog(@"runtimeåŠ¨æ€æ·»åŠ å±æ€§name==%@",objc.name);// æ‰“å°è¾“å‡º2016-02-17 19:37:10.530 runtime[12761:543574] runtimeåŠ¨æ€æ·»åŠ å±æ€§--name == 123 æ€»ç»“ï¼šå…¶å®ï¼Œç»™å±æ€§èµ‹å€¼çš„æœ¬è´¨ï¼Œå°±æ˜¯è®©å±æ€§ä¸ä¸€ä¸ªå¯¹è±¡äº§ç”Ÿå…³è”ï¼Œæ‰€ä»¥è¦ç»™NSObjectçš„åˆ†ç±»çš„nameå±æ€§èµ‹å€¼å°±æ˜¯è®©nameå’ŒNSObjectäº§ç”Ÿå…³è”ï¼Œè€Œruntimeå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ runtime å­—å…¸è½¬æ¨¡å‹å­—å…¸è½¬æ¨¡å‹çš„æ–¹å¼ï¼š ä¸€ä¸ªä¸€ä¸ªçš„ç»™æ¨¡å‹å±æ€§èµ‹å€¼ï¼ˆåˆå­¦è€…ï¼‰ã€‚ å­—å…¸è½¬æ¨¡å‹KVCå®ç° KVC å­—å…¸è½¬æ¨¡å‹å¼Šç«¯ï¼šå¿…é¡»ä¿è¯ï¼Œæ¨¡å‹ä¸­çš„å±æ€§å’Œå­—å…¸ä¸­çš„key ä¸€ä¸€å¯¹åº”ã€‚ å¦‚æœä¸ä¸€è‡´ï¼Œå°±ä¼šè°ƒç”¨[&lt;Status 0x7fa74b545d60&gt; setValue:forUndefinedKey:] æŠ¥keyæ‰¾ä¸åˆ°çš„é”™ã€‚ åˆ†æ:æ¨¡å‹ä¸­çš„å±æ€§å’Œå­—å…¸çš„keyä¸ä¸€ä¸€å¯¹åº”ï¼Œç³»ç»Ÿå°±ä¼šè°ƒç”¨setValue:forUndefinedKey:æŠ¥é”™ã€‚ è§£å†³ï¼šé‡å†™å¯¹è±¡çš„setValue:forUndefinedKey:ï¼ŒæŠŠç³»ç»Ÿçš„æ–¹æ³•è¦†ç›–ï¼Œå°±èƒ½ç»§ç»­ä½¿ç”¨KVCï¼Œå­—å…¸è½¬æ¨¡å‹äº†ã€‚ å­—å…¸è½¬æ¨¡å‹ Runtime å®ç° æ€è·¯ï¼šåˆ©ç”¨è¿è¡Œæ—¶ï¼Œéå†æ¨¡å‹ä¸­æ‰€æœ‰å±æ€§ï¼Œæ ¹æ®æ¨¡å‹çš„å±æ€§åï¼Œå»å­—å…¸ä¸­æŸ¥æ‰¾keyï¼Œå–å‡ºå¯¹åº”çš„å€¼ï¼Œç»™æ¨¡å‹çš„å±æ€§èµ‹å€¼ï¼ˆä»æé†’ï¼šå­—å…¸ä¸­å–å€¼ï¼Œä¸ä¸€å®šè¦å…¨éƒ¨å–å‡ºæ¥ï¼‰ã€‚ è€ƒè™‘æƒ…å†µï¼š 1.å½“å­—å…¸çš„keyå’Œæ¨¡å‹çš„å±æ€§åŒ¹é…ä¸ä¸Šã€‚ 2.æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ï¼ˆæ¨¡å‹å±æ€§æ˜¯å¦å¤–ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ï¼‰ã€‚ 3.æ•°ç»„ä¸­è£…ç€æ¨¡å‹ï¼ˆæ¨¡å‹çš„å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ˜¯ä¸€ä¸ªä¸ªæ¨¡å‹å¯¹è±¡ï¼‰ã€‚ æ³¨è§£ï¼šæ ¹æ®ä¸Šé¢çš„ä¸‰ç§ç‰¹æ®Šæƒ…å†µï¼Œå…ˆæ˜¯å­—å…¸çš„keyå’Œæ¨¡å‹çš„å±æ€§ä¸å¯¹åº”çš„æƒ…å†µã€‚ä¸å¯¹åº”æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å­—å…¸çš„é”®å€¼å¤§äºæ¨¡å‹å±æ€§æ•°é‡ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦ä»»ä½•å¤„ç†ï¼Œå› ä¸ºruntimeæ˜¯å…ˆéå†æ¨¡å‹æ‰€æœ‰å±æ€§ï¼Œå†å»å­—å…¸ä¸­æ ¹æ®å±æ€§åæ‰¾å¯¹åº”å€¼è¿›è¡Œèµ‹å€¼ï¼Œå¤šä½™çš„é”®å€¼å¯¹ä¹Ÿå½“ç„¶ä¸ä¼šå»çœ‹äº†ï¼›å¦å¤–ä¸€ç§æ˜¯æ¨¡å‹å±æ€§æ•°é‡å¤§äºå­—å…¸çš„é”®å€¼å¯¹ï¼Œè¿™æ—¶å€™ç”±äºå±æ€§æ²¡æœ‰å¯¹åº”å€¼ä¼šè¢«èµ‹å€¼ä¸ºnilï¼Œå°±ä¼šå¯¼è‡´crashï¼Œæˆ‘ä»¬åªéœ€åŠ ä¸€ä¸ªåˆ¤æ–­å³å¯ã€‚è€ƒè™‘ä¸‰ç§æƒ…å†µä¸‹é¢ä¸€ä¸€æ³¨è§£ï¼› æ­¥éª¤ï¼šæä¾›ä¸€ä¸ªNSObjectåˆ†ç±»ï¼Œä¸“é—¨å­—å…¸è½¬æ¨¡å‹ï¼Œä»¥åæ‰€æœ‰æ¨¡å‹éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªåˆ†ç±»å®ç°å­—å…¸è½¬æ¨¡å‹ã€‚ MJExtension å­—å…¸è½¬æ¨¡å‹å®ç° åº•å±‚ä¹Ÿæ˜¯å¯¹ runtime çš„å°è£…ï¼Œæ‰å¯ä»¥æŠŠä¸€ä¸ªæ¨¡å‹ä¸­æ‰€æœ‰å±æ€§éå†å‡ºæ¥ã€‚ï¼ˆä½ ä¹‹æ‰€ä»¥çœ‹ä¸æ‡‚ï¼Œæ˜¯ MJ å°è£…äº†å¾ˆå¤šå±‚è€Œå·²^_^.ï¼‰ã€‚ è¿™é‡Œé’ˆå¯¹å­—å…¸è½¬æ¨¡å‹ KVC å®ç°ï¼Œå°±ä¸åšè¯¦è§£äº†ï¼Œå¦‚æœä½  å¯¹ KVC è¯¦è§£ä½¿ç”¨æˆ–æ˜¯å®ç°åŸç† ä¸æ˜¯å¾ˆæ¸…æ¥šçš„ï¼Œå¯ä»¥å‚è€ƒ å®ç”¨ã€ŒKVCç¼–ç  &amp; KVOç›‘å¬ å­—å…¸è½¬æ¨¡å‹ Runtime æ–¹å¼å®ç°ï¼šè¯´æ˜ï¼šä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼Œæ˜¯è€ƒè™‘ä¸‰ç§æƒ…å†µåŒ…å«åœ¨å†…çš„è½¬æ¢ç¤ºä¾‹ï¼Œå…·ä½“å¯ä»¥çœ‹å›¾ä¸Šçš„æ³¨è§£ 1ã€runtime å­—å…¸è½¬æ¨¡å‹â€“&gt;å­—å…¸çš„ key å’Œæ¨¡å‹çš„å±æ€§ä¸åŒ¹é…ã€Œæ¨¡å‹å±æ€§æ•°é‡å¤§äºå­—å…¸é”®å€¼å¯¹æ•°ã€ï¼Œè¿™ç§æƒ…å†µå¤„ç†å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445// Runtime:æ ¹æ®æ¨¡å‹ä¸­å±æ€§,å»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„valueç»™æ¨¡å‹å±æ€§èµ‹å€¼// æ€è·¯ï¼šéå†æ¨¡å‹ä¸­æ‰€æœ‰å±æ€§-&gt;ä½¿ç”¨è¿è¡Œæ—¶+ (instancetype)modelWithDict:(NSDictionary *)dict&#123; // 1.åˆ›å»ºå¯¹åº”çš„å¯¹è±¡ id objc = [[self alloc] init]; // 2.åˆ©ç”¨runtimeç»™å¯¹è±¡ä¸­çš„å±æ€§èµ‹å€¼ /** class_copyIvarList: è·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ Ivarï¼šæˆå‘˜å˜é‡ ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºè·å–å“ªä¸ªç±»ä¸­çš„æˆå‘˜å˜é‡ ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¿™ä¸ªç±»æœ‰å¤šå°‘æˆå‘˜å˜é‡ï¼Œä¼ å…¥ä¸€ä¸ªIntå˜é‡åœ°å€ï¼Œä¼šè‡ªåŠ¨ç»™è¿™ä¸ªå˜é‡èµ‹å€¼ è¿”å›å€¼Ivar *ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªivaræ•°ç»„ï¼Œä¼šæŠŠæ‰€æœ‰æˆå‘˜å±æ€§æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé€šè¿‡è¿”å›çš„æ•°ç»„å°±èƒ½å…¨éƒ¨è·å–åˆ°ã€‚ count: æˆå‘˜å˜é‡ä¸ªæ•° */ unsigned int count = 0; // è·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ Ivar *ivarList = class_copyIvarList(self, &amp;count); // éå†æ‰€æœ‰æˆå‘˜å˜é‡ for (int i = 0; i &lt; count; i++) &#123; // æ ¹æ®è§’æ ‡ï¼Œä»æ•°ç»„å–å‡ºå¯¹åº”çš„æˆå‘˜å˜é‡ Ivar ivar = ivarList[i]; // è·å–æˆå‘˜å˜é‡åå­— NSString *ivarName = [NSString stringWithUTF8String:ivar_getName(ivar)]; // å¤„ç†æˆå‘˜å˜é‡å-&gt;å­—å…¸ä¸­çš„key(å»æ‰ _ ,ä»ç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå–) NSString *key = [ivarName substringFromIndex:1]; // æ ¹æ®æˆå‘˜å±æ€§åå»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”çš„value id value = dict[key]; // ã€å¦‚æœæ¨¡å‹å±æ€§æ•°é‡å¤§äºå­—å…¸é”®å€¼å¯¹æ•°ç†ï¼Œæ¨¡å‹å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºnilã€‘ // è€ŒæŠ¥é”™ (could not set nil as the value for the key age.) if (value) &#123; // ç»™æ¨¡å‹ä¸­å±æ€§èµ‹å€¼ [objc setValue:value forKey:key]; &#125; &#125; return objc;&#125; æ³¨è§£ï¼šè¿™é‡Œåœ¨è·å–æ¨¡å‹ç±»ä¸­çš„æ‰€æœ‰å±æ€§åï¼Œæ˜¯é‡‡å– class_copyIvarList å…ˆè·å–æˆå‘˜å˜é‡ï¼ˆä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼‰ ï¼Œç„¶åå†å¤„ç†æˆå‘˜å˜é‡å-&gt;å­—å…¸ä¸­çš„key(å»æ‰ _ ,ä»ç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå–) å¾—åˆ°å±æ€§åã€‚ åŸå› ï¼šIvarï¼šæˆå‘˜å˜é‡,ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼ŒProperty å±æ€§è·å–ç±»é‡Œé¢å±æ€§ class_copyPropertyListè·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ class_copyIvarList12345678&#123; int _a; // æˆå‘˜å˜é‡&#125;@property (nonatomic, assign) NSInteger attitudes_count; // å±æ€§è¿™é‡Œæœ‰æˆå‘˜å˜é‡ï¼Œå°±ä¸ä¼šæ¼æ‰å±æ€§ï¼›å¦‚æœæœ‰å±æ€§ï¼Œå¯èƒ½ä¼šæ¼æ‰æˆå‘˜å˜é‡ï¼› ä½¿ç”¨runtimeå­—å…¸è½¬æ¨¡å‹è·å–æ¨¡å‹å±æ€§åçš„æ—¶å€™ï¼Œæœ€å¥½è·å–æˆå‘˜å±æ€§åIvarå› ä¸ºå¯èƒ½ä¼šæœ‰ä¸ªå±æ€§æ˜¯æ²¡æœ‰setterå’Œgetteræ–¹æ³•çš„ã€‚ 2ã€runtime å­—å…¸è½¬æ¨¡å‹â€“&gt;æ¨¡å‹ä¸­åµŒå¥—æ¨¡å‹ã€Œæ¨¡å‹å±æ€§æ˜¯å¦å¤–ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ã€ï¼Œè¿™ç§æƒ…å†µå¤„ç†å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253+ (instancetype)modelWithDict2:(NSDictionary *)dict&#123; // 1.åˆ›å»ºå¯¹åº”çš„å¯¹è±¡ id objc = [[self alloc] init]; // 2.åˆ©ç”¨runtimeç»™å¯¹è±¡ä¸­çš„å±æ€§èµ‹å€¼ unsigned int count = 0; // è·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ Ivar *ivarList = class_copyIvarList(self, &amp;count); // éå†æ‰€æœ‰æˆå‘˜å˜é‡ for (int i = 0; i &lt; count; i++) &#123; // æ ¹æ®è§’æ ‡ï¼Œä»æ•°ç»„å–å‡ºå¯¹åº”çš„æˆå‘˜å˜é‡ Ivar ivar = ivarList[i]; // è·å–æˆå‘˜å˜é‡åå­— NSString *ivarName = [NSString stringWithUTF8String:ivar_getName(ivar)]; // è·å–æˆå‘˜å˜é‡ç±»å‹ NSString *ivarType = [NSString stringWithUTF8String:ivar_getTypeEncoding(ivar)]; // æ›¿æ¢: @\"User\" -&gt; User ivarType = [ivarType stringByReplacingOccurrencesOfString:@"\"" withString:@""]; ivarType = [ivarType stringByReplacingOccurrencesOfString:@"@" withString:@""]; // å¤„ç†æˆå‘˜å±æ€§å-&gt;å­—å…¸ä¸­çš„key(å»æ‰ _ ,ä»ç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå–) NSString *key = [ivarName substringFromIndex:1]; // æ ¹æ®æˆå‘˜å±æ€§åå»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”çš„value id value = dict[key]; //--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------// // // äºŒçº§è½¬æ¢:å¦‚æœå­—å…¸ä¸­è¿˜æœ‰å­—å…¸ï¼Œä¹Ÿéœ€è¦æŠŠå¯¹åº”çš„å­—å…¸è½¬æ¢æˆæ¨¡å‹ // åˆ¤æ–­ä¸‹valueæ˜¯å¦æ˜¯å­—å…¸,å¹¶ä¸”æ˜¯è‡ªå®šä¹‰å¯¹è±¡æ‰éœ€è¦è½¬æ¢ if ([value isKindOfClass:[NSDictionary class]] &amp;&amp; ![ivarType hasPrefix:@"NS"]) &#123; // å­—å…¸è½¬æ¢æˆæ¨¡å‹ userDict =&gt; Useræ¨¡å‹, è½¬æ¢æˆå“ªä¸ªæ¨¡å‹ // æ ¹æ®å­—ç¬¦ä¸²ç±»åç”Ÿæˆç±»å¯¹è±¡ Class modelClass = NSClassFromString(ivarType); if (modelClass) &#123; // æœ‰å¯¹åº”çš„æ¨¡å‹æ‰éœ€è¦è½¬ // æŠŠå­—å…¸è½¬æ¨¡å‹ value = [modelClass modelWithDict2:value]; &#125; &#125; // ç»™æ¨¡å‹ä¸­å±æ€§èµ‹å€¼ if (value) &#123; [objc setValue:value forKey:key]; &#125; &#125; return objc;&#125; 3ã€runtime å­—å…¸è½¬æ¨¡å‹â€“&gt;æ•°ç»„ä¸­è£…ç€æ¨¡å‹ã€Œæ¨¡å‹çš„å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ˜¯å­—å…¸æ¨¡å‹å¯¹è±¡ã€ï¼Œè¿™ç§æƒ…å†µå¤„ç†å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// Runtime:æ ¹æ®æ¨¡å‹ä¸­å±æ€§,å»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„valueç»™æ¨¡å‹å±æ€§èµ‹å€¼// æ€è·¯ï¼šéå†æ¨¡å‹ä¸­æ‰€æœ‰å±æ€§-&gt;ä½¿ç”¨è¿è¡Œæ—¶+ (instancetype)modelWithDict3:(NSDictionary *)dict&#123; // 1.åˆ›å»ºå¯¹åº”çš„å¯¹è±¡ id objc = [[self alloc] init]; // 2.åˆ©ç”¨runtimeç»™å¯¹è±¡ä¸­çš„å±æ€§èµ‹å€¼ unsigned int count = 0; // è·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ Ivar *ivarList = class_copyIvarList(self, &amp;count); // éå†æ‰€æœ‰æˆå‘˜å˜é‡ for (int i = 0; i &lt; count; i++) &#123; // æ ¹æ®è§’æ ‡ï¼Œä»æ•°ç»„å–å‡ºå¯¹åº”çš„æˆå‘˜å˜é‡ Ivar ivar = ivarList[i]; // è·å–æˆå‘˜å˜é‡åå­— NSString *ivarName = [NSString stringWithUTF8String:ivar_getName(ivar)]; // å¤„ç†æˆå‘˜å±æ€§å-&gt;å­—å…¸ä¸­çš„key(å»æ‰ _ ,ä»ç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå–) NSString *key = [ivarName substringFromIndex:1]; // æ ¹æ®æˆå‘˜å±æ€§åå»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”çš„value id value = dict[key]; //--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------// // // ä¸‰çº§è½¬æ¢ï¼šNSArrayä¸­ä¹Ÿæ˜¯å­—å…¸ï¼ŒæŠŠæ•°ç»„ä¸­çš„å­—å…¸è½¬æ¢æˆæ¨¡å‹. // åˆ¤æ–­å€¼æ˜¯å¦æ˜¯æ•°ç»„ if ([value isKindOfClass:[NSArray class]]) &#123; // åˆ¤æ–­å¯¹åº”ç±»æœ‰æ²¡æœ‰å®ç°å­—å…¸æ•°ç»„è½¬æ¨¡å‹æ•°ç»„çš„åè®® // arrayContainModelClass æä¾›ä¸€ä¸ªåè®®ï¼Œåªè¦éµå®ˆè¿™ä¸ªåè®®çš„ç±»ï¼Œéƒ½èƒ½æŠŠæ•°ç»„ä¸­çš„å­—å…¸è½¬æ¨¡å‹ if ([self respondsToSelector:@selector(arrayContainModelClass)]) &#123; // è½¬æ¢æˆidç±»å‹ï¼Œå°±èƒ½è°ƒç”¨ä»»ä½•å¯¹è±¡çš„æ–¹æ³• id idSelf = self; // è·å–æ•°ç»„ä¸­å­—å…¸å¯¹åº”çš„æ¨¡å‹ NSString *type = [idSelf arrayContainModelClass][key]; // ç”Ÿæˆæ¨¡å‹ Class classModel = NSClassFromString(type); NSMutableArray *arrM = [NSMutableArray array]; // éå†å­—å…¸æ•°ç»„ï¼Œç”Ÿæˆæ¨¡å‹æ•°ç»„ for (NSDictionary *dict in value) &#123; // å­—å…¸è½¬æ¨¡å‹ id model = [classModel modelWithDict3:dict]; [arrM addObject:model]; &#125; // æŠŠæ¨¡å‹æ•°ç»„èµ‹å€¼ç»™value value = arrM; &#125; &#125; // å¦‚æœæ¨¡å‹å±æ€§æ•°é‡å¤§äºå­—å…¸é”®å€¼å¯¹æ•°ç†ï¼Œæ¨¡å‹å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºnil,è€ŒæŠ¥é”™ if (value) &#123; // ç»™æ¨¡å‹ä¸­å±æ€§èµ‹å€¼ [objc setValue:value forKey:key]; &#125; &#125; return objc;&#125; æ€»ç»“ï¼šæˆ‘ä»¬æ—¢ç„¶èƒ½è·å–åˆ°å±æ€§ç±»å‹ï¼Œé‚£å°±å¯ä»¥æ‹¦æˆªåˆ°æ¨¡å‹çš„é‚£ä¸ªæ•°ç»„å±æ€§ï¼Œè¿›è€Œå¯¹æ•°ç»„ä¸­æ¯ä¸ªæ¨¡å‹éå†å¹¶å­—å…¸è½¬æ¨¡å‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“æ•°ç»„ä¸­çš„æ¨¡å‹éƒ½æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç›®çš„ä¸æ˜¯è®©å…¶è°ƒç”¨ï¼Œè€Œæ˜¯è®©å…¶å®ç°å¹¶è¿”å›æ¨¡å‹çš„ç±»å‹ã€‚ è¿™é‡Œæåˆ°çš„ä½ å¦‚æœä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå»ºè®®å‚è€ƒæˆ‘çš„Demoï¼Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ã€‚ runtime å…¶å®ƒä½œç”¨ã€Œé¢è¯•ç†Ÿæ‚‰ã€ åŠ¨æ€æ·»åŠ æ–¹æ³•åº”ç”¨åœºæ™¯ï¼šå¦‚æœä¸€ä¸ªç±»æ–¹æ³•éå¸¸å¤šï¼ŒåŠ è½½ç±»åˆ°å†…å­˜çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒè€—è´¹èµ„æºï¼Œéœ€è¦ç»™æ¯ä¸ªæ–¹æ³•ç”Ÿæˆæ˜ å°„è¡¨ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€ç»™æŸä¸ªç±»ï¼Œæ·»åŠ æ–¹æ³•è§£å†³ã€‚ æ³¨è§£ï¼šOC ä¸­æˆ‘ä»¬å¾ˆä¹ æƒ¯çš„ä¼šç”¨æ‡’åŠ è½½ï¼Œå½“ç”¨åˆ°çš„æ—¶å€™æ‰å»åŠ è½½å®ƒï¼Œä½†æ˜¯å®é™…ä¸Šåªè¦ä¸€ä¸ªç±»å®ç°äº†æŸä¸ªæ–¹æ³•ï¼Œå°±ä¼šè¢«åŠ è½½è¿›å†…å­˜ã€‚å½“æˆ‘ä»¬ä¸æƒ³åŠ è½½è¿™ä¹ˆå¤šæ–¹æ³•çš„æ—¶å€™ï¼Œå°±ä¼šä½¿ç”¨åˆ° runtime åŠ¨æ€çš„æ·»åŠ æ–¹æ³•ã€‚ éœ€æ±‚ï¼šruntime åŠ¨æ€æ·»åŠ æ–¹æ³•å¤„ç†è°ƒç”¨ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³• å’Œ å»é™¤æŠ¥é”™ã€‚ æ¡ˆä¾‹ä»£ç ï¼šæ–¹æ³•+è°ƒç”¨+æ‰“å°è¾“å‡º123456789101112131415161718192021222324252627282930313233343536- (void)viewDidLoad &#123; [super viewDidLoad]; Person *p = [[Person alloc] init]; // é»˜è®¤personï¼Œæ²¡æœ‰å®ç°run:æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡performSelectorè°ƒç”¨ï¼Œä½†æ˜¯ä¼šæŠ¥é”™ã€‚ // åŠ¨æ€æ·»åŠ æ–¹æ³•å°±ä¸ä¼šæŠ¥é”™ [p performSelector:@selector(run:) withObject:@10];&#125;@implementation Person// æ²¡æœ‰è¿”å›å€¼,1ä¸ªå‚æ•°// void,(id,SEL)void aaa(id self, SEL _cmd, NSNumber *meter) &#123; NSLog(@"è·‘äº†%@ç±³", meter);&#125;// ä»»ä½•æ–¹æ³•é»˜è®¤éƒ½æœ‰ä¸¤ä¸ªéšå¼å‚æ•°,self,_cmdï¼ˆå½“å‰æ–¹æ³•çš„æ–¹æ³•ç¼–å·ï¼‰// ä»€ä¹ˆæ—¶å€™è°ƒç”¨:åªè¦ä¸€ä¸ªå¯¹è±¡è°ƒç”¨äº†ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³•å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•,è¿›è¡Œå¤„ç†// ä½œç”¨:åŠ¨æ€æ·»åŠ æ–¹æ³•,å¤„ç†æœªå®ç°+ (BOOL)resolveInstanceMethod:(SEL)sel&#123; // [NSStringFromSelector(sel) isEqualToString:@"run"]; if (sel == NSSelectorFromString(@"run:")) &#123; // åŠ¨æ€æ·»åŠ runæ–¹æ³• // class: ç»™å“ªä¸ªç±»æ·»åŠ æ–¹æ³• // SEL: æ·»åŠ å“ªä¸ªæ–¹æ³•ï¼Œå³æ·»åŠ æ–¹æ³•çš„æ–¹æ³•ç¼–å· // IMP: æ–¹æ³•å®ç° =&gt; å‡½æ•° =&gt; å‡½æ•°å…¥å£ =&gt; å‡½æ•°åï¼ˆæ·»åŠ æ–¹æ³•çš„å‡½æ•°å®ç°ï¼ˆå‡½æ•°åœ°å€ï¼‰ï¼‰ // type: æ–¹æ³•ç±»å‹ï¼Œ(è¿”å›å€¼+å‚æ•°ç±»å‹) v:void @:å¯¹è±¡-&gt;self :è¡¨ç¤ºSEL-&gt;_cmd class_addMethod(self, sel, (IMP)aaa, "v@:@"); return YES; &#125; return [super resolveInstanceMethod:sel];&#125;@end// æ‰“å°è¾“å‡º2016-02-17 19:05:03.917 runtime[12761:543574] runtimeåŠ¨æ€æ·»åŠ æ–¹æ³•--è·‘äº†10ç±³ åŠ¨æ€å˜é‡æ§åˆ¶ ç°åœ¨æœ‰ä¸€ä¸ªPersonç±»ï¼Œåˆ›å»º xiaomingå¯¹è±¡ åŠ¨æ€è·å– XiaoMing ç±»ä¸­çš„æ‰€æœ‰å±æ€§ [å½“ç„¶åŒ…æ‹¬ç§æœ‰] 1Ivar *ivar = class_copyIvarList([self.xiaoming class], &amp;count); éå†å±æ€§æ‰¾åˆ°å¯¹åº”nameå­—æ®µ 1const char *varName = ivar_getName(var); ä¿®æ”¹å¯¹åº”çš„å­—æ®µå€¼æˆ20 1object_setIvar(self.xiaoMing, var, @"20"); ä»£ç å‚è€ƒ 1234567891011121314-(void)answer&#123; unsigned int count = 0; Ivar *ivar = class_copyIvarList([self.xiaoMing class], &amp;count); for (int i = 0; i&lt;count; i++) &#123; Ivar var = ivar[i]; const char *varName = ivar_getName(var); NSString *name = [NSString stringWithUTF8String:varName]; if ([name isEqualToString:@"_age"]) &#123; object_setIvar(self.xiaoMing, var, @"20"); break; &#125; &#125; NSLog(@"XiaoMing's age is %@",self.xiaoMing.age); &#125; å®ç°NSCodingçš„è‡ªåŠ¨å½’æ¡£å’Œè§£æ¡£å¦‚æœä½ å®ç°è¿‡è‡ªå®šä¹‰æ¨¡å‹æ•°æ®æŒä¹…åŒ–çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆä½ ä¹Ÿè‚¯å®šæ˜ç™½ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å‹æœ‰è®¸å¤šä¸ªå±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªå±æ€§éƒ½å®ç°ä¸€éencodeObject å’Œ decodeObjectForKeyæ–¹æ³•ï¼Œå¦‚æœè¿™æ ·çš„æ¨¡å‹åˆæœ‰å¾ˆå¤šä¸ªï¼Œè¿™è¿˜çœŸçš„æ˜¯ä¸€ä¸ªååˆ†éº»çƒ¦çš„äº‹æƒ…ã€‚ä¸‹é¢æ¥çœ‹çœ‹ç®€å•çš„å®ç°æ–¹å¼ã€‚ å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªMovieç±»ï¼Œæœ‰3ä¸ªå±æ€§ã€‚å…ˆçœ‹ä¸‹ .hæ–‡ä»¶12345678// Movie.hæ–‡ä»¶//1. å¦‚æœæƒ³è¦å½“å‰ç±»å¯ä»¥å®ç°å½’æ¡£ä¸åå½’æ¡£ï¼Œéœ€è¦éµå®ˆä¸€ä¸ªåè®®NSCoding@interface Movie : NSObject&lt;NSCoding&gt;@property (nonatomic, copy) NSString *movieId;@property (nonatomic, copy) NSString *movieName;@property (nonatomic, copy) NSString *pic_url;@end å¦‚æœæ˜¯æ­£å¸¸å†™æ³•ï¼Œ .m æ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š123456789101112131415161718192021// Movie.mæ–‡ä»¶@implementation Movie- (void)encodeWithCoder:(NSCoder *)aCoder&#123; [aCoder encodeObject:_movieId forKey:@"id"]; [aCoder encodeObject:_movieName forKey:@"name"]; [aCoder encodeObject:_pic_url forKey:@"url"];&#125;- (id)initWithCoder:(NSCoder *)aDecoder&#123; if (self = [super init]) &#123; self.movieId = [aDecoder decodeObjectForKey:@"id"]; self.movieName = [aDecoder decodeObjectForKey:@"name"]; self.pic_url = [aDecoder decodeObjectForKey:@"url"]; &#125; return self;&#125;@end å¦‚æœè¿™é‡Œæœ‰100ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿåªèƒ½æŠŠ100ä¸ªå±æ€§éƒ½ç»™å†™ä¸€éå—ã€‚ ä¸è¿‡ä½ ä¼šä½¿ç”¨runtimeåï¼Œè¿™é‡Œå°±æœ‰æ›´ç®€ä¾¿çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445#import "Movie.h"#import &lt;objc/runtime.h&gt;@implementation Movie- (void)encodeWithCoder:(NSCoder *)encoder&#123; unsigned int count = 0; Ivar *ivars = class_copyIvarList([Movie class], &amp;count); for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºiä½ç½®å¯¹åº”çš„æˆå‘˜å˜é‡ Ivar ivar = ivars[i]; // æŸ¥çœ‹æˆå‘˜å˜é‡ const char *name = ivar_getName(ivar); // å½’æ¡£ NSString *key = [NSString stringWithUTF8String:name]; id value = [self valueForKey:key]; [encoder encodeObject:value forKey:key]; &#125; free(ivars);&#125;- (id)initWithCoder:(NSCoder *)decoder&#123; if (self = [super init]) &#123; unsigned int count = 0; Ivar *ivars = class_copyIvarList([Movie class], &amp;count); for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºiä½ç½®å¯¹åº”çš„æˆå‘˜å˜é‡ Ivar ivar = ivars[i]; // æŸ¥çœ‹æˆå‘˜å˜é‡ const char *name = ivar_getName(ivar); // å½’æ¡£ NSString *key = [NSString stringWithUTF8String:name]; id value = [decoder decodeObjectForKey:key]; // è®¾ç½®åˆ°æˆå‘˜å˜é‡èº«ä¸Š [self setValue:value forKey:key]; &#125; free(ivars); &#125; return self;&#125;@end è¿™æ ·çš„æ–¹å¼å®ç°ï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ªå±æ€§ï¼Œå†™è¿™å‡ è¡Œä»£ç å°±æå®šäº†ã€‚æ€ä¹ˆï¼Œä»£ç æœ‰ç‚¹å¤šï¼Œå¥½è¯´ä¸‹é¢çœ‹çœ‹æ›´åŠ ç®€ä¾¿çš„æ–¹æ³•ï¼šä¸¤å¥ä»£ç æå®šã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#import "Movie.h"#import &lt;objc/runtime.h&gt;#define encodeRuntime(A) \\unsigned int count = 0;\Ivar *ivars = class_copyIvarList([A class], &amp;count);\for (int i = 0; i&lt;count; i++) &#123;\Ivar ivar = ivars[i];\const char *name = ivar_getName(ivar);\NSString *key = [NSString stringWithUTF8String:name];\id value = [self valueForKey:key];\[encoder encodeObject:value forKey:key];\&#125;\free(ivars);\\#define initCoderRuntime(A) \\if (self = [super init]) &#123;\unsigned int count = 0;\Ivar *ivars = class_copyIvarList([A class], &amp;count);\for (int i = 0; i&lt;count; i++) &#123;\Ivar ivar = ivars[i];\const char *name = ivar_getName(ivar);\NSString *key = [NSString stringWithUTF8String:name];\id value = [decoder decodeObjectForKey:key];\[self setValue:value forKey:key];\&#125;\free(ivars);\&#125;\return self;\\@implementation Movie- (void)encodeWithCoder:(NSCoder *)encoder&#123; encodeRuntime(Movie)&#125;- (id)initWithCoder:(NSCoder *)decoder&#123; initCoderRuntime(Movie)&#125;@end ä¼˜åŒ–ï¼šä¸Šé¢æ˜¯encodeWithCoder å’Œ initWithCoderè¿™ä¸¤ä¸ªæ–¹æ³•æŠ½æˆå®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå®å•ç‹¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œè¿™é‡Œä»¥åéœ€è¦è¿›è¡Œæ•°æ®æŒä¹…åŒ–çš„æ¨¡å‹éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªå®ã€‚ runtime ä¸‹Classçš„å„é¡¹æ“ä½œä¸‹é¢æ˜¯ runtime ä¸‹Classçš„å¸¸è§æ–¹æ³• åŠ å¸¦æœ‰ä½¿ç”¨ç¤ºä¾‹ä»£ç ã€‚å„é¡¹æ“ä½œï¼ŒåŸè‘— http://www.jianshu.com/p/46dd81402f63 unsigned int count; è·å–å±æ€§åˆ—è¡¨ 12345objc_property_t *propertyList = class_copyPropertyList([self class], &amp;count); for (unsigned int i=0; i&lt;count; i++) &#123; const char *propertyName = property_getName(propertyList[i]); NSLog(@"property----&gt;%@", [NSString stringWithUTF8String:propertyName]); &#125; è·å–æ–¹æ³•åˆ—è¡¨ 12345Method *methodList = class_copyMethodList([self class], &amp;count);for (unsigned int i; i&lt;count; i++) &#123; Method method = methodList[i]; NSLog(@"method----&gt;%@", NSStringFromSelector(method_getName(method)));&#125; è·å–æˆå‘˜å˜é‡åˆ—è¡¨ 123456Ivar *ivarList = class_copyIvarList([self class], &amp;count); for (unsigned int i; i&lt;count; i++) &#123; Ivar myIvar = ivarList[i]; const char *ivarName = ivar_getName(myIvar); NSLog(@"Ivar----&gt;%@", [NSString stringWithUTF8String:ivarName]); &#125; è·å–åè®®åˆ—è¡¨ 123456__unsafe_unretained Protocol **protocolList = class_copyProtocolList([self class], &amp;count); for (unsigned int i; i&lt;count; i++) &#123; Protocol *myProtocal = protocolList[i]; const char *protocolName = protocol_getName(myProtocal); NSLog(@"protocol----&gt;%@", [NSString stringWithUTF8String:protocolName]); &#125; ç°åœ¨æœ‰ä¸€ä¸ªPersonç±»ï¼Œå’Œpersonåˆ›å»ºçš„xiaomingå¯¹è±¡,æœ‰test1å’Œtest2ä¸¤ä¸ªæ–¹æ³• è·å¾—ç±»æ–¹æ³• 123Class PersonClass = object_getClass([Person class]);SEL oriSEL = @selector(test1);Method oriMethod = _class_getMethod(xiaomingClass, oriSEL); è·å¾—å®ä¾‹æ–¹æ³• 123Class PersonClass = object_getClass([xiaoming class]);SEL oriSEL = @selector(test2);Method cusMethod = class_getInstanceMethod(xiaomingClass, oriSEL); æ·»åŠ æ–¹æ³• 1BOOL addSucc = class_addMethod(xiaomingClass, oriSEL, method_getImplementation(cusMethod), method_getTypeEncoding(cusMethod)); æ›¿æ¢åŸæ–¹æ³•å®ç° 1class_replaceMethod(toolClass, cusSEL, method_getImplementation(oriMethod), method_getTypeEncoding(oriMethod)); äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç° 1method_exchangeImplementations(oriMethod, cusMethod); å¸¸ç”¨æ–¹æ³•12345678910111213141516171819202122232425262728293031// å¾—åˆ°ç±»çš„æ‰€æœ‰æ–¹æ³• Method *allMethods = class_copyMethodList([Person class], &amp;count);// å¾—åˆ°æ‰€æœ‰æˆå‘˜å˜é‡ Ivar *allVariables = class_copyIvarList([Person class], &amp;count);// å¾—åˆ°æ‰€æœ‰å±æ€§ objc_property_t *properties = class_copyPropertyList([Person class], &amp;count);// æ ¹æ®åå­—å¾—åˆ°ç±»å˜é‡çš„IvaræŒ‡é’ˆï¼Œä½†æ˜¯è¿™ä¸ªåœ¨OCä¸­å¥½åƒæ¯«æ— æ„ä¹‰Ivar oneCVIvar = class_getClassVariable([Person class], name);// æ ¹æ®åå­—å¾—åˆ°å®ä¾‹å˜é‡çš„IvaræŒ‡é’ˆ Ivar oneIVIvar = class_getInstanceVariable([Person class], name);// æ‰¾åˆ°åå¯ä»¥ç›´æ¥å¯¹ç§æœ‰å˜é‡èµ‹å€¼ object_setIvar(_per, oneIVIvar, @"Mike");//å¼ºåˆ¶ä¿®æ”¹nameå±æ€§/* åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼š ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºClass cls ç±»å‹ï¼› ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¾…è°ƒç”¨çš„æ–¹æ³•åç§°ï¼› ç¬¬ä¸‰ä¸ªå‚æ•°(IMP)myAddingFunctionï¼ŒIMPæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿™é‡Œè¡¨ç¤ºæŒ‡å®šå…·ä½“å®ç°æ–¹æ³•myAddingFunctionï¼› ç¬¬å››ä¸ªå‚æ•°è¡¨æ–¹æ³•çš„å‚æ•°ï¼Œ0ä»£è¡¨æ²¡æœ‰å‚æ•°ï¼› */ class_addMethod([_per class], @selector(sayHi), (IMP)myAddingFunction, 0);// äº¤æ¢ä¸¤ä¸ªæ–¹æ³• method_exchangeImplementations(method1, method2);// å…³è”ä¸¤ä¸ªå¯¹è±¡objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)/* id object :è¡¨ç¤ºå…³è”è€…ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå˜é‡åç†æ‰€å½“ç„¶ä¹Ÿæ˜¯object const void *key :è·å–è¢«å…³è”è€…çš„ç´¢å¼•key id value :è¢«å…³è”è€…ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªblock objc_AssociationPolicy policy : å…³è”æ—¶é‡‡ç”¨çš„åè®®ï¼Œæœ‰assignï¼Œretainï¼Œcopyç­‰åè®®ï¼Œä¸€èˆ¬ä½¿ç”¨OBJC_ASSOCIATION_RETAIN_NONATOMIC*/ runtime å‡ ä¸ªå‚æ•°æ¦‚å¿µä»¥ä¸Šçš„å‡ ç§æ–¹æ³•åº”è¯¥ç®—æ˜¯runtimeåœ¨å®é™…åœºæ™¯ä¸­æ‰€åº”ç”¨çš„å¤§éƒ¨åˆ†çš„æƒ…å†µäº†ï¼Œå¹³å¸¸çš„ç¼–ç ä¸­å·®ä¸å¤šè¶³å¤Ÿç”¨äº†ã€‚è¿™é‡Œåœ¨å¯¹ runtime å‡ ä¸ªå‚æ•°æ¦‚å¿µï¼Œåšä¸€ç®€å•è¯´æ˜ 1ã€objc_msgSendè¿™æ˜¯ä¸ªæœ€åŸºæœ¬çš„ç”¨äºå‘é€æ¶ˆæ¯çš„å‡½æ•°ã€‚å…¶å®ç¼–è¯‘å™¨ä¼šæ ¹æ®æƒ…å†µåœ¨objc_msgSendï¼Œ objc_msgSend_stret,ï¼Œobjc_msgSendSuperï¼Œ æˆ– objc_msgSendSuper_stret å››ä¸ªæ–¹æ³•ä¸­é€‰æ‹©ä¸€ä¸ªæ¥è°ƒç”¨ã€‚å¦‚æœæ¶ˆæ¯æ˜¯ä¼ é€’ç»™è¶…ç±»ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨åå­—å¸¦æœ‰ Super çš„å‡½æ•°ï¼›å¦‚æœæ¶ˆæ¯è¿”å›å€¼æ˜¯æ•°æ®ç»“æ„è€Œä¸æ˜¯ç®€å•å€¼æ—¶ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨åå­—å¸¦æœ‰stretçš„å‡½æ•°ã€‚ 2ã€SELobjc_msgSendå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°ç±»å‹ä¸ºSELï¼Œå®ƒæ˜¯selectoråœ¨Objcä¸­çš„è¡¨ç¤ºç±»å‹ï¼ˆSwiftä¸­æ˜¯Selectorç±»ï¼‰ã€‚selectoræ˜¯æ–¹æ³•é€‰æ‹©å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºåŒºåˆ†æ–¹æ³•çš„ IDï¼Œè€Œè¿™ä¸ª ID çš„æ•°æ®ç»“æ„æ˜¯SEL:typedef struct objc_selector *SEL;å…¶å®å®ƒå°±æ˜¯ä¸ªæ˜ å°„åˆ°æ–¹æ³•çš„Cå­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥ç”¨ Objc ç¼–è¯‘å™¨å‘½ä»¤@selector()``æˆ–è€… Runtime ç³»ç»Ÿçš„sel_registerNameå‡½æ•°æ¥è·å¾—ä¸€ä¸ªSELç±»å‹çš„æ–¹æ³•é€‰æ‹©å™¨ã€‚ 3ã€idobjc_msgSendç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ä¸ºidï¼Œå¤§å®¶å¯¹å®ƒéƒ½ä¸é™Œç”Ÿï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘ç±»å®ä¾‹çš„æŒ‡é’ˆï¼štypedef struct objc_object *id;é‚£objc_objectåˆæ˜¯å•¥å‘¢ï¼šstruct objc_object { Class isa; };objc_objectç»“æ„ä½“åŒ…å«ä¸€ä¸ªisaæŒ‡é’ˆï¼Œæ ¹æ®isaæŒ‡é’ˆå°±å¯ä»¥é¡ºè—¤æ‘¸ç“œæ‰¾åˆ°å¯¹è±¡æ‰€å±çš„ç±»ã€‚ 4ã€runtime.hé‡ŒClassçš„å®šä¹‰12345678910111213141516struct objc_class &#123; Class isa OBJC_ISA_AVAILABILITY;//æ¯ä¸ªClasséƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ #if !__OBJC2__ Class super_class OBJC2_UNAVAILABLE;//çˆ¶ç±» const char *name OBJC2_UNAVAILABLE;//ç±»å long version OBJC2_UNAVAILABLE;//ç±»ç‰ˆæœ¬ long info OBJC2_UNAVAILABLE;//!*!ä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†ã€‚å¦‚ï¼šCLS_CLASS (0x1L)è¡¨ç¤ºè¯¥ç±»ä¸ºæ™®é€šclass; CLS_META(0x2L)è¡¨ç¤ºè¯¥ç±»ä¸ºmetaclassç­‰(runtime.hä¸­æœ‰è¯¦ç»†åˆ—å‡º) long instance_size OBJC2_UNAVAILABLE;//å®ä¾‹å¤§å° struct objc_ivar_list *ivars OBJC2_UNAVAILABLE;//å­˜å‚¨æ¯ä¸ªå®ä¾‹å˜é‡çš„å†…å­˜åœ°å€ struct objc_method_list **methodLists OBJC2_UNAVAILABLE;//!*!æ ¹æ®infoçš„ä¿¡æ¯ç¡®å®šæ˜¯ç±»è¿˜æ˜¯å®ä¾‹ï¼Œè¿è¡Œä»€ä¹ˆå‡½æ•°æ–¹æ³•ç­‰ struct objc_cache *cache OBJC2_UNAVAILABLE;//ç¼“å­˜ struct objc_protocol_list *protocols OBJC2_UNAVAILABLE;//åè®®#endif &#125; OBJC2_UNAVAILABLE; å¯ä»¥çœ‹åˆ°è¿è¡Œæ—¶ä¸€ä¸ªç±»è¿˜å…³è”äº†å®ƒçš„è¶…ç±»æŒ‡é’ˆï¼Œç±»åï¼Œæˆå‘˜å˜é‡ï¼Œæ–¹æ³•ï¼Œç¼“å­˜ï¼Œè¿˜æœ‰é™„å±çš„åè®®ã€‚åœ¨objc_classç»“æ„ä½“ä¸­ï¼š`ivarsæ˜¯objc_ivar_listæŒ‡é’ˆï¼›methodListsæ˜¯æŒ‡å‘objc_method_listæŒ‡é’ˆçš„æŒ‡é’ˆã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥åŠ¨æ€ä¿®æ”¹*methodListsçš„å€¼æ¥æ·»åŠ æˆå‘˜æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯Category`å®ç°çš„åŸç†ã€‚ ä¸Šé¢è®²åˆ°çš„æ‰€æœ‰ä¸œè¥¿éƒ½åœ¨Demoé‡Œï¼Œå¦‚æœä½ æ„Ÿè§‰è¿™æ ·éš¾ä»¥ç†è§£ï¼Œé‚£å¼ºçƒˆå»ºè®®ä½ ä¸‹è½½Demo ï¼Œè¿è¡Œä»£ç åŠ ä¸Šæ–‡å­—æ³¨è§£ï¼Œæ•ˆæœä¼šæ›´å¥½ï¼Œå¦‚æœä½ è§‰å¾—ä¸é”™ï¼Œè¿˜è¯·ä¸ºæˆ‘çš„Demo starä¸€ä¸ªã€‚ ä»€ä¹ˆæ˜¯ method swizzlingï¼ˆä¿—ç§°é»‘é­”æ³•ï¼‰ ç®€å•è¯´å°±æ˜¯è¿›è¡Œæ–¹æ³•äº¤æ¢ åœ¨Objective-Cä¸­è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå…¶å®æ˜¯å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯ï¼ŒæŸ¥æ‰¾æ¶ˆæ¯çš„å”¯ä¸€ä¾æ®æ˜¯selectorçš„åå­—ã€‚åˆ©ç”¨Objective-Cçš„åŠ¨æ€ç‰¹æ€§ï¼Œå¯ä»¥å®ç°åœ¨è¿è¡Œæ—¶å·æ¢selectorå¯¹åº”çš„æ–¹æ³•å®ç°ï¼Œè¾¾åˆ°ç»™æ–¹æ³•æŒ‚é’©çš„ç›®çš„ æ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨ï¼Œå­˜æ”¾ç€æ–¹æ³•çš„åå­—å’Œæ–¹æ³•å®ç°çš„æ˜ å°„å…³ç³»ï¼Œselectorçš„æœ¬è´¨å…¶å®å°±æ˜¯æ–¹æ³•åï¼ŒIMPæœ‰ç‚¹ç±»ä¼¼å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘å…·ä½“çš„Methodå®ç°ï¼Œé€šè¿‡selectorå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„IMPã€‚ äº¤æ¢æ–¹æ³•çš„å‡ ç§å®ç°æ–¹å¼ åˆ©ç”¨ method_exchangeImplementations äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç° åˆ©ç”¨ class_replaceMethod æ›¿æ¢æ–¹æ³•çš„å®ç° åˆ©ç”¨ method_setImplementation æ¥ç›´æ¥è®¾ç½®æŸä¸ªæ–¹æ³•çš„IMPã€‚ è¿™é‡Œå¯ä»¥å‚è€ƒç®€å‹è¿™ç¯‡ï¼šã€Runtime Method Swizzlingå¼€å‘å®ä¾‹æ±‡æ€»ã€‘http://www.jianshu.com/p/f6dad8e1b848 è¿™é‡Œå¯ä»¥å‚è€ƒæƒå¨è¿™ç¯‡ï¼šOCè¿è¡Œæ—¶é»‘é­”æ³• Method Swizzling æœ€åä¸€é“é¢è¯•é¢˜çš„æ³¨è§£ ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆ?1234567891011@implementation Son : NSObject- (id)init&#123; self = [super init]; if (self) &#123; NSLog(@"%@", NSStringFromClass([self class])); NSLog(@"%@", NSStringFromClass([super class])); &#125; return self;&#125;@end å…ˆæ€è€ƒä¸€ä¸‹ï¼Œä¼šæ‰“å°å‡ºæ¥ä»€ä¹ˆâ“å…³æ³¨æˆ‘çš„æ›´å¤šå¹²è´§åˆ†äº« ^_^. ç­”æ¡ˆï¼šéƒ½è¾“å‡º Son class è·å–å½“å‰æ–¹æ³•çš„è°ƒç”¨è€…çš„ç±»ï¼ŒsuperClass è·å–å½“å‰æ–¹æ³•çš„è°ƒç”¨è€…çš„çˆ¶ç±»ï¼Œsuper ä»…ä»…æ˜¯ä¸€ä¸ªç¼–è¯‘æŒ‡ç¤ºå™¨ï¼Œå°±æ˜¯ç»™ç¼–è¯‘å™¨çœ‹çš„ï¼Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆã€‚ æœ¬è´¨ï¼šåªè¦ç¼–è¯‘å™¨çœ‹åˆ°superè¿™ä¸ªæ ‡å¿—ï¼Œå°±ä¼šè®©å½“å‰å¯¹è±¡å»è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œæœ¬è´¨è¿˜æ˜¯å½“å‰å¯¹è±¡åœ¨è°ƒç”¨ è¿™ä¸ªé¢˜ç›®ä¸»è¦æ˜¯è€ƒå¯Ÿå…³äºobjcä¸­å¯¹ self å’Œ super çš„ç†è§£ï¼š self æ˜¯ç±»çš„éšè—å‚æ•°ï¼ŒæŒ‡å‘å½“å‰è°ƒç”¨æ–¹æ³•çš„è¿™ä¸ªç±»çš„å®ä¾‹ã€‚è€Œ super æœ¬è´¨æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨æ ‡ç¤ºç¬¦ï¼Œå’Œ self æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªæ¶ˆæ¯æ¥å—è€… å½“ä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼› è€Œå½“ä½¿ç”¨ superæ—¶ï¼Œåˆ™ä»çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³• è°ƒç”¨ [self class] æ—¶ï¼Œä¼šè½¬åŒ–æˆ objc_msgSend å‡½æ•° 12345678910111213141516id objc_msgSend(id self, SEL op, ...)- è°ƒç”¨ `[super class]`æ—¶ï¼Œä¼šè½¬åŒ–æˆ `objc_msgSendSuper` å‡½æ•°.id objc_msgSendSuper(struct objc_super *super, SEL op, ...)ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ objc_super è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ struct objc_super &#123; __unsafe_unretained id receiver; __unsafe_unretained Class super_class; &#125;;ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ receiver, ç±»ä¼¼äºä¸Šé¢çš„ objc_msgSendå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°selfç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®°å½•å½“å‰ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆï¼Œå‘Šè¯‰ç¨‹åºä»çˆ¶ç±»ä¸­å¼€å§‹æ‰¾æ–¹æ³•ï¼Œæ‰¾åˆ°æ–¹æ³•åï¼Œæœ€åå†…éƒ¨æ˜¯ä½¿ç”¨ objc_msgSend(objc_super-&gt;receiver, @selector(class))å»è°ƒç”¨ï¼Œ æ­¤æ—¶å·²ç»å’Œ[self class]è°ƒç”¨ç›¸åŒäº†ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä»ç„¶è¿”å› Sonobjc Runtime å¼€æºä»£ç å¯¹- (Class)classæ–¹æ³•çš„å®ç°-(Class)class &#123; return object_getClass(self); &#125; runtimeæ¨¡å—ç®€å‹æ–‡ç« æ¨è(â¤ï¸æ•°é‡è¾ƒå¤š) ç®€å‹ runtimeæ¨¡å—æ¨èé˜…è¯»æ–‡ç«  è¥¿æœ¨ å®Œæ•´æ€»ç»“ http://www.jianshu.com/p/6b905584f536 å¤©å£ä¸‰æ°´ç¾Š objc_msgSend http://www.jianshu.com/p/9e1bc8d890f9 å¤œåƒå¯»å¢¨ è¯¦è§£ http://www.jianshu.com/p/46dd81402f63 è¢å³¥Seemygo å¿«é€Ÿä¸Šæ‰‹ http://www.jianshu.com/p/e071206103a4 éƒ‘é’¦æ´ª_ å®ç°è‡ªåŠ¨åŒ–å½’æ¡£ http://www.jianshu.com/p/bd24c3f3cd0a HenryCheng æ¶ˆæ¯æœºåˆ¶ http://www.jianshu.com/p/f6300eb3ec3d å–æŠ¥çš„å°ç”»å®¶Sure Method Swizzlingå¼€å‘å®ä¾‹æ±‡æ€» http://www.jianshu.com/p/f6dad8e1b848 æ»•å¤§é¸Ÿ OCæœ€å®ç”¨çš„runtimeæ€»ç»“ http://www.jianshu.com/p/ab966e8a82e2 é»‘èŠ±ç™½èŠ± Runtimeåœ¨å®é™…å¼€å‘ä¸­çš„åº”ç”¨ http://www.jianshu.com/p/851b21870d91 OC &amp; Swift Runtime é¢è¯•æœ€å¸¸é—®åˆ°çš„é¢˜æ•´ç†ã€å»ºè®®çœ‹ã€‘è¯´æ˜ï¼šæ­¤é¢è¯•é¢˜é’ˆå¯¹æ€§çš„æ‘˜å½•æ•´ç†ï¼Œåªä¸ºæ–¹ä¾¿ åœ¨é¢è¯•è·¯ä¸Šå‡†å¤‡çš„ä½  ï¼Œä¼šæ³¨æœ‰åŸæ–‡ã€‚ 1ã€æ•´ç†åŸæ–‡ï¼š2017å¹´5æœˆiOSæ‹›äººå¿ƒå¾—ï¼ˆé™„é¢è¯•é¢˜ï¼‰ Runtime objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectoré”™è¯¯ï¼ŸiOSæœ‰å“ªäº›æœºåˆ¶æ¥é¿å…èµ°åˆ°è¿™ä¸€æ­¥ï¼Ÿ èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ ç»™ç±»æ·»åŠ ä¸€ä¸ªå±æ€§åï¼Œåœ¨ç±»ç»“æ„ä½“é‡Œå“ªäº›å…ƒç´ ä¼šå‘ç”Ÿå˜åŒ–ï¼Ÿ RunLoop runloopæ˜¯æ¥åšä»€ä¹ˆçš„ï¼Ÿrunloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿä¸»çº¿ç¨‹é»˜è®¤å¼€å¯äº†runloopä¹ˆï¼Ÿå­çº¿ç¨‹å‘¢ï¼Ÿ runloopçš„modeæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿæœ‰å‡ ç§modeï¼Ÿ ä¸ºä»€ä¹ˆæŠŠNSTimerå¯¹è±¡ä»¥NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰æ·»åŠ åˆ°4. ä¸»è¿è¡Œå¾ªç¯ä»¥åï¼Œæ»‘åŠ¨scrollviewçš„æ—¶å€™NSTimerå´ä¸åŠ¨äº†ï¼Ÿ è‹¹æœæ˜¯å¦‚ä½•å®ç°Autorelease Poolçš„ï¼Ÿ //â€”â€”â€”â€”â€”â€”â€“ ã€æˆ‘æ˜¯åˆ†å‰²çº¿ã€‘ â€”â€”â€”â€”â€”â€”â€”// æ•´ç†åŸæ–‡ï¼š2017å¹´iOSé¢è¯•é¢˜æ€»ç»“ï¼Œé™„ç­”æ¡ˆ Runtime 01 é—®é¢˜ï¼š objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ è§£ç­”ï¼š æ ¹æ®å¯¹è±¡çš„ isa æŒ‡é’ˆæ‰¾åˆ°ç±»å¯¹è±¡ idï¼Œåœ¨æŸ¥è¯¢ç±»å¯¹è±¡é‡Œé¢çš„ methodLists æ–¹æ³•å‡½æ•°åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰åœ¨å¥½åˆ°ï¼Œåœ¨æ²¿ç€ superClass ,å¯»æ‰¾çˆ¶ç±»ï¼Œå†åœ¨çˆ¶ç±» methodLists æ–¹æ³•åˆ—è¡¨é‡Œé¢æŸ¥è¯¢ï¼Œæœ€ç»ˆæ‰¾åˆ° SEL ,æ ¹æ® id å’Œ SEL ç¡®è®¤ IMPï¼ˆæŒ‡é’ˆå‡½æ•°ï¼‰,åœ¨å‘é€æ¶ˆæ¯ï¼› 03 é—®é¢˜ï¼š ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectoré”™è¯¯ï¼ŸiOSæœ‰å“ªäº›æœºåˆ¶æ¥é¿å…èµ°åˆ°è¿™ä¸€æ­¥ï¼Ÿ è§£ç­”ï¼š å½“å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ç±»é‡Œé¢çš„ methodLists åˆ—è¡¨å»æŸ¥è¯¢æˆ‘ä»¬è¦åŠ¨ç”¨çš„SELï¼Œå½“æŸ¥è¯¢ä¸åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä¸€ç›´æ²¿ç€çˆ¶ç±»æŸ¥è¯¢ï¼Œå½“æœ€ç»ˆæŸ¥è¯¢ä¸åˆ°çš„æ—¶å€™æˆ‘ä»¬ä¼šæŠ¥ unrecognized selector é”™è¯¯ï¼Œå½“ç³»ç»ŸæŸ¥è¯¢ä¸åˆ°æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ +(BOOL)resolveInstanceMethod:(SEL)sel åŠ¨æ€è§£é‡Šçš„æ–¹æ³•æ¥ç»™æˆ‘ä¸€æ¬¡æœºä¼šæ¥æ·»åŠ ï¼Œè°ƒç”¨ä¸åˆ°çš„æ–¹æ³•ã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥å†æ¬¡ä½¿ç”¨ -(id)forwardingTargetForSelector:(SEL)aSelector é‡å®šå‘çš„æ–¹æ³•æ¥å‘Šè¯‰ç³»ç»Ÿï¼Œè¯¥è°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œä¸€æ¥ä¿è¯ä¸ä¼šå´©æºƒã€‚ 04 é—®é¢˜ï¼š èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ è§£ç­”ï¼š 1ã€ä¸èƒ½å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»å¢åŠ å®ä¾‹å˜é‡ 2ã€èƒ½å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ã€‚ã€è§£é‡Šã€‘ï¼š1. ç¼–è¯‘åçš„ç±»å·²ç»æ³¨å†Œåœ¨ runtime ä¸­,ç±»ç»“æ„ä½“ä¸­çš„ objc_ivar_list å®ä¾‹å˜é‡çš„é“¾è¡¨å’Œ instance_size å®ä¾‹å˜é‡çš„å†…å­˜å¤§å°å·²ç»ç¡®å®šï¼Œruntimeä¼šè°ƒç”¨ class_setvarlayout æˆ– class_setWeaklvarLayout æ¥å¤„ç†strong weak å¼•ç”¨.æ‰€ä»¥ä¸èƒ½å‘å­˜åœ¨çš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ã€‚2. è¿è¡Œæ—¶åˆ›å»ºçš„ç±»æ˜¯å¯ä»¥æ·»åŠ å®ä¾‹å˜é‡ï¼Œè°ƒç”¨class_addIvarå‡½æ•°. ä½†æ˜¯çš„åœ¨è°ƒç”¨ objc_allocateClassPair ä¹‹åï¼Œobjc_registerClassPair ä¹‹å‰,åŸå› åŒä¸Š. 05 é—®é¢˜ï¼š runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ è§£ç­”ï¼š runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯aï¼Œé‚£ä¹ˆå°±ä¼šä»¥aä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥aä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nilã€‚ 06 é—®é¢˜ï¼š ç»™ç±»æ·»åŠ ä¸€ä¸ªå±æ€§åï¼Œåœ¨ç±»ç»“æ„ä½“é‡Œå“ªäº›å…ƒç´ ä¼šå‘ç”Ÿå˜åŒ–ï¼Ÿ è§£ç­”ï¼š instance_size ï¼šå®ä¾‹çš„å†…å­˜å¤§å°ï¼›objc_ivar_list *ivars:å±æ€§åˆ—è¡¨ RunLoop 01 é—®é¢˜ï¼š runloopæ˜¯æ¥åšä»€ä¹ˆçš„ï¼Ÿrunloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿä¸»çº¿ç¨‹é»˜è®¤å¼€å¯äº†runloopä¹ˆï¼Ÿå­çº¿ç¨‹å‘¢ï¼Ÿ è§£ç­”ï¼š runloop: å­—é¢æ„æ€å°±æ˜¯è·‘åœˆï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªå¾ªç¯è·‘åœˆï¼Œç”¨æ¥å¤„ç†çº¿ç¨‹é‡Œé¢çš„äº‹ä»¶å’Œæ¶ˆæ¯ã€‚runloopå’Œçº¿ç¨‹çš„å…³ç³»ï¼šæ¯ä¸ªçº¿ç¨‹å¦‚æœæƒ³ç»§ç»­è¿è¡Œï¼Œä¸è¢«é‡Šæ”¾ï¼Œå°±å¿…é¡»æœ‰ä¸€ä¸ªrunloopæ¥ä¸åœçš„è·‘åœˆï¼Œä»¥æ¥å¤„ç†çº¿ç¨‹é‡Œé¢çš„å„ä¸ªäº‹ä»¶å’Œæ¶ˆæ¯ã€‚ä¸»çº¿ç¨‹é»˜è®¤æ˜¯å¼€å¯ä¸€ä¸ªrunloopã€‚ä¹Ÿå°±æ˜¯è¿™ä¸ªrunloopæ‰èƒ½ä¿è¯æˆ‘ä»¬ç¨‹åºæ­£å¸¸çš„è¿è¡Œã€‚å­çº¿ç¨‹æ˜¯é»˜è®¤æ²¡æœ‰å¼€å§‹runloopçš„ 02 é—®é¢˜ï¼š runloopçš„modeæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿæœ‰å‡ ç§modeï¼Ÿ è§£ç­”ï¼š model:æ˜¯runloopé‡Œé¢çš„æ¨¡å¼ï¼Œä¸åŒçš„æ¨¡å¼ä¸‹çš„runloopå¤„ç†çš„äº‹ä»¶å’Œæ¶ˆæ¯æœ‰ä¸€å®šçš„å·®åˆ«ã€‚ç³»ç»Ÿé»˜è®¤æ³¨å†Œäº†5ä¸ªMode:ï¼ˆ1ï¼‰kCFRunLoopDefaultMode: Appçš„é»˜è®¤ Modeï¼Œé€šå¸¸ä¸»çº¿ç¨‹æ˜¯åœ¨è¿™ä¸ª Mode ä¸‹è¿è¡Œçš„ã€‚ï¼ˆ2ï¼‰UITrackingRunLoopMode: ç•Œé¢è·Ÿè¸ª Modeï¼Œç”¨äº ScrollView è¿½è¸ªè§¦æ‘¸æ»‘åŠ¨ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨æ—¶ä¸å—å…¶ä»– Mode å½±å“ã€‚ï¼ˆ3ï¼‰UIInitializationRunLoopMode: åœ¨åˆšå¯åŠ¨ App æ—¶ç¬¬è¿›å…¥çš„ç¬¬ä¸€ä¸ª Modeï¼Œå¯åŠ¨å®Œæˆåå°±ä¸å†ä½¿ç”¨ã€‚ï¼ˆ4ï¼‰GSEventReceiveRunLoopMode: æ¥å—ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨ Modeï¼Œé€šå¸¸ç”¨ä¸åˆ°ã€‚ï¼ˆ5ï¼‰kCFRunLoopCommonModes: è¿™æ˜¯ä¸€ä¸ªå ä½çš„ Modeï¼Œæ²¡æœ‰å®é™…ä½œç”¨ã€‚æ³¨æ„iOS å¯¹ä»¥ä¸Š5ä¸­modelè¿›è¡Œäº†å°è£… NSDefaultRunLoopModeã€NSRunLoopCommonModes 03 é—®é¢˜ï¼š ä¸ºä»€ä¹ˆæŠŠNSTimerå¯¹è±¡ä»¥NSDefaultRunLoopModeï¼ˆkCFRunLoopDefaultModeï¼‰æ·»åŠ åˆ°ä¸»è¿è¡Œå¾ªç¯ä»¥åï¼Œæ»‘åŠ¨scrollviewçš„æ—¶å€™NSTimerå´ä¸åŠ¨äº†ï¼Ÿ è§£ç­”ï¼š nstimeå¯¹è±¡æ˜¯åœ¨ NSDefaultRunLoopModeä¸‹é¢è°ƒç”¨æ¶ˆæ¯çš„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ»‘åŠ¨scrollviewçš„æ—¶å€™ï¼ŒNSDefaultRunLoopModeæ¨¡å¼å°±è‡ªåŠ¨åˆ‡æ¢åˆ°UITrackingRunLoopModeæ¨¡å¼ä¸‹é¢ï¼Œå´ä¸å¯ä»¥ç»§ç»­å“åº”nstimeå‘é€çš„æ¶ˆæ¯ã€‚æ‰€ä»¥å¦‚æœæƒ³åœ¨æ»‘åŠ¨scrollviewçš„æƒ…å†µä¸‹é¢è¿˜è°ƒç”¨nstimeçš„æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠnsrunloopçš„æ¨¡å¼æ›´æ”¹ä¸ºNSRunLoopCommonModes. 04 é—®é¢˜ï¼š è‹¹æœæ˜¯å¦‚ä½•å®ç°Autorelease Poolçš„ï¼Ÿ è§£ç­”ï¼š Autorelease Poolä½œç”¨ï¼šç¼“å­˜æ± ï¼Œå¯ä»¥é¿å…æˆ‘ä»¬ç»å¸¸å†™relaseçš„ä¸€ç§æ–¹å¼ã€‚å…¶å®å°±æ˜¯å»¶è¿Ÿreleaseï¼Œå°†åˆ›å»ºçš„å¯¹è±¡ï¼Œæ·»åŠ åˆ°æœ€è¿‘çš„autoreleasePoolä¸­ï¼Œç­‰åˆ°autoreleasePoolä½œç”¨åŸŸç»“æŸçš„æ—¶å€™ï¼Œä¼šå°†é‡Œé¢æ‰€æœ‰çš„å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨ - autorelease. åç»­é‡åˆ°é’ˆå¯¹runtimeå¸¸é¢ç›¸å…³ï¼Œä¼šåŠæ—¶åœ¨è¿™é‡Œè¡¥å……ï¼› æ•ˆæœå›¾ é™„ä¸Šæ€»ç»“å†™çš„å°æ · Demoï¼Œã€Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ã€â€”-&gt; [@ç å‘˜] ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>runtime</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å¼è¯¦è§£â€”ã€ŒRunloopé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^.]]></title>
    <url>%2FiOSNET%2Frunloop.html</url>
    <content type="text"><![CDATA[å¾…æ€»ç»“ï¼Œæ˜å¤©å†æ¥çœ‹å°±æœ‰äº† ï¼ ï¼ ï¼ å¯å…ˆå‚è€ƒï¼šhttp://www.jianshu.com/p/d6c5c0bf97fd]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>runloop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIæ§ä»¶è¯¦è§£â€”ã€ŒUIScrollViewæ»šåŠ¨è§†å›¾ã€]]></title>
    <url>%2FiOSUI%2FUIScrollView.html</url>
    <content type="text"><![CDATA[å¼•å¯¼ â€œ æœ¬æ–‡ä¸é€‚åˆè€å¸æœºâ€¦ â€Copyright Â© PBWln Unauthorized shall not be reproduced. æœ¬æ–‡ç« å°†ä»‹ç» iOS UIæ§ä»¶ è¯¦è§£ï¼Œæœ€å¸¸ä½¿ç”¨çš„ä¸‰å¤§æ§ä»¶ä¹‹ä¸€ UIScrollViewï¼Œå°†ä¼šåˆ†æˆä¸¤ç¯‡æ–‡ç« å®Œæ•´çš„è®²è¿° UIScrollView çš„å¸¸ç”¨å±æ€§æ–¹æ³•ä½¿ç”¨ï¼ˆåŒ…æ‹¬ä¼˜åŒ–æ–¹é¢ï¼‰åŠæ³¨æ„ç‚¹ å’Œ å®æˆ˜å¼€å‘ä½¿ç”¨åœºæ™¯æ¡ˆä¾‹ï¼Œæ–‡ç« ç¼–å†™å‘¨æœŸä¼šé•¿ä¸€äº›ï¼Œç”¨åˆ°é‚£ç‚¹å®ç”¨çš„ä¸œè¥¿ï¼Œä¼šåŠæ—¶è¡¥å……ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ UIScrollView å±æ€§æ–¹æ³•æ³¨è§£ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š UIScrollViewæ¦‚å¿µ UIScrollViewåŸºæœ¬ä½¿ç”¨(æ»šåŠ¨) UIScrollViewå±æ€§ä¸æ–¹æ³•1.å±æ€§ &amp; æ–¹æ³•2.ä½¿ç”¨æ ¼å¼ &amp; è¯´æ˜ï¼š3.ç®€æ˜æ³¨è§£ï¼š UIScrollViewä»£ç†æ–¹æ³•1.æ»‘åŠ¨ä»£ç†æ–¹æ³•ç›¸å…³2.ç¼©æ”¾ä»£ç†æ–¹æ³•ç›¸å…³3.éƒ¨åˆ†ä»£ç†æ–¹æ³•ç®€æ˜ç¤ºä¾‹ UIScrollViewå¤„ç†è§¦æ‘¸äº‹ä»¶åŸç† å¸¸è§éœ€æ±‚ç¤ºä¾‹ &amp; åŸç†è§£æ1.å¯¼èˆªæ åŠé€æ˜æ•ˆæœ2.æ§ä»¶å¯¼èˆªæ‚¬åœ3.ä¸‹æ‹‰å¤´éƒ¨å›¾ç‰‡æ”¾å¤§4.æ­£åæ— é™è½®æ’­ï¼ˆ3å¼ ï¼‰é‡ç‚¹ UIScrollViewåº•å±‚å®ç° æ­£åæ— é™è½®æ’­ï¼ˆ2å¼ ï¼‰ UIScrollView.hå±æ€§å’Œæ–¹æ³• æœŸå¾… &amp; åç»­ UIScrollViewæ¦‚å¿µ æˆ‘è¿˜æ˜¯å–œæ¬¢å…ˆçœ‹å®˜æ–¹çš„è¯´æ˜ï¼š ä¸Šå›¾ç®€æ˜é‡Šä¹‰ï¼šå¯ä»¥å±•ç¤ºæ¯”è®¾å¤‡å±å¹•æ›´å¤§åŒºåŸŸçš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹æŒ‡æ»‘åŠ¨æ¥æŸ¥çœ‹å†…å®¹è§†å›¾ï¼ˆcontent viewï¼‰çš„æ¯ä¸€éƒ¨åˆ†å†…å®¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ‰‹æŒ‡æåˆæ¥å¯¹å†…å®¹è§†å›¾è¿›è¡Œç¼©æ”¾æ“ä½œã€‚ UIScrollView æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ§ä»¶ï¼ŒUITableViewã€UICollectionViewå’ŒUITextViewç­‰å¸¸ç”¨æ§ä»¶å…¨éƒ¨ç»§æ‰¿è‡ªUIScrollViewï¼Œè€ŒUIWebViewæ§ä»¶å†…éƒ¨ä¹Ÿæ˜¯åŸºäºUIScrollViewå®ç°çš„ã€‚è€ŒUIScrollViewç»§æ‰¿è‡ªUIViewï¼Œè‡³äºå®ƒå¯ä»¥æ»šåŠ¨çš„åŸå› æˆ‘ä¸‹é¢ä¼šæœ‰åŸç†è¯´æ˜ã€‚ UIScrollViewåŸºæœ¬ä½¿ç”¨(æ»šåŠ¨) UIScrollViewçš„ä½¿ç”¨å¾ˆç®€å•ï¼ŒåŸºæœ¬ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ 3ç‚¹ï¼š 12345678910// 1.åˆ›å»ºæ»šåŠ¨è§†å›¾UIScrollView *scrollView = [[UIScrollView alloc] init];scrollView.frame = CGRectMake(0,0,375,150);[self addSubview:scrollView];// 2. è®¾ç½®æ»šåŠ¨èŒƒå›´ï¼ˆå†…å®¹è§†å›¾çš„å¤§å°ï¼‰scrollView.contentSize = CGSizeMake(ImageViewCount * self.bounds.size.width, 0);// 3. æ·»åŠ å†…å®¹[scrollView addSubview:[UIImageView new]]; è¯´æ˜ï¼šå¦‚æœæƒ³è®©UIScrollViewè¿›è¡Œæ»šåŠ¨,å¿…é¡»è®¾ç½®å¯ä»¥æ»šåŠ¨çš„èŒƒå›´ UIScrollViewå±æ€§ä¸æ–¹æ³• å±æ€§ &amp; æ–¹æ³•ï¼š12345678910111213141516å±æ€§ &amp; æ–¹æ³•ï¼š#pragma mark ------------------#pragma mark - å†…å®¹è§†å›¾å±æ€§æ–¹æ³•ç›¸å…³/** å†…å®¹è§†å›¾çš„åŸç‚¹ç›¸å¯¹äºscrollViewçš„åŸç‚¹çš„åç§»é‡(ä¸Š/å·¦ æ–¹å‘åç§»ä¸ºæ­£æ•°,ä¸‹/å³ æ–¹å‘åç§»ä¸ºè´Ÿæ•°),é»˜è®¤ä¸ºCGPointZero */@property(nonatomic) CGPoint contentOffset; // default CGPointZero/** å†…å®¹è§†å›¾çš„å¤§å°,é»˜è®¤ä¸ºCGSizeZero */@property(nonatomic) CGSize contentSize; // default CGSizeZero/** ä¸ºå†…å®¹è§†å›¾å‘¨å›´å¢åŠ å¯æ»šåŠ¨åŒºåŸŸ,é»˜è®¤ä¸ºUIEdgeInsetsZero */@property(nonatomic) UIEdgeInsets contentInset; // default UIEdgeInsetsZero. add additional scroll area around content// ä»£ç†@property(nullable,nonatomic,weak) id&lt;UIScrollViewDelegate&gt; delegate; // default nil. weak reference/** è®¾ç½®å†…å®¹è§†å›¾çš„åŸç‚¹ç›¸å¯¹äºscrollViewçš„åŸç‚¹çš„åç§»é‡ */- (void)setContentOffset:(CGPoint)contentOffset animated:(BOOL)animated; // animate at constant velocity to new offset ä½¿ç”¨æ ¼å¼ &amp; è¯´æ˜ï¼š1234567891011121314151617ä½¿ç”¨æ ¼å¼ &amp; è¯´æ˜ï¼š// å†…å®¹æ»šåŠ¨å¤§å°ï¼ˆè¯´æ˜ï¼šè®¾ç½®çš„å¤§å° &gt; scrollView.bounds æ‰å¯ä»¥æ»šåŠ¨ï¼Œå“ªä¸ªæ–¹å‘ä¸æ»šåŠ¨å¯ç›´æ¥è®¾ç½®ä¸º0 å¦‚:width = 0 æˆ–æ˜¯ height = 0ï¼‰self.scrollView.contentSize = CGSizeMake(3 * ScreenViewW, ScreenViewH); // å†…å®¹åç§»é‡ï¼ˆè¯´æ˜ï¼šå†…å®¹è§†å›¾çš„å·¦ä¸Šè§’åˆ°scrollViewå·¦ä¸Šè§’çš„ä¸€ä¸ªåç§»é‡ï¼Œè®¡ç®—æ—¶ä»¥å†…å®¹è§†å›¾çš„å·¦ä¸Šè§’ä¸ºåŸºå‡†ï¼Œé»˜è®¤ï¼ˆ0,0ï¼‰å¼€å§‹ï¼‰scrollView.contentOffset = CGPointMake(150, 0);// å†…è¾¹è·ï¼ˆtop +,left +,bottom -,right -ï¼‰scrollView.contentInset = UIEdgeInsetsMake(10, 10, 10, 10);// è®¾ç½®scorllViewçš„ä»£ç†ï¼Œå½“æ»šåŠ¨äº‹ä»¶äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œç›¸åº”çš„ä»£ç†æ–¹æ³•è¢«è°ƒç”¨ï¼ˆè¯´æ˜ï¼šè‹¹æœè®¾è®¡çš„ä»£ç†å±æ€§ä¸ºä»€ä¹ˆæ˜¯weakï¼Ÿæ³¨è§£åœ¨ä¸‹é¢ï¼‰// å¯ä»¥çœ‹åˆ°å‰é¢å®šä¹‰å±æ€§ç±»å‹ä¸º id,å¯çŸ¥ ä»»ä½•OCå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºscrollViewçš„ä»£ç†ï¼Œå¿…é¡»ï¼ˆ1.éµå®ˆåè®® 2.å®ç°åè®®æ–¹æ³•ï¼‰scrollView.delegate = self;// æ–¹æ³•ï¼šsetContentOffset: å†…å®¹åç§»é‡// è¯´æ˜ï¼šæ–¹æ³•åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨ scrollViewDidEndScrollingAnimation:(ä»…å½“animatedè®¾ç½®ä¸ºYESæ—¶æ‰è°ƒç”¨)[self.scrollView setContentOffset:offset animated:YES]; ç®€æ˜æ³¨è§£ï¼šå¯¹äº UIScrollView æœ€é‡è¦çš„å±æ€§ contentSizeã€ contentOffsetã€ contentInsetï¼Œè¦æœ‰æ­£ç¡®çš„è®¤çŸ¥ã€‚ è¿™ä¸ªå›¾å¾ˆèƒ½è¯´æ˜ï¼Œè¿™ä¸‰ä¸ªå±æ€§çš„åŒºåˆ«ï¼š è§£ç­”ä¸Šé¢é—®é¢˜ï¼šè‹¹æœè®¾è®¡çš„ä»£ç†å±æ€§ä¸ºä»€ä¹ˆæ˜¯weakï¼Ÿ ä¸Šå›¾æ³¨è§£ï¼š åŸå› ï¼šé˜²æ­¢é€ æˆå¾ªç¯å¼•ç”¨ è¯´æ˜ï¼š rootViewController æŒ‡é’ˆæŒ‡å‘æ§åˆ¶å™¨å¯¹è±¡ï¼ˆæ¯ä¸ªæ§åˆ¶å™¨éƒ½æœ‰ä¸ªView è¢« å¼ºå¼•ç”¨ï¼‰â€“&gt; UIViewå¯¹è±¡ï¼ˆå¼ºå¼•ç”¨ å†…éƒ¨ å±æ€§ subViewsï¼‰â€“&gt; å­æ§ä»¶æ•°ç»„å¯¹è±¡ï¼ˆå¼ºå¼•ç”¨ å‡è®¾scrå¯¹è±¡åœ¨ç¬¬0ä½ï¼‰â€“&gt; UIScrollViewå¯¹è±¡å°†ViewControllerè®¾ç½®ä¸ºè‡ªå·±çš„ä»£ç†ï¼ˆdelegateï¼‰ï¼Œæ‰€ä»¥çš„ç”¨ å¼±å¼•ç”¨ weakã€‚ å‡è®¾æ²¡æœ‰æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæ§åˆ¶å™¨ï¼Œè€Œdelegate(weakå¼±å¼•ç”¨) æ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨ï¼Œæ§åˆ¶å™¨å°±ä¼šé‡Šæ”¾ã€‚ UIScrollViewä»£ç†æ–¹æ³• æ»‘åŠ¨ä»£ç†æ–¹æ³•ç›¸å…³123456789101112131415161718192021222324252627282930313233343536373839@protocol UIScrollViewDelegate&lt;NSObject&gt;@optional (å¯é€‰)#pragma mark ------------------#pragma mark - æ»‘åŠ¨ä»£ç†æ–¹æ³•ç›¸å…³/** å½“scrollViewçš„contentOffsetå‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ */- (void)scrollViewDidScroll:(UIScrollView *)scrollView; // any offset changes// called on start of dragging (may require some time and or distance to move)/** ç”¨æˆ·å³å°†å¼€å§‹æ‹–æ‹½scrollViewæ˜¯è°ƒç”¨(æ³¨: è¯¥æ–¹æ³•å¯èƒ½éœ€è¦å…ˆæ»‘åŠ¨ä¸€æ®µæ—¶é—´æˆ–è·ç¦»æ‰ä¼šè¢«è°ƒç”¨) */- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView;// called on finger up if the user dragged. velocity is in points/millisecond. targetContentOffset may be changed to adjust where the scroll view comes to rest/** ç”¨æˆ·å³å°†åœæ­¢æ‹–æ‹½æ—¶è°ƒç”¨(æ³¨: åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¿®æ”¹targetContentOffsetå‚æ•°çš„å€¼æ¥è°ƒæ•´å†…å®¹è§†å›¾content viewåœæ­¢çš„ä½ç½®) */- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset NS_AVAILABLE_IOS(5_0);// called on finger up if the user dragged. decelerate is true if it will continue moving afterwards/** ç”¨æˆ·å·²ç»åœæ­¢æ‹–æ‹½æ—¶è°ƒç”¨(æ³¨: å¦‚æœå†…å®¹è§†å›¾content viewåœ¨åœæ­¢æ‹–æ‹½åä½†ç”±äºæƒ¯æ€§ä¼šç»§ç»­æ»šåŠ¨ï¼Œå‡é€Ÿ,åˆ™decelerateå‚æ•°ä¸ºYES) */- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;/** å°†è¦å¼€å§‹å‡é€Ÿæ—¶è°ƒç”¨(ä»…å½“åœæ­¢æ‹–æ‹½åç»§ç»­ç§»åŠ¨æ—¶æ‰ä¼šè¢«è°ƒç”¨) */- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView; // called on finger up as we are moving/** å·²ç»ç»“æŸå‡é€Ÿæ—¶è°ƒç”¨(ä»…å½“åœæ­¢æ‹–æ‹½åç»§ç»­ç§»åŠ¨æ—¶æ‰ä¼šè¢«è°ƒç”¨) */- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView; // called when scroll view grinds to a halt/** å½“-setContentOffset:animated:/-scrollRectVisible:animated:æ–¹æ³•åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨(ä»…å½“animatedè®¾ç½®ä¸ºYESæ—¶æ‰è°ƒç”¨) */- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView; // called when setContentOffset/scrollRectVisible:animated: finishes. not called if not animating/** è¿”å›æ˜¯å¦å…è®¸ç‚¹å‡»çŠ¶æ€æ è®©scrollViewæ»‘åŠ¨åˆ°é¡¶éƒ¨,å¦‚æœæœªå®ç°è¯¥æ–¹æ³•,åˆ™é»˜è®¤ä¸ºYES(ä»…å½“scrollsToTopå±æ€§ä¸ºYESæ—¶æ‰è°ƒç”¨) */- (BOOL)scrollViewShouldScrollToTop:(UIScrollView *)scrollView; // return a yes if you want to scroll to the top. if not defined, assumes YES/** å½“scrollViewå·²ç»æ»‘åŠ¨åˆ°é¡¶éƒ¨æ—¶è°ƒç”¨(ä»…å½“ç‚¹å‡»çŠ¶æ€æ è®©scrollViewæ»‘åŠ¨åˆ°é¡¶éƒ¨æ‰è°ƒç”¨) */- (void)scrollViewDidScrollToTop:(UIScrollView *)scrollView; // called when scrolling animation finished. may be called immediately if already at top ç¼©æ”¾ä»£ç†æ–¹æ³•ç›¸å…³12345678910111213#pragma mark ------------------#pragma mark - ç¼©æ”¾ä»£ç†æ–¹æ³•ç›¸å…³/** å½“ç¼©æ”¾æ¯”ä¾‹æ›´æ”¹æ—¶è°ƒç”¨ */- (void)scrollViewDidZoom:(UIScrollView *)scrollView NS_AVAILABLE_IOS(3_2); // any zoom scale changes/** å‚ä¸ç¼©æ”¾çš„å­è§†å›¾ */- (nullable UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView; // return a view that will be scaled. if delegate returns nil, nothing happens/** å°†è¦å¼€å§‹ç¼©æ”¾æ—¶è°ƒç”¨ */- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(nullable UIView *)view NS_AVAILABLE_IOS(3_2); // called before the scroll view begins zooming its content/** å·²ç»ç»“æŸç¼©æ”¾æ—¶è°ƒç”¨ */- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(nullable UIView *)view atScale:(CGFloat)scale; // scale between minimum and maximum. called after any 'bounce' animations@end éƒ¨åˆ†ä»£ç†æ–¹æ³•ç®€æ˜ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#pragma mark ------------------#pragma mark - UIScrollViewDelegate// åªè¦scrollViewæ»šåŠ¨å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; //ç”±äºè¯¥æ–¹æ³•åœ¨è§†å›¾æ»šåŠ¨ä¸­ä¸€ç›´è°ƒç”¨ï¼Œæ‰€ä»¥ä¸è¦åœ¨è¿™é‡Œåšè€—æ—¶çš„è®¡ç®— NSLog(@"è§†å›¾æ­£åœ¨æ»šåŠ¨----");&#125;// ç”¨æˆ·å³å°†å¼€å§‹æ‹–åŠ¨æ—¶,åœæ­¢å®šæ—¶å™¨- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView&#123; NSLog(@"æ»šåŠ¨è§†å›¾å†…å®¹å³å°†è¢«æ‹–åŠ¨");&#125;// ç”¨æˆ·å³å°†åœæ­¢æ‹–åŠ¨æ—¶è°ƒç”¨- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset&#123; NSLog(@"æ»šåŠ¨è§†å›¾çš„å†…å®¹å³å°†åœæ­¢æ‹–åŠ¨"); &#125;// ç”¨æˆ·å·²ç»åœæ­¢æ‹–åŠ¨æ—¶è°ƒç”¨ (decelerate æŒ‡å®šæ˜¯å¦æœ‰å‡é€ŸåŠ¨ä½œ Dragging æ‹–)- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate&#123; if (decelerate == NO) &#123; NSLog(@"ç”¨æˆ·å·²ç»åœæ­¢æ‹–åŠ¨,åœæ­¢æ»šåŠ¨"); &#125;else&#123; NSLog(@"ç”¨æˆ·å·²ç»åœæ­¢æ‹–åŠ¨,ä½†æ˜¯ç”±äºæƒ¯æ€§ä¼šå‡é€Ÿæ»šåŠ¨"); &#125;&#125;// æ‰‹åŠ¨æ»šåŠ¨ å‡é€Ÿå®Œæ¯•ä¼šè°ƒç”¨(åœæ­¢æ»šåŠ¨),å¼€å¯å®šæ—¶å™¨// åªè¦è®¾ç½®äº†scrollViewçš„åˆ†é¡µæ˜¾ç¤ºï¼Œå½“æ‰‹åŠ¨(ä½¿ç”¨æ‰‹æŒ‡)æ»šåŠ¨ç»“æŸåï¼Œè¯¥ä»£ç†æ–¹æ³•ä¼šè¢«è°ƒç”¨- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123; NSLog(@"å‡é€Ÿç»“æŸ,å†…å®¹è§†å›¾åœæ­¢");&#125;// æŒ‡å®šåœ¨scollViewä¸Šå“ªä¸€ä¸ªè§†å›¾è¢«ç¼©æ”¾-(UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView&#123; //NSLog(@"346"); return [scrollView.subviews objectAtIndex:0]; &#125;// åªè¦scrollViewç¼©æ”¾å°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•- (void)scrollViewDidZoom:(UIScrollView *)scrollView&#123; //ç”±äºè¯¥æ–¹æ³•åœ¨è§†å›¾ç¼©æ”¾ä¸­ä¸€ç›´è°ƒç”¨ï¼Œæ‰€ä»¥ä¸è¦åœ¨è¿™é‡Œåšè€—æ—¶çš„è®¡ç®— NSLog(@"è§†å›¾æ­£åœ¨ç¼©æ”¾----");&#125; UIScrollViewå¤„ç†è§¦æ‘¸äº‹ä»¶åŸç† å½“ç”¨æˆ·åœ¨UIScrollViewçš„ä¸€ä¸ªå­è§†å›¾ä¸ŠæŒ‰ä¸‹æ—¶ï¼ŒUIScrollViewå¹¶ä¸çŸ¥é“ç”¨æˆ·æ˜¯æƒ³è¦æ»‘åŠ¨å†…å®¹è§†å›¾è¿˜æ˜¯ç‚¹å‡»å¯¹åº”å­è§†å›¾ï¼Œæ‰€ä»¥åœ¨æŒ‰ä¸‹çš„ä¸€ç¬é—´ï¼Œäº‹ä»¶UIEventä»UIApplicationä¼ é€’åˆ°UIScrollViewåï¼Œå…¶ä¼šå…ˆå°†è¯¥äº‹ä»¶æ‹¦æˆªè€Œä¸ä¼šç«‹å³ä¼ é€’ç»™å¯¹åº”çš„å­è§†å›¾,åŒæ—¶å¼€å§‹ä¸€ä¸ª150msçš„å€’è®¡æ—¶ï¼Œå¹¶ç›‘å¬ç”¨æˆ·æ¥ä¸‹æ¥çš„è¡Œä¸º å½“å€’è®¡æ—¶ç»“æŸå‰ï¼Œå¦‚æœç”¨æˆ·çš„æ‰‹æŒ‡å‘ç”Ÿäº†ç§»åŠ¨ï¼Œåˆ™ç›´æ¥æ»šåŠ¨å†…å®¹è§†å›¾ï¼Œä¸ä¼šå°†è¯¥äº‹ä»¶ä¼ é€’ç»™å¯¹åº”çš„å­è§†å›¾; å½“å€’è®¡æ—¶ç»“æŸæ—¶ï¼Œå¦‚æœç”¨æˆ·çš„æ‰‹æŒ‡ä½ç½®æ²¡æœ‰æ”¹å˜ï¼Œåˆ™è°ƒç”¨è‡ªèº«çš„-touchesShouldBegin:withEvent:inContentView:æ–¹æ³•è¯¢é—®æ˜¯å¦å°†äº‹ä»¶ä¼ é€’ç»™å¯¹åº”çš„å­è§†å›¾(å¦‚æœè¿”å›NOï¼Œåˆ™è¯¥äº‹ä»¶ä¸ä¼šä¼ é€’ç»™å¯¹åº”çš„å­è§†å›¾,å¦‚æœè¿”å›YESï¼Œåˆ™è¯¥äº‹ä»¶ä¼šä¼ é€’ç»™å¯¹åº”çš„å­è§†å›¾ï¼Œé»˜è®¤ä¸ºYES)ã€‚ å½“äº‹ä»¶è¢«ä¼ é€’ç»™å­è§†å›¾å,å¦‚æœæ‰‹æŒ‡ä½ç½®åˆå‘ç”Ÿäº†ç§»åŠ¨ï¼Œåˆ™è°ƒç”¨è‡ªèº«çš„-touchesShouldCancelInContentView:æ–¹æ³•è¯¢é—®æ˜¯å¦å–æ¶ˆå·²ç»ä¼ é€’ç»™å­è§†å›¾çš„äº‹ä»¶ã€‚ å¸¸è§éœ€æ±‚ç¤ºä¾‹ &amp; åŸç†è§£æ å¯¼èˆªæ åŠé€æ˜æ•ˆæœåŸç†è§£æ: é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æœ‰UINavigationBarå­˜åœ¨æ—¶ï¼Œç³»ç»Ÿä¸ºäº†é˜²æ­¢UIScrollViewè¢«é®æŒ¡ï¼Œå…¶contentInsetå’ŒscrollIndicatorInsetså±æ€§éƒ½ä¼šè¢«è®¾ç½®ä¸ºUIEdgeInsetsMake(64, 0, 0, 0);åœ¨æœ‰UITabBarå­˜åœ¨æ—¶ï¼Œç³»ç»Ÿä¸ºäº†é˜²æ­¢UIScrollViewè¢«é®æŒ¡ï¼Œå…¶contentInsetå’ŒscrollIndicatorInsetså±æ€§éƒ½ä¼šè¢«è®¾ç½®ä¸ºUIEdgeInsetsMake(0, 0, 49, 0) å› æ­¤ï¼Œä¸ºäº†ä½¿ç”¨æ­¤ç§åŠé€æ˜æ•ˆæœï¼Œå¯ä»¥ç›´æ¥å°†UIScrollViewçš„frameè®¾ç½®ä¸ºæ•´ä¸ªå±å¹•çš„å¤§å°ã€‚ æ³¨1: ç³»ç»Ÿåªåœ¨UIScrollViewæ˜¯æ§åˆ¶å™¨è§†å›¾çš„ç¬¬0ä¸ªå­è§†å›¾æ—¶æ‰ä¼šè‡ªåŠ¨ä¿®æ”¹contentInsetå’ŒscrollIndicatorInsetså±æ€§ã€‚ æ³¨2: å¦‚æœä¸æƒ³è®©ç³»ç»Ÿè‡ªåŠ¨ä¿®æ”¹contentInsetå’ŒscrollIndicatorInsetså±æ€§ï¼Œå¯ä»¥è®¾ç½®self.automaticallyAdjustsScrollViewInsets = NO; æ§ä»¶å¯¼èˆªæ‚¬åœåŸç†è§£æ: é€šè¿‡-scrollViewDidScroll:ä»£ç†æ–¹æ³•è·Ÿè¸ªcontentOffsetçš„çš„å˜åŒ–,å½“ä¸æ»¡è¶³æ‚¬åœæ¡ä»¶æ—¶ï¼Œå¾…æ‚¬åœæ§ä»¶å±äºUIScrollViewçš„å­è§†å›¾ï¼Œå½“æ»¡è¶³æ‚¬åœæ¡ä»¶æ—¶ï¼Œå¾…æ‚¬åœæ§ä»¶å±äºUIScrollViewçš„çˆ¶è§†å›¾çš„å­è§†å›¾ã€‚ 12345678910111213141516171819- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; if (scrollView.contentOffset.y &gt;= 100) &#123; CGRect rect = label.frame; rect.origin.y = 0; label.frame = rect; [self.view addSubview:label]; &#125; else &#123; CGRect rect = label.frame; rect.origin.y = 100; label.frame = rect; [scrollView addSubview:label]; &#125;&#125; ä¸‹æ‹‰å¤´éƒ¨å›¾ç‰‡æ”¾å¤§åŸç†è§£æ: é€šè¿‡-scrollViewDidScroll:ä»£ç†æ–¹æ³•è·Ÿè¸ªcontentOffsetçš„çš„å˜åŒ–,æ ¹æ®contentOffsetåŠ¨æ€è®¾ç½®å›¾ç‰‡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚ 12345678// ä»¥"åŠ¨æ€ä¿®æ”¹å›¾ç‰‡ç¼©æ”¾æ¯”ä¾‹äº1å€å’Œ2å€ä¹‹é—´"ä¸ºä¾‹- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123; CGFloat scale = 1 - (scrollView.contentOffset.y / 100); scale = (scale &gt;= 1) ? scale : 1; scale = (scale &lt;= 2) ? scale : 2; imageView.transform = CGAffineTransformMakeScale(scale, scale);&#125; æ­£åæ— é™è½®æ’­ï¼ˆ3å¼ ï¼‰åŸç†è§£æ: æ‰‹åŠ¨æ»šåŠ¨ï¼šåªåˆ›å»ºä¸‰å¼ å›¾ç‰‡ï¼š leftImageViewã€centerImageViewã€rightImageViewï¼Œå®šä¹‰ä¸­é—´æ˜¾ç¤ºé¡µç ä¸º centerPage ï¼Œè®¾ç½®åˆå§‹self.centerPage = 0;ï¼Œè€Œå·¦å³å›¾ç‰‡é¡µç éƒ½ä»¥ centerPage è¡¨ç¤ºï¼Œé€šè¿‡ scrollViewDidEndDecelerating: æ–¹æ³•åˆ¤æ–­contentOffsest.x å’Œ scrollView.frame.size.width æ¯”è¾ƒï¼Œä½¿æ”¹å˜ self.centerPageçš„å€¼ï¼Œç„¶åå¯¹åº”é¡µç æ»šåŠ¨å–æ•°ç»„ä¸­çš„å›¾ç‰‡ï¼Œå§‹ç»ˆæ˜¾ç¤ºä¸­é—´ä¸€å¼ ã€‚ å®šæ—¶å™¨æ»šåŠ¨ï¼š å°†å®šæ—¶å™¨æ·»åŠ åˆ° Runloop çš„ NSRunLoopCommonModesä¸‹ï¼Œè§¦å‘æ–¹æ³•ä¸­è®¾ç½®setContentOffset: animated:YES æ–¹æ³•åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨ scrollViewDidEndScrollingAnimation:(ä»…å½“animatedè®¾ç½®ä¸ºYESæ—¶æ‰è°ƒç”¨)ï¼Œè¿™ä¸ªæ–¹æ³•ä¸‹ self.centerPage++;ã€‚OKäº† ç›‘å¬å›¾ç‰‡ç‚¹å‡»å½“å›¾ç‰‡è¢«ç‚¹å‡»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå› æ­¤éœ€è¦ç›‘å¬å›¾ç‰‡çš„ç‚¹å‡»ï¼Œæ€è·¯å¦‚ä¸‹ï¼š 1.å®šä¹‰ä¸€ä¸ªblockå±æ€§æš´éœ²ç»™å¤–ç•Œvoid(^LNBlock)(NSInteger index)ï¼Œï¼ˆä¸ä¼šblockçš„å¯ä»¥ç”¨ä»£ç†ï¼Œæˆ–è€…çœ‹è¿™é‡Œ Blockæ¨¡å¼è¯¦è§£ï¼‰ã€‚ 2.è®¾ç½®centerImageViewçš„userInteractionEnabledä¸ºYESã€‚ 3.ç»™scrollViewæ·»åŠ ä¸€ä¸ªç‚¹å‡»çš„æ‰‹åŠ¿ 4.åœ¨æ‰‹åŠ¿æ–¹æ³•é‡Œè°ƒç”¨blockï¼Œå¹¶ä¼ å…¥å›¾ç‰‡ç´¢å¼• æ ¸å¿ƒä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#pragma mark - æ·»åŠ ä¸‰å¼ å›¾ç‰‡- (void)createContentViews&#123; // æŠŠ3å¼ imageViewå¯¹è±¡æ·»åŠ åˆ°scrollViewä¸Š CGRect frame = self.bounds; self.leftImageView = [[UIImageView alloc] initWithFrame:frame]; frame.origin.x += ScreenViewW; self.centerImageView = [[UIImageView alloc] initWithFrame:frame]; frame.origin.x += ScreenViewW; self.rightImageView = [[UIImageView alloc] initWithFrame:frame]; [self.scrollView addSubview:self.leftImageView]; [self.scrollView addSubview:self.centerImageView]; [self.scrollView addSubview:self.rightImageView];&#125;#pragma mark - setæ–¹æ³•èµ‹å€¼- (void)setCenterPage:(NSInteger)centerPage &#123; _centerPage = centerPage; if (_centerPage &lt; 0) &#123; // å‘å³æ»‘åŠ¨æ˜¾ç¤ºå·¦é¢å›¾ç‰‡,å€¼ä¸0æ¯”è¾ƒ _centerPage = self.imageArray.count - 1; &#125; if (_centerPage &gt; self.imageArray.count - 1) &#123; _centerPage = 0; // å‘å·¦æ»‘åŠ¨æ˜¾ç¤ºå³é¢å›¾ç‰‡,å€¼ä¸count-1 æ¯”è¾ƒ &#125; // Page: leftå’Œrightç”¨centerè¡¨ç¤º NSInteger leftPage = _centerPage - 1 &lt; 0 ? self.imageArray.count -1 : _centerPage - 1; NSInteger rightPage = _centerPage +1 &gt; self.imageArray.count - 1 ? 0 : _centerPage + 1; // èµ‹å€¼ self.leftImageView.image = self.imageArray[leftPage]; self.centerImageView.image = self.imageArray[_centerPage]; self.rightImageView.image = self.imageArray[rightPage]; // æ˜¾ç¤ºä¸­é—´é‚£ä¸€é¡µï¼ˆæ³¨:è¿™é‡Œä¸è¦ä½¿ç”¨åŠ¨ç”»ï¼‰ [self.scrollView setContentOffset:CGPointMake(self.scrollView.frame.size.width, 0)]; // è®¾ç½®pageControlçš„é¡µç  self.pageControl.currentPage = _centerPage; &#125;#pragma mark - UIScrollViewDelegate// æ‰‹åŠ¨æ»šåŠ¨ å‡é€Ÿå®Œæ¯•ä¼šè°ƒç”¨(åœæ­¢æ»šåŠ¨),å¼€å¯å®šæ—¶å™¨// åªè¦è®¾ç½®äº†scrollViewçš„åˆ†é¡µæ˜¾ç¤ºï¼Œå½“æ‰‹åŠ¨(ä½¿ç”¨æ‰‹æŒ‡)æ»šåŠ¨ç»“æŸåï¼Œè¯¥ä»£ç†æ–¹æ³•ä¼šè¢«è°ƒç”¨- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView &#123; // åˆ¤æ–­contentOffsest.x if (scrollView.contentOffset.x &gt; scrollView.frame.size.width) &#123; // ä¸‹ä¸€å¼  self.centerPage++; &#125; else if (scrollView.contentOffset.x &lt; scrollView.frame.size.width)&#123; // ä¸Šä¸€å¼  self.centerPage--; &#125; [self startTimer]; NSLog(@"æ‰‹åŠ¨å‡é€Ÿå®Œæ¯•,å¼€å¯å®šæ—¶å™¨ å½“å‰é¡µ %ld",self.centerPage);&#125; UIScrollViewåº•å±‚å®ç°123456789101112131415NS_CLASS_AVAILABLE_IOS(2_0) @interface UIScrollView : UIView &lt;NSCoding&gt;#pragma mark ------------------#pragma mark - å†…ç½®æ‰‹åŠ¿è¯†åˆ«å™¨// Change `panGestureRecognizer.allowedTouchTypes` to limit scrolling to a particular set of touch types./** æ‹–åŠ¨æ‰‹åŠ¿ */@property(nonatomic, readonly) UIPanGestureRecognizer *panGestureRecognizer NS_AVAILABLE_IOS(5_0);// `pinchGestureRecognizer` will return nil when zooming is disabled./** æåˆæ‰‹åŠ¿ */@property(nullable, nonatomic, readonly) UIPinchGestureRecognizer *pinchGestureRecognizer NS_AVAILABLE_IOS(5_0);// `directionalPressGestureRecognizer` is disabled by default, but can be enabled to perform scrolling in response to up / down / left / right arrow button presses directly, instead of scrolling indirectly in response to focus updates./** å®šå‘æ‰‹åŠ¿è¯†åˆ«å™¨ */@property(nonatomic, readonly) UIGestureRecognizer *directionalPressGestureRecognizer UIKIT_AVAILABLE_TVOS_ONLY(9_0); æ€»ç»“ï¼šUIScrollView ç»§æ‰¿è‡ªUIViewï¼Œå†…éƒ¨åŠ äº†æ‰‹åŠ¿ï¼Œä¹‹æ‰€ä»¥å¯ä»¥æ»‘åŠ¨ï¼Œæ˜¯æ”¹å˜äº†boundsï¼Œè‹¥æ‰‹æŒ‡å‘ä¸Šæ»‘åŠ¨ï¼Œy++ï¼Œå†…å®¹å°±ä¼šå‘ä¸Šæ»‘åŠ¨ã€‚è¿™æ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ ç»™UIView æ·»åŠ ä¸ª Panæ‰‹åŠ¿ å®ç°æ»šåŠ¨æ•ˆæœã€‚æœ¬æ–‡ä¸ºã€Œç®€ä¹¦-ç™½å¼€æ°´lnã€ä½œè€…åŸåˆ›ï¼›æˆ‘çš„å†™ä½œï¼Œå¸Œæœ›èƒ½ç®€åŒ–åˆ°åˆå­¦è€…å°½å¿«å…¥é—¨å’Œè€å¸æœºç¹çå›é¡¾ ^_^. æ­£åæ— é™è½®æ’­ï¼ˆ2å¼ ï¼‰å¤§è‡´åŸç†ï¼šæœ€åº•å±‚æ˜¯ä¸€ä¸ªUIViewï¼Œä¸Šé¢æœ‰ä¸€ä¸ªUIScrollViewä»¥åŠUIPageControlï¼ŒscrollViewä¸Šæœ‰ä¸¤ä¸ªUIImageViewï¼ŒimageViewå®½é«˜ = scrollviewå®½é«˜ = viewå®½é«˜; å‡è®¾è½®æ’­æ§ä»¶çš„å®½åº¦ä¸ºxé«˜åº¦ä¸ºyï¼Œæˆ‘ä»¬è®¾ç½®scrollviewçš„contentSize.widthä¸º3xï¼Œå¹¶è®©scrollviewçš„æ°´å¹³åç§»é‡ä¸ºxï¼Œæ—¢æ˜¾ç¤ºæœ€ä¸­é—´å†…å®¹ã€‚ å…·ä½“ç»†èŠ‚è¯·ç§»æ­¥è¿™é‡Œé˜…è¯»ï¼šè½®æ’­ä¸¤ä¸ªImageViewå®ç° http://www.jianshu.com/p/ef03ec7f23b2 å‚è€ƒï¼šiOSæ§ä»¶è¯¦è§£ä¹‹UIScrollView æ­£åæ— é™è½®æ’­ æ•ˆæœå›¾ é™„ä¸Šæ€»ç»“å†™çš„å°æ · Demoï¼Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç° ï¼ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ§ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIæ§ä»¶è¯¦è§£â€”ã€ŒUITableViewè¡¨æ ¼è§†å›¾ã€]]></title>
    <url>%2FiOSUI%2FUITableView.html</url>
    <content type="text"><![CDATA[å¼•å¯¼ â€œ æœ¬æ–‡ä¸é€‚åˆè€å¸æœºâ€¦ â€ æœ¬æ–‡ç« å°†ä»‹ç» iOS UIå¸ƒå±€ è¯¦è§£ï¼Œæœ€å¸¸ä½¿ç”¨çš„ä¸‰å¤§æ§ä»¶ä¹‹ä¸€ UITableViewï¼Œå°†ä¼šåˆ†æˆä¸¤ç¯‡æ–‡ç« å®Œæ•´çš„è®²è¿°UITableViewçš„å¸¸ç”¨å±æ€§æ–¹æ³•ä½¿ç”¨ï¼ˆåŒ…æ‹¬ä¼˜åŒ–æ–¹é¢ï¼‰åŠæ³¨æ„ç‚¹ å’Œ å®æˆ˜å¼€å‘ä½¿ç”¨åœºæ™¯æ¡ˆä¾‹ï¼Œæ–‡ç« ç¼–å†™å‘¨æœŸä¼šé•¿ä¸€äº›ï¼Œç”¨åˆ°é‚£ç‚¹å®ç”¨çš„ä¸œè¥¿ï¼Œä¼šåŠæ—¶è¡¥å……ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€UITableView å±æ€§æ–¹æ³•æ³¨è§£ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š æ¦‚å¿µ1.UITableViewçš„æ¦‚å¿µ2.UITableViewCellçš„æ¦‚å¿µ3.UITableViewControllerçš„æ¦‚å¿µ UITableViewçš„ä½¿ç”¨æ­¥éª¤1.å¤§è‡´ä¸ªäººæ€»ç»“å…­æ­¥ UITableViewçš„å¸¸ç”¨å±æ€§ UITableViewCellçš„å¸¸ç”¨å±æ€§ UITableViewçš„ä»£ç†æ–¹æ³• UITableViewControllerçš„ä½¿ç”¨ UITableViewCellçš„é‡ç”¨ UITableViewCellçš„ä¼˜åŒ– UITableViewé‡è¦å±æ€§å›¾è§£ UITableView.h å±æ€§&amp;æ–¹æ³• æœŸå¾…åç»­ &amp; About me æ¦‚å¿µ UITableViewçš„æ¦‚å¿µ ç®€åŒ–å¯é‡Šä¹‰ä¸º &quot;è¡¨æ ¼è§†å›¾&quot; æˆ–æ˜¯ &quot;åˆ—è¡¨è§†å›¾&quot;ï¼Œ ä¸” æ”¯æŒé€‰æ‹©å’Œç¼–è¾‘çš„ä¿¡æ¯ã€‚åœ¨iOSå¼€å‘ä¸­åšåˆ—è¡¨æ•°æ®ç±»å‹çš„åº”ç”¨ï¼Œæœ€å¸¸ç”¨çš„åšæ³•å°±æ˜¯ä½¿ç”¨UITableViewæ§ä»¶ã€‚ UITbaleView ç»§æ‰¿è‡ª UIScrollViewï¼Œå› æ­¤æ”¯æŒç«–ç›´æ»šåŠ¨ï¼Œè€Œä¸”åœ¨ UIScrollView åšäº†æ€§èƒ½ä¼˜åŒ–ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åšåˆ°æ°´å¹³æ»šåŠ¨ï¼ŒæŠŠcell æ—‹è½¬ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚ UITableViewCellçš„æ¦‚å¿µ ç®€åŒ–æ„æ€å°±æ˜¯ UITableViewçš„æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªUITableViewCellã€‚å…¶ä¸­ç±»åŒ…å«å±æ€§å’Œæ–¹æ³•ç”¨äºè®¾ç½®å’Œç®¡ç†å•å…ƒæ ¼ï¼› UITableViewå†…éƒ¨æœ‰ä¸ªé»˜è®¤çš„å­æ§ä»¶ï¼šcontentViewï¼Œå¡«å……æ•´ä¸ªUITableViewCellçš„çˆ¶æ§ä»¶ã€‚ UITableViewçš„å­æ§ä»¶å®è´¨éƒ½åœ¨contentViewä¸Šã€‚ UITableViewControllerçš„æ¦‚å¿µ ç®€åŒ–æ„æ€å°±æ˜¯ è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªè‡ªå¸¦ï¼ˆç®¡ç†ï¼‰tableView çš„æ§åˆ¶å™¨ã€‚ åœ¨Xcode ä¸­ cmd UITableViewController ç‚¹è¿›å»ï¼Œçœ‹åˆ° 1NS_CLASS_AVAILABLE_IOS(2_0) @interface UITableViewController : UIViewController ç®€åŒ–æ„æ€å°±æ˜¯UITableViewControlleræ˜¯å·²ç»éµå¾ªäº†UITableViewDelegateï¼ŒUITableViewDataSourceä»£ç†çš„æ§åˆ¶å™¨ UITableViewä½¿ç”¨æ­¥éª¤ ä¸‹é¢ç¤ºä¾‹ä»¥ tableViewä»£ç è‡ªå®šä¹‰ä¸ç­‰é«˜Cell ä¸ºä¾‹ï¼š ç¬¬ä¸€æ­¥ï¼šåˆ›å»º UITableViewï¼Œé‡‡ç”¨æ‡’åŠ è½½æ–¹å¼ã€‚ 12345678910111213141516- (UITableView *)tableView &#123; if (_tableView == nil) &#123; _tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0,kScreenWidth, kScreenHeight) style:UITableViewStylePlain];// Plainå•ç»„æ•°æ®æ‚¬åœ Groupedå¤šç»„æ•°æ®ä¸æ‚¬åœ _tableView.dataSource = self;// æ•°æ®æº _tableView.delegate = self;// ä»£ç† _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;// åˆ†å‰²çº¿ _tableView.estimatedRowHeight = 100;// é¢„è®¾é«˜åº¦ //[self.view addSubview:self.tableView];// è¿™é‡Œä¸è¦å¿˜è®°æ·»åŠ ä¸Š //--------------------------- tableView å¸¸ç”¨å±æ€§ ------------------------------// // &#125; return _tableView;&#125; ç¬¬äºŒæ­¥ï¼šè®¾ç½®æ•°æ®æºå’Œä»£ç†ï¼Œéµå®ˆå¯¹åº”åè®®ã€‚ 1@interface LNTableViewAttributeVC () ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ•°æ®æ•°ç»„ï¼Œé‡‡ç”¨æ‡’åŠ è½½æ–¹å¼åŠ è½½æ•°æ®ï¼ˆä½¿ç”¨MJExtensionå­—å…¸æ•°ç»„è½¬æ¨¡å‹æ•°ç»„ï¼‰ã€‚ 1234567- (NSMutableArray *)dataArray&#123; if (!_dataArray) &#123; _dataArray = [LNStatus mj_objectArrayWithFilename:@"statuses.plist"]; &#125; return _dataArray;&#125; ç¬¬å››æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰Cellï¼ˆè§†å›¾ç»§æ‰¿UITableViewCellï¼‰ã€‚ 1.å®šä¹‰æ¨¡å‹ç±»å¯¹è±¡ã€‚ 2.å®šä¹‰å­æ§ä»¶å±æ€§ã€‚ 3.åœ¨initWithStyle:style reuseIdentifier:reuseIdentifierï¼Œæ·»åŠ å­æ§ä»¶(è®¾ç½®çº¦æŸMasonry)ã€‚ 4.åœ¨ layoutSubviews è®¾ç½®å­æ§ä»¶çš„ frame. 5.æ¨¡å‹ç±»å¯¹è±¡setæ–¹æ³•setStatus:è®¾ç½®å­æ§ä»¶çš„æ•°æ®(èµ‹å€¼)ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889// LNStatusViewCell.h@class LNStatus;@interface LNStatusViewCell : UITableViewCell/** æ¨¡å‹ç±»å¯¹è±¡ */@property (nonatomic, strong) LNStatus *status;@end//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------//// LNStatusViewCell.m@interface LNStatusViewCell ()/* å¤´åƒ */@property (nonatomic, weak) UIImageView *iconImageView;/* é…å›¾ */@property (nonatomic, weak) UIImageView *pictureImageView;/* vip */@property (nonatomic, weak) UIImageView *vipImageView;/* åç§° */@property (nonatomic, weak) UILabel *nameLabel;/** æ–‡å­— */@property (nonatomic, weak) UILabel *text_Label;// è‡ªå®šä¹‰æ§ä»¶ä¸è¦ä¸ç³»ç»ŸtextLabelé‡å@end@implementation LNStatusViewCell/*1. æ·»åŠ å­æ§ä»¶(è®¾ç½®çº¦æŸ)(å¦‚:æ–‡å­—å’Œé¢œè‰²,ä¸€æ¬¡æ€§çš„è®¾ç½®) æ³¨æ„ç‚¹:æŠŠæ‰€æœ‰æœ‰å¯èƒ½æ˜¾ç¤ºçš„å­æ§ä»¶éƒ½å…ˆæ·»åŠ è¿›å» */- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier&#123; if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) &#123; // å›¾åƒ // é…å›¾ // vip // æ˜µç§° // æ­£æ–‡ // è‡ªå®šä¹‰åˆ†å‰²çº¿ UILabel *lineLabel = [[UILabel alloc] initWithFrame:CGRectZero]; lineLabel.backgroundColor = [UIColor colorWithWhite:0.5 alpha:0.5]; [self.contentView addSubview:lineLabel]; [lineLabel mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.bottom.left.right.equalTo(self.contentView).with.offset(0); make.height.mas_equalTo(1.0f); &#125;]; &#125; return self;&#125;// 2.è®¾ç½®å­æ§ä»¶çš„frame/* - (void)layoutSubviews&#123; [super layoutSubviews]; &#125; */// 3.setæ–¹æ³•è®¾ç½®å­æ§ä»¶çš„æ•°æ®(èµ‹å€¼)- (void)setStatus:(LNStatus *)status&#123; _status = status; self.iconImageView.image = [UIImage imageNamed:status.icon]; self.nameLabel.text = status.name; self.text_Label.text = status.text; if (status.isVip) &#123;// æœ‰æ— çš‡å†  self.vipImageView.hidden = NO; self.nameLabel.textColor = [UIColor redColor]; &#125; else &#123; self.vipImageView.hidden = YES; self.nameLabel.textColor = [UIColor blackColor]; &#125; if (status.picture) &#123;// æœ‰æ— é…å›¾(æœ‰é…å›¾å†èµ‹å€¼,æ— é…å›¾å°±ä¸èµ‹å€¼) self.pictureImageView.hidden = NO; self.pictureImageView.image = [UIImage imageNamed:status.picture]; &#125; else &#123; self.pictureImageView.hidden = YES; &#125; /** è¿™é‡Œçš„ä¸‹æ–‡ä¼šä»‹ç»åˆ° */ self.iconImageView.frame = self.status.iconFrame; self.nameLabel.frame = self.status.nameFrame; self.vipImageView.frame = self.status.vipFrame; self.text_Label.frame = self.status.textFrame; self.pictureImageView.frame = self.status.pictureFrame;&#125; ç¬¬äº”æ­¥ï¼šåˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹ç±»ï¼ˆæ¨¡å‹ç»§æ‰¿NSObjectï¼‰ã€‚ 1.å®šä¹‰æ¨¡å‹å±æ€§ã€‚ 2.æä¾›æ„é€ æ–¹æ³•(å¯¹è±¡æ–¹æ³•å’Œç±»æ–¹æ³•)ã€‚ 3.å®šä¹‰å¯¹åº”æ¨¡å‹frameå±æ€§ï¼ˆæ³¨è§£ï¼šCellçš„åŠ¨æ€è¡Œé«˜ï¼Œè¿™é‡Œè§£å†³æ–¹æ¡ˆ: åœ¨heightForRowAtIndexPath:è¿™ä¸ªæ–¹æ³•è¿”å›ä¹‹å‰å°±è¦è®¡ç®—cellçš„é«˜åº¦ï¼Œå³æŠŠcellå­æ§ä»¶çš„frameå°è£…åˆ°æ¨¡å‹ä¸­ï¼ŒcellHeightè¿”å›è¡Œé«˜(ç›¸å½“äºæ‡’åŠ è½½)ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566@interface LNStatus : NSObject// 1.å®šä¹‰æ¨¡å‹å±æ€§/* æ–‡å­— */@property (nonatomic, copy) NSString *text;/* å¤´åƒ */@property (nonatomic, copy) NSString *icon;/* åç§° */@property (nonatomic, copy) NSString *name;/** VIP åˆ°æ—¶å€™è®¿é—®çš„æ—¶å€™å¯ä»¥.vip ,ä¹Ÿå¯ä»¥.isVip */@property (nonatomic, assign, getter=isVip) BOOL vip;/* é…å›¾ */@property (nonatomic, copy) NSString *picture;/** ç”¨MJExtensionå­—å…¸è½¬æ¨¡å‹æ¡†æ¶,ä¸‹é¢å¯ä»¥ä¸å†™ */// 2.æä¾›æ„é€ æ–¹æ³•//+ (instancetype)statusWithDict:(NSDictionary *)dict;//--------------------------- è¿”å›cellçš„é«˜åº¦å°è£… ------------------------------/////** å›¾åƒçš„frame */@property (nonatomic, assign) CGRect iconFrame;/** æ˜µç§°çš„frame */@property (nonatomic, assign) CGRect nameFrame;/** vipçš„frame */@property (nonatomic, assign) CGRect vipFrame;/** æ­£æ–‡frame */@property (nonatomic, assign) CGRect textFrame;/** é…å›¾çš„frame */@property (nonatomic, assign) CGRect pictureFrame;/** è¿”å›cellçš„é«˜åº¦ */@property (nonatomic, assign) CGFloat cellHeight;// LNStatus.m//+ (instancetype)statusWithDict:(NSDictionary *)dict &#123;// // å­—å…¸èµ‹å€¼æ¨¡å‹å±æ€§//&#125;// getæ–¹æ³•è¿”å›è¡Œé«˜(ç›¸å½“äºæ‡’åŠ è½½)- (CGFloat)cellHeight&#123; if (_cellHeight == 0) &#123; /** å›¾åƒ */ self.iconFrame = CGRectMake(iconX, iconY, iconWH, iconWH); /** æ˜µç§°ï¼šå­—ç¬¦ä¸²è‡ªé€‚åº”å®½(æ˜µç§°æ–‡å­—æ²¡æœ‰æ¢è¡Œ) */ self.nameFrame = CGRectMake(nameX, nameY, nameSize.width, nameSize.height); /** vip */ if (self.isVip) &#123; self.vipFrame = CGRectMake(vipX, vipY, vipW, vipH); &#125; /** æ­£æ–‡ï¼šå­—ç¬¦ä¸²è‡ªé€‚åº”å®½é«˜(æ–‡å­—æœ‰æ¢è¡Œ) */ self.textFrame = CGRectMake(textX, textY, textW, textH); /** é…å›¾ */ if (self.picture) &#123; // æœ‰é…å›¾ self.pictureFrame = CGRectMake(pictureX, pictureY, pictureWH, pictureWH); _cellHeight = CGRectGetMaxY(self.pictureFrame) + space; &#125; else &#123; _cellHeight = CGRectGetMaxY(self.textFrame) + space; &#125; &#125; return _cellHeight;&#125; ç¬¬å…­æ­¥ï¼šå®ç°DataSourceæ•°æ®æºï¼ˆå¿…é¡»ï¼‰ å’ŒDelegateä»£ç†ï¼ˆå¯é€‰ï¼‰åè®®æ–¹æ³•åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹ç±»ï¼ˆæ¨¡å‹ç»§æ‰¿NSObjectï¼‰ã€‚ 123456789101112131415161718192021222324#pragma mark ------------------#pragma mark - UITableViewDataSource// TableViewä¸­ æœ‰å¤šå°‘ç»„Sections// è¯´æ˜ï¼šå•ç»„æ•°æ®å¯ä¸å®ç°æ–¹æ³•ï¼Œé»˜è®¤è¿”å›1- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView &#123; return 1;&#125;// æ¯ç»„Sections æœ‰å¤šå°‘è¡ŒRows- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section&#123; return self.dataArray.count;&#125;// æ¯è¡Œ cellå†…å®¹- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // 1.cellæ³¨å†Œï¼ˆåªè¦ç”¨åˆ°forIndexPath:å°±å¿…é¡»è¦æ³¨å†Œï¼‰ //[self.tableView registerClass:[LNStatusViewCell class] forCellReuseIdentifier:cellID]; // 2.cellå¤ç”¨é˜Ÿåˆ—(è®¿é—®ç¼“å­˜æ± ) LNStatusViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID forIndexPath:indexPath]; // 3.è®¾ç½®æ•°æ®(æ•°æ®æ•°ç»„èµ‹å€¼æ¨¡å‹ç±») cell.status = self.dataArray[indexPath.row]; return cell;&#125; 123456789#pragma mark ------------------#pragma mark - UITableViewDelegate// è§£å†³æ–¹æ¡ˆ:åœ¨è¿™ä¸ªæ–¹æ³•è¿”å›ä¹‹å‰å°±è¦è®¡ç®—cellçš„é«˜åº¦ï¼Œå³è¿”å›cellçš„é«˜åº¦å°è£…åœ¨æ¨¡å‹ä¸­- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123; LNStatus *status = self.dataArray[indexPath.row]; return status.cellHeight;&#125; UITableViewåŸºæœ¬ä½¿ç”¨æ•ˆæœå›¾ UITableViewå¸¸ç”¨å±æ€§ å…¨å±€è®¾ç½®è¡Œrowé«˜ï¼š 12345678å±æ€§ï¼š@property (nonatomic) CGFloat rowHeight;ä½¿ç”¨æ ¼å¼ï¼šself.tableView.rowHeight = 70;è¯´æ˜ï¼šé»˜è®¤æ˜¯44 å…¨å±€è®¾ç½®åŒºå¤´(åŒºå°¾)é«˜ï¼š 1234567å±æ€§ï¼š@property (nonatomic) CGFloat sectionHeaderHeight; @property (nonatomic) CGFloat sectionFooterHeight;ä½¿ç”¨æ ¼å¼ï¼šself.tableView.sectionHeaderHeight = 50;self.tableView.sectionFooterHeight = 50; è®¾ç½®åˆ†å‰²çº¿çš„æ ·å¼ã€é“ºæ»¡å’Œé¢œè‰²ï¼š 12345678910111213141516å±æ€§ï¼š@property (nonatomic) UITableViewCellSeparatorStyle separatorStyle __TVOS_PROHIBITED;@property (nonatomic, strong, nullable) UIColor *separatorColor UI_APPEARANCE_SELECTOR __TVOS_PROHIBITED;@property (nonatomic) UIEdgeInsets separatorInset NS_AVAILABLE_IOS(7_0) UI_APPEARANCE_SELECTOR;ä½¿ç”¨æ ¼å¼ï¼šself.tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;self.tableView.separatorColor = [UIColor redColor];self.tableView.separatorInset = UIEdgeInsetsMake(0, 0, 0, 0);è¯´æ˜ï¼šè®¾ç½® StyleNone ä»£è¡¨éšè—åˆ†å‰²çº¿ï¼Œ[UIColor clearColor]ä¸ºé€æ˜è‰²å¯¹è±¡æšä¸¾UITableViewCellSeparatorStyleå¸¸ç”¨çš„æšä¸¾å…ƒç´ ï¼šUITableViewCellSeparatorStyleNone // éšè—åˆ†å‰²çº¿UITableViewCellSeparatorStyleSingleLine // é»˜è®¤æ ·å¼UITableViewCellSeparatorStyleSingleLineEtched // ä»…æ”¯æŒåœ¨groupedæ ·å¼ï¼Œä½†æ˜¯å’Œé»˜è®¤æ ·å¼æ²¡ä»€ä¹ˆåŒºåˆ« è®¾ç½®tableViewè¡¨æ ¼å¤´(å°¾)è§†å›¾ï¼š 1234567å±æ€§ï¼š@property (nonatomic, strong, nullable) UIView *tableHeaderView; @property (nonatomic, strong, nullable) UIView *tableFooterView; ä½¿ç”¨æ ¼å¼ï¼šself.tableView.tableHeaderView = [[UISwitch alloc] init];self.tableView.tableFooterView = [[UISwitch alloc] init]; è®¾ç½®tableèƒŒæ™¯è§†å›¾å’Œé¢œè‰²ï¼š 1234567å±æ€§ï¼š@property (nonatomic, strong, nullable) UIView *backgroundView NS_AVAILABLE_IOS(3_2);@property (nonatomic, copy, nullable) UIColor *backgroundColor;ä½¿ç”¨æ ¼å¼ï¼šself.tableView.backgroundView = [[UIView alloc] init];self.tableView.backgroundColor = [UIColor grayColor]; è®¾ç½®TableViewçš„cellçš„é¢„è®¾é«˜åº¦(æ€§èƒ½ä¼˜åŒ–)ï¼š 12345678å±æ€§ï¼š@property (nonatomic) CGFloat estimatedRowHeight NS_AVAILABLE_IOS(7_0);ä½¿ç”¨æ ¼å¼ï¼šself.tableView.estimatedRowHeight = 100;è¯´æ˜ï¼šè¿™é‡Œçš„é«˜åº¦ä¹Ÿä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œè¦é€‚æ—¶è€Œå®š éšè—å¤šä½™åˆ†å‰²çº¿ï¼š 12ä½¿ç”¨æ ¼å¼ï¼šself.tableView.tableFooterView = [[UIView alloc] init]; è®¾ç½®å³ä¾§ç´¢å¼•æ–‡å­—å’ŒèƒŒæ™¯é¢œè‰²ï¼š 1234567å±æ€§ï¼š@property (nonatomic, strong, nullable) UIColor *sectionIndexColor NS_AVAILABLE_IOS(6_0) UI_APPEARANCE_SELECTOR;@property (nonatomic, strong, nullable) UIColor *sectionIndexBackgroundColor NS_AVAILABLE_IOS(7_0) UI_APPEARANCE_SELECTOR; ä½¿ç”¨æ ¼å¼ï¼šself.tableView.sectionIndexColor = [UIColor grayColor];self.tableView.sectionIndexBackgroundColor = [UIColor yellowColor]; UITableViewCellçš„å¸¸ç”¨å±æ€§ è®¾ç½®cellé™„åŠ æ ·å¼ï¼ˆæ¯”å¦‚å³ä¾§çš„ç®­å¤´ï¼‰ï¼š 12345å±æ€§ï¼š@property (nonatomic) UITableViewCellAccessoryType accessoryType; ä½¿ç”¨æ ¼å¼ï¼šcell.accessoryType = UITableViewCellAccessoryCheckmark; è®¾ç½®cellå³è¾¹çš„æŒ‡ç¤ºæ§ä»¶ï¼ˆæ¯”å¦‚å³ä¾§çš„å¼€å…³ï¼‰ï¼š 12345å±æ€§ï¼š@property (nonatomic, strong) UIView *accessoryView;ä½¿ç”¨æ ¼å¼ï¼šcell.accessoryView = [[UISwitch alloc] init]; è®¾ç½®cellé€‰ä¸­æ ·å¼(StyleNoneé€‰ä¸­ä¸å˜ç°è‰²)ï¼š 12345å±æ€§ï¼š@property (nonatomic) UITableViewCellSelectionStyle selectionStyle; ä½¿ç”¨æ ¼å¼ï¼šcell.selectionStyle = UITableViewCellSelectionStyleNone; è®¾ç½®cellçš„èƒŒæ™¯æ§ä»¶ï¼š 12345678910å±æ€§ï¼š@property (nonatomic, strong) UIView *backgroundView;ä½¿ç”¨æ ¼å¼ï¼šUIView *bg = [[UIView alloc] init];bg.backgroundColor = [UIColor redColor];cell.backgroundView = bg;è¯´æ˜ï¼šèƒŒæ™¯æ§ä»¶ å’Œ èƒŒæ™¯é¢œè‰² åŒæ—¶å­˜åœ¨æ—¶ï¼Œ(ä¼˜å…ˆçº§: backgroundView &gt; backgroundColor) è®¾ç½®cellçš„èƒŒæ™¯é¢œè‰²ï¼š 123456789å±æ€§ï¼š@property(nullable, nonatomic,copy) UIColor *backgroundColorä½¿ç”¨æ ¼å¼ï¼šcell.backgroundColor = [UIColor blueColor];è¯´æ˜ï¼šè¿˜å¯ä»¥è®¾ç½®cellçš„å­æ§ä»¶èƒŒæ™¯å›¾ç‰‡cell.textLabel.backgroundColor = [UIColor greenColor]; è®¾ç½®cellé€‰ä¸­æ—¶èƒŒæ™¯Viewï¼š 1234567å±æ€§ï¼š@property (nonatomic, strong) UIView *selectedBackgroundView;ä½¿ç”¨æ ¼å¼ï¼šUIView *seletedBg = [[UIView alloc] init];seletedBg.backgroundColor = [UIColor purpleColor];cell.selectedBackgroundView = seletedBg; UITableViewçš„ä»£ç†æ–¹æ³• è¿”å›æ¯ä¸€è¡Œcellçš„é«˜åº¦ï¼š 12345678æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // è·å–indexPath// if (indexPath.row%2) &#123;// return 100;// &#125;else return 44;&#125; å½“é€‰ä¸­æŸä¸€è¡Œcellçš„æ—¶å€™å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼š 1234æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath&#123; NSLog(@"é€‰ä¸­ç¬¬%ldåŒº---ç¬¬%ldè¡Œ ",indexPath.section,indexPath.row);&#125; è¿”å›æ¯ä¸€ç»„çš„åŒºå¤´(åŒºå°¾) æ ‡é¢˜ å’Œ æ§ä»¶ï¼š 12345678910111213æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š// åŒºå¤´(åŒºå°¾)æ ‡é¢˜- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section&#123; return @"ç®€ä¹¦-ç™½å¼€æ°´ln";&#125;// åŒºå¤´(åŒºå°¾)View- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section &#123; return [[UISwitch alloc] init];&#125;è¯´æ˜ï¼šæ ‡é¢˜ å’Œ View åŒæ—¶å­˜åœ¨æ—¶ï¼ŒView ä¼šè¦†ç›– Title è¿”å›æ¯ä¸€ç»„çš„å¤´éƒ¨(å°¾éƒ¨)é«˜åº¦ï¼š 123456789æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section&#123; // è·å–indexPath NSIndexPath *indexPath = [[NSIndexPath alloc]initWithIndex:section]; if (indexPath.section == 0) &#123; return 60; &#125;else return 30;&#125; è¿”å›å³ä¾§ç´¢å¼•æ ‡é¢˜ï¼š 12345æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š-(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView&#123; //return [self.dataArray valueForKeyPath:@"title"]; return @[@"é»„ç„–é¸¡å°ä»½",@"é»„ç„–é¸¡ä¸­ä»½",@"é»„ç„–é¸¡å¤§ä»½",];&#125; è¿”å›æŸä¸€è¡Œç¼©è¿›ï¼š 1234æ–¹æ³• å’Œ ä½¿ç”¨æ ¼å¼ï¼š- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath&#123; return 7;&#125; UITableViewControllerçš„ä½¿ç”¨ å°†æ§åˆ¶å™¨è®¾ç½®ä¸ºUITableViewçš„æ–¹æ³•å’Œæ­¥éª¤ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–°çš„ç±»æˆ–ä¿®æ”¹åŸæœ‰çš„ViewControllerç±»ï¼Œç»§æ‰¿è‡ªUITableViewController ç¬¬äºŒæ­¥ï¼šåœ¨Main.storyboardä¸­åˆ é™¤è‡ªå¸¦çš„UIViewControlleræ§åˆ¶å™¨ï¼Œç„¶åå¾€é‡Œé¢æ‹–ä¸€ä¸ªUITableViewControlleræ§åˆ¶å™¨ ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹æ–°æ‹–è¿›æ¥çš„TableViewControlleræ§åˆ¶å™¨çš„è‡ªå®šä¹‰ç±»åä¸ºç¬¬ä¸€æ­¥ä¸­ç»§æ‰¿è‡ªUITableViewControllerç±»çš„ç±»å ç¬¬å››æ­¥ï¼šå‹¾é€‰TableViewControlleræ§åˆ¶å™¨ä¸ºç¨‹åºå¯åŠ¨ç¬¬ä¸€ä¸ªåŠ è½½çš„æ§åˆ¶å™¨ æ³¨æ„ç‚¹ï¼š tableVieControlleræœ‰ä¸ªtableViewå±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªtableViewã€‚ tableViewçš„dataSourceå’Œdelegateå±æ€§æŒ‡å‘çš„å°±æ˜¯è¿™ä¸ªæ§åˆ¶å™¨ï¼Œå¹¶ä¸”è¿™ä¸ªæ§åˆ¶å™¨å·²ç»éµå®ˆäº†UITableViewDataSourceå’ŒUITableViewDelegateã€‚ æ¯ä¸ªæ§åˆ¶å™¨çš„å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªviewå±æ€§ï¼Œåœ¨tableVieControllerä¸­ï¼Œviewå’ŒtableViewå±æ€§æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆæ§åˆ¶å™¨çš„viewå°±æ˜¯tableViewï¼‰ã€‚ UITableViewCellçš„é‡ç”¨ åŸå› ï¼š iOSè®¾å¤‡çš„å†…å­˜æœ‰é™ï¼Œå¦‚æœç”¨ UITableViewæ˜¾ç¤ºæˆåƒä¸Šä¸‡æ¡æ•°æ®ï¼Œå°±éœ€è¦æˆåƒä¸Šä¸‡ä¸ªUITableViewCellå¯¹è±¡çš„è¯ï¼Œé‚£å°†ä¼šè€—å°½iOSè®¾å¤‡çš„å†…å­˜ã€‚ æœ‰å¯èƒ½å¯¼è‡´æ˜¾ç¤ºæ•°æ®é”™ä¹±ã€‚ åŸç†ï¼š å½“æ»šåŠ¨åˆ—è¡¨æ—¶ï¼Œéƒ¨åˆ†UITableViewCellä¼šç§»å‡ºçª—å£ï¼ŒUITableViewä¼šå°†çª—å£å¤–çš„UITableViewCellæ”¾å…¥ä¸€ä¸ªç¼“å­˜æ± ä¸­ï¼Œç­‰å¾…é‡ç”¨ å½“UITableViewè¦æ±‚dataSourceè¿”å›UITableViewCellæ—¶ï¼ŒdataSourceä¼šå…ˆæŸ¥çœ‹è¿™ä¸ªå¯¹è±¡æ± ï¼Œå¦‚æœæ± ä¸­æœ‰æœªä½¿ç”¨çš„UITableViewCellï¼ŒdataSourceä¼šç”¨æ–°çš„æ•°æ®é…ç½®è¿™ä¸ªUITableViewCellï¼Œç„¶åè¿”å›ç»™UITableViewï¼Œé‡æ–°æ˜¾ç¤ºåˆ°çª—å£ä¸­ï¼Œä»è€Œé¿å…åˆ›å»ºæ–°çš„UITableViewCellå¯¹è±¡ Cellé‡ç”¨çš„å®ç°ä»£ç  æ–¹æ³•ä¸€ï¼š 1.å®šä¹‰ä¸€ä¸ªcellçš„é‡ç”¨æ ‡è¯† 2.æ ¹æ®è¿™ä¸ªIDå»ç¼“å­˜æ± ä¸­çœ‹æœ‰æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cell 3.å¦‚æœç¼“å­˜æ± ä¸­æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cellï¼Œè‡ªå·±åˆ›å»º 123456789101112- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // 1. å®šä¹‰ä¸€ä¸ªé‡ç”¨æ ‡è¯† static NSString *cellID = @"cellID"; // 2. æ ¹æ®è¿™ä¸ªcellIDå»ç¼“å­˜æ± ä¸­çœ‹æœ‰æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cell UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cellID"]; // 3. å¦‚æœç¼“å­˜æ± ä¸­æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cell, è‡ªå·±åˆ›å»º if (cell == nil) &#123; cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cellID"]; &#125; return cell;&#125; æ–¹æ³•äºŒï¼š 1.å®šä¹‰ä¸€ä¸ªcellçš„é‡ç”¨æ ‡è¯†ã€‚ 2.æ ¹æ®è¿™ä¸ªIDå»ç¼“å­˜æ± ä¸­çœ‹æœ‰æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cellã€‚ 3.å¦‚æœç¼“å­˜æ± ä¸­æ²¡æœ‰ä¼šçœ‹æœ‰æ²¡æœ‰ï¼Œæ ¹æ®IDè¿™ä¸ªæ ‡è¯†æ³¨å†Œå¯¹åº”çš„cellç±»å‹ã€‚ 4.å¦‚æœæœ‰æ³¨å†Œï¼Œä¼šæ ¹æ®è¿™ä¸ªIDåˆ›å»ºå¯¹åº”çš„ç±»å‹çš„cellï¼Œå¹¶ä¸”ä¼šç»‘å®šè¿™ä¸ªIDæ ‡è¯†ï¼Œè¿”å›è¿™ä¸ªcellã€‚ 12345678910111213141516171819202122// 1. å®šä¹‰ä¸€ä¸ªé‡ç”¨æ ‡è¯†static NSString *cellID = @"CellID";static NSString *testID = @"testID";- (void)viewDidLoad &#123; [super viewDidLoad]; // 3. æ ¹æ®ID è¿™ä¸ªæ ‡è¯† æ³¨å†Œ å¯¹åº”çš„cellç±»å‹æ˜¯UITableViewCell [self.tableView registerClass:[LNTableViewCell class] forCellReuseIdentifier:cellID]; [self.tableView registerNib:[UINib nibWithNibName:NSStringFromClass([LNTableViewXibCell class]) bundle:nil] forCellReuseIdentifier: testID];&#125;- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123; // 2. æ ¹æ®è¿™ä¸ªIDå»ç¼“å­˜æ± ä¸­çœ‹æœ‰æ²¡æœ‰å¯å¾ªç¯åˆ©ç”¨çš„cell LNTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ID]; if (indexPath.row%2 == 0) &#123; LNTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CellID]; return cell; &#125;else&#123; LNTableViewXibCell *cell = [tableView dequeueReusableCellWithIdentifier:testID]; return cell; &#125;&#125; æ€»ç»“ï¼š ä¸åŒç±»å‹çš„Cellå…±å­˜ï¼ˆé‡è¦ç‚¹æ˜¯CellIDä¸åŒï¼‰ã€‚ UITableViewCellçš„ä¼˜åŒ– UITableView çš„ä¼˜åŒ–ä¸»è¦ä»ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼š 1.æå‰è®¡ç®—å¹¶ç¼“å­˜å¥½é«˜åº¦ï¼ˆå¸ƒå±€ï¼‰ï¼Œå› ä¸ºheightForRowAtIndexPath:æ˜¯è°ƒç”¨æœ€é¢‘ç¹çš„æ–¹æ³•ï¼› 2.å¼‚æ­¥ç»˜åˆ¶ï¼Œé‡åˆ°å¤æ‚ç•Œé¢ï¼Œé‡åˆ°æ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œå¯èƒ½å°±æ˜¯çªç ´å£ï¼› 3.æ»‘åŠ¨æ—¶æŒ‰éœ€åŠ è½½ï¼ŒæŒ‰ç…§ç”¨æˆ·æ»šåŠ¨çš„é€Ÿåº¦å»é€‰æ‹©åŠ è½½å“ªä¸ªcellã€‚è¿™ä¸ªåœ¨å¤§é‡å›¾ç‰‡å±•ç¤ºï¼Œç½‘ç»œåŠ è½½çš„æ—¶å€™å¾ˆç®¡ç”¨ï¼ï¼ˆSDWebImageå·²ç»å®ç°å¼‚æ­¥åŠ è½½ï¼Œé…åˆè¿™æ¡æ€§èƒ½æ æ çš„ï¼‰ã€‚ é™¤äº†ä¸Šé¢æœ€ä¸»è¦çš„ä¸‰ä¸ªæ–¹é¢å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå‡ ä¹å¤§ä¼™éƒ½å¾ˆç†ŸçŸ¥çš„ä¼˜åŒ–ç‚¹ï¼š 1.æ­£ç¡®ä½¿ç”¨reuseIdentifieræ¥é‡ç”¨Cellsã€‚ 2.å°½é‡ä½¿æ‰€æœ‰çš„view opaqueï¼ŒåŒ…æ‹¬Cellè‡ªèº«ã€‚ 3.å°½é‡å°‘ç”¨æˆ–ä¸ç”¨é€æ˜å›¾å±‚ã€‚ 4.å¦‚æœCellå†…æ˜¾ç¤ºçš„å†…å®¹æ¥è‡ªwebï¼Œä½¿ç”¨å¼‚æ­¥åŠ è½½ï¼Œç¼“å­˜è¯·æ±‚ç»“æœã€‚ 5.å‡å°‘subviewsçš„æ•°é‡ã€‚ 6.åœ¨heightForRowAtIndexPath:ä¸­å°½é‡ä¸ä½¿ç”¨ã€‚cellForRowAtIndexPath:ï¼Œå¦‚æœä½ éœ€è¦ç”¨åˆ°å®ƒï¼Œåªç”¨ä¸€æ¬¡ç„¶åç¼“å­˜ç»“æœã€‚ 7.å°½é‡å°‘ç”¨addViewç»™CellåŠ¨æ€æ·»åŠ Viewï¼Œå¯ä»¥åˆå§‹åŒ–æ—¶å°±æ·»åŠ ï¼Œç„¶åé€šè¿‡hideæ¥æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºã€‚ æ¡ˆä¾‹ï¼ˆæŒ‰éœ€åŠ è½½ï¼‰ï¼š åŸç†ï¼šåœ¨å¿«é€Ÿæ»‘åŠ¨æ¾æ‰‹åæ»šåŠ¨çš„cellä¸ªæ•°è¶…è¿‡é¢„å®šçš„ä¸ªæ•°ï¼Œåªæ˜¾ç¤ºæœ€åå‡ºç°çš„cellçš„å‰ä¸‰ä¸ªcellï¼ŒæŠŠè¿™ä¸‰ä¸ªcellçš„indexPathå­˜åˆ°æ•°ç»„ä¸­ï¼Œåœ¨æ•°æ®æºæ–¹æ³•é‡Œåˆ¤æ–­å¦‚æœæ•°ç»„count&gt;0ï¼Œä¸”æ•°ç»„ä¸åŒ…å«å½“å‰çš„indexPathï¼Œé‚£å°±è¯´æ˜æ­¤cellæ˜¯åœ¨å¿«é€Ÿæ»‘åŠ¨ä¸­éœ€è¦éšè—çš„ï¼š 123456789101112131415161718192021//æŒ‰éœ€åŠ è½½ - å¦‚æœç›®æ ‡è¡Œä¸å½“å‰è¡Œç›¸å·®è¶…è¿‡æŒ‡å®šè¡Œæ•°ï¼Œåªåœ¨ç›®æ ‡æ»šåŠ¨èŒƒå›´çš„å‰åæŒ‡å®š3è¡ŒåŠ è½½ã€‚- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset&#123; NSIndexPath *ip = [_titleTableView indexPathForRowAtPoint:CGPointMake(0, targetContentOffset-&gt;y)]; NSIndexPath *cip = [[_titleTableView indexPathsForVisibleRows] firstObject]; NSInteger skipCount = 1; // è¿™é‡Œæˆ‘ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºå†™çš„1ï¼Œå¤§å®¶å¯ä»¥æŒ‰éœ€æ±‚è‡ªè¡Œè®¾å®š if (labs(cip.row-ip.row)&gt;skipCount) &#123;// æ­¤æ–¹æ³•å¯ä»¥è·å–å°†è¦æ˜¾ç¤ºçš„ç»„// visibleSections = [NSSet setWithArray:[[_titleTableView indexPathsForVisibleRows] valueForKey:@"section"]]; NSArray *temp = [_titleTableView indexPathsForRowsInRect:CGRectMake(0, targetContentOffset-&gt;y, _titleTableView.frame.size.width, _titleTableView.frame.size.height)]; NSMutableArray *arr = [NSMutableArray arrayWithArray:temp]; if (velocity.y&lt;0) &#123; // ä¸Šæ»‘ NSIndexPath *indexPath = [temp lastObject]; if (indexPath.row+33) &#123; [arr addObject:[NSIndexPath indexPathForRow:indexPath.row-3 inSection:indexPath.section]]; [arr addObject:[NSIndexPath indexPathForRow:indexPath.row-2 inSection:indexPath.section]]; [arr addObject:[NSIndexPath indexPathForRow:indexPath.row-1 inSection:indexPath.section]]; &#125; &#125; [needLoadArr addObjectsFromArray:arr]; &#125;&#125; ç›¸åº”çš„ï¼Œæ¯æ¬¡å¼€å§‹æ‹–åŠ¨çš„æ—¶å€™å»æ¸…ç©ºæ•°ç»„ã€‚è¿˜æœ‰ç§æƒ…å†µï¼Œå¦‚æœç•Œé¢ä¸Šæœ‰æ˜¾ç¤ºç©ºç™½cellçš„æ—¶å€™çªç„¶æ‰‹åŠ¨åœæ­¢æ»šåŠ¨å‘¢? 123456789101112- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView &#123; [needLoadArr removeAllObjects]; // æ¸…ç©ºæ•°ç»„ // å–åˆ°å½“å‰ç•Œé¢ä¸Šèƒ½æ˜¾ç¤ºçš„indexPathsï¼Œåˆ¤æ–­æ˜¯å¦æœ‰éšè— NSArray *indexpaths = [_titleTableView indexPathsForVisibleRows]; UITableViewCell *firstCell = [_titleTableView cellForRowAtIndexPath:indexpaths.firstObject]; UITableViewCell *lastCell = [_titleTableView cellForRowAtIndexPath:indexpaths.lastObject]; // åœ¨å½“å‰å¯è§çš„åŒºåŸŸä¸­ï¼Œç¬¬ä¸€ä¸ªcellæˆ–è€…æœ€åä¸€ä¸ªcellæ˜¯éšè—çŠ¶æ€ï¼Œé‚£ä¹ˆé‡æ–°åŠ è½½å¯è§åŒºåŸŸå†…çš„cell if (firstCell.isHidden == true || lastCell.isHidden == true) &#123; [_titleTableView reloadRowsAtIndexPaths:indexpaths withRowAnimation:UITableViewRowAnimationNone]; &#125;&#125;ä¹Ÿå¯ä»¥æŠŠåˆ¤æ–­çš„ä»£ç å†™åœ¨scrollViewåœæ­¢æ»šåŠ¨ç›‘å¬æ–¹æ³•é‡Œï¼Œä½†æ˜¯ä¸ªäººè§‰å¾—æ²¡å¿…è¦ï¼Œå› ä¸ºè¿™ç§æƒ…å†µå¿…å®šæ˜¯æ‰‹åŠ¨è§¦ç¢°å»åœæ­¢çš„ï¼Œè¿™é‡Œå¤„ç†æ²¡é—®é¢˜ æ•°æ®æºæ–¹æ³•ï¼š 12345678 if (needLoadArr.count &gt; 0) &#123; if (![needLoadArr containsObject:indexPath]) &#123;// NSLog(@"è¯¥cellæ˜¯å¿«é€Ÿæ»‘åŠ¨ä¸­çš„cellï¼Œæ‰€ä»¥éšè—"); cell.hidden = true; return cell; &#125; &#125; cell.hidden = false; // æ­£å¸¸æ˜¾ç¤ºçš„cell é™„ä¸Šï¼šæŒ‰éœ€åŠ è½½å‚è€ƒ VVeboTableViewDemoï¼š è¿™ä½å‰è¾ˆåœ¨tableViewä¼˜åŒ–ä¸Šåšåˆ°äº†æè‡´ã€‚ æ€»ç»“ï¼štableViewæ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„æˆ‘ä»¬éƒ½éœ€è¦ã€‚æ¯”å¦‚ä¸æ˜¯å¿…éœ€è¦æ˜¾ç¤ºçš„ç•Œé¢ï¼Œé¢„å…ˆè®¡ç®—è¡Œé«˜å°±æ˜¯æµªè´¹ï¼ˆç”¨æˆ·æµé‡ï¼‰ã€‚åº”é€‚æ—¶è€Œå®šã€‚ç«™åœ¨ç”¨æˆ·ä½“éªŒçš„è§’åº¦å¼€å‘æ‰æ˜¯å¥½çš„ä¼ç çŒ¿ã€‚ UITableViewé‡è¦å±æ€§å›¾è§£ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ§ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SDWebImageæºç 2â€”SDImageCache]]></title>
    <url>%2FSourceAnnotations%2FSDSourceCode2.html</url>
    <content type="text"><![CDATA[Write in the first SDImageCache æ˜¯ SDWebImage çš„é‡è¦éƒ¨ä»¶ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œå®Œæˆäº†å¯¹å›¾ç‰‡çš„å†…å­˜ç¼“å­˜ã€å¼‚æ­¥ç£ç›˜ç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜æŸ¥è¯¢ç­‰åŠŸèƒ½ï¼Œè¿™ä¹Ÿæ˜¯å…¶ä¼˜ç§€æ€§èƒ½çš„åŸå› æ‰€åœ¨ï¼Œå³ä¸‹è½½è¿‡çš„å›¾ç‰‡å°†è¢«ç¼“å­˜åˆ°å†…å­˜å’Œæœ¬åœ°ç£ç›˜ï¼Œå½“å†æ¬¡è¯·æ±‚ç›¸åŒå›¾ç‰‡æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­æå–å›¾ç‰‡ï¼Œä»è€Œå¤§å¤§æé«˜äº†åŠ è½½é€Ÿåº¦ã€‚SDWebImage çš„ä½œè€…å¯¹æ ¸å¿ƒæ–¹æ³•éƒ½åšäº†æ¯”è¾ƒå¥½çš„æ³¨é‡Šï¼Œè¿™ä¹Ÿå¤§å¤§æé«˜äº†æˆ‘ä»¬çš„é˜…è¯»é€Ÿåº¦ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€SDImageCache ç¼“å­˜å™¨ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ SDWebImage â€“&gt;çŸ¥å…¶ç„¶äº¦ã€ŒçŸ¥å…¶æ‰€ä»¥ç„¶ã€æˆ‘ä»¬å°±ç›´æ¥ä» SDImageCache.h å…¥æ‰‹å§ SDImageCache.h123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402/* * This file is part of the SDWebImage package. * (c) Olivier Poitrey &lt;rs@dailymotion.com&gt; * * For the full copyright and license information, please view the LICENSE * file that was distributed with this source code. */#import &lt;Foundation/Foundation.h&gt;#import "SDWebImageCompat.h"//ç¼“å­˜ç±»å‹çš„æšä¸¾typedef NS_ENUM(NSInteger, SDImageCacheType) &#123; /** * The image wasn't available the SDWebImage caches, but was downloaded from the web. */ SDImageCacheTypeNone, //ä¸ä½¿ç”¨ SDWebImage ç¼“å­˜ï¼Œä»ç½‘ç»œä¸‹è½½ /** * The image was obtained from the disk cache. */ SDImageCacheTypeDisk, //ä½¿ç”¨ç£ç›˜ç¼“å­˜ /** * The image was obtained from the memory cache. */ SDImageCacheTypeMemory //ä½¿ç”¨å†…å­˜ç¼“å­˜&#125;;//å®šä¹‰SDWebImageQueryCompletedBlockå—ï¼Œå¤„ç†æŸ¥è¯¢å›è°ƒï¼Œå‚æ•°ï¼ˆå›¾ç‰‡ï¼Œç¼“å­˜ç±»å‹æšä¸¾ï¼‰typedef void(^SDWebImageQueryCompletedBlock)(UIImage *image, SDImageCacheType cacheType);//å®šä¹‰SDWebImageCheckCacheCompletionBlockå—ï¼Œå¤„ç†å†…å­˜ç¼“å­˜æ£€æŸ¥å›è°ƒï¼Œå‚æ•°ï¼ˆæ˜¯å¦æœ‰ç¼“å­˜ï¼‰typedef void(^SDWebImageCheckCacheCompletionBlock)(BOOL isInCache);//å®šä¹‰SDWebImageCalculateSizeBlockå—ï¼Œå¤„ç†ç¼“å­˜ç©ºé—´å›è°ƒï¼Œå‚æ•°ï¼ˆæ–‡ä»¶å¤§å°ï¼Œæ€»å¤§å°ï¼‰typedef void(^SDWebImageCalculateSizeBlock)(NSUInteger fileCount, NSUInteger totalSize);/** * SDImageCache maintains a memory cache and an optional disk cache. Disk cache write operations are performed * asynchronous so it doesnâ€™t add unnecessary latency to the UI. * * SDImageCache ç»´æŠ¤ä¸€ä¸ªå†…å­˜ç¼“å­˜ä»¥åŠä¸€ä¸ª"å¯é€‰"çš„ç£ç›˜ç¼“å­˜ã€‚ç£ç›˜ç¼“å­˜çš„å†™å…¥æ“ä½œæ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œå› æ­¤ä¸ä¼šé€ æˆ UI çš„å»¶è¿Ÿ */@interface SDImageCache : NSObject/** * Decompressing images that are downloaded and cached can improve performance but can consume lot of memory. * Defaults to YES. Set this to NO if you are experiencing a crash due to excessive memory consumption. * * è§£å‹ç¼©å›¾ç‰‡èƒ½æé«˜æ€§èƒ½ï¼Œä½†æ˜¯ä¼šå ç”¨è¾ƒå¤§çš„å†…å­˜ç©ºé—´ã€‚ * é»˜è®¤ä¸ºYESï¼Œå¦‚æœä½ çš„ä»»åŠ¡å¯¹å†…å­˜ç©ºé—´æ•æ„Ÿï¼Œå»ºè®®è®¾ç½®ä¸ºNO */@property (assign, nonatomic) BOOL shouldDecompressImages;/** * disable iCloud backup [defaults to YES] * * ç¦ç”¨iCloudå¤‡ä»½,é»˜è®¤ä¸ºYES */@property (assign, nonatomic) BOOL shouldDisableiCloud;/** * use memory cache [defaults to YES] * * ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œé»˜è®¤ä¸ºYES */@property (assign, nonatomic) BOOL shouldCacheImagesInMemory;/** * The maximum "total cost" of the in-memory image cache. The cost function is the number of pixels held in memory. * * å†…å­˜æ˜ åƒç¼“å­˜ä¸­çš„æœ€å¤§â€œæ€»æˆæœ¬â€ã€‚"æˆæœ¬"æ˜¯åœ¨å†…å­˜ä¸­å­˜å‚¨çš„åƒç´ æ•°ã€‚æˆæœ¬æ¦‚å¿µè¦ä¸NSCacheç›¸å…³ */@property (assign, nonatomic) NSUInteger maxMemoryCost;/** * The maximum number of objects the cache should hold. * * ç¼“å­˜ä¸­å¯ä»¥å­˜æ”¾ç¼“å­˜çš„æœ€å¤§æ•°é‡ï¼Œä¸NSCacheç›¸å…³ */@property (assign, nonatomic) NSUInteger maxMemoryCountLimit;/** * The maximum length of time to keep an image in the cache, in seconds * * ç¼“å­˜çš„æœ€é•¿æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œé»˜è®¤ä¸º1å‘¨ */@property (assign, nonatomic) NSInteger maxCacheAge;/** * The maximum size of the cache, in bytes. * * ç¼“å­˜å›¾åƒæ€»å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œé»˜è®¤æ•°å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸ä½œé™åˆ¶ */@property (assign, nonatomic) NSUInteger maxCacheSize;#pragma mark --------------------#pragma mark Methods/** * Returns global shared cache instance * @return SDImageCache global instance * * å•ä¾‹æ–¹æ³•ï¼Œè·å¾—ä¸€ä¸ªå…¨å±€çš„ç¼“å­˜å®ä¾‹ */+ (SDImageCache *)sharedImageCache;/** * Init a new cache store with a specific namespace * @param ns The namespace to use for this cache store * * ä½¿ç”¨æŒ‡å®šçš„å‘½åç©ºé—´å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ç¼“å­˜å­˜å‚¨ * @param ns ç¼“å­˜å­˜å‚¨ä½¿ç”¨çš„å‘½åç©ºé—´ */- (id)initWithNamespace:(NSString *)ns;/** * Init a new cache store with a specific namespace and directory * @param ns The namespace to use for this cache store * @param directory Directory to cache disk images in * * ä½¿ç”¨æŒ‡å®šçš„å‘½åç©ºé—´å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ç¼“å­˜å­˜å‚¨å’Œç›®å½• * @param ns ç¼“å­˜å­˜å‚¨ä½¿ç”¨çš„å‘½åç©ºé—´ * @param directory ç¼“å­˜æ˜ åƒæ‰€åœ¨ç›®å½• */- (id)initWithNamespace:(NSString *)ns diskCacheDirectory:(NSString *)directory;//è®¾ç½®ç£ç›˜ç¼“å­˜è·¯å¾„-(NSString *)makeDiskCachePath:(NSString*)fullNamespace;/** * Add a read-only cache path to search for images pre-cached by SDImageCache * Useful if you want to bundle pre-loaded images with your app * @param path The path to use for this read-only cache path * * å¦‚æœå¸Œæœ›åœ¨ bundle ä¸­å­˜å‚¨é¢„åŠ è½½çš„å›¾åƒï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªåªè¯»çš„ç¼“å­˜è·¯å¾„ * è®© SDImageCache ä» Bundle ä¸­æœç´¢é¢„å…ˆç¼“å­˜çš„å›¾åƒ * @param path åªè¯»ç¼“å­˜è·¯å¾„(mainBundleä¸­çš„å…¨è·¯å¾„) */- (void)addReadOnlyCachePath:(NSString *)path;/** * Store an image into memory and disk cache at the given key. * * @param image The image to store * @param key The unique image cache key, usually it's image absolute URL * * ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œç£ç›˜ç¼“å­˜ * * @param image è¦ä¿å­˜çš„å›¾ç‰‡ * @param key å”¯ä¸€çš„å›¾åƒç¼“å­˜é”®ï¼Œé€šå¸¸æ˜¯å›¾åƒçš„å®Œæ•´ URL */- (void)storeImage:(UIImage *)image forKey:(NSString *)key;/** * Store an image into memory and optionally disk cache at the given key. * * @param image The image to store * @param key The unique image cache key, usually it's image absolute URL * @param toDisk Store the image to disk cache if YES * * ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œå¯é€‰çš„ç£ç›˜ç¼“å­˜ * * @param image è¦ä¿å­˜çš„å›¾ç‰‡ * @param key å”¯ä¸€çš„å›¾åƒç¼“å­˜é”®ï¼Œé€šå¸¸æ˜¯å›¾åƒçš„å®Œæ•´ URL * @param toDisk å¦‚æœæ˜¯ YESï¼Œåˆ™å°†å›¾åƒç¼“å­˜åˆ°ç£ç›˜ */- (void)storeImage:(UIImage *)image forKey:(NSString *)key toDisk:(BOOL)toDisk;/** * Store an image into memory and optionally disk cache at the given key. * * @param image The image to store * @param recalculate BOOL indicates if imageData can be used or a new data should be constructed from the UIImage * @param imageData The image data as returned by the server, this representation will be used for disk storage * instead of converting the given image object into a storable/compressed image format in order * to save quality and CPU * @param key The unique image cache key, usually it's image absolute URL * @param toDisk Store the image to disk cache if YES * * ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œå¯é€‰çš„ç£ç›˜ç¼“å­˜ * * @param image è¦ä¿å­˜çš„å›¾åƒ * @param recalculate æ˜¯å¦ç›´æ¥ä½¿ç”¨ imageDataï¼Œè¿˜æ˜¯ä» UIImage é‡æ–°æ„é€ æ•°æ® * @param imageData ä»æœåŠ¡å™¨è¿”å›å›¾åƒçš„äºŒè¿›åˆ¶æ•°æ®ï¼Œè¡¨ç¤ºç›´æ¥ä¿å­˜åˆ°ç£ç›˜ è€Œä¸æ˜¯å°†ç»™å®šçš„å›¾åƒå¯¹è±¡è½¬æ¢æˆä¸€ä¸ªå¯å­˜å‚¨/å¯å‹ç¼©çš„å›¾åƒæ ¼å¼ï¼Œä»è€Œä¿ç•™å›¾ç‰‡è´¨é‡å¹¶é™ä½ CPU å¼€é”€ * @param key å”¯ä¸€çš„å›¾åƒç¼“å­˜é”®ï¼Œé€šå¸¸æ˜¯å›¾åƒçš„å®Œæ•´ URL * @param toDisk å¦‚æœæ˜¯ YESï¼Œåˆ™å°†å›¾åƒç¼“å­˜åˆ°ç£ç›˜ */- (void)storeImage:(UIImage *)image recalculateFromImage:(BOOL)recalculate imageData:(NSData *)imageData forKey:(NSString *)key toDisk:(BOOL)toDisk;/** * Query the disk cache asynchronously. * * @param key The unique key used to store the wanted image * * å¼‚æ­¥æŸ¥è¯¢ç£ç›˜ç¼“å­˜ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @param doneBlock æŸ¥è¯¢ç»“æŸåçš„å›è°ƒ */- (NSOperation *)queryDiskCacheForKey:(NSString *)key done:(SDWebImageQueryCompletedBlock)doneBlock;/** * Query the memory cache synchronously. * * @param key The unique key used to store the wanted image * * åŒæ­¥æŸ¥è¯¢å†…å­˜ç¼“å­˜ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® */- (UIImage *)imageFromMemoryCacheForKey:(NSString *)key;/** * Query the disk cache synchronously after checking the memory cache. * * @param key The unique key used to store the wanted image * * æŸ¥è¯¢å†…å­˜ç¼“å­˜ä¹‹ååŒæ­¥æŸ¥è¯¢ç£ç›˜ç¼“å­˜ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® */- (UIImage *)imageFromDiskCacheForKey:(NSString *)key;/** * Remove the image from memory and disk cache synchronously * * @param key The unique image cache key * * åŒæ­¥ä»å†…å­˜å’Œç£ç›˜ç¼“å­˜åˆ é™¤å›¾åƒ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® */- (void)removeImageForKey:(NSString *)key;/** * Remove the image from memory and disk cache asynchronously * * @param key The unique image cache key * @param completion An block that should be executed after the image has been removed (optional) * * åŒæ­¥ä»å†…å­˜å’Œç£ç›˜ç¼“å­˜åˆ é™¤å›¾åƒ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @param completion å½“å›¾ç‰‡è¢«åˆ é™¤åä¼šè°ƒç”¨è¯¥blockå— */- (void)removeImageForKey:(NSString *)key withCompletion:(SDWebImageNoParamsBlock)completion;/** * Remove the image from memory and optionally disk cache asynchronously * * @param key The unique image cache key * @param fromDisk Also remove cache entry from disk if YES * * åŒæ­¥ä»å†…å­˜å’Œå¯é€‰ç£ç›˜ç¼“å­˜åˆ é™¤å›¾åƒ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @param fromDisk å¦‚æœæ˜¯ YESï¼Œåˆ™ä»ç£ç›˜åˆ é™¤ç¼“å­˜ */- (void)removeImageForKey:(NSString *)key fromDisk:(BOOL)fromDisk;/** * Remove the image from memory and optionally disk cache asynchronously * * @param key The unique image cache key * @param fromDisk Also remove cache entry from disk if YES * @param completion An block that should be executed after the image has been removed (optional) * * åŒæ­¥ä»å†…å­˜å’Œå¯é€‰ç£ç›˜ç¼“å­˜åˆ é™¤å›¾åƒ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @param fromDisk å¦‚æœæ˜¯ YESï¼Œåˆ™ä»ç£ç›˜åˆ é™¤ç¼“å­˜ * @param completion å½“å›¾ç‰‡è¢«åˆ é™¤åä¼šè°ƒç”¨è¯¥blockå— */- (void)removeImageForKey:(NSString *)key fromDisk:(BOOL)fromDisk withCompletion:(SDWebImageNoParamsBlock)completion;/** * Clear all memory cached images * * åˆ é™¤æ‰€æœ‰å†…å­˜ç¼“å­˜çš„å›¾åƒ */- (void)clearMemory;/** * Clear all disk cached images. Non-blocking method - returns immediately. * @param completion An block that should be executed after cache expiration completes (optional) * * åˆ é™¤æ‰€æœ‰ç£ç›˜ç¼“å­˜çš„å›¾åƒã€‚ * @param completion åˆ é™¤æ“ä½œåçš„å—ä»£ç å›è°ƒï¼ˆå¯é€‰ï¼‰ */- (void)clearDiskOnCompletion:(SDWebImageNoParamsBlock)completion;/** * Clear all disk cached images * @see clearDiskOnCompletion: * * åˆ é™¤æ‰€æœ‰ç£ç›˜ç¼“å­˜çš„å›¾åƒ * @see clearDiskOnCompletion:æ–¹æ³• */- (void)clearDisk;/** * Remove all expired cached image from disk. Non-blocking method - returns immediately. * @param completionBlock An block that should be executed after cache expiration completes (optional) * * ä»ç£ç›˜ä¸­åˆ é™¤æ‰€æœ‰è¿‡æœŸçš„ç¼“å­˜å›¾åƒã€‚ * @param completion åˆ é™¤æ“ä½œåçš„å—ä»£ç å›è°ƒï¼ˆå¯é€‰ï¼‰ */- (void)cleanDiskWithCompletionBlock:(SDWebImageNoParamsBlock)completionBlock;/** * Remove all expired cached image from disk * @see cleanDiskWithCompletionBlock: * * ä»ç£ç›˜ä¸­åˆ é™¤æ‰€æœ‰è¿‡æœŸçš„ç¼“å­˜å›¾åƒ * @see cleanDiskWithCompletionBlock:æ–¹æ³• */- (void)cleanDisk;/** * Get the size used by the disk cache * * è·å¾—ç£ç›˜ç¼“å­˜å ç”¨ç©ºé—´ */- (NSUInteger)getSize;/** * Get the number of images in the disk cache * * è·å¾—ç£ç›˜ç¼“å­˜å›¾åƒçš„ä¸ªæ•° */- (NSUInteger)getDiskCount;/** * Asynchronously calculate the disk cache's size. * * å¼‚æ­¥è®¡ç®—ç£ç›˜ç¼“å­˜çš„å¤§å° */- (void)calculateSizeWithCompletionBlock:(SDWebImageCalculateSizeBlock)completionBlock;/** * Async check if image exists in disk cache already (does not load the image) * * @param key the key describing the url * @param completionBlock the block to be executed when the check is done. * @note the completion block will be always executed on the main queue * * å¼‚æ­¥æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»åœ¨ç£ç›˜ç¼“å­˜ä¸­å­˜åœ¨ï¼ˆä¸åŠ è½½å›¾åƒï¼‰ * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @param completionBlock å½“å›¾ç‰‡è¢«åˆ é™¤åä¼šè°ƒç”¨è¯¥blockå— * @note completionBlockæ€»æ˜¯åœ¨ä¸»çº¿ç¨‹ */- (void)diskImageExistsWithKey:(NSString *)key completion:(SDWebImageCheckCacheCompletionBlock)completionBlock;/** * Check if image exists in disk cache already (does not load the image) * * @param key the key describing the url * * @return YES if an image exists for the given key * * æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»åœ¨ç£ç›˜ç¼“å­˜ä¸­å­˜åœ¨ï¼ˆä¸åŠ è½½å›¾åƒï¼‰ * * @param key ä¿å­˜å›¾åƒçš„å”¯ä¸€é”® * @return å¦‚æœè¯¥å›¾ç‰‡å­˜åœ¨ï¼Œåˆ™è¿”å›YES */- (BOOL)diskImageExistsWithKey:(NSString *)key;/** * Get the cache path for a certain key (needs the cache path root folder) * * @param key the key (can be obtained from url using cacheKeyForURL) * @param path the cache path root folder * * @return the cache path * * è·å¾—æŒ‡å®š key å¯¹åº”çš„ç¼“å­˜è·¯å¾„(éœ€è¦æŒ‡å®šç¼“å­˜è·¯å¾„çš„æ ¹ç›®å½•) * * @param key é”®ï¼ˆå¯ä»¥è°ƒç”¨cacheKeyForURLæ–¹æ³•è·å¾—ï¼‰ * @param path ç¼“å­˜è·¯å¾„æ ¹æ–‡ä»¶å¤¹ */- (NSString *)cachePathForKey:(NSString *)key inPath:(NSString *)path;/** * Get the default cache path for a certain key * * @param key the key (can be obtained from url using cacheKeyForURL) * * @return the default cache path * * è·å¾—æŒ‡å®š key çš„é»˜è®¤ç¼“å­˜è·¯å¾„ * * @param key é”®ï¼ˆå¯ä»¥è°ƒç”¨cacheKeyForURLæ–¹æ³•è·å¾—ï¼‰ * * @return é»˜è®¤ç¼“å­˜è·¯å¾„ */- (NSString *)defaultCachePathForKey:(NSString *)key;@end è™½ç„¶æ–¹æ³•çœ‹ä¸Šå»æŒºå¤šçš„ä½†å…¶å®æ ¸å¿ƒçš„æ–¹æ³•å°±æ˜¯å¯¹å›¾ç‰‡ç¼“å­˜çš„å¢ã€åˆ ã€æŸ¥çš„å®ç°ï¼Œåªä¸è¿‡æ¯ç§åŠŸèƒ½å¯èƒ½æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€å…³æ³¨æ ¸å¿ƒçš„å‡ ä¸ªæ–¹æ³•å³å¯ã€‚ SDWebImageå®ç°äº†å†…å­˜ç¼“å­˜å’Œç£ç›˜ç¼“å­˜ï¼Œå†…å­˜ç¼“å­˜æ˜¯é€šè¿‡NSCacheå®ç°ï¼Œç£ç›˜ç¼“å­˜æ˜¯é€šè¿‡NSFileManageræ¥å®ç°æ–‡ä»¶çš„å­˜å‚¨ï¼Œç£ç›˜ç¼“å­˜æ˜¯å¼‚æ­¥å®ç°çš„ã€‚ åˆå§‹åŒ–é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿äºNSCacheçš„ç±»AutoPurgeCacheï¼Œå½“æ”¶åˆ°å†…å­˜è­¦å‘Šæ—¶ï¼Œé»˜è®¤æ¸…é™¤æ‰€æœ‰ç¼“å­˜1234567891011121314151617181920212223@interface AutoPurgeCache : NSCache@end@implementation AutoPurgeCache//åˆå§‹åŒ–- (id)init&#123; self = [super init]; if (self) &#123; //ç›‘å¬åˆ°UIApplicationDidReceiveMemoryWarningNotificationï¼ˆåº”ç”¨ç¨‹åºå‘ç”Ÿå†…å­˜è­¦å‘Šï¼‰é€šçŸ¥åï¼Œè°ƒç”¨removeAllObjectsæ–¹æ³• [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(removeAllObjects) name:UIApplicationDidReceiveMemoryWarningNotification object:nil]; &#125; return self;&#125;//ç§»é™¤é€šçŸ¥- (void)dealloc&#123; [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidReceiveMemoryWarningNotification object:nil];&#125;@end åˆå§‹åŒ–SDImageCache123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103//å•ä¾‹ç±»æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æä¾›ä¸€ä¸ªå…¨å±€çš„SDImageCacheå®ä¾‹+ (SDImageCache *)sharedImageCache &#123; static dispatch_once_t once; static id instance; dispatch_once(&amp;once, ^&#123; instance = [self new]; &#125;); return instance;&#125;//åˆå§‹åŒ–æ–¹æ³•ï¼Œé»˜è®¤çš„ç¼“å­˜ç©ºé—´åç§°ä¸ºdefault- (id)init &#123; return [self initWithNamespace:@&quot;default&quot;];&#125;//ä½¿ç”¨æŒ‡å®šçš„å‘½åç©ºé—´å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ç¼“å­˜å­˜å‚¨- (id)initWithNamespace:(NSString *)ns &#123; //æ ¹æ®ä¼ å…¥çš„å‘½åç©ºé—´è®¾ç½®ç£ç›˜ç¼“å­˜è·¯å¾„ NSString *path = [self makeDiskCachePath:ns]; return [self initWithNamespace:ns diskCacheDirectory:path];&#125;//ä½¿ç”¨æŒ‡å®šçš„å‘½åç©ºé—´å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„ç¼“å­˜å­˜å‚¨å’Œç›®å½•- (id)initWithNamespace:(NSString *)ns diskCacheDirectory:(NSString *)directory &#123; if ((self = [super init])) &#123; //æ‹¼æ¥é»˜è®¤çš„ç£ç›˜ç¼“å­˜ç›®å½• NSString *fullNamespace = [@&quot;com.hackemist.SDWebImageCache.&quot; stringByAppendingString:ns]; // initialise PNG signature data //åˆå§‹åŒ–PNGæ•°æ®ç­¾å 8å­—èŠ‚ kPNGSignatureData = [NSData dataWithBytes:kPNGSignatureBytes length:8]; // Create IO serial queue //åˆ›å»ºå¤„ç†IOæ“ä½œçš„ä¸²è¡Œé˜Ÿåˆ— _ioQueue = dispatch_queue_create(&quot;com.hackemist.SDWebImageCache&quot;, DISPATCH_QUEUE_SERIAL); // Init default values //åˆå§‹åŒ–é»˜è®¤çš„æœ€å¤§ç¼“å­˜æ—¶é—´ == 1å‘¨ _maxCacheAge = kDefaultCacheMaxCacheAge; // Init the memory cache //åˆå§‹åŒ–å†…å­˜ç¼“å­˜ï¼Œä½¿ç”¨NSCache _memCache = [[AutoPurgeCache alloc] init]; _memCache.name = fullNamespace; // Init the disk cache //åˆå§‹åŒ–ç£ç›˜ç¼“å­˜ï¼Œå¦‚æœç£ç›˜ç¼“å­˜è·¯å¾„ä¸å­˜åœ¨åˆ™è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œå¦åˆ™æ ¹æ®å‘½åç©ºé—´é‡æ–°è®¾ç½® if (directory != nil) &#123; _diskCachePath = [directory stringByAppendingPathComponent:fullNamespace]; &#125; else &#123; NSString *path = [self makeDiskCachePath:ns]; _diskCachePath = path; &#125; // Set decompression to YES //è®¾ç½®å›¾ç‰‡æ˜¯å¦è§£å‹ç¼©ï¼Œé»˜è®¤ä¸ºYES _shouldDecompressImages = YES; // memory cache enabled // å†…å­˜ç¼“å­˜æ˜¯å¦å¯ç”¨ _shouldCacheImagesInMemory = YES; // Disable iCloud //ç¦ç”¨iCloudå¤‡ä»½,é»˜è®¤ä¸ºYES _shouldDisableiCloud = YES; //åŒæ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—ï¼šåˆå§‹åŒ–æ–‡ä»¶ç®¡ç†è€… dispatch_sync(_ioQueue, ^&#123; _fileManager = [NSFileManager new]; &#125;);#if TARGET_OS_IPHONE // Subscribe to app events //ç›‘å¬åº”ç”¨ç¨‹åºé€šçŸ¥ //å½“ç›‘å¬åˆ°UIApplicationDidReceiveMemoryWarningNotificationï¼ˆç³»ç»Ÿçº§å†…å­˜è­¦å‘Šï¼‰ //è°ƒç”¨clearMemoryæ–¹æ³•,æ¸…é™¤å†…å­˜ç¼“å­˜ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(clearMemory) name:UIApplicationDidReceiveMemoryWarningNotification object:nil]; //å½“ç›‘å¬åˆ°UIApplicationWillTerminateNotificationï¼ˆç¨‹åºå°†ç»ˆæ­¢ï¼‰ //è°ƒç”¨cleanDiskæ–¹æ³•,æ¸…ç†è¿‡æœŸ(é»˜è®¤å¤§äºä¸€å‘¨)çš„ç£ç›˜ç¼“å­˜ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(cleanDisk) name:UIApplicationWillTerminateNotification object:nil]; //å½“ç›‘å¬åˆ°UIApplicationDidEnterBackgroundNotificationï¼ˆè¿›å…¥åå°ï¼‰ //è°ƒç”¨backgroundCleanDiskæ–¹æ³•,æ¸…ç†è¿‡æœŸç£ç›˜ç¼“å­˜ [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgroundCleanDisk) name:UIApplicationDidEnterBackgroundNotification object:nil];#endif &#125; return self;&#125;//ç§»é™¤é€šçŸ¥- (void)dealloc &#123; [[NSNotificationCenter defaultCenter] removeObserver:self]; SDDispatchQueueRelease(_ioQueue);&#125; ä»¥ä¸Šå°±æ˜¯SDImageCacheçš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯åˆå§‹åŒ–å†…å­˜ç¼“å­˜å¯¹è±¡ä»¥åŠåˆå§‹åŒ–ç£ç›˜ç¼“å­˜ç›®å½•ï¼Œä»¥åŠå¯¹ä¸€äº›é»˜è®¤å‚æ•°çš„èµ‹å€¼ã€‚ ç¼“å­˜å›¾ç‰‡è™½ç„¶SDImageCacheæœ‰å¤šä¸ªå­˜å‚¨å›¾ç‰‡çš„æ–¹æ³•ï¼Œä½†éƒ½æ˜¯åŸºäºä¸‹é¢è¿™ä¸€ä¸ªæ–¹æ³•å¹¶ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œå·²ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394//ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œå¯é€‰çš„ç£ç›˜ç¼“å­˜- (void)storeImage:(UIImage *)image recalculateFromImage:(BOOL)recalculate imageData:(NSData *)imageData forKey:(NSString *)key toDisk:(BOOL)toDisk &#123; //å¦‚æœå›¾ç‰‡æˆ–å¯¹åº”çš„keyä¸ºç©ºï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å› if (!image || !key) &#123; return; &#125; // if memory cache is enabled //å¦‚æœå†…å­˜ç¼“å­˜å¯ç”¨ if (self.shouldCacheImagesInMemory) &#123; //è®¡ç®—è¯¥å›¾ç‰‡çš„ã€æˆæœ¬ã€ NSUInteger cost = SDCacheCostForImage(image); //æŠŠè¯¥å›¾ç‰‡ä¿å­˜åˆ°å†…å­˜ç¼“å­˜ä¸­ [self.memCache setObject:image forKey:key cost:cost]; &#125; //åˆ¤æ–­æ˜¯å¦éœ€è¦æ²™ç›’ç¼“å­˜ if (toDisk) &#123; //å¼‚æ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—ï¼šå¼€å­çº¿ç¨‹å¼‚æ­¥å¤„ç†blockä¸­çš„ä»»åŠ¡ dispatch_async(self.ioQueue, ^&#123; //æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„å›¾ç‰‡äºŒè¿›åˆ¶æ•°æ® NSData *data = imageData; //å¦‚æœå›¾ç‰‡å­˜åœ¨ä¸”ï¼ˆç›´æ¥ä½¿ç”¨imageData||imageDataä¸ºç©ºï¼‰ if (image &amp;&amp; (recalculate || !data)) &#123;#if TARGET_OS_IPHONE // We need to determine if the image is a PNG or a JPEG // PNGs are easier to detect because they have a unique signature (http://www.w3.org/TR/PNG-Structure.html) // The first eight bytes of a PNG file always contain the following (decimal) values: // 137 80 78 71 13 10 26 10 // If the imageData is nil (i.e. if trying to save a UIImage directly or the image was transformed on download) // and the image has an alpha channel, we will consider it PNG to avoid losing the transparency //è·å¾—è¯¥å›¾ç‰‡çš„alphaä¿¡æ¯ int alphaInfo = CGImageGetAlphaInfo(image.CGImage); BOOL hasAlpha = !(alphaInfo == kCGImageAlphaNone || alphaInfo == kCGImageAlphaNoneSkipFirst || alphaInfo == kCGImageAlphaNoneSkipLast); //åˆ¤æ–­è¯¥å›¾ç‰‡æ˜¯å¦æ˜¯PNGå›¾ç‰‡ BOOL imageIsPng = hasAlpha; // But if we have an image data, we will look at the preffix if ([imageData length] &gt;= [kPNGSignatureData length]) &#123; imageIsPng = ImageDataHasPNGPreffix(imageData); &#125; //å¦‚æœåˆ¤å®šæ˜¯PNGå›¾ç‰‡ï¼Œé‚£ä¹ˆæŠŠå›¾ç‰‡è½¬å˜ä¸ºNSDataå‹ç¼© if (imageIsPng) &#123; data = UIImagePNGRepresentation(image); &#125; else &#123; //å¦åˆ™é‡‡ç”¨JPEGçš„æ–¹å¼ data = UIImageJPEGRepresentation(image, (CGFloat)1.0); &#125;#else data = [NSBitmapImageRep representationOfImageRepsInArray:image.representations usingType: NSJPEGFileType properties:nil];#endif &#125; if (data) &#123; //ç¡®å®š_diskCachePathè·¯å¾„æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™åˆ›å»º if (![_fileManager fileExistsAtPath:_diskCachePath]) &#123; [_fileManager createDirectoryAtPath:_diskCachePath withIntermediateDirectories:YES attributes:nil error:NULL]; &#125; // get cache Path for image key // æ ¹æ®keyè·å¾—ç¼“å­˜è·¯å¾„ NSString *cachePathForKey = [self defaultCachePathForKey:key]; // transform to NSUrl //æŠŠè·¯å¾„è½¬æ¢ä¸ºNSURLç±»å‹ NSURL *fileURL = [NSURL fileURLWithPath:cachePathForKey]; //ä½¿ç”¨æ–‡ä»¶ç®¡ç†è€…åœ¨ç¼“å­˜è·¯å¾„åˆ›å»ºæ–‡ä»¶ï¼Œå¹¶è®¾ç½®æ•°æ® [_fileManager createFileAtPath:cachePathForKey contents:data attributes:nil]; // disable iCloud backup //å¦‚æœç¦ç”¨äº†iCloudå¤‡ä»½ if (self.shouldDisableiCloud) &#123; //æ ‡è®°æ²™ç›’ä¸­ä¸å¤‡ä»½æ–‡ä»¶ï¼ˆæ ‡è®°è¯¥æ–‡ä»¶ä¸å¤‡ä»½ï¼‰ [fileURL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:nil]; &#125; &#125; &#125;); &#125;&#125;//ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œç£ç›˜ç¼“å­˜- (void)storeImage:(UIImage *)image forKey:(NSString *)key &#123; [self storeImage:image recalculateFromImage:YES imageData:nil forKey:key toDisk:YES];&#125;//ä½¿ç”¨æŒ‡å®šçš„é”®å°†å›¾åƒä¿å­˜åˆ°å†…å­˜å’Œå¯é€‰çš„ç£ç›˜ç¼“å­˜- (void)storeImage:(UIImage *)image forKey:(NSString *)key toDisk:(BOOL)toDisk &#123; [self storeImage:image recalculateFromImage:YES imageData:nil forKey:key toDisk:toDisk];&#125; è‡³æ­¤ï¼Œå›¾ç‰‡ç¼“å­˜çš„è¿‡ç¨‹å°±å®Œæˆäº†ï¼Œè¿™æ—¶å€™åœ¨æ²™ç›’Library/Cache/ç›®å½•ä¸‹å°±ä¼šæœ‰ä¸€ä»½å›¾ç‰‡çš„ç¼“å­˜ã€‚ä¸‹é¢çœ‹ä¸€ä¸‹æŸ¥è¯¢å›¾ç‰‡çš„æ¥å£ï¼ŒæŸ¥è¯¢å†…å­˜ç¼“å­˜çš„æ¥å£æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦ä¸€å¥è¯1234//è·å–è¯¥keyå¯¹åº”çš„å›¾ç‰‡ç¼“å­˜æ•°æ®- (UIImage *)imageFromMemoryCacheForKey:(NSString *)key &#123; return [self.memCache objectForKey:key];&#125; çœ‹ä¸€ä¸‹æŸ¥è¯¢ç£ç›˜ç¼“å­˜çš„æ¥å£12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455//æ£€æŸ¥è¦ä¸‹è½½å›¾ç‰‡çš„ç¼“å­˜æƒ…å†µ/* 1.å…ˆæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜ç¼“å­˜ 2.å¦‚æœæ²¡æœ‰å†…å­˜ç¼“å­˜åˆ™æ£€æŸ¥æ˜¯å¦æœ‰æ²™ç›’ç¼“å­˜ 3.å¦‚æœæœ‰æ²™ç›’ç¼“å­˜ï¼Œåˆ™æŠŠè¯¥å›¾ç‰‡åšå†…å­˜ç¼“å­˜å¹¶å¤„ç†doneBlockå›è°ƒ */- (NSOperation *)queryDiskCacheForKey:(NSString *)key done:(SDWebImageQueryCompletedBlock)doneBlock &#123; //å¦‚æœå›è°ƒä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å› if (!doneBlock) &#123; return nil; &#125; //å¦‚æœç¼“å­˜å¯¹åº”çš„keyä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¹¶æŠŠå­˜å‚¨æ–¹å¼ï¼ˆæ— ç¼“å­˜ï¼‰é€šè¿‡blockå—ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ if (!key) &#123; doneBlock(nil, SDImageCacheTypeNone); return nil; &#125; // First check the in-memory cache... //æ£€æŸ¥è¯¥KEYå¯¹åº”çš„å†…å­˜ç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨å†…å­˜ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¹¶æŠŠå›¾ç‰‡å’Œå­˜å‚¨æ–¹å¼ï¼ˆå†…å­˜ç¼“å­˜ï¼‰é€šè¿‡blockå—ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ UIImage *image = [self imageFromMemoryCacheForKey:key]; if (image) &#123; doneBlock(image, SDImageCacheTypeMemory); return nil; &#125; NSOperation *operation = [NSOperation new]; //åˆ›å»ºä¸€ä¸ªæ“ä½œ //ä½¿ç”¨å¼‚æ­¥å‡½æ•°ï¼Œæ·»åŠ ä»»åŠ¡åˆ°ä¸²è¡Œé˜Ÿåˆ—ä¸­ï¼ˆä¼šå¼€å¯ä¸€ä¸ªå­çº¿ç¨‹å¤„ç†blockå—ä¸­çš„ä»»åŠ¡ï¼‰ dispatch_async(self.ioQueue, ^&#123; //å¦‚æœå½“å‰çš„æ“ä½œè¢«å–æ¶ˆï¼Œåˆ™ç›´æ¥è¿”å› if (operation.isCancelled) &#123; return; &#125; @autoreleasepool &#123; //æ£€æŸ¥è¯¥KEYå¯¹åº”çš„ç£ç›˜ç¼“å­˜ UIImage *diskImage = [self diskImageForKey:key]; //å¦‚æœå­˜åœ¨ç£ç›˜ç¼“å­˜ï¼Œä¸”åº”è¯¥æŠŠè¯¥å›¾ç‰‡ä¿å­˜ä¸€ä»½åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼Œåˆ™å…ˆè®¡ç®—è¯¥å›¾ç‰‡çš„cost(æˆæœ¬ï¼‰å¹¶æŠŠè¯¥å›¾ç‰‡ä¿å­˜åˆ°å†…å­˜ç¼“å­˜ä¸­ if (diskImage &amp;&amp; self.shouldCacheImagesInMemory) &#123; NSUInteger cost = SDCacheCostForImage(diskImage); [self.memCache setObject:diskImage forKey:key cost:cost]; &#125; //çº¿ç¨‹é—´é€šä¿¡ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­å›è°ƒdoneBlockï¼Œå¹¶æŠŠå›¾ç‰‡å’Œå­˜å‚¨æ–¹å¼ï¼ˆç£ç›˜ç¼“å­˜ï¼‰é€šè¿‡blockå—ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ dispatch_async(dispatch_get_main_queue(), ^&#123; doneBlock(diskImage, SDImageCacheTypeDisk); &#125;); &#125; &#125;); return operation;&#125; ç£ç›˜æŸ¥è¯¢ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œè‡³äºè¿™ä¸ªæ¥å£ä¸ºä»€ä¹ˆè¿”å›ä¸€ä¸ªNSOperationå¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨å•ç‹¬è®²SDWebImageManageræ—¶å†è¯´ã€‚å†æ¥çœ‹ä¸€ä¸‹æ¸…ç†ç¼“å­˜çš„æ¥å£ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼Œ ä¸€ç§æ˜¯clearDiskä¸€ç§æ˜¯cleanDiskã€‚clearDiskæ¯”è¾ƒæš´åŠ›ï¼Œç›´æ¥ç§»é™¤å†…å­˜ç¼“å­˜çš„å¯¹è±¡æˆ–è€…ç›´æ¥ç§»é™¤ç£ç›˜ç¼“å­˜æ–‡ä»¶å¤¹ã€‚ 1234567891011121314151617181920212223242526272829303132//æ¸…é™¤å†…å­˜ç¼“å­˜- (void)clearMemory &#123; //æŠŠæ‰€æœ‰çš„å†…å­˜ç¼“å­˜éƒ½åˆ é™¤ [self.memCache removeAllObjects];&#125;//æ¸…é™¤ç£ç›˜ç¼“å­˜- (void)clearDisk &#123; [self clearDiskOnCompletion:nil];&#125;//æ¸…é™¤ç£ç›˜ç¼“å­˜ï¼ˆç®€å•ç²—æš´ï¼‰- (void)clearDiskOnCompletion:(SDWebImageNoParamsBlock)completion&#123; //å¼€å­çº¿ç¨‹å¼‚æ­¥å¤„ç† æ¸…ç†ç£ç›˜ç¼“å­˜çš„æ“ä½œ dispatch_async(self.ioQueue, ^&#123; //åˆ é™¤ç¼“å­˜è·¯å¾„ [_fileManager removeItemAtPath:self.diskCachePath error:nil]; //é‡æ–°åˆ›å»ºç¼“å­˜è·¯å¾„ [_fileManager createDirectoryAtPath:self.diskCachePath withIntermediateDirectories:YES attributes:nil error:NULL]; if (completion) &#123; //åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†completionå›è°ƒ dispatch_async(dispatch_get_main_queue(), ^&#123; completion(); &#125;); &#125; &#125;);&#125; ç€é‡çœ‹ä¸€ä¸‹cleanDiskï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495//æ¸…é™¤è¿‡æœŸçš„ç£ç›˜ç¼“å­˜- (void)cleanDisk &#123; [self cleanDiskWithCompletionBlock:nil];&#125;//æ¸…é™¤è¿‡æœŸçš„ç£ç›˜ç¼“å­˜- (void)cleanDiskWithCompletionBlock:(SDWebImageNoParamsBlock)completionBlock &#123; dispatch_async(self.ioQueue, ^&#123; NSURL *diskCacheURL = [NSURL fileURLWithPath:self.diskCachePath isDirectory:YES]; NSArray *resourceKeys = @[NSURLIsDirectoryKey, NSURLContentModificationDateKey, NSURLTotalFileAllocatedSizeKey]; // This enumerator prefetches useful properties for our cache files. NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtURL:diskCacheURL includingPropertiesForKeys:resourceKeys options:NSDirectoryEnumerationSkipsHiddenFiles errorHandler:NULL]; // è®¡ç®—è¿‡æœŸæ—¥æœŸ NSDate *expirationDate = [NSDate dateWithTimeIntervalSinceNow:-self.maxCacheAge]; NSMutableDictionary *cacheFiles = [NSMutableDictionary dictionary]; NSUInteger currentCacheSize = 0; // Enumerate all of the files in the cache directory. This loop has two purposes: // // 1. Removing files that are older than the expiration date. // 2. Storing file attributes for the size-based cleanup pass. // éå†ç¼“å­˜è·¯å¾„ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ­¤å¾ªç¯è¦å®ç°ä¸¤ä¸ªç›®çš„ // 1. åˆ é™¤æ—©äºè¿‡æœŸæ—¥æœŸçš„æ–‡ä»¶ // 2. ä¿å­˜æ–‡ä»¶å±æ€§ä»¥è®¡ç®—ç£ç›˜ç¼“å­˜å ç”¨ç©ºé—´ NSMutableArray *urlsToDelete = [[NSMutableArray alloc] init]; for (NSURL *fileURL in fileEnumerator) &#123; NSDictionary *resourceValues = [fileURL resourceValuesForKeys:resourceKeys error:NULL]; // Skip directories. // è·³è¿‡ç›®å½• if ([resourceValues[NSURLIsDirectoryKey] boolValue]) &#123; continue; &#125; // Remove files that are older than the expiration date; // è®°å½•è¦åˆ é™¤çš„è¿‡æœŸæ–‡ä»¶ NSDate *modificationDate = resourceValues[NSURLContentModificationDateKey]; if ([[modificationDate laterDate:expirationDate] isEqualToDate:expirationDate]) &#123; [urlsToDelete addObject:fileURL]; continue; &#125; // Store a reference to this file and account for its total size. //ä¿å­˜æ–‡ä»¶å¼•ç”¨ï¼Œä»¥è®¡ç®—æ€»å¤§å° NSNumber *totalAllocatedSize = resourceValues[NSURLTotalFileAllocatedSizeKey]; currentCacheSize += [totalAllocatedSize unsignedIntegerValue]; [cacheFiles setObject:resourceValues forKey:fileURL]; &#125; // åˆ é™¤è¿‡æœŸçš„æ–‡ä»¶ for (NSURL *fileURL in urlsToDelete) &#123; [_fileManager removeItemAtURL:fileURL error:nil]; &#125; // If our remaining disk cache exceeds a configured maximum size, perform a second // size-based cleanup pass. We delete the oldest files first. //å¦‚æœå‰©ä½™ç£ç›˜ç¼“å­˜ç©ºé—´è¶…å‡ºæœ€å¤§é™é¢ï¼Œå†æ¬¡æ‰§è¡Œæ¸…ç†æ“ä½œï¼Œåˆ é™¤æœ€æ—©çš„æ–‡ä»¶ if (self.maxCacheSize &gt; 0 &amp;&amp; currentCacheSize &gt; self.maxCacheSize) &#123; // Target half of our maximum cache size for this cleanup pass. const NSUInteger desiredCacheSize = self.maxCacheSize / 2; // Sort the remaining cache files by their last modification time (oldest first). NSArray *sortedFiles = [cacheFiles keysSortedByValueWithOptions:NSSortConcurrent usingComparator:^NSComparisonResult(id obj1, id obj2) &#123; return [obj1[NSURLContentModificationDateKey] compare:obj2[NSURLContentModificationDateKey]]; &#125;]; // Delete files until we fall below our desired cache size. // å¾ªç¯ä¾æ¬¡åˆ é™¤æ–‡ä»¶ï¼Œç›´åˆ°ä½äºæœŸæœ›çš„ç¼“å­˜é™é¢ for (NSURL *fileURL in sortedFiles) &#123; if ([_fileManager removeItemAtURL:fileURL error:nil]) &#123; NSDictionary *resourceValues = cacheFiles[fileURL]; NSNumber *totalAllocatedSize = resourceValues[NSURLTotalFileAllocatedSizeKey]; currentCacheSize -= [totalAllocatedSize unsignedIntegerValue]; if (currentCacheSize &lt; desiredCacheSize) &#123; break; &#125; &#125; &#125; &#125; //åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†å®Œæˆå›è°ƒ if (completionBlock) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; completionBlock(); &#125;); &#125; &#125;);&#125; SDImageCache.m ä¸­å…¶å®ƒæ–¹æ³•:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314//é»˜è®¤çš„æœ€å¤§ç¼“å­˜æ—¶é—´ä¸º1å‘¨static const NSInteger kDefaultCacheMaxCacheAge = 60 * 60 * 24 * 7; // 1 week// PNG signature bytes and data (below)// PNG ç­¾åå­—èŠ‚å’Œæ•°æ®(PNGæ–‡ä»¶å¼€å§‹çš„8ä¸ªå­—èŠ‚æ˜¯å›ºå®šçš„)static unsigned char kPNGSignatureBytes[8] = &#123;0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A&#125;;static NSData *kPNGSignatureData = nil;BOOL ImageDataHasPNGPreffix(NSData *data);BOOL ImageDataHasPNGPreffix(NSData *data) &#123; //è®¡ç®—PNGç­¾åæ•°æ®çš„é•¿åº¦ NSUInteger pngSignatureLength = [kPNGSignatureData length]; //æ¯”è¾ƒä¼ å…¥æ•°æ®å’ŒPNGç­¾åæ•°æ®çš„é•¿åº¦ï¼Œå¦‚æœæ¯”ç­¾åæ•°æ®é•¿åº¦æ›´é•¿ï¼Œé‚£ä¹ˆå°±åªæ¯”è¾ƒå‰é¢å‡ ä¸ªå­—èŠ‚ if ([data length] &gt;= pngSignatureLength) &#123; if ([[data subdataWithRange:NSMakeRange(0, pngSignatureLength)] isEqualToData:kPNGSignatureData]) &#123; //æ¯”è¾ƒå‰é¢çš„å­—èŠ‚ï¼Œå¦‚æœå†…å®¹ä¸€æ ·åˆ™åˆ¤å®šè¯¥å›¾ç‰‡æ˜¯PNGæ ¼å¼çš„ return YES; &#125; &#125; return NO;&#125;//è®¡ç®—å›¾ç‰‡æˆæœ¬ï¼ŸFOUNDATION_STATIC_INLINE NSUInteger SDCacheCostForImage(UIImage *image) &#123; return image.size.height * image.size.width * image.scale * image.scale;&#125;#pragma mark --------------------#pragma mark SDImageCache@interface SDImageCache ()@property (strong, nonatomic) NSCache *memCache; //å†…å­˜ç¼“å­˜@property (strong, nonatomic) NSString *diskCachePath; //ç£ç›˜ç¼“å­˜è·¯å¾„@property (strong, nonatomic) NSMutableArray *customPaths; //è‡ªå®šä¹‰è·¯å¾„ï¼ˆæ•°ç»„ï¼‰@property (SDDispatchQueueSetterSementics, nonatomic) dispatch_queue_t ioQueue; //å¤„ç†IOæ“ä½œçš„é˜Ÿåˆ—@end@implementation SDImageCache &#123; NSFileManager *_fileManager; //æ–‡ä»¶ç®¡ç†è€…&#125;/* * å¦‚æœå¸Œæœ›åœ¨ bundle ä¸­å­˜å‚¨é¢„åŠ è½½çš„å›¾åƒï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªåªè¯»çš„ç¼“å­˜è·¯å¾„ * è®© SDImageCache ä» Bundle ä¸­æœç´¢é¢„å…ˆç¼“å­˜çš„å›¾åƒ * åªè¯»ç¼“å­˜è·¯å¾„(mainBundleä¸­çš„å…¨è·¯å¾„)*/- (void)addReadOnlyCachePath:(NSString *)path &#123; if (!self.customPaths) &#123; self.customPaths = [NSMutableArray new]; &#125; if (![self.customPaths containsObject:path]) &#123; [self.customPaths addObject:path]; &#125;&#125;//è·å¾—æŒ‡å®š key å¯¹åº”çš„ç¼“å­˜è·¯å¾„- (NSString *)cachePathForKey:(NSString *)key inPath:(NSString *)path &#123; //è·å¾—ç¼“å­˜æ–‡ä»¶çš„åç§° NSString *filename = [self cachedFileNameForKey:key]; //è¿”å›æ‹¼æ¥åçš„å…¨è·¯å¾„ return [path stringByAppendingPathComponent:filename];&#125;//è·å¾—æŒ‡å®š key çš„é»˜è®¤ç¼“å­˜è·¯å¾„- (NSString *)defaultCachePathForKey:(NSString *)key &#123; return [self cachePathForKey:key inPath:self.diskCachePath];&#125;#pragma mark --------------------#pragma mark SDImageCache (private)//å¯¹key(é€šå¸¸ä¸ºURL)è¿›è¡ŒMD5åŠ å¯†ï¼ŒåŠ å¯†åçš„å¯†æ–‡ä½œä¸ºå›¾ç‰‡çš„åç§°- (NSString *)cachedFileNameForKey:(NSString *)key &#123; const char *str = [key UTF8String]; if (str == NULL) &#123; str = ""; &#125; unsigned char r[CC_MD5_DIGEST_LENGTH]; CC_MD5(str, (CC_LONG)strlen(str), r); NSString *filename = [NSString stringWithFormat:@"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%@", r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], r[8], r[9], r[10], r[11], r[12], r[13], r[14], r[15], [[key pathExtension] isEqualToString:@""] ? @"" : [NSString stringWithFormat:@".%@", [key pathExtension]]]; return filename;&#125;#pragma mark --------------------#pragma mark SDImageCache// Init the disk cache//è®¾ç½®ç£ç›˜ç¼“å­˜è·¯å¾„-(NSString *)makeDiskCachePath:(NSString*)fullNamespace&#123; //è·å¾—cachesè·¯å¾„ï¼Œè¯¥æ¡†æ¶å†…éƒ¨å¯¹å›¾ç‰‡è¿›è¡Œç£ç›˜ç¼“å­˜ï¼Œè®¾ç½®çš„ç¼“å­˜ç›®å½•ä¸ºæ²™ç›’ä¸­Libraryçš„cachesç›®å½•ä¸‹ NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); //åœ¨cachesç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºã€fullNamespaceã€‘çš„æ–‡ä»¶ï¼Œæ²™ç›’ç¼“å­˜å°±ä¿å­˜åœ¨æ­¤å¤„ return [paths[0] stringByAppendingPathComponent:fullNamespace];&#125;//å¼‚æ­¥æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»åœ¨ç£ç›˜ç¼“å­˜ä¸­å­˜åœ¨ï¼ˆä¸åŠ è½½å›¾åƒï¼‰- (BOOL)diskImageExistsWithKey:(NSString *)key &#123; //åˆå§‹è®¾ç½®ä¸ºNO BOOL exists = NO; // this is an exception to access the filemanager on another queue than ioQueue, but we are using the shared instance // from apple docs on NSFileManager: The methods of the shared NSFileManager object can be called from multiple threads safely. // å…±äº«çš„ NSFileManager å¯¹è±¡å¯ä»¥ä¿è¯åœ¨å¤šçº¿ç¨‹è¿è¡Œæ—¶æ˜¯å®‰å…¨çš„ // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ exists = [[NSFileManager defaultManager] fileExistsAtPath:[self defaultCachePathForKey:key]]; return exists;&#125;//å¼‚æ­¥æ£€æŸ¥å›¾åƒæ˜¯å¦å·²ç»åœ¨ç£ç›˜ç¼“å­˜ä¸­å­˜åœ¨ï¼ˆä¸åŠ è½½å›¾åƒï¼‰- (void)diskImageExistsWithKey:(NSString *)key completion:(SDWebImageCheckCacheCompletionBlock)completionBlock &#123; //å¼€å­çº¿ç¨‹å¼‚æ­¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ dispatch_async(_ioQueue, ^&#123; BOOL exists = [_fileManager fileExistsAtPath:[self defaultCachePathForKey:key]]; if (completionBlock) &#123; //åœ¨ä¸»çº¿ç¨‹å›è°ƒcompletionBlockå— dispatch_async(dispatch_get_main_queue(), ^&#123; completionBlock(exists); &#125;); &#125; &#125;);&#125;//æŸ¥è¯¢å†…å­˜ç¼“å­˜ä¹‹ååŒæ­¥æŸ¥è¯¢ç£ç›˜ç¼“å­˜- (UIImage *)imageFromDiskCacheForKey:(NSString *)key &#123; // First check the in-memory cache.. //é¦–å…ˆæ£€æŸ¥å†…å­˜ç¼“å­˜ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥è¿”å› UIImage *image = [self imageFromMemoryCacheForKey:key]; if (image) &#123; return image; &#125; // Second check the disk cache... //æ¥ä¸‹æ¥æ£€æŸ¥ç£ç›˜ç¼“å­˜ï¼Œå¦‚æœå›¾ç‰‡å­˜åœ¨ï¼Œä¸”å¯ä»¥ä¿å­˜åˆ°å†…å­˜ç¼“å­˜ï¼Œåˆ™ä¿å­˜ä¸€ä»½åˆ°å†…å­˜ç¼“å­˜ä¸­ UIImage *diskImage = [self diskImageForKey:key]; if (diskImage &amp;&amp; self.shouldCacheImagesInMemory) &#123; NSUInteger cost = SDCacheCostForImage(diskImage); [self.memCache setObject:diskImage forKey:key cost:cost]; &#125; //è¿”å›å›¾ç‰‡ return diskImage;&#125;- (NSData *)diskImageDataBySearchingAllPathsForKey:(NSString *)key &#123; //è·å¾—ç»™keyå¯¹åº”çš„é»˜è®¤çš„ç¼“å­˜è·¯å¾„ NSString *defaultPath = [self defaultCachePathForKey:key]; //åŠ è½½è¯¥è·¯å¾„ä¸‹é¢çš„äºŒè¿›åˆ¶æ•°æ® NSData *data = [NSData dataWithContentsOfFile:defaultPath]; //å¦‚æœæœ‰å€¼ï¼Œåˆ™ç›´æ¥è¿”å› if (data) &#123; return data; &#125; NSArray *customPaths = [self.customPaths copy]; //éå†customPathsï¼Œè‹¥æœ‰å€¼ï¼Œåˆ™ç›´æ¥è¿”å› for (NSString *path in customPaths) &#123; NSString *filePath = [self cachePathForKey:key inPath:path]; NSData *imageData = [NSData dataWithContentsOfFile:filePath]; if (imageData) &#123; return imageData; &#125; &#125; return nil;&#125;//è·å–KEYå¯¹åº”çš„ç£ç›˜ç¼“å­˜ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç›´æ¥è¿”å›nil- (UIImage *)diskImageForKey:(NSString *)key &#123; //å¾—åˆ°äºŒè¿›åˆ¶æ•°æ® NSData *data = [self diskImageDataBySearchingAllPathsForKey:key]; if (data) &#123; //æŠŠå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ä¸ºå›¾ç‰‡ UIImage *image = [UIImage sd_imageWithData:data]; //å¤„ç†å›¾ç‰‡çš„ç¼©æ”¾ image = [self scaledImageForKey:key image:image]; //åˆ¤æ–­æ˜¯å¦éœ€è¦è§£å‹ç¼©ï¼ˆè§£ç ï¼‰å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç† if (self.shouldDecompressImages) &#123; image = [UIImage decodedImageWithImage:image]; &#125; //è¿”å›å›¾ç‰‡ return image; &#125; else &#123; return nil; &#125;&#125;//å¤„ç†å›¾ç‰‡çš„ç¼©æ”¾ç­‰ï¼Œ2å€å°ºå¯¸|3å€å°ºå¯¸ï¼Ÿ- (UIImage *)scaledImageForKey:(NSString *)key image:(UIImage *)image &#123; return SDScaledImageForKey(key, image);&#125;//è®¾ç½®å†…å­˜ç¼“å­˜ï¼ˆNSCacheï¼‰èƒ½ä¿å­˜çš„æœ€å¤§æˆæœ¬- (void)setMaxMemoryCost:(NSUInteger)maxMemoryCost &#123; self.memCache.totalCostLimit = maxMemoryCost;&#125;//æœ€å¤§å†…å­˜ç¼“å­˜æˆæœ¬- (NSUInteger)maxMemoryCost &#123; return self.memCache.totalCostLimit;&#125;//æœ€å¤§ç¼“å­˜çš„æ–‡ä»¶æ•°é‡- (NSUInteger)maxMemoryCountLimit &#123; return self.memCache.countLimit;&#125;//è®¾ç½®å†…å­˜ç¼“å­˜ï¼ˆNSCacheï¼‰çš„æœ€å¤§æ–‡ä»¶æ•°é‡- (void)setMaxMemoryCountLimit:(NSUInteger)maxCountLimit &#123; self.memCache.countLimit = maxCountLimit;&#125;//å½“è¿›å…¥åå°åï¼Œå¤„ç†çš„ç£ç›˜ç¼“å­˜æ¸…ç†å·¥ä½œ- (void)backgroundCleanDisk &#123; Class UIApplicationClass = NSClassFromString(@"UIApplication"); if(!UIApplicationClass || ![UIApplicationClass respondsToSelector:@selector(sharedApplication)]) &#123; return; &#125; //å¾—åˆ°UIApplicationå•ä¾‹å¯¹è±¡ UIApplication *application = [UIApplication performSelector:@selector(sharedApplication)]; __block UIBackgroundTaskIdentifier bgTask = [application beginBackgroundTaskWithExpirationHandler:^&#123; // Clean up any unfinished task business by marking where you // stopped or ending the task outright. // æ¸…ç†ä»»ä½•æœªå®Œæˆçš„ä»»åŠ¡ [application endBackgroundTask:bgTask]; bgTask = UIBackgroundTaskInvalid; &#125;]; // Start the long-running task and return immediately. // å¯åŠ¨é•¿æœŸè¿è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ç«‹å³è¿”å› [self cleanDiskWithCompletionBlock:^&#123; [application endBackgroundTask:bgTask]; bgTask = UIBackgroundTaskInvalid; &#125;];&#125;//è·å¾—å¤§å°- (NSUInteger)getSize &#123; __block NSUInteger size = 0; //åŒæ­¥+ä¸²è¡Œé˜Ÿåˆ— dispatch_sync(self.ioQueue, ^&#123; //å¾—åˆ°diskCachePathè·¯å¾„ä¸‹é¢çš„æ‰€æœ‰å­è·¯å¾„ NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtPath:self.diskCachePath]; //éå†å¾—åˆ°æ‰€æœ‰å­è·¯å¾„å¯¹åº”æ–‡ä»¶çš„å¤§å°ï¼Œå¹¶ç´¯åŠ ä»¥è®¡ç®—æ‰€æœ‰æ–‡ä»¶çš„æ€»å¤§å° for (NSString *fileName in fileEnumerator) &#123; NSString *filePath = [self.diskCachePath stringByAppendingPathComponent:fileName]; NSDictionary *attrs = [[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:nil]; size += [attrs fileSize]; &#125; &#125;); return size;&#125;//è·å¾—ç£ç›˜æ–‡ä»¶çš„æ•°é‡- (NSUInteger)getDiskCount &#123; //åˆå§‹åŒ–ä¸º0 __block NSUInteger count = 0; dispatch_sync(self.ioQueue, ^&#123; //æ ¹æ®è®¡ç®—è¯¥è·¯å¾„ä¸‹é¢çš„å­è·¯å¾„çš„æ•°é‡å¾—åˆ° NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtPath:self.diskCachePath]; count = [[fileEnumerator allObjects] count]; &#125;); return count;&#125;//å¼‚æ­¥è®¡ç®—ç£ç›˜ç¼“å­˜çš„å¤§å°- (void)calculateSizeWithCompletionBlock:(SDWebImageCalculateSizeBlock)completionBlock &#123; //æŠŠæ–‡ä»¶è·¯å¾„è½¬æ¢ä¸ºURL NSURL *diskCacheURL = [NSURL fileURLWithPath:self.diskCachePath isDirectory:YES]; //å¼€å­çº¿ç¨‹å¼‚æ­¥å¤„ç†blockå—ä¸­çš„ä»»åŠ¡ dispatch_async(self.ioQueue, ^&#123; NSUInteger fileCount = 0; //åˆå§‹åŒ–æ–‡ä»¶çš„æ•°é‡ä¸º0 NSUInteger totalSize = 0; //åˆå§‹åŒ–ç¼“å­˜çš„æ€»å¤§å°ä¸º0 NSDirectoryEnumerator *fileEnumerator = [_fileManager enumeratorAtURL:diskCacheURL includingPropertiesForKeys:@[NSFileSize] options:NSDirectoryEnumerationSkipsHiddenFiles errorHandler:NULL]; for (NSURL *fileURL in fileEnumerator) &#123; NSNumber *fileSize; [fileURL getResourceValue:&amp;fileSize forKey:NSURLFileSizeKey error:NULL]; //ç´¯åŠ ç¼“å­˜çš„å¤§å° totalSize += [fileSize unsignedIntegerValue]; //ç´¯åŠ ç¼“å­˜çš„æ•°é‡ fileCount += 1; &#125; if (completionBlock) &#123; //åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†completionBlockå›è°ƒ dispatch_async(dispatch_get_main_queue(), ^&#123; completionBlock(fileCount, totalSize); &#125;); &#125; &#125;);&#125;@end SDWebImage â€“&gt;ã€ŒçŸ¥å…¶ç„¶ã€äº¦çŸ¥å…¶æ‰€ä»¥ç„¶ä¸‹è½½å›¾ç‰‡çš„æ ¸å¿ƒæ–¹æ³•ä½¿ç”¨#import &quot;UIImageView+WebCache.h&quot;1234567891011121314151617181920212223242526272829303132333435363738/* * æ ¹æ®å›¾ç‰‡çš„urlä¸‹è½½å›¾ç‰‡å¹¶è®¾ç½®åˆ°ImageViewä¸Šé¢å»ï¼Œå¼‚æ­¥ä¸‹è½½å¹¶ç¼“å­˜ * * @param url å›¾ç‰‡çš„URLåœ°å€ * @param options å›¾ç‰‡ä¸‹è½½é€‰é¡¹ï¼ˆç­–ç•¥ï¼‰,å‚è€ƒSDWebImageOptionsçš„æšä¸¾å€¼ * @param progressBlock ä¸‹è½½è¿›åº¦å›è°ƒ * receivedSize å·²ç»ä¸‹è½½çš„æ•°æ®å¤§å° * expectedSize è¦ä¸‹è½½å›¾ç‰‡çš„æ€»å¤§å° * @param completedBlock æ“ä½œæˆåŠŸå›è°ƒå›è°ƒ,è¯¥å›è°ƒæ²¡æœ‰è¿”å›å€¼ * Imageï¼šè¯·æ±‚çš„ UIImageï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œimageå‚æ•°æ˜¯nil * errorï¼šå¦‚æœå›¾ç‰‡ä¸‹è½½æˆåŠŸåˆ™errorä¸ºnil,å¦åˆ™erroræœ‰å€¼ * @param cacheTypeï¼šå›¾ç‰‡ç¼“å­˜ç±»å‹ï¼ˆå†…å­˜ç¼“å­˜|æ²™ç›’ç¼“å­˜|ç›´æ¥ä¸‹è½½ï¼‰,SDImageCacheTypeæšä¸¾ * SDImageCacheTypeNoneï¼šä»ç½‘ç»œä¸‹è½½ * SDImageCacheTypeDiskï¼šä»æœ¬åœ°ç¼“å­˜åŠ è½½ * SDImageCacheTypeMemoryï¼šä»å†…å­˜ç¼“å­˜åŠ è½½ * @param imageURLï¼šå›¾ç‰‡çš„URLåœ°å€ */- (void)download1 &#123; [self.imageView sd_setImageWithURL:[NSURL URLWithString:@"http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg"] placeholderImage:[UIImage imageNamed:@"placeholder"] options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize) &#123; NSLog(@"%f",1.0 * receivedSize / expectedSize); &#125; completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) &#123; self.imageView.image = image; NSLog(@"download3--%@",[NSThread currentThread]); switch (cacheType) &#123; case SDImageCacheTypeNone: NSLog(@"ç½‘ç»œä¸‹è½½"); break; case SDImageCacheTypeDisk: NSLog(@"ä½¿ç”¨ç£ç›˜ç¼“å­˜"); break; case SDImageCacheTypeMemory: NSLog(@"ä½¿ç”¨å†…å­˜ç¼“å­˜"); break; default: break; &#125; &#125;];&#125; æ‰“å°è¾“å‡ºæ•ˆæœ: åº”ç”¨åœºæ™¯:ä¸‹è½½å›¾ç‰‡ä¸”éœ€è¦è·å–ä¸‹è½½è¿›åº¦ï¼Œè¯¥æ–¹æ³•ä¼šè‡ªåŠ¨åš å†…å­˜ç¼“å­˜&amp;ç£ç›˜ç¼“å­˜ã€‚ è¿™ä¸ªæ¡†æ¶æœ‰å¤ªå¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ æ¨æ•²ï¼Œæ–¹æ–¹é¢é¢éƒ½é€éœ²ç€ä½œè€…ä»¥åŠä¼—å¤šè´¡çŒ®è€…çš„æ™ºæ…§ï¼Œæˆ‘ä»¬è¯»èµ·æ¥ä¹Ÿä¸€å®šä¼šå—ç›Šè‰¯å¤šã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>æºç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æºä»£ç ç®¡ç†ã€ŒSVN & Gitã€ç»­æ›´]]></title>
    <url>%2FToolsAndPlugins%2FSVNGit.html</url>
    <content type="text"><![CDATA[Write in the first å¼€å‘è¿‡ç¨‹ä¸­ç¦»ä¸å¼€æºä»£ç çš„ç®¡ç†ï¼Œç›®åœ°ï¼šä¸ºäº†è§£å†³åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±æºä»£ç å¼•å‘çš„å„ç§è›‹ç–¼ã€ç¹ççš„é—®é¢˜ã€‚ç›®å‰å¼€å‘ä½¿ç”¨è¾ƒå¹¿çš„ ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€ŒGit &amp; SVNã€ï¼Œåç»­ä¼šå•å¼€ä¸€ç¯‡æ€»ç»“æ­£åœ¨ä½¿ç”¨çš„ã€å¼ºå¤§çš„ Git å®¢æˆ·ç«¯ï¼šSourceTreeã€‘ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ä½¿ç”¨è€…è§’åº¦ã€Git &amp; SVN è¯¦è§£ä½¿ç”¨ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š æºä»£ç ç®¡ç†è®¤çŸ¥ æºä»£ç ç®¡ç† SVN è¯¦è§£ä½¿ç”¨ SVN åŸºç¡€çŸ¥è¯†æ¦‚å¿µ2.SVN å®¢æˆ·ç«¯å®ç”¨å‘½ä»¤3.SVN å®¢æˆ·ç«¯å®ç”¨ç¤ºä¾‹4.ã€ŒSVNâ€“&gt;branch &amp; tagã€åˆ†æ”¯å’Œæ ‡ç­¾5.SVN ST æ˜¾ç¤ºçš„æ–‡ä»¶çŠ¶æ€ æºä»£ç ç®¡ç† Git è¯¦è§£ä½¿ç”¨1.GitåŸºç¡€çŸ¥è¯†æ¦‚å¿µ2.Git å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ3.Git å·¥ä½œåŸç† / æµç¨‹4.Git å®¢æˆ·ç«¯å®ç”¨å‘½ä»¤5.ã€ŒGitâ€“&gt;branch &amp; tag &amp; remoteã€åˆ†æ”¯ã€æ ‡ç­¾å’Œè¿œç¨‹6.Git å®¢æˆ·ç«¯å®ç”¨ç¤ºä¾‹ SVN &amp; Git ä¸¤è€…æ¯”è¾ƒ ç å†œä»¬è¸©è¿‡çš„å‘æ•´ç†ï¼ˆæŒç»­~ï¼‰ æºä»£ç ç®¡ç†è®¤çŸ¥ ä¸‹é¢ç®€å•å‡ ç‚¹æ€»ç»“ï¼Œæ¥ç»™åˆå­¦è€…å¿«é€Ÿå¯¹æºä»£ç ç®¡ç†æœ‰ä¸ªè®¤çŸ¥ï¼› ä¸ºä»€ä¹ˆä¼šå‡ºç°æºä»£ç ç®¡ç†å·¥å…· ï¼Ÿ ä¸ºäº†è§£å†³åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç”±æºä»£ç å¼•å‘çš„å„ç§è›‹ç–¼ã€ç¹ççš„é—®é¢˜ã€‚ æºä»£ç ä¼šå¼•å‘å“ªäº›é—®é¢˜ ï¼Ÿ æ— æ³•åæ‚”ï¼šåšé”™äº†ä¸€ä¸ªæ“ä½œåï¼ŒæŸäº›æƒ…å†µä¸‹æ— æ³•è¿”å›ï¼Œæ²¡æœ‰åæ‚”è¯å¯ä»¥åƒã€‚ ç‰ˆæœ¬å¤‡ä»½ï¼šè´¹ç©ºé—´ã€è´¹æ—¶é—´ã€‚ ç‰ˆæœ¬æ··ä¹±ï¼šå› ç‰ˆæœ¬å¤‡ä»½è¿‡å¤šé€ æˆæ··ä¹±ï¼Œéš¾äºæ‰¾å›æ­£ç¡®çš„æƒ³è¦çš„ç‰ˆæœ¬ã€‚ ä»£ç å†²çªï¼šå¤šäººæ“ä½œåŒä¸€ä¸ªæ–‡ä»¶ï¼ˆå›¢é˜Ÿå¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼‰ã€‚ æƒé™æ§åˆ¶ï¼šæ— æ³•å¯¹æºä»£ç è¿›è¡Œç²¾ç¡®çš„æƒé™æ§åˆ¶ã€‚ è¿½ç©¶è´£ä»»ï¼šå‡ºç°äº†ä¸¥é‡çš„ BUGï¼Œæ— æ³•å®šä½åˆ°è´Ÿè´£äººï¼Œå®¹æ˜“è€èµ–ã€‚ æºä»£ç ç®¡ç†å·¥å…·çš„ä½œç”¨æ˜¯ ï¼Ÿ èƒ½è¿½è¸ªä¸€ä¸ªé¡¹ç›®ä»è¯ç”Ÿä¸€ç›´åˆ°å®šæ¡ˆçš„è¿‡ç¨‹ã€‚ è®°å½•ä¸€ä¸ªé¡¹ç›®çš„æ‰€æœ‰å†…å®¹å˜åŒ–ã€‚ æ–¹ä¾¿åœ°æŸ¥é˜…ç‰¹å®šç‰ˆæœ¬çš„ä¿®è®¢æƒ…å†µã€‚ æ¸©é¦¨æç¤ºï¼š å¦‚æœæ˜¯å›¢é˜Ÿå¼€å‘ï¼Œä½¿ç”¨æºä»£ç ç®¡ç†å·¥å…·æ˜¯å¼ºåˆ¶æ€§çš„ï¼ å¦‚æœæ˜¯å•äººå¼€å‘ï¼Œä¹Ÿå¼ºçƒˆå»ºè®®ç°åœ¨å°±å¼€å§‹ä½¿ç”¨æºä»£ç ç®¡ç†å·¥å…·ã€‚ æºä»£ç ç®¡ç† SVN è¯¦è§£ä½¿ç”¨ åŸºç¡€çŸ¥è¯†æ¦‚å¿µ SVNæ˜¯é›†ä¸­å¼æ§åˆ¶ç³»ç»Ÿï¼Œéœ€è¦ä¸€ä¸ªä¸­å¤®æœåŠ¡å™¨ã€‚ Repository ä»£ç ä»“åº“ï¼Œä¿å­˜ä»£ç çš„ä»“åº“ã€‚ Server æœåŠ¡å™¨ï¼Œä¿å­˜æ‰€æœ‰ç‰ˆæœ¬çš„ä»£ç ä»“åº“ã€‚ Client å®¢æˆ·ç«¯ï¼Œåªä¿å­˜å½“å‰ç”¨æˆ·çš„ä»£ç ä»“åº“ã€‚ ç”¨æˆ·å&amp;å¯†ç  è®¿é—®ä»£ç ä»“åº“éœ€è¦ä½¿ç”¨è‡ªå·±çš„ â€œç”¨æˆ·åå’Œå¯†ç â€ï¼Œä»è€Œå¯ä»¥åŒºåˆ†å‡ºä¸åŒçš„äººå¯¹ä»£ç åšçš„ä¿®æ”¹ã€‚ SVN å®¢æˆ·ç«¯å®ç”¨å‘½ä»¤ svn checkoutã€Œç®€å†™svn coã€ï¼šå°†æœåŠ¡å™¨ä¸Šæœ€æ–°çš„ä»£ç ä»“åº“ä¸‹è½½åˆ°æœ¬åœ°ï¼ˆåªéœ€è¦åšä¸€æ¬¡ï¼‰ã€‚ svn updateã€Œç®€å†™svn upã€ï¼šä»æœåŠ¡å™¨ä¸Šå°†å…¶ä»–äººæ‰€åšçš„ä¿®æ”¹ä¸‹è½½åˆ°æœ¬åœ° ï¼ˆæ¯å¤©ä¸Šç­å¿…é¡»è¦åšçš„äº‹æƒ…ï¼‰ã€‚ svn commitã€Œç®€å†™svn ciã€ï¼šå°†æ”¹åŠ¨çš„æ–‡ä»¶æäº¤åˆ°æœåŠ¡å™¨ï¼ˆæ¯å¤©ä¸‹ç­ä¹‹å‰è‡³å°‘åšä¸€æ¬¡ï¼‰ã€‚ svn addï¼šå‘æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ä¸­æ·»åŠ æ–°æ–‡ä»¶ã€‚ svn deleteã€svn removeã€Œç®€å†™svn delã€svn rmã€ï¼šä»æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ä¸­åˆ é™¤æ–‡ä»¶ã€‚ svn moveï¼šç§»åŠ¨æ–‡ä»¶æˆ–è€…ç›®å½•æˆ–æ–‡ä»¶æ›´å svn mkdirï¼šåˆ›å»ºçº³å…¥ç‰ˆæœ¬æ§åˆ¶ä¸‹çš„æ–°ç›®å½• svn revertï¼šæ’¤é”€ä¹‹å‰çš„ä¸€åˆ‡ä¿®æ”¹ svn mergeï¼šå°†ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚åˆå¹¶åˆ°å½“å‰æ–‡ä»¶ svn infoï¼šæŸ¥çœ‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚ svn diffï¼šæŸ¥çœ‹ä¸åŒç‰ˆæœ¬çš„åŒºåˆ«ã€‚ svn logï¼šæŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ã€‚ svn listï¼šåˆ—å‡ºç‰ˆæœ¬åº“ä¸‹çš„æ–‡ä»¶å’Œç›®å½•åˆ—è¡¨ã€‚ svn statusã€Œç®€å†™svn stã€ï¼šæŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ã€‚ svn helpï¼šè·å–å¸®åŠ©ä¿¡æ¯ï¼ˆæ¯”å¦‚ svn help ciï¼‰ã€‚ svn lockï¼šåŠ é”ã€‚ svn unlockï¼šè§£é”ã€‚ SVN å®¢æˆ·ç«¯å®ç”¨ç¤ºä¾‹æ£€å‡ºï¼š å»åˆ°å…¬å¸çš„ç¬¬ä¸€å¤©ï¼Œå°†é¡¹ç›®æ£€å‡ºï¼ˆä¸‹è½½ï¼‰è‡³æœ¬åœ°ã€‚svn checkout URL[PATH]svn co URL[PATH] æ³¨æ„ï¼š è¿™é‡Œçš„ä¸­æ‹¬å·[ ]ä»£è¡¨å¯é€‰ï¼ˆå¯ä»¥çœç•¥ï¼‰ã€‚ URLï¼šä»£ç ä»“åº“çš„è¿œç¨‹åœ°å€ã€‚ [PATH]ï¼šå°†ä»£ç ä¸‹è½½åˆ°æœ¬åœ°çš„å“ªä¸ªè·¯å¾„ï¼ˆå¦‚æœçœç•¥æœ¬åœ°çš„è·¯å¾„ï¼Œå°±ä¸‹è½½åˆ°å‘½ä»¤è¡Œå½“å‰æ‰€åœ¨çš„è·¯å¾„ï¼‰ã€‚ æäº¤ï¼š å°†æ”¹åŠ¨è¿‡çš„æ—§æ–‡ä»¶æäº¤è‡³æœåŠ¡å™¨ã€‚svn commit-m &quot;æ³¨é‡Š&quot;[PATH]svn ci-m &quot;æ³¨é‡Š&quot;[PATH] æ³¨æ„ï¼š ä¸€å®šè¦å…»æˆå†™æ³¨é‡Šçš„è‰¯å¥½ä¹ æƒ¯ã€‚ â€œæ³¨é‡Šâ€ï¼šâ€ä¿®æ”¹äº†User.mæ–‡ä»¶â€ã€‚ [PATH]ï¼šä»£è¡¨æ˜¯ æäº¤å“ªä¸ªæ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼ˆå¦‚æœçœç•¥è·¯å¾„ï¼Œå°±å°†å‘½ä»¤è¡Œæ‰€åœ¨è·¯å¾„ä¸­æ‰€æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶æäº¤åˆ°æœåŠ¡å™¨ï¼‰ã€‚ æ·»åŠ ï¼š æäº¤ä¸€ä¸ªæ–°å»ºçš„æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼Œéœ€è¦2ä¸ªæ­¥éª¤ã€‚ æ·»åŠ æ–°å»ºçš„æ–‡ä»¶åˆ°æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ï¼šsvn addã€‚ æäº¤åˆšæ‰çš„æ·»åŠ æ“ä½œåˆ°æœåŠ¡å™¨ï¼šsvn commitã€‚ å°†æ–‡ä»¶æ·»åŠ åˆ°æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ã€‚svn add PATH PATHï¼šä»£è¡¨æ˜¯ æ·»åŠ å“ªä¸ªæ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ã€‚ åˆ é™¤ï¼š åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æŸä¸ªæ—§æ–‡ä»¶ï¼Œéœ€è¦åš2ä¸ªæ­¥éª¤ã€‚ å°†æ–‡ä»¶ä»æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ç§»é™¤ï¼šsvn deleteã€svn removeã€‚ æäº¤åˆšæ‰çš„åˆ é™¤æ“ä½œåˆ°æœåŠ¡å™¨ï¼šsvn commitã€‚ å°†æ–‡ä»¶ä»æœ¬åœ°çš„ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ç§»é™¤ã€‚svn delete PATH PATHï¼šä»£è¡¨æ˜¯ å°†å“ªä¸ªæ–‡ä»¶ä»ç‰ˆæœ¬æ§åˆ¶åº“ä¸­ç§»é™¤ã€‚ æ›´æ–°ï¼š å°†æœåŠ¡å™¨ä¸Šå…¶ä»–åŒäº‹æäº¤çš„ï¼Œæœ€æ–°ä»£ç æ›´æ–°åˆ°æœ¬åœ°ã€‚svn update [PATH] PATHï¼šä»£è¡¨æ˜¯ æ›´æ–°å“ªä¸ªæ–‡ä»¶çš„å†…å®¹ï¼ˆå¦‚æœçœç•¥è·¯å¾„ï¼Œå°±æ›´æ–°å‘½ä»¤è¡Œæ‰€åœ¨è·¯å¾„çš„æ‰€æœ‰å†…å®¹ï¼‰ã€‚ å›æ»šï¼š æ”¹åŠ¨æ²¡æœ‰è¢«æäº¤ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨svn revertå°±èƒ½å–æ¶ˆä¹‹å‰çš„ä¿®æ”¹ã€‚å½“ä¸ºå•ä¸ªæ–‡ä»¶æ—¶ï¼Œç›´æ¥svn revert æ–‡ä»¶å°±è¡Œäº†ï¼›å½“ä¸ºç›®å½•æ—¶ï¼Œéœ€è¦åŠ ä¸Šå‚æ•°-r (Recursive,é€’å½’)ï¼Œå¦åˆ™åªä¼šå°†æ”¹æ–‡ä»¶è¿™ä¸ªç›®å½•çš„æ”¹åŠ¨ã€‚ æ”¹åŠ¨å·²ç»è¢«æäº¤ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨svn mergeå‘½ä»¤æ¥è¿›è¡Œå›æ»šã€‚å…ˆè¿è¡Œsvn upä¿è¯æ‹¿åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œç„¶åsvn logæŸ¥çœ‹å¹¶æ‰¾åˆ°è¦å›æ»šçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœæƒ³è¦æ›´è¯¦ç»†çš„äº†è§£æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨svn diff -r HEAD:2500 [æ–‡ä»¶]ï¼ˆå›æ»šåˆ°ç‰ˆæœ¬å·2500ï¼‰ï¼Œæ­¤å¤„çš„ [ ] å¯ä»¥æ˜¯æ–‡ä»¶ã€ç›®å½•æˆ–æ•´ä¸ªé¡¹ç›®ã€‚ ã€ŒSVNâ€“&gt;branch &amp; tagã€åˆ†æ”¯å’Œæ ‡ç­¾ SVN å®˜æ–¹æ¨èåœ¨ä¸€ä¸ªç‰ˆæœ¬åº“çš„æ ¹ç›®å½•ä¸‹å…ˆå»ºç«‹trunkã€branchesã€tagsè¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶ä¸­ trunk æ˜¯å¼€å‘ä¸»å¹²ï¼Œå­˜æ”¾æ—¥å¸¸å¼€å‘çš„å†…å®¹ï¼›branches å­˜æ”¾å„åˆ†æ”¯çš„å†…å®¹ï¼Œæ¯”å¦‚ä¸ºä¸åŒå®¢æˆ·å®šåˆ¶çš„ä¸åŒç‰ˆæœ¬ï¼›tags å­˜æ”¾æŸä¸ªç‰ˆæœ¬çŠ¶æ€çš„æ ‡ç­¾ã€‚branhceså’Œtagsæœ¬è´¨æ²¡æœ‰åŒºåˆ«ï¼Œéƒ½æ˜¯é€šè¿‡svn copyæ–¹å¼å»ºç«‹çš„ï¼Œå·®å¼‚åœ¨äºé€šå¸¸branchesä¸­çš„å†…å®¹æ˜¯éœ€è¦ç»§ç»­ä¿®æ”¹æˆ–å¼€å‘çš„ï¼Œtagsä¸­çš„å†…å®¹æ˜¯å­˜æ”¾ä¸å†ä¿®æ”¹çš„ï¼Œè¿™ä¸€èˆ¬é€šè¿‡æƒé™è®¾ç½®æ¥è§£å†³ï¼Œtagsé€šå¸¸åªç»™ç®¡ç†å‘˜å¼€æ”¾å†™æƒé™ã€‚ 12345678910111213141516171.æ–°å»ºåˆ†æ”¯svn copy master_repository_url branch_repository_url -m "your comments"2.æ–°å»ºç©ºç™½åˆ†æ”¯svn mkdir branch_repository_url3.åˆ é™¤åˆ†æ”¯svn rm branch_repository_url -m "your comments"4.æ–°å»ºtagsvn copy master_repository_url tag_repository_url -m "your comments"5.åˆ é™¤tagsvn rm tag_repository_url -m "your comments"6.æŸ¥çœ‹branchessvn ls ^/branches --verbose åˆ†æ”¯ä¸ä¸»å¹²çš„åˆå¹¶ï¼š1234567891011121314151617181920# åˆ†æ”¯åˆåˆ°ä¸»å¹² cd trunksvn merge -r &lt;revision where branch was cut&gt;:&lt;revision of trunk&gt; svn://branch/path# åˆ†æ”¯å½“å‰ç‰ˆæœ¬ä¸º4847ï¼Œæƒ³æŠŠ4825åˆ°4847é—´çš„æ”¹åŠ¨mergeåˆ°ä¸»å¹²# cd trunksvn merge -r 4825:4847 svn://branch/pathsvn ci -m "merge branch changes r4835:4847 into trunk"# ä¸»å¹²åˆåˆ°åˆ†æ”¯ cd branch# åœ¨r23åˆ›å»ºäº†ä¸€ä¸ªåˆ†æ”¯ï¼Œtrunkç‰ˆæœ¬å·æ›´æ–°åˆ°äº†25ï¼Œæƒ³æŠŠ23-25ä¹‹é—´çš„æ”¹åŠ¨mergeåˆ°åˆ†æ”¯svn merge -r 23:25 svn://trunk/pathsvn ci -m "merge trunk changes r23:25 into my branch"# cd trunk# æŸ¥çœ‹å½“å‰Branchä¸­å·²ç»æœ‰é‚£äº›æ”¹åŠ¨å·²ç»è¢«åˆå¹¶åˆ°Trunkä¸­svn mergeinfo svn://branch/path# cd trunk# æŸ¥çœ‹Branchä¸­é‚£äº›æ”¹åŠ¨è¿˜æœªåˆå¹¶svn merginfo svn://branch/path --show-revs eligible mergeåˆ†æ”¯Båˆ°åˆ†æ”¯A12345step1: Checkout URL A # cd branch Astep2: merge URL B to your working copy of A svn merge -r 10:HEAD http://branch-b .step3: Commit A å†²çªæç¤º123456(p) postpone æš‚æ—¶æ¨åå¤„ç†ï¼Œæˆ‘å¯èƒ½è¦å’Œé‚£ä¸ªå’Œæˆ‘å†²çªçš„å®¶ä¼™å•†é‡ä¸€ç•ª(df) diff-full æŠŠæ‰€æœ‰çš„ä¿®æ”¹åˆ—å‡ºæ¥ï¼Œæ¯”æ¯”çœ‹(e) edit ç›´æ¥ç¼–è¾‘å†²çªçš„æ–‡ä»¶(mc) mine-conflict å¦‚æœä½ å¾ˆæœ‰è‡ªä¿¡å¯ä»¥åªç”¨ä½ çš„ä¿®æ”¹ï¼ŒæŠŠåˆ«äººçš„ä¿®æ”¹å¹²æ‰(tc) theirs-conflict åº•æ°”ä¸è¶³ï¼Œè¿˜æ˜¯ç”¨åˆ«äººä¿®æ”¹çš„å§(s) show all options æ˜¾ç¤ºå…¶ä»–å¯ç”¨çš„å‘½ä»¤ SVN ST æ˜¾ç¤ºçš„æ–‡ä»¶çŠ¶æ€ &#39; &#39; æ²¡æœ‰ä¿®æ”¹ã€‚ A è¢«æ·»åŠ åˆ°æœ¬åœ°ä»£ç ä»“åº“ã€‚ C å†²çªã€‚ D è¢«åˆ é™¤ã€‚ I è¢«å¿½ç•¥ã€‚ M è¢«ä¿®æ”¹ã€‚ R è¢«æ›¿æ¢ã€‚ X å¤–éƒ¨å®šä¹‰åˆ›å»ºçš„ç‰ˆæœ¬ç›®å½•ã€‚ ? æ–‡ä»¶æ²¡æœ‰è¢«æ·»åŠ åˆ°æœ¬åœ°ç‰ˆæœ¬åº“å†…ã€‚ ! æ–‡ä»¶ä¸¢å¤±æˆ–è€…ä¸å®Œæ•´ï¼ˆä¸æ˜¯é€šè¿‡svnå‘½ä»¤åˆ é™¤çš„æ–‡ä»¶ï¼‰ã€‚ ~ å—æ§æ–‡ä»¶è¢«å…¶ä»–æ–‡ä»¶é˜»éš”ã€‚ U æœåŠ¡å™¨æ”¶åˆ°æ–‡ä»¶æ›´æ–°äº† G æœ¬åœ°æ–‡ä»¶ä»¥åŠæœåŠ¡å™¨æ–‡ä»¶éƒ½å·²æ›´æ–°,è€Œä¸”æˆåŠŸçš„åˆå¹¶äº† æºä»£ç ç®¡ç† Git è¯¦è§£ä½¿ç”¨ åŸºç¡€çŸ¥è¯†æ¦‚å¿µ gitæ˜¯ä¸€æ¬¾å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚ åœ¨ä¸–ç•Œä¸Šæ‰€æœ‰çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å·¥å…·ä¸­ï¼Œgitæ˜¯æœ€å¿«ã€æœ€ç®€å•ã€æœ€æµè¡Œçš„ã€‚ ä½œè€…æ˜¯Linuxä¹‹çˆ¶ï¼šLinus Benedict Torvaldsã€‚ å½“åˆå¼€å‘gitä»…ä»…æ˜¯ä¸ºäº†è¾…åŠ©Linuxå†…æ ¸çš„å¼€å‘ï¼ˆç®¡ç†æºä»£ç ï¼‰ã€‚ Git å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰ï¼šä»“åº“æ–‡ä»¶å¤¹é‡Œé™¤.gitç›®å½•ä»¥å¤–çš„å†…å®¹ã€‚ ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰ï¼š.gitç›®å½•ï¼Œç”¨äºå­˜å‚¨è®°å½•ç‰ˆæœ¬ä¿¡æ¯ã€‚ æš‚å­˜åŒºï¼ˆstageï¼‰ åˆ†æ”¯ï¼ˆmasterï¼‰ï¼šgitè‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ã€‚ HEADæŒ‡é’ˆï¼šç”¨äºæŒ‡å‘å½“å‰åˆ†æ”¯ã€‚ Git å·¥ä½œåŸç† / æµç¨‹ git addï¼šå°†å·¥ä½œåŒºæ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºã€‚ git commitï¼šå°†æš‚å­˜åŒºçš„æ‰€æœ‰å†…å®¹æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼ˆæäº¤åŒºï¼‰ã€‚ git pushï¼šå°†æäº¤åŒºå†…å®¹ æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚ git pullï¼šä»æœåŠ¡å™¨ä¸Šæ›´æ–°æ–‡ä»¶ã€‚ Git å®¢æˆ·ç«¯å®ç”¨å‘½ä»¤ 1.git cloneï¼šä»æœåŠ¡å™¨ä¸Šå…‹éš†(ä¸‹è½½)æœ€æ–°çš„ä»£ç åˆ°æœ¬åœ°ã€‚ 2.git initï¼šåˆå§‹åŒ–æœ¬åœ°ä»“åº“(åœ¨å½“å‰ç›®å½•æ–°å»ºä»£ç åº“)ï¼Œä¹Ÿå¯ä»¥ git init Desktop/GitCode(åœ¨æŒ‡å®šä½ç½®åˆ›å»ºä»£ç åº“) ï¼Œå¦‚æœä½¿ç”¨äº†git cloneä¸ç”¨ä½¿ç”¨æ­¤å‘½ä»¤ã€‚ 3.git configï¼šé…ç½®ç”¨æˆ·åå’Œé‚®ç®±ã€‚ 12345678910git config --global user.name "GO_ln"git config --global user.email "xxx @xx.com"``` - 4.`add`ï¼šå°†å·¥ä½œåŒºçš„æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒºã€‚```objc// æ·»åŠ æŒ‡å®šæ–‡ä»¶git add GitTest/GitTest/ViewController.m// æ·»åŠ æœ¬åœ°åº“æ‰€æœ‰æ–‡ä»¶git add . 5.git commitï¼šæäº¤ä¿¡æ¯ã€‚ 123456781.git commit -m å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°æäº¤åŒº// æäº¤æ‰€æœ‰git commit -m "æ—¥å¿—"// æäº¤æŸä¸€ä¸ªæ–‡ä»¶git commit GitTest/GitTest/ViewController.m -m"ä¿®æ”¹VC"2.æŠŠå·¥ä½œåŒºä¸­çš„å†…å®¹æäº¤åˆ°æš‚å­˜åŒºå¹¶ä»æš‚å­˜åŒºä¸­æäº¤åˆ°æäº¤åŒºgit commit -am â€œæäº¤ä¿¡æ¯â€ 6.git statusï¼šæŸ¥çœ‹å½“å‰ git çš„çŠ¶æ€ã€‚ 7.git pushï¼šå°†æäº¤åŒºå†…å®¹ æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚ 8.checkoutï¼šæ’¤é”€æŸæ¬¡æäº¤çš„æŸä¸ªæ–‡ä»¶ã€‚ 1git checkout 8989920311bacb3f4e3ced7f82ab75ca47c318c7 GitTest/GitTest/ViewController.m 9.revertï¼šæ’¤é”€æŸä¸€æ¬¡æäº¤ã€‚ 1git revert 8989920311bacb3f4e3ced7f82ab75ca47c318c7 10.checkout HEADï¼šæ”¾å¼ƒæœ¬åœ°æŸä¸€æ–‡ä»¶çš„ä¿®æ”¹ã€‚ 1git checkout HEAD GitTest/GitTest/ViewController.m 11.git resetï¼šå›é€€åˆ°æŸä¸ªç‰ˆæœ¬å¹¶ä¿å­˜æœªè¿½è¸ªçš„æ”¹åŠ¨ã€‚(é€šè¿‡logæ¥æŸ¥è¯¢) 1git reset 8989920311bacb3f4e3ced7f82ab75ca47c318c7 12.git reset --hard HEADï¼šæ”¾å¼ƒæœ¬åœ°å…¨éƒ¨ä¿®æ”¹ã€‚ 13.git reset --keepï¼šå›é€€åˆ°æŸä¸ªç‰ˆæœ¬å¹¶ä¿å­˜æœªæäº¤çš„æ”¹åŠ¨ã€‚ 1git reset --keep 8989920311bacb3f4e3ced7f82ab75ca47c318c7 14.logï¼šæŸ¥çœ‹æäº¤æ—¥å¿—ã€‚ 15.git showï¼šæŸ¥çœ‹æ¯æ¬¡æäº¤çš„å…·ä½“å†…å®¹ã€‚ 16.diffï¼šæŸ¥çœ‹è¿½è¸ªæ–‡ä»¶çš„å·®å¼‚ã€‚ 1234// æŸ¥çœ‹è¿½è¸ªæ–‡ä»¶çš„å·®å¼‚git diff// æŸ¥çœ‹æŸä¸€æ–‡ä»¶çš„å·®å¼‚git diff GitTest/GitTest/ViewController.m 17.rmï¼šåˆ é™¤æ–‡ä»¶ã€‚ 1git rm GitTest/GitTest/ViewController.m 18.mvï¼šä¿®æ”¹æŸä¸€ä¸ªæ–‡ä»¶çš„åå­—ã€‚ 12// æ³¨æ„ï¼Œè·¯å¾„è¦å¯¹åº”ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨ç§»åŠ¨git mv GitTest/GitTest/ViewController.m GitTest/GitTest/View.m 19.blameï¼šæŸ¥çœ‹æ–‡ä»¶è¢«è°ä¿®æ”¹ã€‚ 1git blame GitTest/GitTest/ViewController.m ã€ŒGitâ€“&gt;branch &amp; tag &amp; remoteã€åˆ†æ”¯ã€æ ‡ç­¾å’Œè¿œç¨‹ branchï¼šåˆ†æ”¯ã€‚ 12345678910111213141516171819202122232425262728293031// æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯git branch// æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git branch -r// æŸ¥çœ‹è¿œç¨‹å’Œæœ¬åœ°åˆ†æ”¯git branch -a// åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œä½†æ˜¯ä¸åˆ‡æ¢git branch branch1// æ–°å»ºä¸€ä¸ªåˆ†æ”¯å¹¶åˆ‡æ¢git checkout -b branch2// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommitgit branch branch3 8989920311bacb3f4e3ced7f82ab75ca47c318c7// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»git branch --track branch4 origin/master// åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒºgit checkout branch4// åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯git checkout -// å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´git branch --set-upstream branch3 origin/master// åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git merge branch2// é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯git cherry-pick 8989920311bacb3f4e3ced7f82ab75ca47c318c7// åˆ é™¤åˆ†æ”¯git branch -d branch1// åˆ é™¤è¿œç¨‹åˆ†æ”¯git push origin --delete branch1git branch -dr branch1// å°†å½“å‰åˆ†æ”¯pushåˆ°æŒ‡å®šè¿œç¨‹åˆ†æ”¯git push origin HEAD:branch1 tagï¼šæ ‡ç­¾ã€‚ 12345678910111213141516// åˆ—å‡ºæ‰€æœ‰taggit tag// æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commitgit tag 1// æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommitgit tag 2 8989920311bacb3f4e3ced7f82ab75ca47c318c7// åˆ é™¤æœ¬åœ°taggit tag -d 1// æŸ¥çœ‹tagä¿¡æ¯git show 2// æäº¤æ‰€æœ‰taggit push --tags// åˆ é™¤è¿œç¨‹taggit push origin --delete tag 2// æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtaggit checkout -b [branch] [tag] remoteï¼šè¿œç¨‹ã€‚ 123456789101112// æŸ¥çœ‹è¿œç¨‹åº“çš„åœ°å€åˆ—è¡¨git remote -v// æŸ¥çœ‹è¿™ä¸ªè¿œç¨‹åº“çš„ä¿¡æ¯git remote show origin// ä»è¿œç¨‹åº“æ›´æ–°æ‰€æœ‰çš„ä¿¡æ¯åˆ°æœ¬åœ°ï¼Œä½†æ˜¯ä¸åˆå¹¶git fetch origin// ä»è¿œç¨‹åº“æ›´æ–°æ‰€æœ‰çš„ä¿¡æ¯åˆ°æœ¬åœ°ï¼Œä½†æ˜¯ä¸åˆå¹¶å¹¶æ¸…ç†å·²åˆ é™¤çš„è¿œç¨‹åˆ†æ”¯git fetch -p origin// ä»è¿œç¨‹åº“æ›´æ–°æ•°æ®å¹¶ç«‹å³åˆå¹¶æ•°æ®git pull origin branch1// å°†æœ¬åœ°æ•°æ®åŒæ­¥åˆ°è¿œç¨‹åº“ä¸­git push origin branch1 Git å®¢æˆ·ç«¯å®ç”¨ç¤ºä¾‹ 1ã€ç¤ºä¾‹ï¼šå°†æœ¬åœ°ä»£ç æäº¤åˆ° GitHub ä¸Šã€‚å‰æœŸå‡†å¤‡ï¼š cd Desktop/gitï¼ˆæ¡Œé¢æ–‡ä»¶å¤¹ï¼‰ git clone https://github.com/CustomPBWaters/liunDemo.gitï¼ˆä»“åº“çš„URLï¼‰ cd liunDemo(githubä¸Šå»ºçš„æ–‡ä»¶å¤¹) æŠŠè¦ä¸Šä¼ çš„Demoæ”¾åˆ°å»ºçš„æ¡Œé¢ git æ–‡ä»¶å¤¹é‡Œã€‚ ls -a ä¼šæç¤ºä¸‹æ­¥æ“ä½œã€‚ git commit -am CoreDataDemoï¼Œè¿™é‡Œçš„CoreDataDemoæ˜¯æˆ‘æœ¬åœ°çš„Demoã€‚ 12git add CoreDataDemo æŠŠå·¥ä½œåŒºçš„å†…å®¹æäº¤åˆ°æš‚å­˜åŒºgit commit -m CoreDataDemo æŠŠæš‚å­˜åŒºä¸­çš„å†…å®¹æäº¤åˆ°æäº¤åŒº git status æŸ¥çœ‹æäº¤çŠ¶æ€ã€‚ è¿™æ—¶ç¬¬ä¸€æ¬¡æäº¤ï¼Œä¼šè®©è¾“å…¥GitHubç”¨æˆ·åå¯†ç ã€‚ git push å°†æ–‡ä»¶æ¨é€åˆ°æœåŠ¡å™¨ä¸Šã€‚ æ³¨æ„ï¼šè¦ä¼ å¾—Demoé¡¹ç›®ä¸­ï¼Œæœ‰çš„å«éšè—æ–‡ä»¶.gitï¼Œéœ€è¦åˆ é™¤ rm -rf .gitï¼Œå†ä¸Šä¼ å°±å¯ä»¥äº†ã€‚ 2ã€ç¤ºä¾‹ï¼šè§£å†³å†²çªï¼ˆæ‰‹åŠ¨è§£å†³ï¼‰ã€‚æ‰“å¼€å†²çªæ–‡ä»¶ï¼Œåˆ é™¤&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD ======= &gt;&gt;&gt;&gt;&gt;&gt;&gt; branch1è¿™ä¸‰è¡Œå†ä¿®æ”¹æˆæƒ³è¦çš„ï¼Œæ·»åŠ ï¼Œæäº¤å³å¯ã€‚ SVN &amp; Git ä¸¤è€…æ¯”è¾ƒ SVN &amp; Gitç‰¹ç‚¹ ç»“æ„(æœ€ä¸»è¦çš„åŒºåˆ«) SVNæ˜¯é›†ä¸­å¼ç®¡ç†ï¼ŒGitæ˜¯åˆ†å¸ƒå¼ç®¡ç† é€Ÿåº¦ åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œgitçš„é€Ÿåº¦è¿œè¿œæ¯”SVNå¿« éš¾åº¦ SVNåŠŸèƒ½ç®€å•ï¼ŒæŒ‡ä»¤ç®€å•ï¼Œå…¥é—¨å®¹æ˜“ã€‚GitåŠŸèƒ½å®Œå–„ï¼ŒæŒ‡ä»¤å¤æ‚ï¼Œå…¥é—¨ç®€å•æŒæ¡éš¾ å…¶ä»– SVNä½¿ç”¨åˆ†æ”¯æ¯”è¾ƒç¬¨æ‹™ï¼Œgitå¯ä»¥è½»æ¾æ‹¥æœ‰æ— é™ä¸ªåˆ†æ”¯ SVNå¿…é¡»è”ç½‘æ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œgitæ”¯æŒæœ¬åœ°ç‰ˆæœ¬æ§åˆ¶å·¥ä½œ æ—§ç‰ˆæœ¬çš„SVNä¼šåœ¨æ¯ä¸€ä¸ªç›®å½•ç½®æ”¾ä¸€ä¸ª.svnï¼Œgitåªä¼šåœ¨æ ¹ç›®å½•æ‹¥æœ‰ä¸€ä¸ª.git è¡¥å……é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ åœ¨åˆ†å¸ƒå¼ä¸‹å¼€å‘è€…å¯ä»¥æœ¬åœ°æäº¤ã€‚ æ¯ä¸ªå¼€å‘è€…æœºå™¨ä¸Šéƒ½æœ‰ä¸€ä¸ªæœåŠ¡å™¨çš„æ•°æ®åº“ã€‚ ä»ç¨³å®šå¯é çš„è§’åº¦æ¥çœ‹ï¼Œåˆ†å¸ƒå¼è‚¯å®šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ æ€»ç»“ è¿™ä¸¤ä¸ªç‰ˆæœ¬æ§åˆ¶ä¸€ç›´æŒç»­åˆ°ç°åœ¨ï¼Œä¸¤è€…éƒ½æœ‰å…¶ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚ ä¸ªäººè®¤ä¸ºä¸¤è€…æ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ¿ï¼Œèƒ½å¤Ÿå–ä»£å¦ä¸€æ–¹ã€‚ ä½†æ˜¯ä»åŠŸèƒ½ä¸Šæ¥è®²ï¼ŒGit æ‹¥æœ‰SVNå¤§è‡´æ‰€æœ‰çš„åŠŸèƒ½ï¼Œè¿˜æ‹¥æœ‰æ›´å¤šå¯é ï¼Œä¾¿æ·ï¼Œä¸ªæ€§åŒ–çš„æŒ‡ä»¤æ–¹ä¾¿æ“ä½œã€‚ å°±å‰©æœ€åä¸€å¥è¯äº†ï¼Œæ²¡é”™ï¼Œæƒ³è¦å¤æ‚çš„åŠŸèƒ½ï¼Œå°±è¦æ‰¿å—å­¦ä¹ çš„ä»£ä»·ã€‚ ç å†œä»¬è¸©è¿‡çš„å‘æ•´ç†ï¼ˆæŒç»­~ï¼‰ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å·¥å…·&amp;æ’ä»¶</category>
      </categories>
      <tags>
        <tag>å·¥å…·&amp;æ’ä»¶</tag>
        <tag>SVNGit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ•°æ®å®‰å…¨â€”ã€ŒåŠ å¯†è§£å¯†ã€]]></title>
    <url>%2FiOSNET%2FDataSecurity.html</url>
    <content type="text"><![CDATA[Write in the first åœ¨å†™é¡¹ç›®ä¸­ï¼Œæ•°æ®çš„å®‰å…¨æ€§è‡³å…³é‡è¦ï¼Œè€Œä»…ä»…ç”¨ POST è¯·æ±‚æäº¤ç”¨æˆ·çš„éšç§æ•°æ®ï¼Œè¿˜æ˜¯ä¸èƒ½å®Œå…¨è§£å†³å®‰å…¨é—®é¢˜ã€‚å› æ­¤ï¼šæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°åŠ å¯†æŠ€æœ¯ï¼Œæ¯”å¦‚è¯´åœ¨ç™»å½•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå…ˆæŠŠå¯†ç ç”¨MD5åŠ å¯†å†ä¼ è¾“ç»™æœåŠ¡å™¨ æˆ–è€… ç›´æ¥å¯¹æ‰€æœ‰çš„å‚æ•°è¿›è¡ŒåŠ å¯†å†POSTåˆ°æœåŠ¡å™¨ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€iOS æ•°æ®å®‰å…¨ç›¸å…³ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•: æ•°æ®å®‰å…¨ä»‹ç» å¸¸ç”¨åŠ å¯†ç®—æ³• å¸¸ç”¨åŠ å¯†æ–¹å¼ Base64ç¼–ç æ–¹æ¡ˆ åŠ å¯†å®ç°ä»£ç 5.1 MD5åŠ å¯†ç®—æ³•5.2 å¯¹ç§°åŠ å¯†ç®—æ³•AESå’ŒDES5.3 éå¯¹ç§°åŠ å¯†RSA HTTPSåŸºæœ¬ä½¿ç”¨ æ•°æ®å®‰å…¨â€“åŠ å¯†è§£å¯†æ•ˆæœ åŠ å¯†å®æˆ˜åº”ç”¨åœºæ™¯ï¼ˆæŒç»­æ›´æ–°ï¼‰ Contentsã€ç›¸å…³ä»‹ç»ã€‘ 1.æ•°æ®å®‰å…¨ä»‹ç» æœ€åŸºç¡€çš„æ˜¯æˆ‘ä»¬å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œä½¿ç”¨getå’Œpostæ–¹å¼å‘é€è¯·æ±‚ã€‚ä¸¤è€…å…·ä½“åŒºåˆ«å°±ä¸åšè§£é‡Šäº†ï¼Œåªæ˜¯å¼•å‡ºç›¸å…³å®‰å…¨æ€§é—®é¢˜ getï¼šå°†å‚æ•°æš´éœ²åœ¨å¤–ï¼Œï¼ˆç»å¯¹ä¸å®‰å…¨â€“&gt;æ˜æ–‡è¯·æ±‚æˆ–è€…å‚»ç“œå¼è¯·æ±‚ï¼‰ã€‚ postï¼šå°†å‚æ•°æ”¾åˆ°è¯·æ±‚ä½“bodyä¸­ï¼Œï¼ˆç›¸å¯¹äºgetæ¯”è¾ƒå®‰å…¨â€“&gt;ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“ç”¨ä¸€äº›è½¯ä»¶æˆªè·è¯·æ±‚æ•°æ®ã€‚æ¯”å¦‚è¯´Charlesï¼ˆé’èŠ±ç“·ï¼‰ï¼‰ Charlesï¼ˆå¤§éƒ¨åˆ†appçš„æ•°æ®æ¥æºéƒ½ä½¿ç”¨è¯¥å·¥å…·æ¥æŠ“åŒ…ï¼Œå¹¶åšç½‘ç»œæµ‹è¯•ï¼‰ æ³¨æ„ï¼šCharlesåœ¨ä½¿ç”¨ä¸­çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥æ˜¾ç¤ºåŒ…å†…å®¹ï¼Œç„¶åæ‰“å¼€info.plistæ–‡ä»¶ï¼Œæ‰¾åˆ°javaç›®å½•ä¸‹é¢çš„VMOptionsï¼Œåœ¨åé¢æ·»åŠ ä¸€é¡¹ï¼š-Dfile.encoding=UTF-8 è¿™é‡Œæä¾›ä¸€ä¸ªé’èŠ±ç“·ç ´è§£ç‰ˆä¸‹è½½é€”å¾„ï¼Œä¾›å¤§å®¶å­¦ä¹ ä½¿ç”¨ï¼Œå•†åŠ¡éœ€æ±‚ï¼Œä¹Ÿè¯·æ”¯æŒæ­£ç‰ˆã€‚ æ•°æ®å®‰å…¨çš„åŸåˆ™ åœ¨ç½‘ç»œä¸Šä¸å…è®¸ä¼ è¾“ç”¨æˆ·éšç§æ•°æ®çš„æ˜æ–‡,ï¼ˆå³:Appç½‘ç»œä¼ è¾“å®‰å…¨ï¼ŒæŒ‡å¯¹æ•°æ®ä»å®¢æˆ·ç«¯ä¼ è¾“åˆ°Serverä¸­é—´è¿‡ç¨‹çš„åŠ å¯†ï¼Œé˜²æ­¢ç½‘ç»œä¸–ç•Œå½“ä¸­å…¶ä»–èŠ‚ç‚¹å¯¹æ•°æ®çš„çªƒå¬ï¼‰ã€‚ åœ¨æœ¬åœ°ä¸å…è®¸ä¿å­˜ç”¨æˆ·éšç§æ•°æ®çš„æ˜æ–‡,ï¼ˆå³:Appæ•°æ®å­˜å‚¨å®‰å…¨ï¼Œä¸»è¦æŒ‡åœ¨ç£ç›˜åšæ•°æ®æŒä¹…åŒ–çš„æ—¶å€™æ‰€åšçš„åŠ å¯†ï¼‰ã€‚ Appä»£ç å®‰å…¨,ï¼ˆå³:åŒ…æ‹¬ä»£ç æ··æ·†ï¼ŒåŠ å¯†æˆ–è€…appåŠ å£³ï¼‰ã€‚ è¦æƒ³éå¸¸å®‰å…¨çš„ä¼ è¾“æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨httpsã€‚æŠ“åŒ…ä¸å¯ä»¥ï¼Œä½†æ˜¯ä¸­é—´äººæ”»å‡»åˆ™æœ‰å¯èƒ½ã€‚å»ºè®®åŒå‘éªŒè¯é˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼Œå¯ä»¥å‚è€ƒä¸‹æ–‡ç¯‡ç« ã€‚ 2.å¸¸ç”¨åŠ å¯†ç®—æ³• å¸¸ç”¨åŠ å¯†ç®—æ³• åç§° ç¼–ç æ–¹æ¡ˆ Base64 å“ˆå¸Œ(æ•£åˆ—)å‡½æ•° MD5ï¼ˆæ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼‰ SHA1 SHA256 å¯¹ç§°åŠ å¯†ç®—æ³• DES AES éå¯¹ç§°åŠ å¯†ç®—æ³• RSA HTTPS HTTP+SSLåè®® 3.å¸¸ç”¨åŠ å¯†æ–¹å¼ å¸¸ç”¨åŠ å¯†æ–¹å¼ 1.é€šè¿‡ç®€å• BASE64ç¼–ç  é˜²æ­¢æ•°æ®æ˜æ–‡ä¼ è¾“ 2.å¯¹æ™®é€šè¯·æ±‚ã€è¿”å›æ•°æ®ï¼Œç”ŸæˆMD5æ ¡éªŒï¼ˆMD5ä¸­åŠ å…¥åŠ¨æ€å¯†é’¥ï¼‰ï¼Œè¿›è¡Œæ•°æ®å®Œæ•´æ€§ï¼ˆç®€å•é˜²ç¯¡æ”¹ï¼Œå®‰å…¨æ€§è¾ƒä½ï¼Œä¼˜ç‚¹ï¼šå¿«é€Ÿï¼‰æ ¡éªŒ 3.å¯¹äºé‡è¦æ•°æ®ï¼Œä½¿ç”¨RSAè¿›è¡Œæ•°å­—ç­¾åï¼Œèµ·åˆ°é˜²ç¯¡æ”¹ä½œ 4.å¯¹äºæ¯”è¾ƒæ•æ„Ÿçš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ï¼ˆç™»é™†ã€æ³¨å†Œç­‰ï¼‰ï¼Œå®¢æˆ·ç«¯å‘é€ä½¿ç”¨RSAåŠ å¯†ï¼ŒæœåŠ¡å™¨è¿”å›ä½¿ç”¨DES(AES)åŠ å¯† 5.è¦æƒ³éå¸¸å®‰å…¨çš„ä¼ è¾“æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨httpsã€‚æŠ“åŒ…ä¸å¯ä»¥ï¼Œä½†æ˜¯ä¸­é—´äººæ”»å‡»åˆ™æœ‰å¯èƒ½ã€‚å»ºè®®åŒå‘éªŒè¯é˜²æ­¢ä¸­é—´äººæ”»å‡» 4.Base64ç¼–ç æ–¹æ¡ˆ1.Base64ç®€å•è¯´æ˜ æè¿°ï¼šBase64å¯ä»¥æˆä¸ºå¯†ç å­¦çš„åŸºçŸ³ï¼Œéå¸¸é‡è¦ã€‚ ç‰¹ç‚¹ï¼šå¯ä»¥å°†ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ®è¿›è¡ŒBase64ç¼–ç  ç»“æœï¼šæ‰€æœ‰çš„æ•°æ®éƒ½èƒ½è¢«ç¼–ç ä¸ºå¹¶åªç”¨65ä¸ªå­—ç¬¦ï¼ˆA~Z a~z 0~9 + / =ï¼‰å°±èƒ½è¡¨ç¤ºçš„æ–‡æœ¬æ–‡ä»¶ã€‚ æ³¨æ„ï¼šå¯¹æ–‡ä»¶è¿›è¡Œbase64ç¼–ç åæ–‡ä»¶æ•°æ®çš„å˜åŒ–ï¼šç¼–ç åçš„æ•°æ®~=ç¼–ç å‰æ•°æ®çš„4/3ï¼Œä¼šå¤§1/3å·¦å³ã€‚ 2.Base64ç¼–ç åŸç†å’Œå¤„ç†è¿‡ç¨‹ Base64ç¼–ç åŸç† 1ã€å°†æ‰€æœ‰å­—ç¬¦è½¬åŒ–ä¸ºASCIIç  2ã€å°†ASCIIç è½¬åŒ–ä¸º8ä½äºŒè¿›åˆ¶ 3ã€å°†äºŒè¿›åˆ¶3ä¸ªå½’æˆä¸€ç»„(ä¸è¶³3ä¸ªåœ¨åè¾¹è¡¥0)å…±24ä½ï¼Œå†æ‹†åˆ†æˆ4ç»„ï¼Œæ¯ç»„6ä½ 4ã€ç»Ÿä¸€åœ¨6ä½äºŒè¿›åˆ¶å‰è¡¥ä¸¤ä¸ª0å‡‘è¶³8ä½ 5ã€å°†è¡¥0åçš„äºŒè¿›åˆ¶è½¬ä¸ºåè¿›åˆ¶ 6ã€ä»Base64ç¼–ç è¡¨è·å–åè¿›åˆ¶å¯¹åº”çš„Base64ç¼–ç  Base64å¤„ç†è¿‡ç¨‹ 1ã€è½¬æ¢çš„æ—¶å€™ï¼Œå°†ä¸‰ä¸ªbyteçš„æ•°æ®ï¼Œå…ˆåæ”¾å…¥ä¸€ä¸ª24bitçš„ç¼“å†²åŒºä¸­ï¼Œå…ˆæ¥çš„byteå é«˜ä½ã€‚ 2ã€æ•°æ®ä¸è¶³3byteçš„è¯ï¼Œäºç¼“å†²åŒºä¸­å‰©ä¸‹çš„bitç”¨0è¡¥è¶³ã€‚ç„¶åï¼Œæ¯æ¬¡å–å‡º6ä¸ªbitï¼ŒæŒ‰ç…§å…¶å€¼é€‰æ‹©æŸ¥è¡¨é€‰æ‹©å¯¹åº”çš„å­—ç¬¦ä½œä¸ºç¼–ç åçš„è¾“å‡ºã€‚ 3ã€ä¸æ–­è¿›è¡Œï¼Œç›´åˆ°å…¨éƒ¨è¾“å…¥æ•°æ®è½¬æ¢å®Œæˆã€‚ 4ã€å¦‚æœæœ€åå‰©ä¸‹ä¸¤ä¸ªè¾“å…¥æ•°æ®ï¼Œåœ¨ç¼–ç ç»“æœååŠ 1ä¸ªâ€œ=â€ï¼› 5ã€å¦‚æœæœ€åå‰©ä¸‹ä¸€ä¸ªè¾“å…¥æ•°æ®ï¼Œç¼–ç ç»“æœååŠ 2ä¸ªâ€œ=â€ï¼› 6ã€å¦‚æœæ²¡æœ‰å‰©ä¸‹ä»»ä½•æ•°æ®ï¼Œå°±ä»€ä¹ˆéƒ½ä¸è¦åŠ ï¼Œè¿™æ ·æ‰å¯ä»¥ä¿è¯èµ„æ–™è¿˜åŸçš„æ­£ç¡®æ€§ã€‚ åœ¨è¿™é‡Œæä¾›å‡ å¼ å›¾ç»“åˆä¸Šé¢çš„å¤„ç†è¿‡ç¨‹ï¼Œå¥½ç†è§£ã€‚ Base64å®ç°ä»£ç ç®€å•æ–¹æ³•ç›´æ¥æ‹¿èµ°ï¼Œè°ƒç”¨12345678910111213141516171819202122// å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œbase64ç¼–ç ,å¹¶ä¸”è¿”å›-(NSString *)base64EncodeString:(NSString *)string &#123; // 1.å…ˆè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ® NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding]; // 2.å¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œbase64ç¼–ç ,å®Œæˆä¹‹åè¿”å›å­—ç¬¦ä¸² return [data base64EncodedStringWithOptions:0];&#125;// å¯¹base64ç¼–ç ä¹‹åçš„å­—ç¬¦ä¸²è§£ç ,å¹¶ä¸”è¿”å›-(NSString *)base64DecodeString:(NSString *)string &#123; // æ³¨æ„:è¯¥å­—ç¬¦ä¸²æ˜¯base64ç¼–ç åçš„å­—ç¬¦ä¸² // 1.è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®(å®Œæˆäº†è§£ç çš„è¿‡ç¨‹) NSData *data = [[NSData alloc]initWithBase64EncodedString:string options:0]; // 2.æŠŠäºŒè¿›åˆ¶æ•°æ®åœ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸² return [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];&#125;//---------------------------&lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt;------------------------------//NSLog(@"%@",[self base64EncodeString:@"A"]);NSLog(@"%@",[self base64DecodeString:@"QQ=="]); PS.ç»ˆç«¯æ‰§è¡Œç¼–ç å’Œè§£ç 123å¦‚ï¼šç¼–ç ï¼šbase64 123.png -o 123.txtè§£ç ï¼šbase64 123.txt -o test.png -D 4.åŠ å¯†å®ç°ä»£ç å“ˆå¸Œ(æ•£åˆ—)å‡½æ•°ç‰¹ç‚¹ï¼š ç®—æ³•æ˜¯å…¬å¼€çš„ å¯¹ç›¸åŒçš„æ•°æ®åŠ å¯†ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„â€ å¯¹ä¸åŒçš„æ•°æ®åŠ å¯†ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯å®šé•¿çš„ï¼ŒMD5å¯¹ä¸åŒçš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°çš„ç»“æœéƒ½æ˜¯ 32 ä¸ªå­—ç¬¦é•¿åº¦çš„å­—ç¬¦ä¸² ä¿¡æ¯æ‘˜è¦ï¼Œä¿¡æ¯â€æŒ‡çº¹â€ï¼Œæ˜¯ç”¨æ¥åšæ•°æ®è¯†åˆ«çš„ï¼ ä¸èƒ½é€†æ¨åç®—(é‡è¦) ç”¨é€”ï¼š ç‰ˆæƒ å¯¹æ–‡ä»¶è¿›è¡Œæ•£åˆ—åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯æ­£ç‰ˆæˆ–åŸç‰ˆçš„ æ–‡ä»¶å®Œæ•´æ€§éªŒè¯ å¯¹æ•´ä¸ªæ–‡ä»¶è¿›è¡Œæ•£åˆ—ï¼Œæ¯”è¾ƒæ•£åˆ—å€¼åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å®Œæ•´æˆ–è¢«ç¯¡æ”¹ å¯†ç åŠ å¯†ï¼ŒæœåŠ¡å™¨å¹¶ä¸éœ€è¦çŸ¥é“ç”¨æˆ·çœŸå®çš„å¯†ç ï¼ æœç´¢ï¼šå¦‚ï¼šç™¾åº¦æœç´¢â€“&gt;è€å¸æœº çš®çš®è™¾ è‹è€å¸ˆæˆ–æ˜¯ ã€è‹è€å¸ˆ è€å¸æœº çš®çš®è™¾ ã€‘ä¸Šé¢ä¸¤ç§æ–¹å¼æœç´¢å‡ºæ¥çš„å†…å®¹æ˜¯ä¸€æ ·çš„ å¦‚ä½•åˆ¤æ–­ï¼šå¯¹æœç´¢çš„æ¯ä¸ªå…³é”®å­—è¿›è¡Œä¸‰åˆ—ï¼Œå¾—åˆ°ä¸‰ä¸ªç›¸å¯¹åº”çš„ç»“æœï¼ŒæŒ‰ä½ç›¸åŠ ç»“æœå¦‚æœæ˜¯ä¸€æ ·çš„ï¼Œé‚£æœç´¢çš„å†…å®¹å°±æ˜¯ä¸€æ ·çš„ï¼ ç»å…¸åŠ å¯†ç®—æ³•ï¼šMD5ã€SHA1ã€SHA512 MD5æ¶ˆæ¯æ‘˜è¦ç®—æ³• ç®€å•ä»‹ç»: MD5ï¼šå…¨ç§°æ˜¯Message Digest Algorithm 5ï¼Œè¯‘ä¸ºâ€œæ¶ˆæ¯æ‘˜è¦ç®—æ³•ç¬¬5ç‰ˆâ€(ç»MD2ã€MD3å’ŒMD4å‘å±•è€Œæ¥) æ•ˆæœï¼šå¯¹è¾“å…¥ä¿¡æ¯ç”Ÿæˆå”¯ä¸€çš„128ä½æ•£åˆ—å€¼ï¼ˆ32ä¸ªå­—ç¬¦ï¼‰ï¼Œå³ 32ä¸ª16è¿›åˆ¶çš„æ•°å­—ã€‚ ç‰¹ç‚¹: è¾“å…¥ä¸¤ä¸ªä¸åŒçš„æ˜æ–‡ä¸ä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºå€¼ æ ¹æ®è¾“å‡ºå€¼ï¼Œä¸èƒ½å¾—åˆ°åŸå§‹çš„æ˜æ–‡ï¼Œå³å…¶è¿‡ç¨‹ä¸å¯é€†(åªèƒ½åŠ å¯†, ä¸èƒ½è§£å¯†) åº”ç”¨: ç°åœ¨çš„MD5å·²ä¸å†æ˜¯ç»å¯¹å®‰å…¨(å¦‚ï¼šæš´åŠ›ç ´è§£çš„ç½‘ç«™)ï¼Œå¯¹æ­¤ï¼Œå¯ä»¥å¯¹MD5ç¨ä½œæ”¹è¿›ï¼Œä»¥å¢åŠ è§£å¯†çš„éš¾åº¦ã€‚ è§£å†³ï¼šåŠ ç›ï¼ˆSaltï¼‰ï¼šåœ¨æ˜æ–‡çš„å›ºå®šä½ç½®æ’å…¥éšæœºä¸²ï¼Œç„¶åå†è¿›è¡ŒMD5ï¼ˆå…ˆåŠ å¯†ï¼Œåä¹±åºï¼šå…ˆå¯¹æ˜æ–‡è¿›è¡ŒMD5ï¼Œç„¶åå¯¹åŠ å¯†å¾—åˆ°çš„MD5ä¸²çš„å­—ç¬¦è¿›è¡Œä¹±åºï¼‰ æ³¨æ„ç‚¹: å¼€å‘ä¸­ï¼Œä¸€å®šè¦å’Œåå°å¼€å‘äººå‘˜çº¦å®šå¥½ï¼ŒMD5åŠ å¯†çš„ä½æ•°æ˜¯16ä½è¿˜æ˜¯32ä½(å¤§å¤šæ•°éƒ½æ˜¯32ä½çš„)ï¼Œ16ä½çš„å¯ä»¥é€šè¿‡32ä½çš„è½¬æ¢å¾—åˆ°ã€‚ MD5åŠ å¯†åŒºåˆ† å¤§å°å†™ï¼Œä½¿ç”¨æ—¶è¦å’Œåå°çº¦å®šå¥½ã€‚ MD5å…¬è®¤è¢«ç ´è§£ä¸ä»£è¡¨å…¶å¯é€†ï¼Œè€Œæ˜¯ä¸€æ®µå­—ç¬¦ä¸²åŠ å¯†åçš„å¯†æ–‡ï¼Œå¯ä»¥é€šè¿‡å¼ºå¤§è¿ç®—è®¡ç®—å‡ºå­—ç¬¦ä¸²åŠ å¯†åçš„å¯†æ–‡å¯¹åº”çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œä½†ä¹Ÿä¸æ˜¯ç»å¯¹çš„è¢«ç ´è§£ã€‚ PS.æš´åŠ›ç ´è§£æ˜¯æŒ‡é€šè¿‡å°†æ˜æ–‡å’Œç”Ÿæˆçš„å¯†æ–‡è¿›è¡Œé…å¯¹ï¼Œç”Ÿæˆå¼ºå¤§çš„æ•°æ®åº“ï¼Œåœ¨æ•°æ®åº“ä¸­æœç´¢ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥ç ´è§£å¯†ç ã€‚ç ´è§£ç½‘å€ http://www.cmd5.com æå‡MD5åŠ å¯†å®‰å…¨æ€§ï¼Œè§£å†³åŠæ³• 1.å…ˆæ˜æ–‡åŠ ç›ï¼Œç„¶åå†è¿›è¡ŒMD5ã€‚å³æ˜æ–‡åæ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆæ­¤æ—¶æ‹¼æ¥çš„å­—ç¬¦ä¸²è¦ è¶³å¤Ÿé•¿+è¶³å¤Ÿå’¸+è¶³å¤Ÿå¤æ‚ï¼‰ï¼Œå†è¿›è¡ŒMD5åŠ å¯†ã€‚å¦‚ï¼š#define salt @&quot;1342*&amp;%&amp;shlfhs390(*^^6R%@@KFGKF&quot; 2.å…ˆåŠ å¯†+ä¹±åº 3.ä¹±åº|åŠ ç›ï¼Œå¤šæ¬¡MD5åŠ å¯†ç­‰ 4.ä½¿ç”¨æ¶ˆæ¯è®¤è¯æœºåˆ¶HMACï¼šç»™å®šä¸€ä¸ªâ€ç§˜é’¥â€ï¼Œå¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†ï¼Œå¹¶ä¸”åšâ€ä¸¤æ¬¡æ•£åˆ—â€ï¼-&gt; å¾—åˆ°çš„ç»“æœï¼Œè¿˜æ˜¯ 32 ä¸ªå­—ç¬¦ï¼Œç›¸å¯¹å®‰å…¨ï¼ˆKEYæ˜¯æœåŠ¡å™¨ä¼ ç»™ä½ çš„ï¼Œä¸æ˜¯ä½ å†™æ­»çš„ï¼‰ã€‚ æ¶ˆæ¯è®¤è¯æœºåˆ¶ï¼ˆHMACï¼‰ç®€å•è¯´æ˜ åŸç† æ¶ˆæ¯çš„å‘é€è€…å’Œæ¥æ”¶è€…æœ‰ä¸€ä¸ªå…±äº«å¯†é’¥ å‘é€è€…ä½¿ç”¨å…±äº«å¯†é’¥å¯¹æ¶ˆæ¯åŠ å¯†è®¡ç®—å¾—åˆ°MACå€¼ï¼ˆæ¶ˆæ¯è®¤è¯ç ï¼‰ æ¶ˆæ¯æ¥æ”¶è€…ä½¿ç”¨å…±äº«å¯†é’¥å¯¹æ¶ˆæ¯åŠ å¯†è®¡ç®—å¾—åˆ°MACå€¼ æ¯”è¾ƒä¸¤ä¸ªMACå€¼æ˜¯å¦ä¸€è‡´ ä½¿ç”¨ å®¢æˆ·ç«¯éœ€è¦åœ¨å‘é€çš„æ—¶å€™æŠŠï¼ˆæ¶ˆæ¯ï¼‰+ï¼ˆæ¶ˆæ¯Â·HMACï¼‰ä¸€èµ·å‘é€ç»™æœåŠ¡å™¨ æœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®åï¼Œå¯¹æ‹¿åˆ°çš„æ¶ˆæ¯ç”¨å…±äº«çš„KEYè¿›è¡ŒHMACï¼Œæ¯”è¾ƒæ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™ä¿¡ä»» ç®€å•ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041#pragma mark - md5åŠ å¯†æ–¹æ³•- (NSString *)md5String &#123; const char *str = self.UTF8String; uint8_t buffer[CC_MD5_DIGEST_LENGTH]; CC_MD5(str, (CC_LONG)strlen(str), buffer); return [self stringFromBytes:buffer length:CC_MD5_DIGEST_LENGTH];&#125;#pragma mark - HMACMD5åŠ å¯†æ–¹æ³•- (NSString *)hmacMD5StringWithKey:(NSString *)key &#123; const char *keyData = key.UTF8String; const char *strData = self.UTF8String; uint8_t buffer[CC_MD5_DIGEST_LENGTH]; CCHmac(kCCHmacAlgMD5, keyData, strlen(keyData), strData, strlen(strData), buffer); return [self stringFromBytes:buffer length:CC_MD5_DIGEST_LENGTH];&#125;/** * è¿”å›äºŒè¿›åˆ¶ Bytes æµçš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ * @param bytes äºŒè¿›åˆ¶ Bytes æ•°ç»„ * @param length æ•°ç»„é•¿åº¦ * @return å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ */- (NSString *)stringFromBytes:(uint8_t *)bytes length:(int)length &#123; NSMutableString *strM = [NSMutableString string]; for (int i = 0; i &lt; length; i++) &#123; [strM appendFormat:@"%02x", bytes[i]]; &#125; return [strM copy];&#125;//---------------------------&lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt;------------------------------//// md5åŠ å¯†è°ƒç”¨NSLog(@"%@",[@"520it" md5String]);// (æ˜æ–‡+åŠ ç›)MD5åŠ å¯†è°ƒç”¨NSLog(@"%@",[[@"520it" stringByAppendingString:salt] md5String]);// hmacMD5åŠ å¯†è°ƒç”¨ï¼ˆå…ˆåŠ å¯†+ä¹±åºï¼‰NSLog(@"%@",[@"520it" hmacMD5StringWithKey:@"xiaomage"]); å¯¹ç§°åŠ å¯†ç®—æ³•AESå’ŒDES å¯¹ç§°åŠ å¯†çš„ç‰¹ç‚¹ åŠ å¯†/è§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ åŠ å¯†å’Œè§£å¯†çš„è¿‡ç¨‹æ˜¯å¯é€†çš„ ç»å…¸ç®—æ³• DES æ•°æ®åŠ å¯†æ ‡å‡† AES é«˜çº§åŠ å¯†æ ‡å‡† æç¤ºï¼š åŠ å¯†è¿‡ç¨‹æ˜¯å…ˆåŠ å¯†ï¼Œå†base64ç¼–ç  è§£å¯†è¿‡ç¨‹æ˜¯å…ˆbase64è§£ç ï¼Œå†è§£å¯† ç®€å•ç¤ºä¾‹123456789101112131415161718192021222324/** * åŠ å¯†å­—ç¬¦ä¸²å¹¶è¿”å›base64ç¼–ç å­—ç¬¦ä¸² * * @param string è¦åŠ å¯†çš„å­—ç¬¦ä¸² * @param keyString åŠ å¯†å¯†é’¥ * @param iv åˆå§‹åŒ–å‘é‡(8ä¸ªå­—èŠ‚) * * @return è¿”å›åŠ å¯†åçš„base64ç¼–ç å­—ç¬¦ä¸² */- (NSString *)encryptString:(NSString *)string keyString:(NSString *)keyString iv:(NSData *)iv;/** * è§£å¯†å­—ç¬¦ä¸² * * @param string åŠ å¯†å¹¶base64ç¼–ç åçš„å­—ç¬¦ä¸² * @param keyString è§£å¯†å¯†é’¥ * @param iv åˆå§‹åŒ–å‘é‡(8ä¸ªå­—èŠ‚) * * @return è¿”å›è§£å¯†åçš„å­—ç¬¦ä¸² */- (NSString *)decryptString:(NSString *)string keyString:(NSString *)keyString iv:(NSData *)iv;// è°ƒç”¨EncryptionTools *encrypt = [EncryptionTools sharedEncryptionTools];NSLog(@"%@",[encrypt encryptString:@"LN123" keyString:@"LN" iv:nil]);NSLog(@"%@",[encrypt decryptString:@"OPcTMDB5paivqtYo9Fj+hQ==" keyString:@"LN" iv:nil]); éå¯¹ç§°åŠ å¯†RSA éå¯¹ç§°åŠ å¯†çš„ç‰¹ç‚¹ ä½¿ç”¨ å…¬é’¥ åŠ å¯†ï¼Œä½¿ç”¨ ç§é’¥ è§£å¯† ä½¿ç”¨ ç§é’¥ åŠ å¯†ï¼Œä½¿ç”¨ å…¬é’¥ è§£å¯†ï¼ˆç§é’¥ç­¾åï¼Œå…¬é’¥éªŒç­¾ï¼‰ å…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œç§é’¥ä¿å¯† åŠ å¯†å¤„ç†å®‰å…¨ï¼Œä½†æ˜¯æ€§èƒ½æå·® ç»å…¸ç®—æ³•â€“&gt;RSA ç®€å•ç¤ºä¾‹12345678910111213// å…¬é’¥åŠ å¯†æ—¶è°ƒç”¨ç±»æ–¹æ³•ï¼š+ (NSString *)encryptString:(NSString *)str publicKey:(NSString *)pubKey;+ (NSData *)encryptData:(NSData *)data publicKey:(NSString *)pubKey;// ç§é’¥è§£å¯†æ—¶è°ƒç”¨ç±»æ–¹æ³•+ (NSString *)decryptString:(NSString *)str privateKey:(NSString *)privKey;+ (NSData *)decryptData:(NSData *)data privateKey:(NSString *)privacy;/** è°ƒç”¨ */NSString *str = [RSAUtil encryptString: @"LN" publicKey:RSA_Public_key];NSLog(@"RSAå…¬é’¥åŠ å¯†æ•°æ®--&gt;\n%@",str);NSString *str1 = [RSAUtil decryptString:str privateKey:RSA_Privite_key];NSLog(@"RSAç§é’¥è§£å¯†æ•°æ®--&gt;%@",str1); MACä¸Šç”Ÿæˆå…¬é’¥ã€ç§é’¥çš„æ–¹æ³•ï¼ŒåŠä½¿ç”¨12345678910# MACä¸Šç”Ÿæˆå…¬é’¥ã€ç§é’¥çš„æ–¹æ³•@code1.æ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°è‡ªå·±æƒ³è¾“å‡ºçš„æ–‡ä»¶å¤¹ä¸‹2.è¾“å…¥æŒ‡ä»¤:opensslï¼ˆopensslæ˜¯ç”Ÿæˆå„ç§ç§˜é’¥çš„å·¥å…·ï¼Œmacå·²ç»åµŒå…¥)3.è¾“å…¥æŒ‡ä»¤:genrsa -out rsa_private_key.pem 1024 (ç”Ÿæˆç§é’¥ï¼Œjavaç«¯ä½¿ç”¨çš„)4.è¾“å…¥æŒ‡ä»¤:rsa -in rsa_private_key.pem -out rsa_public_key.pem -pubout (ç”Ÿæˆå…¬é’¥)5.è¾“å…¥æŒ‡ä»¤:pkcs8 -topk8 -in rsa_private_key.pem -out pkcs8_rsa_private_key.pem -nocrypt(ç§é’¥è½¬æ ¼å¼ï¼Œåœ¨iosç«¯ä½¿ç”¨ç§é’¥è§£å¯†æ—¶ç”¨è¿™ä¸ªç§é’¥)æ³¨æ„:åœ¨MACä¸Šç”Ÿæˆä¸‰ä¸ª.pemæ ¼å¼çš„æ–‡ä»¶ï¼Œä¸€ä¸ªå…¬é’¥ï¼Œä¸¤ä¸ªç§é’¥ï¼Œéƒ½å¯ä»¥åœ¨ç»ˆç«¯é€šè¿‡æŒ‡ä»¤vim xxx.pem æ‰“å¼€ï¼Œé‡Œé¢æ˜¯å­—ç¬¦ä¸²ï¼Œç¬¬ä¸‰æ­¥ç”Ÿæˆçš„ç§é’¥æ˜¯javaç«¯ç”¨æ¥è§£å¯†æ•°æ®çš„ï¼Œç¬¬äº”æ­¥è½¬æ¢æ ¼å¼çš„ç§é’¥iOSç«¯å¯ä»¥ç”¨æ¥è°ƒè¯•å…¬é’¥ã€ç§é’¥è§£å¯†ï¼ˆå› ä¸ºç§é’¥ä¸ç•™åœ¨å®¢æˆ·ç«¯ï¼‰iOSç«¯å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†ã€javaç«¯å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†ï¼Œjavaç«¯ç§é’¥åŠ å¯†å…¬é’¥è§£å¯†éƒ½å®¹æ˜“åšåˆ°ï¼ŒiOSä¸èƒ½ç§é’¥åŠ å¯†å…¬é’¥è§£å¯†ï¼Œåªèƒ½ç”¨äºéªŒç­¾@endcode HTTPSåŸºæœ¬ä½¿ç”¨ httpsç®€å•è¯´æ˜ HTTPSï¼ˆå…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼‰ï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚ åœ¨HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚ å®ƒæ˜¯ä¸€ä¸ªURI schemeï¼ˆæŠ½è±¡æ ‡è¯†ç¬¦ä½“ç³»ï¼‰ï¼Œå¥æ³•ç±»åŒhttp:ä½“ç³»ã€‚ç”¨äºå®‰å…¨çš„HTTPæ•°æ®ä¼ è¾“ã€‚ HTTPSï¼šURLè¡¨æ˜å®ƒä½¿ç”¨äº†HTTPï¼Œä½†HTTPSå­˜åœ¨ä¸åŒäºHTTPçš„é»˜è®¤ç«¯å£åŠä¸€ä¸ªåŠ å¯†/èº«ä»½éªŒè¯å±‚ï¼ˆåœ¨HTTPä¸TCPä¹‹é—´ï¼‰ã€‚ æ³¨æ„ HTTPSçš„ä¸»è¦æ€æƒ³æ˜¯åœ¨ä¸å®‰å…¨çš„ç½‘ç»œä¸Šåˆ›å»ºä¸€å®‰å…¨ä¿¡é“ï¼Œå¹¶å¯åœ¨ä½¿ç”¨é€‚å½“çš„åŠ å¯†åŒ…å’ŒæœåŠ¡å™¨è¯ä¹¦å¯è¢«éªŒè¯ä¸”å¯è¢«ä¿¡ä»»æ—¶ï¼Œå¯¹çªƒå¬å’Œä¸­é—´äººæ”»å‡»æä¾›åˆç†çš„ä¿æŠ¤ã€‚ HTTPSçš„ä¿¡ä»»ç»§æ‰¿åŸºäºé¢„å…ˆå®‰è£…åœ¨æµè§ˆå™¨ä¸­çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆå¦‚VeriSignã€Microsoftç­‰ï¼‰ï¼ˆæ„å³â€œæˆ‘ä¿¡ä»»è¯ä¹¦é¢å‘æœºæ„å‘Šè¯‰æˆ‘åº”è¯¥ä¿¡ä»»çš„â€ï¼‰ã€‚ å› æ­¤ï¼Œä¸€ä¸ªåˆ°æŸç½‘ç«™çš„HTTPSè¿æ¥å¯è¢«ä¿¡ä»»ï¼Œå¦‚æœæœåŠ¡å™¨æ­å»ºè‡ªå·±çš„https ä¹Ÿå°±æ˜¯è¯´é‡‡ç”¨è‡ªè®¤è¯çš„æ–¹å¼æ¥å»ºç«‹httpsä¿¡é“ï¼Œè¿™æ ·ä¸€èˆ¬åœ¨å®¢æˆ·ç«¯æ˜¯ä¸è¢«ä¿¡ä»»çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨æµè§ˆå™¨è®¿é—®ä¸€äº›httpsç«™ç‚¹çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªæç¤ºï¼Œé—®ä½ æ˜¯å¦ç»§ç»­ã€‚ HTTPSå’ŒHTTPåŒºåˆ« httpsåè®®éœ€è¦åˆ°caç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹ã€‚ httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttps åˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚ httpå’Œhttpsä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼Œåè€…æ˜¯443ã€‚ httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚ å®ç°ä»£ç  æ–¹æ¡ˆä¸€ï¼šå¦‚æœæ˜¯è‡ªå·±ä½¿ç”¨NSURLSessionæ¥å°è£…ç½‘ç»œè¯·æ±‚123456789101112131415161718192021222324252627282930313233// 1.åˆ›å»ºsessionNSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];// 2.åˆ›å»ºTaskNSURLSessionDataTask *dataTask = [session dataTaskWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"https://kyfw.12306.cn/otn"]] completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; // 3.è§£ææ•°æ® NSLog(@"%@---%@",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],error);&#125;];// 4.æ‰§è¡Œtask[dataTask resume];#pragma mark - éµå®ˆ&lt;NSURLSessionDataDelegate&gt;// å¦‚æœå‘é€çš„è¯·æ±‚æ˜¯httpsçš„,é‚£ä¹ˆæ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³•-(void)URLSession:(NSURLSession *)session didReceiveChallenge:(NSURLAuthenticationChallenge *)challenge completionHandler:(void (^)(NSURLSessionAuthChallengeDisposition, NSURLCredential * _Nullable))completionHandler &#123; /** åˆ¤æ–­æœåŠ¡å™¨ä¼ ç»™æˆ‘ä»¬çš„ä¿¡ä»»çš„ç±»å‹ï¼Œåªæœ‰æ˜¯ã€æœåŠ¡å™¨ä¿¡ä»»çš„æ—¶å€™ï¼Œæ‰å®‰è£…è¯ä¹¦ã€‘ NSURLSessionAuthChallengeDisposition å¦‚ä½•å¤„ç†è¯ä¹¦ NSURLAuthenticationMethodServerTrust æœåŠ¡å™¨ä¿¡ä»» */ if(![challenge.protectionSpace.authenticationMethod isEqualToString:@"NSURLAuthenticationMethodServerTrust"]) &#123; return; &#125; NSLog(@"%@",challenge.protectionSpace); /* NSURLCredential æˆæƒä¿¡æ¯ NSURLSessionAuthChallengeUseCredential = 0, ä½¿ç”¨è¯¥è¯ä¹¦ å®‰è£…è¯¥è¯ä¹¦ NSURLSessionAuthChallengePerformDefaultHandling = 1, é»˜è®¤é‡‡ç”¨çš„æ–¹å¼,è¯¥è¯ä¹¦è¢«å¿½ç•¥ NSURLSessionAuthChallengeCancelAuthenticationChallenge = 2, å–æ¶ˆè¯·æ±‚,è¯ä¹¦å¿½ç•¥ NSURLSessionAuthChallengeRejectProtectionSpace = 3, æ‹’ç» */ NSURLCredential *credential = [[NSURLCredential alloc]initWithTrust:challenge.protectionSpace.serverTrust]; completionHandler(NSURLSessionAuthChallengeUseCredential,credential); // æ³¨æ„ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„httpsçš„è¯·æ±‚éƒ½éœ€è¦å®‰è£…è¯ä¹¦(æˆæƒ)çš„ï¼Œè¯·æ±‚ä¸€äº›å¤§å‹çš„ç½‘ç«™æœ‰çš„æ˜¯å¼ºåˆ¶å®‰è£…çš„ï¼Œå¦‚ï¼šè‹¹æœå®˜ç½‘https://www.apple.com&#125; æ–¹æ¡ˆäºŒï¼šå¦‚æœä½¿ç”¨AFNç½‘ç»œè¯·æ±‚123456789101112131415161718AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];// æ›´æ”¹è§£ææ–¹å¼ï¼ˆè¯·æ±‚ç½‘é¡µæºç åº”ä½¿ç”¨åŸå§‹è§£æï¼‰manager.responseSerializer = [AFHTTPResponseSerializer serializer];// è®¾ç½®å¯¹è¯ä¹¦çš„å¤„ç†æ–¹å¼// å…è®¸è‡ªç­¾åè¯ä¹¦ï¼Œå¿…é¡»çš„manager.securityPolicy.allowInvalidCertificates = YES;// æ˜¯å¦éªŒè¯åŸŸåçš„CNå­—æ®µï¼ˆä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯å¦‚æœå†™YESï¼Œåˆ™å¿…é¡»å¯¼å…¥è¯ä¹¦ï¼‰manager.securityPolicy.validatesDomainName = NO;[manager GET:@"https://kyfw.12306.cn/otn" parameters:nil progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; NSLog(@"success---%@",[[NSString alloc]initWithData:responseObject encoding:NSUTF8StringEncoding]);&#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; NSLog(@"error---%@",error);&#125;]; è¡¥å……ATSï¼ˆå…¨ç§°:App Transport Securityï¼‰ iOS9ä¸­æ–°å¢App Transport Securityï¼ˆç®€ç§°ATSï¼‰ç‰¹æ€§, è®©åŸæ¥è¯·æ±‚æ—¶å€™ç”¨åˆ°çš„HTTPï¼Œå…¨éƒ¨éƒ½è½¬å‘TLS1.2åè®®è¿›è¡Œä¼ è¾“ã€‚ è¿™æ„å‘³ç€æ‰€æœ‰çš„HTTPåè®®éƒ½å¼ºåˆ¶ä½¿ç”¨äº†HTTPSåè®®è¿›è¡Œä¼ è¾“ã€‚ å¦‚æœæˆ‘ä»¬åœ¨iOS9ä¸‹ç›´æ¥è¿›è¡ŒHTTPè¯·æ±‚æ˜¯ä¼šæŠ¥é”™ã€‚ç³»ç»Ÿä¼šå‘Šè¯‰æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨HTTPè¿›è¡Œè¯·æ±‚ï¼Œéœ€è¦åœ¨Info.plistä¸­æ§åˆ¶ATSçš„é…ç½®ã€‚ â€œNSAppTransportSecurityâ€æ˜¯ATSé…ç½®çš„æ ¹èŠ‚ç‚¹ï¼Œé…ç½®äº†èŠ‚ç‚¹è¡¨ç¤ºå‘Šè¯‰ç³»ç»Ÿè¦èµ°è‡ªå®šä¹‰çš„ATSè®¾ç½®ã€‚ â€œNSAllowsAritraryLoadsâ€èŠ‚ç‚¹æ§åˆ¶æ˜¯å¦ç¦ç”¨ATSç‰¹æ€§ï¼Œè®¾ç½®YESå°±æ˜¯ç¦ç”¨ATSåŠŸèƒ½; é‡‡ç”¨è§£å†³æ–¹æ³•ï¼Œä¿®æ”¹é…ç½®ä¿¡æ¯ã€‚ ã€å­¦ä¹ æœ¬æ–‡ä¹‹å¤–å¯ä»¥å‚è€ƒã€‘ç½‘ç»œå®‰å…¨â€”â€”æ•°æ®çš„åŠ å¯†ä¸ç­¾å,RSAä»‹ç»å…³äºHttpså®‰å…¨æ€§é—®é¢˜ã€åŒå‘éªŒè¯é˜²æ­¢ä¸­é—´äººæ”»å‡»é—®é¢˜ é™„ä¸Šä¸€å¼ å›¾ï¼š é™„ä¸Šæ€»ç»“å†™çš„å°æ · Demoï¼Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç° ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ•°æ®å®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å¸¸ç”¨ç»˜å›¾â€”ã€ŒdrawRectç»˜åˆ¶çŸ©å½¢ã€]]></title>
    <url>%2FiOSNET%2FdrawRect.html</url>
    <content type="text"><![CDATA[Write in the first å…³äºç»˜å›¾ï¼Œå…¶å®åœ¨æˆ‘å½“å‰æ¥è§¦çš„é¡¹ç›®ä¸­ç”¨å¾—å¾ˆå°‘ï¼Œä½†æ˜¯ä»¥åè‚¯å®šä¼šæ¥è§¦åˆ°ã€‚åƒè¿™ç§ä¸å¸¸ç”¨ä½†æ¯”è¾ƒé‡è¦çš„å†…å®¹ï¼Œæˆ‘è§‰å¾—è¦åšåˆ°åˆæ­¥ç†è§£ï¼Œç„¶åæ¢³ç†æ€»ç»“ï¼Œåˆ°æœ€åå¤¯å®åŸºç¡€ã€æ´»å­¦æ´»ç”¨ã€‚æ‰€ä»¥å†™è¿™ç¯‡æ–‡ç« ã€‚ iOS ç³»ç»Ÿæœ¬èº«æä¾›äº†ä¸¤å¤§ç»˜å›¾çš„æ¡†æ¶ï¼Œå³ UIKit å’Œ Core Graphicsã€‚UIKitï¼šåƒ UIImageï¼ˆç»˜åˆ¶å›¾åƒï¼‰ã€NSStringï¼ˆç»˜åˆ¶æ–‡æœ¬ï¼‰ã€UIBezierPathï¼ˆç»˜åˆ¶å½¢çŠ¶ï¼‰ã€UIColorã€‚ è¿™äº›ç±»æä¾›äº†åŠŸèƒ½æœ‰é™ä½†ä½¿ç”¨æ–¹ä¾¿çš„æ–¹æ³•æ¥è®©æˆ‘ä»¬å®Œæˆç»˜å›¾ä»»åŠ¡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒUIKitå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ Core Graphicsï¼šCoreGraphicsä¹Ÿç§°ä¸ºQuartz 2D æ˜¯UIKitä¸‹çš„ä¸»è¦ç»˜å›¾ç³»ç»Ÿï¼Œé¢‘ç¹çš„ç”¨äºç»˜åˆ¶è‡ªå®šä¹‰è§†å›¾ã€‚Core Graphicsæ˜¯é«˜åº¦é›†æˆäºUIViewå’Œå…¶ä»–UIKitéƒ¨åˆ†çš„ã€‚Core Graphicsæ•°æ®ç»“æ„å’Œå‡½æ•°å¯ä»¥é€šè¿‡å‰ç¼€CGæ¥è¯†åˆ«ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€iOSç»˜å›¾ drawRectã€‘å­¦ä¹ æ€»ç»“ï¼Œåœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š ç»˜å›¾åŸºæœ¬æ¦‚å¿µ æˆ‘æ˜¯Core Graphicsç»˜å›¾ UIBezierPathç»˜å›¾æ¦‚å¿µ æˆ‘æ˜¯UIKit ä¹‹ UIBezierPathç»˜å›¾ æœŸå¾… &amp; åç»­ ç»˜å›¾åŸºæœ¬æ¦‚å¿µåœ¨å­¦ä¹ ç»˜å›¾ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å‡ ä¸ªåŸºæœ¬çš„æ¦‚å¿µ å±æ€§ æè¿° drawRect:(CGRect)rect ä½œç”¨ï¼šä¸“é—¨ç”¨æ¥ç»˜å›¾ ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šå½“Viewæ˜¾ç¤ºçš„æ—¶å€™è°ƒç”¨(ViewWillAppearå’ŒViewDidAppearä¹‹é—´) å‚æ•°rectï¼šå½“Viewçš„boundsï¼ŒNote: åœ¨drawRectæ–¹æ³•å½“ä¸­ç³»ç»Ÿå·²ç»å¸®ä½ åˆ›å»ºä¸€ä¸ªè·ŸViewç›¸å…³è”çš„ä¸Šä¸‹æ–‡(Layerä¸Šä¸‹æ–‡),åªè¦è·å–ä¸Šä¸‹æ–‡å°±å¯ä»¥äº† ä»€ä¹ˆæ“ä½œè°ƒç”¨ï¼š1ã€å¦‚æœåœ¨UIViewåˆå§‹åŒ–æ—¶æ²¡æœ‰è®¾ç½®rectå¤§å°ï¼Œå°†ç›´æ¥å¯¼è‡´drawRectä¸è¢«è‡ªåŠ¨è°ƒç”¨ã€‚2ã€è¯¥æ–¹æ³•åœ¨è°ƒç”¨sizeThatFitsåè¢«è°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥å…ˆè°ƒç”¨sizeToFitè®¡ç®—å‡ºsizeã€‚ç„¶åç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨drawRect:æ–¹æ³•ã€‚3ã€é€šè¿‡è®¾ç½®contentModeå±æ€§å€¼ä¸ºUIViewContentModeRedrawã€‚é‚£ä¹ˆå°†åœ¨æ¯æ¬¡è®¾ç½®æˆ–æ›´æ”¹frameçš„æ—¶å€™è‡ªåŠ¨è°ƒç”¨drawRect:ã€‚4ã€ç›´æ¥è°ƒç”¨setNeedsDisplayï¼Œæˆ–è€…setNeedsDisplayInRect:è§¦å‘drawRect:ï¼Œä½†æ˜¯æœ‰ä¸ªå‰ææ¡ä»¶æ˜¯rectä¸èƒ½ä¸º0ã€‚ Context å®šä¹‰ï¼šå›¾å½¢ä¸Šä¸‹æ–‡ï¼Œæ˜¯ä¸€ä¸ªCGContextRefç±»å‹çš„æ•°æ®ï¼Œä½ å¯ä»¥å°†å›¾å½¢ä¸Šä¸‹æ–‡ç†è§£ä¸ºä¸€å—ç”»å¸ƒ ä½œç”¨ï¼š1ã€ä¿å­˜ç»˜å›¾ä¿¡æ¯ï¼Œç»˜å›¾çŠ¶æ€ï¼›2ã€å†³å®šç»˜åˆ¶çš„è¾“å‡ºç›®æ ‡ï¼ˆç»˜åˆ¶åˆ°ä»€ä¹ˆåœ°æ–¹å»ï¼Ÿ// è¾“å‡ºç›®æ ‡å¯ä»¥æ˜¯PDFæ–‡ä»¶ã€Bitmapæˆ–è€…æ˜¾ç¤ºå™¨çš„çª—å£ä¸Šï¼‰3ã€ç›¸åŒçš„ä¸€å¥—ç»˜å›¾åºåˆ—ï¼ŒæŒ‡å®šä¸åŒçš„ Graphics Context,å°±å¯å°†ç›¸åŒçš„å›¾åƒç»˜åˆ¶åˆ°ä¸åŒçš„ç›®æ ‡ä¸Š path è·¯å¾„ï¼Œiosç»˜å›¾å¯ä»¥æƒ³è±¡ä¸ºä½ æ‹¿ç€ä¸€æ”¯ç¬”å»ç”»å›¾ï¼Œç”»å‡ æ¡çº¿æˆ–å‡ ä¸ªç‚¹ä»è€Œå½¢æˆä¸€ä¸ªè·¯å¾„ï¼Œä¹‹åå¯ä»¥åˆ©ç”¨ç†è§£å»å¡«è‰²æˆ–è€…æè¾¹ strokeã€fill æè¾¹å’Œå¡«å……ï¼Œæ¯ä¸ªè·¯å¾„éƒ½éœ€è¦å¡«å……æˆ–è€…æè¾¹åæ‰èƒ½åœ¨è§†å›¾ä¸­çœ‹è§ï¼Œä»–ä»¬éƒ½å„è‡ªæœ‰å¾ˆå¤šæ ·å¼å¯ä»¥è®¾ç½®ï¼Œå¸¸è§çš„æœ‰é¢œè‰²ã€ç²—ç»†ã€æ¸å˜ï¼Œè¿æ¥æ ·å¼ç­‰ç­‰ã€‚ äº†è§£å®Œä¸Šé¢çš„å‡ ä¸ªæ¦‚å¿µä¹‹åï¼Œæˆ‘æƒ³ æˆ‘ä»¬å…ˆä¸ç€æ€¥å†™çš„ï¼Œé¦–å…ˆä½ çš„çŸ¥é“ä½ æƒ³å®ç°ä»€ä¹ˆæ•ˆæœç”¨åˆ°ä»€ä¹ˆå±æ€§å€¼ï¼ŒåŠå¯¹å±æ€§å€¼æ„æ€çš„ç†è§£ã€‚ç„¶åå†ç»“åˆä¸‹é¢çš„ä»£ç  å°±æ›´å®¹æ˜“ç†è§£å’Œå¸æ”¶äº† Core Graphicsç»˜å›¾å±æ€§ æè¿° UIGraphicsGetCurrentContext() è·å–ä¸Šä¸‹æ–‡ CGContextMoveToPoint(ctx, x, y) è®¾ç½®èµ·å§‹ç‚¹ CGContextAddLineToPoint(ctx, x, y) æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ CGContextAddLines(ctx, points, count) æ·»åŠ çº¿(ç‚¹ä¹‹é—´) å‚æ•°ï¼špointsç‚¹æ•°ç»„ï¼Œcountæ•°ç»„ä¸ªæ•° CGContextAddEllipseInRect(ctx, CGRect rect) ç”»æ¤­åœ†ï¼Œå¦‚æœé•¿å®½ç›¸ç­‰å°±æ˜¯åœ† CGContextAddRect(ctx, CGRect rect) ç”»çŸ©å½¢ï¼Œé•¿å®½ç›¸ç­‰å°±æ˜¯æ­£æ–¹å½¢ [image drawInRect:CGRect rect] ç”»å›¾ç‰‡ [@â€hello worldâ€ drawInRect:CGRect rect withAttributes:NSDictionary *dict] ç”»æ–‡å­— (å±æ€§å€¼ï¼šNSFontAttributeNameå­—ä½“å¤§å°ã€NSForegroundColorAttributeNameå­—ä½“é¢œè‰²) CGContextAddArc(ctx, CGFloat x, CGFloat y, CGFloat radius, CGFloat startAngle, CGFloat endAngle, int clockwise) ç”»åœ† å‚æ•°ï¼šåœ†å¿ƒçš„xåæ ‡ï¼Œåœ†å¿ƒçš„yåæ ‡ï¼Œåœ†çš„åŠå¾„ï¼Œå¼€å§‹å¼§åº¦ï¼Œç»“æŸå¼§åº¦ï¼Œ0è¡¨ç¤ºé¡ºæ—¶é’ˆ 1è¡¨ç¤ºé€†æ—¶é’ˆ CGContextAddQuadCurveToPoint(ctx, CGFloat cpx, CGFloat cpy, CGFloat x, CGFloat y); äºŒæ¬¡æ›²çº¿å‡½æ•° å‚æ•°ï¼šæ§åˆ¶ç‚¹ xåæ ‡ï¼Œæ§åˆ¶ç‚¹ yåæ ‡ï¼Œç»ˆç‚¹ xåæ ‡ï¼Œç»ˆç‚¹ yåæ ‡ Note:è¿™é‡Œä½¿ç”¨å¿…é¡»è¦è®¾ç½®èµ·ç‚¹MoveToPoin CGContextAddCurveToPoint(ctx, CGFloat cp1x, CGFloat cp1y, CGFloat cp2x, CGFloat cp2y, CGFloat x, CGFloat y) ä¸‰æ¬¡æ›²çº¿å‡½æ•° å‚æ•°ï¼šæ§åˆ¶ç‚¹1 x yåæ ‡ï¼Œæ§åˆ¶ç‚¹2 x yåæ ‡ï¼Œç»ˆç‚¹ xåæ ‡ï¼Œç»ˆç‚¹ yåæ ‡ Note:è¿™é‡Œä½¿ç”¨å¿…é¡»è¦è®¾ç½®èµ·ç‚¹MoveToPoin CGContextStrokePath(ctx) æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆStrokeæè¾¹,ç©ºå¿ƒï¼‰ CGContextFillPath(ctx) æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆFillå¡«å……,å®å¿ƒï¼‰ CGContextDrawPath(ctx, CGPathDrawingMode mode) æ¸²æŸ“ä¸Šä¸‹æ–‡ modeï¼š1ã€kCGPathFill åªæœ‰å¡«å……ï¼ˆéé›¶ç¼ ç»•æ•°å¡«å……ï¼‰ï¼Œä¸ç»˜åˆ¶è¾¹æ¡† 2ã€kCGPathEOFill å¥‡å¶è§„åˆ™å¡«å……ï¼ˆå¤šæ¡è·¯å¾„äº¤å‰æ—¶ï¼Œå¥‡æ•°äº¤å‰å¡«å……ï¼Œå¶äº¤å‰ä¸å¡«å……ï¼‰3ã€kCGPathStroke åªæœ‰è¾¹æ¡† 4ã€kCGPathFillStroke æ—¢æœ‰è¾¹æ¡†åˆæœ‰å¡«å…… 5ã€kCGPathEOFillStroke å¥‡å¶å¡«å……å¹¶ç»˜åˆ¶è¾¹æ¡† å…¶ä»–å±æ€§è®¾ç½® CGContextSetStrokeColorWithColor(ctx, Color) è®¾ç½®çº¿é¢œè‰² CGContextSetFillColorWithColor(ctx, Color) è®¾ç½®å¡«å……è‰² CGContextSetLineWidth(ctx, CGFloat width); è®¾ç½®çº¿å®½åº¦ CGContextSetLineJoin(ctx, CGLineJoin join) è®¾ç½®è¿æ¥æ ·å¼ï¼ˆkCGLineJoinMiterå°–çš„ã€æ–œæ¥, Roundåœ†, Bevelæ–œé¢ï¼‰ CGContextSetLineCap(ctx, CGLineCap cap) è®¾ç½®é¡¶è§’æ ·å¼ï¼ˆkCGLineCapButt, Round, Squareï¼‰ CGContextSetLineDash(ctx, CGFloat phase, lengths, count) è®¾ç½®è™šçº¿æ ·å¼ï¼ˆå‚æ•°ï¼šphaseè™šçº¿ä»é‚£å¼€å§‹ç»˜åˆ¶ï¼›lengths Cè¯­è¨€çš„æ•°ç»„,ä¸¾ä¸ªä¾‹å­: å£°æ˜ä¸€ä¸ªæ•°ç»„ CGFloat dash[] = @{3.0, 1.0}æ„æ€å°±æ˜¯é•¿åº¦ä¸º3.0 é—´éš™é•¿åº¦ä¸º1.0,ä»¥æ­¤ç±»æ¨ï¼›count lengthsæ•°ç»„çš„ä¸ªæ•°ï¼‰ ç¤ºä¾‹ä»£ç ï¼šè‡ªå®šä¹‰Viewçš„æ­¥éª¤æ–°å»ºä¸€ä¸ªç±»,ç»§æ‰¿UIViewå®ç°- (void)drawRect:(CGRect)rectæ–¹æ³• æˆ‘æ˜¯Core Graphicsç»˜å›¾ 1ã€è·å–ä¸Šä¸‹æ–‡2ã€ç»˜åˆ¶è·¯å¾„3ã€æ·»åŠ è·¯å¾„åˆ°ä¸Šä¸‹æ–‡4ã€æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆæè¾¹æˆ–å¡«å……ï¼‰ 12345678910111213141516171819202122232425262728293031323334- (void)drawRect:(CGRect)rect &#123;//------------------æˆ‘æ˜¯Core Graphicsç»˜å›¾------------- // è·å–ctx CGContextRef ctx = UIGraphicsGetCurrentContext(); // è®¾ç½®ç»˜å›¾çš„å…¶ä»–å±æ€§ // è®¾ç½®çº¿é¢œè‰² CGContextSetStrokeColorWithColor(ctx, [UIColor blackColor].CGColor); // è®¾ç½®çº¿å®½åº¦ CGContextSetLineWidth(ctx, 5); // è®¾ç½®çº¿é¢œè‰² [[UIColor redColor] set]; // è®¾ç½®å¡«å……è‰² CGContextSetFillColorWithColor(ctx, [UIColor purpleColor].CGColor); // è®¾ç½®è¿æ¥æ ·å¼ï¼ˆMiterå°–çš„ã€æ–œæ¥, Roundåœ†, Bevelæ–œé¢ï¼‰ CGContextSetLineJoin(ctx, kCGLineJoinRound); // è®¾ç½®é¡¶è§’æ ·å¼ï¼ˆButt, Round, Squareï¼‰ CGContextSetLineCap(ctx, kCGLineCapRound); // è®¾ç½®è™šçº¿æ ·å¼ CGFloat lengths[] = &#123; 20, 5 &#125;; CGContextSetLineDash(ctx, 0, lengths, 2); // ç”»çº¿ [self drawLine:ctx]; // ç”»çŸ©å½¢,ç”»æ¤­åœ†ï¼Œå¤šè¾¹å½¢ [self drawSharp:ctx]; // ç”»å›¾ç‰‡ [self drawPicture:ctx]; // ç”»æ–‡å­— [self drawText:ctx]; // ç”»åœ†ã€ç”»å¼§ [self drawCircle:ctx];&#125; PS.ç¬¬ä¸€ä¸ªæ–¹æ³•å†™çš„æ¯”è¾ƒè¯¦ç»†ï¼Œå†™äº†ä½¿ç”¨ç›´æ¥ç”»çº¿çš„æ–¹å¼ å’Œ pathçš„æ–¹å¼ã€‚æ¨èä½¿ç”¨pathçš„æ–¹å¼ç”»çº¿ã€‚ å¦å¤–ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•ä¹Ÿå†™äº†ç§»åŠ¨ç¬”è§¦ç”»çº¿å’Œç”¨ç‚¹é›†åˆç”»çº¿ã€‚åé¢æ–¹æ³•åªä¼šæ¶‰åŠå…¶ä¸­ä¸€ç§ï¼Œå› ä¸ºæ–¹æ³•éƒ½æ¯”è¾ƒç±»ä¼¼ ç”»çº¿12345678910111213141516171819202122232425262728293031323334// ç”»çº¿-(void)drawLine:(CGContextRef)ctx&#123; // ç”»ä¸€æ¡ç®€å•çš„çº¿ CGPoint points1[] = &#123;CGPointMake(10, 80),CGPointMake(300, 80)&#125;; CGContextAddLines(ctx,points1, 2); // ç”»çº¿æ–¹æ³•ä¸€ï¼šä½¿ç”¨CGContextAddLineToPointç”»çº¿ï¼Œéœ€è¦å…ˆè®¾ç½®ä¸€ä¸ªèµ·å§‹ç‚¹ // è®¾ç½®èµ·å§‹ç‚¹ CGContextMoveToPoint(ctx, 10, 100); // æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ CGContextAddLineToPoint(ctx, 100,120); // å†æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ï¼Œå˜æˆæŠ˜çº¿ CGContextAddLineToPoint(ctx, 150, 100); // ç”»çº¿æ–¹æ³•äºŒï¼š // æ„é€ çº¿è·¯å¾„çš„ç‚¹æ•°ç»„ CGPoint points2[] = &#123;CGPointMake(10, 130),CGPointMake(10, 160),CGPointMake(130, 200)&#125;; CGContextAddLines(ctx,points2, 3); // åˆ©ç”¨è·¯å¾„å»ç”»ä¸€ç»„ç‚¹ï¼ˆæ¨èä½¿ç”¨è·¯å¾„çš„æ–¹å¼ï¼Œè™½ç„¶å¤šäº†å‡ è¡Œä»£ç ï¼Œä½†æ˜¯é€»è¾‘æ›´æ¸…æ™°äº†ï¼‰ // ç¬¬ä¸€ä¸ªè·¯å¾„ CGMutablePathRef path1 = CGPathCreateMutable(); CGPathMoveToPoint(path1, &amp;CGAffineTransformIdentity, 0, 200); //CGAffineTransformIdentity ç±»ä¼¼äºåˆå§‹åŒ–ä¸€äº›å‚æ•° CGPathAddLineToPoint(path1, &amp;CGAffineTransformIdentity, 100, 250); CGPathAddLineToPoint(path1, &amp;CGAffineTransformIdentity, 310, 210); //è·¯å¾„1åŠ å…¥context CGContextAddPath(ctx, path1); // pathåŒæ ·æœ‰æ–¹æ³•CGPathAddLines(),å’ŒCGContextAddLines() // æ¸²æŸ“ä¸Šä¸‹æ–‡ CGContextStrokePath(ctx);&#125; ç”»çŸ©å½¢,ç”»æ¤­åœ†ï¼Œå¤šè¾¹å½¢1234567891011121314151617181920// ç”»çŸ©å½¢,ç”»æ¤­åœ†ï¼Œå¤šè¾¹å½¢-(void)drawSharp:(CGContextRef)ctx&#123; CGContextSetFillColorWithColor(ctx, [UIColor redColor].CGColor); // ç”»æ¤­åœ†,å¦‚æœé•¿å®½ç›¸ç­‰å°±æ˜¯åœ† CGContextAddEllipseInRect(ctx, CGRectMake(0, 250, 50, 50)); // ç”»çŸ©å½¢,é•¿å®½ç›¸ç­‰å°±æ˜¯æ­£æ–¹å½¢ CGContextAddRect(ctx, CGRectMake(70, 250, 50, 50)); // ç”»å¤šè¾¹å½¢ï¼Œå¤šè¾¹å½¢æ˜¯é€šè¿‡pathå®Œæˆçš„ CGMutablePathRef path = CGPathCreateMutable(); CGPathMoveToPoint(path, &amp;CGAffineTransformIdentity, 120, 250); CGPathAddLineToPoint(path, &amp;CGAffineTransformIdentity, 200, 250); CGPathAddLineToPoint(path, &amp;CGAffineTransformIdentity, 180, 300); CGPathCloseSubpath(path); CGContextAddPath(ctx, path); // å¡«å…… CGContextFillPath(ctx);&#125; ç”»å›¾ç‰‡ã€ç”»æ–‡å­—123456789101112131415// ç”»å›¾ç‰‡-(void)drawPicture:(CGContextRef)context&#123; UIImage *image = [UIImage imageNamed:@&quot;é˜¿ç‹¸å¤´åƒ&quot;]; [image drawInRect:CGRectMake(10, 300, 100, 100)]; //CGContextDrawImage(ctx, rect, image.CGImage);&#125;// ç”»æ–‡å­—-(void)drawText:(CGContextRef)ctx&#123; NSDictionary *dict = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:18], NSForegroundColorAttributeName:[UIColor redColor]&#125;; [@&quot;hello world&quot; drawInRect:CGRectMake(120 , 350, 500, 50) withAttributes:dict];&#125; ç”»åœ†ã€åœ†å¼§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// ç”»åœ†ã€åœ†å¼§-(void)drawCircle:(CGContextRef)ctx&#123; CGContextSetStrokeColorWithColor(ctx, [UIColor purpleColor].CGColor); /** ç»˜åˆ¶è·¯å¾„æ–¹æ³•ä¸€: CGContextRef c,// ä¸Šä¸‹æ–‡ CGFloat x, // åœ†å¿ƒçš„xåæ ‡ CGFloat y, // åœ†å¿ƒçš„yåæ ‡ CGFloat radius, // åœ†çš„åŠå¾„ CGFloat startAngle, // å¼€å§‹å¼§åº¦ CGFloat endAngle, // ç»“æŸå¼§åº¦ int clockwise // 0è¡¨ç¤ºé¡ºæ—¶é’ˆï¼Œ1è¡¨ç¤ºé€†æ—¶é’ˆ */ // åœ† CGContextAddArc (ctx, 100, 100, 50, 0, M_PI* 2 , 0); CGContextFillPath(ctx); // åŠåœ† CGContextAddArc (ctx, 100, 200, 50, 0, M_PI, 0); CGContextStrokePath(ctx); /** ä¸‰æ¬¡æ›²çº¿å‡½æ•° CGContextRef c, CGFloat cp1x, // æ§åˆ¶ç‚¹1 xåæ ‡ CGFloat cp1y, // æ§åˆ¶ç‚¹1 yåæ ‡ CGFloat cp2x, // æ§åˆ¶ç‚¹2 xåæ ‡ CGFloat cp2y, // æ§åˆ¶ç‚¹2 yåæ ‡ CGFloat x, // ç›´çº¿çš„ç»ˆç‚¹ xåæ ‡ CGFloat y // ç›´çº¿çš„ç»ˆç‚¹ yåæ ‡ */ CGContextMoveToPoint(ctx, 200, 200); CGContextAddCurveToPoint(ctx, 200, 0, 300, 200, 400, 100); CGContextStrokePath(ctx); /** äºŒæ¬¡æ›²çº¿å‡½æ•° CGContextRef c, CGFloat cpx, //æ§åˆ¶ç‚¹ xåæ ‡ CGFloat cpy, //æ§åˆ¶ç‚¹ yåæ ‡ CGFloat x, //ç›´çº¿çš„ç»ˆç‚¹ xåæ ‡ CGFloat y //ç›´çº¿çš„ç»ˆç‚¹ yåæ ‡ */ CGContextMoveToPoint(ctx, 100, 100); CGContextAddQuadCurveToPoint(ctx, 200, 0, 300, 150); CGContextStrokePath(ctx);&#125; Core Graphicsç»˜å›¾æ•ˆæœï¼š UIBezierPathç»˜å›¾æ¦‚å¿µ åŒæ ·ï¼Œé¦–å…ˆä½ çš„çŸ¥é“ä½ æƒ³å®ç°ä»€ä¹ˆæ•ˆæœç”¨åˆ°ä»€ä¹ˆå±æ€§å€¼ï¼ŒåŠå¯¹å±æ€§å€¼æ„æ€çš„ç†è§£ã€‚ç„¶åå†ç»“åˆä¸‹é¢çš„ä»£ç  å°±æ›´å®¹æ˜“ç†è§£å’Œå¸æ”¶äº† UIKit ä¹‹ UIBezierPathç»˜å›¾å±æ€§ æè¿° [UIBezierPath bezierPath] åˆ›å»ºè·¯å¾„ moveToPoint:(CGPoint) è®¾ç½®èµ·ç‚¹ addLineToPoint:(CGPoint) æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ [[UIColor redColor] set] è®¾ç½®çº¿é¢œè‰²ï¼ˆæ³¨æ„:å¦‚æœä½¿ç”¨ setStroke å’Œ setFill ä¸æ¸²æŸ“æ–¹å¼è¦ç›¸å¯¹åº”ï¼‰ addQuadCurveToPoint:(CGPoint) controlPoint:(CGPoint) ç”»æ›²çº¿(controlPoint:å¼¯æ›²æ–¹å‘ç‚¹) bezierPathWithRect:(CGRect) ç”»çŸ©å½¢ bezierPathWithRoundedRect:(CGRect) cornerRadius:(CGFloat) ç”»åœ†è§’çŸ©å½¢ bezierPathWithOvalInRect:(CGRect) ç”»åœ†(Width = Height)ã€ç”»æ¤­åœ†(Width != Height) bezierPathWithArcCenter:(CGPoint) radius:(CGFloat) startAngle:(CGFloat) endAngle:(CGFloat) clockwise:(BOOL) Center:å¼§æ‰€åœ¨çš„åœ†å¿ƒ(è¿™é‡Œä¸èƒ½ç›´æ¥ç”¨self.center,å› ä¸ºå®ƒæ˜¯ç›¸å¯¹äºå®ƒçš„çˆ¶æ§ä»¶çš„,é‡‡ç”¨rect å®½åº¦0.5ã€é«˜åº¦0.5)ï¼Œradius:åœ†çš„åŠå¾„ï¼ŒstartAngle:å¼€å§‹è§’åº¦ï¼Œ endAngle:ç»“æŸè§’åº¦ï¼Œclockwise:YESé¡ºæ—¶é’ˆ NOé€†æ—¶é’ˆ bezierPathWithArcCenter:(CGPoint) radius:(CGFloat) startAngle:(CGFloat) endAngle:(CGFloat) clockwise:(BOOL) [path addLineToPoint:center]; æ³¨ï¼š1ã€[path closePath] ä»è·¯å¾„ç»ˆç‚¹è¿æ¥ä¸€æ ¹çº¿åˆ°è·¯å¾„çš„èµ·ç‚¹ï¼Œ2ã€[path fill] å¡«å……ä¹‹å‰,ä¼šè‡ªåŠ¨å…³é—­è·¯å¾„ UIGraphicsBeginImageContextWithOptions å¼€å¯ä¸Šä¸‹æ–‡ï¼ˆsize:ä¸Šä¸‹æ–‡å¤§å°, opaque:é€æ˜åº¦(YESé€æ˜,NOä¸é€æ˜), scale:å›¾ç‰‡è´¨é‡ï¼Œä¸€èˆ¬ä¸º0å’Œå½“å‰è®¾å¤‡çš„åˆ†è¾¨ç‡ä¸€æ ·) drawAtPoint:(CGPoint) å›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ addClip è®¾ç½®æˆè£å‰ªåŒºåŸŸ drawAtPoint:(CGPoint) blendMode:(CGBlendMode) alpha:(CGFloat) å›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ drawAtPoint:(CGPoint) withAttributes:NSDictionary *dict) æ–‡å­—ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ï¼ˆå±æ€§å€¼ï¼šNSFontAttributeNameå­—ä½“å¤§å°ã€NSForegroundColorAttributeNameå­—ä½“é¢œè‰²ï¼‰ UIGraphicsEndImageContext() å…³é—­ä¸Šä¸‹æ–‡ [path stroke] / [path fill] åº•å±‚åšäº†:1.è·å–ä¸Šä¸‹æ–‡-&gt;2.ç»˜åˆ¶è·¯å¾„-&gt;3.æ·»åŠ è·¯å¾„åˆ°ä¸Šä¸‹æ–‡-&gt;4.æ¸²æŸ“ä¸Šä¸‹æ–‡ PS.åŒæ ·ç¬¬ä¸€ä¸ªæ–¹æ³•å†™çš„æ¯”è¾ƒè¯¦ç»†ï¼Œä¸”æœ‰æ³¨é‡Šå®ç°- (void)drawRect:(CGRect)rectæ–¹æ³• æˆ‘æ˜¯UIKit ä¹‹ UIBezierPathç»˜å›¾ 1ã€è·å–ä¸Šä¸‹æ–‡2ã€ç»˜åˆ¶è·¯å¾„3ã€æ·»åŠ è·¯å¾„åˆ°ä¸Šä¸‹æ–‡4ã€æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆæè¾¹æˆ–å¡«å……ï¼‰ 1234567- (void)drawRect:(CGRect)rect &#123;//------------------æˆ‘æ˜¯UIKit ä¹‹ UIBezierPathç»˜å›¾------------- [self drawLine];// ç”»ç›´çº¿ã€æ›²çº¿ [self drawRect];// ç”»çŸ©å½¢ã€ç”»æ¤­åœ† [self drawRidan];// ç”»å¼§åº¦ã€æ‰‡å½¢ ç”»ç›´çº¿123456789101112131415161718192021222324252627282930/** ç”»ç›´çº¿ã€æ›²çº¿ */- (void)drawLine&#123; // 1.è·å–ä¸Šä¸‹æ–‡ CGContextRef ctx = UIGraphicsGetCurrentContext(); // 2.ç»˜åˆ¶è·¯å¾„ UIBezierPath *path = [UIBezierPath bezierPath]; // è®¾ç½®èµ·ç‚¹ + æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ [path moveToPoint:CGPointMake(10, 150)]; [path addLineToPoint:CGPointMake(160, 80)]; // ç”»ç¬¬äºŒæ¡çº¿ [path addLineToPoint:CGPointMake(130, 150)]; // ç”»æ›²çº¿ [path moveToPoint:CGPointMake(10, 280)]; // ç”»æ›²çº¿(controlPoint:å¼¯æ›²æ–¹å‘ç‚¹) [path addQuadCurveToPoint:CGPointMake(180, 280) controlPoint:CGPointMake(130, 130)]; // **åœ¨è¿™é‡Œè®¾ç½®å…¶ä»–å±æ€§ä¸ä¸Šé¢çš„ä¸€æ ·å°±ä¸åœ¨å†™ä¸€éäº†** // 3.è·¯å¾„æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ // UIBezierPath:UIKitæ¡†æ¶ ,CGPathRef:CoreGraphicsæ¡†æ¶ CGContextAddPath(ctx, path.CGPath); // 4.æ¸²æŸ“ä¸Šä¸‹æ–‡ CGContextStrokePath(ctx);// æè¾¹(ç©ºå¿ƒ) //CGContextFillPath(ctx);// å¡«å……(å®å¿ƒ)&#125; ç”»çŸ©å½¢ã€æ¤­åœ†12345678910111213141516171819202122232425/** ç”»çŸ©å½¢ã€æ¤­åœ† */- (void)drawRect&#123; CGContextRef ctx = UIGraphicsGetCurrentContext(); // ç”»çŸ©å½¢ UIBezierPath *path = [UIBezierPath bezierPathWithRect:CGRectMake(10, 300, 80, 40)]; // ç”»åœ†è§’çŸ©å½¢ UIBezierPath *path1 = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(100, 300, 80, 40) cornerRadius:10]; // ç”»æŒ‡å®šè§’ä¸ºåœ†è§’çš„çŸ©å½¢ UIBezierPath *path2 = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(200, 300, 80, 40) byRoundingCorners:UIRectCornerBottomRight cornerRadii:CGSizeMake(10, 10)]; [[UIColor redColor] set]; CGContextAddPath(ctx, path.CGPath); CGContextAddPath(ctx, path1.CGPath); CGContextAddPath(ctx, path2.CGPath); CGContextStrokePath(ctx); // ä½¿ç”¨UIBezierPathæä¾›çš„ç»˜å›¾æ–¹æ³•è¿›è¡Œç»˜åˆ¶ // ç”»æ¤­åœ†ã€åœ† UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(10, 370, 180, 50)]; // ä½¿ç”¨UIBezierPathæä¾›çš„ç»˜å›¾æ–¹æ³•è¿›è¡Œç»˜åˆ¶ [path stroke];// åº•å±‚åšäº†:1.è·å–ä¸Šä¸‹æ–‡-&gt;2.ç»˜åˆ¶è·¯å¾„-&gt;3.æ·»åŠ è·¯å¾„åˆ°ä¸Šä¸‹æ–‡-&gt;4.æ¸²æŸ“ä¸Šä¸‹æ–‡&#125; ç”»å¼§åº¦ã€æ‰‡å½¢1234567891011121314151617/** ç”»å¼§åº¦ã€æ‰‡å½¢ */- (void)drawRidan&#123; CGPoint center = CGPointMake(100, 430); CGFloat radius = 100; // ç”»å¼§åº¦ clockwise:æ–¹å‘(é¡ºæ—¶é’ˆæˆ–æ˜¯é€†æ—¶é’ˆ) UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:0 endAngle:M_PI_4*3 clockwise:YES]; // ç”»æ‰‡å½¢ [path addLineToPoint:center]; //[path closePath];// ä»è·¯å¾„ç»ˆç‚¹è¿æ¥ä¸€æ ¹çº¿åˆ°è·¯å¾„çš„èµ·ç‚¹ [path fill];// fillå¡«å……ä¹‹å‰,ä¼šè‡ªåŠ¨å…³é—­è·¯å¾„ //[path stroke];&#125; ç”»å›¾ç‰‡å’Œæ–‡å­—1234567891011121314151617181920212223242526272829303132/** æ ¹æ®ä¼ å…¥çš„å›¾ç‰‡,ç”Ÿæˆä¸€ç»ˆå¸¦æœ‰è¾¹æ¡†çš„åœ†å½¢å›¾ç‰‡ å‚æ•°:è¾¹æ¡†å®½åº¦,è¾¹æ¡†é¢œè‰²,åŸå§‹å›¾ç‰‡ */+ (UIImage *)imageWithImage:(UIImage *)image Border:(CGFloat)borderW color:(UIColor *)borderColor &#123; CGSize size = CGSizeMake(image.size.width + 2*borderW, image.size.height + 2*borderW); // 1.å¼€å¯ä¸€ä¸ªè·Ÿå›¾ç‰‡åŸå§‹å¤§å°çš„ä¸Šä¸‹æ–‡ UIGraphicsBeginImageContextWithOptions(size, NO, 0); // 2.ç»˜åˆ¶å¤§åœ† UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0, 0, size.width, size.height)]; [borderColor set];// è¾¹æ¡†é¢œè‰² [path fill]; // è®¾ç½®åœ†å½¢è£å‰ªåŒºåŸŸ UIBezierPath *clipPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(borderW, borderW, image.size.width, image.size.height)]; [clipPath addClip]; // 3.æŠŠå›¾ç‰‡ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡å½“ä¸­ [image drawAtPoint:CGPointMake(borderW, borderW)]; // 3.æŠŠæ–‡å­—ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡å½“ä¸­ NSDictionary *dict = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:18.f],NSForegroundColorAttributeName:[UIColor whiteColor]&#125;; [@&quot;æˆ‘æ˜¯ç»˜åˆ¶ä¸Šçš„\nå›¾ç‰‡å’Œæ–‡å­—&quot; drawAtPoint:CGPointMake(0, 0) withAttributes:dict]; // 4.ä»ä¸Šä¸‹æ–‡å½“ä¸­ç”Ÿæˆä¸€å¼ å›¾ç‰‡ UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext(); // 5.å…³é—­ä¸Šä¸‹æ–‡ UIGraphicsEndImageContext(); image = newImage; return image;&#125; æ•ˆæœï¼š å¦‚æœä½ æƒ³æ›´æ·±å…¥å­¦ä¹  UIBeizerPath ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡å®˜æ–¹è¯‘æ–‡åŠ åŸç†çš„æ€»ç»“ ï¼ŒğŸ‘æ¨èä¸€ç¯‡ UIBezierPathè¯‘æ–‡+æ´»ç”¨ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ç»˜å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIWebViewAppleè¯‘æ–‡]]></title>
    <url>%2FAppleTranslation%2FUIWebViewApple.html</url>
    <content type="text"><![CDATA[Write in the first éšç€HTML5çš„è¿…é€Ÿå‘å±•ä¸æ—¥è¶‹æˆç†Ÿï¼Œè¶Šæ¥è¶Šå¤šçš„ç§»åŠ¨å¼€å‘è€…é€‰æ‹©ä½¿ç”¨HTML5æ¥è¿›è¡Œæ··åˆå¼€å‘ï¼Œä¸ä»…èŠ‚çº¦æˆæœ¬è€Œä¸”æ•ˆæœç»šä¸½ï¼Œåªæœ‰ä¸€ä¸ªæ„Ÿè§‰ Dï¼(æ­¤æ—¶é»˜é»˜ä¸‹å†³å¿ƒæˆ‘è¦å­¦ä¼šâ˜º)ã€‚ é‚£ä¹ˆä½œä¸ºå†…ç½®æµè§ˆå™¨çš„WebViewè¢«é‡è§†èµ·æ¥ï¼Œä¸ç®¡æ˜¯iOSè¿˜æ˜¯Androidï¼Œéƒ½è¦æ˜¯ä½¿ç”¨ WebView æ§ä»¶æ¥åŠ è½½HTML5é¡µé¢ï¼Œç”šè‡³æœ‰äº›ç¨‹åºæ‰“å¼€ååªæœ‰ä¸€ä¸ªWebView æ§ä»¶ï¼Œå…¶ä»–çš„é¡µé¢éƒ½æ˜¯è¢«å®ƒåŠ è½½å‡ºæ¥ç½‘é¡µã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ æ­£é¢˜åœ¨è¿™é‡Œé¦–å…ˆé™„ä¸Šå®˜æ–¹åŸæ–‡åœ°å€ UIWebView Class Relationships Inherits From UIView ç»§æ‰¿è‡ª: UIView Conforms To éµå®ˆ:CVarArgã€Equatableã€Hashableã€Equa NSCoding tableã€UIAccessibilityIdentificationã€UIScrollViewDelegate Framework iOS 2.0+ ClassUIWebView You can use the UIWebView class to embed web content in your app. To do so, create a UIWebView object, attach it to a window, and send it a request to load web content. You can also use this class to move back and forward in the history of webpages, and you can even set some web content properties programmatically. ä½ å¯ä»¥ä½¿ç”¨ UIWebView ç±»æ¥å°†ç½‘é¡µï¼ˆweb contentï¼‰åµŒå…¥åˆ°ä½ çš„ app ä¸­ã€‚ä¸ºæ­¤ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª UIWebView å¯¹è±¡ï¼Œå°†å®ƒæ·»åŠ åˆ°ä¸€ä¸ª çª—ä½“ï¼ˆwindowï¼‰ ä¸Šï¼Œ ç„¶åç»™å®ƒå‘é€ä¸€ä¸ªè¯·æ±‚å»åŠ è½½ç½‘é¡µï¼ˆweb contentï¼‰ã€‚ä½ è¿˜å¯ä»¥ç”¨è¿™ä¸ªç±»åœ¨ç½‘é¡µæµè§ˆè®°å½•ä¸­åé€€å‰è¿›ï¼ˆmove back and forwardï¼‰ï¼Œç”šè‡³å¯ä»¥è®¾ç½®ä¸€äº›ç½‘é¡µå±æ€§ï¼ˆweb content propertiesï¼‰ã€‚ Overview NoteIn apps that run in iOS 8 and later, use the WKWebView class instead of using UIWebView. Additionally, consider setting the WKPreferences property javaScriptEnabled to false if you render files that are not supposed to run JavaScript. æ³¨æ„ï¼šåœ¨åªæ”¯æŒiOS 8åŠä»¥åçš„ç³»ç»Ÿçš„ app ä¸­ï¼Œå»ºè®®ä½¿ç”¨WKWebViewï¼Œè€Œä¸æ˜¯ UIWebView ã€‚å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æœä½ è¦æ¸²æŸ“çš„æ–‡ä»¶ä¸æ”¯æŒè¿è¡Œ JavaScript çš„è¯ï¼Œä¸å¦¨å°† WKPreferencesçš„javaScriptEnabled å±æ€§è®¾ä¸º NOã€‚ ImportantAn iOS app linked on or after iOS 10.0 must include in its Info.plist file the usage description keys for the types of data it needs to access or it will crash. To access a userâ€™s photo data specifically, it must include NSPhotoLibraryUsageDescription and NSCameraUsageDescription. é‡è¦ï¼šiOSåº”ç”¨ç¨‹åºé“¾æ¥æˆ–ä¹‹åçš„iOS 10.0å¿…é¡»åŒ…æ‹¬åœ¨å…¶ä¿¡æ¯ã€‚plistæ–‡ä»¶ä½¿ç”¨æè¿°é”®ç±»å‹çš„æ•°æ®éœ€è¦è®¿é—®æˆ–å®ƒä¼šå´©æºƒã€‚è®¿é—®ç”¨æˆ·çš„ç…§ç‰‡æ•°æ®å…·ä½“åœ°è¯´,å®ƒå¿…é¡»åŒ…æ‹¬NSPhotoLibraryUsageDescriptionå’ŒNSCameraUsageDescriptionã€‚ Use the loadHTMLString(_:baseURL:) method to begin loading local HTML files or the loadRequest(_:) method to begin loading web content. Use the stopLoading() method to stop loading, and the isLoading property to find out if a web view is in the process of loading. æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ loadHTMLString:baseURL: æ–¹æ³•æ¥åŠ è½½æœ¬åœ° HTML æ–‡ä»¶æˆ–è€…ç”¨ loadRequest: æ–¹æ³•æ¥åŠ è½½ç½‘é¡µï¼ˆweb contentï¼‰ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨stopLoading æ–¹æ³•æ¥åœæ­¢åŠ è½½ï¼Œä»¥åŠé€šè¿‡è·å–å±æ€§ loading çš„å€¼æ¥åˆ¤æ–­ä¸€ä¸ª web view æ˜¯å¦è¿˜å¤„äºæ­£åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­ã€‚ If you allow the user to move back and forward through the webpage history, then you can use the goBack() and goForward() methods as actions for buttons. Use the canGoBack and canGoForward properties to disable the buttons when the user canâ€™t move in a direction. å¦‚æœä½ æƒ³è®©ç”¨æˆ·åœ¨æµè§ˆç½‘é¡µæ—¶å¯ä»¥å‰è¿›åé€€ï¼Œä½ å¯ä»¥é€šè¿‡ button çš„ action å¯¹goBack å’ŒgoForward æ–¹æ³•çš„è°ƒç”¨æ¥æ§åˆ¶ã€‚å½“ç”¨æˆ·ä¸èƒ½åœ¨æŸä¸€ä¸ªæ–¹å‘â€œç§»åŠ¨â€æ—¶ï¼Œéœ€è¦ä½¿ç”¨ canGoBack å’Œ canGoForward å±æ€§æ¥ç¦ç”¨æŒ‰é’®çš„å‰è¿›åé€€æ“ä½œã€‚ By default, a web view automatically converts telephone numbers that appear in web content to Phone links. When a Phone link is tapped, the Phone app launches and dials the number. To turn off this default behavior, set the dataDetectorTypes property with a UIDataDetectorTypes bitfield that does not contain the phoneNumber flag. é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ª web view ä¼šè‡ªåŠ¨å°†ç½‘é¡µä¸­çš„ç”µè¯å·ç è½¬æˆä¸€ä¸ªå·ç é“¾æ¥ï¼ˆPhone linksï¼‰ã€‚å½“ç”¨æˆ·åœ¨ç‚¹å‡»é‚£ä¸ªé“¾æ¥ï¼ˆPhone linksï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¯åŠ¨ Phone app å¹¶æ‹¨æ‰“é‚£ä¸ªç”µè¯å·ç ã€‚ä½ å¯ä»¥å°†å±æ€§ dataDetectorTypes çš„å€¼è®¾ç½®ä¸ºä¸€ä¸ª UIDataDetectorTypes ä½å­—æ®µæ¥å…³é—­è¿™ä¸ªç”µè¯å·ç è¯†åˆ«è¡Œä¸ºï¼Œå› ä¸ºUIDataDetectorTypesä¸åŒ…æ‹¬ TypePhoneNumber è¿™ä¸ªæ ‡å¿—ä½ã€‚ You can also use the scalesPageToFit property to programmatically set the scale of web content the first time it is displayed in a web view. Thereafter, the user can change the scale using gestures. ä½ å¯ä»¥é€šè¿‡è®¾ç½® scalesPageToFit å±æ€§æ¥è®¾ç½®ç½‘é¡µï¼ˆweb contentï¼‰ç¬¬ä¸€æ¬¡å±•ç¤ºåœ¨ä¸€ä¸ª web view ä¸­çš„é¡µé¢æ¯”ä¾‹ã€‚ä½†ä»…ä»…è¿™ä¸ªå±æ€§åªåœ¨é¦–æ¬¡å±•ç¤ºæ—¶æœ‰æ•ˆï¼Œé¦–æ¬¡å±•ç¤ºä¹‹åç”¨æˆ·ä»ç„¶å¯ä»¥é€šè¿‡æ‰‹åŠ¿æ”¹å˜é¡µé¢æ¯”ä¾‹ã€‚ Set the delegate property to an object conforming to the UIWebViewDelegate protocol if you want to track the loading of web content. å¦‚æœä½ æƒ³è¿½è¸ªç½‘é¡µå†…å®¹ï¼ˆweb contentï¼‰çš„åŠ è½½ï¼Œä½ éœ€è¦å°† web view çš„ delegate å±æ€§èµ‹ç»™ä¸€ä¸ªéµå®ˆ UIWebViewDelegate åè®®çš„å¯¹è±¡ã€‚ ImportantYou should not embed UIWebView or UITableView objects in UIScrollView objects. If you do so, unexpected behavior can result because touch events for the two objects can be mixed up and wrongly handled. é‡è¦ï¼šä¸è¦å°† UIWebView æˆ– UITableView å¯¹è±¡åµŒå…¥åˆ° UIScrollView å¯¹è±¡ä¸­ã€‚å¦‚æœä½ è¿™ä¹ˆåšäº†ï¼Œå°†ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œå› ä¸ºé‚£ä¸¤ä¸ªåµŒå¥—çš„ view çš„ touch äº‹ä»¶ä¼šè¢«æ··æ·†å¹¶ä¸”ä¼šè¢«é”™è¯¯åœ°å¤„ç†ã€‚ You can easily debug the HTML, CSS, and JavaScript contained inside a UIWebView with Web Inspector. Read Debugging Web Content on iOS to learn how to configure Web Inspector for iOS. Read the rest of Safari Web Content Guide to learn how to create web content that is optimized for Safari on iPhone and iPad. For information about basic view behaviors, see View Programming Guide for iOS. å€ŸåŠ© Web Inspectorï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒè¯•ä¸€ä¸ª UIWebView ä¸­çš„HTMLï¼ŒCSS å’Œ JavaScriptã€‚ä½ å¯ä»¥é€šè¿‡é˜…è¯» Debugging Web Content on iOS æ¥å­¦ä¹ å¦‚ä½•é…ç½® Web Inspector for iOSã€‚ä½ è¿˜å¯ä»¥é€šè¿‡é˜…è¯» Safari Web Content Guide çš„å…¶ä½™éƒ¨åˆ†ï¼Œæ¥å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªä¸º iPhone å’Œ iPad ä¸Šçš„ Safari è€Œä¼˜åŒ–çš„ç½‘é¡µï¼ˆweb contentï¼‰ã€‚ å¦‚æœä½ æƒ³äº†è§£ä¸€äº›å…³äºåŸºæœ¬çš„ view çš„çŸ¥è¯†ï¼Œä¸å¦¨çœ‹ä¸€ä¸‹View Programming Guide for iOS ã€‚ Supported File Formatsæ”¯æŒçš„æ–‡ä»¶æ ¼å¼ In addition to HTML content, UIWebView objects can be used to display other content types, such as Keynote, PDF, and Pages documents. For the best rendering of plain and rich text in your app, however, you should use UITextView instead. é™¤äº† HTML å†…å®¹ä¹‹å¤–ï¼ŒUIWebView å¯¹è±¡è¿˜å¯ä»¥è¢«ç”¨æ¥å±•ç¤ºå…¶ä»–æ ¼å¼çš„å†…å®¹ï¼Œæ¯”å¦‚ï¼ŒKeynoteï¼ŒPDFï¼ŒPagesæ–‡ä»¶ç­‰ã€‚ä¸ºäº†èƒ½å¤Ÿä¿è¯æ–‡æœ¬ï¼ˆplain and rich textï¼‰æ¸²æŸ“çš„æœ€ä½³æ•ˆæœï¼Œå»ºè®®ä½¿ç”¨ UITextViewã€‚ State PreservationçŠ¶æ€ä¿å­˜ In iOS 6 and later, if you assign a value to this viewâ€™s restorationIdentifier property, it attempts to preserve its URL history, the scaling and scrolling positions for each page, and information about which page is currently being viewed. During restoration, the view restores these values so that the web content appears just as it did before. For more information about how state preservation and restoration works, see App Programming Guide for iOS. åœ¨iOS 6åŠä»¥åç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœä½ ç»™ web view çš„ restorationIdentifier å±æ€§èµ‹ä¸€ä¸ªå€¼ï¼Œå®ƒå°†ä¼šä¸ºæ¯ä¸€é¡µä¿å­˜å®ƒçš„ URL å†å²ï¼Œç¼©æ”¾æ¯”ä¾‹å’Œæ»šåŠ¨ä½ç½®ï¼Œä»¥åŠå½“å‰æ­£åœ¨æŸ¥çœ‹çš„ç½‘é¡µä¿¡æ¯ã€‚åœ¨æ¢å¤ï¼ˆ restorationï¼‰è¿‡ç¨‹ä¸­ï¼Œé‚£ä¸ª view ä¼šå¤åŸï¼ˆ restoreï¼‰è¿™äº›å€¼ï¼Œå› æ­¤é‚£ä¸ªç½‘é¡µï¼ˆweb contentï¼‰çœ‹èµ·æ¥å°±åƒå®ƒä¹‹å‰çš„æ ·å­ä¸€æ ·ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºçŠ¶æ€ä¿å­˜å’Œæ¢å¤æ˜¯å¦‚ä½•è¿ä½œçš„ä¿¡æ¯ï¼Œä¸å¦¨è¯»ä¸€è¯» App Programming Guide for iOSã€‚ For more information about appearance and behavior configuration, see Web Views. æ›´å¤šå…³äºå¤–è§‚å’Œè¡Œä¸ºé…ç½®çš„ä¿¡æ¯ï¼Œè¯·çœ‹ Web Viewsã€‚ Subclassing Noteså…³äºç»§æ‰¿ The UIWebView class should not be subclassed. UIWebView ä¸åº”è¯¥è¢«ç»§æ‰¿ã€‚ SymbolsSetting the Delegateè®¾ç½®ä»£ç† var delegate: UIWebViewDelegate?The receiverâ€™s delegate. 1@property(nonatomic, assign) id&lt; UIWebViewDelegate &gt; delegate The delegate is sent messages when content is loading. See UIWebViewDelegate for the optional methods this delegate may implement. ImportantBefore releasing an instance of UIWebView for which you have set a delegate, you must first set its delegate property to nil. This can be done, for example, in your dealloc method. é‡è¦ï¼šåœ¨é‡Šæ”¾ä¸€ä¸ªä½ å·²ç»ä¸ºå…¶è®¾è¿‡ delegate çš„ UIWebView å®ä¾‹ä¹‹å‰ï¼Œä½ é¦–å…ˆä¸€å®šè¦å°†è¯¥ UIWebView å¯¹è±¡çš„ delegate å±æ€§è®¾ä¸º nilã€‚æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ dealloc æ–¹æ³•ä¸­è¿™æ ·åšã€‚ Loading ContentåŠ è½½å†…å®¹1234567func load(Data, mimeType: String, textEncodingName: String, baseURL: URL)Sets the main page contents, MIME type, content encoding, and base URL.- (void)loadData:(NSData *)data MIMEType:(NSString *)MIMEType textEncodingName:(NSString *)encodingName baseURL:(NSURL *)baseURL; 12345func loadHTMLString(String, baseURL: URL?)Sets the main page content and base URL.- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL; 1234func loadRequest(URLRequest)Connects to a given URL by initiating an asynchronous client request.- (void)loadRequest:(NSURLRequest *)request; 1234var request: URLRequest?The URL request identifying the location of the content to load.@property(nonatomic, readonly, strong) NSURLRequest *request; 1234var isLoading: BoolA Boolean value indicating whether the receiver is done loading content.@property(nonatomic, readonly, getter=isLoading) BOOL loading; 1234func stopLoading()Stops the loading of any web content managed by the receiver.- (void)stopLoading; 1234func reload()Reloads the current page.- (void)reload; Moving Back and Forwardåé€€å‰è¿›1234var canGoBack: BoolA Boolean value indicating whether the receiver can move backward.@property(nonatomic, readonly, getter=canGoBack) BOOL canGoBack; 1234var canGoForward: BoolA Boolean value indicating whether the receiver can move forward.@property(nonatomic, readonly, getter=canGoForward) BOOL canGoForward; 1234func goBack()Loads the previous location in the back-forward list.- (void)goBack; 1234func goForward()Loads the next location in the back-forward list.- (void)goForward; Setting Web Content Propertieså†…å®¹ç›¸å…³å±æ€§çš„è®¾ç½® 1234var allowsLinkPreview: BoolA Boolean value that determines whether pressing on a link displays a preview of the destination for the link.@property(nonatomic) BOOL allowsLinkPreview; 1234var scalesPageToFit: BoolA Boolean value determining whether the webpage scales to fit the view and the user can change the scale.@property(nonatomic) BOOL scalesPageToFit; 1234var scrollView: UIScrollViewThe scroll view associated with the web view.@property(nonatomic, readonly, strong) UIScrollView *scrollView; 1234var suppressesIncrementalRendering: BoolA Boolean value indicating whether the web view suppresses content rendering until it is fully loaded into memory.@property(nonatomic) BOOL suppressesIncrementalRendering; 1234var keyboardDisplayRequiresUserAction: BoolA Boolean value indicating whether web content can programmatically display the keyboard.@property(nonatomic) BOOL keyboardDisplayRequiresUserAction; 1234var dataDetectorTypes: UIDataDetectorTypesThe types of data converted to clickable URLs in the web viewâ€™s content.@property(nonatomic) UIDataDetectorTypes dataDetectorTypes; Running JavaScript1234func stringByEvaluatingJavaScript(from: String)Returns the result of running a JavaScript script. Although this method is not deprecated, best practice is to use the evaluateJavaScript(_:completionHandler:) method of the WKWebView class instead.- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script; Managing Media Playbackå¤šåª’ä½“æ’­æ”¾1234var allowsInlineMediaPlayback: BoolA Boolean value that determines whether HTML5 videos play inline or use the native full-screen controller.@property(nonatomic) BOOL allowsInlineMediaPlayback; 1234var mediaPlaybackRequiresUserAction: BoolA Boolean value that determines whether HTML5 videos can play automatically or require the user to start playing them.@property(nonatomic) BOOL mediaPlaybackRequiresUserAction; 1234var mediaPlaybackAllowsAirPlay: BoolA Boolean value that determines whether Air Play is allowed from this view.@property(nonatomic) BOOL mediaPlaybackAllowsAirPlay; 1234var allowsPictureInPictureMediaPlayback: BoolA Boolean value that determines whether Picture in Picture playback is allowed from this view.@property(nonatomic) BOOL allowsPictureInPictureMediaPlayback; Managing Pagesé¡µé¢è®¾ç½®1234var gapBetweenPages: CGFloatThe size of the gap, in points, between pages.@property(nonatomic) CGFloat gapBetweenPages; 1234var pageCount: IntThe number of pages produced by the layout of the web view.@property(nonatomic, readonly) NSUInteger pageCount; 1234var pageLength: CGFloatThe size of each page, in points, in the direction that the pages flow.@property(nonatomic) CGFloat pageLength; 1234var paginationBreakingMode: UIWebPaginationBreakingModeThe manner in which column- or page-breaking occurs.@property(nonatomic) UIWebPaginationBreakingMode paginationBreakingMode; 1234var paginationMode: UIWebPaginationModeThe layout of content in the web view.@property(nonatomic) UIWebPaginationMode paginationMode; æœ€åé™„ä¸Š UIWebView.hä½œä¸ºä¸€æšæˆé•¿ä¸­çš„èœé¸Ÿï¼Œåˆ†äº«å’Œå¼€æºç²¾ç¥ï¼Œè¿˜æ˜¯å€¼å¾—å…·å¤‡çš„ã€‚å¦‚æœâ€¦æˆ‘æ˜¯è¯´å¦‚æœï¼Œå¯ä»¥å…³æ³¨ä¸‹ GitHub123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119//// UIWebView.h// UIKit//// Copyright (c) 2007-2015 Apple Inc. All rights reserved.//#import &lt;Foundation/Foundation.h&gt;#import &lt;UIKit/UIView.h&gt;#import &lt;UIKit/UIKitDefines.h&gt;#import &lt;UIKit/UIDataDetectors.h&gt;#import &lt;UIKit/UIScrollView.h&gt;NS_ASSUME_NONNULL_BEGINtypedef NS_ENUM(NSInteger, UIWebViewNavigationType) &#123;UIWebViewNavigationTypeLinkClicked,UIWebViewNavigationTypeFormSubmitted,UIWebViewNavigationTypeBackForward,UIWebViewNavigationTypeReload,UIWebViewNavigationTypeFormResubmitted,UIWebViewNavigationTypeOther&#125; __TVOS_PROHIBITED;typedef NS_ENUM(NSInteger, UIWebPaginationMode) &#123;UIWebPaginationModeUnpaginated,UIWebPaginationModeLeftToRight,UIWebPaginationModeTopToBottom,UIWebPaginationModeBottomToTop,UIWebPaginationModeRightToLeft&#125; __TVOS_PROHIBITED;typedef NS_ENUM(NSInteger, UIWebPaginationBreakingMode) &#123;UIWebPaginationBreakingModePage,UIWebPaginationBreakingModeColumn&#125; __TVOS_PROHIBITED;@class UIWebViewInternal;@protocol UIWebViewDelegate;NS_CLASS_AVAILABLE_IOS(2_0) __TVOS_PROHIBITED @interface UIWebView : UIView &lt;NSCoding, UIScrollViewDelegate&gt;@property (nullable, nonatomic, assign) id &lt;UIWebViewDelegate&gt; delegate;@property (nonatomic, readonly, strong) UIScrollView *scrollView NS_AVAILABLE_IOS(5_0);- (void)loadRequest:(NSURLRequest *)request;- (void)loadHTMLString:(NSString *)string baseURL:(nullable NSURL *)baseURL;- (void)loadData:(NSData *)data MIMEType:(NSString *)MIMEType textEncodingName:(NSString *)textEncodingName baseURL:(NSURL *)baseURL;@property (nullable, nonatomic, readonly, strong) NSURLRequest *request;// é‡æ–°åŠ è½½ï¼ˆåˆ·æ–°ï¼‰- (void)reload;// åœæ­¢åŠ è½½- (void)stopLoading;// å›é€€- (void)goBack; // å‰è¿›- (void)goForward;// æ˜¯å¦èƒ½å›é€€@property (nonatomic, readonly, getter=canGoBack) BOOL canGoBack;// æ˜¯å¦èƒ½å‰è¿›@property (nonatomic, readonly, getter=canGoForward) BOOL canGoForward; // æ˜¯å¦æ­£åœ¨åŠ è½½ä¸­@property (nonatomic, readonly, getter=isLoading) BOOL loading;// åœ¨OCä¸­è°ƒç”¨JavaScriptä»£ç - (nullable NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script;// æ˜¯å¦ä¼¸ç¼©å†…å®¹è‡³é€‚åº”å±å¹•å½“å‰å°ºå¯¸@property (nonatomic) BOOL scalesPageToFit;@property (nonatomic) BOOL detectsPhoneNumbers NS_DEPRECATED_IOS(2_0, 3_0); // éœ€è¦è¿›è¡Œæ£€æµ‹çš„æ•°æ®ç±»å‹@property (nonatomic) UIDataDetectorTypes dataDetectorTypes NS_AVAILABLE_IOS(3_0);@property (nonatomic) BOOL allowsInlineMediaPlayback NS_AVAILABLE_IOS(4_0); // iPhone Safari defaults to NO. iPad Safari defaults to YES@property (nonatomic) BOOL mediaPlaybackRequiresUserAction NS_AVAILABLE_IOS(4_0); // iPhone and iPad Safari both default to YES@property (nonatomic) BOOL mediaPlaybackAllowsAirPlay NS_AVAILABLE_IOS(5_0); // iPhone and iPad Safari both default to YES@property (nonatomic) BOOL suppressesIncrementalRendering NS_AVAILABLE_IOS(6_0); // iPhone and iPad Safari both default to NO@property (nonatomic) BOOL keyboardDisplayRequiresUserAction NS_AVAILABLE_IOS(6_0); // default is YES@property (nonatomic) UIWebPaginationMode paginationMode NS_AVAILABLE_IOS(7_0);@property (nonatomic) UIWebPaginationBreakingMode paginationBreakingMode NS_AVAILABLE_IOS(7_0);@property (nonatomic) CGFloat pageLength NS_AVAILABLE_IOS(7_0);@property (nonatomic) CGFloat gapBetweenPages NS_AVAILABLE_IOS(7_0);@property (nonatomic, readonly) NSUInteger pageCount NS_AVAILABLE_IOS(7_0);@property (nonatomic) BOOL allowsPictureInPictureMediaPlayback NS_AVAILABLE_IOS(9_0);@property (nonatomic) BOOL allowsLinkPreview NS_AVAILABLE_IOS(9_0); // default is NO@end__TVOS_PROHIBITED @protocol UIWebViewDelegate &lt;NSObject&gt;@optional// UIWebViewåœ¨å‘é€è¯·æ±‚ä¹‹å‰ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœè¿”å›NOï¼Œä»£è¡¨åœæ­¢åŠ è½½è¯·æ±‚ï¼Œè¿”å›YESï¼Œä»£è¡¨å…è®¸åŠ è½½è¯·æ±‚- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; // å¼€å§‹å‘é€è¯·æ±‚ï¼ˆåŠ è½½æ•°æ®ï¼‰æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webViewDidStartLoad:(UIWebView *)webView; // è¯·æ±‚å®Œæ¯•ï¼ˆåŠ è½½æ•°æ®å®Œæ¯•ï¼‰æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webViewDidFinishLoad:(UIWebView *)webView; // è¯·æ±‚é”™è¯¯æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error;@endNS_ASSUME_NONNULL_END ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¼ç çŒ¿ç†ŸçŸ¥â€”å¾ªç¯åˆ©ç”¨&æ— é™è½®æ’­]]></title>
    <url>%2FEncapsulationThinking%2FCycleUsing.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€å¾ªç¯åˆ©ç”¨ &amp; æ— é™è½®æ’­ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ å¾ªç¯åˆ©ç”¨ ã€éœ€æ±‚ã€‘ï¼šå¦‚ä¸Šå›¾ æˆ–è€…æ˜¯æ–°é—»ç±»çš„æ»šåŠ¨æ¡ï¼Œæ ‡é¢˜å¯ä»¥ç‚¹å‡»åˆ‡æ¢ç•Œé¢æ§åˆ¶å™¨ï¼Œç•Œé¢å¯ä»¥æ»‘åŠ¨æŸ¥çœ‹åŒæ—¶åˆ‡æ¢å¯¹åº”æ ‡é¢˜ï¼›å¸¸ç”¨åšæ³•æ˜¯ï¼Œæ»šåŠ¨æ¡ç”¨ UIScrollView å­æ§ä»¶é‡‡ç”¨ UIButtonï¼Œå†…å®¹è§†å›¾é‡‡ç”¨ tableViewã€‚ å®ç°æ–¹æ¡ˆä¸€ï¼š å†…å®¹è§†å›¾å¯æ»‘åŠ¨ï¼Œé‡‡ç”¨ UITableView + 2ä¸ªtableViewï¼›tableView åªæ”¯æŒä¸Šä¸‹æ»‘åŠ¨ï¼Œä½†æ˜¯ ä¹Ÿèƒ½åŠåˆ°å·¦å³æ»‘åŠ¨ [transform]ï¼› ã€æ³¨è§£ã€‘ï¼šå› ä¸ºæˆ‘ä»¬çŸ¥é“ tableView çš„å¾ªç¯åˆ©ç”¨ä¸ç”¨æˆ‘ä»¬å†™ï¼ŒtableView è‡ªå¸¦å¾ªç¯åˆ©ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬åªè¦å¾€ cell ä¸Šé¢ åŠ  tableView å°±å¯ä»¥äº†ï¼Œç°åœ¨ tableView çš„æ•°æ®æº è®¾ç½®ä¸º cell å°±å¯ä»¥äº†ï¼Œæ•°æ®æºä¸ä¸€å®š éå¾—æ˜¯æ§åˆ¶å™¨ï¼Œåªä¸è¿‡ä¸€èˆ¬æ˜¯æ§åˆ¶å™¨ï¼›åªè¦ è¿™ä¸ª cell éµå®ˆ æ•°æ®æºDataSourceå’Œå®ç°æ•°æ®æºæ–¹æ³•ï¼Œå°±å¯ä»¥ä¸ºtableViewæä¾›æ•°æ®ï¼› å®ç°æ–¹æ¡ˆäºŒï¼š å†…å®¹è§†å›¾å¯æ»‘åŠ¨ï¼Œé‡‡ç”¨ UIScrollView + 2ä¸ªtableViewï¼›é‚£ç°åœ¨å¾ªç¯åˆ©ç”¨å°±éœ€è¦æˆ‘ä»¬è‡ªå·±åšäº†ï¼Œå¯¹æ¯”collectionView å°‘äº†cellï¼Œä½†æ˜¯ éœ€è¦åœ¨ scrollViewDidScroll: ç›‘å¬ scrollView çš„æ»‘åŠ¨ï¼Œå…¶å®å¾ªç¯åˆ©ç”¨ è¿™é‡Œåœ¨ç›‘å¬æ»‘åŠ¨æ–¹æ³•é‡Œï¼Œæ”¹å˜tableViewçš„ xï¼› å®ç°æ–¹æ¡ˆä¸‰ï¼š å†…å®¹è§†å›¾å¯æ»‘åŠ¨ï¼Œé‡‡ç”¨ UICollectionView + 2ä¸ªtableViewï¼›collectionView æ”¯æŒä¸Šä¸‹æ»‘åŠ¨ï¼Œä¹Ÿæ”¯æŒå·¦å³æ»‘åŠ¨ ;collectionView è‡ªå¸¦å¾ªç¯åˆ©ç”¨ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ å¾ªç¯åˆ©ç”¨Viewï¼Œæ›´æ¢æ•°æ®ï¼› æ¡ˆä¾‹ ä»¥æ–¹æ¡ˆä¸‰ UICollectionViewä¸ºä¾‹ï¼› ã€å¼•å­ã€‘ å¦‚æœåŠ ä¸Šç½‘ç»œè¯·æ±‚ï¼ˆç»“åˆä¸Šå›¾ï¼‰ã€‚ã€æ”¿æ²»æ¿å—ã€‘æ­£åœ¨å¤„äºä¸‹æ‹‰åˆ·æ–°ï¼Œè¿™æ—¶æœåŠ¡å™¨è¯·æ±‚è¿˜æ²¡æœ‰å›æ¥ï¼Œç”¨æˆ·æ»‘åŠ¨ã€ä½“è‚²æ¿å—ã€‘ï¼Œæ”¿æ²»Viewå¾ªç¯åˆ©ç”¨è¿‡æ¥ï¼Œè¿™æ—¶æˆ‘ä»¬è¦åšçš„ 1.å¹²è„†ç‚¹ ç›´æ¥å–æ¶ˆä¸Šæ¬¡çš„è¯·æ±‚ï¼›ç”¨æˆ·å†æ¬¡æ»‘åˆ°ã€æ”¿æ²»æ¿å—ã€‘é‡æ–°ä¸‹æ‹‰å‘é€è¯·æ±‚ 2.è¯·æ±‚ç»§ç»­ï¼Œå–æ¶ˆå¤´éƒ¨åˆ·æ–°æ§ä»¶çŠ¶æ€ï¼ˆæ”¿æ²»å’Œä½“è‚² åŒæ—¶è¯·æ±‚æ•°æ®äº’è¡¥å¹²æ‰°ï¼Œåªæ˜¯ç•Œé¢ä¼šæœ‰å¹²æ‰°ï¼Œæˆ‘ä»¬æ”¹å˜ç•Œé¢ä¸Šçš„æ˜¾ç¤ºå°±å¯ä»¥ï¼›1&gt; å¦‚æœæ”¿æ²»æ•°æ®è¯·æ±‚ä¸‹æ¥å¯ä»¥æš‚å­˜ï¼Œç”¨æˆ·å†æ¬¡æ»‘åˆ°ã€æ”¿æ²»æ¿å—ã€‘æ•°æ®èµ‹å€¼ä¸Šå» 2&gt; å¦‚æœæ”¿æ²»æ•°æ®æ²¡æœ‰è¯·æ±‚ä¸‹æ¥ï¼Œç”¨æˆ·å†æ¬¡æ»‘åˆ°ã€æ”¿æ²»æ¿å—ã€‘è¿˜æ˜¯æ˜¾ç¤ºä¸‹æ‹‰åˆ·æ–°çŠ¶æ€ï¼‰ï¼› å¦‚æœä½ ä¸æƒ³ç”¨æˆ·å¼€å§‹æ»‘åŠ¨è¿˜æ²¡æœ‰åœæ­¢ï¼Œä¸‹ä¸€ç•Œé¢çš„æ•°æ®å°±å±•ç¤ºä¸Šæ¥äº†ï¼Œæ˜¯æƒ³è®©ç”¨æˆ·åœæ­¢æ»šåŠ¨åå†å±•ç¤ºï¼› å¯ä»¥éµå®ˆ&lt;UICollectionViewDelegate&gt;ï¼Œåœ¨ scrollViewDidEndDecelerating: è·å–å½“å‰ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•å‘é€å¯¹åº”æ¨¡å—çš„è¯·æ±‚ï¼ŒæŠŠæ•°æ®ä¼ é€’ç»™CollectionViewCellï¼Œå†ä¼ é€’ç»™ tableViewå±•ç¤ºï¼› é‡è¦çš„æ˜¯ä½ è¦æœ‰æ–¹æ¡ˆçš„æ¶å­ï¼Œå…·ä½“ åŠ ä¸Šç½‘ç»œè¯·æ±‚ï¼Œå†æ ¹æ®ç»†èŠ‚ä¿®æ”¹ï¼› å¾ªç¯åˆ©ç”¨Demoå°æ · é‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ï¼Œå¯å¦ç‚¹ä¸ª Star æ­£åæ— é™è½®æ’­ï¼ˆ3å¼ ï¼‰ æ‰‹åŠ¨æ»šåŠ¨ï¼šåªåˆ›å»ºä¸‰å¼ å›¾ç‰‡ï¼š leftImageViewã€centerImageViewã€rightImageViewï¼Œå®šä¹‰ä¸­é—´æ˜¾ç¤ºé¡µç ä¸º centerPage ï¼Œè®¾ç½®åˆå§‹self.centerPage = 0;ï¼Œè€Œå·¦å³å›¾ç‰‡é¡µç éƒ½ä»¥ centerPage è¡¨ç¤ºï¼Œé€šè¿‡ scrollViewDidEndDecelerating: æ–¹æ³•åˆ¤æ–­contentOffsest.x å’Œ scrollView.frame.size.width æ¯”è¾ƒï¼Œä½¿æ”¹å˜ self.centerPageçš„å€¼ï¼Œç„¶åå¯¹åº”é¡µç æ»šåŠ¨å–æ•°ç»„ä¸­çš„å›¾ç‰‡ï¼Œå§‹ç»ˆæ˜¾ç¤ºä¸­é—´ä¸€å¼ ã€‚ å®šæ—¶å™¨æ»šåŠ¨ï¼š å°†å®šæ—¶å™¨æ·»åŠ åˆ° Runloop çš„ NSRunLoopCommonModesä¸‹ï¼Œè§¦å‘æ–¹æ³•ä¸­è®¾ç½®setContentOffset: animated:YES æ–¹æ³•åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨ scrollViewDidEndScrollingAnimation:(ä»…å½“animatedè®¾ç½®ä¸ºYESæ—¶æ‰è°ƒç”¨)ï¼Œè¿™ä¸ªæ–¹æ³•ä¸‹ self.centerPage++;ã€‚OKäº† ç›‘å¬å›¾ç‰‡ç‚¹å‡»å½“å›¾ç‰‡è¢«ç‚¹å‡»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå› æ­¤éœ€è¦ç›‘å¬å›¾ç‰‡çš„ç‚¹å‡»ï¼Œæ€è·¯å¦‚ä¸‹ï¼š 1.å®šä¹‰ä¸€ä¸ªblockå±æ€§æš´éœ²ç»™å¤–ç•Œvoid(^LNBlock)(NSInteger index)ã€‚ 2.è®¾ç½®centerImageViewçš„userInteractionEnabledä¸ºYESã€‚ 3.ç»™scrollViewæ·»åŠ ä¸€ä¸ªç‚¹å‡»çš„æ‰‹åŠ¿ 4.åœ¨æ‰‹åŠ¿æ–¹æ³•é‡Œè°ƒç”¨blockï¼Œå¹¶ä¼ å…¥å›¾ç‰‡ç´¢å¼• æ— é™è½®æ’­Demoå°æ · é‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ï¼Œå¯å¦ç‚¹ä¸ª Star æ­£åæ— é™è½®æ’­ï¼ˆ2å¼ ï¼‰å¤§è‡´åŸç†ï¼šæœ€åº•å±‚æ˜¯ä¸€ä¸ªUIViewï¼Œä¸Šé¢æœ‰ä¸€ä¸ªUIScrollViewä»¥åŠUIPageControlï¼ŒscrollViewä¸Šæœ‰ä¸¤ä¸ªUIImageViewï¼ŒimageViewå®½é«˜ = scrollviewå®½é«˜ = viewå®½é«˜; å‡è®¾è½®æ’­æ§ä»¶çš„å®½åº¦ä¸ºxé«˜åº¦ä¸ºyï¼Œæˆ‘ä»¬è®¾ç½®scrollviewçš„contentSize.widthä¸º3xï¼Œå¹¶è®©scrollviewçš„æ°´å¹³åç§»é‡ä¸ºxï¼Œæ—¢æ˜¾ç¤ºæœ€ä¸­é—´å†…å®¹ã€‚ å…·ä½“ç»†èŠ‚è¯·ç§»æ­¥è¿™é‡Œé˜…è¯»ï¼šè½®æ’­ä¸¤ä¸ªImageViewå®ç° http://www.jianshu.com/p/ef03ec7f23b2 ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å°è£…</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å°è£…æ€ç»´â€”ä¸šåŠ¡é€»è¾‘ç±»]]></title>
    <url>%2FEncapsulationThinking%2Fbusiness.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ç®€æ˜“-å°è£…ä¸šåŠ¡é€»è¾‘ç±»ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š é€‰æ‹©æ ¹æ§åˆ¶å™¨ç±» å­˜å‚¨å·¥å…·ç±»1.NSUserDefaults åå¥½è®¾ç½®ï¼Œ(ç‰ˆæœ¬å·)å­˜å‚¨å’Œå–å€¼ 1. é€‰æ‹©æ ¹æ§åˆ¶å™¨ç±»æ–¹æ³•ï¼š1234567// LNRootVC.h#import &lt;Foundation/Foundation.h&gt;@interface LNRootVC : NSObject/** é€‰æ‹©æ ¹æ§åˆ¶å™¨ */+ (UIViewController *)chooseWindowRootVC;@end 1234567891011121314151617181920212223242526272829303132// LNRootVC.m#import "LNSaveTool.h"#import "LNRootVC.h"#import "LNTabBarVC.h"#import "LNGuidePageCollectionVC.h"# define LNVersion @"version"@implementation LNRootVC+ (UIViewController *)chooseWindowRootVC &#123; // 1.è·å–å½“å‰ç‰ˆæœ¬å· NSString *curVersion = [NSBundle mainBundle].infoDictionary[@"CFBundleShortVersionString"]; NSLog(@"%@",curVersion); // 2.ä¸Šä¸€æ¬¡ç‰ˆæœ¬å·(NSUserDefaultså·¥å…·ç±») NSString *lastVersion = [LNSaveTool objectForKey:LNVersion]; // 3.æ¯”è¾ƒç‰ˆæœ¬å· UIViewController *rootVC; if ([curVersion isEqualToString:lastVersion]) &#123; // è¿›å…¥ä¸»æ¡†æ¶ rootVC = [[LNTabBarVC alloc] init]; &#125; else &#123; // è¿›å…¥æ–°ç‰¹æ€§ç•Œé¢ rootVC = [[LNGuidePageCollectionVC alloc] init]; // NSUserDefaultsåå¥½è®¾ç½®å·¥å…·ç±» [LNSaveTool setObject:curVersion forKey:LNVersion]; &#125; return rootVC;&#125;@end è°ƒç”¨ï¼š12// è®¾ç½®çª—å£çš„æ ¹æ§åˆ¶å™¨self.window.rootViewController = [LNRootVC chooseWindowRootVC]; 2. å­˜å‚¨å·¥å…·ç±» è§£å†³:1.é‡‡ç”¨ NSUserDefaults åå¥½è®¾ç½®ï¼Œ(ç‰ˆæœ¬å·)å­˜å‚¨å’Œå–å€¼ 1. NSUserDefaultsåå¥½è®¾ç½®ï¼Œå­˜å‚¨å’Œå–å€¼æ–¹æ³•ï¼š123456789101112// LNSaveTool.h#import &lt;Foundation/Foundation.h&gt;@interface LNSaveTool : NSObject/** NSUserDefaultså·¥å…·ç±»:å­˜å‚¨ */+ (void)setObject:(nullable id)value forKey:(NSString *)defaultName;/** NSUserDefaultså·¥å…·ç±»:å–å€¼ */+ (nullable id)objectForKey:(NSString *)defaultName;@end 123456789101112131415161718// LNSaveTool.m#import "LNSaveTool.h"@implementation LNSaveTool+ (void)setObject:(nullable id)value forKey:(NSString *)defaultName &#123; if (defaultName) &#123; // éœ€è¦å±è”½ä¸€ä¸‹å¤–ç•Œ(ä¼ ç©º) [[NSUserDefaults standardUserDefaults] setObject:value forKey:defaultName]; [[NSUserDefaults standardUserDefaults] synchronize];// å¼ºåˆ¶åŒæ­¥ &#125;&#125;+ (nullable id)objectForKey:(NSString *)defaultName &#123; return [[NSUserDefaults standardUserDefaults] objectForKey:defaultName];&#125;@end è°ƒç”¨ï¼š12345// å­˜å‚¨[LNSaveTool setObject:curVersion forKey:@"version"];// å–å€¼NSString *lastVersion = [LNSaveTool objectForKey:@"version"];]]></content>
      <categories>
        <category>å°è£…</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIBezierPathè¯‘æ–‡]]></title>
    <url>%2FAppleTranslation%2FUIBezierPathApple.html</url>
    <content type="text"><![CDATA[å¼•å¯¼ è®°å¾—åˆšæ¥è§¦ iOS çš„æ—¶å€™, ç¬¬ä¸€æ¬¡çœ‹åˆ°ç»˜å›¾å’ŒåŠ¨ç”»åšå‡ºæ¥çš„æ•ˆæœæ—¶ï¼Œåªæœ‰ä¸€ä¸ªæ„Ÿè§‰é…·ï¼é«˜å¤§ä¸Šï¼(é»˜é»˜ä¸‹å†³å¿ƒæˆ‘è¦å­¦ä¼šâ˜º).åœ¨å†™å‡ºè¿™äº›ç‰›Xæ•ˆæœçš„å‰æ è´å¡å°”æ›²çº¿è¿™ä¸ªä¸œè¥¿æˆ‘è§‰å¾—è¦åšåˆ°åˆæ­¥ç†è§£ï¼Œç„¶åæ¢³ç†æ€»ç»“ï¼Œåˆ°æœ€åå¤¯å®åŸºç¡€ã€æ´»å­¦æ´»ç”¨ã€‚ ã€ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æ­£é¢˜åœ¨è¿™é‡Œé¦–å…ˆé™„ä¸Šå®˜æ–¹åŸæ–‡åœ°å€ UIBezierPath Class &amp; UIBezierPath.h å±æ€§å’Œæ–¹æ³• Relationships Inherits From NSObject ç»§æ‰¿è‡ª: NSObject Conforms To NSCoding, NSCopying éµå®ˆ: NSCodingï¼ŒNSObject Framework: UIKit in iOS 3_2 iOS 3.2+ ClassUIBezierPath The UIBezierPath class lets you define a path consisting of straight and curved line segments and render that path in your custom views.You use this class initially to specify just the geometry for your path. Paths can define simple shapes such as rectangles, ovals, and arcs or they can define complex polygons that incorporate a mixture of straight and curved line segments.After defining the shape, you can use additional methods of this class to render the path in the current drawing context. UIBezierPath ç±»å…è®¸ä½ åœ¨è‡ªå®šä¹‰çš„ View ä¸­ç»˜åˆ¶å’Œæ¸²æŸ“ç”±ç›´çº¿å’Œæ›²çº¿ç»„æˆçš„è·¯å¾„. ä½ å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™, ç›´æ¥ä¸ºä½ çš„ UIBezierPath æŒ‡å®šä¸€ä¸ªå‡ ä½•è·¯å¾„. è·¯å¾„å¯ä»¥æ˜¯ç®€å•çš„å‡ ä½•å›¾å½¢ä¾‹å¦‚: çŸ©å½¢ã€æ¤­åœ†ã€å¼§çº¿ä¹‹ç±»çš„, ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹æ¯”è¾ƒå¤æ‚çš„ç”±ç›´çº¿å’Œæ›²çº¿ç»„æˆçš„å¤šè¾¹å½¢. å½“ä½ å®šä¹‰å®Œå›¾å½¢ä»¥å, ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»çš„å…¶ä»–çš„æ–¹æ³•å°†ä½ çš„è·¯å¾„ç›´æ¥ç»˜åˆ¶åœ¨å½“å‰çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­. Overview A UIBezierPath object combines the geometry of a path with attributes that describe the path during rendering. You set the geometry and attributes separately and can change them independent of one another. Once you have the object configured the way you want it, you can tell it to draw itself in the current context. Because the creation, configuration, and rendering process are all distinct steps, Bezier path objects can be reused easily in your code. You can even use the same object to render the same shape multiple times, perhaps changing the rendering options between successive drawing calls. UIBezierPath æ˜¯ç”±å‡ ä½•è·¯å¾„ å’Œ å±æ€§æè¿°ç»„æˆçš„, å±æ€§æ˜¯ç”¨æ¥åœ¨æ¸²æŸ“é˜¶æ®µæç»˜å‡ ä½•è·¯å¾„çš„, æ¯”å¦‚çº¿å®½ä¹‹ç±»çš„ä¸œè¥¿. è·¯å¾„å’Œå±æ€§æ˜¯å®Œå…¨ç‹¬ç«‹çš„, ä»–ä»¬å¹¶ä¸äº’ç›¸ä¾èµ–, ä½ å¯ä»¥åˆ†å¼€åˆ†å¼€å»è®¾ç½®ä»–ä»¬. ä¸€æ—¦ä½ ä»¥è‡ªå·±å–œæ¬¢çš„æ–¹å¼é…ç½®äº† UIBezierPath å¯¹è±¡, ä½ å°±å¯ä»¥è°ƒç”¨æ–¹æ³•é€šçŸ¥UIBezierPath åœ¨å½“å‰çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶å›¾å½¢äº†. å› ä¸ºåˆ›å»ºã€ é…ç½®ã€ æ¸²æŸ“è·¯å¾„ç­‰æ“ä½œ, éƒ½æ˜¯å®Œå…¨ä¸åŒçš„æ­¥éª¤, æ‰€ä»¥ä½ å¯ä»¥åœ¨ä½ çš„ä»£ç ä¸­éå¸¸å®¹æ˜“çš„å¯¹UIBezierPath å¯¹è±¡è¿›è¡Œå¤ç”¨. ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ª UIBezierPath å¯¹è±¡å»æ¸²æŸ“åŒä¸€ä¸ªå›¾å½¢å¾ˆå¤šæ¬¡, ä½ ä¹Ÿå¯ä»¥å†å¤šæ¬¡æ¸²æŸ“çš„é—´éš”ä¸­, ä¿®æ”¹å±æ€§æ¥æ¸²æŸ“å‡ºä¸åŒæ ·å¼çš„è·¯å¾„. You set the geometry of a path by manipulating the pathâ€™s current point. When you create a new empty path object, the current point is undefined and must be set explicitly. To move the current point without drawing a segment, you use the moveToPoint:method. All other methods result in the addition of either a line or curve segments to the path. The methods for adding new segments always assume you are starting at the current point and ending at some new point that you specify. After adding the segment, the end point of the new segment automatically becomes the current point. ä½ å¯ä»¥é€šè¿‡æ§åˆ¶è·¯å¾„çš„å½“å‰çš„(èµ·å§‹)ç‚¹æ¥è®¾ç½®ä¸€æ¡è·¯å¾„çš„å½¢çŠ¶ï¼Œå½“ä½ åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„UIBezierPath å¯¹è±¡æ—¶, èµ·å§‹ç‚¹currentPoint è¿™ä¸ªå±æ€§æ˜¯æœªå®šä¹‰çš„, ä½ éœ€è¦æ‰‹åŠ¨çš„å»è®¾ç½®.currentPoint. å¦‚æœä½ å¸Œæœ›åœ¨ä¸ç»˜åˆ¶ä»»ä½•çº¿æ¡çš„æƒ…å†µä¸‹ç§»åŠ¨currentPoint, ä½ å¯ä»¥ä½¿ç”¨ moveToPoint:æ–¹æ³•. å…¶ä»–çš„æ–¹æ³•éƒ½ä¼šå¯¼è‡´åœ¨ä½ çš„è·¯å¾„ä¸­æ·»åŠ é¢å¤–çš„ç›´çº¿æˆ–æ›²çº¿. æ‰€æœ‰æ„é€ è·¯å¾„ç›¸å…³çš„æ–¹æ³•, éƒ½ä¼šä»¥å½“å‰è·¯å¾„çš„currentPoint ä¸ºèµ·ç‚¹, ä»¥ä½ æŒ‡å®šçš„endPointä¸ºç»ˆç‚¹è¿›è¡Œç»˜åˆ¶. å½“å®Œæˆç»˜åˆ¶ä¹‹å, ä¼šè‡ªåŠ¨å°†æ–°å¢çš„è¿™æ¡çº¿çš„ç»ˆç‚¹è®¾ç½®ä¸ºUIBezierPath å¯¹è±¡çš„currentPoint. A single Bezier path object can contain any number of open or closed subpaths, where each subpath represents a connected series of path segments. Calling the closePath method closes a subpath by adding a straight line segment from the current point to the first point in the subpath. Calling the moveToPoint: method ends the current subpath (without closing it) and sets the starting point of the next subpath. The subpaths of a Bezier path object share the same drawing attributes and must be manipulated as a group. To draw subpaths with different attributes, you must put each subpath in its own UIBezierPath object. ä¸€ä¸ªå•ä¸€çš„è´å¡å°”è·¯å¾„å¯¹è±¡èƒ½å¤ŸåŒ…å«ä»»æ„æ•°é‡çš„å¼€æ”¾å’Œé—­åˆçš„å­è·¯å¾„,åœ¨è¿™äº›è·¯å¾„çš„çº¿æ®µä¸­ï¼Œæ¯ä¸€ä¸ªçº¿æ®µéƒ½æ˜¯ä¸²è”çš„. è°ƒç”¨closePathæ–¹æ³•å°†ä¼šé—­åˆè·¯å¾„, å®ƒå°†ä¼šä»currentPoint åˆ° å­è·¯ç»çš„ firstPointèµ·ç‚¹ç»˜åˆ¶ä¸€æ¡ç›´çº¿. è°ƒç”¨moveToPoint:æ–¹æ³•å°†ä¼šç»“æŸå½“å‰çš„å­è·¯å¾„, ä½†æ˜¯å¹¶ä¸ä¼šè‡ªåŠ¨é—­åˆå½“å‰çš„è‡ªè·¯å¾„, å¹¶ä¸”ä¼šå°†currentPoint ç§»åŠ¨åˆ°æŒ‡å®šçš„ç‚¹, ä¹Ÿå°±æ˜¯ä¸‹ä¸€æ¡ç»˜åˆ¶è·¯å¾„çš„èµ·å§‹ç‚¹.UIBezierPathä¸­æ‰€æœ‰çš„è‡ªè·¯å¾„éƒ½ä¼šå…±äº«åŒæ ·çš„ç»˜å›¾å±æ€§. å¦‚æœä½ å¸Œæœ›ç»˜åˆ¶ä¸€äº›å­è·¯å¾„, ä½†æ˜¯ä¸é€‚ç”¨ç›¸åŒçš„ç»˜å›¾å±æ€§, é‚£ä¹ˆä½ å°±åªèƒ½åˆ›å»ºå¾ˆå¤šçš„UIBezierPath å¯¹è±¡æ¥æ‰¿è½½æ¯ä¸€æ¡è·¯å¾„. After configuring the geometry and attributes of a Bezier path, you draw the path in the current graphics context using the stroke and fill methods. The stroke method traces the outline of the path using the current stroke color and the attributes of the Bezier path object. Similarly, the fill method fills in the area enclosed by the path using the current fill color. (You set the stroke and fill color using the UIColor class.) å½“ä½ ä¸ºUIBezierPath å¯¹è±¡é…ç½®å®Œå‡ ä½•è·¯å¾„å’Œç»˜å›¾å±æ€§ä¹‹å, ä½ å°±å¯ä»¥ä½¿ç”¨strokeæè¾¹(ç©ºå¿ƒ) å’Œ fillå¡«å……(å®å¿ƒ) æ–¹æ³•åœ¨å½“å‰çš„ç»˜å›¾ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œç»˜åˆ¶äº†. strokeæ–¹æ³•å°†ä¼šä½¿ç”¨å½“å‰çš„strokeColor å’Œ ç»˜å›¾å±æ€§æ¥æç»˜æ›²çº¿çš„è½®å»“. åŒæ ·çš„, fill æ–¹æ³•å°†ä¼šä½¿ç”¨fillColor æ¥å¡«å……è·¯å¾„æ‰€å›´æˆçš„å›¾å½¢(ä½¿ç”¨UIColor ç±»æ–¹æ³•æ¥è®¾ç½®strokeColor å’Œ fillColor). In addition to using a Bezier path object to draw shapes, you can also use it to define a new clipping region. The addClip method intersects the shape represented by the path object with the current clipping region of the graphics context. During subsequent drawing, only content that lies within the new intersection region is actually rendered to the graphics context. é™¤äº†å¯ä»¥ç”¨è´å¡å°”è·¯å¾„å¯¹è±¡å»ç»˜åˆ¶å›¾å½¢,ä½ è¿˜å¯ä»¥åˆ©ç”¨å®ƒå»å®šä¹‰ä¸ªæ–°çš„è£å‰ªåŒºåŸŸ.addClipæ–¹æ³•é€šè¿‡å½“å‰å›¾å½¢ä¸Šä¸‹æ–‡è£å‰ªçš„åŒºåŸŸçš„è·¯å¾„å¯¹è±¡æ¥è¡¨ç¤ºä¸¤ä¸ªå›¾å½¢çš„ç›¸äº¤. åœ¨éšåçš„ç»˜åˆ¶è¿‡ç¨‹ä¸­,åªæœ‰å¤„åœ¨æ–°çš„äº¤é›†åŒºåŸŸå†…çš„å†…å®¹å®é™…ä¸Šæ˜¯è¢«å›¾å½¢ä¸Šä¸‹æ–‡ç»˜åˆ¶çš„ ç„¶åæˆ‘ä»¬å°±ç›´æ¥ä»UIBezierPath.h å…¥æ‰‹å§ UIBezierPath.h åˆ›å»º UIBezierPath åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 12// Objective-C+ (instancetype)bezierPath; é€šè¿‡ä¸€ä¸ªçŸ©å½¢, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 123456789/** * ç”»çŸ©å½¢ * è¯¥æ–¹æ³•å°†ä¼šåˆ›å»ºä¸€ä¸ªé—­åˆè·¯å¾„, èµ·å§‹ç‚¹æ˜¯ rect å‚æ•°çš„çš„ origin, å¹¶ä¸”æŒ‰ç…§é¡ºæ—¶é’ˆæ–¹å‘æ·»åŠ ç›´çº¿, æœ€ç»ˆå½¢æˆçŸ©å½¢ * @param rect: çŸ©å½¢è·¯å¾„çš„ Frame */// Swiftconvenience init(rect rect: CGRect)// Objective-C+ (instancetype)bezierPathWithRect:(CGRect)rect; é€šè¿‡ä¸€ä¸ªæŒ‡å®šçš„çŸ©å½¢ä¸­çš„æ¤­åœ†å½¢, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 123456789/** * ç”»åœ†ï¼ˆwidth = heightï¼‰ã€ç”»æ¤­åœ†ï¼ˆwidth != heightï¼‰ * è¯¥æ–¹æ³•å°†ä¼šåˆ›å»ºä¸€ä¸ªé—­åˆè·¯å¾„, è¯¥æ–¹æ³•ä¼šé€šè¿‡é¡ºæ—¶é’ˆçš„ç»˜åˆ¶è´å¡å°”æ›²çº¿, ç»˜åˆ¶å‡ºä¸€ä¸ªè¿‘ä¼¼æ¤­åœ†çš„å½¢çŠ¶. å¦‚æœ rect å‚æ•°æŒ‡å®šäº†ä¸€ä¸ªçŸ©å½¢, é‚£ä¹ˆè¯¥ UIBezierPath å¯¹è±¡å°†ä¼šæè¿°ä¸€ä¸ªåœ†å½¢. * @param rect: çŸ©å½¢è·¯å¾„çš„ Frame */// Swiftconvenience init(ovalInRect rect: CGRect)// Objective-C+ (instancetype)bezierPathWithOvalInRect:(CGRect)rect; æ ¹æ®ä¸€ä¸ªåœ†è§’çŸ©å½¢, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 1234567891011/** * ç”»åœ†è§’çŸ©å½¢ * è¯¥æ–¹æ³•å°†ä¼šåˆ›å»ºä¸€ä¸ªé—­åˆè·¯å¾„, è¯¥æ–¹æ³•ä¼šé¡ºæ—¶é’ˆæ–¹å‘è¿ç»­ç»˜åˆ¶ç›´çº¿å’Œæ›²çº¿. å½“ rect ä¸ºæ­£æ–¹å½¢æ—¶ä¸” cornerRadius ç­‰äºè¾¹é•¿ä¸€åŠæ—¶, åˆ™è¯¥æ–¹æ³•ä¼šæè¿°ä¸€ä¸ªåœ†å½¢è·¯å¾„. * @param rect: çŸ©å½¢è·¯å¾„çš„ Frame * @param cornerRadius: çŸ©å½¢çš„åœ†è§’åŠå¾„ */// Swiftconvenience init(roundedRect rect: CGRect, cornerRadius cornerRadius: CGFloat)// Objective-C + (instancetype)bezierPathWithRoundedRect:(CGRect)rect cornerRadius:(CGFloat)cornerRadius; // rounds all corners with the same horizontal and vertical radius æ ¹æ®ä¸€ä¸ªåœ†è§’çŸ©å½¢, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 12345678910111213/** * ç”»æŒ‡å®šè§’ä¸ºåœ†è§’çš„çŸ©å½¢ * è¯¥æ–¹æ³•å°†ä¼šåˆ›å»ºä¸€ä¸ªé—­åˆè·¯å¾„, è¯¥æ–¹æ³•ä¼šé¡ºæ—¶é’ˆæ–¹å‘è¿ç»­ç»˜åˆ¶ç›´çº¿å’Œæ›²çº¿. * @param rect: çŸ©å½¢è·¯å¾„çš„ Frame * @param corners: UIRectCorner æšä¸¾ç±»å‹, æŒ‡å®šçŸ©å½¢çš„å“ªä¸ªè§’å˜ä¸ºåœ†è§’ * @param cornerRadii: çŸ©å½¢çš„åœ†è§’åŠå¾„ */// Swiftconvenience init(roundedRect rect: CGRect, byRoundingCorners corners: UIRectCorner, cornerRadii cornerRadii: CGSize)// Objective-C + (instancetype)bezierPathWithRoundedRect:(CGRect)rect byRoundingCorners:(UIRectCorner)corners cornerRadii:(CGSize)cornerRadii; é€šè¿‡ä¸€ä¸ªåœ†å¼§, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 1234567891011121314151617/** * ç”»åœ†å¼§ * è¯¥æ–¹æ³•ä¼šåˆ›å»ºå‡ºä¸€ä¸ªå¼€æ”¾è·¯å¾„, åˆ›å»ºå‡ºæ¥çš„åœ†å¼§æ˜¯åœ†çš„ä¸€éƒ¨åˆ†. åœ¨é»˜è®¤çš„åæ ‡ç³»ç»Ÿä¸­, å¼€å§‹è§’åº¦ å’Œ ç»“æŸè§’åº¦ éƒ½æ˜¯åŸºäºå•ä½åœ†çš„(çœ‹ä¸‹é¢è¿™å¼ å›¾). è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å, currentPoint å°†ä¼šè®¾ç½®ä¸ºåœ†å¼§çš„ç»“æŸç‚¹. * @param center: å¼§æ‰€åœ¨çš„åœ†å¿ƒï¼ˆè¿™é‡Œä¸èƒ½ç›´æ¥ç”¨self.center,å› ä¸ºå®ƒæ˜¯ç›¸å¯¹äºå®ƒçš„çˆ¶æ§ä»¶çš„,é‡‡ç”¨rect å®½åº¦*0.5ã€é«˜åº¦*0.5ï¼‰ * @param radius: åœ†çš„åŠå¾„ * @param startAngle: å¼€å§‹è§’åº¦ * @param endAngle: ç»“æŸè§’åº¦ * @param clockwise: æ˜¯å¦é¡ºæ—¶é’ˆç»˜åˆ¶ï¼ˆYESé¡ºæ—¶é’ˆ NOé€†æ—¶é’ˆï¼‰ */// Swiftconvenience init(arcCenter center: CGPoint, radius radius: CGFloat, startAngle startAngle: CGFloat, endAngle endAngle: CGFloat, clockwise clockwise: Bool)// Objective-C + (instancetype)bezierPathWithArcCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise; é€šè¿‡ä¸€ä¸ª CGPath, åˆ›å»ºå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡ 1234// Swiftconvenience init(CGPath CGPath: CGPath)// Objective-C+ (instancetype)bezierPathWithCGPath:(CGPathRef)CGPath; åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„BezierPath, è¿™ä¸ª BezierPath çš„æ–¹å‘æ˜¯åŸ BezierPath çš„åæ–¹å‘ 123456789 // Modified paths/** * é€šè¿‡è¯¥æ–¹æ³•åè½¬ä¸€æ¡è·¯å¾„, å¹¶ä¸ä¼šä¿®æ”¹è¯¥è·¯å¾„çš„æ ·å­. å®ƒä»…ä»…æ˜¯ä¿®æ”¹äº†ç»˜åˆ¶çš„æ–¹å‘ * @return: è¿”å›ä¸€ä¸ªæ–°çš„ UIBezierPath å¯¹è±¡, å½¢çŠ¶å’ŒåŸæ¥è·¯å¾„çš„å½¢çŠ¶ä¸€æ ·,ä½†æ˜¯ç»˜åˆ¶çš„æ–¹å‘ç›¸å. */// Swiftfunc bezierPathByReversingPath() -&gt; UIBezierPath// Objective-C - (UIBezierPath *)bezierPathByReversingPath NS_AVAILABLE_IOS(6_0); æ„é€ è·¯å¾„ å°† UIBezierPath å¯¹è±¡çš„ currentPoint ç§»åŠ¨åˆ°æŒ‡å®šçš„ç‚¹ 12345678910 // Path construction/** * è®¾ç½®èµ·ç‚¹ * å¦‚æœå½“å‰æœ‰æ­£åœ¨ç»˜åˆ¶çš„å­è·¯å¾„, è¯¥æ–¹æ³•åˆ™ä¼šéšå¼çš„ç»“æŸå½“å‰è·¯å¾„, å¹¶å°† currentPoint è®¾ç½®ä¸ºæŒ‡å®šç‚¹. * @param point: å½“å‰åæ ‡ç³»ç»Ÿä¸­çš„æŸä¸€ç‚¹ */// Swiftfunc moveToPoint(_ point: CGPoint)// Objective-C - (void)moveToPoint:(CGPoint)point; åœ¨å½“å‰å­è·¯å¾„ä¸­è¿½åŠ ä¸€æ¡ç›´çº¿ 12345678910111213/** * æ·»åŠ ä¸€æ ¹çº¿åˆ°ç»ˆç‚¹ * è¯¥æ–¹æ³•å°†ä¼šä» currentPoint åˆ° æŒ‡å®šç‚¹ é“¾æ¥ä¸€æ¡ç›´çº¿. * @param point: ç»˜åˆ¶ç›´çº¿çš„ç»ˆç‚¹åæ ‡, å½“å‰åæ ‡ç³»ç»Ÿä¸­çš„æŸä¸€ç‚¹ * Note: åœ¨è¿½åŠ å®Œè¿™æ¡ç›´çº¿å, è¯¥æ–¹æ³•å°†ä¼šæ›´æ–° currentPoint ä¸º æŒ‡å®šç‚¹ è°ƒç”¨è¯¥æ–¹æ³•ä¹‹å‰, ä½ å¿…é¡»å…ˆè®¾ç½® currentPoint. å¦‚æœå½“å‰ç»˜åˆ¶è·¯å¾„ ä¸ºç©º, å¹¶ä¸”æœªè®¾ç½® currentPoint, é‚£ä¹ˆè°ƒç”¨è¯¥æ–¹æ³•å°†ä¸ä¼šäº§ç”Ÿä»»ä½• æ•ˆæœ. */// Swiftfunc addLineToPoint(_ point: CGPoint)// Objective-C - (void)addLineToPoint:(CGPoint)point; åœ¨å½“å‰å­è·¯å¾„ä¸­è¿½åŠ ä¸€æ¡åœ†å¼§ 1234567891011/** * ç”»æŒ‡å®šä¸€æ¡åœ†å¼§ * è¯¥æ–¹æ³•å°†ä¼šä» currentPoint æ·»åŠ ä¸€æ¡æŒ‡å®šçš„åœ†å¼§. * è¯¥æ–¹æ³•çš„ä»‹ç»å’Œ bezierPathWithArcCenteræ„é€ æ–¹æ³•ä¸­çš„ä¸€æ ·. è¯·å‰å¾€ä¸Šæ–‡æŸ¥çœ‹ * @param center: åœ†å¿ƒ * @param radius: åŠå¾„ * @param startAngle: å¼€å§‹è§’åº¦ * @param endAngle: ç»“æŸè§’åº¦ * @param clockwise: æ˜¯å¦é¡ºæ—¶é’ˆç»˜åˆ¶ */ - (void)addArcWithCenter:(CGPoint)center radius:(CGFloat)radius startAngle:(CGFloat)startAngle endAngle:(CGFloat)endAngle clockwise:(BOOL)clockwise NS_AVAILABLE_IOS(4_0); åœ¨å½“å‰ å­è·¯ç»ä¸­è¿½åŠ ä¸€æ¡ äºŒæ¬¡è´å¡å°”æ›²çº¿ 1234567891011121314151617/** * ç”»äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼ˆç”±ä¸€ä¸ªæ§åˆ¶ç‚¹æ¥æ§åˆ¶ï¼‰ * è¯¥æ–¹æ³•å°†ä¼šä» currentPoint åˆ° æŒ‡å®šçš„ endPoint è¿½åŠ ä¸€æ¡äºŒæ¬¡è´å¡å°”æ›²çº¿. * currentPointã€endPointã€controlPoint ä¸‰è€…çš„å…³ç³»æœ€ç»ˆå®šä¹‰äº†äºŒæ¬¡è´å¡å°”æ›²çº¿çš„å½¢çŠ¶. * äºŒæ¬¡è´å¡å°”æ›²çº¿çš„å¼¯æ›²ç”±ä¸€ä¸ªæ§åˆ¶ç‚¹æ¥æ§åˆ¶. å¦‚ä¸‹å›¾æ‰€ç¤º Note: è°ƒç”¨è¯¥æ–¹æ³•å‰, ä½ å¿…é¡»å…ˆè®¾ç½® currentPoint, å¦‚æœè·¯å¾„ä¸ºç©º, å¹¶ä¸”å°šæœªè®¾ç½® currentPoint, è°ƒç”¨è¯¥æ–¹æ³•åˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœ. å½“æ·»åŠ å®Œè´å¡å°”æ›²çº¿å, è¯¥æ–¹æ³•å°†ä¼šè‡ªåŠ¨æ›´æ–° currentPoint ä¸º æŒ‡å®šçš„ç»“æŸç‚¹ * @param endPoint: ç»ˆç‚¹ * @param controlPoint: å¼¯æ›²æ–¹å‘ç‚¹1 */// Swiftfunc addQuadCurveToPoint(_ endPoint: CGPoint, controlPoint controlPoint: CGPoint)// Objective-C - (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint; åœ¨å½“å‰ å­è·¯ç»ä¸­è¿½åŠ ä¸€æ¡ ä¸‰æ¬¡è´å¡å°”æ›²çº¿ 12345678910111213141516171819/** * åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡@åŸåˆ›ç®€ä¹¦-ç å‘˜ç™½å¼€æ°´lnã€‚ * ç”»ä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼ˆç”±ä¸¤ä¸ªæ§åˆ¶ç‚¹æ¥æ§åˆ¶ï¼‰ * è¯¥æ–¹æ³•å°†ä¼šä» currentPoint åˆ° æŒ‡å®šçš„ endPoint è¿½åŠ ä¸€æ¡ä¸‰æ¬¡è´å¡å°”æ›²çº¿. * ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„å¼¯æ›²ç”±ä¸¤ä¸ªæ§åˆ¶ç‚¹æ¥æ§åˆ¶. å¦‚ä¸‹å›¾æ‰€ç¤º * Note: è°ƒç”¨è¯¥æ–¹æ³•å‰, ä½ å¿…é¡»å…ˆè®¾ç½® currentPoint, å¦‚æœè·¯å¾„ä¸ºç©º, å¹¶ä¸”å°šæœªè®¾ç½® currentPoint, è°ƒç”¨è¯¥æ–¹æ³•åˆ™ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœ. å½“æ·»åŠ å®Œè´å¡å°”æ›²çº¿å, è¯¥æ–¹æ³•å°†ä¼šè‡ªåŠ¨æ›´æ–° currentPoint ä¸º æŒ‡å®šçš„ç»“æŸç‚¹ * @param endPoint: ç»ˆç‚¹ * @param controlPoint1: å¼¯æ›²æ–¹å‘ç‚¹1 * @param controlPoint2: å¼¯æ›²æ–¹å‘ç‚¹2 */// Swiftfunc addCurveToPoint(_ endPoint: CGPoint, controlPoint1 controlPoint1: CGPoint, controlPoint2 controlPoint2: CGPoint)// Objective-C - (void)addCurveToPoint:(CGPoint)endPoint controlPoint1:(CGPoint)controlPoint1 controlPoint2:(CGPoint)controlPoint2; å…³é—­å½“å‰å­è·¯ç» 12345678910/** * é—­åˆè·¯å¾„ * è¯¥æ–¹æ³•å°†ä¼šä» currentPoint åˆ°å­è·¯ç»çš„èµ·ç‚¹ ç»˜åˆ¶ä¸€æ¡ç›´çº¿, * ä»¥æ­¤æ¥å…³é—­å½“å‰çš„è‡ªè·¯å¾„. ç´§æ¥ç€è¯¥æ–¹æ³•å°†ä¼šæ›´æ–° currentPoint * ä¸º åˆšæ·»åŠ çš„è¿™æ¡ç›´çº¿çš„ç»ˆç‚¹, ä¹Ÿå°±æ˜¯å½“å‰å­è·¯ç»çš„èµ·ç‚¹. */// Swiftfunc closePath()// Objective-C- (void)closePath; ç§»é™¤ UIBezierPath å¯¹è±¡ä¸­çš„æ‰€æœ‰ç‚¹, æ•ˆæœä¹Ÿå°±ç­‰åŒäºç§»é™¤æ‰€æœ‰å­è·¯ç» 1234// Swiftfunc removeAllPoints()// Objective-C- (void)removeAllPoints; å°†æŒ‡å®š UIBezierPath ä¸­çš„å†…å®¹æ·»åŠ åˆ°å½“å‰ UIBezierPath å¯¹è±¡ä¸­ 123456789/** * è¿½åŠ è·¯å¾„ * è¯¥æ–¹æ³•å°†ä¼šåœ¨å½“å‰ UIBezierPath å¯¹è±¡çš„è·¯å¾„ä¸­è¿½åŠ  * æŒ‡å®šçš„ UIBezierPath å¯¹è±¡ä¸­çš„å†…å®¹. */// Swiftfunc appendPath(_ bezierPath: UIBezierPath)// Objective-C- (void)appendPath:(UIBezierPath *)bezierPath; UIBezierPath ä¸­çš„ CGPath å¯¹è±¡ 1234567891011/** * è·å–è¿™ä¸ªå±æ€§, ä½ å°†ä¼šè·å¾—ä¸€ä¸ªä¸å¯å˜çš„ CGPathRef å¯¹è±¡, * ä»–å¯ä»¥ä¼ å…¥ CoreGraphics æä¾›çš„å‡½æ•°ä¸­ * ä½ å¯ä»¥æ˜¯ç”¨ CoreGraphics æ¡†æ¶æä¾›çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªè·¯å¾„, * å¹¶ç»™è¿™ä¸ªå±æ€§èµ‹å€¼, å½“æ—¶è®¾ç½®äº†ä¸€ä¸ªæ–°çš„è·¯å¾„å, * è¿™ä¸ªå°†ä¼šå¯¹ä½ ç»™å‡ºçš„è·¯å¾„å¯¹è±¡è¿›è¡Œ Copy æ“ä½œ */// Swiftvar CGPath: CGPath// Objective-C@property(nonatomic) CGPathRef CGPath; ç»˜å›¾è·¯å¾„ä¸­çš„å½“å‰ç‚¹ 12345678/** * è¯¥å±æ€§çš„å€¼, å°†ä¼šæ˜¯ä¸‹ä¸€æ¡ç»˜åˆ¶çš„ç›´çº¿æˆ–æ›²çº¿çš„èµ·å§‹ç‚¹. * å¦‚æœå½“å‰è·¯å¾„ä¸ºç©º, é‚£ä¹ˆè¯¥å±æ€§çš„å€¼å°†ä¼šæ˜¯ CGPointZero */// Swiftvar currentPoint: CGPoint &#123; get &#125;// Objective-C@property(nonatomic, readonly) CGPoint currentPoint; ç»˜å›¾å±æ€§ çº¿å®½ 1234567/** * çº¿å®½å±æ€§å®šä¹‰äº† `UIBezierPath` å¯¹è±¡ä¸­ç»˜åˆ¶çš„æ›²çº¿è§„æ ¼. é»˜è®¤ä¸º: 1.0 */// Swiftvar lineWidth: CGFloat// Objective-C@property(nonatomic) CGFloat lineWidth; æ›²çº¿ç»ˆç‚¹æ ·å¼ 1234567891011121314/** * è¯¥å±æ€§åº”ç”¨äºæ›²çº¿çš„ç»ˆç‚¹å’Œèµ·ç‚¹. è¯¥å±æ€§åœ¨ä¸€ä¸ªé—­åˆå­è·¯ç»ä¸­æ˜¯æ— æ•ˆæœçš„. é»˜è®¤ä¸º: kCGLineCapButt */// Swiftvar lineCapStyle: CGLineCap// Objective-C@property(nonatomic) CGLineCap lineCapStyle;/* Line cap styles. */typedef CF_ENUM(int32_t, CGLineCap) &#123; kCGLineCapButt,// kCGLineCapRound,// åœ†å¼§ kCGLineCapSquare //&#125;; æ›²çº¿è¿æ¥ç‚¹æ ·å¼ 1234567891011121314/** * é»˜è®¤ä¸º: kCGLineJoinMiter. */// Swiftvar lineJoinStyle: CGLineJoin// Objective-C@property(nonatomic) CGLineJoin lineJoinStyle;/* Line join styles. */typedef CF_ENUM(int32_t, CGLineJoin) &#123; kCGLineJoinMiter,// å°–çš„ kCGLineJoinRound,// åœ†å¼§ kCGLineJoinBevel // æ–œé¢&#125;; å†…è§’å’Œå¤–è§’è·ç¦» 12345678910111213/** * æ–œæ¥ç‚¹é•¿åº¦ * ä¸¤æ¡çº¿äº¤æ±‡å¤„å†…è§’å’Œå¤–è§’ä¹‹é—´çš„æœ€å¤§è·ç¦», åªæœ‰å½“è¿æ¥ç‚¹æ ·å¼ä¸º kCGLineJoinMiter * æ—¶æ‰ä¼šç”Ÿæ•ˆï¼Œæœ€å¤§é™åˆ¶ä¸º10 * æˆ‘ä»¬éƒ½çŸ¥é“, ä¸¤æ¡ç›´çº¿ç›¸äº¤æ—¶, å¤¹è§’è¶Šå°, æ–œæ¥é•¿åº¦å°±è¶Šå¤§. * è¯¥å±æ€§å°±æ˜¯ç”¨æ¥æ§åˆ¶æœ€å¤§æ–œæ¥é•¿åº¦çš„. * å½“æˆ‘ä»¬è®¾ç½®äº†è¯¥å±æ€§, å¦‚æœæ–œæ¥é•¿åº¦è¶…è¿‡æˆ‘ä»¬è®¾ç½®çš„èŒƒå›´, * åˆ™è¿æ¥å¤„å°†ä¼šä»¥ kCGLineJoinBevel è¿æ¥ç±»å‹è¿›è¡Œæ˜¾ç¤º. */// Swiftvar miterLimit: CGFloat// Objective-C@property(nonatomic) CGFloat miterLimit; æ¸²æŸ“ç²¾åº¦ 12345678910111213/** * è¯¥å±æ€§ç”¨æ¥ç¡®å®šæ¸²æŸ“æ›²çº¿è·¯å¾„çš„ç²¾ç¡®åº¦. * è¯¥å±æ€§çš„å€¼ç”¨æ¥æµ‹é‡çœŸå®æ›²çº¿çš„ç‚¹å’Œæ¸²æŸ“æ›²çº¿çš„ç‚¹çš„æœ€å¤§å…è®¸è·ç¦». * å€¼è¶Šå°, æ¸²æŸ“ç²¾åº¦è¶Šé«˜, ä¼šäº§ç”Ÿç›¸å¯¹æ›´å¹³æ»‘çš„æ›²çº¿, ä½†æ˜¯éœ€è¦èŠ±è´¹æ›´ * å¤šçš„è®¡ç®—æ—¶é—´. å€¼è¶Šå¤§å¯¼è‡´åˆ™ä¼šé™ä½æ¸²æŸ“ç²¾åº¦, è¿™ä¼šä½¿å¾—æ¸²æŸ“çš„æ›´è¿…é€Ÿ. flatness çš„é»˜è®¤å€¼ä¸º 0.6. * Note: å¤§å¤šæ•°æƒ…å†µä¸‹, æˆ‘ä»¬éƒ½ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªå±æ€§çš„å€¼. ç„¶è€Œå½“æˆ‘ä»¬ å¸Œæœ›ä»¥æœ€å°çš„æ¶ˆè€—å»ç»˜åˆ¶ä¸€ä¸ªä¸´æ—¶çš„æ›²çº¿æ—¶, æˆ‘ä»¬ä¹Ÿè®¸ä¼šä¸´æ—¶å¢ å¤§è¿™ä¸ªå€¼, æ¥è·å¾—æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦. */// Swiftvar flatness: CGFloat// Objective-C@property(nonatomic) CGFloat flatness; æ˜¯å¦ä½¿ç”¨åŸºå¶å¡«å……è§„åˆ™ 12345678/** * è®¾ç½®ä¸º YES, åˆ™è·¯å¾„å°†ä¼šä½¿ç”¨ åŸºå¶è§„åˆ™ (even-odd) è¿›è¡Œå¡«å……. * è®¾ç½®ä¸º NO, åˆ™è·¯å¾„å°†ä¼šä½¿ç”¨ éé›¶è§„åˆ™ (non-zero) è§„åˆ™è¿›è¡Œå¡«å……. */// Swiftvar usesEvenOddFillRule: Bool// Objective-C@property(nonatomic) BOOL usesEvenOddFillRule; è™šçº¿ 1234567891011121314151617181920212223/** * @param pattern: è¯¥å±æ€§æ˜¯ä¸€ä¸ª C è¯­è¨€çš„æ•°ç»„, å…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ CGFloat æ•°ç»„ä¸­çš„å…ƒç´ ä»£è¡¨ç€çº¿æ®µæ¯ä¸€éƒ¨åˆ†çš„é•¿åº¦, ç¬¬ä¸€ä¸ªå…ƒç´ ä»£è¡¨çº¿æ®µçš„ç¬¬ä¸€æ¡çº¿, ç¬¬äºŒä¸ªå…ƒç´ ä»£è¡¨çº¿æ®µä¸­çš„ç¬¬ä¸€ä¸ªé—´éš™. è¿™ä¸ªæ•°ç»„ä¸­çš„å€¼æ˜¯è½®æµçš„. æ¥è§£é‡Šä¸€ä¸‹ ä»€ä¹ˆå«è½®æµçš„. * ä¸¾ä¸ªä¾‹å­: å£°æ˜ä¸€ä¸ªæ•°ç»„ CGFloat dash[] = @&#123;3.0, 1.0&#125;; è¿™æ„å‘³ç€ç»˜åˆ¶çš„è™šçº¿çš„ç¬¬ä¸€éƒ¨åˆ†é•¿åº¦ä¸º3.0, ç¬¬ä¸€ä¸ªé—´éš™é•¿åº¦ä¸º1.0, è™šçº¿çš„ ç¬¬äºŒéƒ¨åˆ†é•¿åº¦ä¸º3.0, ç¬¬äºŒä¸ªé—´éš™é•¿åº¦ä¸º1.0. ä»¥æ­¤ç±»æ¨. * @param count: è¿™ä¸ªå‚æ•°æ˜¯ pattern æ•°ç»„çš„ä¸ªæ•° * @param phase: è¿™ä¸ªå‚æ•°ä»£è¡¨ç€, è™šçº¿ä»å“ªé‡Œå¼€å§‹ç»˜åˆ¶. * ä¸¾ä¸ªä¾‹å­: è¿™æ˜¯ phase ä¸º 6. pattern[] = @&#123;5, 2, 3, 2&#125;; é‚£ä¹ˆè™šçº¿å°†ä¼š ç¬¬ä¸€ä¸ªé—´éš™çš„ä¸­é—´éƒ¨åˆ†å¼€å§‹ç»˜åˆ¶, å¦‚æœä¸æ˜¯å¾ˆæ˜ç™½å°±è¯·ç»§ç»­å¾€ä¸‹çœ‹, ä¸‹æ–‡å®æˆ˜éƒ¨åˆ†ä¼šå¯¹è™šçº¿è¿›è¡Œè®²è§£. */// Swiftfunc setLineDash(_ pattern: UnsafePointer&lt;CGFloat&gt;,count count: Int,phase phase: CGFloat)// Objective-C- (void)setLineDash:(const CGFloat *)pattern count:(NSInteger)count phase:(CGFloat)phase; é‡æ–°è·å–è™šçº¿çš„æ¨¡å¼ 123456789101112131415/** * è¯¥æ–¹æ³•å¯ä»¥é‡æ–°è·å–ä¹‹å‰è®¾ç½®è¿‡çš„è™šçº¿æ ·å¼. * Note: pattern è¿™ä¸ªå‚æ•°çš„å®¹é‡å¿…é¡»å¤§äºè¯¥æ–¹æ³•è¿”å›æ•°ç»„çš„å®¹é‡. å¦‚æœæ— æ³•ç¡®å®šæ•°ç»„çš„å®¹é‡, é‚£ä¹ˆå¯ä»¥è°ƒç”¨ä¸¤æ¬¡è¯¥æ–¹æ³•, ç¬¬ä¸€æ¬¡ è°ƒç”¨è¯¥æ–¹æ³•çš„æ—¶å€™, ä¼ å…¥ count å‚æ•°, ç„¶ååœ¨ç”¨ count å‚æ•° æ¥ç”³è¯· pattern æ•°ç»„çš„å†…å­˜ç©ºé—´. ç„¶åå†ç¬¬äºŒæ¬¡æ­£å¸¸çš„è°ƒç”¨è¯¥æ–¹æ³• */// Swiftfunc getLineDash(_ pattern: UnsafeMutablePointer&lt;CGFloat&gt;,count count: UnsafeMutablePointer&lt;Int&gt;,phase phase: UnsafeMutablePointer&lt;CGFloat&gt;)// Objective-C- (void)getLineDash:(CGFloat *)pattern count:(NSInteger *)count phase:(CGFloat *)phase; ç»˜åˆ¶è·¯å¾„ å¡«å……è·¯å¾„ 1234567891011/** * å¡«å……ï¼ˆå®å¿ƒï¼‰ * è¯¥æ–¹æ³•å½“å‰çš„å¡«å……é¢œè‰² å’Œ ç»˜å›¾å±æ€§å¯¹è·¯å¾„çš„å°é—­åŒºåŸŸè¿›è¡Œå¡«å……. * å¦‚æœå½“å‰è·¯å¾„æ˜¯ä¸€æ¡å¼€æ”¾è·¯å¾„, è¯¥æ–¹æ³•å°†ä¼šéšå¼çš„å°†è·¯å¾„è¿›è¡Œå…³é—­åè¿›è¡Œå¡«å…… * è¯¥æ–¹æ³•åœ¨è¿›è¡Œå¡«å……æ“ä½œä¹‹å‰, ä¼šè‡ªåŠ¨ä¿å­˜å½“å‰ç»˜å›¾çš„çŠ¶æ€, æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ * è‡ªå·±æ‰‹åŠ¨çš„å»ä¿å­˜ç»˜å›¾çŠ¶æ€äº†. */// Swiftfunc fill()// Objective-C- (void)fill; æ··åˆæ¨¡å¼è¿›è¡Œå¡«å…… 12345678910111213141516/** * è¯¥æ–¹æ³•å½“å‰çš„å¡«å……é¢œè‰² å’Œ ç»˜å›¾å±æ€§ (å¤–åŠ æŒ‡å®šçš„æ··åˆæ¨¡å¼ å’Œ é€æ˜åº¦) * å¯¹è·¯å¾„çš„å°é—­åŒºåŸŸè¿›è¡Œå¡«å……. å¦‚æœå½“å‰è·¯å¾„æ˜¯ä¸€æ¡å¼€æ”¾è·¯å¾„, è¯¥æ–¹æ³•å°† * ä¼šéšå¼çš„å°†è·¯å¾„è¿›è¡Œå…³é—­åè¿›è¡Œå¡«å…… * è¯¥æ–¹æ³•åœ¨è¿›è¡Œå¡«å……æ“ä½œä¹‹å‰, ä¼šè‡ªåŠ¨ä¿å­˜å½“å‰ç»˜å›¾çš„çŠ¶æ€, æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ * è‡ªå·±æ‰‹åŠ¨çš„å»ä¿å­˜ç»˜å›¾çŠ¶æ€äº†. * * @param blendMode: æ··åˆæ¨¡å¼å†³å®šäº†å¦‚ä½•å’Œå·²ç»å­˜åœ¨çš„è¢«æ¸²æŸ“è¿‡çš„å†…å®¹è¿›è¡Œåˆæˆ * @param alpha: å¡«å……è·¯å¾„æ—¶çš„é€æ˜åº¦ */// Swiftfunc fillWithBlendMode(_ blendMode: CGBlendMode,alpha alpha: CGFloat)// Objective-C- (void)fillWithBlendMode:(CGBlendMode)blendMode alpha:(CGFloat)alpha; æè¾¹è·¯å¾„ 1234// Swiftfunc stroke()// Objective-C- (void)stroke; æ··åˆæ¨¡å¼è¿›è¡Œå¡«å…… 123456789/** * @param blendMode: æ··åˆæ¨¡å¼å†³å®šäº†å¦‚ä½•å’Œå·²ç»å­˜åœ¨çš„è¢«æ¸²æŸ“è¿‡çš„å†…å®¹è¿›è¡Œåˆæˆ * @param alpha: å¡«å……è·¯å¾„æ—¶çš„é€æ˜åº¦ */// Swiftfunc strokeWithBlendMode(_ blendMode: CGBlendMode,alpha alpha: CGFloat)// Objective-C- (void)strokeWithBlendMode:(CGBlendMode)blendMode alpha:(CGFloat)alpha; å‰ªåˆ‡è·¯å¾„ å‰ªåˆ‡è·¯å¾„ 123456789101112131415/** * è¯¥æ–¹æ³•å°†ä¼šä¿®æ”¹å½“å‰ç»˜å›¾ä¸Šä¸‹æ–‡çš„å¯è§†åŒºåŸŸ. * å½“è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å, ä¼šå¯¼è‡´æ¥ä¸‹æ¥æ‰€æœ‰çš„æ¸²æŸ“æ“ä½œ, åªä¼šåœ¨å‰ªåˆ‡ä¸‹æ¥çš„åŒºåŸŸå†…è¿›è¡Œ, åŒºåŸŸå¤–çš„å†…å®¹å°†ä¸ä¼šè¢«æ¸²æŸ“. * å¦‚æœä½ å¸Œæœ›æ‰§è¡Œæ¥ä¸‹æ¥çš„ç»˜å›¾æ—¶, åˆ é™¤å‰ªåˆ‡åŒºåŸŸ, é‚£ä¹ˆä½ å¿…é¡»åœ¨è°ƒç”¨è¯¥æ–¹æ³•å‰, å…ˆä½¿ç”¨CGContextSaveGState æ–¹æ³•ä¿å­˜å½“å‰çš„ç»˜å›¾çŠ¶æ€, å½“ä½ ä¸å†éœ€è¦è¿™ä¸ªå‰ªåˆ‡åŒºåŸŸçš„æ—¶å€™, ä½ åªéœ€è¦ä½¿ç”¨ CGContextRestoreGState æ–¹æ³•ï¼Œ æ¥æ¢å¤ä¹‹å‰ä¿å­˜çš„ç»˜å›¾çŠ¶æ€å°±å¯ä»¥äº†. * @param blendMode: æ··åˆæ¨¡å¼å†³å®šäº†å¦‚ä½•å’Œå·²ç»å­˜åœ¨çš„è¢«æ¸²æŸ“è¿‡çš„å†…å®¹è¿›è¡Œåˆæˆ * @param alpha: å¡«å……è·¯å¾„æ—¶çš„é€æ˜åº¦ */// Swiftfunc addClip()// Objective-C- (void)addClip; Hit Detection æ˜¯å¦åŒ…å«æŸä¸ªç‚¹ 123456789101112131415/** * è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼, å½“æ›²çº¿çš„è¦†ç›–åŒºåŸŸåŒ…å« * æŒ‡å®šçš„ç‚¹(å†…éƒ¨ç‚¹)ï¼Œ åˆ™è¿”å› YES, å¦åˆ™è¿”å› NO. * Note: å¦‚æœå½“å‰çš„è·¯å¾„æ˜¯ä¸€ä¸ªå¼€æ”¾çš„è·¯å¾„, é‚£ä¹ˆ å°±ç®—æŒ‡å®šç‚¹åœ¨è·¯å¾„è¦†ç›–èŒƒå›´å†…, è¯¥æ–¹æ³•ä»ç„¶ä¼š è¿”å› NO, æ‰€ä»¥å¦‚æœä½ æƒ³åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨ä¸€ä¸ª å¼€æ”¾è·¯å¾„çš„èŒƒå›´å†…æ—¶, ä½ éœ€è¦å…ˆCopyä¸€ä»½è·¯å¾„, å¹¶è°ƒç”¨ -(void)closePath; å°†è·¯å¾„å°é—­, ç„¶å å†è°ƒç”¨æ­¤æ–¹æ³•æ¥åˆ¤æ–­æŒ‡å®šç‚¹æ˜¯å¦æ˜¯å†…éƒ¨ç‚¹. * @param point: æŒ‡å®šç‚¹. */// Swiftfunc containsPoint(_ point: CGPoint) -&gt; Bool// Objective-C- (BOOL) containsPoint:(CGPoint)point; è·¯å¾„æ˜¯å¦ä¸ºç©º 123456789/** * æ£€æµ‹å½“å‰è·¯å¾„æ˜¯å¦ç»˜åˆ¶è¿‡ç›´çº¿æˆ–æ›²çº¿. * Note: è®°ä½, å°±ç®—ä½ ä»…ä»…è°ƒç”¨äº† moveToPoint æ–¹æ³• é‚£ä¹ˆå½“å‰è·¯å¾„ä¹Ÿè¢«çœ‹åšä¸ä¸ºç©º. */// Swiftvar empty: Bool &#123; get &#125;// Objective-C@property (readonly, getter=isEmpty) BOOL empty; è·¯å¾„è¦†ç›–çš„çŸ©å½¢åŒºåŸŸ 123456789/** * è¯¥å±æ€§æè¿°çš„æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®Œå…¨åŒ…å«è·¯å¾„ä¸­æ‰€æœ‰ç‚¹ * çš„ä¸€ä¸ªæœ€å°çš„çŸ©å½¢åŒºåŸŸ. è¯¥åŒºåŸŸåŒ…å«äºŒæ¬¡è´å¡å°” * æ›²çº¿å’Œä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„æ§åˆ¶ç‚¹. */// Swiftvar bounds: CGRect &#123; get &#125;// Objective-C@property (nonatomic, readonly) CGRect bounds; Apply Transform 12345678/** * è¯¥æ–¹æ³•å°†ä¼šç›´æ¥å¯¹è·¯å¾„ä¸­çš„æ‰€æœ‰ç‚¹è¿›è¡ŒæŒ‡å®šçš„æ”¾å°„ * å˜æ¢æ“ä½œ. */// Swiftfunc applyTransform(_ transform: CGAffineTransform)// Objective-C- (void)applyTransform:(CGAffineTransform)transform; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// Swiftstruct UIRectCorner : OptionSetType &#123;init(rawValue rawValue: UInt)static var TopLeft: UIRectCorner &#123; get &#125;static var TopRight: UIRectCorner &#123; get &#125;static var BottomLeft: UIRectCorner &#123; get &#125;static var BottomRight: UIRectCorner &#123; get &#125;static var AllCorners: UIRectCorner &#123; get &#125;&#125;// Objective-Cenum &#123;UIRectCornerTopLeft = 1 &lt;&lt; 0,UIRectCornerTopRight = 1 &lt;&lt; 1,UIRectCornerBottomLeft = 1 &lt;&lt; 2,UIRectCornerBottomRight = 1 &lt;&lt; 3,UIRectCornerAllCorners = ~0&#125;;typedef NSUInteger UIRectCorner;å¸¸æ•°(Constants):UIRectCornerTopLeftThe top-left corner of the rectangle.çŸ©å½¢çš„å·¦ä¸Šè§’.Available in iOS 3.2 and later.UIRectCornerTopRightThe top-right corner of the rectangle.çŸ©å½¢çš„å³ä¸Šè§’.Available in iOS 3.2 and later.UIRectCornerBottomLeftThe bottom-left corner of the rectangle.çŸ©å½¢çš„å·¦ä¸‹è§’.Available in iOS 3.2 and later.UIRectCornerBottomRightThe bottom-right corner of the rectangle.çŸ©å½¢çš„å³ä¸‹è§’.Available in iOS 3.2 and later.UIRectCornerAllCornersAll corners of the rectangle.çŸ©å½¢çš„æ‰€æœ‰çš„è§’.Available in iOS 3.2 and later.æŒ‡å®šçš„å¸¸æ•°åæ˜ äº†ä¸€ä¸ªæ²¡æœ‰è¢« ä»¿å°„å˜æ¢ä¿®æ”¹å’Œå·²ç»åœ¨é»˜è®¤åæ ‡ç³»ä¸Šç»˜åˆ¶çš„çŸ©å½¢çš„æ‰€æœ‰è§’.(åŸç‚¹åœ¨å·¦ä¸Šè§’å’Œ ??æ‰©æ•£çš„å€¼(positive values)å‘ä¸‹å»¶ä¼¸åˆ°å³è¾¹).å¯¼å…¥å£°æ˜(Import Statement)// Swiftimport UIKit// Objective-C@import UIKit; å®æˆ˜ç¤ºä¾‹UIBezierPath.h æ–‡ä»¶å¤§å®¶å®Œå…¨çš„è¿‡äº†ä¸€éäº†, å…¶å®çœ‹ä¸Šå»è¿˜æ˜¯è›®ç®€å•è¿‡çš„æ˜‚.. æ¥ä¸‹æ¥å°±åˆ°äº†æ¿€åŠ¨äººå¿ƒçš„å®æˆ˜ç¯èŠ‚äº†. æˆ‘ä»¬æ¥ç®€å•çš„å†™å‡ å¥ä»£ç , çœ‹çœ‹æ•ˆæœå§.1ã€bezierPathByReversingPath:è·¯å¾„åè½¬12345678910111213141516171819202122232425- (void) drawRect:(CGRect)rect &#123; // 1. éšä¾¿ç”»ä¸€ä¸ªè·¯å¾„å‡ºæ¥. UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint: CGPointMake(10, 10)]; [path addLineToPoint: CGPointMake(80, 40)]; [path addLineToPoint: CGPointMake( 40, 80)]; [path addLineToPoint: CGPointMake(40, 40)]; path.lineWidth = 3; // 2. ä¸ºè¿™æ¡è·¯å¾„åˆ¶ä½œä¸€ä¸ªåè½¬è·¯å¾„ UIBezierPath *reversingPath = [path bezierPathByReversingPath]; reversingPath.lineWidth = 3; // 3. ä¸ºäº†é¿å…ä¸¤æ¡è·¯å¾„æ··æ·†åœ¨ä¸€èµ·, æˆ‘ä»¬ä¸ºç¬¬ä¸€æ¡è·¯å¾„åšä¸€ä¸ªä½ç§» CGAffineTransform transform = CGAffineTransformMakeTranslation(200, 0); [path applyTransform: transform]; // 4. è®¾ç½®é¢œè‰², å¹¶ç»˜åˆ¶è·¯å¾„ [[UIColor redColor] set]; [path stroke]; [[UIColor greenColor] set]; [reversingPath stroke];&#125; æ•ˆæœï¼š 2ã€setLineDash: è™šçº¿1234567891011121314151617181920212223242526272829303132333435363738- (void) typeDashLine &#123; // 1. å…ˆåˆ›å»ºä¸‰æ¡è·¯å¾„, æœ‰å¯¹æ¯”æ›´æœ‰åŠ©äºç†è§£ UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint: CGPointMake(80, 40)]; [path addLineToPoint: CGPointMake(self.frame.size.width - 40, 40)]; path.lineWidth = 2; UIBezierPath *path1 = [UIBezierPath bezierPath]; [path1 moveToPoint: CGPointMake(80, 80)]; [path1 addLineToPoint: CGPointMake(self.frame.size.width - 40, 80)]; path1.lineWidth = 2; UIBezierPath *path2 = [UIBezierPath bezierPath]; [path2 moveToPoint: CGPointMake(80, 120)]; [path2 addLineToPoint: CGPointMake(self.frame.size.width - 40, 120)]; path2.lineWidth = 2; // 2. è¿™éƒ¨åˆ†æ˜¯é…ç½®ä¸‰æ¡è·¯å¾„è™šçº¿çš„è§„æ ¼, é‡ç‚¹ä¸»è¦æ˜¯è¿™éƒ¨åˆ†. CGFloat dashLineConfig[] = &#123;8.0, 4.0&#125;; [path setLineDash: dashLineConfig count: 2 phase: 0]; CGFloat dashLineConfig1[] = &#123;8.0, 4.0, 16.0, 8.0&#125;; [path1 setLineDash: dashLineConfig1 count: 4 phase: 0]; CGFloat dashLineConfig2[] = &#123;8.0, 4.0, 16.0, 8.0&#125;; [path2 setLineDash: dashLineConfig2 count: 4 phase: 12]; // 3. ç»˜åˆ¶ [[UIColor orangeColor] set]; [path stroke]; [path1 stroke]; [path2 stroke];&#125; æ•ˆæœï¼š è¦æƒ³åšå‡ºå¤šç‰›é€¼é…·ç‚«çš„åŠ¨ç”»æ•ˆæœï¼Œå°±å¿…é¡»æ‰¿å—åŒç­‰å­¦ä¹ çš„ä»£ä»· ï¼ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ–‡ä»¶è§£æâ€”ã€ŒPlist & XML & JSONã€]]></title>
    <url>%2FiOSNET%2FPlistXMLJSON.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦ä»‹ç»äº†Plistã€XMLå’ŒJSONæ•°æ®è§£æçš„åŸºæœ¬çŸ¥è¯†ï¼Œå¹¶å±•ç¤ºäº†NSXMLParseræ–¹æ³•ã€GDataXMLç¬¬ä¸‰æ–¹åº“ä»¥åŠNSJSONSerializationæ–¹æ³•çš„å®é™…è¿ç”¨æ¡ˆä¾‹ã€‚ ç›®å½•ï¼š Plistè§£ææœ¬åœ°plistæ–‡ä»¶è§£æ JSONè§£æJSONç›¸å…³è¯´æ˜æœ¬åœ°Jsonæ–‡ä»¶è§£æç½‘ç»œJsonæ–‡ä»¶è§£æ XMLè§£æNSXMLParserè§£æGDataXMLè§£æ æ€»ç»“ 1.Plistè§£ææœ¬åœ°plistæ–‡ä»¶è§£æ 123456789101112131415// æ•°æ®æ•°ç»„- (NSMutableArray *)dataArray &#123; if (!_dataArray) &#123; // 1.åŠ è½½plistæ–‡ä»¶ï¼ˆæ ¹ç±»å‹æ˜¯æ•°ç»„ æˆ– æ˜¯å­—å…¸ï¼‰ NSArray *fileArr = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"apps.plist" ofType:nil]]; // 2.åˆ›å»ºä¸´æ—¶æ•°ç»„ NSMutableArray *temp = [NSMutableArray array]; // 3.å­—å…¸æ•°ç»„è½¬æ¨¡å‹æ•°ç»„ for (NSDictionary *dict in fileArr) &#123; [temp addObject:[LNApp imageWithDict:dict]]; &#125; _dataArray = temp; &#125; return _dataArray;&#125; 2.JSONè§£æ1.JSONä»‹ç»121.JSONæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®æ ¼å¼ï¼Œä¸€èˆ¬ç”¨äºæ•°æ®äº¤äº’2.æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œä¸€èˆ¬éƒ½æ˜¯JSONæ ¼å¼æˆ–è€…XMLæ ¼å¼ï¼ˆæ–‡ä»¶ä¸‹è½½é™¤å¤–ï¼‰ 2.JSONç›¸å…³è¯´æ˜1234561.JSONæ–‡æ¡£æœ‰ä¸¤ç§ç»“æ„: **å¯¹è±¡**ï¼šä»¥ `&#123;` å¼€å§‹ï¼Œä»¥ `&#125;` ç»“æŸï¼Œæ˜¯ `åç§°/å€¼` å¯¹å„¿çš„é›†åˆã€‚åç§°å’Œå€¼ä¸­é—´ç”¨ `:` éš”å¼€ã€‚å¤šä¸ª `åç§°/å€¼` å¯¹ä¹‹é—´ç”¨ `,` éš”å¼€ã€‚ç±»ä¼¼Objective-Cçš„NSDictionaryã€‚ç¤ºä¾‹: `&#123;"name" : "jack", "age" : 10&#125;` **æ•°ç»„**ï¼šä»¥ `[` å¼€å§‹,ä»¥ `]` ç»“æŸï¼Œä¸­é—´æ˜¯æ•°æ®ã€‚æ•°æ®ä»¥ `,` åˆ†å‰²ã€‚ç±»ä¼¼Objective-Cçš„ NSArrayã€‚ä¸åŒçš„JSONç»“æ„æœ‰ä¸åŒçš„è½¬åŒ–æ–¹å¼ã€‚ç¤ºä¾‹: `&#123;"names" : ["jack", "rose", "jim"]&#125;` JSONæ ¼å¼ä¸Objective-Cè½¬åŒ–å¯¹ç…§è¡¨ JSON Objective-C å¤§æ‹¬å·{} NSDictionary ä¸­æ‹¬å·[] NSArray åŒå¼•å·â€œâ€ NSString æ•°å­—{} NSNumber 3.JSONè§£ææ–¹æ¡ˆ JSONè§£ææ–¹æ¡ˆ ç¬¬ä¸‰æ–¹æ¡†æ¶ JSONKit\SBJSON\TouchJSON è‹¹æœåŸç”Ÿ NSJSONSerialization(æ€§èƒ½æœ€å¥½) 123456789101112é‡‡ç”¨ NSJSONSerialization--&gt;JSONè§£æJSONæ•°æ®---&gt;OCå¯¹è±¡(å­—å…¸æˆ–æ•°ç»„)ï¼šååºåˆ—åŒ–[NSJSONSerialization JSONObjectWithData: options: error:]OCå¯¹è±¡(å­—å…¸æˆ–æ•°ç»„)---&gt;JSONæ•°æ®ï¼šåºåˆ—åŒ–[NSJSONSerialization dataWithJSONObject: options: error:]NSString è½¬ DataNSData *data = [strM dataUsingEncoding:NSUTF8StringEncoding];Data è½¬ NSString (dataæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªjsonå­—ç¬¦ä¸²)NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 4.æœ¬åœ°Jsonæ–‡ä»¶è§£æ12345678910111213// 1.åŠ è½½æœ¬åœ°jsonæ–‡ä»¶NSString *jsonPath = [[NSBundle mainBundle] pathForResource:@"123.json" ofType:nil];//NSString *jsonStr = [NSString stringWithContentsOfFile:jsonPath encoding:NSUTF8StringEncoding error:nil];//NSData *data = [json dataUsingEncoding:NSUTF8StringEncoding];// 2.NSString è½¬ NSDataå¯¹è±¡NSData *data = [[NSData alloc] initWithContentsOfFile:jsonPath];// 3.JSON---&gt;OCå¯¹è±¡,ååºåˆ—åŒ–NSArray *array = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];for (NSDictionary *dict in array) &#123; NSLog(@"localJson--%@",dict[@"name"]);&#125; 5.ç½‘ç»œJsonæ–‡ä»¶è§£æ1234567891011121314151617181920212223242526272829// JSONæ•°æ®---&gt;OCå¯¹è±¡(å­—å…¸æˆ–æ•°ç»„) ååºåˆ—åŒ–-(void)jsonToOC &#123; // 1.ç¡®å®šurl NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/login?username=520&amp;pwd=520&amp;type=JSON"]; // 2.å‘é€å¼‚æ­¥è¯·æ±‚ /** Request è¯·æ±‚å¯¹è±¡ queue é˜Ÿåˆ—,å†³å®šåé¢Blockå—åœ¨é‚£ä¸ªçº¿ç¨‹æ‰§è¡Œ(ä¸»çº¿ç¨‹æˆ–å­çº¿ç¨‹) */ [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:url] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; // 3.è§£ææ•°æ® /** Data:äºŒè¿›åˆ¶æ•°æ® options:è¿”å›æ•°æ®ç±»å‹ï¼ˆå¦‚æœä½ç§»æšä¸¾ç¬¬ä¸€ä¸ªæšä¸¾å€¼ä¸ä¸º0,å¯ä»¥é»˜è®¤ä¼  0æˆ–kNilOptions è¡¨ç¤ºæ€§èƒ½æœ€å¥½ï¼‰ NSJSONReadingMutableContainers = (1UL &lt;&lt; 0), å¯å˜å­—å…¸å’Œæ•°ç»„ NSJSONReadingMutableLeaves = (1UL &lt;&lt; 1), å†…éƒ¨æ‰€æœ‰çš„å­—ç¬¦ä¸²éƒ½æ˜¯å¯å˜çš„ ios7ä¹‹ååˆé—®é¢˜ ä¸€èˆ¬ä¸ç”¨ NSJSONReadingAllowFragments = (1UL &lt;&lt; 2) æ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯æ•°ç»„,åˆ™å¿…é¡»ä½¿ç”¨è¯¥æšä¸¾å€¼ error:é”™è¯¯ä¿¡æ¯ */ NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil]; NSLog(@"%@",dict); // é¢å‘æ¨¡å‹å¼€å‘ *+ // å­—å…¸æ•°ç»„---&gt;æ¨¡å‹æ•°ç»„(æ•°æ®æ•°ç»„) for (NSDictionary *dict in dictM[@"videos"]) &#123; [self.videos addObject:[LNVideos videoWithDict:dict]]; &#125; &#125;];&#125; OCå¯¹è±¡(å­—å…¸æˆ–æ•°ç»„)â€”&gt;JSONæ•°æ®/åºåˆ—åŒ–12345678910111213141516171819NSDictionary *dictM = @&#123; @"name":@"LN", @"age":@3 &#125;;NSArray *arrayM = @[@"123",@"456"];NSString *strM = @"WENIDNGDING";// åºåˆ—åŒ–æ–¹æ³•:åˆ¤æ–­OCå¯¹è±¡èƒ½å¦è½¬æ¢ä¸ºJSONï¼ŸBOOL isValid = [NSJSONSerialization isValidJSONObject:strM];if (!isValid) &#123; NSLog(@"%zd",isValid); return;&#125;// OC---&gt;JSON// options:NSJSONWritingPrettyPrintedå¯¹è½¬æ¢ä¹‹åçš„JSONå¯¹è±¡è¿›è¡Œæ’ç‰ˆï¼Œæ— æ„ä¹‰NSData *data = [NSJSONSerialization dataWithJSONObject:dictM options:NSJSONWritingPrettyPrinted error:nil];// è¦è½¬æ¢ä¸ºStringçš„äºŒè¿›åˆ¶æ•°æ®,ç¼–ç æ–¹å¼ï¼Œé€šå¸¸é‡‡ç”¨NSUTF8StringEncodingNSLog(@"%@",[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]); æ³¨æ„ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„OCå¯¹è±¡éƒ½èƒ½è½¬æ¢ä¸ºJSON 1.æœ€å¤–å±‚å¿…é¡»æ˜¯ NSArray or NSDictionary 2.æ‰€æœ‰çš„å…ƒç´ å¿…é¡»æ˜¯ NSString, NSNumber, NSArray, NSDictionary, or NSNull 3.å­—å…¸ä¸­æ‰€æœ‰çš„keyéƒ½å¿…é¡»æ˜¯ NSStringsç±»å‹çš„ 4.NSNumbersä¸èƒ½æ­»æ— ç©·å¤§ 3.XMLè§£æ1.XMLä»‹ç»1231.XMLï¼šå¯æ‰©å±•æ ‡è®°è¯­è¨€2.XMLæ–‡æ¡£çš„ä¸‰éƒ¨åˆ†ï¼ˆå£°æ˜ã€å…ƒç´ å’Œå±æ€§ï¼‰3.å…¶å®ƒæ³¨æ„ç‚¹ï¼ˆæ³¨æ„ä¸èƒ½äº¤å‰åŒ…å«ã€ç©ºè¡Œæ¢è¡Œã€XMLæ–‡æ¡£åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ç­‰ï¼‰ 2.XMLè§£æ12345iOSä¸­è‹¹æœå®˜æ–¹æä¾›äº† NSXMLParser å’Œ libxml2 ä¸¤ç§XMLè§£ææ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç”¨ç¬¬ä¸‰æ–¹åº“ GDataXML æ‰§è¡ŒXMLè§£æã€‚ NSXMLParser è‹¹æœåŸç”Ÿï¼Œé‡‡ç”¨ SAX æ–¹å¼è§£æã€‚è§£æè¿‡ç¨‹ç”±NSXMLParserDelegate åè®®æ–¹æ³•å›è°ƒã€‚libxml2ä¸ºåŸºäºCè¯­è¨€APIçš„å¼€æºåº“ï¼Œå¯ä»¥æä¾› DOM å’Œ SAX ä¸¤ç§è§£ææ–¹å¼ï¼Œä½†ä½¿ç”¨æ¯” NSXMLParser éº»çƒ¦ã€‚GDataXML åŸºäºlibxml2åº“é‡æ–°å°è£…å¾—åˆ°ï¼Œè§£æéœ€é…ç½®ç¯å¢ƒå’Œå¯¼å…¥ GDataXMLNode åº“ã€‚ 3.XMLè§£ææ–¹å¼:123451.SAX:ä»æ ¹å…ƒç´ å¼€å§‹ï¼ŒæŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå…ƒç´ çš„å¾€ä¸‹è§£æï¼Œå¯ç”¨äºè§£æå¤§ã€å°æ–‡ä»¶ã€‚é‡‡ç”¨ è‹¹æœåŸç”ŸNSXMLParserè§£æã€‚2.DOM:ä¸€æ¬¡æ€§å°†æ•´ä¸ªXMLæ–‡æ¡£åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œé€‚åˆè¾ƒå°çš„æ–‡ä»¶ã€‚é‡‡ç”¨ ç¬¬ä¸‰æ–¹æ¡†æ¶GDataXMLè§£æã€‚ 12345678910GDataXMLè§£æé…ç½®ç¯å¢ƒ:1.å¯¼å…¥libxml2åº“æ–‡ä»¶åœ¨General, Linked Frameworks and Librariesç‚¹å‡»åŠ å·ç„¶åæœç´¢libxml2ï¼ŒåŒå‡»æ–‡ä»¶å³å¯å¯¼å…¥ã€‚2.è®¾ç½®libxml2çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼ˆä¸ºäº†èƒ½æ‰¾åˆ°libxml2åº“çš„æ‰€æœ‰å¤´æ–‡ä»¶ï¼‰åœ¨Build Settings æœç´¢ Header Search Pathä¸­åŠ å…¥ /usr/include/libxml23.è®¾ç½®é“¾æ¥å‚æ•°ï¼ˆè‡ªåŠ¨é“¾æ¥libxml2åº“ï¼‰åœ¨Build Settings æœç´¢ Other Linker Flagsä¸­åŠ å…¥ -lxml24.å¯¼å…¥GDataXMLNode.hå’ŒGDataXMLNode.mæ–‡ä»¶ã€‚5.ç”±äºGDataXMLæ˜¯MRCå¤„ç†çš„ï¼Œå› æ­¤å¾—è®¾ç½®ç¼–è¯‘å‚æ•°åœ¨Build Phases é€‰ä¸­Compile Sources æ‰¾åˆ° GDataXMLNode.mä¸­åŠ å…¥ -fno-objc-arc å£°æ˜: 4.NSXMLParserè§£æ123456789101112131415161718192021// NSXMLParserè§£æï¼Œ&lt;NSXMLParserDelegate&gt;ä»£ç†-(void)parserXML &#123; // 1.ç¡®å®šurl NSURL *url = [NSURL URLWithString:@"[http://120.25.226.186:32812/video?type=XML"];](http://120.25.226.186:32812/video?type=XML%22];) // 2.å‘é€å¼‚æ­¥è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:url] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; if (connectionError)&#123;return ;&#125; // æœ¬åœ°XML //NSData *data = [[[NSBundle mainBundle] pathForResource:@"123" ofType:@"xml"] dataUsingEncoding:NSUTF8StringEncoding]; // 3.è§£ææ•°æ® // 1).åˆ›å»ºXMLè§£æå™¨ NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data]; // 2).è®¾ç½®ä»£ç† parser.delegate = self; // 3).å¼€å§‹è§£æ(æ³¨æ„:parseæ–¹æ³•æ˜¯é˜»å¡çš„,å…¨éƒ¨éƒ½è§£æå®Œåæ‰ä¼šå¾€ä¸‹èµ°) [parser parse]; NSLog(@"%@---",parser); &#125;];&#125; ä»£ç†æ–¹æ³•:12345678910111213141516171819202122232425#pragma mark - NSXMLParserDelegate// 1.å¼€å§‹è§£æ- (void)parserDidStartDocument:(NSXMLParser *)parser &#123; NSLog(@"XMLå¼€å§‹è§£æ");&#125;// 2.å¼€å§‹è§£ææŸä¸ªå…ƒç´ - (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary&lt;NSString *,NSString *&gt; *)attributeDict &#123; NSLog(@"å¼€å§‹è§£ææŸä¸ªå…ƒç´ %@--%@",elementName,attributeDict); // è¿™é‡Œä¼šå¤šå‡ºä¸€ä¸ªå…ƒç´ æ˜¯æ ¹å…ƒç´ (elementNameæ˜¯videos)ï¼Œéœ€è¦è¿‡æ»¤æ ¹å…ƒç´  *+ if ([elementName isEqualToString:@"videos"]) &#123; return;&#125; // å­—å…¸è½¬æ¨¡å‹ [self.videos addObject:[LNVideo mj_objectWithKeyValues:attributeDict]];&#125;// 3.æŸä¸ªå…ƒç´ è§£æå®Œæ¯•- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName &#123; NSLog(@"æŸä¸ªå…ƒç´ è§£æå®Œæ¯•%@--%@",elementName,namespaceURI);&#125;// 4.ç»“æŸè§£æ- (void)parserDidEndDocument:(NSXMLParser *)parser &#123; NSLog(@"XMLç»“æŸè§£æ");&#125; NSXMLParserè§£ææ‰“å°è¾“å‡º:123456789101112131415161718192016-02-19 13:20:38.341 LNnet[17935:475114] XMLå¼€å§‹è§£æ2016-02-19 13:20:38.342 LNnet[17935:475114] å¼€å§‹è§£ææŸä¸ªå…ƒç´ videos--&#123; &#125;2016-02-19 13:20:38.342 LNnet[17935:475114] å¼€å§‹è§£ææŸä¸ªå…ƒç´ video--&#123;id = 1;image = &quot;resources/images/minion_01.png&quot;;length = 10;name = &quot;\U5c0f\U9ec4\U4eba \U7b2c01\U90e8&quot;;url = &quot;resources/videos/minion_01.mp4&quot;;&#125;2016-02-19 13:20:38.344 LNnet[17935:475114] æŸä¸ªå…ƒç´ è§£æå®Œæ¯•video--(null)2016-02-19 13:20:38.344 LNnet[17935:475114] å¼€å§‹è§£ææŸä¸ªå…ƒç´ video--&#123;id = 2;image = &quot;resources/images/minion_02.png&quot;;length = 12;name = &quot;\U5c0f\U9ec4\U4eba \U7b2c02\U90e8&quot;;url = &quot;resources/videos/minion_02.mp4&quot;;&#125;2016-02-19 13:20:38.351 LNnet[17935:475114] XMLç»“æŸè§£æ 5.GDataXMLè§£ææŒ‰ä¸Šé¢è®²åˆ°çš„é…ç½®ç¯å¢ƒï¼Œè¿›è¡Œé…ç½®ã€‚123456789101112131415161718192021222324252627// GDataXMLè§£æ-(void)gdataXML &#123; // 1.ç¡®å®šurl NSURL *url = [NSURL URLWithString:@"http://120.25.226.186:32812/video?type=XML"]; // 2.å‘é€å¼‚æ­¥è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:url] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; if (connectionError) &#123; return ;&#125; // 3.è§£ææ•°æ® // 1).åˆ›å»ºXMLæ–‡æ¡£ GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:data options:0 error:nil]; // 2).æ‹¿åˆ°æ ¹å…ƒç´ ,å¾—åˆ°æ ¹å…ƒç´ å†…éƒ¨æ‰€æœ‰åç§°ä¸ºvideoçš„å­å…ƒç´  NSArray *eles = [doc.rootElement elementsForName:@"video"]; // 3).éå†æ“ä½œ for (GDataXMLElement *ele in eles) &#123; // è¦æŠŠå…ƒç´ å†…éƒ¨å±æ€§ æ¨¡å‹ æ·»åŠ åˆ°self.videos(æ¨¡å‹æ•°ç»„) LNVideo *video = [[LNVideo alloc] init]; video.name = [ele attributeForName:@"name"].stringValue; video.length = [ele attributeForName:@"length"].stringValue; video.image = [ele attributeForName:@"image"].stringValue; video.ID = [ele attributeForName:@"id"].stringValue; video.url = [ele attributeForName:@"url"].stringValue; [self.videos addObject:video]; NSLog(@"%@--",video.name); &#125; &#125;];&#125; GDataXMLè§£ææ‰“å°è¾“å‡º:1232016-02-19 13:57:54.088 LNnet[18694:496139] å°é»„äºº ç¬¬01éƒ¨--2016-02-19 13:57:54.088 LNnet[18694:496139] å°é»„äºº ç¬¬02éƒ¨--... 4.æ€»ç»“JSONä¼˜ç¼ºç‚¹ï¼šä¼˜ç‚¹ï¼š 1.æ•°æ®æ ¼å¼æ¯”è¾ƒç®€å•ï¼Œæ˜“äºè¯»å†™ï¼Œæ ¼å¼éƒ½æ˜¯å‹ç¼©çš„ï¼Œå ç”¨å¸¦å®½å°ã€‚ 2.è¿™ç§è¯­è¨€æ˜“äºè§£æã€‚ 3.æ”¯æŒå¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬ActionScript,C,C#,ColdFusion,Java,JavaScript,Perl,PHP,Python,Rubyç­‰æœåŠ¡å™¨ç«¯è¯­è¨€ï¼Œä¾¿äºæœåŠ¡å™¨ç«¯è§£æã€‚ 4.å› ä¸ºJSONæ ¼å¼èƒ½å¤Ÿç›´æ¥ä¸ºæœåŠ¡å™¨ç«¯ä»£ç ä½¿ç”¨ï¼Œå¤§å¤§ç®€åŒ–äº†æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„ä»£ç å¼€å‘é‡ï¼Œä½†æ˜¯å®Œæˆçš„ä»»åŠ¡ä¸å˜ï¼Œä¸”æ˜“äºç»´æŠ¤ã€‚ ç¼ºç‚¹: 1.æ²¡æœ‰XMLæ ¼å¼æŠ˜è¿™ä¹ˆæ¨å¹¿çš„æ·±å…¥äººå¿ƒå’Œå¹¿æ³›ä½¿ç”¨ï¼Œæ²¡æœ‰XMLé‚£ä¹ˆé€šç”¨ 2.JSONæ ¼å¼ç›®å‰åœ¨Web Serviceä¸­çš„æ¨å¹¿è¿˜å±äºåˆçº§é˜¶æ®µ XMLä¼˜ç¼ºç‚¹ï¼šä¼˜ç‚¹ï¼š 1.æ ¼å¼ç»Ÿä¸€ï¼Œç¬¦åˆæ ‡å‡†ã€‚ 2.å®¹æ˜“ä¸å…¶ä»–ç³»ç»Ÿè¿›è¡Œè¿œç¨‹äº¤äº’ï¼Œæ•°æ®å…±äº«æ¯”è¾ƒæ–¹ä¾¿ ç¼ºç‚¹ï¼š 1.XMLæ–‡ä»¶æ ¼å¼åºå¤§ï¼Œæ ¼å¼å¤æ‚ï¼Œä¼ è¾“å ç”¨å¸¦å®½ 2.æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½éœ€è¦èŠ±è´¹å¤§é‡ä»£ç æ¥è§£æXMLï¼Œä¸è®ºæœåŠ¡å™¨ç«¯è¿˜æ˜¯å®¢æˆ·ç«¯éƒ½ä½¿ä»£ç å˜å¾—å¼‚å¸¸å¤æ‚å’Œä¸å®¹æ˜“ç»´æŠ¤ã€‚ 3.å®¢æˆ·ç«¯ä¸åŒæµè§ˆå™¨ä¹‹é—´è§£æXMLçš„æ–¹å¼ä¸ä¸€è‡´ï¼Œéœ€è¦é‡å¤ç¼–å†™å¾ˆå¤šä»£ç ã€‚ 4.æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯è§£æXMLèŠ±è´¹èµ„æºå’Œæ—¶é—´ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ–‡ä»¶è§£æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS UIæ§ä»¶è¯¦è§£â€”ã€ŒUICollectionViewç»¼åˆè§†å›¾ã€]]></title>
    <url>%2FiOSUI%2FUICollectionView.html</url>
    <content type="text"><![CDATA[Write in the firstã€å†™åœ¨æœ€å‰ã€‘ UITableView ç†Ÿæ‚‰å§ï¼Œ UICollectionView å¿…é¡»ç†Ÿæ‚‰å§ã€‚åœ¨WWDC2012ä¸­çš„Introducing Collection Viewsï¼Œè‹¹æœé¦–æ¬¡ä»‹ç»äº†UICollectionViewï¼Œç±»ä¼¼UITableViewçš„ç”¨æ³•ä½¿äººå¾ˆå®¹æ˜“æ¥å—ï¼Œä½†å¼ºå¤§çš„è‡ªå®šä¹‰å¸ƒå±€ï¼Œåˆä½¿å…¶ç›¸è¾ƒäºUITableViewæœ‰äº†é€‰æ‹©å®ƒçš„æ›´å¤šç†ç”±ï¼ŒUITableViewä¸­çš„è¡¨æ ¼åªæ”¯æŒå•æ’åˆ—è¡¨ï¼Œæ²¡æœ‰åŠæ³•æ”¯æŒç½‘æ ¼åˆ—è¡¨æ¨¡å¼ï¼ŒCollectionViewæœ‰ç€çµæ´»çš„å¸ƒå±€ç‰¹æ€§ï¼Œè¿™ä¸€ç‚¹å……åˆ†è¯´æ˜æˆ‘ä»¬åœ¨å­¦ä¼šUITableViewçš„åŸºç¡€ä¸Šï¼Œå†å»å­¦ä¹ æ¨æ•²CollectionViewçš„å¿…è¦æ€§ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€UICollectionView ç³»ç»Ÿæ–‡ä»¶æ³¨è§£ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š UICollectionViewæ¦‚å¿µ UICollectionViewåŸºæœ¬ç»„æˆ UICollectionViewå±‚æ¬¡ç»“æ„1.UICollectionView ç»§æ‰¿äº UIScrollView2.UICollectionViewDataSourceæ•°æ®æº3.UICollectionViewDelegateä»£ç†4.UICollectionViewLayoutè‡ªå®šä¹‰å¸ƒå±€å¯¹è±¡5.UICollectionViewFlowLayoutå¸ƒå±€å¯¹è±¡(é»˜è®¤)6.UICollectionViewCellæ ·å¼7.UICollectionViewLayoutAttributeså¸ƒå±€å±æ€§ UICollectionViewä¸UITableViewæ¯”è¾ƒ UICollectionViewä½¿ç”¨è¯´æ˜ UICollectionViewåŸºæœ¬ä½¿ç”¨ è‡ªå®šä¹‰FlowLayoutï¼šæ°´å¹³æ»šåŠ¨ç›¸å†Œ UICollectionViewæ•ˆæœå›¾ è‡ªå®šä¹‰FlowLayoutï¼šç€‘å¸ƒæµ UICollectionView.h å±æ€§&amp;æ–¹æ³• UICollectionViewæ¦‚å¿µ æœ¬ç€å¥½å¥½å­¦ä¹ ï¼Œäº†è§£æƒå¨çš„ç›®çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸»åŠ¨çœ‹å®˜ç½‘çš„è¯´æ˜ã€‚ ä¸Šå›¾é‡Šä¹‰ï¼šç®¡ç†æœ‰åºçš„æ•°æ®é¡¹é›†åˆå’Œä½¿ç”¨è‡ªå®šåˆ¶çš„å¸ƒå±€ã€‚ é€šä¿—ç‚¹å°±æ˜¯ï¼šUICollectionView æ˜¯ä¸€ç§æ–°çš„æ•°æ®å±•ç¤ºæ–¹å¼ï¼Œç®€å•æ¥è¯´å¯ä»¥æŠŠä»–ç†è§£æˆå¤šåˆ—çš„UITableViewï¼Œå¯ä»¥åšä¹å®«æ ¼å¸ƒå±€çš„ä¸€ç§viewï¼› UICollectionViewåŸºæœ¬ç»„æˆ æ³¨è§£ï¼šå¦‚ä¸Šå›¾ï¼šä½ çœ‹åˆ°çš„å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„UICollectionViewï¼Œå®ƒåŒ…å«ï¼šCellsã€Supplementary Viewsã€Decoration Viewsã€‚ Cellsï¼šç”¨äºå±•ç¤ºå†…å®¹çš„ä¸»ä½“ï¼Œcellçš„å°ºå¯¸å’Œå†…å®¹å¯ä»¥å„ä¸ç›¸åŒã€‚ Supplementary Viewsï¼šè¿½åŠ è§†å›¾ï¼Œç±»ä¼¼äºUITableViewæ¯ä¸ªSecitonçš„Header View æˆ–è€…Footer Viewï¼Œç”¨æ¥æ ‡è®°Sectionçš„Viewã€‚ Decoration Viewsï¼šè£…é¥°è§†å›¾ï¼Œå®Œå…¨è·Ÿæ•°æ®æ²¡æœ‰å…³ç³»çš„è§†å›¾ï¼Œè´Ÿè´£ç»™cell æˆ–è€…supplementary Viewsæ·»åŠ è¾…åŠ©è§†å›¾ç”¨çš„ï¼Œçµæ´»æ€§è¾ƒå¼ºã€‚ ä¸ç®¡å¤šä¹ˆå¤æ‚çš„UIcollectionViewéƒ½æ˜¯ç”±ç€ä¸‰ä¸ªéƒ¨ä»¶ç»„æˆçš„ã€‚ UICollectionViewå±‚æ¬¡ç»“æ„ æ³¨è§£ï¼š 1ã€UICollectionView ç»§æ‰¿äº UIScrollView1NS_CLASS_AVAILABLE_IOS(6_0) @interface UICollectionView : UIScrollView 2ã€UICollectionViewDataSourceï¼šä¸»è¦ç®¡ç†è§†å›¾æ•°æ®æºæ–¹é¢ï¼Œå‘Šè¯‰viewè¦æ˜¾ç¤ºäº›ä»€ä¹ˆä¸œè¥¿ä»¥åŠå¦‚ä½•æ˜¾ç¤ºå®ƒä»¬ã€‚ @requiredï¼ˆå¿…é¡»ï¼‰ 123456789@protocol UICollectionViewDataSource &lt;NSObject&gt;@required/* ï¼ˆå¿…é¡»ï¼‰è®¾ç½®å®¹å™¨è§†å›¾å„ä¸ªç»„Sectionä¸­æœ‰ã€å¤šå°‘itemã€‘ */- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section;// The cell that is returned must be retrieved from a call to -dequeueReusableCellWithReuseIdentifier:forIndexPath:/* ï¼ˆå¿…é¡»ï¼‰è®¾ç½®æ¯ä¸ªåŒºä¸­ã€itemçš„å†…å®¹ã€‘ï¼Œç±»ä¼¼äºUITableViewCellçš„è®¾ç½® */- (__kindof UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath; @optionalï¼ˆå¯é€‰ï¼‰ 123456789101112131415@optionalï¼ˆå¯é€‰ï¼‰/* ï¼ˆå¯é€‰ï¼‰è®¾ç½®å®¹å™¨è§†å›¾æœ‰å¤šå°‘ç»„Sectionï¼Œç³»ç»Ÿé»˜è®¤è¿”å›å€¼ä¸º1 */- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView;// The view that is returned must be retrieved from a call to -dequeueReusableSupplementaryViewOfKind:withReuseIdentifier:forIndexPath:// è¡¥å……è§†å›¾ï¼Œè¿™é‡Œå¯ä»¥å……å½“åŒºçš„å¤´å’Œå°¾ï¼Œæˆ‘ä»¬è‡ªå·±ä¸å®ç°çš„è¯ï¼Œç³»ç»Ÿé»˜è®¤è¿”å›å€¼ä¸ºnil/* ï¼ˆå¯é€‰ï¼‰è¿”å›é¡¶éƒ¨è§†å›¾å’Œåº•éƒ¨è§†å›¾ï¼Œé€šè¿‡kindå‚æ•°åˆ†è¾¨æ˜¯è®¾ç½®é¡¶éƒ¨è¿˜æ˜¯åº•éƒ¨ï¼ˆè¡¥å……è§†å›¾ï¼‰ */- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath;/** ï¼ˆå¯é€‰ï¼‰è¯¢é—®æ˜¯å¦æŒ‡å®šçš„å•å…ƒæ ¼é¡¹ç›®æ˜¯å¦å¯ä»¥ç§»åŠ¨åˆ°é›†åˆè§†å›¾ä¸­çš„å¦ä¸€ä¸ªä½ç½®ï¼Œé»˜è®¤è¿”å›å€¼ä¸ºNO */- (BOOL)collectionView:(UICollectionView *)collectionView canMoveItemAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(9_0);/** ï¼ˆå¯é€‰ï¼‰å°†æŒ‡å®šçš„å•å…ƒæ ¼é¡¹ç›®ä»ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°é›†åˆè§†å›¾ä¸­çš„å¦ä¸€ä¸ªä½ç½® */- (void)collectionView:(UICollectionView *)collectionView moveItemAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath*)destinationIndexPath NS_AVAILABLE_IOS(9_0); 3ã€UICollectionViewDelegateï¼šä¸»è¦ç®¡ç†äºç”¨æˆ·äº¤äº’æ–¹é¢ï¼Œæä¾›ä¸€äº›æ ·å¼çš„å°ç»†èŠ‚ã€‚ @optionalï¼ˆå¯é€‰ï¼‰ 123456789101112131415161718192021222324252627@protocol UICollectionViewDelegate &lt;UIScrollViewDelegate&gt;@optional// Methods for notification of selection/deselection and highlight/unhighlight events.// The sequence of calls leading to selection from a user touch is:// (when the touch begins)// 1. -collectionView:shouldHighlightItemAtIndexPath:// 2. -collectionView:didHighlightItemAtIndexPath://// (when the touch lifts)// 3. -collectionView:shouldSelectItemAtIndexPath: or -collectionView:shouldDeselectItemAtIndexPath:// 4. -collectionView:didSelectItemAtIndexPath: or -collectionView:didDeselectItemAtIndexPath:// 5. -collectionView:didUnhighlightItemAtIndexPath:/** ä¸‹é¢æ˜¯å’Œé«˜äº®æœ‰å…³çš„æ–¹æ³•ï¼š */// cellç‚¹å‡»æ—¶æ˜¯å¦é«˜äº®ï¼Œç‚¹å‡»cellæ—¶çš„æ ·å¼å’Œç‚¹å‡»åcellçš„æ ·å¼- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *)indexPath;// æ‰‹æŒ‡æŒ‰ä¸‹é«˜äº®- (void)collectionView:(UICollectionView *)collectionView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath;// æ‰‹æŒ‡æ¾å¼€å–æ¶ˆé«˜äº®- (void)collectionView:(UICollectionView *)collectionView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath;/** å½“å‰itemæ˜¯å¦å¯ä»¥ç‚¹å‡» */- (BOOL)collectionView:(UICollectionView *)collectionView shouldSelectItemAtIndexPath:(NSIndexPath *)indexPath;/** å½“å‰itemæ˜¯å¦å–æ¶ˆç‚¹å‡» */- (BOOL)collectionView:(UICollectionView *)collectionView shouldDeselectItemAtIndexPath:(NSIndexPath *)indexPath; // called when the user taps on an already-selected item in multi-select mode äº‹ä»¶çš„å¤„ç†é¡ºåºå¦‚ä¸‹ï¼š 1ã€æ‰‹æŒ‡æŒ‰ä¸‹ï¼šshouldHighlightItemAtIndexPath (å¦‚æœè¿”å›YESåˆ™å‘ä¸‹æ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œåˆ°è¿™é‡Œä¸ºæ­¢)ã€‚ 2ã€didHighlightItemAtIndexPath (é«˜äº®)ã€‚ 3ã€æ‰‹æŒ‡æ¾å¼€ï¼šdidUnhighlightItemAtIndexPath (å–æ¶ˆé«˜äº®)ã€‚ 4ã€shouldSelectItemAtIndexPath (å¦‚æœè¿”å›YESåˆ™å‘ä¸‹æ‰§è¡Œï¼Œå¦åˆ™æ‰§è¡Œåˆ°è¿™é‡Œä¸ºæ­¢)ã€‚ 5ã€didSelectItemAtIndexPath (æ‰§è¡Œé€‰æ‹©äº‹ä»¶)ã€‚ é€‰ä¸­ å’Œ å–æ¶ˆé€‰ä¸­ itemæ—¶ ,ä¼šè§¦å‘çš„æ–¹æ³• 1234/* é€‰ä¸­itemæ—¶ ,ä¼šè§¦å‘çš„æ–¹æ³• */- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath;/* å–æ¶ˆé€‰ä¸­itemæ—¶ ,ä¼šè§¦å‘çš„æ–¹æ³• */- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath; è¡¥å……è§†å›¾ï¼ˆå¤´éƒ¨æˆ–å°¾éƒ¨è§†å›¾ï¼‰ï¼Œæ˜¾ç¤º å’Œ ç§»é™¤ 12345678910111213/** è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯æŒ‡å®šindexPathçš„cellå°†è¦æ˜¾ç¤ºå‡ºçš„æ—¶å€™è°ƒç”¨, å’ŒæŒ‡å®šindexPathçš„å¤´éƒ¨æˆ–å°¾éƒ¨è§†å›¾viewå°†è¦æ˜¾ç¤ºå‡ºæ¥çš„æ—¶å€™è°ƒç”¨ */- (void)collectionView:(UICollectionView *)collectionView willDisplayCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(8_0);- (void)collectionView:(UICollectionView *)collectionView willDisplaySupplementaryView:(UICollectionReusableView *)view forElementKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)indexPath NS_AVAILABLE_IOS(8_0);/** è¿™ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«æ˜¯æŒ‡å®šindexPathçš„cellå°†è¦ä»collectionViewä¸­ç§»é™¤çš„çš„æ—¶å€™è°ƒç”¨, å’ŒæŒ‡å®šindexPathçš„å¤´éƒ¨æˆ–å°¾éƒ¨è§†å›¾viewå°†è¦collectionViewä¸­ç§»é™¤çš„æ—¶å€™è°ƒç”¨ */- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath;- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingSupplementaryView:(UICollectionReusableView *)view forElementOfKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)indexPath; é•¿æŒ‰æŸitemï¼Œå¼¹å‡ºcopyï¼ˆå¤åˆ¶ï¼‰å’Œpasteï¼ˆç²˜è´´ï¼‰çš„èœå•ç›¸å…³ã€‚ 12345678910// These methods provide support for copy/paste actions on cells.// All three should be implemented if any are./** è¿™äº›æ–¹æ³•ä¸ºæ˜¯ å¤åˆ¶/ç²˜è´´æ“ä½œç›¸å…³ *//** æ˜¯å¦å¼¹å‡ºèœå•ï¼Œéœ€è¦è¿”å›YES */- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath;/** æ˜¯å¦å¯ä»¥å¼¹å‡ºäº‹ä»¶ï¼Œä½¿copyå’Œpasteæœ‰æ•ˆ */- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender;/** å¯¹äº‹ä»¶è¿›è¡Œç›¸åº”æ“ä½œ */- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender; æ³¨å†Œç±»å‹ç›¸å…³ 1234567/** æ³¨å†Œè¦ä½¿ç”¨çš„cellå¯¹åº”çš„ç±»å‹ */- (void)registerClass:(nullable Class)cellClass forCellWithReuseIdentifier:(NSString *)identifier;- (void)registerNib:(nullable UINib *)nib forCellWithReuseIdentifier:(NSString *)identifier;/** æ³¨å†Œè¦ä½¿ç”¨çš„è¡¥å……è§†å›¾(HeaderView å’Œ FooterView)å¯¹åº”çš„ç±»å‹ */- (void)registerClass:(nullable Class)viewClass forSupplementaryViewOfKind:(NSString *)elementKind withReuseIdentifier:(NSString *)identifier;- (void)registerNib:(nullable UINib *)nib forSupplementaryViewOfKind:(NSString *)kind withReuseIdentifier:(NSString *)identifier; å¤ç”¨é˜Ÿåˆ— 123/** å¤ç”¨é˜Ÿåˆ— */- (__kindof UICollectionViewCell *)dequeueReusableCellWithReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath;- (__kindof UICollectionReusableView *)dequeueReusableSupplementaryViewOfKind:(NSString *)elementKind withReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath *)indexPath; åŠ¨æ€ä¿®æ”¹å½“å‰çš„Item å’Œ Section 1234567891011121314151617181920212223// These methods allow dynamic modification of the current set of items in the collection view/** è¿™äº›æ–¹æ³•å…è®¸åŠ¨æ€ä¿®æ”¹å½“å‰çš„Item å’Œ Section */// æ’å…¥Section- (void)insertSections:(NSIndexSet *)sections;// åˆ é™¤Section- (void)deleteSections:(NSIndexSet *)sections;// åˆ·æ–°Section- (void)reloadSections:(NSIndexSet *)sections;// ç§»åŠ¨Section- (void)moveSection:(NSInteger)section toSection:(NSInteger)newSection;// æ’å…¥Item- (void)insertItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;// åˆ é™¤Item- (void)deleteItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;// åˆ·æ–°Item- (void)reloadItemsAtIndexPaths:(NSArray&lt;NSIndexPath *&gt; *)indexPaths;// ç§»åŠ¨Item- (void)moveItemAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath;/** åŒæ ·å¯ä»¥è¿›è¡Œæ‰¹é‡æ“ä½œ */- (void)performBatchUpdates:(void (^ __nullable)(void))updates completion:(void (^ __nullable)(BOOL finished))completion; // allows multiple insert/delete/reload/move calls to be animated simultaneously. Nestable. å…¶å®ƒå±æ€§ å’Œ æ–¹æ³•ç›¸å…³ 1234567891011121314/** é¢„åŠ è½½ */@property (nonatomic, getter=isPrefetchingEnabled) BOOL prefetchingEnabled NS_AVAILABLE_IOS(10_0);/** å…è®¸é€‰æ‹© */@property (nonatomic) BOOL allowsSelection; // default is YES/** å…è®¸å¤šä¸ªé€‰æ‹© */@property (nonatomic) BOOL allowsMultipleSelection; // default is NO/** å…¨å±€åˆ·æ–° */- (void)reloadData; // discard the dataSource and delegate data and requery as necessary/** å¸ƒå±€åŠ¨ç”» */- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated; // transition from one layout to another- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated completion:(void (^ __nullable)(BOOL finished))completion NS_AVAILABLE_IOS(7_0); 4ã€UICollectionViewLayoutï¼šè‡ªå®šä¹‰å¸ƒå±€ï¼Œå®ƒè´Ÿè´£äº†å°†å„ä¸ªcellã€Supplementary Viewå’ŒDecoration Viewsè¿›è¡Œç»„ç»‡ã€‚UICollectionViewLayout æ˜¯UICollectionViewç‰¹æœ‰çš„ï¼Œæ˜¯UICollectionViewçš„ç²¾é«“æ‰€åœ¨ï¼Œå®ƒè´Ÿè´£å°†æ¯ä¸ªcellã€supplementary viewã€decoration viewè¿›è¡Œç»„åˆï¼Œä¸ºå®ƒä»¬è®¾ç½®å„è‡ªçš„å±æ€§ï¼ŒåŒ…æ‹¬ï¼šä½ç½®ã€å¤§å°ã€é€æ˜åº¦ã€å±‚çº§å…³ç³»ã€å½¢çŠ¶ç­‰ã€‚UICollectionViewLayoutå†³å®šäº†ï¼ŒUICollectionViewæ˜¯å¦‚ä½•æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼Œä»UICollectionViewåˆå§‹åŒ–å¿…é¡»è¦ä¸€ä¸ªUICollectionViewLayoutä¹Ÿå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼ŒLayoutå¯¹äºUICollectionViewçš„æœ€è¦æ€§ã€‚ è‡ªå®šä¹‰å¸ƒå±€ï¼šåªè¦äº†è§£5ä¸ªæ–¹æ³•ï¼ˆé‡å†™å®ƒæ–¹æ³•ï¼Œæ‰©å±•åŠŸèƒ½ï¼‰ 12345678910111213141516171819202122232425/** ä»€ä¹ˆæ—¶å€™è°ƒç”¨:collectionViewç¬¬ä¸€æ¬¡å¸ƒå±€,collectionViewåˆ·æ–°çš„æ—¶å€™ä¹Ÿä¼šè°ƒç”¨ ä½œç”¨:è®¡ç®—cellçš„å¸ƒå±€ï¼Œæ¡ä»¶:ellçš„ä½ç½®æ˜¯å›ºå®šä¸å˜çš„. */- (void)prepareLayout;/** ä½œç”¨:æŒ‡å®šä¸€æ®µåŒºåŸŸç»™ä½ è¿™æ®µåŒºåŸŸcellçš„å°ºå¯¸(å¯ä»¥ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰cellå°ºå¯¸,ä¹Ÿå¯ä»¥æ¯éš”ä¸€ä¸ªè·ç¦»è¿”å›cell) ç³»ç»Ÿä¼ é€’è¿‡æ¥ä¸€ä¸ªåŒºåŸŸrectï¼Œæˆ‘ä»¬éœ€è¦è¿”å›åœ¨è¯¥åŒºåŸŸä¸­çš„itemçš„ä½ç½®ä¿¡æ¯ è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­åŒ…å«UICollectionViewLayoutAttributes å¯¹è±¡ */- (nullable NSArray&lt;__kindof UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect; // return an array layout attributes instances for all the views in the given rect// åœ¨æ»šåŠ¨çš„æ—¶å€™æ˜¯å¦å…è®¸åˆ·æ–°(Invalidate)å¸ƒå±€- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds; // return YES to cause the collection view to requery the layout for geometry information/** ä»€ä¹ˆæ—¶å€™è°ƒç”¨:ç”¨æˆ·æ‰‹æŒ‡ä¸€æ¾å¼€å°±ä¼šè°ƒç”¨ ä½œç”¨:ç¡®å®šæœ€ç»ˆåç§»é‡ */- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity; // return a point at which to rest after scrolling - for layouts that want snap-to-point scrolling behavior- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset NS_AVAILABLE_IOS(7_0); // a layout can return the content offset to be applied during transition or update animations/** ç”±äºUICollectionVeiwç»§æ‰¿è‡ªUIScrollViewï¼Œæ‰€ä»¥éœ€è¦é‡å†™è¯¥å‡½æ•°ï¼Œå‘Šè¯‰contentSizeå¤§å° */- (CGSize)collectionViewContentSize; 5ã€UICollectionViewFlowLayoutï¼šä¸»è¦ç®¡ç†å¸ƒå±€ä¿¡æ¯æ–¹é¢ï¼ŒAppleä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæœ€ç®€å•å¯èƒ½ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„é»˜è®¤layoutå¯¹è±¡ï¼ŒUICollectionViewFlowLayoutã€‚Flow Layoutç®€å•è¯´æ˜¯ä¸€ä¸ªç›´çº¿å¯¹é½çš„layoutã€‚ æˆ‘ä»¬æ¥äº†è§£UICollectionViewFlowLayoutå®ƒå†…éƒ¨å¸¸ç”¨çš„å±æ€§ï¼š 12345678910111213141516171819202122232425262728NS_CLASS_AVAILABLE_IOS(6_0) @interface UICollectionViewFlowLayout : UICollectionViewLayout@property (nonatomic) CGFloat minimumLineSpacing; // è®¾ç½®è¡Œä¹‹é—´çš„æœ€å°é—´è·(ç«–ç›´)@property (nonatomic) CGFloat minimumInteritemSpacing; // è®¾ç½®2ä¸ªitemä¹‹é—´(åˆ—)çš„æœ€å°é—´éš™(æ°´å¹³)ï¼Œ@property (nonatomic) CGSize itemSize; // è®¾ç½®itemçš„å¤§å°/** é¢„è®¾itemå¤§å° */@property (nonatomic) CGSize estimatedItemSize NS_AVAILABLE_IOS(8_0); // defaults to CGSizeZero - setting a non-zero size enables cells that self-size via -preferredLayoutAttributesFittingAttributes:/** è®¾ç½®æ»šåŠ¨æ–¹å‘ï¼Œé»˜è®¤æ˜¯ç«–ç›´æ»šåŠ¨ V */@property (nonatomic) UICollectionViewScrollDirection scrollDirection; // default is UICollectionViewScrollDirectionVerticaltypedef NS_ENUM(NSInteger, UICollectionViewScrollDirection) &#123; UICollectionViewScrollDirectionVertical, // é»˜è®¤æ˜¯ç«–ç›´æ»šåŠ¨ UICollectionViewScrollDirectionHorizontal // æ°´å¹³æ»šåŠ¨&#125;;// è®¾ç½®æ»šåŠ¨æ–¹å‘ï¼Œ/** 1.å¦‚æœæ˜¯å‚ç›´æ»šåŠ¨ï¼Œé«˜åº¦èµ·ä½œç”¨ï¼Œå®½åº¦å¿½ç•¥ / 2.å¦‚æœæ˜¯æ°´å¹³æ»šåŠ¨ï¼Œå®½åº¦æœŸä½œç”¨ï¼Œé«˜åº¦å¿½ç•¥ */@property (nonatomic) CGSize headerReferenceSize; // åˆ†ç»„çš„å¤´éƒ¨è§†å›¾çš„sizeå¤§å°@property (nonatomic) CGSize footerReferenceSize; // åˆ†ç»„çš„å°¾éƒ¨è§†å›¾çš„sizeå¤§å°@property (nonatomic) UIEdgeInsets sectionInset; // è®¾ç½®åŒºçš„å†…è¾¹è·// Set these properties to YES to get headers that pin to the top of the screen and footers that pin to the bottom while scrolling (similar to UITableView).// å¤´éƒ¨è§†å›¾æ‚¬åœè®¾ä¸ºYES@property (nonatomic) BOOL sectionHeadersPinToVisibleBounds NS_AVAILABLE_IOS(9_0);// å°¾éƒ¨è§†å›¾æ‚¬åœè®¾ä¸ºYES@property (nonatomic) BOOL sectionFootersPinToVisibleBounds NS_AVAILABLE_IOS(9_0);@end ä¸Šé¢å¯¹FlowLayoutçš„å±æ€§è®¾ç½®ï¼Œå½“ç„¶ä»£ç†æ–¹æ³•ä¸­ä¹Ÿæœ‰ä¸€ä¸€å¯¹åº”ï¼ŒUICollectionViewDelegateFlowLayout å¸¸ç”¨æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526@protocol UICollectionViewDelegateFlowLayout &lt;UICollectionViewDelegate&gt;@optional/** ä¸‹é¢çš„ä»£ç†æ–¹æ³•æ˜¯é’ˆå¯¹indexPathå¯¹åº”çš„itemè¿›è¡Œä¸ªæ€§åŒ–è®¾ç½® å¦‚æœä½¿ç”¨çš„æ˜¯UICollectionViewFlowLayoutå¸ƒå±€ï¼Œè¿™äº›ä»£ç†æ–¹æ³•è‡ªåŠ¨è°ƒç”¨ *//** è®¾ç½®æŒ‡å®šindexPathçš„å•å…ƒæ ¼çš„å¤§å°(itemSize) */- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath;/** è®¾ç½®åˆ†ç»„ä¸­çš„æ¯ä¸€ä¸ªå•å…ƒæ ¼çš„ä¸Šä¸‹å·¦å³çš„ç©ºç™½è·ç¦»(å†…è¾¹è·) */- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;/** è®¾ç½®åˆ†ç»„ä¸­çš„å•å…ƒæ ¼çš„è¡Œé—´è·(ç«–ç›´) */- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section;/** è®¾ç½®æ¯è¡Œä¸­çš„itemçš„(åˆ—)é—´è·(æ°´å¹³) */- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section;/** åˆ†ç»„çš„å¤´éƒ¨è§†å›¾çš„sizeå¤§å°ï¼Œå«ä¹‰ä¹Ÿæ˜¯æœ‰æ»šåŠ¨æ–¹å‘å†³å®šçš„ */- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section;/** åˆ†ç»„çš„å°¾éƒ¨è§†å›¾çš„sizeå¤§å°ï¼Œå«ä¹‰ä¹Ÿæ˜¯æœ‰æ»šåŠ¨æ–¹å‘å†³å®šçš„ */- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section;@end UIEdgeInsets sectionInset å†…è¾¹è· 6ã€UICollectionViewCellï¼šç›¸å¯¹äºUItableViewCellè€Œè¨€ï¼ŒUIcollectionViewCellæ²¡æœ‰é‚£ä¹ˆå¤šæ ·å¼ã€‚UIcollectionViewCellä¸å­˜åœ¨æ‰€è°“çš„styleï¼Œä¹Ÿæ²¡æœ‰titleLabelå’Œå†…ç½®çš„imageViewå±æ€§ï¼ŒUIcollectionViewCellçš„ç»“æ„ä¸Šç›¸å¯¹æ¯”è¾ƒç®€å•ã€‚ cellï¼šæœ¬èº«ä½œä¸ºçš„Viewï¼Œè¿™é‡Œåº”è¯¥å°±æ˜¯UICollectionReusableView backgroundView ï¼šç”¨ä½œcellèƒŒæ™¯çš„è§†å›¾ï¼Œè®¾ç½®èƒŒæ™¯å›¾ç‰‡ç­‰ã€‚ selectedBackgroundView ï¼šcellè¢«é€‰ä¸­çš„èƒŒæ™¯è§†å›¾ contentView ï¼šå†…å®¹è§†å›¾ï¼Œè‡ªå®šä¹‰çš„cellæ—¶åº”è¯¥å°†å†…å®¹æ”¾åœ¨è¿™ä¸ªViewä¸Š è¡¥å……ï¼šUIcollectionViewæœ‰ä¸€ä¸ªå°ç»†èŠ‚ï¼šè¢«é€‰ä¸­çš„cellçš„è‡ªåŠ¨å˜åŒ–ï¼Œæ‰€æœ‰çš„cellä¸­çš„å­Viewï¼Œä¹ŸåŒ…æ‹¬contentViewä¸­çš„å­Viewï¼Œå½“cellè¢«é€‰ä¸­æ˜¯ï¼Œä¼šè‡ªåŠ¨å»æŸ¥æ‰¾viewæ˜¯å¦æœ‰è¢«é€‰ä¸­çŠ¶æ€ä¸‹çš„æ”¹å˜ï¼Œå¦‚æœåœ¨contentViewä¸­æœ‰ä¸€ä¸ªimageViewçš„selectedå’ŒnormalçŠ¶æ€ä¸‹çš„å›¾ç‰‡æ˜¯ä¸åŒçš„ï¼Œé‚£ä¹ˆé€‰ä¸­cellè¿™å¼ å›¾ç‰‡ä¹Ÿä¼šä»normalå˜æˆselectedï¼Œä¸éœ€è¦æ·»åŠ ä»£ç ã€‚ 7ã€UICollectionViewLayoutAttributes å¸ƒå±€å±æ€§ï¼šåœ¨äº†è§£è¿™ä¸ªç±»ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆç–é€šä¸€ä¸‹ï¼ŒUIcollectionViewçš„å¸ƒå±€æ–¹å¼ï¼Œé¦–å…ˆæˆ‘ä»¬ä¹‹å‰ä¸€ç›´æï¼ŒUIcollectionViewçš„åˆå§‹åŒ–å¿…é¡»æœ‰ä¸€ä¸ªUICollectionViewLayoutï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªå¸ƒå±€æ ¼å¼æ ·å¼ï¼Œ é‚£ä¹ˆä¸€ä¸ªUIcollectionViewæœ‰é‚£ä¹ˆå¤šçš„cellã€supplementary Viewã€decoration Viewï¼ŒUIcollectionViewLayoutæ˜¯å¦‚ä½•è¿›è¡Œå¸ƒå±€æ˜¾ç¤ºçš„å‘¢ï¼Ÿ åŸæ¥ä»UIcollectionViewLayoutå¼€å§‹åŠ è½½å†…å®¹çš„æ—¶å€™ï¼Œä¾¿é»˜é»˜çš„åšäº†å¾ˆå¤šäº‹ï¼šé¦–å…ˆæ˜¯å»è°ƒç”¨ prepareLayout å‡†å¤‡å¸ƒå±€ï¼Œç„¶åæ ¹æ®å½“å‰å±å¹•æ‰€å¤„ä½ç½®çš„åˆé€‚rectï¼Œå¾—åˆ°æ¯ä¸€ä¸ªè§†å›¾çš„UICollectionViewLayoutAttributeså±æ€§ï¼Œç„¶ååœ¨æŠŠè§†å›¾æŒ‰UICollectionViewLayoutAttributesä¸­çš„å±æ€§æè¿°è®¾ç½®è§†å›¾å…·ä½“çš„centerã€sizeç­‰ç­‰ï¼ŒæœŸé—´ä¹Ÿä¼šå»è°ƒç”¨å…¶ä»–æ–¹æ³•å»ç¡®å®šä¸€äº›é—´è·ã€‚æ‰€ä»¥UICollectionViewLayoutAttributesæ˜¯æ¯ä¸ªè§†å›¾å†³å®šæ€§çš„å¸ƒå±€çš„å±æ€§ã€‚ 12345678910111213141516NS_CLASS_AVAILABLE_IOS(6_0) @interface UICollectionViewLayoutAttributes : NSObject &lt;NSCopying, UIDynamicItem&gt;@property (nonatomic) CGRect frame; // å¸ƒå±€è§†å›¾çš„frameç®€å•æ˜äº†@property (nonatomic) CGPoint center; // è§†å›¾ä¸­å¿ƒç‚¹@property (nonatomic) CGSize size; // è§†å›¾å°ºå¯¸@property (nonatomic) CATransform3D transform3D; // è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥åšé…·ç‚«çš„3DåŠ¨ç”»@property (nonatomic) CGRect bounds NS_AVAILABLE_IOS(7_0);@property (nonatomic) CGAffineTransform transform NS_AVAILABLE_IOS(7_0); // è½¬åœºå±æ€§@property (nonatomic) CGFloat alpha; // é€æ˜åº¦@property (nonatomic) NSInteger zIndex; // default is 0 // å±‚çº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œå±‚çº§è¶Šé«˜ï¼ˆæœ€ä¸Šé¢ï¼‰@property (nonatomic, getter=isHidden) BOOL hidden; // As an optimization, UICollectionView might not create a view for items whose hidden attribute is YES@property (nonatomic, strong) NSIndexPath *indexPath; // å¦‚æœæ˜¯cellæœ‰å¯¹åº”çš„indexPath// è§†å›¾æ ‡è®°ï¼Œæ˜¯cellè¿˜æ˜¯supplementary Viewæˆ–è€…decoration View@property (nonatomic, readonly) UICollectionElementCategory representedElementCategory;@property (nonatomic, readonly, nullable) NSString *representedElementKind; // nil when representedElementCategory is UICollectionElementCategoryCell UICollectionViewä¸UITableViewæ¯”è¾ƒ ç›¸åŒç‚¹ï¼š éƒ½éœ€è¦éµå®ˆDataSourceå’Œ Delegateï¼Œå®ç°åè®®æ–¹æ³•ã€‚ å¾…è¡¥å…… ä¸åŒç‚¹ï¼š ä¸UITableViewçš„æœ€å¤§ä¸åŒï¼Œå¸ƒå±€äº¤ç»™äº†æŒ‡å®šçš„UICollectionViewLayoutå¸ƒå±€å¯¹è±¡ã€‚ UICollectionView çš„cell ä½¿ç”¨å¿…é¡»å…ˆæ³¨å†Œï¼Œä½¿ç”¨å‡ºåˆ—çš„æ–¹å¼ã€‚ UICollectionViewï¼šSupplementary è¡¥å……è§†å›¾éœ€è¦å…ˆæ³¨å†Œï¼ˆè¿™é‡Œå¯ä»¥å……å½“åŒºçš„å¤´å’Œå°¾ï¼‰ã€‚ å¾…è¡¥å…… UICollectionView ä½¿ç”¨è¯´æ˜ è¯´æ˜ï¼šä»£ç ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æ€ç»´ åˆ›å»ºUICollectionViewå¿…é¡»è¦æœ‰å¸ƒå±€å‚æ•°flowLayout;(é‡‡ç”¨æ‡’åŠ è½½)UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init]; cellå¿…é¡»é€šè¿‡æ³¨å†Œ;registerClass: forCellWithReuseIdentifier: è‡ªå®šä¹‰Cellï¼ŒåŸå› ï¼šç³»ç»Ÿcellæ²¡æœ‰ä»»ä½•å­æ§ä»¶;(æ·»åŠ å­æ§ä»¶imageï¼Œlabel)ã€‚@interface LNPhotoViewCell : UICollectionViewCell FlowLayoutè‡ªå®šä¹‰ï¼ˆè°ƒæ•´cellå°ºå¯¸ï¼Œåˆ©ç”¨å¸ƒå±€å°±åšæ•ˆæœï¼‰ï¼ŒåŸå› ï¼šç³»ç»Ÿcellä¸­æ¯ä¸ªitemå°ºå¯¸éƒ½ä¸€æ ·;(ç»§æ‰¿flowLayout æˆ– Layout)ã€‚@interface LNFlowLayout : UICollectionViewFlowLayout è‡ªå®šä¹‰å¸ƒå±€: åªè¦äº†è§£5ä¸ªæ–¹æ³•ï¼ˆé‡å†™å®ƒæ–¹æ³•ï¼Œæ‰©å±•åŠŸèƒ½ï¼‰ 1234567891011121314151617// ä»€ä¹ˆæ—¶å€™è°ƒç”¨:collectionViewç¬¬ä¸€æ¬¡å¸ƒå±€,collectionViewåˆ·æ–°çš„æ—¶å€™ä¹Ÿä¼šè°ƒç”¨// ä½œç”¨:è®¡ç®—cellçš„å¸ƒå±€ï¼Œæ¡ä»¶:ellçš„ä½ç½®æ˜¯å›ºå®šä¸å˜çš„.- (void)prepareLayout;// ä½œç”¨:æŒ‡å®šä¸€æ®µåŒºåŸŸç»™ä½ è¿™æ®µåŒºåŸŸcellçš„å°ºå¯¸(å¯ä»¥ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰cellå°ºå¯¸,ä¹Ÿå¯ä»¥æ¯éš”ä¸€ä¸ªè·ç¦»è¿”å›cell)- (nullable NSArray&lt;__kindof UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect;// åœ¨æ»šåŠ¨çš„æ—¶å€™æ˜¯å¦å…è®¸åˆ·æ–°(Invalidate)å¸ƒå±€- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds;// ä»€ä¹ˆæ—¶å€™è°ƒç”¨:ç”¨æˆ·æ‰‹æŒ‡ä¸€æ¾å¼€å°±ä¼šè°ƒç”¨// ä½œç”¨:ç¡®å®šæœ€ç»ˆåç§»é‡- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity; // return a point at which to rest after scrolling - for layouts that want snap-to-point scrolling behavior// ç”±äºUICollectionVeiwç»§æ‰¿è‡ªUIScrollViewï¼Œæ‰€ä»¥éœ€è¦é‡å†™è¯¥å‡½æ•°ï¼Œå‘Šè¯‰contentSizeå¤§å°- (CGSize)collectionViewContentSize; UICollectionViewåŸºæœ¬ä½¿ç”¨ åˆå§‹åŒ–12345678910111213141516171819202122232425262728293031- (UICollectionView *)collectionView &#123; if (_collectionView == nil) &#123; UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init]; //sectionInset è®¾ç½®åŒºçš„å†…è¾¹è· layout.sectionInset = UIEdgeInsetsMake(20, 20, 20, 20); //è®¾ç½®2ä¸ªitemä¹‹é—´çš„æœ€å°é—´éš™ï¼Œ layout.minimumInteritemSpacing = 10; //è®¾ç½®è¡Œä¹‹é—´çš„æœ€å°é—´è· layout.minimumLineSpacing = 10; //è®¾ç½®æ»šåŠ¨æ–¹å‘ï¼Œé»˜è®¤æ˜¯å‚ç›´æ»šåŠ¨ //layout.scrollDirection = UICollectionViewScrollDirectionHorizontal; //å¦‚æœæ˜¯å‚ç›´æ»šåŠ¨ï¼Œé«˜åº¦èµ·ä½œç”¨ï¼Œå®½åº¦å¿½ç•¥ //å¦‚æœæ˜¯æ°´å¹³æ»šåŠ¨ï¼Œå®½åº¦æœŸä½œç”¨ï¼Œé«˜åº¦å¿½ç•¥ layout.headerReferenceSize = CGSizeMake(50, 50); //è®¾ç½®footerViewçš„å¤§å° layout.footerReferenceSize = CGSizeMake(50, 50); _collectionView = [[UICollectionView alloc] initWithFrame:self.view.bounds collectionViewLayout:layout]; _collectionView.backgroundColor = [UIColor whiteColor]; // è®¾ç½®ä»£ç†ï¼Œéµå®ˆåè®®&lt;UICollectionViewDataSource,UICollectionViewDelegate&gt; _collectionView.dataSource = self; _collectionView.delegate = self; &#125; return _collectionView;&#125; æ³¨å†ŒUICollectionViewä½¿ç”¨çš„cellç±»å‹12345678// æ³¨å†Œè¦ä½¿ç”¨çš„cellå¯¹åº”çš„ç±»å‹[self.collectionView registerClass:[LNNumberCollectionViewCell class] forCellWithReuseIdentifier:cellID];// æ³¨å†Œè¦ä½¿ç”¨çš„HeaverViewå¯¹åº”çš„ç±»å‹[_collectionView registerClass:[UICollectionReusableView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"HeadViewId"];// æ³¨å†Œè¦ä½¿ç”¨çš„FooterViewå¯¹åº”çš„ç±»å‹[_collectionView registerClass:[UICollectionReusableView class] forSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:@"footViewId"]; å®ç°åè®®UICollectionViewDataSource12345678910111213141516171819202122#pragma mark ------------------#pragma mark - UICollectionViewDataSource// å¤šå°‘åŒº- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView &#123; return 3;&#125;// å¤šå°‘item- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section &#123; return 20;&#125;// itemå†…å®¹- (__kindof UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath &#123; LNNumberCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath]; cell.label.text = [NSString stringWithFormat:@"%ld",indexPath.item]; cell.photoImageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"%ld",indexPath.item + 1]]; //cell.backgroundColor = [UIColor grayColor]; return cell;&#125; 12345678910111213141516171819//å’ŒUITableViewä¸åŒï¼šè¡¥å……è§†å›¾éœ€è¦å…ˆæ³¨å†Œ//Supplementary è¡¥å……è§†å›¾ï¼Œè¿™é‡Œå¯ä»¥å……å½“åŒºçš„å¤´å’Œå°¾- (UICollectionReusableView*)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath&#123; if([kind isEqual:UICollectionElementKindSectionHeader]) &#123; //æŒ‡æ˜æ˜¯å¤´ UICollectionReusableView *headView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"HeadViewId" forIndexPath:indexPath]; headView.backgroundColor = [UIColor redColor]; return headView; &#125; if ([kind isEqual:UICollectionElementKindSectionFooter]) &#123; UICollectionReusableView *footView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:@"footViewId" forIndexPath:indexPath]; footView.backgroundColor = [UIColor blueColor]; return footView; &#125; return nil;&#125; å®ç°ä»£ç†UICollectionViewDelegate123456789101112131415161718// ç‚¹å‡»itemæ—¶è§¦å‘- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath&#123; NSLog(@"(ç¬¬%ld-åŒº,ç¬¬%ld-item)",indexPath.section,indexPath.item); [collectionView cellForItemAtIndexPath:indexPath].backgroundColor = [UIColor redColor]; &#125;// å½“å‰itemæ˜¯å¦å¯ä»¥ç‚¹å‡»- (BOOL) collectionView:(UICollectionView *)collectionView shouldSelectItemAtIndexPath:(nonnull NSIndexPath *)indexPath&#123; if (indexPath.row % 2) &#123; return YES; &#125; return NO;&#125; 1234567891011121314151617//cellç‚¹å‡»æ—¶æ˜¯å¦é«˜äº®ï¼Œç‚¹å‡»cellæ—¶çš„æ ·å¼å’Œç‚¹å‡»åcellçš„æ ·å¼- (BOOL)collectionView:(UICollectionView *)collectionView shouldHighlightItemAtIndexPath:(NSIndexPath *)indexPath&#123; return YES;&#125;- (void)collectionView:(UICollectionView *)collectionView didHighlightItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell *cell = [collectionView cellForItemAtIndexPath:indexPath]; cell.backgroundColor = [UIColor redColor];&#125;- (void)collectionView:(UICollectionView *)collectionView didUnhighlightItemAtIndexPath:(NSIndexPath *)indexPath&#123; UICollectionViewCell *cell = [collectionView cellForItemAtIndexPath:indexPath]; cell.backgroundColor = [UIColor grayColor];&#125; 123456789101112131415161718192021222324252627282930313233// é•¿æŒ‰æŸitemï¼Œå¼¹å‡ºcopyå’Œpasteçš„èœå• (è¿™äº›æ–¹æ³•ä¸ºæ˜¯ å¤åˆ¶/ç²˜è´´æ“ä½œç›¸å…³)- (BOOL)collectionView:(UICollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath&#123; return YES;&#125;// ä½¿copyå’Œpasteæœ‰æ•ˆ- (BOOL)collectionView:(UICollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender&#123; if ([NSStringFromSelector(action) isEqualToString:@"copy:"] || [NSStringFromSelector(action) isEqualToString:@"paste:"]) &#123; return YES; &#125; return NO;&#125;//- (void)collectionView:(UICollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender&#123; if([NSStringFromSelector(action) isEqualToString:@"copy:"]) &#123;// NSLog(@"-------------æ‰§è¡Œæ‹·è´-------------"); [_collectionView performBatchUpdates:^&#123; [_section0Array removeObjectAtIndex:indexPath.row]; [_collectionView deleteItemsAtIndexPaths:@[indexPath]]; &#125; completion:nil]; &#125; else if([NSStringFromSelector(action) isEqualToString:@"paste:"]) &#123; NSLog(@"-------------æ‰§è¡Œç²˜è´´-------------"); &#125;&#125; å¸ƒå±€å¯¹è±¡UICollectionViewDelegateFlowLayout123456789101112131415161718192021222324252627282930#pragma mark ------------------#pragma mark - UICollectionViewDelegateFlowLayout//ä¸‹é¢çš„ä»£ç†æ–¹æ³•æ˜¯é’ˆå¯¹indexPathå¯¹åº”çš„itemè¿›è¡Œä¸ªæ€§åŒ–è®¾ç½®//å¦‚æœä½¿ç”¨çš„æ˜¯UICollectionViewFlowLayoutå¸ƒå±€ï¼Œè¿™äº›ä»£ç†æ–¹æ³•è‡ªåŠ¨è°ƒç”¨- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath&#123; // indexPath.item æŒ‡å®šç¬¬å‡ ä¸ªcell// NSInteger item = indexPath.item;// if (item % 3 == 1) &#123;// return CGSizeMake(100, 150);// &#125;// return CGSizeMake(100, 200); return CGSizeMake(100, 150);&#125;/** è®¾ç½®åˆ†ç»„ä¸­çš„æ¯ä¸€ä¸ªå•å…ƒæ ¼çš„ä¸Šä¸‹å·¦å³çš„ç©ºç™½è·ç¦»(å†…è¾¹è·) */- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;/** è®¾ç½®åˆ†ç»„ä¸­çš„å•å…ƒæ ¼çš„è¡Œé—´è·(ç«–ç›´) */- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section;/** è®¾ç½®æ¯è¡Œä¸­çš„itemçš„(åˆ—)é—´è·(æ°´å¹³) */- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section;/** åˆ†ç»„çš„å¤´éƒ¨è§†å›¾çš„sizeå¤§å°ï¼Œå«ä¹‰ä¹Ÿæ˜¯æœ‰æ»šåŠ¨æ–¹å‘å†³å®šçš„ */- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section;/** åˆ†ç»„çš„å°¾éƒ¨è§†å›¾çš„sizeå¤§å°ï¼Œå«ä¹‰ä¹Ÿæ˜¯æœ‰æ»šåŠ¨æ–¹å‘å†³å®šçš„ */- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section; è‡ªå®šä¹‰FlowLayoutï¼šæ°´å¹³æ»šåŠ¨ç›¸å†Œ æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061// ä½œç”¨:æŒ‡å®šä¸€æ®µåŒºåŸŸç»™ä½ è¿™æ®µåŒºåŸŸcellçš„å°ºå¯¸(å¯ä»¥ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰cellå°ºå¯¸,ä¹Ÿå¯ä»¥æ¯éš”ä¸€ä¸ªè·ç¦»è¿”å›cell)// ç¼©æ”¾- (nullable NSArray&lt;__kindof UICollectionViewLayoutAttributes *&gt; *)layoutAttributesForElementsInRect:(CGRect)rect &#123; // è®¾ç½®cellå°ºå¯¸ =&gt; UICollectionViewLayoutAttributes // è¶Šé è¿‘ä¸­å¿ƒç‚¹,è·ç¦»è¶Šå°,ç¼©æ”¾è¶Šå¤§ // æ±‚cellä¸ä¸­å¿ƒç‚¹è·ç¦» // 1.è·å–å½“å‰æ˜¾ç¤ºcellçš„å¸ƒå±€ NSArray *attrs = [super layoutAttributesForElementsInRect:self.collectionView.bounds]; for (UICollectionViewLayoutAttributes *attr in attrs) &#123; // 2.è®¡ç®—ä¸­å¿ƒç‚¹è·ç¦» CGFloat delta = fabs((attr.center.x - self.collectionView.contentOffset.x) - self.collectionView.bounds.size.width * 0.5); // 3.è®¡ç®—æ¯”ä¾‹ CGFloat scale = 1 - delta / (self.collectionView.bounds.size.width * 0.5) * 0.25; // 4.ç¼©æ”¾ attr.transform = CGAffineTransformMakeScale(scale, scale); &#125; return attrs;&#125;// ä»€ä¹ˆæ—¶å€™è°ƒç”¨:// ä½œç”¨:ç¡®å®šæœ€ç»ˆåç§»é‡// å®šä½:è·ç¦»ä¸­å¿ƒç‚¹è¶Šè¿‘ï¼Œè¿™ä¸ªcellæœ€ç»ˆå±•ç¤ºåˆ°ä¸­å¿ƒç‚¹- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)proposedContentOffset withScrollingVelocity:(CGPoint)velocity &#123; // æœ€ç»ˆåç§»é‡ CGPoint targetP = [super targetContentOffsetForProposedContentOffset:proposedContentOffset withScrollingVelocity:velocity]; CGFloat collectionW = self.collectionView.bounds.size.width; // 1.è·å–æœ€ç»ˆæ˜¾ç¤ºçš„åŒºåŸŸ CGRect targetRect = CGRectMake(targetP.x, 0, collectionW, MAXFLOAT); // 2.è·å–æœ€ç»ˆæ˜¾ç¤ºçš„cell NSArray *attrs = [super layoutAttributesForElementsInRect:targetRect]; // 3.è·å–æœ€å°é—´è· CGFloat minDelta = MAXFLOAT; for (UICollectionViewLayoutAttributes *attr in attrs) &#123; // è·å–è·ç¦»ä¸­å¿ƒç‚¹çš„è·ç¦»ï¼Œæ³¨æ„ï¼šåº”è¯¥ç”¨æœ€ç»ˆçš„x CGFloat delta = (attr.center.x - targetP.x) - self.collectionView.bounds.size.width * 0.5; if (fabs(delta) &lt; fabs(minDelta)) &#123; minDelta = delta; &#125; &#125; // ç§»åŠ¨é—´è· targetP.x += minDelta; if (targetP.x &lt; 0) &#123; targetP.x = 0; &#125; // è·å–collectionViewåç§»é‡// NSLog(@"%@ %@",NSStringFromCGPoint(targetP),NSStringFromCGPoint(self.collectionView.contentOffset)); return targetP;&#125; é™„å›¾ï¼š æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ§ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€æºæŠ€æœ¯å˜‰å¹´åã€Œå¤œèŠã€ç¤¾åŒºï¼Œé‚€ä½ åŠ å…¥]]></title>
    <url>%2FPerceptionWork%2FOpenSourceTechnology.html</url>
    <content type="text"><![CDATA[å‰äº›æ—¥å­ï¼Œæˆ‘å‘å¸ƒä¸€ä¸ªè‹¹æœå®˜æ–¹æ–‡æ¡£çš„ç¿»è¯‘ï¼Œä¹‹åå°±æœ‰ä¸å°‘æœ‹å‹é—®æˆ‘ï¼šç¿»è¯‘è‹¹æœå®˜æ–¹æ–‡æ¡£èƒ½åšä»€ä¹ˆï¼Œå¼€å‘è¿‡ç¨‹ç”¨åˆ°çš„æ—¶å€™å¾ˆå°‘,æµªè´¹æ—¶é—´ï¼Œè¿˜åˆæ²¡ä»€ä¹ˆç”¨ã€‚ä»Šå¤©ï¼Œåˆšå¥½æœ‰æ—¶é—´ï¼Œå°±åœ¨æ­¤ç”³æ˜ä¸€ä¸‹ç¿»è¯‘è‹¹æœå®˜æ–¹æ–‡æ¡£çš„å®è´¨ä½œç”¨ï¼š é¦–å…ˆï¼Œç¿»è¯‘å®˜æ–¹æ–‡æ¡£å¯ä»¥æé«˜è‡ªèº«ã€Œè‹±è¯­é˜…è¯»èƒ½åŠ› å’Œ ç†è§£èƒ½åŠ›ã€ï¼Œå¢å¤§è‡ªå·±çš„è¯æ±‡é‡ï¼Œè‰¯å¥½çš„è‹±è¯­åŸºç¡€ä¼šè®©å·¥ä½œæ•ˆç‡æ›´ä¸Šä¸€å±‚æ¥¼çš„ï¼› å…¶æ¬¡ï¼Œå¯¹äºiOSå¼€å‘è€Œè¨€ï¼Œå®˜æ–¹æ–‡æ¡£å¯ä»¥è®©ä½ æ›´å¥½åœ°ç†è§£æ¯ä¸€ä¸ªæŠ€æœ¯ç‚¹å®ç°çš„åŸºæœ¬åŸç†ï¼ŒçŸ¥å…¶ç„¶æ›´è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè¿™æ ·å¯¹iOSå¼€å‘çš„è¿›é˜¶è€…å’Œåˆå­¦è€…éƒ½æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼› æœ€åï¼Œç¿»è¯‘å®˜æ–¹æ–‡æ¡£å¯ä»¥è®©ä½ æ›´åŠ å…¨ç¥è´¯æ³¨ï¼Œå†™ä»£ç çš„è¿‡ä¸­ä¼šå‡ºç°åˆ†ç¥ã€æ€ç»´æ··æ²Œç­‰ç°è±¡ï¼Œè¿™æ—¶å€™ä½ å¹³æ—¶çš„å®˜æ–¹ç¿»è¯‘æˆ–ç¬¬ä¸‰æ–¹æ³¨è§£çš„é”»ç‚¼ï¼Œä¼šè®©ä½ æ›´å¥½çš„æ§åˆ¶ä½ çš„æ½œæ„è¯†ï¼Œè®©ä½ é™ä¸‹å¿ƒæ¥ã€‚æˆ‘å·²è¯•è¿‡ï¼Œå¾ˆæœ‰å¸®åŠ©ï¼› æ³¨æ„ï¼Œè‹¹æœå®˜æ–¹æ–‡æ¡£å®å±ç¹å¤šï¼Œå…¨éƒ¨æŒ‰éƒ¨å°±ç­çš„ç¿»è¯‘ä¼šè€—æ—¶å¾ˆé•¿ã€‚ä¸ºæé«˜æ­¤ç¿»è¯‘æ–‡ç« å®è´¨ä½œç”¨ï¼Œç‰¹æ³è¯·å¤§å®¶ï¼šé€‚äº‹åº¦é‡ï¼ŒæŠŠã€Œå®˜æ–¹æ€¥éœ€çš„ç« èŠ‚ æˆ– å®ç”¨å¹¿çš„æ¡†æ¶ã€ï¼Œç¿»è¯‘ã€æ³¨è§£å‡ºæ¥ ï¼Œåˆ†äº«äºç å†œä»¬ã€‚ å½“ç„¶ï¼Œåœ¨ã€Œæ—¶é—´ å’Œ çŸ¥è¯†ã€æœ‰é™å†…ï¼Œç¿»è¯‘çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ã€‚ åˆ†äº«å’Œå¼€æºç²¾ç¥å€¼å¾—ä¿±å¤‡ ä»€ä¹ˆæ˜¯å¼€æºï¼Œä¸ºä»€ä¹ˆè¦å¼€æº? é‚£ä¹ˆä½ æ­£å‡†å¤‡æ‹¥æŠ±å¼€æºå—ï¼Ÿæ­å–œä½ ï¼Œå¼€æºä¸–ç•Œæ¬£èµä½ çš„è´¡çŒ®ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬èŠèŠä»€ä¹ˆæ˜¯å¼€æºï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å¼€æºã€‚ â€œå¼€æºâ€æ„å‘³ç€ä»€ä¹ˆï¼Ÿ å½“ä¸€ä¸ªé¡¹ç›®å¼€æºåï¼Œæ„å‘³ç€ ä¸è®ºä»€ä¹ˆç›®çš„ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥æµè§ˆï¼Œä½¿ç”¨ï¼Œä¿®æ”¹å’Œåˆ†å‘ä½ çš„é¡¹ç›®ã€‚ å¼€æºéå¸¸çš„å¼ºå¤§ã€‚å› ä¸ºå®ƒé™ä½äº†ä½¿ç”¨çš„é—¨æ§›ï¼Œä½¿æ–°å¥‡çš„æ€æƒ³å¾—åˆ°å¿«é€Ÿçš„ä¼ æ’­ã€‚ æ¥ç†è§£å®ƒå¦‚ä½•å·¥ä½œï¼Œæƒ³è±¡ä¸‹ä½ çš„æœ‹å‹æ­£åœ¨åƒä¾¿å½“ï¼Œè¿™æ—¶ä½ å¸¦æ¥äº†æ¨±æ¡ƒæ´¾ã€‚ æ¯ä¸ªäººéƒ½ä¼šæƒ³è¦æ¨±æ¡ƒæ´¾ï¼ˆä½¿ç”¨ï¼‰ è¿™ä¸ªæ´¾å¼•èµ·äº†ä¸€åœºè½°åŠ¨ï¼å‘¨å›´çš„äººä¼šæƒ³çŸ¥é“ä½ çš„çƒ¹é¥ªæ–¹æ³•ï¼ˆæµè§ˆï¼‰ æœ‰ä¸€ä½æœ‹å‹Alexæ˜¯ä¸€åç³•ç‚¹å¸ˆï¼Œä»–ä¼šå»ºè®®å°‘æ”¾ä¸€ç‚¹ç³–ï¼ˆä¿®æ”¹ï¼‰ å¦å¤–ä¸€ä½æœ‹å‹Lisaè¦æ±‚ä½¿ç”¨å®ƒä½œä¸ºä¸‹ä¸ªæ˜ŸæœŸçš„æ™šé¤ï¼ˆåˆ†å‘ï¼‰ åŒæ ·çš„ï¼Œé—­æºå°±åƒæ˜¯ä½ å»é¤å…å¿…é¡»ä»˜é’±æ‰èƒ½åƒæ¨±æ¡ƒæ´¾ã€‚ä½†æ˜¯ï¼Œé¤å…ä¸ä¼šå‘Šè¯‰ä½ æ¨±æ¡ƒæ´¾çš„çƒ¹é¥ªæ–¹æ³•ã€‚å¦‚æœä½ æ°å¥½æŠ„è¢­äº†ä»–ä»¬çš„æ´¾ï¼Œå¹¶ä»¥ä½ è‡ªå·±çš„åä¹‰å‡ºå”®ï¼Œé‚£ä¹ˆé¤å…å°†ä¼šé‡‡å–è¡ŒåŠ¨æŠµåˆ¶ä½ ã€‚ å¼€æºæ˜¯å¦æ„å‘³ç€å…è´¹? å¼€æºæœ€å¸å¼•ä¹‹å¤„å°±æ˜¯å®ƒä¸ç”¨èŠ±é’±ã€‚ç„¶è€Œå…è´¹åªæ˜¯å¼€æºçš„ä»·å€¼çš„ä¸€ä¸ªå‰¯äº§å“ã€‚ å› ä¸º å¼€æºåè®®è¦æ±‚å¼€æºé¡¹ç›®å¯ä»¥è¢«ä»»ä½•äººå‡ºäºå‡ ä¹ä»»ä½•ç›®çš„ä½¿ç”¨ï¼Œä¿®æ”¹å’Œåˆ†äº«ï¼Œè¿™äº›é¡¹ç›®ä¸€èˆ¬éƒ½æ˜¯å…è´¹çš„ã€‚å¦‚æœæœ‰äº›å¼€æºé¡¹ç›®éœ€è¦ä»˜è´¹ä½¿ç”¨ï¼Œä»»ä½•äººéƒ½å¯ä»¥åˆæ³•åœ°ä½¿ç”¨å…¶å…è´¹ç‰ˆã€‚ ä»¥ä¸Šã€Œåˆ†äº« å’Œ å¼€æºç²¾ç¥ã€å†…å®¹ï¼Œéƒ¨åˆ†æ‘˜å½•äºGitHubå¼€æºé¡¹ç›®è´¡çŒ®æŒ‡å—ä¸­æ–‡ç‰ˆï¼Œè¯‘æ–‡é™„åœ¨ä¸Šå·¥ç¨‹ä¸­ï¼Œå¯ä¸‹è½½é˜…è¯»ï¼› å¼€æºç²¾ç¥é‡Œæœ€é‡è¦çš„ï¼Œæ˜¯æ‹¿æ¥ä¸»ä¹‰ è¿™å’Œå¤§éƒ¨åˆ†äººçš„æƒ³æ³•ä¸ä¸€æ ·ã€‚å¼€æºéœ€è¦è´¡çŒ®ã€éœ€è¦ä»˜å‡ºï¼Œä½†åœ¨è´¡çŒ®å’Œä»˜å‡ºä¹‹å‰ï¼Œé¦–è¦çš„æ˜¯å»äº†è§£ã€å»ä½¿ç”¨å·²ç»å­˜åœ¨çš„ã€‚ æ¯”å¦‚å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä¼šç»å¸¸ä½¿ç”¨æ¨¡æ¿ï¼Œå¤©å¤©ç”¨ç€ï¼Œä¼šæœ‰ä¸çˆ½ï¼Œå°±ä¼šæƒ³ç€è‡ªå·±å»å†™ä¸€ä¸ªæ¨¡æ¿å¼•æ“ã€‚ç›´æ¥å»å†™ä¸€ä¸ªæ²¡ä»€ä¹ˆä¸å¯¹ï¼Œä½†æ›´å¥½çš„æ–¹å¼æ˜¯ï¼Œå…ˆå»å¼€æºç¤¾åŒºæœç´¢ä¸‹åŒç±»äº§å“ã€‚çœ‹è‡ªå·±çš„æƒ³æ³•ï¼Œæ˜¯å¦å·²ç»æœ‰äººå®ç°äº†ï¼Œçœ‹è‡ªå·±çš„æƒ³æ³•ä¸­ï¼Œå“ªäº›æ˜¯é è°±çš„ï¼Œå“ªäº›æ˜¯ä¸å¤ªé è°±çš„ã€‚ æ³¨æ„ä¸è¦å»åšã€Œçº¯è°ƒç ”ã€ï¼Œé™¤éä½ å·²ç»æ˜¯è¿™æ–¹é¢çš„ä¸“å®¶ï¼Œæœ‰è¿‡ä½“ç³»åŒ–çš„ç ”ç©¶å’Œæ·±å…¥ã€‚ã€Œçº¯è°ƒç ”ã€æ˜¯æŒ‡ï¼Œæ‰¾åˆ°ç±»ä¼¼çš„äº§å“ï¼Œæµ…å°è¾„æ­¢åœ°è·‘è·‘ demoï¼Œå°±å¼€å§‹å‡ºè¡¨æ ¼ï¼Œæ¨ªå‘æ¯”è¾ƒä¼˜åŠ£ã€‚æ›´ç¬¨ä½†æ›´æœ‰æ•ˆåœ°åšæ³•æ˜¯ï¼Œç›´æ¥å»ç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬é€‰æ‹©äº† Handlebars ï¼Œåœ¨é¡¹ç›®çœŸæ­£ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ‰èƒ½æ·±è§¦åœ°æ„Ÿå—åˆ° Handlebars çš„ä¼˜ç‚¹åŠå…¶ç¼ºç‚¹ã€‚æœ‰è¿‡è¿™ä¹ˆä¸€æ®µæ·±å…¥ä½¿ç”¨ç»éªŒåï¼Œç±»ä¼¼çš„å‰ç«¯æ¨¡æ¿å¼•æ“ï¼Œæ¯”å¦‚ Mustacheã€Hogan ç­‰ï¼Œä¹Ÿæœ‰å¤§æ¦‚æ¸…æ¥šä¸ªä¸ƒä¸ƒå…«å…«äº†ã€‚ æ‹¿æ¥ä¸»ä¹‰ä¸å…‰èƒ½çœå»å¼€å‘æˆæœ¬ï¼Œè¿˜èƒ½è®©ä½ æ‰©å……è§è¯†å’Œæƒ³æ³•ï¼Œè€Œä¸ä¼šæˆä¸ºäº•åº•ä¹‹è›™è¿˜èŒ«ç„¶è‡ªå¾—ã€‚ åœ¨å¼€æºä¸–ç•Œé‡Œï¼Œå‚ä¸æ¯”ä¸»å¯¼æ›´é‡è¦ éµå¾ªæ‹¿æ¥ä¸»ä¹‰ï¼Œå¯ä»¥è®©ä½ æ›´æ‡‚å¾—ä»–äººã€‚åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰æ¬£èµã€æ„Ÿè°¢ï¼Œä¹Ÿä¼šæœ‰æŠ±æ€¨ã€æƒ³æ³•ã€‚ å‰ç«¯ DOM æ“ä½œç±»åº“ä¸­ï¼Œå¾ˆå¤šå…¬å¸åŒ…æ‹¬æ”¯ä»˜å®éƒ½é€‰æ‹©äº† jQueryã€‚ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒjQuery çš„ä¸€äº› API çš„è®¾è®¡éå¸¸èµï¼Œä¸€äº›å†…éƒ¨å®ç°ä¹Ÿéå¸¸æ¼‚äº®ã€‚é‡åˆ°è¿™äº›è®©äººæ¬£èµçš„ç‚¹æ—¶ï¼Œåˆ«å¿˜äº†å°†è‡ªå·±çš„æ„Ÿæƒ³å†™ä¸‹æ¥ã€‚é‚£æ€•æ˜¯ä¸€ç¯‡åšæ–‡ï¼Œæˆ–æ˜¯è·Ÿæœ‹å‹é—²èŠæ—¶çš„åªè¨€ç‰‡è¯­ï¼Œæ‰€æœ‰è¿™äº›ï¼Œéƒ½æ˜¯å‚ä¸ï¼Œéƒ½æ˜¯æ­£èƒ½é‡çš„ä¼ æ’­ã€‚ç¤¾åŒºçš„èµèª‰ï¼Œå¯ä»¥ç»™ jQuery å¼€å‘å›¢é˜Ÿæœ€å¤§çš„é¼“åŠ±ã€‚å¾ˆå¤šåšæŒï¼Œæ˜¯å› ä¸ºæœ‰è‚¯å®šã€‚ å½“ç„¶ï¼ŒjQuery åªè¦å­˜åœ¨ä¸€å¤©ï¼Œå°±ä¸€å®šå­˜åœ¨ä¸è¶³ã€‚æ¯”å¦‚ data çš„ API å˜åŒ–ï¼Œæ¯”å¦‚åŠ¨ç”»ä¸æ”¯æŒçº¯ CSS3 æ–¹å¼ï¼Œè¿˜æœ‰ Sizzle ä¹Ÿå¹¶éé‚£ä¹ˆå®Œç¾ã€‚æ‰€æœ‰è¿™äº›ã€Œç¼ºç‚¹ã€ï¼Œä½ é‡åˆ°çš„ bugï¼Œä½ è¸©è¿‡çš„å‘ï¼Œå½“ä½ æœ‰å¥½çš„æƒ³æ³•æˆ–è§£å†³æ–¹æ¡ˆæ—¶ï¼Œä¸è¦å¿˜è®°åé¦ˆç»™ç¤¾åŒºã€‚jQuery æœ‰è¯¦ç»†çš„åé¦ˆæ¸ é“ï¼Œä¸€èˆ¬æˆç†Ÿçš„å¼€æºç¤¾åŒºéƒ½ä¼šæœ‰ã€‚æ¯”å¦‚æ‰˜ç®¡åœ¨ GitHub ä¸Šçš„é¡¹ç›®ï¼Œä¸€èˆ¬éƒ½å¯ä»¥é€šè¿‡ Issues ç»™ç¤¾åŒºæäº¤ä½ çš„æƒ³æ³•ï¼Œç”šè‡³å¯ä»¥é€šè¿‡ Pull Request ç›´æ¥æäº¤ä½ ä¿®æ”¹è¿‡çš„ä»£ç ã€‚ å‚ä¸è¿›å»ï¼Œå¯ä»¥è®©ä½ æ›´æ‡‚å¾—ç¾ï¼Œæ‡‚å¾—æ„Ÿæ©ä¹‹å¿ƒï¼Œæ‡‚å¾—å›é¦ˆä¹‹æƒ…ã€‚è¿™åœ¨è¿‡ç¨‹ä¸­ï¼Œä½ çš„åŠŸåŠ›ï¼Œå¾€å¾€ä¹Ÿä¼šå¤§å¢ã€‚ä¸å…‰æ˜¯æŠ€æœ¯ä¸Šçš„è¿›æ­¥ï¼Œè¿˜åŒ…æ‹¬è‹±è¯­è¯»å†™èƒ½åŠ›ã€‚åœ¨äººæ€§æ²Ÿé€šä¸Šï¼Œä½ ä¹Ÿä¼šæ”¶è·å¾ˆå¤šï¼Œè¿™æ˜¯æ— ä»·çš„è´¢å¯Œã€‚ æ‹¿æ¥ä¸»ä¹‰æ˜¯å¼€æºçš„ç¬¬ä¸€æ­¥ï¼Œå‚ä¸åˆ™æ˜¯å¼€æºä¸­æœ€æ¼«é•¿çš„ä¸€æ­¥ã€‚å¼€å‘è‡ªå·±ä¸»å¯¼çš„é¡¹ç›®ä¸æ˜¯å¿…é¡»çš„ï¼Œé™¤éä½ çœŸçš„æœ‰å¾ˆå¥½çš„æƒ³æ³•ï¼ŒåŒæ—¶åˆšå¥½æœ‰æ—ºç››çš„ç²¾åŠ›ï¼Œå¦åˆ™ä¸è¦è½»æ˜“å¼€å§‹ï¼Œé‚£ä¸ä»£è¡¨ä»€ä¹ˆï¼Œå¾€å¾€ä»€ä¹ˆä¹Ÿä¸æ˜¯ã€‚æ¯”å¦‚ Sea.jsï¼Œå¦‚æœ RequireJS å½“åˆèƒ½æ¥å—æˆ‘çš„å»ºè®®ï¼Œæˆ–è€… FlyScript çš„ä½œè€…ä¸é€€éšæ±Ÿæ¹–ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæœ‰ Sea.jsã€‚è®©ä¸€äº›äº‹æƒ…è‡ªç„¶åœ°å‘ç”Ÿï¼Œè®©è±†ç“£ä»åœŸå£¤ä¸­å‘èŠ½ã€‚æ›´å¤šåœ°å»äº«å—å‚ä¸ï¼Œä¿æŒç®€å•ä¸è‡ªç„¶ã€‚ å¼€æºçš„æ˜¯ç¤¾åŒºï¼Œä»£ç ä»…æ˜¯å¾ˆå°çš„ä¸€éƒ¨åˆ† è™½ç„¶ä»£ç å¾ˆé‡è¦ï¼Œä½†åœ¨å¼€æºé¡¹ç›®é‡Œï¼Œæºç åªæ˜¯é‡è¦çš„å› ç´ ä¹‹ä¸€ã€‚ é™¤äº†ä»£ç ï¼Œè¿˜æœ‰æ–‡æ¡£ã€æµ‹è¯•ç”¨ä¾‹ã€Issues ç®¡ç†ã€ç‰ˆæœ¬å‘å¸ƒã€å‡çº§ç­–ç•¥ã€ä¹¦ç±ã€è§†é¢‘ç­‰ç­‰ã€‚jQueryã€Backboneã€AngularJS ç­‰æˆç†Ÿé¡¹ç›®ï¼Œæˆç†Ÿçš„æ˜¯ç¤¾åŒºï¼Œè€Œä¸æ˜¯æºç ã€‚å¥½çš„ç¤¾åŒºï¼Œæ˜¯åœ¨ Google ä¸­ä¸€æœç´¢ï¼Œå°±èƒ½æ‰¾åˆ°ä¸å°‘èµ„æ–™ã€‚å¥½çš„ç¤¾åŒºï¼Œæ˜¯ä½ è¸©è¿‡çš„å‘ï¼Œç»å¸¸å·²ç»æœ‰äººä¹Ÿè¸©è¿‡å¹¶æ•´ç†åˆ†äº«å‡ºæ¥äº†ã€‚ ç¤¾åŒºçš„å½¢æˆå¾ˆéš¾ï¼Œéœ€è¦æ ¸å¿ƒå›¢é˜Ÿæ¾æ¹ƒæŒä¹…çš„æ¿€æƒ…ï¼Œè¿˜éœ€è¦å¤©æ—¶ã€åœ°åˆ©ã€äººå’Œã€‚jQuery å·²ç»å½¢æˆåºå¤§çš„ç¤¾åŒºï¼Œä½†å…¶å…„å¼Ÿ YUI3 çš„ç¤¾åŒºï¼Œä¸€ç›´ä¸æ˜¯å¾ˆæˆæ°”å€™ã€‚ä¸¤ä¸‰å¹´å‰ï¼Œæˆ‘æƒ³æ‰¾ YUI3 çš„æ€»ä½“è®¾è®¡æ–‡æ¡£ï¼Œä»¥åŠéƒ¨åˆ†ç»„ä»¶çš„è®¾è®¡æ–‡æ¡£ï¼Œæœç´¢äº†å¾ˆå¤šå¾ˆå¤šåœ°æ–¹ï¼Œæœ€åç»™åŸä½œè€…å‘ä¿¡ï¼Œä¾æ—§éƒ½æœªèƒ½æ‰¾åˆ°æˆ‘æƒ³è¦çš„èµ„æ–™ã€‚ä½† jQueryï¼ŒåŸºæœ¬æ¯ä¸ªç»†èŠ‚ï¼Œéƒ½èƒ½æ¯”è¾ƒè½»æ¾åœ°å°±æ‰¾åˆ°ç›¸å…³èµ„æ–™å’Œè®¨è®ºã€‚ æ²¡æœ‰ç¤¾åŒºçš„å¼€æºé¡¹ç›®ï¼Œå…¶æºç ä¼šä¸€ç›´åœç•™åœ¨ã€Œå­¤èŠ³è‡ªèµã€é˜¶æ®µã€‚å‡ å¹´å‰çš„ KISSYï¼Œè¿˜æœ‰ç™¾åº¦çš„ Tangramï¼Œä¸ªäººè§‰å¾—éƒ½åœç•™åœ¨åˆå§‹é˜¶æ®µï¼Œå‘å±•å¾ˆéš¾ã€‚æœ‰ç¤¾åŒºçš„å¼€æºé¡¹ç›®ï¼Œå…¶æºç ä¼šæ´»èµ·æ¥ï¼Œä¼šè‡ªæˆ‘ä¸æ–­è¿›åŒ–å‡åã€‚æˆ‘å‚ä¸è¿‡çš„ä¸€ä¸ªå…¸å‹é¡¹ç›®æ˜¯ Backboneï¼Œå€˜è‹¥ä½ ç°åœ¨å†å›è¿‡å¤´å»çœ‹ Backbone æœ€åˆæäº¤çš„ä»£ç ï¼Œä¸ç°åœ¨çš„ç›¸æ¯”ï¼ŒçœŸå¿ƒä¼šè§‰å¾—æœ‰ç‚¹æŒ«äº†ã€‚æœ€è®©äººä¸å¯æ€è®®çš„æ˜¯ï¼ŒBackbone æœ€åˆå¾ˆæŒ«çš„ä»£ç ï¼Œåœ¨ç¤¾åŒºçš„å‚ä¸ä¸‹ï¼Œåœ¨ä¸æ–­çš„è®¨è®ºå’Œ Pull Request ä¸­ï¼Œç°åœ¨å·²ç»æ¼”åŒ–æˆéå¸¸é«˜è´¨é‡çš„ä»£ç ï¼Œç”šè‡³æ¯ä¸€å°æ®µä»£ç é‡Œï¼Œéƒ½èƒ½è¯´å‡ºä¸€ä¸ªæ•…äº‹æ¥ã€‚æˆ‘ç°åœ¨ä¾æ—§éå¸¸å…³æ³¨ Backbone çš„æ¯ä¸€æ¬¡ä»£ç å˜åŒ–ï¼Œç‰¹åˆ«æ˜¯è‡ªå·±ä¿®æ”¹è¿‡çš„éƒ¨åˆ†ã€‚ä»å…¶ä»–äººçš„ä¿®æ”¹ä¸­ï¼Œèƒ½æ”¶è·å¾ˆå¤šå¾ˆå¤šã€‚ Backbone çš„ä¾‹å­ï¼Œä¹Ÿå±•ç¤ºäº†ä¸€ä¸ªæ›´å¥½çš„å¼€æºæ–¹å¼ï¼šæœ‰äº†å¥½çš„æƒ³æ³•ï¼Œå°±åˆ†äº«å‡ºæ¥ï¼Œæœ€åˆçš„ä»£ç å±•ç°åŸºæœ¬çš„æ€è·¯å°±å¥½ï¼Œç„¶åé€šè¿‡ç¤¾åŒºçš„å‚ä¸ï¼Œä¸æ–­å¾€å‰æ¼”åŒ–ï¼Œè®©å¤§å®¶éƒ½æˆä¸ºå¼€å‘è€…ï¼Œç¾¤ä½“çš„åŠ›é‡è¿œå¤§äºä¸ªä½“ã€‚ä¸ªäººè‹±é›„å¼çš„å¼€æºæ–¹å¼ï¼Œå·²ç»è¿‡æ—¶äº†ï¼Œå°±åƒ sourceforge.net ä¸€æ ·ã€‚åŠ å…¥æˆ‘çš„å¼€æºç¤¾åŒºï¼Œä¹Ÿç»™è‡ªå·±ä¸€ä¸ªåˆ†äº«å¼€æºå’Œæ‹¿æ¥å¼€æºçš„æœºä¼šã€‚ æœ€åï¼ŒçŸ¥æ˜“è¡Œéš¾ã€‚ä¸Šé¢çš„é“ç†æˆ–è®¸å¤§å®¶éƒ½æ‡‚ï¼ŒçœŸè¦åšåˆ°ï¼Œåˆ™æ˜¯ä¸€åœºä¿®è¡Œã€‚MJ å’Œ LN ä¹Ÿæ‰åˆšåˆšä¸Šè·¯ï¼Œæ—…é€”ä¸­ï¼Œæœ‰æ­å·è¥¿æ¹–æƒ¬æ„çš„å¾®é£ï¼Œä¹Ÿæœ‰è¨å“ˆæ²™æ¼ èˆ¬çš„çƒˆæ—¥å½“å¤´ã€‚å¥½åœ¨ï¼Œé€‰æ‹©äº†ï¼Œå°±ä¸æ€•è¿œã€‚ åœ¨åˆ†äº«å’Œå¼€æºå˜‰å¹´åçš„ã€Œå¤œèŠã€ä¸­åˆ‡è«èµ°å…¥è¯¯åŒº æˆ‘æ›¾åœ¨ç®€ä¹¦ä¸Šçœ‹è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œæ„æ€å¦‚æœå†™æ–‡ç« åªç›¯ç€é˜…è¯»é‡å’Œæ‰“èµï¼Œå°±ä¼šæ…¢æ…¢çš„å¼€å§‹ç„¦è™‘ï¼Œæ¸æ¸åœ°å¤±å»å†™ä½œçš„å…´è¶£ã€‚æˆ‘åŒæ„ä»–çš„è§‚ç‚¹ã€‚ æˆ‘ä»¬å­¦ä¹ æ€»ç»“ï¼Œåˆ†äº«å’Œå¼€æºè‡ªå·±çš„æŠ€æœ¯ç±»ä½œå“ï¼Œä¹Ÿä¸æ˜¯ä¸ºäº†é˜…è¯»é‡ï¼Œä½†æ˜¯æœ‰æ—¶åˆéš¾å…ä¸ºé˜…è¯»é‡æ‰€ç´¯ï¼Œæ¯•ç«Ÿæ–‡ç« å°±æ˜¯åˆ†äº«ç»™äººçœ‹çš„ï¼Œå¦‚æœå†™äº†ä¸€ä¸ªä¸œè¥¿ï¼Œæ¥æ¥å›å›æ²¡äººçœ‹ï¼Œå¿ƒé‡Œä¹Ÿéš¾å…æœ‰ç‚¹å¤±è½ã€‚ä½†æ˜¯å¦‚æœæœ‰äººçœ‹ï¼Œæœ‰äººç•™ä¸‹è¯„è®ºï¼Œæœ‰ä¸ªæ—¶å€™å°±ä¼šèŒç”Ÿ å¤§å®¶éƒ½æŒºå…³æ³¨è¿™ä¸ªäº‹æƒ…çš„ï¼Œæ˜å¤©å†å†™ä¸€ç¯‡æ›´åŠ è¯¦ç»†çš„åˆ†äº«ç»™å¤§å®¶ã€‚ è€Œä¸”é˜…è¯»é‡è¿™ä¸ªä¸œè¥¿åœ¨ä¿è¯å‡†ç¡®çš„å‰æä¸‹ï¼Œæ˜¯ä¸€ä¸ªæ–‡ç« (ä½œå“)è´¨é‡çš„ç¡¬æŒ‡æ ‡ï¼Œè¯»è€…ä¹Ÿéš¾å…å°†é˜…è¯»é‡å’Œæ–‡ç« è´¨é‡è”ç³»åœ¨ä¸€èµ·ã€‚å°±åƒåœ¨ GitHub ä¸Šæ‰¾æ¡†æ¶å…³æ³¨ Star æ•°ä¸€æ ·ï¼Œè¯»è€…åœ¨æ‰¾ä¸€ä¸ªçŸ¥è¯†çš„æ—¶å€™ï¼ŒåŒä¸€ä¸ªå…³é”®è¯æœå‡ºæ¥çš„ç»“æœï¼Œä¸€ä¸ªæœ‰ åä¸‡+ çš„é˜…è¯»é‡ï¼Œä¸€ä¸ªé˜…è¯»é‡åªæœ‰ åæ¥ä¸ªï¼Œä½ ä¼šä¼˜å…ˆé€‰æ‹©æ‰“å¼€å“ªä¸€ä¸ªï¼Ÿ æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¼€æºæ˜¯ä¸€ç§ç²¾ç¥ï¼Œåˆ†äº«æ˜¯ä¸€ç§ç¾å¾·ã€‚åƒé‡Œé©¬å’Œä¼¯ä¹éƒ½æ˜¯æœ‰çš„ã€‚æœ‰å®åŠ›æœ‰é£æ ¼çš„ç‰›äººä¹Ÿæ˜¯æœ‰çš„ã€‚çŒ´å­å°šä¸”æœ‰åˆ†äº«å’Œå›¢åç²¾ç¥ï¼Œä½ ä¸ºä»€ä¹ˆ ä¸è¡ŒåŠ¨èµ·æ¥ã€Œä¸ºä½•ç”˜å¿ƒè´¥äºæ‹–å»¶ç—‡ã€ã€‚ä¸åšã€Œå¤§ç‰›ã€ï¼Œåšåªã€Œå‡çŒ´å­ã€ä¹Ÿä¸é”™ã€‚ ç¨‹åºçŒ¿çš„ç‹¬ç™½ æ˜¯è°æ”¹å˜äº†ä¸–ç•Œï¼Ÿ æ¯ä¸ªå›½å®¶ï¼Œäººä»¬æœ€ç»ˆå°Šæ•¬çš„ï¼Œå¿…å®šæ˜¯é‚£äº›çœŸæ­£åˆ›é€ è´¢å¯Œçš„äººï¼Œè€Œä¸æ˜¯é‚£äº›ç©ºè¨€å¤§è¯çš„äººã€‚ç¨‹åºå‘˜ä¸ä½†åˆ›é€ è´¢å¯Œï¼Œè€Œä¸”åŠªåŠ›æé«˜åˆ›é€ è´¢å¯Œçš„æ•ˆç‡ã€‚æ‰€ä»¥ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œåº”è¯¥æ„Ÿåˆ°è‡ªä¿¡å’Œè‡ªè±ªã€‚ æˆ‘æœ‰ä¸€ä¸ªæ¢¦æƒ³ ç å†œå‘†å­ã€æ€ªäººä¹Ÿæœ‰èµ„æ ¼è·å¾—æ€»ç»Ÿå¥–ç« ã€å›½ä¼šé‡‘è´¨å¥–ç« ä»¥åŠå…¶ä»–èƒ½å¤Ÿæ‰¿è®¤ä»–ä»¬è´¡çŒ®çš„é«˜ç­‰çº§çš„å¥–é¡¹ã€‚ æˆ‘æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œæˆ‘å’Œå…¶ä»–ç¨‹åºå‘˜æ˜¯æœ‹å‹ï¼Œä¸æ˜¯æ•Œäººã€‚æˆ‘ä¸åœ¨åˆ«äººé¢å‰è´¬ä½ç¨‹åºå‘˜ã€‚ ç¨‹åºå‘˜æ˜¯èªæ˜å‹‡æ•¢çš„ï¼Œè€Œä¸”æˆ‘ä»¬ä¹Ÿå¾ˆé£è¶£ã€‚â€œå†…å‘ä¸æ˜¯æˆ‘ä»¬çš„DNAï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸æ˜¯ç”Ÿæ¥å°±å†…å‘ï¼Œæˆ‘å¯ä»¥è°ƒæ•´æˆ‘çš„æ€åº¦å’Œç¤¾äº¤èƒ½åŠ›â€ã€‚ è¯´æ˜ æ”¹å†…å®¹æ•´ç†æ‘˜å½•äºå¤§ç¥çš„Issuesä¸­çš„ä¸€ä¸ªtopicã€ä»€ä¹ˆæ˜¯å¼€æºç²¾ç¥ #167ã€‘https://github.com/lifesinger/blog/issues/167]]></content>
      <categories>
        <category>èŒåœº</category>
      </categories>
      <tags>
        <tag>èŒåœº</tag>
        <tag>å¼€æº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS NSURLSessionAppleè¯‘æ–‡]]></title>
    <url>%2FAppleTranslation%2FNSURLSessionApple.html</url>
    <content type="text"><![CDATA[Write in the firstã€å†™åœ¨æœ€å‰ã€‘ ç”±äº X X (è‡ªåŠ¨è„‘è¡¥) çš„è‹¹æœåœ¨ iOS9 ä¹‹åå·²ç»åºŸå¼ƒäº† NSURLConnectionï¼Œæ‰€ä»¥åœ¨ç°åœ¨çš„å®é™…å¼€å‘ä¸­ï¼Œé™¤äº†å¤§å®¶å¸¸è§çš„ AFN æ¡†æ¶ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯ iOS7 ä¹‹åæ¨å‡ºçš„ NSURLSessionï¼Œä½œä¸ºä¸€å iOS å¼€å‘è€…ï¼Œå¦‚æœä½ åªçŸ¥é“ AFN æ¡†æ¶æ¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œé‚£å°± X x äº†ã€‚ åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ æ­£é¢˜åœ¨è¿™é‡Œé¦–å…ˆé™„ä¸Šå®˜æ–¹åŸæ–‡åœ°å€ URLSession Class Relationships Inherits From NSObject ç»§æ‰¿è‡ª: NSObject Conforms To CVarArgï¼ŒEquatableï¼ŒHashable Framework iOS 7.0+ Class URLSession The NSURLSession class and related classes provide an API for downloading content. This API provides a rich set of delegate methods for supporting authentication and gives your app the ability to perform background downloads when your app is not running or, in iOS, while your app is suspended. NSURLSession ç±»åŠå…¶ç›¸å…³ç±»ä¸ºä¸‹è½½å†…å®¹æä¾›äº†æ¥å£ã€‚è¿™ä¸ª API æä¾›äº†ä¸€ç³»åˆ—ä¸°å¯Œçš„ä»£ç†æ–¹æ³•æ¥æ”¯æŒæˆæƒï¼Œè€Œä¸”è®©ä½ çš„ APP åœ¨åå°è¢«æŒ‚èµ·æ—¶ä¹Ÿèƒ½ç»§ç»­ä¸‹è½½ã€‚ Overview The URLSession class natively supports the data, file, ftp, http, and https URL schemes, with transparent support for proxy servers and SOCKS gateways, as configured in the userâ€™s system preferences. URLSession supports the HTTP/1.1, SPDY, and HTTP/2 protocols. HTTP/2 support is described by RFC 7540, and requires a server supporting either ALPN or NPN for protocol negotiation. You can also add support for your own custom networking protocols and URL schemes (for your appâ€™s private use) using URLProtocol. é€šè¿‡ä»£ç†æœåŠ¡å™¨çš„å’Œ SOCKS ç½‘å…³ä¸ºç”¨æˆ·é…ç½®å¥½ç³»ç»Ÿè®¾ç½®ï¼ŒNSURLSessionç±»å®Œå…¨æ”¯æŒ data, file, ftp, http, httpsç±»å‹çš„è¶…é“¾æ¥ã€‚ä½ ä¹Ÿå¯ä»¥æ·»åŠ ä¸€äº›æ”¯æŒä½ è‡ªå·±å®šåˆ¶çš„ç½‘ç»œåè®®æˆ–è¶…é“¾æ¥ï¼ˆä¸“é—¨ä¸ºä½ è‡ªå·±çš„ APP æ‰€ç”¨ï¼‰ ImportantThe NSURLSession API involves many different classes working together in a fairly complex way that may not be obvious if you read the reference documentation by itself. Before using this API, you should read URL Session Programming Guide to gain a conceptual understanding of how these classes interact with one another. é‡è¦ï¼šNSURLSession çš„ API æœ‰å¾ˆå¤šä½ åœ¨çœ‹æ–‡æ¡£æ—¶å¯èƒ½æ„Ÿè§‰å¹¶ä¸é‡è¦ï¼Œä½†å®é™…ä¸Šå´ä»¥å¾ˆå¤æ‚çš„æ–¹å¼æ¥å…±åŒå‘æŒ¥ä½œç”¨çš„ç±»ã€‚ç”¨è¿™ä¸ª API ä¹‹å‰ï¼Œä½ åº”è¯¥çœ‹ä¸€ä¸‹ URL Session Programming Guide æ¥äº†è§£è¿™äº›ç±»ä¹‹é—´ç›¸äº’è°ƒç”¨çš„ä¸€äº›æ¦‚å¿µã€‚ With the NSURLSession API, your app creates one or more sessions, each of which coordinates a group of related data transfer tasks. For example, if you are writing a web browser, your app might create one session per tab or window, or one session for interactive use and another session for background downloads. Within each session, your app adds a series of tasks, each of which represents a request for a specific URL (following HTTP redirects if necessary). é€šè¿‡ NSURLSession çš„ APIï¼Œä½ çš„ APPå¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–è€…å¤šä¸ªäº‹åŠ¡ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªäº‹åŠ¡éƒ½ç”¨æ¥ååŠ©ä¸€ç»„ç›¸å…³çš„æ•°æ®æ¥ä¼ è¾“ä»»åŠ¡ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ åœ¨å†™ä¸€ä¸ªæµè§ˆå™¨ï¼Œä½ çš„ APP å¯èƒ½åœ¨æ¯ä¸€æ æˆ–æ˜¯æ¯ä¸€ä¸ªçª—å£éƒ½åˆ›å»ºäº†ä¸€ä¸ªäº‹åŠ¡ï¼Œå¯èƒ½ä¸€ä¸ªç”¨æ¥è¿›è¡Œäº¤äº’ï¼Œä¸€ä¸ªç”¨æ¥åå°ä¸‹è½½ã€‚åœ¨æ¯ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œä½ çš„ APP éƒ½æ·»åŠ äº†ä¸€äº›äº†çš„ä»»åŠ¡ï¼Œå…¶ä¸­çš„æ¯ä¸€ä¸ªä»»åŠ¡å°±ä»£è¡¨ä¸€ä¸ªè¯·æ±‚æˆ–æ˜¯ä¸€ä¸ªç‰¹å®šçš„ URLï¼ˆå¿…è¦æ—¶è¿›è¡ŒHTTPé‡å®šå‘ï¼‰ The tasks within a given URL session share a common session configuration object, which defines connection behavior, such as the maximum number of simultaneous connections to make to a single host, whether to allow connections over a cellular network, and so on. The behavior of a session is determined in part by which method you call when creating its configuration object: The singleton shared session (which has no configuration object) is for basic requests. It is not as customizable as sessions that you create, but it serves as a good starting point if you have very limited requirements. You access this session by calling the shared class method. See that methodâ€™s discussion for more information about its limitations. Default sessions behave much like the shared session (unless you customize them further), but let you obtain data incrementally using a delegate. You can create a default session configuration by calling the default method on the URLSessionConfiguration class. Ephemeral sessions are similar to default sessions, but do not write caches, cookies, or credentials to disk. You can create an ephemeral session configuration by calling the ephemeral method on the URLSessionConfiguration class. Background sessions let you perform uploads and downloads of content in the background while your app is not running. You can create a background session configuration by calling the backgroundSessionConfiguration(_:) method on the URLSessionConfiguration class. ç»™å®š URLäº‹åŠ¡çš„è¿™äº›ä»»åŠ¡å…±äº«ä¸€ä¸ªäº‹åŠ¡é…ç½® sessionï¼Œè¿™ä¸ªå¯¹è±¡å®šä¹‰å¥½äº†è¿æ¥è¡Œä¸ºï¼Œæ¯”å¦‚é€šå¾€åŒä¸€ä¸ªä¸»æœºçš„ç›¸ä¼¼è¿æ¥çš„æœ€å¤§è¿æ¥æ•°ï¼Œä¸ç®¡æ˜¯é€šè¿‡èœ‚çªç§»åŠ¨ç½‘ç»œè¿˜æ˜¯åˆ«çš„æ–¹å¼æ¥å…è®¸è¿æ¥ã€‚session çš„è¡Œä¸ºä¸€éƒ¨åˆ†æ˜¯ç”±åˆ›å»ºè¿™ä¸ªé…ç½®å¯¹è±¡æ—¶ä½ è°ƒç”¨çš„æ–¹æ³•æ¥å†³å®šï¼š å•ä¾‹ shared session ï¼ˆæ²¡æœ‰é…ç½®å¯¹è±¡ï¼‰ç”¨äºæ™®é€šè¯·æ±‚ã€‚å®ƒåƒä½ è‡ªå·±åˆ›å»ºçš„sessionä¸€æ ·å¯å®šåˆ¶ï¼Œä½†æ˜¯å¦‚æœä½ çš„è¯·æ±‚æœ‰é™çš„è¯å®ƒæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ï¼Œé€šè¿‡è°ƒç”¨ sharedSession æ¥è·å–è¿™ä¸ª sessionã€‚çœ‹è¿™ä¸ªæ–¹æ³•çš„æ–‡æ¡£æ¥å¾—åˆ°å®ƒçš„ä¸€äº›é™åˆ¶ä¿¡æ¯ã€‚ Default sessions çš„è¡Œä¸ºå’Œ shared session å·®ä¸å¤šï¼ˆé™¤éä½ è‡ªå·±è¿›è¡Œäº†æ·±åº¦å®šåˆ¶ï¼‰ï¼Œä½†ä½ å¿…é¡»è¦é€šè¿‡ä»£ç†æ–¹æ³•å¾—åˆ°å¢é‡æ•°æ®ã€‚è°ƒç”¨ NSURLSessionConfiguration ä¸­çš„ defaultSessionConfiguration æ–¹æ³•æ¥åˆ›å»º Default sessionã€‚ Ephemeral sessionså’ŒDefault sessions å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¸å†™å…¥ caches,cookies, æˆ–credentialsã€‚è°ƒç”¨ NSURLSessionConfiguration ä¸­çš„ ephemeral Session Configuration æ–¹æ³•æ¥åˆ›å»º ephemeral sessionã€‚ Background sessions å¯ä»¥åœ¨ä½ çš„ APP åœ¨åå°è¢«æŒ‚èµ·æ—¶è¿›è¡Œä¸Šä¼ æˆ–ä¸‹è½½ã€‚è°ƒç”¨ NSURLSessionConfiguration ä¸­çš„ backgroundSessionConfiguration: æ–¹æ³•æ¥åˆ›å»º background sessionã€‚ The session configuration object also contains a reference to URL cache and cookie storage objects that may be used when making requests and handling the responses, depending on the configuration and request type. session é…ç½®å¯¹è±¡è¿˜åŒ…å«äº†å¯¹ URL cache å’Œ cookie å­˜å‚¨å¯¹è±¡å‘èµ·è¯·æ±‚å¹¶å¤„ç†ç›¸åº”çš„å¼•ç”¨ï¼Œå…·ä½“å–å†³äºé…ç½®å’Œè¯·æ±‚ç±»å‹ã€‚ The tasks in a session also share a common delegate that lets you provide and obtain information when various events occurâ€”when authentication fails, when data arrives from the server, when data is ready to be cached, and so on. For all background downloads and uploads, you must provide a delegate that conforms to the URLSessionDownloadDelegateObjective-C protocol. Otherwise, if you donâ€™t need any of the features provided by a delegate, you can use this API without providing a delegate by passing nil when you create a session. å½“å¤šç§ç±»å‹çš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆæ¯”å¦‚æˆæƒå¤±è´¥æ—¶ï¼Œæ•°æ®ä¼ è¾“åˆ°æœåŠ¡å™¨æ—¶ï¼Œæ•°æ®å‡†å¤‡å¥½ç¼“å­˜æ—¶ç­‰ç­‰ï¼‰session ä¸­çš„ä»»åŠ¡ä¹Ÿä¼šå…±äº«ä¸€ä¸ªé€šç”¨çš„ä»£ç†æ¥è®©ä½ æä¾›å’Œè·å–ç›¸å…³ä¿¡æ¯ã€‚å¯¹äºæ‰€æœ‰çš„åå°ä¸‹è½½å’Œä¸Šä¼ ï¼Œä½ å¿…é¡»æä¾›ä¸€ä¸ªéµä» NSURLSessionDownloadDelegateçš„ OC åè®®ã€‚å¦åˆ™ï¼Œå¦‚æœä½ ä¸éœ€è¦ä»»ä½•ç”±ä»£ç†æä¾›çš„ç‰¹æ€§ï¼Œåœ¨ä½ åˆ›å»º session æ—¶å°±ç»™ delegate ä¼  nil æ¥è°ƒç”¨è¿™ä¸ª APIã€‚ ImportantThe session object keeps a strong reference to the delegate until your app exits or explicitly invalidates the session. If you do not invalidate the session, your app leaks memory until it exits. é‡è¦ï¼šsession å¯¹ä½ çš„ delegate å§‹ç»ˆä¿æŒå¼ºå¼•ç”¨ï¼Œé™¤éä½ çš„ app é€€å‡ºæˆ–è€… sessionå·²æ˜ç¡®å¤±æ•ˆã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ session å¤±æ•ˆï¼Œä½ çš„ app å°†ä¼šå†…å­˜æº¢å‡ºï¼Œç›´åˆ°å®ƒç»ˆæ­¢ã€‚ Within a session, you create tasks that optionally upload data to a server, then retrieve data from the server either as a file on disk or as one or more NSData objects in memory. The NSURLSession API provides three types of tasks: Data tasks send and receive data using NSData objects. Data tasks are intended for short, often interactive requests to a server. Upload tasks are similar to data tasks, but they also send data (often in the form of a file), and support background uploads while the app is not running. Download tasks retrieve data in the form of a file, and support background downloads and uploads while the app is not running. åœ¨ session ä¸­ï¼Œä½ åˆ›å»ºäº†å¯ä¸Šä¼ æ•°æ®åˆ°æœåŠ¡å™¨çš„ä»»åŠ¡ï¼Œç„¶åé€šè¿‡ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œæˆ–æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ª NSData å¯¹è±¡æ¥è·å–æ•°æ®ã€‚ NSURLSession çš„ API æä¾›äº†ä¸‰ç§ç±»å‹çš„ä»»åŠ¡ï¼š data tasks é€šè¿‡ NSData å¯¹è±¡æ¥å‘é€å’Œæ¥å—æ•°æ®ã€‚ data tasks ç”¨äºä¸æœåŠ¡å™¨è¿›è¡Œç®€çŸ­é¢‘ç¹çš„è¯·æ±‚ã€‚ Upload tasks å’Œ data tasks ç±»ä¼¼ï¼Œä½†æ˜¯ä»–ä»¬ä¹Ÿå¯ä»¥å‘é€æ•°æ®ï¼ˆä¸€èˆ¬æ˜¯é€šè¿‡æ–‡ä»¶çš„å½¢å¼ï¼‰ï¼Œä¹Ÿæ”¯æŒ app åå°ä¸Šä¼ ã€‚ Download tasks é€šè¿‡æ–‡ä»¶çš„å½¢å¼æ¥è·å–æ•°æ®ï¼Œå¹¶ä¸”æ”¯æŒ app åå°ä¸Šä¼ å’Œä¸‹è½½ã€‚ Like most networking APIs, the NSURLSession API is highly asynchronous. It returns data to your app in one of two ways, depending on the methods you call: To a completion handler block that is called when a transfer finishes successfully or with an error. By calling methods on the sessionâ€™s delegate as data is received and when the transfer is complete. å’Œå¤§å¤šæ•°ç½‘ç»œæ¥å£ä¸€æ ·ï¼ŒNSURLSessionæ˜¯é«˜åº¦å¼‚æ­¥çš„ã€‚å®ƒé€šè¿‡ä¸¤ç§æ–¹å¼ä¸­çš„å…¶ä¸­ä¸€ç§æ¥è¿”å›æ•°æ®ç»™ appï¼Œå–å†³äºä½ è°ƒç”¨çš„æ–¹æ³•ï¼š å½“ä¼ è¾“æˆåŠŸæˆ–æ˜¯å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨ completion handler blockï¼› å½“æ”¶åˆ°æ•°æ®æˆ–æ˜¯ä¼ è¾“å®Œæˆæ—¶è°ƒç”¨ session çš„ä»£ç†æ–¹æ³•ã€‚ In addition to delivering this information to delegates, the NSURLSession API provides status and progress properties that you can query if you need to make programmatic decisions based on the current state of the task (with the caveat that its state can change at any time). URL sessions also support canceling, restarting or resuming, and suspending tasks, and provide the ability to resume suspended, canceled, or failed downloads where they left off. é™¤äº†é€šè¿‡ä»£ç†æ¥ä¼ é€’æ•°æ®ï¼Œå¦‚æœä½ éœ€è¦é€šè¿‡å½“å‰ä»»åŠ¡çš„çŠ¶æ€ï¼ˆç»™å‡ºä¸€äº›çŠ¶æ€è­¦ç¤ºï¼‰åšä¸€äº›ç¨‹åºä¸Šçš„å†³å®šï¼Œ NSURLSessionçš„ API ç»Ÿä¸€æä¾›äº†çŠ¶æ€å’Œè¿›åº¦çš„å±æ€§ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€‚ URL sessions åŒæ ·æ”¯æŒå–æ¶ˆï¼Œé‡å¯ï¼Œæ¢å¤ï¼ŒæŒ‚èµ·ä»»åŠ¡ï¼Œè€Œä¸”å¯ä»¥åœ¨ä»–ä»¬åœæ­¢çš„åœ°æ–¹æ¢å¤æŒ‚èµ·ã€å–æ¶ˆã€å¤±è´¥äº†çš„ä¸‹è½½ã€‚ URL Session Class Hierarchyå±‚çº§ç»“æ„The NSURLSession API consists of the following classes (nested to show subclass relationships):NSURLSession API ç”±ä¸‹é¢çš„ç±»ç»„æˆï¼ˆä¸‹é¢çš„ç¼©è¿›æ˜¾ç¤ºçš„æ˜¯å­ç±»çš„å…³ç³»ï¼‰ URLSessionâ€”A session object. ï¼ˆä¸€ä¸ª session å¯¹è±¡ï¼‰ URLSessionConfigurationâ€”A configuration object used when initializing the session.ï¼ˆç”¨æ¥åˆå§‹åŒ– session çš„é…ç½®å¯¹è±¡ï¼‰ URLSessionTaskâ€”The base class for tasks within a session.ï¼ˆåœ¨ session ä¸­è¡¨ç¤ºä»»åŠ¡çš„åŸºç±»ï¼‰ URLSessionDataTaskâ€”A task for retrieving the contents of a URL as an NSData object.ï¼ˆç”¨æ¥è·å– NSData å¯¹è±¡çš„ URL çš„ä»»åŠ¡ï¼‰ URLSessionUploadTaskâ€”A task for uploading a file, then retrieving the contents of a URL as an NSData object.ï¼ˆç”¨æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œå¹¶æ¥æ”¶ NSData å¯¹è±¡çš„ URL çš„ä»»åŠ¡ï¼‰ URLSessionDownloadTaskâ€”A task for retrieving the contents of a URL as a temporary file on diskï¼ˆä»¥ç£ç›˜ä¸´æ—¶æ–‡ä»¶çš„å½¢å¼è·å– URL çš„å†…å®¹çš„ä»»åŠ¡ï¼‰ URLSessionStreamTaskâ€”A task for establishing a TCP/IP connectionï¼ˆç”¨æ¥å»ºç«‹ TCP/IPè¿æ¥çš„ä»»åŠ¡ï¼‰ In addition, the NSURLSession API provides four protocols that define delegate methods your app can implement to provide more fine-grained control over session and task behavior. é™¤æ­¤ä¹‹å¤–ï¼ŒNSURLSession è¿˜æä¾›äº†4ä¸ªä»£ç†ï¼Œ è®¢äº†ä»£ç†æ–¹æ³•ï¼Œä½ çš„ app å¯ä»¥å®ç°è¿™äº›ä»£ç†æ–¹æ³•ï¼Œæä¾›å¯¹ session å’Œ task æ›´åŠ ç»†åŒ–çš„æ§åˆ¶ã€‚ URLSessionDelegateâ€”Defines delegate methods to handle session-level eventsï¼ˆå¯å¤„ç† session level äº‹ä»¶çš„ä»£ç†ï¼‰ URLSessionTaskDelegateâ€”Defines delegate methods to handle task-level events common to all task typesï¼ˆå¯å¤„ç†å’Œå…¶ä»–æ‰€æœ‰ task ç±»å‹ç›¸é€šçš„ task level çš„æ–¹æ³•çš„ä»£ç†ï¼‰ URLSessionDataDelegateâ€”Defines delegate methods to handle task-level events specific to data and upload tasksï¼ˆå¯å¤„ç†ä¸æ•°æ®å’Œä¸Šä¼ ä»»åŠ¡ç›¸å…³çš„ task level çš„æ–¹æ³•çš„ä»£ç†ï¼‰ URLSessionDownloadDelegateâ€”Defines delegate methods to handle task-level events specific to download tasksï¼ˆå¤„ç†ä¸ä¸‹è½½ä»»åŠ¡ç›¸å…³çš„ task level çš„æ–¹æ³•çš„ä»£ç†ï¼‰ URLSessionStreamDelegateâ€”Defines delegate methods to handle task-level events specific to stream tasksï¼ˆå¤„ç†ä¸æ•°æ®æµç›¸å…³çš„ task level çš„æ–¹æ³•çš„ä»£ç†ï¼‰ Finally, the NSURLSession API uses a number of classes that are also commonly used with other APIs such as NSURLConnection and NSURLDownload. Some of these shared classes include: æœ€ç»ˆï¼ŒNSURLSession çš„ API ä½¿ç”¨äº†å¾ˆå¤šç±»ï¼Œè¿™äº›ç±»ä¹ŸåŒæ ·ä½¿ç”¨äº†å…¶ä»–çš„ APIï¼Œæ¯”å¦‚ NSURLConnection å’Œ NSURLDownloadã€‚å…±åŒä½¿ç”¨çš„ç±»åŒ…æ‹¬ï¼š NSURLâ€”An object that contains a URL.ï¼ˆåŒ…å«äº† URL çš„å¯¹è±¡ï¼‰ NSURLRequestâ€”Encapsulates metadata related to a URL request, including the URL, request method, and so on.ï¼ˆå°è£…ä¸ URL è¯·æ±‚ï¼ŒåŒ…æ‹¬ URLã€ è¯·æ±‚æ–¹æ³•ç­‰ç­‰ç›¸å…³çš„å…ƒæ•°æ®ï¼‰ NSURLResponseâ€”Encapsulates metadata related to a serverâ€™s response to a request, such as the content MIME type and length. (å°è£…æœåŠ¡å™¨ç›¸åº”çš„è¯·æ±‚ï¼Œå¦‚ä¸ Content çš„ MIME ç±»å‹å’Œé•¿åº¦ç›¸å…³çš„å…ƒæ•°æ®) NSHTTPURLResponseâ€”Adds additional metadata specific to HTTP requests, such as response headers.ï¼ˆç»™ HTTPè¯·æ±‚æ·»åŠ ç‰¹å®šçš„é™„åŠ å…ƒæ•°æ®ï¼Œæ¯”å¦‚ response headersï¼‰ NSCachedURLResponseâ€”Encapsulates an URLResponse object, along with the actual body data of the serverâ€™s response, for caching purposes.ï¼ˆç”¨æ¥ç¼“å­˜æœåŠ¡å™¨å“åº”çš„ body data å°è£…çš„ä¸€ä¸ªNSURLResponseå¯¹è±¡ï¼‰ Authentication and TLS Customizationèº«ä»½éªŒè¯å’Œ TLS å®šåˆ¶ When a server requests authentication or provides credentials during TLS negotiation, the URL session calls methods on its delegate, allowing you to handle the authentication or certificate validation in a custom manner. The method it calls depends on whether you are handling a task-specific challenge or a session-wide challenge. Table 1 shows the difference between the two. å½“æœåŠ¡å™¨è¦æ±‚èº«ä»½éªŒè¯æˆ–åœ¨ TLS åå•†æœŸé—´æä¾›å‡­è¯æ—¶ï¼ŒURL Session é€šè¿‡è°ƒç”¨ä»£ç†æ–¹æ³•ï¼Œè®©ä½ å¯ä»¥è‡ªå®šä¹‰å¤„ç†èº«ä»½éªŒè¯æˆ–è¯ä¹¦éªŒè¯ã€‚è°ƒç”¨çš„ä»£ç†æ–¹æ³•å–å†³äºä½ æ˜¯åœ¨å¤„ç† task ç›¸å…³è¿˜æ˜¯ sessionèŒƒå›´å†…çš„æŒ‘æˆ˜ã€‚Table 1 ç»™å‡ºäº†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ã€‚ Table 1Session-level and connection-level challenges Session-wide challenges Task-specific challenges NSURLAuthenticationMethodNTLM NSURLAuthenticationMethodDefault NSURLAuthenticationMethodNegotiate NSURLAuthenticationMethodHTTPBasic NSURLAuthenticationMethodClientCertificate NSURLAuthenticationMethodHTTPDigest NSURLAuthenticationMethodServerTrust - å¯¹äº task ç›¸å…³çš„æŒ‘æˆ˜ï¼Œ session ä¼šè°ƒç”¨ä»£ç†çš„URLSession:task:didReceiveChallenge:completionHandler: æ–¹æ³•ã€‚ å¯¹äº session ç›¸å…³çš„æˆæƒæŒ‘æˆ˜ï¼Œsession ä¼šè°ƒç”¨ä»£ç†çš„URLSession:didReceiveChallenge:completionHandler: æ–¹æ³•ï¼Œå¦‚æœå®ƒä¸å­˜åœ¨ï¼Œåˆ™è°ƒç”¨ä»£ç†çš„URLSession:task:didReceiveChallenge:completionHandler: æ–¹æ³•ã€‚ If you do not implement these methods, when a request requires client authentication, the URL session attempts to authenticate as follows: Using the authentication information provided as part of the requested URL, if available By looking up Internet passwords and certificates in the userâ€™s keychain (in macOS) or the appâ€™s keychain (in iOS) å½“è¯·æ±‚éœ€è¦å®¢æˆ·ç«¯æˆæƒæ—¶ï¼Œå¦‚æœä½ æ²¡æœ‰å®ç°è¿™äº›æ–¹æ³•ï¼ŒURL Session ä¼šé€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å°è¯•æˆæƒï¼š å¦‚æœ URLä¸­å«æœ‰æˆæƒä¿¡æ¯çš„è¯ï¼Œé€šè¿‡è¯·æ±‚çš„ URL ä¸­çš„æˆæƒä¿¡æ¯ã€‚ åœ¨ç”¨æˆ·çš„é’¥åŒ™ä¸²ï¼ˆ åœ¨ OS X ä¸­ï¼‰æˆ–æ˜¯ app çš„é’¥åŒ™ä¸²ï¼ˆåœ¨ iOS ä¸­ï¼‰å¯»æ‰¾ç½‘ç»œå¯†ç æˆ–æ˜¯è¯ä¹¦ã€‚ Then, if credentials are not available, or if the server rejects the credentials, the connection continues without authenticating. For HTTP and HTTPS requests, the connection attempt fails with an appropriate HTTP status code, and may provide alternative content (such as the public version of a private site). For other URL types (such as FTP),the connection fails with a connection failure. å¦‚æœéªŒè¯ä¸å¯ç”¨ï¼Œæˆ–æ˜¯æœåŠ¡å™¨æ‹’ç»äº†éªŒè¯ï¼Œé‚£è¿™ä¸ªè¿æ¥å°†ä¼šåœ¨æ²¡æœ‰æˆæƒçš„æƒ…å†µä¸‹ç»§ç»­ã€‚å¯¹äº HTTP å’Œ HTTPs è¯·æ±‚æ¥è¯´ï¼Œè¿æ¥ä¼šé€šè¿‡ä¸€ä¸ªå¯¹åº”çš„ HTTP çŠ¶æ€ç ååº”å°è¯•å¤±è´¥ï¼Œ ä¹Ÿå¯èƒ½ä¼šæä¾›å¯é€‰æ‹©çš„å†…å®¹ï¼ˆæ¯”å¦‚ç§æœ‰ç½‘ç«™çš„å…¬å¼€ç‰ˆæœ¬ï¼‰ã€‚å¯¹äºå…¶ä»–ç±»å‹çš„ URLï¼ˆæ¯”å¦‚ FTPï¼‰ï¼Œå°†ä¼šç›´æ¥è¿æ¥å¤±è´¥ã€‚ NoteKerberos authentication is handled transparently. The delegate methods described here do not apply to Kerberos authentication. æ³¨æ„ï¼šerberos èº«ä»½éªŒè¯çš„å¤„ç†æ˜¯å…¬å¼€é€æ˜çš„ã€‚è¿™é‡Œæè¿°çš„å§”æ‰˜æ–¹æ³•ä¸é€‚ç”¨äº Kerberos èº«ä»½éªŒè¯ã€‚ App Transport Security (ATS)App ä¼ è¾“å®‰å…¨ (ATS) Starting in iOS 9.0 and OS X v10.11, a new security feature called App Transport Security (ATS) is enabled by default for all HTTP connections made with NSURLSession. ATS requires that HTTP connections use HTTPS (RFC 2818). For more information, see NSAppTransportSecurity in the Information Property List Key Reference. ä» iOS9.0 å’Œ OS X v10.11 å¼€å§‹ï¼Œä¸€ç§ç§°ä¸ºApp ä¼ è¾“å®‰å…¨ï¼ˆATSï¼‰çš„å®‰å…¨ç‰¹æ€§åœ¨æ‰€æœ‰ç”¨ä½œ HTTP è¿æ¥çš„ NSURLSession ä¸­æ˜¯é»˜è®¤å¯ç”¨çš„ã€‚ATS è¦æ±‚ HTTP è¿æ¥ä½¿ç”¨ HTTPSï¼ˆRFC 2818ï¼‰ã€‚ æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹Information Property List Key Reference ä¸­çš„ NSAppTransportSecurity Using an URL Sessionä½¿ç”¨ URL Sessionä½¿ç”¨ NSURLSession ç±»å‘èµ·ä¸€ä¸ªè¯·æ±‚: åˆ›å»ºä¸€ä¸ª session é…ç½®ã€‚è‹¥æ˜¯ç”¨ä½œåå°çš„ sessionï¼Œè¿™ä¸ªé…ç½®å¿…é¡»åŒ…æ‹¬ä¸€ä¸ª å”¯ä¸€æ ‡è¯†ï¼ˆunique identifierï¼‰ã€‚ å­˜å‚¨è¿™ä¸ªæ ‡è¯†ï¼Œ å½“ä½ çš„ app å´©æºƒæˆ–æ˜¯è¢«ç»ˆæ­¢æˆ–æ˜¯è¢«æŒ‚èµ·æ—¶ç”¨å®ƒæ¥é‡è¿ sessionã€‚ åˆ›å»ºä¸€ä¸ª sessionï¼Œ æŒ‡å®šå®ƒçš„é…ç½®å¯¹è±¡ï¼Œæˆ–æ˜¯ä»£ç†ã€‚ åœ¨æ¯ä¸ªä»£è¡¨ä¸€ä¸ªèµ„æºè¯·æ±‚çš„ session ä¸­åˆ›å»º task å¯¹è±¡ã€‚è¿™äº› task å¯¹è±¡åº”è¯¥æ˜¯NSURLSessionTaskâ€”NSURLSessionDataTask,NSURLSessionUploadTask, or NSURLSessionDownloadTask çš„å­ç±»ï¼Œå…·ä½“ç”¨å“ªä¸ªå–å†³äºä½ æƒ³è¦åšä»€ä¹ˆã€‚ æ¯ä¸ªtask å¼€å§‹æ—¶éƒ½å¤„äºæŒ‚èµ·çŠ¶æ€ã€‚ä½ çš„ App è°ƒç”¨æ¢å¤ä»»åŠ¡åï¼Œå®ƒä¼šå¼€å§‹ä¸‹è½½å…¶å¯¹åº”çš„èµ„æºã€‚ åœ¨ä½ å¼€å§‹ä¸€ä¸ª task ä¹‹åï¼Œsession ä¼šè°ƒç”¨å…¶ä»£ç†æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š å¦‚æœå’ŒæœåŠ¡å™¨åˆå§‹åŒ–æ¡æ‰‹éœ€è¦ä¸€ä¸ªè¿æ¥ level çš„æŒ‘æˆ˜ï¼ˆæ¯”å¦‚SSL çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼‰ï¼ŒNSURLSession ä¼šè°ƒç”¨ URLSession:task:didReceiveChallenge:completionHandler: æˆ–æ˜¯ URLSession:didReceiveChallenge:completionHandler: ä»£ç†æ–¹æ³•ï¼Œå¦‚å‰é¢çš„ èº«ä»½éªŒè¯å’Œ TLS å®šåˆ¶ æ‰€è¿°ã€‚äº†è§£æ›´å¤šä¸º NSURLSession å†™ä¸€ä¸ªæˆæƒä»£ç†æ–¹æ³•çš„ä¿¡æ¯ï¼Œè¯·é˜…è¯» read URL Session Programming Guide. å¦‚æœè¿™ä¸ª task çš„æ•°æ®æ˜¯ç”±æµæä¾›çš„ï¼ŒNSURLSession å¯¹è±¡å°†ä¼šè°ƒç”¨ä»£ç†çš„ URLSession:task:needNewBodyStream: ä»£ç†æ–¹æ³•æ¥è·å–ä¸€ä¸ª æä¾›æ–°è¯·æ±‚çš„ body data çš„ NSInputStream å¯¹è±¡ã€‚ åœ¨åˆå§‹åŒ–ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ˆå¦‚æœå¯ç”¨çš„è¯ï¼‰çš„ body å†…å®¹æœŸé—´ï¼Œä»£ç†ä¼šé˜¶æ®µæ€§æ¥æ”¶ URLSession:task:didSendBodyData:totalBytesSent:totalBytesExpectedToSend: çš„å›è°ƒæ¥æŠ¥å‘Šä¸Šä¼ è¿›åº¦ï¼› æœåŠ¡å™¨å‘é€ä¸€ä¸ªå“åº”ï¼› å¦‚æœå“åº”è¡¨æ˜éœ€è¦æˆæƒï¼Œsession ä¼šè°ƒç”¨ä»£ç†æ–¹æ³•URLSession:didReceiveChallenge:completionHandler: ï¼Œå›åˆ°æ­¥éª¤2ï¼› å¦‚æœå“åº”æ˜¯ä¸€ä¸ª HTTP é‡å®šå‘å“åº”ï¼Œ NSURLSession å¯¹è±¡ä¼šè°ƒç”¨ä»£ç†æ–¹æ³•URLSession:task:willPerformHTTPRedirection:newRequest:completionHandler: ä»£ç†æ–¹æ³•ä¼šç”¨æä¾›çš„ NSRULRequest å¯¹è±¡ï¼ˆéµå¾ªé‡å®šå‘ï¼‰ï¼Œæˆ–æ˜¯æ–°çš„ NSURLRequest å¯¹è±¡ï¼ˆå¦‚æœéœ€è¦é‡å®šå‘åˆ°ä¸€ä¸ªä¸åŒçš„ URL çš„è¯ï¼‰ï¼Œæˆ–æ˜¯ nilï¼ˆå°†æœ‰æ•ˆçš„å“åº”ä½œä¸ºé‡å®šå‘å“åº”çš„ bodyï¼Œå¹¶å°†å®ƒä½œä¸ºç»“æœè¿”å›ï¼‰ æ¥è°ƒç”¨æ‰€æä¾›çš„ completion handler ã€‚ å¦‚æœä½ å†³å®šè¿½è¸ªé‡å®šå‘ï¼Œè¿”å›æ­¥éª¤2ï¼› å¦‚æœä»£ç†æ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªé‡å®šå‘å°†ä¼šè¢«é‡å®šå‘çš„æœ€å¤§æ•°å­—è·Ÿè¿›ã€‚ å¯¹äºä¸€ä¸ªé€šè¿‡è°ƒç”¨downloadTaskWithResumeData:æˆ– downloadTaskWithResumeData:completionHandler: æ–¹æ³•åˆ›å»ºçš„ï¼ˆé‡å¤ï¼‰ä¸‹è½½ä»»åŠ¡æ¥è¯´ï¼ŒNSURLSession ä¼šå¯¹ä¸€ä¸ªæ–°çš„ä»»åŠ¡å¯¹è±¡è°ƒç”¨URLSession:downloadTask:didResumeAtOffset:expectedTotalBytes: ä»£ç†æ–¹æ³•ã€‚ å¯¹äºæ•°æ®ä»»åŠ¡ï¼ŒNSURLSession ä¼šè°ƒç”¨URLSession:dataTask:didReceiveResponse:completionHandler: ä»£ç†æ–¹æ³•ï¼Œæ¥å†³å®šæ˜¯å¦è¦å°† æ•°æ®ä»»åŠ¡è½¬æ¢æˆä¸‹è½½ä»»åŠ¡ï¼Œç„¶åè°ƒç”¨å®Œæˆå›è°ƒæ¥ç»§ç»­æ¥æ”¶æˆ–ä¸‹è½½æ•°æ®ã€‚ å¦‚æœä½ çš„ app é€‰æ‹©å°†æ•°æ®ä»»åŠ¡è½¬æ¢æˆä¸‹è½½ä»»åŠ¡ï¼ŒNSURLSession ä¼šå°†è¿™ä¸ªæ–°çš„ä¸‹è½½ä»»åŠ¡ä½œä¸ºä¸€ä¸ªå‚æ•°æ¥è°ƒç”¨ urlSession:dataTask:didBecomeDownloadTask: ä»£ç†æ–¹æ³•ã€‚è°ƒç”¨å®Œä¹‹åï¼Œä»£ç†ä¸ä¼šä»æ•°æ®ä»»åŠ¡æ¥æ”¶åˆ°è¿›ä¸€æ­¥å›è°ƒï¼Œè€Œæ˜¯ä»ä¸‹è½½ä»»åŠ¡é‚£é‡Œæ¥æ¥æ”¶å›è°ƒï¼› åœ¨æœåŠ¡å™¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä»£ç†ä¼šå‘¨æœŸæ€§åœ°æ¥æ”¶åˆ°ä¸€ä¸ª task-level çš„å›è°ƒæ–¹æ³•æ¥æŠ¥å‘Šä¼ è¾“çš„è¿›åº¦ã€‚ å¯¹äºæ•°æ®ä»»åŠ¡ï¼Œsession ä¼šåœ¨æ¥æ”¶è¿‡ç¨‹ä¸­é€šè¿‡çœŸæ­£çš„æ•°æ®å—æ¥è°ƒç”¨URLSession:dataTask:didReceiveData: ä»£ç†æ–¹æ³•ã€‚å¯¹äºä¸‹è½½ä»»åŠ¡æ¥è¯´ï¼Œsession ä¼šé€šè¿‡å·²ç»æˆåŠŸå†™å…¥ç£ç›˜çš„ bytes æ¥è°ƒç”¨urlSession:downloadTask:didWriteData:totalBytesWritten:totalBytesExpectedToWrite: ä»£ç†æ–¹æ³•ã€‚å¦‚æœç”¨æˆ·å‘Šè¯‰ app æ¥æš‚åœä¸‹è½½ï¼Œé€šè¿‡cancelByProducingResumeData: ç„¶åï¼Œå¦‚æœç”¨æˆ·è¦æ±‚ app ç»§ç»­ä¸‹è½½ä»»åŠ¡ï¼Œå°†è¿”å›çš„æ¢å¤æ•°æ®ç»™downloadTaskWithResumeData:æˆ– downloadTaskWithResumeData:completionHandler: æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸‹è½½ä»»åŠ¡ï¼Œæ¥ç»§ç»­ä¸‹è½½ã€‚ï¼ˆè¿”å›æ­¥éª¤1ï¼‰ å¯¹äºæ•°æ®ä»»åŠ¡ï¼ŒNSURLSession å¯¹è±¡å¯èƒ½ä¼šè°ƒç”¨URLSession:dataTask:willCacheResponse:completionHandler: æ–¹æ³•ã€‚ä½ çš„ app åº”è¯¥æ¥å†³å®šæ˜¯å¦å…è®¸ç¼“å­˜ã€‚å¦‚æœä½ æ²¡æœ‰æ˜¯ç°åœ¨åˆæ ¼æ–¹æ³•ï¼Œé»˜è®¤ä¼šä½¿ç”¨ session çš„é…ç½®å¯¹è±¡ä¸­çš„ç¼“å­˜æ–¹æ¡ˆã€‚ å¦‚æœå“åº”æ˜¯ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆçš„ç¼–ç ï¼Œsession ä¼šåœ¨didiRecieveReponseä»£ç†è¢«å¤šæ¬¡è°ƒç”¨ä¹‹åå†æ¬¡è°ƒç”¨ didRecieveData ä»£ç†æ–¹æ³•ã€‚å¦‚æœå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œå›è°ƒæ­¥éª¤8ï¼ˆå¤„ç† didRecieveResponseå›è°ƒï¼‰ å¦‚æœä¸‹è½½ä»»åŠ¡æˆåŠŸå®Œæˆï¼Œ NSURLSession å¯¹è±¡ä¼šé€šè¿‡ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶çš„åœ°å€æ¥è°ƒç”¨ä»»åŠ¡çš„ urlSessionDownloadTask:didFinishDownloadingToURL: æ–¹æ³•ã€‚ä½ çš„ app å¿…é¡»ä»è¿™ä¸ªæ–‡ä»¶ä¸­è¯»å–è¿”å›çš„æ•°æ®ï¼Œæˆ–æ˜¯åœ¨è¿™ä¸ªä»£ç†æ–¹æ³• ç»“æŸä¹‹å‰å°†å®ƒç§»åˆ°ä¸€ä¸ªæ°¸ä¹…ä¿å­˜çš„åœ°å€ã€‚ ä»»åŠ¡å®Œæˆæ—¶ï¼Œ NSURLSession å¯¹è±¡ä¼šé€šè¿‡ä¸€ä¸ªé”™è¯¯å¯¹è±¡æˆ–æ˜¯ nil ï¼ˆå¦‚æœä»»åŠ¡æˆåŠŸå®Œæˆï¼‰æ¥è°ƒç”¨ urlSession:task:didCompleteWithError:å¦‚æœè¿™ä¸ªä¸‹è½½ä»»åŠ¡æ˜¯å¯è¢«é‡æ–°å”¤èµ·çš„ï¼Œè¿™ä¸ª NSError å¯¹è±¡çš„ userInfo å­—å…¸ä¸­ä¼šåŒ…å« key ä¸ºNSURLSessionDownloadTaskResumeDataçš„å€¼ã€‚ä½ è¦å°†è¿™ä¸ªå€¼ä¼ ç»™downloadTaskWithResumeData:æˆ–æ˜¯ downloadTaskWithResumeData:completionHandler: æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸‹è½½ä»»åŠ¡ä»¥ç»§ç»­è¿™ä¸ªå·²ç»å­˜åœ¨çš„ä¸‹è½½ä»»åŠ¡ã€‚å¦‚æœè¿™ä¸ªä¸‹è½½ä»»åŠ¡ä¸èƒ½è¢«é‡æ–°å”¤èµ·ï¼Œä½ çš„ app éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸‹è½½ä»»åŠ¡æ¥ä»å¤´å¼€å§‹ä¸‹è½½ã€‚ä¸ç®¡æ˜¯å“ªç§æƒ…å†µï¼Œå¦‚æœä¼ è¾“å› ä»»ä½•æœåŠ¡å™¨é”™è¯¯ä»¥å¤–çš„åŸå› è€Œå¤±è´¥ï¼Œè¿”å›åˆ°æ­¥éª¤3ï¼ˆåˆ›å»ºæˆ–å”¤èµ·ä»»åŠ¡å¯¹è±¡ï¼‰ã€‚ æ³¨æ„ï¼šNSURLSession ä¸ä¼šé€šè¿‡ error å‚æ•°è¿”å›ä»»ä½•çš„æœåŠ¡å™¨é”™è¯¯ã€‚é€šè¿‡ error å‚æ•°è¿”å›çš„é”™è¯¯åªä¼šæ˜¯æœåŠ¡å™¨ç«¯é”™è¯¯ï¼Œæ¯”å¦‚ä¸èƒ½è§£å†³ hostnameï¼Œä¸èƒ½è¿æ¥åˆ° hostã€‚error codes ä¿¡æ¯å¯åœ¨ URL Loading System Error Codes ä¸­æŸ¥è¯¢ã€‚æœåŠ¡å™¨ç«¯é”™è¯¯ä¼šé€šè¿‡ NSHTTPURLResponse å¯¹è±¡ä¸­çš„HTTP çŠ¶æ€ç æ¥è¿”å›ï¼Œäº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯» NSHTTPURLREsponseå’Œ NSURLResponseçš„æ–‡æ¡£ã€‚ 14 . å¦‚æœä½ ä¸éœ€è¦ç”¨åˆ° session äº†ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ invalidateAndCancelï¼ˆç”¨æ¥å–æ¶ˆæœªå®Œæˆçš„ä»»åŠ¡ï¼‰æˆ–æ˜¯ finishTasksAndInvalidate(åœ¨è¿™ä¸ªå¯¹è±¡å¤±æ•ˆå‰å®Œæˆæœªå®Œæˆçš„ä»»åŠ¡)ã€‚å¦‚æœä½ ä¸ä½¿è¿™ä¸ªsessionå¤±æ•ˆï¼Œå®ƒä¼šåœ¨ä½ çš„appç»ˆæ­¢æ—¶è‡ªåŠ¨æ¶ˆå¤±ï¼ˆé™¤éå®ƒæ˜¯ä¸€ä¸ªå«æœ‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡çš„åå° sessionï¼‰ session å¤±æ•ˆåï¼Œå½“æ‰€æœ‰æœªå®Œæˆçš„ä»»åŠ¡è¢«å–æ¶ˆæˆ–æ˜¯å®Œæˆæ—¶ï¼Œsessionä¼šè°ƒç”¨ urlSession:didBecomeInvalidWithError: æ–¹æ³•ã€‚å½“ä»£ç†æ–¹æ³•è¿”å›æ—¶ï¼Œsession ä¼šå¤„ç½®å¯¹ä»£ç†çš„å¼ºå¼•ç”¨ã€‚ å¦‚æœä½ çš„app å–æ¶ˆäº†ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„ä¸‹è½½ä»»åŠ¡ï¼Œ å½“å‡ºç°é”™è¯¯æ—¶ï¼ŒNSURLSession å¯¹è±¡ä¼šè°ƒç”¨ä»£ç†çš„ URLSession:task:didCompleteWithError: æ–¹æ³•ã€‚ Background Transfer Considerationsåå°å¤„ç†æ³¨æ„äº‹é¡¹å› ä¸ºé‡å¯appï¼ˆæˆ–æ˜¯ç­‰å¾…ç”¨æˆ·é‡æ–°å”¤èµ·æ—¶ï¼‰ä»£ä»·æ˜¯ç›¸å½“é«˜çš„ï¼Œåœ¨åå°sessionä¸­æœ‰äº›ç‰¹æ€§æ˜¯ä¸å¯ç”¨çš„ã€‚å¦‚ä¸‹ï¼š session å¿…é¡»æä¾›ä¸€ä¸ªä¼ é€’äº‹ä»¶çš„ä»£ç†ï¼Œå› ä¸ºåœ¨ä¼ è¾“è¿›è¡Œä¸­appå¯èƒ½ä¼šé€€å‡ºæˆ–æ˜¯é‡å¯ï¼Œå®Œæˆäº‹ä»¶çš„å›è°ƒ Block æ˜¯ä¸æ”¯æŒçš„ã€ï¼ˆä¸ºäº†ä¸Šä¼ å’Œä¸‹è½½ï¼‰ï¼Œè¿™äº›ä»£ç†åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¡¨ç°æ˜¯ç›¸åŒçš„ï¼› åªæœ‰ HTTP å’Œ HTTPS åè®®æ˜¯è¢«æ”¯æŒçš„ã€‚å…¶ä»–å†…ç½®çš„ç½‘ç»œåè®®å’Œç”¨æˆ·ç½‘ç»œåè®®éƒ½ä¸è¢«æ”¯æŒï¼› åªæœ‰ä¸Šä¼ å’Œä¸‹è½½æ˜¯è¢«æ”¯æŒçš„ï¼ˆæ²¡æœ‰ data ä»»åŠ¡ï¼‰ï¼›é‡å®šå‘ä¸€ç›´è¢«å…è®¸ï¼›å…¨ç³»ç»ŸåŒæ—¶è¿›è¡Œçš„åå°ä¼ è¾“çš„æ•°é‡æ˜¯è¢«é™åˆ¶çš„ï¼› å¦‚æœåå°ä»»åŠ¡æœªèƒ½æ»¡è¶³æŒ‡å®šç³»ç»Ÿååé‡é™åˆ¶ï¼Œå¯èƒ½ä¼šè¢«å–æ¶ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ä»»åŠ¡åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰å‘é€æˆ–è€…æ¥å—è¶³å¤Ÿçš„æ•°æ®ï¼Œå®ƒå¯èƒ½ä¼šè¢«å–æ¶ˆï¼Œä»¥åå†è¢«å”¤èµ·ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œè®©ä¸€ä¸ªä¼ è¾“å¯è¢«é‡æ–°å”¤èµ·æ˜¯å¾ˆé‡è¦çš„ã€‚ å¦‚æœåå°ä¼ è¾“åˆå§‹åŒ–æ—¶appæ˜¯åœ¨åå°ï¼Œé‚£è¿™ä¸ªä»»åŠ¡å°†è¢«å½“åšå¯è£å‰ªçš„ã€‚æ¢è¨€ä¹‹ï¼Œå®ƒå°†è¢«å½“åš é…ç½®å¯¹è±¡çš„ discretionary å±æ€§ä¸º true çš„sessionä¸­çš„ä¸€ä¸ªä»»åŠ¡ã€‚ å¦‚æœè¿™äº›é™åˆ¶å’Œä½  app çš„éœ€æ±‚æœ‰å†²çªï¼Œä½ å¯ä»¥åœ¨ non-background session ä¸­å°†è¿œç¨‹èµ„æºä¸‹è½½åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™æ ·ï¼Œå½“ä½ çš„ç”¨æˆ·è®©ä½ çš„ iOS app è¿›å…¥åå°æˆ–æ˜¯é€€å‡ºä½ çš„ OS X app æ—¶ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ cacelByProducingResumeData: æ–¹æ³•æ¥æš‚åœä»»ä½•è¿›è¡Œä¸­çš„ä¸‹è½½ä»»åŠ¡ã€‚å½“ç”¨æˆ·é‡æ–°è®© app è¿›å…¥å‰å°æ—¶æ¢å¤ä¸‹è½½ã€‚å¦‚æœä½ çš„ app åœ¨ä½ è·å–åˆ°ä»»ä½•æ¢å¤çš„æ•°æ®ä¹‹å‰ç»ˆæ­¢äº†ï¼Œå°±ä¸èƒ½å†æ¢å¤ä¸‹è½½äº†ã€‚ æ³¨æ„ï¼šåå° session æ˜¯ä¸ºäº†ä¼˜åŒ–ä¼ è¾“å°‘é‡å¾ˆå¤§çš„èµ„æºï¼Œåœ¨å¿…è¦æ—¶å¯ä»¥è¿›è¡Œç»­ä¼ ã€‚å¦‚æœå¯ä»¥ï¼Œä½ å¯èƒ½æƒ³è¦è°ƒæŸ¥ä¼˜åŒ–æœåŠ¡å™¨ç«¯è¡Œä¸ºçš„æ–¹æ³• ï¼Œæ¥å®ç°è¿™æ ·çš„ç”¨æ³•ï¼Œæ¯”å¦‚ï¼š åœ¨ç»ˆç»“ç‚¹å‘èµ·å‘é€æˆ–æ¥æ”¶ zip æˆ– taræ ¼å¼çš„å‹ç¼©æ–‡ä»¶çš„è¯·æ±‚ï¼Œè€Œä¸æ˜¯åˆ†å¼€è°ƒç”¨å¤šæ¬¡ï¼› åœ¨ç»ˆç»“ç‚¹å‘èµ·å‘é€æˆ–æ¥æ”¶åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„å¢é‡å·®å¼‚çš„è¯·æ±‚ï¼› åœ¨ç»ˆç»“ç‚¹å‘èµ·ä¸€ä¸ªå¯è¿”å›ä¸Šä¼ IDçš„è¯·æ±‚ï¼Œè¿™ä¸ªIDå¯ç”¨æ¥è¿½è¸ªå’Œæ¢å¤ä¼ è¾“åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼› æ·»åŠ ä¸€ä¸ªä¸­é—´çš„web æœåŠ¡å™¨ä»£ç†è¯·æ±‚åˆ°è§„èŒƒçš„webæœåŠ¡å™¨ï¼Œä»¥æ–¹ä¾¿ä»»ä½•ä¸Šè¿°ä¼˜åŒ–ã€‚ NSCopying Behaviorsession å’Œ task å¯¹è±¡éƒ½éµä» NSCopying åè®®ï¼Œå¦‚ä¸‹ï¼š å½“ä½ çš„app æ‹·è´ä¸€ä¸ªsession æˆ–æ˜¯ task å¯¹è±¡æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªåŒæ ·çš„å¯¹è±¡ï¼› å½“ä½ çš„appæ‹·è´ä¸€ä¸ªé…ç½®å¯¹è±¡æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªä½ å¯ä»¥ç‹¬ç«‹åœ°ä¿®æ”¹çš„æ‹·è´å¯¹è±¡ã€‚ Thread Safetyçº¿ç¨‹å®‰å…¨URL Session API è‡ªèº«å®Œå…¨æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­éšæ„åˆ›å»º session å’Œ taskï¼Œè€Œä¸”ï¼Œå½“ä½ çš„ä»£ç†æ–¹æ³•è°ƒç”¨æä¾›çš„ å®Œæˆå›è°ƒæ—¶ï¼Œå®ƒçš„å·¥ä½œå·²è‡ªåŠ¨è¢«å®‰æ’åœ¨æ­£ç¡®çš„ä»£ç†é˜Ÿåˆ—ä¸­ã€‚ æœ¬æ–‡ä¸ºã€Œç®€ä¹¦-ç™½å¼€æ°´lnã€ä½œè€…åŸåˆ›ï¼›æˆ‘çš„å†™ä½œï¼Œå¸Œæœ›èƒ½ç®€åŒ–åˆ°åˆå­¦è€…å°½å¿«å…¥é—¨å’Œè€å¸æœºç¹çå›é¡¾ ^_^.åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ã€‚ è­¦å‘Šï¼šä½ çš„ URLSessionDidFinishEventsForBackgroundURLSession: ä»£ç†æ–¹æ³•å¯èƒ½ä¼šåœ¨ç¬¬äºŒçº¿ç¨‹ä¸­è¢«è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œåœ¨iOSä¸­ï¼Œä½ å®Œæˆé‚£ä¸ªæ–¹æ³•æ—¶éœ€è¦åœ¨application:handleEventsForBackgroundURLSession:CompletionHandler: app ä»£ç†æ–¹æ³•ä¸­è°ƒç”¨completion handlerã€‚è€Œä¸”ä½ å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨é‚£ä¸ª completion handlerã€‚ NSURLSession æœ‰å¤ªå¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ æ¨æ•²ï¼Œæ–¹æ–¹é¢é¢éƒ½é€éœ²ç€å­¦ä¹ çš„å¿…è¦æ€§ï¼Œå­¦ä¹ æ€»ç»“ï¼Œä¸€åŠ³æ°¸é€¸ï¼Œå¯¹æˆ‘ä»¬æ—¥åå¼€å‘ä¸€å®šä¼šå—ç›Šè‰¯å¤šã€‚ä½œä¸ºä¸€æšæˆé•¿ä¸­çš„èœé¸Ÿï¼Œåˆ†äº«å’Œå¼€æºç²¾ç¥ï¼Œè¿˜æ˜¯å€¼å¾—å…·å¤‡çš„ã€‚ ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èµèµç¯‡]]></title>
    <url>%2FPerceptionWork%2Fappreciates.html</url>
    <content type="text"><![CDATA[å¯¹ä½ æœ‰æ–°æ€æƒ³ æˆ–æ˜¯ ä¹ æƒ¯ï¼Œä½ å¯éšæ„èµèµ ï¼ å¯¹æˆ‘æ‰€èŠ±è´¹æ—¶é—´çš„ä¸€ä¸ªèµåŠ© ï¼ä¾¿æ·ä½ æˆ‘çš„é«˜æ•ˆå­¦ä¹  ï¼ &nbsp;About contact E-mailï¼špbwaterln@sina.com ã€Œè¯·æ³¨æ˜æ¥æ„ã€éè¯šåˆ‡å‹¿æ‰“æ‰°ã€èŸ¹èŸ¹ã€WeChat-publicï¼šã€ŒğŸ”ç™½å¼€æ°´lnï¼Œæ¯å‘¨æœ«åˆ†äº«ä¼ç ç»éªŒå’Œå¯å¸æ”¶æ€æƒ³çš„æ–‡ç« ï¼Œæ–‡ç« é¦–å‘ Blogï¼Œå–œæ¬¢å¯ ç•™è¨€ | Rssã€]]></content>
      <categories>
        <category>èŒåœº</category>
      </categories>
      <tags>
        <tag>èµèµ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoæ–‡ç« ç®€å•åŠ å¯†è®¿é—®]]></title>
    <url>%2FHexoBlog%2FHexoArticleEncryption.html</url>
    <content type="text"><![CDATA[Welcome]]></content>
      <categories>
        <category>HexoBlog</category>
      </categories>
      <tags>
        <tag>HexoBlog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo(Pages)â€”ä¼˜åŒ–åšå®¢ã€Œç»­æ›´ã€]]></title>
    <url>%2FHexoBlog%2FHexoPagesOptimize.html</url>
    <content type="text"><![CDATA[ç»™è‡ªå·±ä¸€ä¸ªè®°å½• çŸ¥è¯† å’Œ æ—¶é—´ çš„ç©ºé—´ã€‚ æ‹¥æœ‰ä¸€ä¸ªè¿™æ ·çš„ç‹¬ç«‹è€Œè‡ªç”±çš„ç©ºé—´æ˜¯ä¸€ä»¶éå¸¸æœ‰è¶£çš„äº‹æƒ…ã€‚ æœ¬ç¯‡æ•´ç†æ¥è‡ªç½‘ç»œæ–‡ç« ï¼Œæ˜¯è‡ªå·±æ­å»ºä¼˜åŒ–é‡åˆ°ä½¿ç”¨æˆ–æ‘˜å½•åšæ–‡å¸¸ç”¨å¥½ç”¨çš„å°åŠŸèƒ½ç‚¹ï¼Œå†æ¬¡æ•´ç†ä¸€ä¸‹ï¼Œæ–¹ä¾¿é¦–æ¬¡æ­å»ºå°‘èµ°äº›å‘ï¼Œæˆ‘ä¼šåŠæ—¶åŠ ä¸Šå‡ºå¤„ Content progress æ–‡å­—å±…ä¸­ï¼ˆå†™åšå®¢æ—¶ï¼‰åœ¨ä½ åšå®¢æ–‡ç« ä¸­éœ€è¦å±…ä¸­å¤„åŠ ä¸Šä¸‹é¢è¿™æ®µä»£ç å³å¯ï¼Œä¸­é—´çš„æ–‡å­—æ”¹æˆä½ æ‰€éœ€è¦çš„æ–‡å­—ã€‚123&lt;blockquote class="blockquote-center"&gt;ä¸å¿˜åˆå¿ƒï¼Œè¿™é‡Œå¯ä»¥å†™å¤šè¡Œæ–‡å­—&lt;/blockquote&gt; ä¸ºåšå®¢åŠ ä¸ŠGitHubä¸å¸¦å¦‚æœæ˜¯Nextä¸»é¢˜ï¼ˆå…¶ä»–ä¸»é¢˜ä¹Ÿå·®ä¸å¤šï¼‰ï¼Œæ·»åŠ GitHubä¸å¸¦ï¼šåœ¨themes\next\layout\_layout.swigä¸­åŠ å…¥ç›¸å…³ä»£ç ï¼Œè®°å¾—ä¿®æ”¹è‡ªå·±çš„é“¾æ¥ã€‚ ç›¸å…³ä»£ç ä½ å¯ä»¥åœ¨GitHubå®˜æ–¹ç½‘ç«™ GitHub Ribbons ä¸Šè¿›è¡Œé€‰æ‹©ã€‚ åŠ å…¥ä½œè€…ç‰ˆæƒä¿¡æ¯æˆ‘ä»¬å¯ä»¥ä¸ºåšå®¢æ–‡ç« åŠ å…¥ä½œè€…ç‰ˆæƒä¿¡æ¯ã€‚ä¾‹å¦‚æœ¬æ–‡åœ°å€ï¼šhttp://www......./ è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼ç­‰ç­‰ã€‚å¯¹Nextä¸»é¢˜è€Œè¨€ï¼Œå…ˆæ‰¾åˆ°/themes/next/layout/_macro/post.swigï¼Œå†æ‰¾åˆ°å…¶ä¸­çš„å¾®ä¿¡è®¢é˜…éƒ¨åˆ†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'wechat-subscriber.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt; ç„¶åç›´æ¥åœ¨å…¶ä¸Šé¢æ·»åŠ å¦‚ä¸‹ä»£ç æ®µï¼š 123456789&lt;div align="center"&gt; &#123;% if not is_index %&#125; &lt;div class="copyright"&gt; &lt;p&gt;&lt;span&gt; &lt;b&gt;æœ¬æ–‡åœ°å€ï¼š&lt;/b&gt;&lt;a href="&#123;&#123; url_for(page.path) &#125;&#125;" title="&#123;&#123; page.title &#125;&#125;"&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;&lt;br /&gt;&lt;b&gt;è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢ï¼&lt;/b&gt; &lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt; å½“ç„¶ï¼Œåœ¨ä¸Šé¢è¿™æ®µä»£ç ï¼Œä½ å¯ä»¥è¿›è¡Œä¸€äº›ä¸ªæ€§åŒ–ç¼–å†™ï¼Œå¯ä»¥å±•ç¤ºä½ è‡ªå·±ä¸ªæ€§åŒ–çš„ç‰ˆæƒä¿¡æ¯ã€‚ ä¸ºåšå®¢åŠ å…¥åŠ¨æ€èƒŒæ™¯é¦–å…ˆæ‰¾åˆ°\themes\next\layout\_layout.swigï¼Œåœ¨æœ«å°¾å‰åŠ ä¸Šä¸‹é¢ä¸€å¥:ï¼ˆè¿™é‡Œæä¾›ä¸¤ç§æ ·å¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªç”±æ›´æ”¹ï¼‰ã€‚ é»˜è®¤ç°è‰²çº¿æ¡ 1&lt;script type="text/javascript" src="/js/src/particle.js"&gt;&lt;/script&gt; æµ…è“è‰²çº¿æ¡ 1&lt;script type="text/javascript" src="/js/src/particle.js" count="50" zindex="-2" opacity="1" color="0,104,183"&gt;&lt;/script&gt; ç„¶ååœ¨themes\source\js\src\ä¸‹æ–°å»ºæ–‡ä»¶particle.jså†™ä¸Šä»¥ä¸‹ä»£ç :1!function()&#123;function n(n,e,t)&#123;return n.getAttribute(e)||t&#125;function e(n)&#123;return document.getElementsByTagName(n)&#125;function t()&#123;var t=e("script"),o=t.length,i=t[o-1];return&#123;l:o,z:n(i,"zIndex",-1),o:n(i,"opacity",.5),c:n(i,"color","0,0,0"),n:n(i,"count",99)&#125;&#125;function o()&#123;c=u.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=u.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight&#125;function i()&#123;l.clearRect(0,0,c,a);var n,e,t,o,u,d,x=[w].concat(y);y.forEach(function(i)&#123;for(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x&gt;c||i.x&lt;0?-1:1,i.ya*=i.y&gt;a||i.y&lt;0?-1:1,l.fillRect(i.x-.5,i.y-.5,1,1),e=0;e&lt;x.length;e++)n=x[e],i!==n&amp;&amp;null!==n.x&amp;&amp;null!==n.y&amp;&amp;(o=i.x-n.x,u=i.y-n.y,d=o*o+u*u,d&lt;n.max&amp;&amp;(n===w&amp;&amp;d&gt;=n.max/2&amp;&amp;(i.x-=.03*o,i.y-=.03*u),t=(n.max-d)/n.max,l.beginPath(),l.lineWidth=t/2,l.strokeStyle="rgba("+m.c+","+(t+.2)+")",l.moveTo(i.x,i.y),l.lineTo(n.x,n.y),l.stroke()));x.splice(x.indexOf(i),1)&#125;),r(i)&#125;var c,a,u=document.createElement("canvas"),m=t(),d="c_n"+m.l,l=u.getContext("2d"),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n)&#123;window.setTimeout(n,1e3/45)&#125;,x=Math.random,w=&#123;x:null,y:null,max:2e4&#125;;u.id=d,u.style.cssText="position:fixed;top:0;left:0;z-index:"+m.z+";opacity:"+m.o,e("body")[0].appendChild(u),o(),window.onresize=o,window.onmousemove=function(n)&#123;n=n||window.event,w.x=n.clientX,w.y=n.clientY&#125;,window.onmouseout=function()&#123;w.x=null,w.y=null&#125;;for(var y=[],s=0;m.n&gt;s;s++)&#123;var f=x()*c,h=x()*a,g=2*x()-1,p=2*x()-1;y.push(&#123;x:f,y:h,xa:g,ya:p,max:6e3&#125;)&#125;setTimeout(function()&#123;i()&#125;,100)&#125;(); ä¸ºåšå®¢åŠ å…¥é¼ æ ‡ç‚¹å‡»æ˜¾ç¤ºçº¢å¿ƒé¼ æ ‡ç‚¹å‡»å°çº¢å¿ƒåœ¨\themes\next\source\js\srcæ–‡ä»¶ç›®å½•ä¸‹æ·»åŠ love.jsæ–‡ä»¶ã€‚å†…å®¹ä¸ºï¼š1!function(e,t,a)&#123;function n()&#123;c(".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)&#125;function o()&#123;var t="function"==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement("div");a.className="heart",d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement("style");a.type="text/css";try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName("head")[0].appendChild(a)&#125;function s()&#123;return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document); æ‰¾åˆ°\themes\next\layout\_layout.swingæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶çš„åé¢ï¼Œ&lt;/body&gt;ä¹‹å‰ æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š12&lt;!-- å°çº¢å¿ƒ --&gt;&lt;script type="text/javascript" src="/js/src/love.js"&gt;&lt;/script&gt; ç»™åšå®¢æ·»åŠ LICENSEåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢è¿™æ®µä»£ç ï¼ˆæ·»åŠ ä¹‹å‰å¥½å¥½çœ‹çœ‹ä½ çš„ä¸»é¢˜é…ç½®æ–‡ä»¶æ˜¯å¦å·²ç»åŒ…å«è¿™æ®µä»£ç ï¼Œå·²ç»åŒ…å«å°±ä¸ç”¨å†åŠ ä¸€éäº†ï¼Œå› ä¸ºé‡å¤ä¼šæŠ¥é”™ï¼‰ï¼Œè¿™ä¸ªLICENSEæ˜¾ç¤ºåœ¨ä¾§è¾¹æ ã€‚12345# Creative Commons 4.0 International License.# http://creativecommons.org/# Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zerocreative_commons: by-nc-sa#creative_commons: æ·»åŠ Local SearchåŠŸèƒ½å®‰è£… hexoæ’ä»¶åœ¨ä½ çš„ç«™ç‚¹æ–‡ä»¶å¤¹ä¸­ï¼Œç”¨shellç­‰è¿è¡Œä¸‹é¢è¿™è¡Œä»£ç ï¼š1$ npm install hexo-generator-searchdb --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š12345search: path: search.xml field: post format: html limit: 10000 å¯ç”¨æœ¬åœ°æœç´¢ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶å¯ç”¨æœ¬åœ°æœç´¢123# Local searchlocal_search: enable: true ä¿®æ”¹å­—ä½“å¤§å°æ‰“å¼€\themes\next\source\css\ _variables\base.stylæ–‡ä»¶ï¼Œå°†$font-size-baseæ”¹æˆ16pxï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1$font-size-base = 16px ä¿®æ”¹ç½‘é¡µé…è‰²å–è‰²å¯ä»¥ç”¨QQï¼Œæ‰“å¼€QQæŒ‰Ctrl+Alt+Aå¼€å§‹æˆªå›¾ï¼Œå°†é¼ æ ‡ç§»åˆ°æ–‡å­—ä¸Šï¼ŒæŒ‰ä½Ctrlé”®å³å¯çœ‹åˆ°è¯¥é¢œè‰²çš„16è¿›åˆ¶ä»£ç ã€‚ä¹Ÿå¯ä»¥ç”¨chromeæµè§ˆå™¨çš„develop toolå–è‰²ï¼Œé€‰å–å–œæ¬¢çš„é¢œè‰²ã€‚ ä¿®æ”¹\themes\next\source\css\ _variables\base.stylæ–‡ä»¶ï¼Œæ‰¾åˆ°æ–‡ä»¶å¼€å¤´çš„colors for use across themeï¼ŒåŠ å…¥è‡ªå®šä¹‰é¢œè‰²ï¼Œåœ¨$orange = #fc6423ä¸‹åŠ å…¥ä¸‹é¢è¿™æ®µä»£ç ï¼š123// ä¸‹é¢æ˜¯æˆ‘è‡ªå®šä¹‰çš„é¢œè‰²$my-link-blue = #0593d3 //é“¾æ¥é¢œè‰²$my-link-hover-blue = #0477ab //é¼ æ ‡æ‚¬åœåé¢œè‰² ä¿®æ”¹è¶…é“¾æ¥é¢œè‰²æ‰“å¼€\themes\next\source\css\ _variables\base.stylæ–‡ä»¶ï¼Œåƒä¸‹é¢è¿™æ ·æ”¹æ‰è¿™å‡ è¡Œï¼š12345/ Global link color.$link-color = $my-link-blue$link-hover-color = $my-link-hover-blue$link-decoration-color = $gray-lighter$link-decoration-hover-color = $my-link-hover-blue ä¿®æ”¹å°å‹ä»£ç å—é¢œè‰²æˆ‘ä¿®æ”¹&lt;code&gt;æ ·å¼æ˜¯å› ä¸ºæˆ‘å¼€å¯äº†highlightï¼Œhighlightåœ¨æ¸²æŸ“&lt;pre&gt;&lt;code&gt;æ ‡ç­¾çš„åŒæ—¶ä¹Ÿæ¸²æŸ“äº†&lt;code&gt;æ ‡ç­¾ï¼Œè€Œä¸”ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°æ–¹æ³•ä¸€ä¸­è¿™ç§ä¸å¼€å¯!importantï¼Œæ ·å¼å°±ä¸èµ·ä½œç”¨çš„é—®é¢˜ã€‚åœ¨æ–¹æ³•ä¸€ä½¿ç”¨äº†!importantä½¿å¾—æ­¤å¤„å¯¹&lt;code&gt;çš„æ ·å¼ä¼˜å…ˆçº§æœ€é«˜ï¼Œæ‰€ä»¥è®¾ç½®æˆåŠŸã€‚ æ–¹æ³•ä¸€æ‰“å¼€\themes\next\source\css\ _variables\base.stylæ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼šåœ¨ä¸‹é¢è¿™æ®µä»£ç ï¼š123456// Code &amp; Code Blocks// --------------------------------------------------$code-font-family = $font-family-monospace$code-font-size = 14px$code-font-size = unit(hexo-config('font.codes.size'), px) if hexo-config('font.codes.size') is a 'unit'$code-border-radius = 4px ä¸‹æ–¹åŠ å…¥ä¸‹é¢è¿™æ®µä»£ç :1234code &#123; color:#dd0055 !important; background:#eee !important;&#125; æ–¹æ³•äºŒä½ ä¹Ÿå¯ä»¥ä¸ç”¨æ–¹æ³•ä¸€ï¼ˆå»ºè®®ä½¿ç”¨æ–¹æ³•ä¸€ï¼Œå› ä¸ºç¬¬äºŒç§å¯èƒ½ä¼šå¤±æ•ˆï¼Œè¢«å…¶ä»–çš„æ ·å¼å®šä¹‰è¦†ç›–ï¼‰ï¼Œè€Œæ˜¯åœ¨source/css/_variables/custom.stylæ–‡ä»¶ä¸­è®¾å®š$code-foregroundå’Œ$code-backgroundçš„å€¼ï¼Œä¹Ÿæ˜¯ç”¨çš„ä¼˜å…ˆçº§ã€‚123$code-foreground = #fc6423$code-background = #fc6423#æ­¤å¤„é¢œè‰²åªæ˜¯ä¾‹å­ï¼Œä½ è‡ªå·±è®¾ç½®ã€‚ ä¿®æ”¹å…¶ä»–é¢œè‰²ä¿®æ”¹ï¼šthemes\next\source\css\_variables\.base.stylæ–‡ä»¶ï¼š123grey-dim = #666 &gt;&gt;&gt; $grey-dim = #353535$black-light = #555 &gt;&gt;&gt; $black-light = #353535$blue-bright = #87daff &gt;&gt;&gt; $blue-bright = #45c5ff åŠ å…¥ç»Ÿè®¡å’Œæé«˜ç´¢å¼•é‡æ·»åŠ sitemapæ’ä»¶ è°·æ­Œä¸ç™¾åº¦çš„ç«™ç‚¹åœ°å›¾ï¼Œå‰è€…é€‚ç”¨äºå…¶ä»–æœç´¢å¼•æ“ï¼Œç”¨æ¥æ‰‹åŠ¨æäº¤ä»¥å¢åŠ æ”¶å½•ã€‚ sitemap å®‰è£…åœ¨ä½ çš„ç«™ç‚¹æ–‡ä»¶å¤¹ä¸­ï¼Œç”¨shellç­‰åˆ†æ¬¡è¿è¡Œä¸‹é¢è¿™ä¸¤è¡Œä»£ç ï¼š12npm install hexo-generator-sitemap@1 --savenpm install hexo-generator-baidu-sitemap@0.1.1 --save è®¾ç½®ç«™ç‚¹é…ç½®æ–‡ä»¶åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»£ç ï¼š12345# hexo sitemapç½‘ç«™åœ°å›¾sitemap: path: sitemap.xmlbaidusitemap: path: baidusitemap.xml é…ç½®æˆåŠŸåï¼Œhexoç¼–è¯‘æ—¶ä¼šåœ¨hexoç«™ç‚¹æ ¹ç›®å½•ç”Ÿæˆsitemap.xmlå’Œbaidusitemap.xmlã€‚å…¶ä¸­sitemap.xmlé€‚åˆæäº¤ç»™è°·æ­Œæœç´ å¼•æ“ï¼Œbaidusitemap.xmlé€‚åˆæäº¤ç™¾åº¦æœç´¢å¼•æ“ã€‚ å…¶æ¬¡ï¼Œåœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªrobots.txtæ–‡ä»¶ï¼Œå…¶ä¸­æ·»åŠ ä¸‹é¢çš„ä¸€æ®µä»£ç ï¼ˆå…·ä½“ç½‘ç«™æ”¹ä¸ºä½ è‡ªå·±çš„ç½‘å€ï¼‰ï¼š 123456789101112# hexo robots.txtUser-agent: *Allow: /Allow: /archives/Disallow: /vendors/Disallow: /js/Disallow: /css/Disallow: /fonts/Disallow: /vendors/Disallow: /fancybox/Sitemap: http://dingxuewen.github.io/sitemap.xmlSitemap: https://dingxuewen.github.io/sitemap.xml ç»™éå‹æƒ…é“¾æ·»åŠ æ ‡ç­¾ç»è¿‡chinazç«™é•¿å·¥å…·å‹æƒ…é“¾æ¥æ£€æµ‹ï¼Œå‘ç°æœ‰ä¸å¿…è¦çš„PRå€¼è¾“å‡ºï¼Œå¯¹äºéå‹æƒ…é“¾æ¥çš„PRå€¼è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šnofollowä¾¿ç­¾é¿å…ä¸å¿…è¦çš„PRè¾“å‡ºã€‚æ–¹æ³•æ˜¯ç»™é“¾æ¥åŠ ä¸Šrel=&quot;external nofollow&quot;å±æ€§ã€‚ä¾‹å¦‚ï¼š æ‰¾åˆ°\themes\next\layout\_partials\footer.swigæ–‡ä»¶ï¼Œå°†ä¸‹é¢ä»£ç ï¼š1&#123;&#123; __('footer.powered', '&lt;a class="theme-link" href="http://hexo.io"&gt;Hexo&lt;/a&gt;') &#125;&#125; æ”¹æˆï¼š1&#123;&#123; __('footer.powered', '&lt;a class="theme-link" href="http://hexo.io" rel="external nofollow"&gt;Hexo&lt;/a&gt;') &#125;&#125; å°†ä¸‹é¢ä»£ç ï¼š1&lt;a class="theme-link" href="https://github.com/iissnan/hexo-theme-next"&gt; æ”¹æˆï¼š1&lt;a class="theme-link" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow"&gt; åŠ å…¥Baiduç«™é•¿ç»Ÿè®¡å…ˆå‡†å¤‡ä¸€äº›ä»£ç ã€‚ç«™é•¿ç»Ÿè®¡ï¼Œæ³¨å†Œå¹¶è·å–ç»Ÿè®¡ä»£ç ï¼š12345 | &lt;script type="text/javascript"&gt; var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://"); document.write(xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' type='text/javascript'%3E%3C/script%3E"));&lt;/script&gt; ä¿®æ”¹åº•æ :æ‰¾åˆ°\themes\next\layout\_partials\footer.swigæ–‡ä»¶,åŠ å…¥ä¸Šé¢è¿™æ®µä»£ç ï¼Œå‡ºäºä¿æŠ¤éšç§çš„è€ƒè™‘ï¼Œæˆ‘ç¼–è¾‘æ‰äº†éƒ¨åˆ†å…³é”®ä»£ç ï¼Œç›´æ¥å¤åˆ¶ä¸Šé¢çš„æ— æ³•ä½¿ç”¨ã€‚æ³¨æ„æŠŠä¸Šé¢çš„xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxæ¢æˆä½ è‡ªå·±çš„ç«™é•¿ç»Ÿè®¡ä»£ç ã€‚ åœ¨é¡µè„šåŠ å…¥åœ°å›¾åœ¨é¡µè„šåŠ å…¥ç™¾åº¦åœ°å›¾å’Œè°·æ­Œåœ°å›¾é“¾æ¥ï¼š æ‰¾åˆ°\themes\next\layout\_partials\footer.swigæ–‡ä»¶ï¼Œç™¾åº¦å’ŒGoogleç½‘ç«™åœ°å›¾ï¼Œä¸Šé¢å·²ç»å®‰è£…äº†ï¼Œè¿™æ˜¯æ’å…¥åˆ°åº•æ çš„ä»£ç ï¼š12 | &lt;span&gt;&lt;a href="/sitemap.xml"&gt;Googleç½‘ç«™åœ°å›¾&lt;/a&gt;&lt;/span&gt; | &lt;span&gt;&lt;a href="/baidusitemap.xml"&gt;ç™¾åº¦ç½‘ç«™åœ°å›¾ æ·»åŠ Baiduè‡ªåŠ¨æ¨é€ç™¾åº¦è‡ªåŠ¨æ¨é€ä»£ç ï¼Œåœ¨é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé¡µé¢URLå°†ç«‹å³è¢«æ¨é€ç»™ç™¾åº¦ï¼Œå¯ä»¥å¢åŠ ç™¾åº¦æ”¶å½•ï¼šæ‰¾åˆ°\themes\next\layout\_partials\footer.swigæˆ–\themes\next\layout\_macro\post.swigæ–‡ä»¶ï¼Œï¼ˆNextä¸»é¢˜å·²ç»æœ‰äº†\themes\next\layout\_scripts\baidu-push.swigï¼‰æ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚1234567891011121314&lt;script&gt;(function()&#123; var bp = document.createElement('script'); var curProtocol = window.location.protocol.split(':')[0]; if (curProtocol === 'https')&#123; bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'; &#125; else&#123; bp.src = 'http://push.zhanzhang.baidu.com/push.js'; &#125; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(bp, s);&#125;)();&lt;/script&gt; ä¸è’œå­ç»Ÿè®¡æ‰¾åˆ°\themes\next\layout\_partials\footer.swigæ–‡ä»¶ï¼ŒåŠ å…¥ä¸‹é¢ä¸è’œå­ç»Ÿè®¡ä»£ç ï¼š12345 | æœ¬é¡µç‚¹å‡» &lt;span id="busuanzi_value_page_pv"&gt;&lt;/span&gt; æ¬¡ | æœ¬ç«™æ€»ç‚¹å‡» &lt;span id="busuanzi_value_site_pv"&gt;&lt;/span&gt; æ¬¡ | æ‚¨æ˜¯ç¬¬ &lt;span id="busuanzi_value_site_uv"&gt;&lt;/span&gt; ä½è®¿å®¢&lt;script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt; åœ¨æ ‡é¢˜ä¸‹æ·»åŠ ã€é˜…è¯»é‡ã€‘ç­‰ç°åœ¨è¦æ·»åŠ çš„é˜…è¯»é‡ç»Ÿè®¡ä¹Ÿä¾èµ–ä¸‹é¢è¿™æ®µä»£ç ã€‚12&lt;script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"&gt;&lt;/script&gt; æ‰“å¼€/themes/next/layout/_macro/post.swigï¼Œæ‰¾åˆ°æ ‡ç­¾&lt;div class=&quot;post-meta&quot;&gt;&lt;/div&gt;ï¼Œåœ¨è¯¥æ ‡ç­¾å†…éƒ¨åˆé€‚çš„ä½ç½®ï¼ˆå¦‚timeå’Œcategoriesä¹‹é—´æˆ–categoriesåé¢ï¼‰æ·»åŠ ï¼š123&#123;% if not is_index %&#125; &lt;span id="busuanzi_container_page_pv"&gt; | é˜…è¯»é‡ &lt;span id="busuanzi_value_page_pv"&gt;&lt;/span&gt; æ¬¡&lt;/span&gt;&#123;% endif %&#125; å°†é˜…è¯»é‡æ”¹ä¸ºçƒ­åº¦ï¼ˆæ›´ä¸ªæ€§ï¼‰è¿˜å¯ä»¥ç»§ç»­ä¿®æ”¹ï¼Œçœ‹åˆ°å¥½å¤šäººçš„åšå®¢ä¸æ˜¯é˜…è¯»æ¬¡æ•°ï¼ˆé˜…è¯»é‡ï¼‰ï¼Œè€Œæ˜¯çƒ­åº¦ 188 â„ƒï¼Œé‚£ä¹ˆå¯ä»¥ç»§ç»­è¿™æ ·ä¿®æ”¹ï¼Œé¦–å…ˆåœ¨Nextä¸»é¢˜çš„/themes/next/languages/zh-Hansæ–‡ä»¶ä¸­æŸ¥æ‰¾â€é˜…è¯»æ¬¡æ•°â€œè¿™å‡ ä¸ªå­—ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨postä¸­çš„visitorsè¢«å®šä¹‰ä¸ºâ€œé˜…è¯»æ¬¡æ•°â€ï¼ŒæŠŠè¿™é‡Œçš„â€œé˜…è¯»æ¬¡æ•°â€æ”¹ä¸ºâ€œçƒ­åº¦â€ã€‚ é‚£ä¹ˆæ€ä¹ˆåœ¨é¡µé¢ä¸­æ˜¾ç¤ºå‘¢ã€‚æ‰“å¼€Nextä¸»é¢˜æ–‡ä»¶å¤¹ä¸­layout/_macro/post.swigï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶é‡ŒåŠ ä¸Šæ‘„æ°åº¦çš„æ ‡å¿—ï¼Œåœ¨&lt;span class=&quot;leancloud-visitors-count&quot;&gt;&lt;/span&gt;ä¸‹é¢å¢åŠ ä¸€è¡Œ&lt;span&gt;â„ƒ&lt;/span&gt;å³å¯ã€‚ ä¿®æ”¹æ ‡é¢˜ä¸‹åˆ†ç±»ç­‰çš„æ ·å¼åœ¨Nextä¸»é¢˜ä¸­ï¼Œæˆ‘ç”¨çš„æ˜¯LeanCloudæ•°æ®ç»Ÿè®¡ï¼Œé»˜è®¤æ ·å¼æ˜¯åœ¨ç»Ÿè®¡æ•°æ®å‰æœ‰ä¸ªå°çœ¼ç›ï¼Œæˆ‘æ„Ÿè§‰ä¸å¥½çœ‹ï¼Œæƒ³æŠŠå®ƒå»æ‰ï¼Œé‚£ä¹ˆæ‰“å¼€/themes/next/layout/_macro/post.swigï¼Œæ‰¾åˆ°æ ‡ç­¾&lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt;ï¼Œå»æ‰ä¸‹é¢è¿™æ®µä»£ç å³å¯ï¼š123&lt;span class="post-meta-item-icon"&gt; &lt;i class="fa fa-eye"&gt;&lt;/i&gt;&lt;/span&gt; SEOä¼˜åŒ–æ›´æ”¹é¦–é¡µæ ‡é¢˜æ ¼å¼ä¸ºã€Œå…³é”®è¯-ç½‘ç«™åç§°-ç½‘ç«™æè¿°ã€ã€‚æ‰“å¼€\themes\next\layout\index.swigæ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™è¡Œä»£ç ï¼š1&#123;% block title %&#125; &#123;&#123; config.title &#125;&#125; &#123;% endblock %&#125; æŠŠå®ƒæ”¹æˆï¼š123&#123;% block title %&#125; &#123;&#123; theme.keywords &#125;&#125; - &#123;&#123; config.title &#125;&#125; - &#123;&#123; theme.description &#125;&#125;&#123;% endblock %&#125; åšå®¢éƒ¨ç½²çš„messageè®¾ç½®åœ¨\hexo\node_modules\hexo-deployer-git\lib\deployer.jsæ–‡ä»¶æœ«å°¾æ‰¾åˆ°è¿™ä¸€å¥ï¼š1Site updated: &#123;&#123; now('YYYY-MM-DD HH:mm:ss') &#125;&#125;. æ”¹å¾—ä¸ªæ€§åŒ–ä¸€ç‚¹ï¼š1å‹¤å¥‹çš„åšä¸»åˆæ›´æ–°å•¦: &#123;&#123; now(\'YYYY-MM-DD HH:mm:ss\') &#125;&#125;. ä¸ºé¡¹ç›®ä¸»é¡µæ·»åŠ READMEåœ¨ Github ä¸Šçš„åšå®¢ä»“åº“ä¸»é¡µç©ºè¡è¡çš„ï¼Œæ²¡æœ‰READMEã€‚å¦‚æœæŠŠREADME.mdæ”¾å…¥sourceæ–‡ä»¶å¤¹ï¼Œhexo gç”Ÿæˆæ—¶ä¼šè¢«è§£ææˆhtmlæ–‡ä»¶ï¼Œæ”¾åˆ°publicæ–‡ä»¶å¤¹ï¼Œç”Ÿæˆæ—¶åˆä¼šè‡ªåŠ¨åˆ é™¤ã€‚ è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­ï¼Œæœç´¢skip_render:ï¼Œåœ¨å…¶å†’å·ååŠ ä¸€ä¸ªç©ºæ ¼ç„¶ååŠ ä¸ŠREADME.mdå³å¯ã€‚ ä¼˜åŒ–ä¸»é¢˜ sidebar å¤´åƒå°±æ˜¯ä¸ºä¸»é¢˜ sidebar å¤´åƒæ·»åŠ åœ†å½¢åŒ–æ—‹è½¬çš„æ•ˆæœã€‚ä¿®æ”¹ /themes/next/source/css/_common/components/sidebar/sidebar-author.styl æ–‡ä»¶ï¼Œæˆ‘çš„æ•´ä¸ª sidebar-author.stylæ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥å¤åˆ¶è¿™æ®µä»£ç å»æ›¿æ¢ä½ è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ‰€æœ‰ä»£ç ã€‚æœ‰ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼Œå°±æ˜¯ä½ è¦ä¿è¯ä½ çš„å¤´åƒï¼Œä¹Ÿå°±æ˜¯ avatar.jpg è¿™ä¸ªå›¾ç‰‡æ˜¯æ­£æ–¹å½¢ï¼Œä¸æ˜¯çš„è¯ä½ è¦å°†å…¶ä¿®æ”¹æˆæ­£æ–¹å½¢ï¼Œè¿™æ ·æ‰èƒ½é€šè¿‡æ ·å¼å°†å…¶å±•ç°ä¸ºå¾ˆå¥½çœ‹çš„æ­£åœ†ï¼Œå¦åˆ™ä¼šæ˜¯ä¸€ä¸ªæ¤­åœ†å½¢ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; /* å¤´åƒåœ†å½¢ */ border-radius: 80px; -webkit-border-radius: 80px; -moz-border-radius: 80px; box-shadow: inset 0 -1px 0 #333sf; /* è®¾ç½®å¾ªç¯åŠ¨ç”» [animation: (play)åŠ¨ç”»åç§° (2s)åŠ¨ç”»æ’­æ”¾æ—¶é•¿å•ä½ç§’æˆ–å¾®ç§’ (ase-out)åŠ¨ç”»æ’­æ”¾çš„é€Ÿåº¦æ›²çº¿ä¸ºä»¥ä½é€Ÿç»“æŸ (1s)ç­‰å¾…1ç§’ç„¶åå¼€å§‹åŠ¨ç”» (1)åŠ¨ç”»æ’­æ”¾æ¬¡æ•°(infiniteä¸ºå¾ªç¯æ’­æ”¾) ]*/ -webkit-animation: play 2s ease-out 1s 1; -moz-animation: play 2s ease-out 1s 1; animation: play 2s ease-out 1s 1; /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transition: -webkit-transform 1.5s ease-out; -moz-transition: -moz-transform 1.5s ease-out; transition: transform 1.5s ease-out;&#125;img:hover &#123; /* é¼ æ ‡ç»è¿‡åœæ­¢å¤´åƒæ—‹è½¬ -webkit-animation-play-state:paused; animation-play-state:paused;*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transform: rotateZ(360deg); -moz-transform: rotateZ(360deg); transform: rotateZ(360deg);&#125;/* Z è½´æ—‹è½¬åŠ¨ç”» */@-webkit-keyframes play &#123; 0% &#123; -webkit-transform: rotateZ(0deg); &#125; 100% &#123; -webkit-transform: rotateZ(-360deg); &#125;&#125;@-moz-keyframes play &#123; 0% &#123; -moz-transform: rotateZ(0deg); &#125; 100% &#123; -moz-transform: rotateZ(-360deg); &#125;&#125;@keyframes play &#123; 0% &#123; transform: rotateZ(0deg); &#125; 100% &#123; transform: rotateZ(-360deg); &#125;&#125;.site-author-name &#123; margin: $site-author-name-margin; text-align: $site-author-name-align; color: $site-author-name-color; font-weight: $site-author-name-weight;&#125;.site-description &#123; margin-top: $site-description-margin-top; text-align: $site-description-align; font-size: $site-description-font-size; color: $site-description-color;&#125; å°çº¢å¿ƒä¼˜åŒ–ä¸ºåšå®¢åŠ å…¥é¼ æ ‡ç‚¹å‡»æ˜¾ç¤ºå°çº¢å¿ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åªæƒ³åœ¨åšå®¢çš„æŸä¸ªé¡µé¢æ·»åŠ è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿé‚£ä¹ˆå°±å¯ä»¥åœ¨ \themes\next\source\js\src æ–‡ä»¶ç›®å½•ä¸‹æ·»åŠ  love.js æ–‡ä»¶ã€‚å†…å®¹ä¸ºï¼š1!function(e,t,a)&#123;function n()&#123;c(".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"),o(),r()&#125;function r()&#123;for(var e=0;e&lt;d.length;e++)d[e].alpha&lt;=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)&#125;function o()&#123;var t="function"==typeof e.onclick&amp;&amp;e.onclick;e.onclick=function(e)&#123;t&amp;&amp;t(),i(e)&#125;&#125;function i(e)&#123;var a=t.createElement("div");a.className="heart",d.push(&#123;el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()&#125;),t.body.appendChild(a)&#125;function c(e)&#123;var a=t.createElement("style");a.type="text/css";try&#123;a.appendChild(t.createTextNode(e))&#125;catch(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName("head")[0].appendChild(a)&#125;function s()&#123;return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"&#125;var d=[];e.requestAnimationFrame=function()&#123;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e)&#123;setTimeout(e,1e3/60)&#125;&#125;(),n()&#125;(window,document); ä¹‹åå‘¢ï¼Œä¸åœ¨\themes\next\layout\_layout.swing æ–‡ä»¶ä¸­æ·»åŠ ä»£ç ï¼Œè€Œæ˜¯åœ¨ä½ æƒ³è¦æ˜¾ç¤ºçº¢å¿ƒçš„é¡µé¢çš„ Markdown æ–‡ä»¶ä¸­åŠ å…¥ä¸‹é¢è¿™æ®µä»£ç ,ä¾‹å¦‚æˆ‘å°±åœ¨æˆ‘çš„ç•™è¨€æ¿é¡µé¢çš„ Markdown æ–‡ä»¶ä¸­åŠ å…¥äº†ä¸‹é¢è¿™æ®µä»£ç ã€‚12&lt;!-- å°çº¢å¿ƒ --&gt;&lt;script type="text/javascript" src="/js/src/love.js"&gt;&lt;/script&gt; æ–‡ç« å†…æ–‡æœ¬æ ·å¼Markdown æ¯•ç«Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿å†™ä½œï¼Œåœ¨æ ·å¼ä¸Šè¿‡äºå•è°ƒã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±æ¥ç»™æ–‡ç« åŠ ä¸€äº›æ ·å¼ã€‚NexT ä½œè€…æä¾›äº†ä¸€ä¸ªä¾›ç”¨æˆ·è‡ªå·±å®šä¹‰æ ·å¼çš„æ–‡ä»¶ï¼š\themes\next\source\css\_custom\custom.stlyã€‚å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€è¦å†™ã€‚ä¸‹å‚è€ƒï¼š è®¾ç½®åŠ¨æ€titleåœ¨ \themes\next\source\js\src ç›®å½•ä¸‹æ–°å»º dytitle.js ã€‚æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234567891011121314151617&lt;!--å´©æºƒæ¬ºéª—--&gt;var OriginTitile = document.title; var titleTime; document.addEventListener('visibilitychange', function () &#123; if (document.hidden) &#123; $('[rel="icon"]').attr('href', "/img/TEP.ico"); document.title = ' é¡µé¢å´©æºƒå•¦ ~ | cwyamlï¼'; clearTimeout(titleTime); &#125; else &#123; $('[rel="icon"]').attr('href', "/favicon.ico"); document.title = ' å™«åˆå¥½äº†~ ' + OriginTitile; titleTime = setTimeout(function () &#123; document.title = OriginTitile; &#125;, 2000); &#125; &#125;); æ›´æ”¹ \themes\next\layout\_layout.swig ã€‚åœ¨ &lt;/body ä¹‹å‰æ·»åŠ ï¼š12&lt;!--å–èŒ--&gt;&lt;script type="text/javascript" src="/js/src/dytitle.js"&gt;&lt;/script&gt; æ·»åŠ å¬éŸ³ä¹ä»£ç è®¾ç½®åœ¨ \themes\next\layout\_macroç›®å½•ä¸‹æ–°å»º high.swig æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;a title="æ”¶è—åˆ°ä¹¦ç­¾ï¼Œå¶å°”Highä¸€ä¸‹^_^" rel="alternate" class="mw-harlem_shake_slow wobble shake" href='javascript:( /* * Copyright (C) 2015 Rocko (rocko.xyz) &lt;rocko.zxp@gmail.com&gt; * * Licensed under the Apache License, Version 2.0 (the "License"); * you may not use this file except in compliance with the License. * Unless required by applicable law or agreed to in writing, software * distributed under the License is distributed on an "AS IS" BASIS, * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. * See the License for the specific language governing permissions and * limitations under the License. */ function go() &#123; var songs = [ "http://m2.music.126.net/3uHnH7uQAeFwUfuvEB9lrg==/3265549619475054.mp3", "http://m2.music.126.net/NnHwR2HV-1OoKZ6R5LVy4Q==/18502581673300023.mp3", "http://m2.music.126.net/qv3RI4K7ABKJ0TyAdb3taw==/3250156397064860.mp3", "......" ]; function S() &#123; var e = document.getElementById("audio_element_id"); if(e != null)&#123; var index = parseInt(e.getAttribute("curSongIndex")); if(index &gt; songs.length - 2) &#123; index = 0; &#125; else &#123; index++; &#125; e.setAttribute("curSongIndex", index); &#125; e.src = i; e.play() &#125; function initAudioEle() &#123; var e = document.getElementById("audio_element_id"); if(e === null)&#123; e = document.createElement("audio"); e.setAttribute("curSongIndex", 0); e.id = "audio_element_id"; e.loop = false; e.bgcolor = 0; e.innerHTML = " &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;"; document.body.appendChild(e); e.addEventListener("ended", function() &#123; go(); &#125;, true); &#125; &#125; initAudioEle(); var curSongIndex = parseInt(document.getElementById("audio_element_id").getAttribute("curSongIndex")); var i = songs[curSongIndex]; S(); &#125;)()'&gt; &lt;i class="fa fa-music"&gt;&lt;/i&gt; å¬éŸ³ä¹&lt;/a&gt; åœ¨ä¾§è¾¹æ å¼•ç”¨è¯¥æ–‡ä»¶ï¼šä¿®æ”¹ \themes\next\layout\_macro\sidebar.swig ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š1&#123;% include 'high.swig' %&#125; æ ·å¼ä¿®æ”¹ï¼šä½¿ å¬éŸ³ä¹ å’Œ RSS å¹¶æ’å±•ç¤ºã€‚ä¿®æ”¹ \themes\next\source\css\_schemes\Pisces\_sidebar.stylæ–‡ä»¶ï¼š1display: inline-block; æ·»åŠ è‡ªå·±å–œæ¬¢çš„éŸ³ä¹ï¼šä¿®æ”¹å…¶ä¸­çš„æ­Œæ›²é“¾æ¥å³å¯.123456var songs = [ "http://m2.music.126.net/3uHnH7uQAeFwUfuvEB9lrg==/3265549619475054.mp3", "http://m2.music.126.net/NnHwR2HV-1OoKZ6R5LVy4Q==/18502581673300023.mp3", "http://m2.music.126.net/qv3RI4K7ABKJ0TyAdb3taw==/3250156397064860.mp3", "......" ]; é¦–é¡µå¬éŸ³ä¹æ‘‡æ™ƒï¼šéœ€è¦åŠ è½½ css æ ·å¼ã€‚åœ¨ themes\next\layout\_layout.swigæ–‡ä»¶çš„ &lt;/body&gt;æ ‡ç­¾å‰ æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š12&lt;!-- å¬éŸ³ä¹æ‘‡æ™ƒ --&gt;&lt;link href="http://s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css" rel="stylesheet" type="text/css"&gt; æ³¨æ„ï¼šæœ‰æ—¶å€™ä½¿ç”¨ Firefox ã€Chromeæ—¶ä¼šæç¤ºéæ³•æ’ä»¶å¹¶ç¦æ­¢ä½¿ç”¨ï¼Œé‡åˆ°è¿™ç§æƒ…å†µæˆ‘ä»¬æŠŠæ ·å¼ä»£ç å¼•å…¥åˆ° \themes\next\source\css\_custom\custom.stlyæ–‡ä»¶å³å¯è§£å†³ã€‚ éŸ³ä¹é“¾æ¥è·å– å…ˆè·å–æ­Œæ›²idï¼Œç›´æ¥æ‰“å¼€ ç½‘æ˜“äº‘éŸ³ä¹ç½‘é¡µç‰ˆ http://music.163.com æœç´¢è‡ªå·±å–œæ¬¢çš„éŸ³ä¹ï¼Œç‚¹å‡»å¤–é“¾ç”Ÿæˆå™¨è·å–æ­Œæ›²çš„ ID ã€‚ä¸¾ä¸ªä¾‹å­ï¼šï¼ˆidæ˜¾è€Œæ˜“è§å§ï¼‰ 1http://music.163.com/#/song?id=443205403 å°†ä¸‹é¢ç½‘å€ä¸­çš„ä¸¤å¤„idæ›¿æ¢æˆçš„æ­Œæ›² id ï¼Œä½ å°†ä¼šè·å¾—ä¸€å¤§ä¸²ä»£ç ï¼šå¤–é“¾å°±éšè—å…¶ä¸­ï¼ˆå¦‚ä¸‹å›¾ï¼Œè‡ªå·±æ‰¾ï¼‰ã€‚ http://music.163.com/api/song/detail/?id=425137664&amp;ids=[425137664]&amp;csrf_token= å°†ä¸Šä¸€æ­¥ä¸­è·å–åˆ°çš„ç½‘å€æ”¾åˆ°åœ°å€æ ä¸­ï¼Œè‹¥èƒ½æ­£å¸¸æ’­æ”¾éŸ³ä¹è¯´æ˜è·å–åˆ°çš„ç½‘å€æ˜¯æ­£ç¡®çš„ã€‚ç„¶åä½ å°±å¯ä»¥æŠŠè¿™äº›æ­Œæ›²æ·»åŠ åˆ°è‡ªå·±çš„ç½‘é¡µä¸­äº†ï¼ç”¨è¿™ç§æ–¹æ³•æœ‰äº›æ­Œæ›²å¹¶ä¸èƒ½è·å¾—ï¼Œä¸è¿‡æ—¶æ•ˆå¾ˆé•¿ï¼ˆåªè¦ç½‘æ˜“äº‘èƒ½å¬ï¼‰ã€‚ åšæ–‡å‹ç¼©ç›®å‰çŸ¥é“çš„æœ‰ä¸¤ä¸ªæ’ä»¶å¯ä»¥å‹ç¼©åšæ–‡ï¼Œhexo-all-minifier æ’ä»¶å’Œ gulp æ’ä»¶ã€‚hexo-all-minifier è™½ç„¶ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥å‹ç¼©å›¾ç‰‡ï¼Œä½†æ˜¯å¯¹æ–‡ç« ç¼©è¿›ï¼ˆè¾“å…¥æ³•å…¨æ‹¼æ¨¡å¼ä¸‹æŒ‰ Tabï¼‰ä¸æ”¯æŒï¼Œæ‰€ä»¥æš‚æ—¶ä½¿ç”¨ gulp å‹ç¼©æ‰‹æ®µã€‚ hexo-all-minifier ä½¿ç”¨æ–¹æ³•å®‰è£… hexo-all-minifierï¼Œåœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š1$ npm install hexo-all-minifier --save hexo g ç¼–è¯‘çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨å‹ç¼© HTMLã€JSã€å›¾ç‰‡ã€‚è¯¦æƒ…å‚è€ƒæ’ä»¶ä»‹ç» hexo-all-minifier glup ä½¿ç”¨æ–¹æ³•hexo ä¾èµ– gulp æ’ä»¶å®‰è£…ï¼Œåœ¨ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š12$ npm install gulp -g$ npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save åœ¨ package.json åŒçº§ç›®å½•ä¸‹ï¼Œæ–°å»º gulpfile.js å¹¶å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233var gulp = require('gulp');var minifycss = require('gulp-minify-css');var uglify = require('gulp-uglify');var htmlmin = require('gulp-htmlmin');var htmlclean = require('gulp-htmlclean');// å‹ç¼© public ç›®å½• cssgulp.task('minify-css', function() &#123; return gulp.src('./public/**/*.css') .pipe(minifycss()) .pipe(gulp.dest('./public'));&#125;);// å‹ç¼© public ç›®å½• htmlgulp.task('minify-html', function() &#123; return gulp.src('./public/**/*.html') .pipe(htmlclean()) .pipe(htmlmin(&#123; removeComments: true, minifyJS: true, minifyCSS: true, minifyURLs: true, &#125;)) .pipe(gulp.dest('./public'))&#125;);// å‹ç¼© public/js ç›®å½• jsgulp.task('minify-js', function() &#123; return gulp.src('./public/**/*.js') .pipe(uglify()) .pipe(gulp.dest('./public'));&#125;);// æ‰§è¡Œ gulp å‘½ä»¤æ—¶æ‰§è¡Œçš„ä»»åŠ¡gulp.task('default', [ 'minify-html','minify-css','minify-js']); ç”Ÿæˆåšæ–‡æ˜¯æ‰§è¡Œ hexo g &amp;&amp;amp; gulp å°±ä¼šæ ¹æ® gulpfile.js ä¸­çš„é…ç½®ï¼Œå¯¹ publicç›®å½•ä¸­çš„é™æ€èµ„æºæ–‡ä»¶è¿›è¡Œå‹ç¼©ã€‚ åšæ–‡ç½®é¡¶ä¿®æ”¹ hero-generator-index æ’ä»¶ æ›¿æ¢æ–‡ä»¶ï¼šnode_modules/hexo-generator-index/lib/generator.js å†…çš„ä»£ç ä¸ºï¼š12345678910111213141516171819202122232425262728'use strict';var pagination = require('hexo-pagination');module.exports = function(locals)&#123; var config = this.config; var posts = locals.posts; posts.data = posts.data.sort(function(a, b) &#123; if(a.top &amp;&amp; b.top) &#123; // ä¸¤ç¯‡æ–‡ç« topéƒ½æœ‰å®šä¹‰ if(a.top == b.top) return b.date - a.date; // è‹¥topå€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’ else return b.top - a.top; // å¦åˆ™æŒ‰ç…§topå€¼é™åºæ’ &#125; else if(a.top &amp;&amp; !b.top) &#123; // ä»¥ä¸‹æ˜¯åªæœ‰ä¸€ç¯‡æ–‡ç« topæœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰topçš„æ’åœ¨å‰é¢ï¼ˆè¿™é‡Œç”¨å¼‚æˆ–æ“ä½œå±…ç„¶ä¸è¡Œ233ï¼‰ return -1; &#125; else if(!a.top &amp;&amp; b.top) &#123; return 1; &#125; else return b.date - a.date; // éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’ &#125;); var paginationDir = config.pagination_dir || 'page'; return pagination('', posts, &#123; perPage: config.index_generator.per_page, layout: ['index', 'archive'], format: paginationDir + '/%d/', data: &#123; __index: true &#125; &#125;);&#125;; è®¾ç½®æ–‡ç« ç½®é¡¶åœ¨æ–‡ç«  Front-matter ä¸­æ·»åŠ  top å€¼ï¼Œæ•°å€¼è¶Šå¤§æ–‡ç« è¶Šé å‰ï¼Œå¦‚ï¼š1234567---title: å›¾é›†categories: [å›¾ç‰‡]tags: [picture]date: 2015-04-02 14:36:04top: 10--- embed.jsæœ¬åœ°åŒ–embed.js æ˜¯å¤šè¯´ä½¿ç”¨çš„è¿œç¨‹è„šæœ¬ï¼Œä½ å¯ä»¥è®¿é—® http://static.duoshuo.com/embed.js è¿™ä¸ªç½‘å€ã€‚å³é”®å¦å­˜ä¸º \theme\next\source\js\src\è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚ ç„¶åæ‰“å¼€ \themes\next\layout\_scripts\third-party\comments\duoshuo.swig è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶é‡Œæœç´¢ //static.duoshuo.com/embed.js ï¼ŒæŠŠå®ƒæ”¹æˆ /js/src/embed.jsã€‚æå®šå•¦ï¼ Hexoæ›´æ”¹é»˜è®¤Googleå­—ä½“åº“å› ä¸ºä¸€äº›å›½å†…çš„å®¢è§‚åŸå› ï¼Œgoogleå­—ä½“åº“ çš„è®¿é—®é€Ÿåº¦ä¸€ç›´å¾ˆæ…¢ï¼Œæ‰€ä»¥ç”Ÿæˆé¡µé¢åï¼Œè®¿é—®ç³»ç»Ÿæ€»æ˜¯ä¼šè€—è´¹ä¸€å¤§éƒ¨åˆ†çš„æ—¶é—´åœ¨åŠ è½½googleå­—ä½“åº“ä¸Šï¼Œè€Œä¸”ç»å¸¸åŠ è½½ä¸æˆåŠŸã€‚ è§£å†³çš„åŠæ³•æ˜¯å¯ä»¥ç”¨å›½å†…çš„CDNåº“æ¥æ›¿ä»£ä¸»é¢˜ä¸­çš„googleå­—ä½“åº“ï¼Œæ›´æ”¹æ–¹æ³•å¦‚ä¸‹ï¼šshellä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š1grep -ir fonts.google themes/ æ‰¾åˆ°å¯¹åº”çš„googleå­—ä½“åº“åœ°æ–¹ï¼Œç”¨å›½å†…çš„CDNå­—ä½“åº“æ›¿æ¢ï¼Œå¦‚360å­—ä½“åº“ï¼š360å‰ç«¯å…¬å…±åº“CDNã€‚ é¦–é¡µåˆ†å‰²çº¿åœ¨ \themes\next\source\css\_custom\custom.styl æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹åšå®¢é¦–é¡µä¸­æ¯ç¯‡æ–‡ç« çš„åˆ†å‰²çº¿é•¿åº¦ï¼Œæˆ‘è®¾ç½®ä¸ºäº†100%é•¿åº¦ã€‚1234567891011//indexé¡µé¢ä¸­æ¯ç¯‡æ–‡ç« ç›¸éš”çš„é‚£æ¡çº¿.posts-expand &#123; .post-eof &#123; display: block; margin: $post-eof-margin-top auto $post-eof-margin-bottom; width: 100%; height: 3px; background: $grey-light; text-align: center; &#125;&#125; å­—ä½“ã€é¢œè‰²ç­‰è®¾ç½®åœ¨\themes\next\source\css\_variables\custom.styl æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚å…·ä½“åŠŸèƒ½æˆ‘å·²ç»åšäº†æ³¨é‡Šã€‚12345678910111213141516// æ ‡é¢˜ï¼Œä¿®æ”¹æˆä½ æœŸæœ›çš„å­—ä½“æ—$font-family-headings = Georgia, sans// ä¿®æ”¹æˆä½ æœŸæœ›çš„å­—ä½“æ—$font-family-base = "Microsoft YaHei", Verdana, sans-serif// ä»£ç å­—ä½“$code-font-family = "Input Mono", "PT Mono", Consolas, Monaco, Menlo, monospace// æ­£æ–‡å­—ä½“çš„å¤§å°$font-size-base = 16px// ä»£ç å­—ä½“çš„å¤§å°$code-font-size = 14px// ä»£ç å—é¢œè‰²$code-foreground = #dd0055// Background color for &lt;body&gt;$body-bg-color = #e7e5dc //theme mist use #fdfdfd// text-color$text-color = #353535 è¯­è¨€é…ç½®_config.ymlä¸­çš„languageè¦é…ç½®ä¸ºé€‰å®šçš„ä¸»é¢˜ciliaæ–‡ä»¶å¤¹ä¸‹çš„languageç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚ï¼š1234language: zh-Hanslanguage: enlanguage: zh-hklanguage: zh-tw è¿™é‡Œä¿®æ”¹ zh-Hansä¸ºæ ‡å‡†çš„zh-cn,å¹¶æ·»åŠ ä¸€äº›æ±‰åŒ–å†…å®¹è¯­è¨€é…ç½®ç”¨æ³•:1234# ä¸å¸¦å‚æ•°çš„__('xxxx')# å¸¦å‚æ•°çš„_p('xxx',xx) ä¸è’œå­ç»Ÿè®¡æ˜¾ç¤ºæ·»åŠ ç«™ç‚¹ç»Ÿè®¡é…ç½®ä¸ºä¸è’œå­ç»Ÿè®¡ï¼Œå¹¶ä¸”å¯å¼€å…³1busuanzi: true é…ç½®è‡ªå·±çš„åˆ†äº«å›½å†…çš„jiathiså°†themes/yilia/_partial/share_jia.ejsä¸­çš„å†…å®¹æ›¿æ¢ä¸ºï¼š12345678910&lt;div class="jiathis_style"&gt; &lt;span class="jiathis_txt"&gt;&lt;%= __('post.share') %&gt;: &lt;/span&gt; &lt;a class="jiathis_button_weixin"&gt;å¾®ä¿¡&lt;/a&gt; &lt;a class="jiathis_button_cqq"&gt;QQå¥½å‹&lt;/a&gt; &lt;a class="jiathis_button_qzone"&gt;QQç©ºé—´&lt;/a&gt; &lt;a class="jiathis_button_tsina"&gt;æ–°æµªå¾®åš&lt;/a&gt; &lt;a href="http://www.jiathis.com/share?uid=2080230" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"&gt;æ›´å¤š&lt;/a&gt; &lt;a class="jiathis_counter_style"&gt;&lt;/a&gt;&lt;/div&gt;&lt;script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=2080230" charset="utf-8"&gt;&lt;/script&gt; å…¶ä¸­uidä¸ºè‡ªå·±åœ¨jiathisæ³¨å†Œçš„uid å›½å¤–çš„add thiså°†themes/yilia/_partial/share_jia.ejsä¸­çš„å†…å®¹æ›¿æ¢ä¸ºï¼š123&lt;!-- Go to www.addthis.com/dashboard to customize your tools --&gt;&lt;div class="addthis_sharing_toolbox"&gt;&lt;/div&gt;&lt;script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-568f54bcfd6a7b04" async="async"&gt;&lt;/script&gt; Rssæ·»åŠ Rssï¼Œéœ€è¦å…ˆå®‰è£…rssç”Ÿæˆæ¨¡å—ï¼š1npm install hexo-generator-feed --save ç„¶ååœ¨themes/yilia/_config.ymlå¼€å¯rss1rss: /atom.xml ç«™ç‚¹é…ç½®æ–‡ä»¶123# Extensions## Plugins: http://hexo.io/plugins/plugins: hexo-generate-feed æ·»åŠ ç«™ç‚¹åœ°å›¾æ’ä»¶1npm install hexo-generator-sitmap --save ä¼šåœ¨æ¯æ¬¡hexo generatoråè‡ªåŠ¨ç”Ÿæˆåˆ°ç½‘ç«™æ ¹ç›®å½• è®¾ç½®ç½‘ç«™logoé€šè¿‡ç½‘ç«™faviconåœ¨çº¿åˆ¶ä½œ åˆ¶ä½œfaviconå›¾ç‰‡ï¼Œlogoæœ€å¥½è®¾ç½®32*32ã€‚nextä¸»é¢˜ï¼šå°†å›¾ç‰‡æ”¾åœ¨nextä¸»é¢˜source/imagesç›®å½•ä¸‹12# åœ¨nextä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼šfavicon: /uploads/images/favicon.png Hexoæ–‡ç« ç®€å•åŠ å¯†è®¿é—®æ‰¾åˆ°themes-&gt;next-&gt;layout-&gt;_partials-&gt;head.swigæ–‡ä»¶ã€‚æŒ‰é“ç†æ˜¯æ·»åŠ åœ¨ä»»ä½•åœ°æ–¹éƒ½è¡Œï¼Œä½†æ˜¯æ¨èåŠ åœ¨æ‰€æœ‰çš„&lt;meta&gt;æ ‡ç­¾ä¹‹åã€‚12345678910&lt;script&gt; (function()&#123; if('&#123;&#123; page.password &#125;&#125;')&#123; if (prompt('è¯·è¾“å…¥æ–‡ç« å¯†ç ') !== '&#123;&#123; page.password &#125;&#125;')&#123; alert('å¯†ç é”™è¯¯ï¼'); history.back(); &#125; &#125; &#125;)();&lt;/script&gt; 1234567891011---title: Hexoæ–‡ç« ç®€å•åŠ å¯†è®¿é—®date: 2016-12-02 tags: hexocategories: åšå®¢keywords: - Hexo - åŠ å¯†description: æ–‡ç« è®¿é—®å¯†ç ï¼špasswordpassword: password--- Hexo highä¸€ä¸‹æ˜¯ç›´æ¥æŠŠè¿™æ®µä»£ç å½“æˆä¸€ä¸ªèœå•é¡¹åŠ åœ¨åšå®¢ä¸»é¢˜é…ç½®çš„_config.ymlæ–‡ä»¶ä¸­123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150&lt;li&gt; &lt;a title="æŠŠè¿™ä¸ªé“¾æ¥æ‹–åˆ°ä½ çš„Chromeæ”¶è—å¤¹å·¥å…·æ ä¸­" href='javascript:(function() &#123; function c() &#123; var e = document.createElement("link"); e.setAttribute("type", "text/css"); e.setAttribute("rel", "stylesheet"); e.setAttribute("href", f); e.setAttribute("class", l); document.body.appendChild(e) &#125; function h() &#123; var e = document.getElementsByClassName(l); for (var t = 0; t &lt; e.length; t++) &#123; document.body.removeChild(e[t]) &#125; &#125; function p() &#123; var e = document.createElement("div"); e.setAttribute("class", a); document.body.appendChild(e); setTimeout(function() &#123; document.body.removeChild(e) &#125;, 100) &#125; function d(e) &#123; return &#123; height : e.offsetHeight, width : e.offsetWidth &#125; &#125; function v(i) &#123; var s = d(i); return s.height &gt; e &amp;&amp; s.height &lt; n &amp;&amp; s.width &gt; t &amp;&amp; s.width &lt; r &#125; function m(e) &#123; var t = e; var n = 0; while (!!t) &#123; n += t.offsetTop; t = t.offsetParent &#125; return n &#125; function g() &#123; var e = document.documentElement; if (!!window.innerWidth) &#123; return window.innerHeight &#125; else if (e &amp;&amp; !isNaN(e.clientHeight)) &#123; return e.clientHeight &#125; return 0 &#125; function y() &#123; if (window.pageYOffset) &#123; return window.pageYOffset &#125; return Math.max(document.documentElement.scrollTop, document.body.scrollTop) &#125; function E(e) &#123; var t = m(e); return t &gt;= w &amp;&amp; t &lt;= b + w &#125; function S() &#123; var e = document.createElement("audio"); e.setAttribute("class", l); e.src = i; e.loop = false; e.addEventListener("canplay", function() &#123; setTimeout(function() &#123; x(k) &#125;, 500); setTimeout(function() &#123; N(); p(); for (var e = 0; e &lt; O.length; e++) &#123; T(O[e]) &#125; &#125;, 15500) &#125;, true); e.addEventListener("ended", function() &#123; N(); h() &#125;, true); e.innerHTML = " &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;"; document.body.appendChild(e); e.play() &#125; function x(e) &#123; e.className += " " + s + " " + o &#125; function T(e) &#123; e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)] &#125; function N() &#123; var e = document.getElementsByClassName(s); var t = new RegExp("\\b" + s + "\\b"); for (var n = 0; n &lt; e.length; ) &#123; e[n].className = e[n].className.replace(t, "") &#125; &#125; var e = 30; var t = 30; var n = 350; var r = 350; var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3"; var s = "mw-harlem_shake_me"; var o = "im_first"; var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"]; var a = "mw-strobe_light"; var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css"; var l = "mw_added_css"; var b = g(); var w = y(); var C = document.getElementsByTagName("*"); var k = null; for (var L = 0; L &lt; C.length; L++) &#123; var A = C[L]; if (v(A)) &#123; if (E(A)) &#123; k = A; break &#125; &#125; &#125; if (A === null) &#123; console.warn("Could not find a node of the right size. Please try a different page."); return &#125; c(); S(); var O = []; for (var L = 0; L &lt; C.length; L++) &#123; var A = C[L]; if (v(A)) &#123; O.push(A) &#125; &#125;&#125;)() '&gt;Highä¸€ä¸‹&lt;/a&gt; &lt;/li&gt; 12345678910menu: high: javascript:void(0)menu_icons: high: play// ç¬¬ä¸€ä¸ª high çš„javascript:void(0)æ˜¯æŒ‡aæ ‡ç­¾çš„è·³è½¬é“¾æ¥ï¼Œå…¶å®è¿™é‡Œçš„åŠŸèƒ½å°±æ˜¯ä¸ºäº†è®©å®ƒä¸è·³è½¬çš„ï¼Œå¦å¤–è¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥æŠŠç©ºé“¾æ¥çš„aæ ‡ç­¾æ‚¬æµ®å˜æˆæ‰‹å‹çš„é¼ æ ‡ã€‚ç¬¬äºŒä¸ª highå¯¹åº”çš„playæ˜¯å±•ç¤ºçš„å›¾æ ‡ï¼ŒNexTä¸»é¢˜ä½¿ç”¨çš„æ˜¯fontawesomeå›¾æ ‡ï¼Œè¿™é‡Œçš„playå°±æ˜¯å…¶å¯¹åº”çš„å›¾æ ‡ï¼Œæƒ³è‡ªå·± diy ä¸€ä¸‹å°±å»fontawesomeä¸Šæ‰¾ä¸ªè‡ªå·±å–œæ¬¢çš„ã€‚è¿™æ ·çš„æ–¹æ³•ç®€å•ç²—æš´æœ‰æ•ˆï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªé“¾æ¥ä¿å­˜æˆæµè§ˆå™¨çš„ä¹¦ç­¾ï¼Œè¿™æ ·å°±èƒ½åœ¨ä»»ä½•ç½‘é¡µéƒ½èƒ½å¤Ÿè°ƒç”¨è¿™ä¸ª Highä¸€ä¸‹ çš„æ–¹æ³•ã€‚ high ä¸€ä¸‹è‡ªå®šä¹‰é¡µé¢æ­Œæ›²é¦–å…ˆæ˜¯åœ¨éœ€è¦è‡ªå®šä¹‰æ›²å­çš„æ–‡ç« ä¸­åŠ ä¸Šï¼š 1&lt;div id="musicUrl" url="***"&gt;&lt;div&gt; ç„¶åæœ€ç»ˆç‰ˆhigh.jsä»£ç æ˜¯è¿™æ ·ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165document.getElementsByClassName('menu-item-high')[0].addEventListener('click', (function()&#123; var play = false; var musicUrl = document.getElementById('musicUrl'); if(musicUrl)&#123; musicUrl = musicUrl.getAttribute('url'); &#125;else&#123; musicUrl = null; &#125; return function()&#123; if(play)&#123; console.log('Enjoying'); return; &#125; play = true; function c() &#123; var e = document.createElement("link"); e.setAttribute("type", "text/css"); e.setAttribute("rel", "stylesheet"); e.setAttribute("href", f); e.setAttribute("class", l); document.body.appendChild(e) &#125; function h() &#123; var e = document.getElementsByClassName(l); for (var t = 0; t &lt; e.length; t++) &#123; document.body.removeChild(e[t]) &#125; &#125; function p() &#123; var e = document.createElement("div"); e.setAttribute("class", a); document.body.appendChild(e); setTimeout(function() &#123; document.body.removeChild(e) &#125;, 100) &#125; function d(e) &#123; return &#123; height: e.offsetHeight, width: e.offsetWidth &#125; &#125; function v(i) &#123; var s = d(i); return s.height &gt; e &amp;&amp; s.height &lt; n &amp;&amp; s.width &gt; t &amp;&amp; s.width &lt; r &#125; function m(e) &#123; var t = e; var n = 0; while (!!t) &#123; n += t.offsetTop; t = t.offsetParent &#125; return n &#125; function g() &#123; var e = document.documentElement; if (!!window.innerWidth) &#123; return window.innerHeight &#125; else if (e &amp;&amp; !isNaN(e.clientHeight)) &#123; return e.clientHeight &#125; return 0 &#125; function y() &#123; if (window.pageYOffset) &#123; return window.pageYOffset &#125; return Math.max(document.documentElement.scrollTop, document.body.scrollTop) &#125; function E(e) &#123; var t = m(e); return t &gt;= w &amp;&amp; t &lt;= b + w &#125; function S() &#123; var e = document.createElement("audio"); e.setAttribute("class", l); e.src = i; e.loop = false; e.addEventListener("canplay", function() &#123; setTimeout(function() &#123; x(k) &#125;, 500); setTimeout(function() &#123; N(); p(); for (var e = 0; e &lt; O.length; e++) &#123; T(O[e]) &#125; &#125;, 15500) &#125;, true); e.addEventListener("ended", function() &#123; N(); h(); paly = false; &#125;, true); e.innerHTML = " &lt;p&gt;If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.&lt;/p&gt; &lt;p&gt;"; document.body.appendChild(e); e.play() &#125; function x(e) &#123; e.className += " " + s + " " + o &#125; function T(e) &#123; e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)] &#125; function N() &#123; var e = document.getElementsByClassName(s); var t = new RegExp("\\b" + s + "\\b"); for (var n = 0; n &lt; e.length; ) &#123; e[n].className = e[n].className.replace(t, "") &#125; &#125; var e = 30; var t = 30; var n = 350; var r = 350; var i = musicUrl || "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3"; var s = "mw-harlem_shake_me"; var o = "im_first"; var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"]; var a = "mw-strobe_light"; var f = "/vendors/high/high.css"; var l = "mw_added_css"; var b = g(); var w = y(); var C = document.getElementsByTagName("*"); var k = null; for (var L = 0; L &lt; C.length; L++) &#123; var A = C[L]; if (v(A)) &#123; if (E(A)) &#123; k = A; break &#125; &#125; &#125; if (A === null) &#123; console.warn("Could not find a node of the right size. Please try a different page."); return &#125; c(); S(); var O = []; for (var L = 0; L &lt; C.length; L++) &#123; var A = C[L]; if (v(A)) &#123; O.push(A) &#125; &#125; &#125;;&#125;)(), false); ä¿®æ”¹æ–‡ç« é“¾æ¥HEXO é»˜è®¤çš„æ–‡ç« é“¾æ¥å½¢å¼ä¸ºdomain/year/month/day/postnameï¼Œé»˜è®¤å°±æ˜¯ä¸€ä¸ªå››çº§urlï¼Œå¹¶ä¸”å¯èƒ½é€ æˆurlè¿‡é•¿ï¼Œå¯¹æœç´¢å¼•æ“æ˜¯ååˆ†ä¸å‹å¥½çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹æˆdomain/postnameçš„å½¢å¼ã€‚ç¼–è¾‘ç«™ç‚¹_config.ymlæ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­çš„permalinkå­—æ®µæ”¹ä¸ºpermalink: :title.htmlå³å¯ã€‚ å¤œé—´æ¨¡å¼ Hexo-Next-Mistä¸»é¢˜å¤´éƒ¨é¡¶æ èƒŒæ™¯å›¾ç‰‡å›¾ç‰‡å­˜æ”¾ä½ç½®ï¼šé€‰æ‹©ä¸€å¼ å¿ƒä»ªçš„å›¾ç‰‡ï¼Œå‘½åä¸º background.jpgï¼Œæ”¾åˆ° source æ–‡ä»¶å¤¹ä¸‹çš„ image æ–‡ä»¶å¤¹å†…ã€‚12Hexo\source\image // å›¾ç‰‡å¤§å°æˆ‘é€‰æ‹©çš„æ˜¯â€œ50å˜ç±³*5å˜ç±³â€ï¼Œå¤ªå°çš„è¯æ— æ³•è¦†ç›–æ•´ä¸ªèƒŒæ™¯ èƒŒæ™¯å›¾ç‰‡è®¾ç½®ï¼šæ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼š1234567hexo\themes\next\source\css\_schemes\Mist\_header.stylæ‰“å¼€ _header.stylï¼Œå°†ç¬¬ä¸€è¡Œ background: åçš„å†…å®¹æ”¹ä¸ºå¦‚ä¸‹å½¢å¼ï¼šæ–¹å¼ä¸€ï¼šæœ¬åœ°å›¾ç‰‡.header &#123; background: url('Hexo\source\image/background.jpg'); &#125;æ–¹å¼ä¸€ï¼šç½‘ç»œå›¾ç‰‡.header &#123; background: url('http://upload-images.jianshu.io/upload_images/2230763-265f0df7e75d706a.gif?imageMogr2/auto-orient/strip'); &#125; ä¿å­˜ï¼Œé‡æ–°ç”Ÿæˆç½‘é¡µå³å¯ã€‚ æ‰“èµå­—ä½“ä¸é—ªåŠ¨ ä¿®æ”¹æ–‡ä»¶next/source/css/_common/components/post/post-reward.stylï¼Œç„¶åæ³¨é‡Šå…¶ä¸­çš„å‡½æ•°wechat:hoverå’Œalipay:hoverï¼Œå¦‚ä¸‹ï¼š 123456789101112/* æ³¨é‡Šæ–‡å­—é—ªåŠ¨å‡½æ•° #wechat:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125; #alipay:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125;*/ åšå®¢æ–‡ç« é“¾æ¥æ— ä¸­æ–‡ä¹±ç  â˜•ï¸æ›´æ–°ã€æ›´å¤šå®è´¨æ€§å°åŠŸèƒ½åˆ†äº«ï¼Œæ•´ç†è‡ªç½‘ç»œã€‘ æœªå®Œå¾…ç»­ ï¼ æœªå®Œå¾…ç»­ ï¼ æœªå®Œå¾…ç»­ ï¼ å‚è€ƒåŸè‘—ï¼šæ‘˜å½•1ã€ã€Levi.Blogã€‘ http://www.dingxuewen.com2ã€ã€lancelot_lewisã€‘ https://lancelot_lewis.coding.me3ã€ã€http://www.jianshu.com/p/f054333ac9e6ã€‘ 4ã€ã€ã€‘]]></content>
      <categories>
        <category>HexoBlog</category>
      </categories>
      <tags>
        <tag>HexoBlog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS NSURLConnection åˆ° NSURLSession è¯‘æ–‡]]></title>
    <url>%2FAppleTranslation%2FConnectionToSession.html</url>
    <content type="text"><![CDATA[iOS 7 å’Œ Mac OS X 10.9 Mavericks ä¸­ä¸€ä¸ªæ˜¾è‘—çš„å˜åŒ–å°±æ˜¯å¯¹ Foundation URL åŠ è½½ç³»ç»Ÿçš„å½»åº•é‡æ„ã€‚ ç°åœ¨å·²ç»æœ‰äººåœ¨æ·±å…¥è‹¹æœçš„ç½‘ç»œå±‚åŸºç¡€æ¶æ„çš„åœ°æ–¹åšç ”ç©¶äº†ï¼Œæ‰€ä»¥æˆ‘æƒ³æ˜¯æ—¶å€™æ¥åˆ†äº«ä¸€äº›å¯¹äºæˆ‘å¯¹äºè¿™äº›æ–°çš„ API çš„çœ‹æ³•å’Œå¿ƒå¾—äº†ï¼Œæ–°çš„ API å°†å¦‚ä½•å½±å“æˆ‘ä»¬ç¼–å†™ç¨‹åºï¼Œä»¥åŠå®ƒä»¬å¯¹äº API è®¾è®¡ç†å¿µçš„å½±å“ã€‚ NSURLConnection ä½œä¸º Core Foundation / CFNetwork æ¡†æ¶çš„ API ä¹‹ä¸Šçš„ä¸€ä¸ªæŠ½è±¡ï¼Œåœ¨ 2003 å¹´ï¼Œéšç€ç¬¬ä¸€ç‰ˆçš„ Safari çš„å‘å¸ƒå°±å‘å¸ƒäº†ã€‚NSURLConnection è¿™ä¸ªåå­—ï¼Œå®é™…ä¸Šæ˜¯æŒ‡ä»£çš„ Foundation æ¡†æ¶çš„ URL åŠ è½½ç³»ç»Ÿä¸­ä¸€ç³»åˆ—æœ‰å…³è”çš„ç»„ä»¶ï¼šNSURLRequestã€NSURLResponseã€NSURLProtocolã€ NSURLCacheã€ NSHTTPCookieStorageã€NSURLCredentialStorage ä»¥åŠåŒåç±» NSURLConnectionã€‚ NSURLRequest è¢«ä¼ é€’ç»™ NSURLConnectionã€‚è¢«å§”æ‰˜å¯¹è±¡ï¼ˆéµå®ˆä»¥å‰çš„éæ­£å¼åè®® &lt;NSURLConnectionDelegate&gt; å’Œ &lt;NSURLConnectionDataDelegate&gt;ï¼‰å¼‚æ­¥åœ°è¿”å›ä¸€ä¸ª NSURLResponse ä»¥åŠåŒ…å«æœåŠ¡å™¨è¿”å›ä¿¡æ¯çš„ NSDataã€‚ åœ¨ä¸€ä¸ªè¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰ï¼Œç³»ç»Ÿä¼šå…ˆæŸ¥è¯¢å…±äº«çš„ç¼“å­˜ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ç­–ç•¥ï¼ˆpolicyï¼‰ä»¥åŠå¯ç”¨æ€§ï¼ˆavailabilityï¼‰çš„ä¸åŒï¼Œä¸€ä¸ªå·²ç»è¢«ç¼“å­˜çš„å“åº”å¯èƒ½ä¼šè¢«ç«‹å³è¿”å›ã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜çš„å“åº”å¯ç”¨ï¼Œåˆ™è¿™ä¸ªè¯·æ±‚å°†æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„ç­–ç•¥æ¥ç¼“å­˜å®ƒçš„å“åº”ä»¥ä¾¿å°†æ¥çš„è¯·æ±‚å¯ä»¥ä½¿ç”¨ã€‚ åœ¨æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå‘å‡ºé‰´æƒæŸ¥è¯¢ï¼ˆauthentication challengeï¼‰ï¼Œè¿™å¯ä»¥ç”±å…±äº«çš„ cookie æˆ–æœºå¯†å­˜å‚¨ï¼ˆcredential storageï¼‰æ¥è‡ªåŠ¨å“åº”ï¼Œæˆ–è€…ç”±è¢«å§”æ‰˜å¯¹è±¡æ¥å“åº”ã€‚å‘é€ä¸­çš„è¯·æ±‚ä¹Ÿå¯ä»¥è¢«æ³¨å†Œçš„ NSURLProtocol å¯¹è±¡æ‰€æ‹¦æˆªï¼Œä»¥ä¾¿åœ¨å¿…è¦çš„æ—¶å€™æ— ç¼åœ°æ”¹å˜å…¶åŠ è½½è¡Œä¸ºã€‚ ä¸ç®¡æ€æ ·ï¼ŒNSURLConnection ä½œä¸ºç½‘ç»œåŸºç¡€æ¶æ„ï¼Œå·²ç»æœåŠ¡äº†æˆåƒä¸Šä¸‡çš„ iOS å’Œ Mac OS ç¨‹åºï¼Œå¹¶ä¸”åšçš„è¿˜ç®—ç›¸å½“ä¸é”™ã€‚ä½†æ˜¯è¿™äº›å¹´ï¼Œä¸€äº›ç”¨ä¾‹â€”â€”å°¤å…¶æ˜¯åœ¨ iPhone å’Œ iPad ä¸Šé¢â€”â€”å·²ç»å¯¹ NSURLConnection çš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µæå‡ºäº†æŒ‘æˆ˜ï¼Œè®©è‹¹æœæœ‰ç†ç”±å¯¹å®ƒè¿›è¡Œé‡æ„ã€‚ åœ¨ 2013 çš„ WWDC ä¸Šï¼Œè‹¹æœæ¨å‡ºäº† NSURLConnection çš„ç»§ä»»è€…ï¼šNSURLSessionã€‚ å’Œ NSURLConnection ä¸€æ ·ï¼ŒNSURLSession æŒ‡çš„ä¹Ÿä¸ä»…æ˜¯åŒåç±» NSURLSessionï¼Œè¿˜åŒ…æ‹¬ä¸€ç³»åˆ—ç›¸äº’å…³è”çš„ç±»ã€‚NSURLSession åŒ…æ‹¬äº†ä¸ä¹‹å‰ç›¸åŒçš„ç»„ä»¶ï¼ŒNSURLRequest ä¸ NSURLCacheï¼Œä½†æ˜¯æŠŠ NSURLConnection æ›¿æ¢æˆäº† NSURLSessionã€NSURLSessionConfiguration ä»¥åŠ NSURLSessionTask çš„ 3 ä¸ªå­ç±»ï¼šNSURLSessionDataTaskï¼ŒNSURLSessionUploadTaskï¼ŒNSURLSessionDownloadTaskã€‚ ä¸ NSURLConnection ç›¸æ¯”ï¼ŒNSURLsession æœ€ç›´æ¥çš„æ”¹è¿›å°±æ˜¯å¯ä»¥é…ç½®æ¯ä¸ª session çš„ç¼“å­˜ï¼Œåè®®ï¼Œcookieï¼Œä»¥åŠè¯ä¹¦ç­–ç•¥ï¼ˆcredential policyï¼‰ï¼Œç”šè‡³è·¨ç¨‹åºå…±äº«è¿™äº›ä¿¡æ¯ã€‚è¿™å°†å…è®¸ç¨‹åºå’Œç½‘ç»œåŸºç¡€æ¡†æ¶ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸ä¼šå‘ç”Ÿå¹²æ‰°ã€‚æ¯ä¸ª NSURLSession å¯¹è±¡éƒ½ç”±ä¸€ä¸ª NSURLSessionConfiguration å¯¹è±¡æ¥è¿›è¡Œåˆå§‹åŒ–ï¼Œåè€…æŒ‡å®šäº†åˆšæ‰æåˆ°çš„é‚£äº›ç­–ç•¥ä»¥åŠä¸€äº›ç”¨æ¥å¢å¼ºç§»åŠ¨è®¾å¤‡ä¸Šæ€§èƒ½çš„æ–°é€‰é¡¹ã€‚ NSURLSession ä¸­å¦ä¸€å¤§å—å°±æ˜¯ session taskã€‚å®ƒè´Ÿè´£å¤„ç†æ•°æ®çš„åŠ è½½ä»¥åŠæ–‡ä»¶å’Œæ•°æ®åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„ä¸Šä¼ å’Œä¸‹è½½ã€‚NSURLSessionTask ä¸ NSURLConnection æœ€å¤§çš„ç›¸ä¼¼ä¹‹å¤„åœ¨äºå®ƒä¹Ÿè´Ÿè´£æ•°æ®çš„åŠ è½½ï¼Œæœ€å¤§çš„ä¸åŒä¹‹å¤„åœ¨äºæ‰€æœ‰çš„ task å…±äº«å…¶åˆ›é€ è€… NSURLSession è¿™ä¸€å…¬å…±å§”æ‰˜è€…ï¼ˆcommon delegateï¼‰ã€‚ æˆ‘ä»¬å…ˆæ¥æ·±å…¥æ¢è®¨ taskï¼Œè¿‡åå†æ¥è®¨è®º NSURLSessionConfigurationã€‚ NSURLSessionTask NSURLsessionTask æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰ 3 ä¸ªå®ä½“å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼šNSURLSessionDataTaskã€NSURLSessionUploadTaskã€NSURLSessionDownloadTask`ã€‚è¿™ 3 ä¸ªå­ç±»å°è£…äº†ç°ä»£ç¨‹åºä¸‰ä¸ªæœ€åŸºæœ¬çš„ç½‘ç»œä»»åŠ¡ï¼šè·å–æ•°æ®ï¼Œæ¯”å¦‚ JSON æˆ–è€… XMLï¼Œä¸Šä¼ æ–‡ä»¶å’Œä¸‹è½½æ–‡ä»¶ã€‚ å½“ä¸€ä¸ª NSURLSessionDataTask å®Œæˆæ—¶ï¼Œå®ƒä¼šå¸¦æœ‰ç›¸å…³è”çš„æ•°æ®ï¼Œè€Œä¸€ä¸ª NSURLSessionDownloadTask ä»»åŠ¡ç»“æŸæ—¶ï¼Œå®ƒä¼šå¸¦å›å·²ä¸‹è½½æ–‡ä»¶çš„ä¸€ä¸ªä¸´æ—¶çš„æ–‡ä»¶è·¯å¾„ã€‚å› ä¸ºä¸€èˆ¬æ¥è¯´ï¼ŒæœåŠ¡ç«¯å¯¹äºä¸€ä¸ªä¸Šä¼ ä»»åŠ¡çš„å“åº”ä¹Ÿä¼šæœ‰ç›¸å…³æ•°æ®è¿”å›ï¼Œæ‰€ä»¥ NSURLSessionUploadTask ç»§æ‰¿è‡ª NSURLSessionDataTaskã€‚ æ‰€æœ‰çš„ task éƒ½æ˜¯å¯ä»¥å–æ¶ˆï¼Œæš‚åœæˆ–è€…æ¢å¤çš„ã€‚å½“ä¸€ä¸ª download task å–æ¶ˆæ—¶ï¼Œå¯ä»¥é€šè¿‡é€‰é¡¹æ¥åˆ›å»ºä¸€ä¸ªæ¢å¤æ•°æ®ï¼ˆresume dataï¼‰ï¼Œç„¶åå¯ä»¥ä¼ é€’ç»™ä¸‹ä¸€æ¬¡æ–°åˆ›å»ºçš„ download taskï¼Œä»¥ä¾¿ç»§ç»­ä¹‹å‰çš„ä¸‹è½½ã€‚ ä¸åŒäºç›´æ¥ä½¿ç”¨ alloc-init åˆå§‹åŒ–æ–¹æ³•ï¼Œtask æ˜¯ç”±ä¸€ä¸ª NSURLSession åˆ›å»ºçš„ã€‚æ¯ä¸ª task çš„æ„é€ æ–¹æ³•éƒ½å¯¹åº”æœ‰æˆ–è€…æ²¡æœ‰ completionHandler è¿™ä¸ª block çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šæœ‰è¿™æ ·ä¸¤ä¸ªæ„é€ æ–¹æ³• â€“dataTaskWithRequest:å’Œ â€“dataTaskWithRequest:completionHandler:ã€‚è¿™ä¸ NSURLConnection çš„ -sendAsynchronousRequest:queue:completionHandler: æ–¹æ³•ç±»ä¼¼ï¼Œé€šè¿‡æŒ‡å®š completionHandler è¿™ä¸ª block å°†åˆ›å»ºä¸€ä¸ªéšå¼çš„ delegateï¼Œæ¥æ›¿ä»£è¯¥ task åŸæ¥çš„ delegateâ€”â€”sessionã€‚å¯¹äºéœ€è¦ override åŸæœ‰ session task çš„ delegate çš„é»˜è®¤è¡Œä¸ºçš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™ç§ä¸å¸¦ completionHandler çš„ç‰ˆæœ¬ã€‚ NSURLSessionTask çš„å·¥å‚æ–¹æ³• åœ¨ iOS 5 ä¸­ï¼ŒNSURLConnection æ·»åŠ äº† sendAsynchronousRequest:queue:completionHandler:è¿™ä¸€æ–¹æ³•ï¼Œå¯¹äºä¸€æ¬¡æ€§ä½¿ç”¨çš„ requestï¼Œ å¤§å¤§åœ°ç®€åŒ–ä»£ç ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ sendSynchronousRequest:returningResponse:error: è¿™ä¸ªæ–¹æ³•çš„å¼‚æ­¥æ›¿ä»£å“ï¼š12345678NSURL *URL = [NSURL URLWithString:@"http://example.com"];NSURLRequest *request = [NSURLRequest requestWithURL:URL];[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) &#123; // ...&#125;]; NSURLSession åœ¨ task çš„æ„é€ æ–¹æ³•ä¸Šå»¶ç»­äº†è¿™ä¸€æ¨¡å¼ã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œä¸ä¼šç«‹å³è¿è¡Œ taskï¼Œè€Œæ˜¯å°†è¯¥ task å¯¹è±¡å…ˆè¿”å›ï¼Œå…è®¸æˆ‘ä»¬è¿›ä¸€æ­¥çš„é…ç½®ï¼Œç„¶åå¯ä»¥ä½¿ç”¨ resume æ–¹æ³•æ¥è®©å®ƒå¼€å§‹è¿è¡Œã€‚ Data task å¯ä»¥é€šè¿‡ NSURL æˆ– NSURLRequest åˆ›å»ºï¼ˆä½¿ç”¨å‰è€…ç›¸å½“äºæ˜¯ä½¿ç”¨ä¸€ä¸ªå¯¹äºè¯¥ URL è¿›è¡Œæ ‡å‡† GET è¯·æ±‚çš„ NSURLRequestï¼Œè¿™æ˜¯ä¸€ç§å¿«æ·æ–¹æ³•ï¼‰ï¼š1234567891011NSURL *URL = [NSURL URLWithString:@"http://example.com"];NSURLRequest *request = [NSURLRequest requestWithURL:URL];NSURLSession *session = [NSURLSession sharedSession];NSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler: ^(NSData *data, NSURLResponse *response, NSError *error) &#123; // ... &#125;];[task resume]; Upload task çš„åˆ›å»ºéœ€è¦ä½¿ç”¨ä¸€ä¸ª requestï¼Œå¦å¤–åŠ ä¸Šä¸€ä¸ªè¦ä¸Šä¼ çš„ NSData å¯¹è±¡æˆ–è€…æ˜¯ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶çš„è·¯å¾„å¯¹åº”çš„ NSURLï¼š12345678910111213NSURL *URL = [NSURL URLWithString:@"http://example.com/upload"];NSURLRequest *request = [NSURLRequest requestWithURL:URL];NSData *data = ...;NSURLSession *session = [NSURLSession sharedSession];NSURLSessionUploadTask *uploadTask = [session uploadTaskWithRequest:request fromData:data completionHandler: ^(NSData *data, NSURLResponse *response, NSError *error) &#123; // ... &#125;];[uploadTask resume]; Download task ä¹Ÿéœ€è¦ä¸€ä¸ª requestï¼Œä¸åŒä¹‹å¤„åœ¨äº completionHandler è¿™ä¸ª blockã€‚Data task å’Œ upload task ä¼šåœ¨ä»»åŠ¡å®Œæˆæ—¶ä¸€æ¬¡æ€§è¿”å›ï¼Œä½†æ˜¯ Download task æ˜¯å°†æ•°æ®ä¸€ç‚¹ç‚¹åœ°å†™å…¥æœ¬åœ°çš„ä¸´æ—¶æ–‡ä»¶ã€‚æ‰€ä»¥åœ¨ completionHandler è¿™ä¸ª block é‡Œï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ–‡ä»¶ä»ä¸€ä¸ªä¸´æ—¶åœ°å€ç§»åŠ¨åˆ°ä¸€ä¸ªæ°¸ä¹…çš„åœ°å€ä¿å­˜èµ·æ¥ï¼š1234567891011121314NSURL *URL = [NSURL URLWithString:@"http://example.com/file.zip"];NSURLRequest *request = [NSURLRequest requestWithURL:URL];NSURLSession *session = [NSURLSession sharedSession];NSURLSessionDownloadTask *downloadTask = [session downloadTaskWithRequest:request completionHandler: ^(NSURL *location, NSURLResponse *response, NSError *error) &#123; NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) firstObject]; NSURL *documentsDirectoryURL = [NSURL fileURLWithPath:documentsPath]; NSURL *newFileLocation = [documentsDirectoryURL URLByAppendingPathComponent:[[response URL] lastPathComponent]]; [[NSFileManager defaultManager] copyItemAtURL:location toURL:newFileLocation error:nil]; &#125;];[downloadTask resume]; NSURLSession ä¸ NSURLConnection çš„ delegate æ–¹æ³• æ€»ä½“è€Œè¨€ï¼ŒNSURLSession çš„ delegate æ–¹æ³•æ˜¯ NSURLConnection çš„æ¼”åŒ–çš„åå¹´ä¸­å¯¹äº ad-hoc æ¨¡å¼çš„ä¸€ä¸ªæ˜¾è‘—æ”¹å–„ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ˜ å°„è¡¨æ¥è¿›è¡Œä¸€ä¸ªå®Œæ•´çš„æ¦‚è§ˆã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›å…·ä½“çš„è§‚å¯Ÿï¼š NSURLSession æ—¢æ‹¥æœ‰ seesion çš„ delegate æ–¹æ³•ï¼Œåˆæ‹¥æœ‰ task çš„ delegate æ–¹æ³•ç”¨æ¥å¤„ç†é‰´æƒæŸ¥è¯¢ã€‚session çš„ delegate æ–¹æ³•å¤„ç†è¿æ¥å±‚çš„é—®é¢˜ï¼Œè¯¸å¦‚æœåŠ¡å™¨ä¿¡ä»»ï¼Œå®¢æˆ·ç«¯è¯ä¹¦çš„è¯„ä¼°ï¼ŒNTLMå’Œ Kerberosåè®®è¿™ç±»é—®é¢˜ï¼Œè€Œ task çš„ delegate åˆ™å¤„ç†ä»¥ç½‘ç»œè¯·æ±‚ä¸ºåŸºç¡€çš„é—®é¢˜ï¼Œå¦‚ Basicï¼ŒDigestï¼Œä»¥åŠä»£ç†èº«ä»½éªŒè¯ï¼ˆProxy authenticationï¼‰ç­‰ã€‚ åœ¨ NSURLConnection ä¸­æœ‰ä¸¤ä¸ª delegate æ–¹æ³•å¯ä»¥è¡¨æ˜ä¸€ä¸ªç½‘ç»œè¯·æ±‚å·²ç»ç»“æŸï¼šNSURLConnectionDataDelegate ä¸­çš„ -connectionDidFinishLoading: å’Œ NSURLConnectionDelegate ä¸­çš„ -connection:didFailWithError:ï¼Œè€Œåœ¨ NSURLSession ä¸­æ”¹ä¸ºä¸€ä¸ª delegate æ–¹æ³•ï¼šNSURLSessionTaskDelegate çš„ -URLSession:task:didCompleteWithError: NSURLSession ä¸­è¡¨ç¤ºä¼ è¾“å¤šå°‘å­—èŠ‚çš„å‚æ•°ç±»å‹ç°åœ¨æ”¹ä¸º int64_tï¼Œä»¥å‰åœ¨ NSURLConnection ä¸­ç›¸åº”çš„å‚æ•°çš„ç±»å‹æ˜¯ long longã€‚ ç”±äºå¢åŠ äº† completionHandler: è¿™ä¸ª block ä½œä¸ºå‚æ•°ï¼ŒNSURLSession å®é™…ä¸Šç»™ Foundation æ¡†æ¶å¼•å…¥äº†ä¸€ç§å…¨æ–°çš„æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼å…è®¸ delegate æ–¹æ³•å¯ä»¥å®‰å…¨åœ°åœ¨ä¸»çº¿ç¨‹ä¸è¿è¡Œï¼Œè€Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼›Delgate åªéœ€è¦ç®€å•åœ°è°ƒç”¨ dispatch_async å°±å¯ä»¥åˆ‡æ¢åˆ°åå°è¿›è¡Œç›¸å…³çš„æ“ä½œï¼Œç„¶ååœ¨æ“ä½œå®Œæˆæ—¶è°ƒç”¨ completionHandler å³å¯ã€‚åŒæ—¶ï¼Œå®ƒè¿˜å¯ä»¥æœ‰æ•ˆåœ°æ‹¥æœ‰å¤šä¸ªè¿”å›å€¼ï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬ä½¿ç”¨ç¬¨æ‹™çš„å‚æ•°æŒ‡é’ˆã€‚ä»¥ NSURLSessionTaskDelegate çš„ -URLSession:task:didReceiveChallenge:completionHandler: æ–¹æ³•æ¥ä¸¾ä¾‹ï¼ŒcompletionHandler æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šNSURLSessionAuthChallengeDisposition å’Œ NSURLCredentialï¼Œå‰è€…ä¸ºåº”å¯¹é‰´æƒæŸ¥è¯¢çš„ç­–ç•¥ï¼Œåè€…ä¸ºéœ€è¦ä½¿ç”¨çš„è¯ä¹¦ï¼ˆä»…å½“å‰è€…â€”â€”åº”å¯¹é‰´æƒæŸ¥è¯¢çš„ç­–ç•¥ä¸ºä½¿ç”¨è¯ä¹¦ï¼Œå³ NSURLSessionAuthChallengeUseCredential æ—¶æœ‰æ•ˆï¼Œå¦åˆ™è¯¥å‚æ•°ä¸º NULLï¼‰ æƒ³è¦æŸ¥çœ‹æ›´å¤šå…³äº session task çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ WWDC Session 705: â€œWhatâ€™s New in Foundation Networkingâ€ NSURLSessionConfiguration NSURLSessionConfiguration å¯¹è±¡ç”¨äºå¯¹ NSURLSession å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ã€‚NSURLSessionConfiguration å¯¹ä»¥å‰ NSMutableURLRequest æ‰€æä¾›çš„ç½‘ç»œè¯·æ±‚å±‚çš„è®¾ç½®é€‰é¡¹è¿›è¡Œäº†æ‰©å……ï¼Œæä¾›ç»™æˆ‘ä»¬ç›¸å½“å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶æƒã€‚ä»æŒ‡å®šå¯ç”¨ç½‘ç»œï¼Œåˆ° cookieï¼Œå®‰å…¨æ€§ï¼Œç¼“å­˜ç­–ç•¥ï¼Œå†åˆ°ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œå¯åŠ¨äº‹ä»¶çš„è®¾ç½®ï¼Œä»¥åŠç”¨äºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„å‡ ä¸ªæ–°å±æ€§ï¼Œä½ ä¼šå‘ç°ä½¿ç”¨ NSURLSessionConfiguration å¯ä»¥æ‰¾åˆ°å‡ ä¹ä»»ä½•ä½ æƒ³è¦è¿›è¡Œé…ç½®çš„é€‰é¡¹ã€‚ NSURLSession åœ¨åˆå§‹åŒ–æ—¶ä¼šæŠŠé…ç½®å®ƒçš„ NSURLSessionConfiguration å¯¹è±¡è¿›è¡Œä¸€æ¬¡ copyï¼Œå¹¶ä¿å­˜åˆ°è‡ªå·±çš„configurationå±æ€§ä¸­ï¼Œè€Œä¸”è¿™ä¸ªå±æ€§æ˜¯åªè¯»çš„ã€‚å› æ­¤ä¹‹åå†ä¿®æ”¹æœ€åˆé…ç½® session çš„é‚£ä¸ªconfiguration` å¯¹è±¡å¯¹äº session æ˜¯æ²¡æœ‰å½±å“çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œconfiguration åªåœ¨åˆå§‹åŒ–æ—¶è¢«è¯»å–ä¸€æ¬¡ï¼Œä¹‹åéƒ½æ˜¯ä¸ä¼šå˜åŒ–çš„ã€‚ NSURLSessionConfiguration çš„å·¥å‚æ–¹æ³• NSURLSessionConfiguration æœ‰ä¸‰ä¸ªç±»å·¥å‚æ–¹æ³•ï¼Œè¿™å¾ˆå¥½åœ°è¯´æ˜äº† NSURLSession è®¾è®¡æ—¶æ‰€è€ƒè™‘çš„ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚ +defaultSessionConfiguration è¿”å›ä¸€ä¸ªæ ‡å‡†çš„ configurationï¼Œè¿™ä¸ªé…ç½®å®é™…ä¸Šä¸ NSURLConnection çš„ç½‘ç»œå †æ ˆï¼ˆnetworking stackï¼‰æ˜¯ä¸€æ ·çš„ï¼Œå…·æœ‰ç›¸åŒçš„å…±äº« NSHTTPCookieStorageï¼Œå…±äº« NSURLCache å’Œå…±äº« NSURLCredentialStorageã€‚ +ephemeralSessionConfiguration è¿”å›ä¸€ä¸ªé¢„è®¾é…ç½®ï¼Œè¿™ä¸ªé…ç½®ä¸­ä¸ä¼šå¯¹ç¼“å­˜ï¼ŒCookie å’Œè¯ä¹¦è¿›è¡ŒæŒä¹…æ€§çš„å­˜å‚¨ã€‚è¿™å¯¹äºå®ç°åƒç§˜å¯†æµè§ˆè¿™ç§åŠŸèƒ½æ¥è¯´æ˜¯å¾ˆç†æƒ³çš„ã€‚ +backgroundSessionConfiguration:(NSString *)identifier çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªåå° sessionã€‚åå° session ä¸åŒäºå¸¸è§„çš„ï¼Œæ™®é€šçš„ sessionï¼Œå®ƒç”šè‡³å¯ä»¥åœ¨åº”ç”¨ç¨‹åºæŒ‚èµ·ï¼Œé€€å‡ºæˆ–è€…å´©æºƒçš„æƒ…å†µä¸‹è¿è¡Œä¸Šä¼ å’Œä¸‹è½½ä»»åŠ¡ã€‚åˆå§‹åŒ–æ—¶æŒ‡å®šçš„æ ‡è¯†ç¬¦ï¼Œè¢«ç”¨äºå‘ä»»ä½•å¯èƒ½åœ¨è¿›ç¨‹å¤–æ¢å¤åå°ä¼ è¾“çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰æä¾›ä¸Šä¸‹æ–‡ã€‚ æƒ³è¦æŸ¥çœ‹æ›´å¤šå…³äºåå° session çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ WWDC Session 204: â€œWhatâ€™s New with Multitaskingâ€ é…ç½®å±æ€§ NSURLSessionConfiguration æ‹¥æœ‰ 20 ä¸ªé…ç½®å±æ€§ã€‚ç†Ÿç»ƒæŒæ¡è¿™äº›é…ç½®å±æ€§çš„ç”¨å¤„ï¼Œå¯ä»¥è®©åº”ç”¨ç¨‹åºå……åˆ†åœ°åˆ©ç”¨å…¶ç½‘ç»œç¯å¢ƒã€‚ åŸºæœ¬é…ç½® HTTPAdditionalHeaders æŒ‡å®šäº†ä¸€ç»„é»˜è®¤çš„å¯ä»¥è®¾ç½®å‡ºç«™è¯·æ±‚ï¼ˆoutbound requestï¼‰çš„æ•°æ®å¤´ã€‚è¿™å¯¹äºè·¨ session å…±äº«ä¿¡æ¯ï¼Œå¦‚å†…å®¹ç±»å‹ï¼Œè¯­è¨€ï¼Œç”¨æˆ·ä»£ç†å’Œèº«ä»½è®¤è¯ï¼Œæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚12345678910NSString *userPasswordString = [NSString stringWithFormat:@"%@:%@", user, password];NSData * userPasswordData = [userPasswordString dataUsingEncoding:NSUTF8StringEncoding];NSString *base64EncodedCredential = [userPasswordData base64EncodedStringWithOptions:0];NSString *authString = [NSString stringWithFormat:@"Basic %@", base64EncodedCredential];NSString *userAgentString = @"AppName/com.example.app (iPhone 5s; iOS 7.0.2; Scale/2.0)";configuration.HTTPAdditionalHeaders = @&#123;@"Accept": @"application/json", @"Accept-Language": @"en", @"Authorization": authString, @"User-Agent": userAgentString&#125;; networkServiceType å¯¹æ ‡å‡†çš„ç½‘ç»œæµé‡ï¼Œç½‘ç»œç”µè¯ï¼Œè¯­éŸ³ï¼Œè§†é¢‘ï¼Œä»¥åŠç”±ä¸€ä¸ªåå°è¿›ç¨‹ä½¿ç”¨çš„æµé‡è¿›è¡Œäº†åŒºåˆ†ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½ä¸éœ€è¦è®¾ç½®è¿™ä¸ªã€‚ allowsCellularAccess å’Œ discretionary è¢«ç”¨äºèŠ‚çœé€šè¿‡èœ‚çªç½‘ç»œè¿æ¥çš„å¸¦å®½ã€‚å¯¹äºåå°ä¼ è¾“çš„æƒ…å†µï¼Œæ¨èå¤§å®¶ä½¿ç”¨ discretionary è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯ allowsCellularAccessï¼Œå› ä¸ºå‰è€…ä¼šæŠŠ WiFi å’Œç”µæºçš„å¯ç”¨æ€§è€ƒè™‘åœ¨å†…ã€‚ timeoutIntervalForRequest å’Œ timeoutIntervalForResource åˆ†åˆ«æŒ‡å®šäº†å¯¹äºè¯·æ±‚å’Œèµ„æºçš„è¶…æ—¶é—´éš”ã€‚è®¸å¤šå¼€å‘äººå‘˜è¯•å›¾ä½¿ç”¨ timeoutInterval å»é™åˆ¶å‘é€è¯·æ±‚çš„æ€»æ—¶é—´ï¼Œä½†å…¶å®å®ƒçœŸæ­£çš„å«ä¹‰æ˜¯ï¼šåˆ†ç»„ï¼ˆpacketï¼‰ä¹‹é—´çš„æ—¶é—´ã€‚å®é™…ä¸Šæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ timeoutIntervalForResource æ¥è§„å®šæ•´ä½“è¶…æ—¶çš„æ€»æ—¶é—´ï¼Œä½†åº”è¯¥åªå°†å…¶ç”¨äºåå°ä¼ è¾“ï¼Œè€Œä¸æ˜¯ç”¨æˆ·å®é™…ä¸Šå¯èƒ½æƒ³è¦å»ç­‰å¾…çš„ä»»ä½•ä¸œè¥¿ã€‚ HTTPMaximumConnectionsPerHost æ˜¯ Foundation æ¡†æ¶ä¸­ URL åŠ è½½ç³»ç»Ÿçš„ä¸€ä¸ªæ–°çš„é…ç½®é€‰é¡¹ã€‚å®ƒæ›¾ç»è¢« NSURLConnection ç”¨äºç®¡ç†ç§æœ‰çš„è¿æ¥æ± ã€‚ç°åœ¨æœ‰äº† NSURLSessionï¼Œå¼€å‘è€…å¯ä»¥åœ¨éœ€è¦æ—¶é™åˆ¶è¿æ¥åˆ°ç‰¹å®šä¸»æœºçš„æ•°é‡ã€‚ HTTPShouldUsePipelining è¿™ä¸ªå±æ€§åœ¨ NSMutableURLRequest ä¸‹ä¹Ÿæœ‰ï¼Œå®ƒå¯ä»¥è¢«ç”¨äºå¼€å¯ HTTP ç®¡çº¿åŒ–ï¼ˆHTTP pipeliningï¼‰ï¼Œè¿™å¯ä»¥æ˜¾ç€é™ä½è¯·æ±‚çš„åŠ è½½æ—¶é—´ï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è¢«æœåŠ¡å™¨å¹¿æ³›æ”¯æŒï¼Œé»˜è®¤æ˜¯ç¦ç”¨çš„ã€‚ sessionSendsLaunchEvents æ˜¯å¦ä¸€ä¸ªæ–°çš„å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å®šè¯¥ session æ˜¯å¦åº”è¯¥ä»åå°å¯åŠ¨ã€‚ connectionProxyDictionary æŒ‡å®šäº† session è¿æ¥ä¸­çš„ä»£ç†æœåŠ¡å™¨ã€‚åŒæ ·åœ°ï¼Œå¤§å¤šæ•°é¢å‘æ¶ˆè´¹è€…çš„åº”ç”¨ç¨‹åºéƒ½ä¸éœ€è¦ä»£ç†ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä¸éœ€è¦é…ç½®è¿™ä¸ªå±æ€§ã€‚ å…³äºè¿æ¥ä»£ç†çš„æ›´å¤šä¿¡æ¯å¯ä»¥åœ¨ CFProxySupport Reference æ‰¾åˆ°ã€‚ Cookie ç­–ç•¥ HTTPCookieStorage å­˜å‚¨äº† session æ‰€ä½¿ç”¨çš„ cookieã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ NSHTTPCookieShorage çš„ +sharedHTTPCookieStorage è¿™ä¸ªå•ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ NSURLConnection æ˜¯ç›¸åŒçš„ã€‚ HTTPCookieAcceptPolicy å†³å®šäº†ä»€ä¹ˆæƒ…å†µä¸‹ session åº”è¯¥æ¥å—ä»æœåŠ¡å™¨å‘å‡ºçš„ cookieã€‚ HTTPShouldSetCookies æŒ‡å®šäº†è¯·æ±‚æ˜¯å¦åº”è¯¥ä½¿ç”¨ session å­˜å‚¨çš„ cookieï¼Œå³ HTTPCookieSorage å±æ€§çš„å€¼ã€‚ å®‰å…¨ç­–ç•¥ URLCredentialStorage å­˜å‚¨äº† session æ‰€ä½¿ç”¨çš„è¯ä¹¦ã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ NSURLCredentialStorage çš„ +sharedCredentialStorage è¿™ä¸ªå•ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ NSURLConnection æ˜¯ç›¸åŒçš„ã€‚ TLSMaximumSupportedProtocol å’Œ TLSMinimumSupportedProtocol ç¡®å®š session æ˜¯å¦æ”¯æŒ SSL åè®®ã€‚ å®‰å…¨ç­–ç•¥ URLCache æ˜¯ session ä½¿ç”¨çš„ç¼“å­˜ã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ NSURLCache çš„ +sharedURLCache è¿™ä¸ªå•ä¾‹å¯¹è±¡ï¼Œè¿™ä¸ NSURLConnection æ˜¯ç›¸åŒçš„ã€‚ requestCachePolicy æŒ‡å®šäº†ä¸€ä¸ªè¯·æ±‚çš„ç¼“å­˜å“åº”åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è¿”å›ã€‚è¿™ç›¸å½“äº NSURLRequest çš„ -cachePolicy æ–¹æ³•ã€‚ è‡ªå®šä¹‰åè®® protocolClasses ç”¨æ¥é…ç½®ç‰¹å®šæŸä¸ª session æ‰€ä½¿ç”¨çš„è‡ªå®šä¹‰åè®®ï¼ˆè¯¥åè®®æ˜¯ NSURLProtocol çš„å­ç±»ï¼‰çš„æ•°ç»„ã€‚ æœ¬æ–‡ä¸ºã€Œç®€ä¹¦-ç™½å¼€æ°´lnã€ä½œè€…åŸåˆ›ï¼›æˆ‘çš„å†™ä½œï¼Œå¸Œæœ›èƒ½ç®€åŒ–åˆ°åˆå­¦è€…å°½å¿«å…¥é—¨å’Œè€å¸æœºç¹çå›é¡¾ ^_^.åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ã€‚ ç»“è®º iOS 7 å’Œ Mac OS X 10.9 Mavericks ä¸­ URL åŠ è½½ç³»ç»Ÿçš„å˜åŒ–ï¼Œæ˜¯å¯¹ NSURLConnection è¿›è¡Œæ·±æ€ç†Ÿè™‘åçš„ä¸€ä¸ªè‡ªç„¶è€Œç„¶çš„è¿›åŒ–ã€‚æ€»ä½“è€Œè¨€ï¼Œè‹¹æœçš„ Foundation æ¡†æ¶å›¢é˜Ÿå¹²äº†ä¸€ä»¶ä»¤äººé’¦ä½©çš„çš„å·¥ä½œï¼Œä»–ä»¬ç ”ç©¶å¹¶é¢„æµ‹äº†ç§»åŠ¨å¼€å‘è€…ç°æœ‰çš„å’Œæ–°å…´çš„ç”¨ä¾‹ï¼Œåˆ›é€ äº†èƒ½å¤Ÿæ»¡è¶³æ—¥å¸¸ä»»åŠ¡è€Œä¸”éå¸¸å¥½ç”¨çš„ API ã€‚ å°½ç®¡åœ¨è¿™ä¸ªä½“ç³»ç»“æ„ä¸­ï¼ŒæŸäº›å†³å®šå¯¹äºå¯ç»„åˆæ€§å’Œå¯æ‰©å±•æ€§è€Œè¨€æ˜¯ä¸€ç§å€’é€€ï¼Œä½†æ˜¯ NSURLSession ä»ç„¶æ˜¯å®ç°æ›´é«˜çº§åˆ«ç½‘ç»œåŠŸèƒ½çš„ä¸€ä¸ªå¼ºå¤§çš„åŸºç¡€æ¡†æ¶ã€‚ ã€åŸæ–‡ã€‘From NSURLConnection to NSURLSessionã€è½¬è½½åŸè‘—ã€‘[@]ObjC ä¸­å›½ ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>è¯‘æ–‡</category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Naruto-Pictures]]></title>
    <url>%2FHexoBlog%2FNaruto-Pictures.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>HexoBlog</category>
      </categories>
      <tags>
        <tag>HexoBlog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo(Pages)â€”åšå®¢æ­å»ºåŒæ­¥GitHub&Coding]]></title>
    <url>%2FHexoBlog%2FHexoPagesSetup.html</url>
    <content type="text"><![CDATA[ç»™è‡ªå·±ä¸€ä¸ªè®°å½• çŸ¥è¯† å’Œ æ—¶é—´ çš„ç©ºé—´ã€‚ å¼•å¯¼ ç»™è‡ªå·±ä¸€ä¸ªè®°å½•çŸ¥è¯†å’Œæ—¶é—´çš„ç©ºé—´ â€“&gt; å¯¹ä½ æœ‰æ–°æ€æƒ³ æˆ–æ˜¯ ä¹ æƒ¯ ï¼ï¼Œæ‹¥æœ‰ä¸€ä¸ªè¿™æ ·çš„ç‹¬ç«‹è€Œè‡ªç”±çš„ç©ºé—´æ˜¯ä¸€ä»¶éå¸¸æœ‰è¶£çš„äº‹æƒ…ã€‚ æ¯ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ï¼ˆï£¿ã€ğŸ“±ï¼‰åœ¨æˆé•¿è¿‡ç¨‹éƒ½æœ‰è®¸å¤šä¸ªäººçš„ä½“ä¼šä¸æ„Ÿæ‚Ÿï¼Œè¿™äº›æ„Ÿæ‚Ÿè®©ä»–èµ°çš„æ›´è¿œï¼Œè€Œé€šå¸¸ä¸ªäººåšå®¢å°±æ˜¯è¿™æ ·ä¸€ä¸ªè®°å½•ä¸ªäººæˆé•¿çš„åœ°æ–¹ã€‚Taï¼Œç»™äº†ä½ åˆ†äº«æˆé•¿çš„æœºä¼šï¼› ç›®å½•ï¼š ä¸ªäººåšå®¢æ­å»ºæ–¹æ¡ˆ åˆ›å»º GitHub ä»“åº“ æœ¬åœ°ç¯å¢ƒçš„å‡†å¤‡å·¥ä½œ é…ç½®æœ¬åœ°å’ŒGithubçš„sshä¼ è¾“è¿æ¥ é…ç½®æœ¬åœ°å’ŒCodingçš„sshä¼ è¾“è¿æ¥ Hexoçš„ä¸Šçº¿éƒ¨ç½² Next ä¸»é¢˜å®‰è£… Next ä¸»é¢˜åšå®¢çš„ç«™ç‚¹é…ç½® Next ä¸»é¢˜åšå®¢çš„ä¸»é¢˜é…ç½® åˆ›å»ºåˆ†ç±»ç•Œé¢ åˆ›å»ºæ ‡ç­¾ç•Œé¢ å†™åšå®¢ä¸å‘å¸ƒ å¤šç»ˆç«¯ç¼–è¾‘hexoåšå®¢(å¤šå°ç”µè„‘) Hexoå¸¸ç”¨å‘½ä»¤ç¬”è®° åŸŸåé…ç½® Hexoåšå®¢æ­å»ºè¢«å‘è›‹ç–¼çš„æŠ¥é”™è§£å†³é›†åˆ ä¼˜åŒ–åšå®¢è®¾ç½®ã€ŒæŒç»­æ›´æ–°ã€ ä¸ªäººåšå®¢æ­å»ºæ–¹æ¡ˆ ç¬”è€…é€‰æ‹©çš„æ˜¯GitHubPages + Hexo + Nextï¼Œä¸€ç§ç®€å•é«˜æ•ˆçš„å®ç°æ–¹å¼ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–çš„å®ç°æ–¹å¼ï¼Œå¦‚ï¼šWordPressã€GitHubPages + Jekyll ç­‰ã€‚ è·Ÿç€æˆ‘åšï¼Œå¾ˆç®€å•å‡ åˆ†é’Ÿä½ å³å¯æ‹¥æœ‰è‡ªå·±çš„ä¸ªäººåšå®¢ï¼ˆHello World ç‰ˆï¼‰ã€‚è¯•è¯•å§ï¼ 1.åˆ›å»º GitHub ä»“åº“ é¦–å…ˆä½ éœ€è¦æ‹¥æœ‰ä¸€ä¸ªGitHubè´¦å·ï¼Œæ³¨å†Œæˆ–è€…ç™»å½• GitHub åˆ›å»ºä»“åº“ï¼š å¡«å†™ä»“åº“åç§°ï¼šæ³¨æ„ç‚¹ï¼š Respository name ä¸­ä¸€å®šè¦è¾“å…¥ï¼šä½ çš„ç”¨æˆ·å.github.ioã€‚ï¼ˆç”¨æˆ·åå³ä»“åº“åä¸‹é¢ä¼šç”¨åˆ°ï¼‰å…¶ä»–åœ°æ–¹ä¸ç”¨ä¿®æ”¹ï¼Œç„¶åç›´æ¥ç‚¹ Create repositoryâ€œæŒ‰é’®å®Œæˆåˆ›å»ºå³å¯ã€‚ 2. æœ¬åœ°ç¯å¢ƒçš„å‡†å¤‡å·¥ä½œ ä¸»è¦ä»¥Macæ“ä½œè¿›è¡Œè®²è§£ï¼› Gitå®‰è£… Gitå·²å¸®å¤§å®¶ä¸‹è½½å¥½äº†ï¼Œåªéœ€å»ç™¾åº¦äº‘ä¸‹è½½ä¸€ä»½å®‰è£…å³å¯ï¼Œä¹Ÿå¯å»Gitå®˜ç½‘ä¸‹è½½ï¼› å®‰è£…ï¼šç›´æ¥åŒå‡» dmg æ–‡ä»¶å®‰è£…å³å¯ã€‚ Nodejså®‰è£… ä¸¤ç§æ–¹å¼ï¼šå…¶ä¸€å»ç™¾åº¦äº‘ä¸‹è½½ä¸€ä»½ç›´æ¥å®‰è£…ï¼›å…¶äºŒå»Nodejså®˜ç½‘ä¸‹è½½ã€‚ è¯´æ˜ï¼šNodejsä¹Ÿå¯ä½¿ç”¨Nodejsç‰ˆæœ¬ç®¡ç†å™¨nvmå®‰è£…ï¼Œè€ƒè™‘å…¶å®‰è£…è¿‡ç¨‹ä¸­å­˜åœ¨çš„é—®é¢˜è¾ƒå¤šï¼Œæ“ä½œæµç¨‹ä¹Ÿå¤šï¼Œç¬”è€…ä¸æ¨èå¤§å®¶ä½¿ç”¨è¿™ç§æ–¹å¼å®‰è£…ã€‚ Hexo å®‰è£…Hexo æ˜¯æ­å»ºçš„ä¸»è§’ï¼Œå…ˆæ‰“å¼€ Hexo å®˜ç½‘ã€‚ æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥Hexoçš„å®‰è£…å‘½ä»¤ï¼š 1npm install hexo-cli -g è‹¥æ­¤å‘½ä»¤å®‰è£…ä¸æˆåŠŸæ—¶ï¼Œå‡ºç°é”™è¯¯è§£å†³æ–¹æ³•ï¼šå¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å’Œå¼€æœºå¯†ç ç»§ç»­å®Œæˆå®‰è£…ï¼š 1sudo npm install --unsafe-perm --verbose -g hero æœ¬åœ°åšå®¢ä»“åº“ åœ¨ä½ æœ¬åœ°åˆ›å»ºä¸ªä½ å¸Œæœ›å­˜å‚¨åšå®¢æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œå®šä½åˆ°å­˜å‚¨åšå®¢çš„ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š æ‰§è¡ŒHexoå‘½ä»¤ï¼Œåˆå§‹åŒ–æœ¬åœ°åšå®¢ä»“åº“ï¼š hexo init ä½ çš„ç”¨æˆ·å.github.io // å°½é‡å’Œåœ¨ä¸Šé¢åˆ›å»ºçš„Githubä»“åº“ä½¿ç”¨åŒä¸€ä¸ªåç§°ï¼ˆæˆ‘åœ¨è¿™å°±å‘äº†ä¸€æ¬¡ï¼Œå»ºè®®ä½¿ç”¨åŒä¸€ä¸ªåç§°ï¼‰ åšå®¢æ•ˆæœé¢„è§ˆ ä¸Šè¿°æ­¥éª¤å®Œæˆåï¼ŒåŸºæœ¬çš„åšå®¢æ¡†æ¶å°±å·²ç»æ­å»ºå®Œäº†ï¼ŒHexoå®‰è£…å®Œæˆåé»˜è®¤ä½¿ç”¨ landscape ä¸»é¢˜ï¼› åœ¨ç»ˆç«¯å®šä½åˆ° cd xxx.github.io æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±èƒ½å¯åŠ¨æœåŠ¡é¢„è§ˆåŠŸèƒ½ï¼›1hexo s --debug # å¯åŠ¨æœåŠ¡é¢„è§ˆ åœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ç½‘å€ï¼šhttp://localhost:4000/ï¼Œå°±èƒ½é¢„è§ˆåˆ°landscape ä¸»é¢˜ä¸‹çš„åšå®¢æ•ˆæœï¼Œå…·ä½“å¦‚å›¾ï¼š æ¥ç€æ¥. . . 3. é…ç½®æœ¬åœ°å’ŒGithubçš„sshä¼ è¾“è¿æ¥ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ£€æŸ¥ä½ ç”µè„‘ä¸Šç°æœ‰çš„ssh keyï¼š 1234cd ~/. ssh æ£€æŸ¥æœ¬æœºçš„sshå¯†é’¥å¦‚æœæç¤ºï¼šNo such file or directory è¯´æ˜ä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨gitã€‚ ç”Ÿæˆæ–°çš„SSH Keyï¼šæ‰“å¼€ç»ˆç«¯è¾“å…¥ ssh-keygen -t rsa -b 4096 -C &quot;ä½ æ³¨å†ŒGithubæ—¶çš„é‚®ç®±&quot; ï¼Œå›è½¦ä¹‹åç³»ç»Ÿæ˜¾ç¤º Enter file in which to save the key(/xxx/.ssh/id_rsa): æˆ‘ä»¬è®°ä½ï¼ˆï¼‰ä¸­çš„åœ°å€æ˜¯ä¿å­˜ç§é’¥ä¿å­˜åœ°å€åŠæ–‡ä»¶ï¼Œä¹‹åç»§ç»­ä¸€è·¯å›è½¦åˆ°ç»“æŸã€‚ æ³¨æ„ï¼šè¾“å…¥å¯†ç çš„æ—¶å€™æ²¡æœ‰*å­—æ ·çš„ï¼Œä½ ç›´æ¥è¾“å…¥å°±å¯ä»¥äº†ã€‚æœ€åçœ‹åˆ°è¿™æ ·çš„ç•Œé¢ï¼Œå°±æˆåŠŸè®¾ç½®ssh keyäº†ï¼š ç„¶å sudo cat /Users/your_user_directory/id_rsa.pub ï¼Œ(æç¤ºæŠŠä¸­é—´çš„ Users/your_user_directory/id_rsaæ›¿æ¢æˆä½ ä¸Šä¸€æ­¥ç”Ÿæˆçš„åœ°å€) ï¼Œå›è½¦åæŠŠç»ˆç«¯ä¸Šæ˜¾ç¤ºçš„ä¸€å¤§æ®µå°±æ˜¯ SSH Key ç»“æœå¤åˆ¶ä¸‹æ¥ã€‚ ç™»é™†githubï¼Œåœ¨ä¸‹æ‹‰èœå•ä¸­ç‚¹å‡»Settingsï¼Œåœ¨å·¦ä¾§æ ä¸­ç‚¹å‡»SSH and GPG keysï¼Œå†ç‚¹å‡»å³ä¾§çš„New SSH keyæŒ‰é”®ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹å›¾æƒ…å†µï¼ŒTitleç»™è¿™ä¸ªkeyèµ·ä¸ªåˆ«åï¼Œåœ¨Keyä¸­ï¼Œç²˜è´´è¿›å»æˆ‘ä»¬ä¹‹å‰ä¸€æ­¥ä»ç»ˆç«¯ä¿å­˜ä¸‹æ¥çš„é‚£ä¸€å¤§æ®µå¯†é’¥ã€‚ä¹‹åç‚¹å‡»ä¸‹æ–¹Add SSH key ç°åœ¨æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æœ¬åœ°å’Œgithubçš„sshé…ç½®æ˜¯å¦æ­£ç¡®ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥ ssh -T git@github.comï¼Œè¾“å…¥å¯†ç åï¼Œå¦‚æœä½ çœ‹åˆ°äº†ä¸€å¥æç¤ºä¿¡æ¯: Hi (ä½ çš„æ³¨å†Œç”¨æˆ·å)! You&#39;ve successfully authenticated, but GitHub does not provide shell access.é‚£ä¹ˆè¯´æ˜å·²ç»é…ç½®å¥½äº†githubè¿œç¨‹ä»“åº“ä¸æœ¬åœ°ã€‚ 4.é…ç½®æœ¬åœ°å’ŒCodingçš„sshä¼ è¾“è¿æ¥ ç™»å½• Coding å®˜ç½‘ï¼Œæ³¨å†Œè´¦å·ç™»å½•ï¼Œç‚¹å‡»æ·»åŠ é¡¹ç›®ï¼Œã€é¡¹ç›®åç§°å¡«å†™ï¼šè‡ªå·±è®¾è®¡çš„åç§°.coding.meã€‚(ps:è¿™å°±æ˜¯æˆ‘ä»¬Githubä¸Šä¸ªäººåšå®¢çš„äºŒçº§åŸŸåï¼Œéœ€è¦æŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œåé¢éœ€è¦ç”¨)ï¼Œé€‰æ‹©*ç§æœ‰æˆ–è€…å…¬å¼€ï¼Œç‚¹å‡»åº•éƒ¨çš„åˆ›å»ºé¡¹ç›®ã€‚ ç„¶å sudo cat /Users/your_user_directory/id_rsa.pub ï¼Œ(æç¤ºæŠŠä¸­é—´çš„ Users/your_user_directory/id_rsaæ›¿æ¢æˆä½ ä¸Šä¸€æ­¥ç”Ÿæˆçš„åœ°å€) ï¼Œå›è½¦åæŠŠç»ˆç«¯ä¸Šæ˜¾ç¤ºçš„ä¸€å¤§æ®µå°±æ˜¯ SSH Key ç»“æœå¤åˆ¶ä¸‹æ¥ã€‚ ç‚¹å‡»å³ä¸Šè§’ç”¨æˆ·å¤´åƒï¼Œç‚¹å‡»å·¦è¾¹æ çš„è´¦æˆ·â€“&gt;SSH å…¬é’¥ï¼ŒæŠŠä¸Šæ­¥çš„ SSH Key ç²˜ä¸Šã€‚ï¼ˆæç¤ºå¯ä»¥çœ‹åˆ°ssh keyæœ€åçš„é‚®ç®±ï¼Œæ­¤æ—¶GitHubå’ŒCodingæ˜¯åŒä¸€ä¸ªæ³¨å†Œé‚®ç®±ï¼‰ï¼Œç‚¹å‡»æ°¸ä¹…æœ‰æ•ˆï¼Œç‚¹å‡»æ·»åŠ é¡¹ç›®ã€‚ è¡¥å……ï¼šå¤šä¸ªSSHç§é’¥é…ç½®ç»éªŒ è®¾ç½®å¤šä¸ªç§é’¥å¦‚æœä½ çš„Coding å’Œ Githubçš„æ³¨å†Œé‚®ç®±ä¸èƒ½æ»¡è¶³ä¸€æ ·ï¼Œæˆ–è€…è¯´ä»–ä»¬æœ‰å„è‡ªçš„sshç§é’¥ã€‚æˆ‘ä»¬é€šè¿‡é…ç½®sshè¿æ¥æ—¶å€™ï¼Œæ›´æ¢ä¸åŒç§é’¥æ–‡ä»¶åç§°æ¥åˆ†åˆ«å­˜å‚¨ã€‚ ï¼ˆps:å¦‚æœä½ Githubå·²ç»æœ¬åœ°ç”Ÿæˆäº†ç§é’¥ï¼Œè¿™å—å¯ä»¥ä¸åšï¼Œä½†æ˜¯codingéƒ¨åˆ†çš„ç§é’¥æ–‡ä»¶åè¦åŒºåˆ†ä½ ä¹‹å‰çš„ç§é’¥æ–‡ä»¶åï¼‰ç»ˆç«¯è¾“å…¥$ ssh-keygen -t rsa -b 4096 -C â€œä½ æ³¨å†ŒGithubæ—¶çš„é‚®ç®±â€ï¼Œç»ˆç«¯æ˜¾ç¤ºEnter file in which to save the key(/xxx/.ssh/id_rsa):id_rsa_githubè¿™é‡Œä»£è¡¨ç€ï¼Œä½ çš„githubè¿œç¨‹ä»“åº“ç»‘å®šçš„æ˜¯è¿™ä¸ªé‚®ç®±ï¼Œç§é’¥åç§°ä¸º*id_rsa_githubä¹‹åç»§ç»­è¿ç»­å›è½¦åˆ°ç»“æŸã€‚ å»ºç«‹Codingçš„sshç§é’¥ç»ˆç«¯è¾“å…¥$ ssh-keygen -t rsa -b 4096 -C â€œä½ æ³¨å†ŒCodingæ—¶çš„é‚®ç®±â€ï¼Œç»ˆç«¯æ˜¾ç¤ºEnter file in which to save the key(/xxx/.ssh/id_rsa):id_rsa_codingè¿™é‡Œä»£è¡¨ç€ï¼Œä½ çš„codingè¿œç¨‹ä»“åº“ç»‘å®šçš„æ˜¯è¿™ä¸ªé‚®ç®±ï¼Œç§é’¥åç§°ä¸ºid_rsa_codingä¹‹åç»§ç»­è¿ç»­å›è½¦åˆ°ç»“æŸ åœ¨æœ¬åœ°ä¿å­˜sshç§é’¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•æ–°å»ºä¸€ä¸ªconfigé…ç½®æ–‡æ¡£ï¼Œä»¥æˆ‘çš„ä¸ºä¾‹ç»ˆç«¯è¾“å…¥$ vim ~/.ssh/configï¼Œé‡Œé¢å¡«å†™å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­IdentityFileæ˜¯ä½ è‡ªå·±å­˜æ”¾sshç§é’¥çš„æ–‡ä»¶åå’Œæ–‡ä»¶è·¯å¾„ï¼Œåˆ‡è®°ã€‚ 1Host github.com HostName github.com User git IdentityFile /home/redredleaf/.ssh/id_rsa_githubHost coding.net HostName coding.net User git IdentityFile /home/redredleaf/.ssh/id_rsa_coding ä¸Šé¢ä¸¤æ­¥æ“ä½œå®Œåï¼Œæˆ‘ä»¬çš„ç§é’¥æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»“æ„æ˜¯ï¼š æ³¨æ„æƒé™å¦‚æœä½ åœ¨$ ssh-keygen -t rsa -b 4096 -C â€œä½ æ³¨å†ŒGithubæ—¶çš„é‚®ç®±â€ï¼Œè¿™æ­¥çš„æ—¶å€™ç”¨äº†sudoï¼Œæˆ–è€…åœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œçš„ï¼Œé‚£ä¹ˆä½ åç»­çš„sshè¿æ¥å’Œhexoæœ¬åœ°æäº¤åˆ°è¿œç¨‹ä»“åº“çš„å‘½ä»¤éƒ½å¿…é¡»éƒ½æ˜¯åœ¨rootæƒé™ä¸‹æ‰§è¡Œï¼Œå¦åˆ™ä¼šå‡ºç°Permission denied (publickey)çš„æƒ…å†µã€‚ 5.Hexoçš„ä¸Šçº¿éƒ¨ç½² ç™»é™†codingåï¼Œç‚¹å‡»å·¦ä¾§æ çš„é¡¹ç›®â€“&gt;ç‚¹å‡»å»ºç«‹çš„é¡¹ç›®â€“&gt;ç‚¹å‡»å·¦ä¾§æ çš„ä»£ç  ï¼Œä¹‹åé¡µé¢ä¸­å°±èƒ½æ‰¾åˆ°sshçš„è¿æ¥äº† ç™»é™†githubåï¼Œç‚¹å‡»å³ä¸Šè§’è‡ªå·±çš„å¤´åƒâ€“&gt;ç‚¹å‡»Your profileâ€“&gt;ç‚¹å‡»ä½ çš„åšå®¢è¿œç¨‹ä»“åº“ï¼Œé¡µé¢ä¸­å°±èƒ½æ‰¾åˆ°sshçš„è¿æ¥äº† æ‰“å¼€ã€ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.ymlã€‘ 123456789# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: coding: ä½ çš„codingè¿œç¨‹ä»“åº“sshè¿æ¥åœ°å€ github: ä½ çš„githubè¿œç¨‹ä»“åº“sshè¿æ¥åœ°å€ branch: master è®°å¾— cmd+sï¼Œä¿å­˜ ç„¶åæ‰§è¡Œ hexo clean &amp;&amp; hexo g &amp;&amp; hexo dï¼Œå†ç„¶åè¾“å…¥ ä½ çš„åšå®¢é¡¹ç›®åç§°.github.ioï¼Œå½“æˆåŠŸçœ‹åˆ°Hexoçš„hello worldçš„é¡µé¢ï¼Œè¿™ä»£è¡¨ä½ çš„Githubä¸Codingé…ç½®Hexoç«™ç‚¹æˆåŠŸå•¦å•¦ã€‚ 6. Next ä¸»é¢˜å®‰è£… Nextä¸»é¢˜æ˜¯ iissnan æ‰€åˆ›ä½œçš„ä¸€ä¸ªHexoä¸»é¢˜ï¼Œä»¥ç®€æ´ä¸ºä¸»ï¼› å®‰è£…ï¼šåœ¨ç»ˆç«¯å®šä½åˆ°xxx.github.ioç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤åï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œä¸»é¢˜å°±ä¸‹è½½åˆ°å¯¹åº”çš„ä½ç½®ï¼›12cd xxx.github.iogit clone https://github.com/iissnan/hexo-theme-next themes/next 7.Next ä¸»é¢˜åšå®¢çš„ç«™ç‚¹é…ç½® é¦–å…ˆï¼Œå¤åˆ¶ä¸€ä»½æ‰“å¼€æœ¬åœ°åšå®¢ç›®å½•ä¸‹çš„ _config.yml æ–‡ä»¶ï¼Œåšä¸ºå¤‡ä»½ï¼Œä»¥é˜²æ”¹é”™ ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼šæ‰“å¼€ä¹‹å‰çš„xxx.github.ioæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ° _config.yml å³ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œé€‰ä¸­è¯¥æ–‡ä»¶-&gt;å³å‡»-&gt;æ‰“å¼€æ–¹å¼-&gt;æ–‡æœ¬ç¼–è¾‘ï¼ˆä¹Ÿå¯ä»¥é€‰æ‹©Sublimeæ‰“å¼€ï¼‰ï¼Œæ‰“å¼€åå°±å¯ä»¥ä¿®æ”¹åŸºæœ¬çš„åšå®¢é…ç½®äº†ï¼›ï¼ˆæ³¨æ„ä¸€ä¸‹ï¼šåœ¨é…ç½®æ–‡ä»¶é‡Œâ€˜#â€™å°±æ˜¯æ³¨é‡Šç¬¦ï¼Œç›¸å½“äºCè¯­è¨€ä¸­çš„â€˜//â€™ï¼‰ æ³¨æ„ï¼šè¯¥é…ç½®æ–‡ä»¶ä¸­çš„é”®å€¼ä¹‹é—´ä¸€å®šè¦åŠ ç©ºæ ¼ã€‚ å…³äº Hexo é…ç½®çš„è¯¦ç»†ä¿¡æ¯è¯·å‰å¾€ Hexoçš„å®˜æ–¹æ–‡æ¡£(ç®€ä½“ä¸­æ–‡)ã€‚ ç«™ç‚¹é…ç½®æ–‡ä»¶è¯¦ç»†é…ç½®ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980# Hexo Configuration## Docs: https://hexo.io/docs/configuration.html## Source: https://github.com/hexojs/hexo/# Site title: xxx # åšå®¢çš„åå­—ï¼Œä¹Ÿç§°ç«™ç‚¹åç§°subtitle: xxx # å‰¯æ ‡é¢˜description: xxx # å¯¹ç«™ç‚¹çš„æè¿°ï¼Œæœç´¢å¼•æ“ä¼šæŠ“å–ï¼Œå¯ä»¥è‡ªå®šä¹‰author: xxx # ä½œè€…åå­—language: zh-Hans # è¯­è¨€ ç®€ä½“ä¸­æ–‡timezone: # ç”¨é»˜è®¤çš„å³å¯# URL # è¿™é¡¹æš‚æ—¶ä¸éœ€è¦é…ç½®ï¼Œç»‘å®šåŸŸååï¼Œè¦åˆ›å»º sitemap.xml æ—¶å†é…ç½®è¯¥é¡¹## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'url: http://yoursite.comroot: /permalink: :year/:month/:day/:title/permalink_defaults:# Directory # ç›®å½•ï¼Œä¸è¦ä¿®æ”¹source_dir: sourcepublic_dir: publictag_dir: tagsarchive_dir: archivescategory_dir: categoriescode_dir: downloads/codei18n_dir: :langskip_render:# Writing # æ–‡ç« å¸ƒå±€ã€å†™ä½œæ ¼å¼çš„å®šä¹‰ï¼Œä¸ä¿®æ”¹new_post_name: :title.md # File name of new postsdefault_layout: posttitlecase: false # Transform title into titlecaseexternal_link: true # Open external links in new tabfilename_case: 0render_drafts: falsepost_asset_folder: falserelative_link: falsefuture: truehighlight: enable: true line_number: true auto_detect: false tab_replace:# Category &amp; Tagdefault_category: uncategorizedcategory_map:tag_map:# Date / Time format # æ—¥æœŸ / æ—¶é—´ æ ¼å¼ï¼Œä¸è¦ä¿®æ”¹## Hexo uses Moment.js to parse and display date## You can customize the date format as defined in## http://momentjs.com/docs/#/displaying/format/date_format: MMM D YYYYtime_format: H:mm:ss# Pagination # æ¯é¡µæ˜¾ç¤ºæ–‡ç« æ•°ï¼Œå¯ä»¥è‡ªå®šä¹‰## Set per_page to 0 to disable paginationper_page: 10pagination_dir: page# Extensions # é…ç½®ç«™ç‚¹æ‰€ç”¨ä¸»é¢˜å’Œæ’ä»¶ï¼Œè¿™é‡Œå°†é»˜è®¤ä¸»é¢˜æ³¨é‡Šï¼Œä¿®æ”¹ä¸º next## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: next#theme: landscape# Deployment# æœ¬åœ°åšå®¢éƒ¨ç½²åˆ° github ä¸Šè¦é…ç½®è¿™é‡Œ## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git #gitæäº¤ repo: https://github.com/CustomPBWaters/CustomPBWaters.github.io.git # å·²åˆ›å»ºçš„Githubä»“åº“ promptï¼šé…ç½®å¥½ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œå°±å¯ä»¥é¢„è§ˆä¸€ä¸‹åšå®¢çš„æ•ˆæœäº†ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼šåœ¨ç»ˆç«¯å®šä½åˆ° xxx.github.io æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶åœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å°±èƒ½å¯åŠ¨æœåŠ¡é¢„è§ˆåŠŸèƒ½ï¼›1hexo s --debug # å¯åŠ¨æœåŠ¡é¢„è§ˆ å¯åŠ¨æˆåŠŸå¯ä»¥çœ‹åˆ°æç¤ºï¼ŒæŒ‰ç…§æç¤ºç”¨æµè§ˆå™¨æ‰“å¼€æç¤ºç½‘å€ï¼Œå³å¯çœ‹åˆ°ä½ çš„æœ¬åœ°åšå®¢äº†ï¼Œé‡Œé¢æœ‰ä¸€ç¯‡ Hello World çœ‹å®Œæ•ˆæœä¹‹åç»§ç»­å­¦ä¹ ä¸‹é¢çš„å†…å®¹â€¦ 8.åšå®¢çš„ Next ä¸»é¢˜é…ç½® ä¸»é¢˜é…ç½®æ–‡ä»¶åœ¨ï¼šxxx.github.io/themes/next/_config.yml ç›®å½•ä¸‹ï¼Œè€è§„çŸ©ï¼Œå…ˆå¤‡ä»½ä¸€ä»½ ä»¥é˜²æ”¹é”™ï¼Œå½“ç„¶ï¼Œæœ€æƒå¨çš„æ˜¯çœ‹ å®˜æ–¹ çš„è¯´æ˜æ–‡æ¡£ï¼Œæˆ‘åœ¨è¿™é‡Œæä¾›ä¸€ä¸ªç¤ºä¾‹ï¼Œä¾›å¤§å®¶å‚è€ƒï¼› æ¸©é¦¨æç¤ºï¼šä½ å¯ä»¥åœ¨/next/_config.ymlï¼Œå¤åˆ¶ä¸‹é¢çš„é”®ï¼Œå›è½¦æ‰¾åˆ°å¯¹åº”çš„å€¼ä¿®æ”¹ï¼Œâ€”&gt;æ–¹ä¾¿ å¿«æ·ï¼›æ²¡ä¿®æ”¹å®Œä¸€ä¸ªä¹‹åä½ éƒ½å¯ä»¥é¢„è§ˆğŸ‘€ä¸€ä¸‹æ•ˆæœçš„hexo s â€“debug å…³äºä¸»é¢˜éœ€é…ç½®çš„é€‰é¡¹ç•¥å¤šï¼Œæ•…é‡‡å–åˆ†æ¡è®²è§£çš„å½¢å¼ï¼Œå…·ä½“å¦‚ä¸‹ï¼š 1.è®¾ç½®å¤´åƒ 123# å¤´åƒ æ³¨æ„ï¼šåœ¨ç«™ç‚¹ä¸‹çš„ :/next/source/imagesï¼Œavatar: /images/avatar.jpg # ä¿®æ”¹å¤´åƒ 2. è®¾ç½®å…³é”®å­— 12# Set default keywords (Use a comma to separate)keywords: â€œiOS, ç™½å¼€æ°´, ç¨‹åºå‘˜â€ # ä¿®æ”¹å…³é”®å­— 3. è®¾ç½®åšå®¢çš„å¼€å§‹æ—¶é—´ 12# Specify the date when the site was setup#since: 2016 # è®¾ç½®åšå®¢çš„å¼€å§‹æ—¶é—´ 4. èœå•æ çš„è®¾ç½® 1234567891011121314# ------------------------------------------------ ---------------# Menu Settings# èœå•æ çš„è®¾ç½®# ---------------------------------------------------------------# When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)menu: home: / # åœ¨èœå•ä¸Šæ˜¾ç¤ºé¦–é¡µ archives: /archives # åœ¨èœå•æ˜¾ç¤ºå…¨éƒ¨(å½’æ¡£) categories: /categories # åœ¨èœå•ä¸Šæ˜¾ç¤ºåˆ†ç±» tags: /tags # åœ¨èœå•ä¸Šæ˜¾ç¤ºæ ‡ç­¾ #search: /search # æœç´¢ about: /about # åœ¨èœå•ä¸Šæ˜¾ç¤ºå…³äº #sitemap: /sitemap.xml #commonweal: /404.html 5. èœå•æ çš„å›¾æ ‡è®¾ç½®ï¼šå¯ä» Font Awesome ï¼ˆç®€ä½“ä¸­æ–‡ï¼‰ç½‘ç«™æŸ¥è¯¢å›¾æ ‡å¯¹åº”çš„åç§°å¡«å…¥åˆ°å¯¹åº”çš„èœå•é¡¹å³å¯ 1234567891011121314# èœå•æ çš„å›¾æ ‡è®¾ç½®,è§„åˆ™ä¸ºï¼šèœå•ï¼ˆå·¦ï¼‰ï¼šå›¾æ ‡åï¼ˆå³ï¼‰menu_icons: enable: true home: home # é¦–é¡µ archives: archive # å…¨éƒ¨(å½’æ¡£) categories: th # åˆ†ç±» tags: tags # æ ‡ç­¾ #search: search # æœç´¢ about: user # å…³äº # schedule: calendar # æ—¶é—´è¡¨ # sitemap: sitemap # ç½‘ç«™åœ°å›¾ # commonweal: heartbeat # å…¬ç›Š # KeyMapsToMenuItemKey: NameOfTheIconFromFontAwesome # é”®æ˜ å°„åˆ°èœå•é¡¹é”® 6. è®¾ç½®åšå®¢çš„å¤–è§‚ 1234# Schemes#scheme: Muse #é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½scheme: Mist #Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚#scheme: Pisces #åŒæ  Scheme 7. è®¾ç½®ç¤¾äº¤é“¾æ¥ï¼ˆè®¾ç½®äº†Githubã€å¾®åšï¼‰ 123456789# Social Links# Key is the link label showing to end users.# Value is the target link (E.g. GitHub: https://github.com/iissnan)# è®¾ç½®ç¤¾äº¤é“¾æ¥ï¼ˆå¦‚:Githubã€å¾®åšï¼‰,è¿™é‡Œä¸‹é¢ä¸€å®šè¦ç©ºä¸¤æ ¼social: # LinkLabel: Link GitHub: https://github.com/CustomPBWaters Weibo: http://weibo.com/JacklinIOS/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo # JianShu: 12345678910# Social Links Icons# è®¾ç½®ç¤¾äº¤é“¾æ¥å¯¹åº”çš„å›¾æ ‡social_icons: enable: true # Icon Mappings. # KeyMapsToSocalItemKey: NameOfTheIconFromFontAwesome GitHub: github Twitter: twitter Weibo: weibo #JianShu: heartbeat 1234567# Blogrolls # è®¾ç½®å‹æƒ…é“¾æ¥links_title: Links#links_layout: block#links_layout: inlinelinks: #Title: http://example.com/ ç™½å¼€æ°´ç®€ä¹¦: http://www.jianshu.com/users/fd745d76c816/latest_articles 8. è®¾ç½®ä¾§æ çš„æ–¹å‘ï¼ˆè®¾ç½®æˆå·¦ä¾§ï¼‰ 12345# è®¾ç½®ä¾§æ çš„æ–¹å‘ï¼ˆè®¾ç½®æˆå·¦ä¾§ï¼‰sidebar: # Sidebar Position, available value: left | right position: left #position: right 9. è®¾ç½®åšå®¢ä¸­ä»£ç é«˜äº®æ˜¾ç¤º 123456# Code Highlight theme# Available value:# normal | night | night eighties | night blue | night bright# https://github.com/chriskempson/tomorrow-theme# ä»£ç é«˜äº®ä¸»é¢˜highlight_theme: normal 10. è®¾ç½®å¾®ä¿¡æ”¯ä»˜å®èµèµåŠŸèƒ½ 1234567# æ‰“èµé…ç½®# æ‰“èµè¯´æ˜æ–‡æœ¬reward_comment: åšæŒåŸåˆ›æŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼# å¾®ä¿¡æ”¶æ¬¾äºŒç»´ç wechatpay: /uploads/money/wechat-reward-image.jpg# æ”¯ä»˜å®æ”¶æ¬¾äºŒç»´ç alipay: /uploads/money/alipay-reward-image.jpg 9. è®¾ç½®å¾®ä¿¡å…¬ä¼—å·è®¢é˜… 12345# è®¾ç½®å¾®ä¿¡å…¬ä¼—å·è®¢é˜…#wechat_subscriber: enabled: true qcode: /uploads/money/alipay-reward-image.jpg description: æ¬¢è¿æ‚¨æ‰«ä¸€æ‰«ä¸Šé¢çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè®¢é˜…æˆ‘çš„åšå®¢ï¼ 10. æ·»åŠ ç½‘é¡µè®¡æ•°å™¨-ä¸è’œå­ 123456789101112131415161718# æ·»åŠ ç½‘é¡µè®¡æ•°å™¨-ä¸è’œå­# Show PV/UV of the website/page with busuanzi.# Get more information on http://ibruce.info/2015/04/04/busuanzi/busuanzi_count:# count values only if the other configs are false enable: true# custom uv span for the whole site site_uv: true site_uv_header: &lt;i class="fa fa-user"&gt;&lt;/i&gt; # æœ¬ç«™æ€»è®¿é—®æ•° site_uv_footer: äºº# custom pv span for the whole site site_pv: true site_pv_header: &lt;i class="fa fa-eye"&gt;&lt;/i&gt; # æœ¬ç«™æ€»è®¿é—®é‡ site_pv_footer: æ¬¡# custom pv span for one page only page_pv: true page_pv_header: &lt;i class="fa fa-eye"&gt;&lt;/i&gt; # æœ¬æ–‡é˜…è¯»é‡ page_pv_footer: æ¬¡ 11. è®¾ç½®æ˜¯å¦æ˜¾ç¤ºé˜…è¯»å…¨æ–‡1234# Automatically Excerpt. Not recommend.# Please use &lt;!-- more --&gt; in the post to control excerpt accurately.auto_excerpt: enable: true # è®¾ç½®æ˜¯å¦æ˜¾ç¤ºé˜…è¯»å…¨æ–‡ï¼Œæ–‡ç« è¾ƒå¤šçš„è¯ï¼Œæœ‰å¿…è¦è®¾ç½®ä¸º true length: 200 13. è®¾ç½®ç½‘ç«™logoé€šè¿‡ç½‘ç«™faviconåœ¨çº¿åˆ¶ä½œ åˆ¶ä½œfaviconå›¾ç‰‡ï¼Œlogoæœ€å¥½è®¾ç½®32*32ã€‚nextä¸»é¢˜ï¼šå°†å›¾ç‰‡æ”¾åœ¨nextä¸»é¢˜source/imagesç›®å½•ä¸‹12# åœ¨nextä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼šfavicon: /uploads/images/favicon.png 13. ç«™ç‚¹å¤´åƒæ”¹æˆåœ†å½¢åœ¨themes/next/source/css/_common/components/sidebar/sidebar-author.styl ä¸­.site-author-imageå®šä¹‰ä¸­å¢åŠ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; /* å¤´åƒåœ†å½¢ */ border-radius: 80px; -webkit-border-radius: 80px; -moz-border-radius: 80px; box-shadow: inset 0 -1px 0 #333sf; /* è®¾ç½®å¾ªç¯åŠ¨ç”» [animation: (play)åŠ¨ç”»åç§° (2s)åŠ¨ç”»æ’­æ”¾æ—¶é•¿å•ä½ç§’æˆ–å¾®ç§’ (ase-out)åŠ¨ç”»æ’­æ”¾çš„é€Ÿåº¦æ›²çº¿ä¸ºä»¥ä½é€Ÿç»“æŸ (1s)ç­‰å¾…1ç§’ç„¶åå¼€å§‹åŠ¨ç”» (1)åŠ¨ç”»æ’­æ”¾æ¬¡æ•°(infiniteä¸ºå¾ªç¯æ’­æ”¾) ]*/ -webkit-animation: play 2s ease-out 1s 1; -moz-animation: play 2s ease-out 1s 1; animation: play 2s ease-out 1s 1; /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transition: -webkit-transform 1.5s ease-out; -moz-transition: -moz-transform 1.5s ease-out; transition: transform 1.5s ease-out;&#125;img:hover &#123; /* é¼ æ ‡ç»è¿‡åœæ­¢å¤´åƒæ—‹è½¬ -webkit-animation-play-state:paused; animation-play-state:paused;*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transform: rotateZ(360deg); -moz-transform: rotateZ(360deg); transform: rotateZ(360deg);&#125;/* Z è½´æ—‹è½¬åŠ¨ç”» */@-webkit-keyframes play &#123; 0% &#123; -webkit-transform: rotateZ(0deg); &#125; 100% &#123; -webkit-transform: rotateZ(-360deg); &#125;&#125;@-moz-keyframes play &#123; 0% &#123; -moz-transform: rotateZ(0deg); &#125; 100% &#123; -moz-transform: rotateZ(-360deg); &#125;&#125;@keyframes play &#123; 0% &#123; transform: rotateZ(0deg); &#125; 100% &#123; transform: rotateZ(-360deg); &#125;&#125;.site-author-name &#123; margin: $site-author-name-margin; text-align: $site-author-name-align; color: $site-author-name-color; font-weight: $site-author-name-weight;&#125;.site-description &#123; margin-top: $site-description-margin-top; text-align: $site-description-align; font-size: $site-description-font-size; color: $site-description-color;&#125; 14. åŠ å…¥ç«™ç‚¹å†…å®¹æœç´¢åŠŸèƒ½æœ¬ç«™ç‚¹ä½¿ç”¨çš„æ˜¯Local Searchã€‚åŠ å…¥ç«™ç‚¹å†…å®¹æœç´¢åŠŸèƒ½æ­¥éª¤å¦‚ä¸‹ï¼šéœ€è¦ï¼šå®‰è£…hexo-generator-searchdb1npm install hexo-generator-searchdb --save åœ¨ç«™ç‚¹ XXX.github.io/_config.yml ä¸­æ·»åŠ searchå­—æ®µï¼Œå¦‚ä¸‹ï¼š123456# ç«™ç‚¹å†…å®¹æœç´¢åŠŸèƒ½search: path: search.xml field: post format: html limit: 10000 15. nextä¸»é¢˜æ·»åŠ èƒŒæ™¯å›¾ç‰‡1.æ‰¾åˆ°ä¸€ä¸ªèƒŒæ™¯å›¾ç‰‡æ”¾åˆ° hexoï¼ˆhexoå·¥ç¨‹æ–‡ä»¶ï¼‰-&gt; themes -&gt; next -&gt; source -&gt; Bgimageï¼ˆå­˜æ”¾èƒŒæ™¯å›¾ç‰‡çš„æ–‡ä»¶ï¼‰ çš„è·¯å¾„ä¸‹ï¼› 123456/themes/next/source/css/_custom/custom.styl// Custom styles.#body &#123;# background:url(http://upload-images.jianshu.io/upload_images/2230763-265f0df7e75d706a.gif?imageMogr2/auto-orient/strip);# background-attachment: fixed;#&#125; 16. åº•éƒ¨logoæ æ›´æ”¹æ‰¾åˆ° /themes/next/layout/_partials/ ä¸‹é¢çš„ footer.swigæ–‡ä»¶ï¼Œæ‰“å¼€ä¼šå‘ç°ï¼Œå¦‚ä¸‹å›¾çš„è¯­å¥ï¼š ç¬¬ä¸€ä¸ªæ¡†ï¼Œæ˜¯ä¸‹é¢çš„â€œæ—¥æœŸ â¤ï¸ XXXâ€ ç¬¬äºŒä¸ªæ¡†ï¼Œæ˜¯å›¾å½“ä¸­ â€œç”±Hexoé©±åŠ¨â€ çš„Hexoé“¾æ¥ ç¬¬ä¸‰ä¸ªæ¡†ï¼Œæ˜¯â€œä¸»é¢˜-Next.XXâ€ 9.åˆ›å»ºåˆ†ç±»ç•Œé¢ å…ˆçœ‹ä¸‹æ•ˆæœï¼š æ‰“å¼€ç»ˆç«¯ï¼Œå®šä½åˆ°xxx.github.ioç›®å½•ä¸‹ï¼› æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºcategoriesçš„é¡µé¢ï¼› 1hexo new page categories åˆ›å»ºå®Œæˆåï¼Œåœ¨å¯¹åº”çš„ç›®å½•ä¸‹æ‰¾åˆ°index.mdæ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹çš„ä¿®æ”¹ï¼š 123456 ---title: categories # åˆ†ç±»åå­—ï¼ˆå¯ä¸ºç©ºï¼‰date: 2016-06-15 08:17:00type: "categories" # å°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º categories,ä¸»é¢˜å°†è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»comments: false # å¦‚æœæœ‰å¯ç”¨å¤šè¯´ æˆ–è€… Disqus è¯„è®ºï¼Œé»˜è®¤é¡µé¢ä¹Ÿä¼šå¸¦æœ‰è¯„è®ºã€‚éœ€è¦å…³é—­çš„è¯ï¼Œè®¾ç½®ä¸º false --- 10.åˆ›å»ºæ ‡ç­¾ç•Œé¢ å…ˆçœ‹æ•ˆæœï¼š æ‰“å¼€ç»ˆç«¯ï¼Œå®šä½åˆ°xxx.github.ioç›®å½•ä¸‹ï¼› æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ªåä¸ºtagsçš„é¡µé¢ï¼› 1hexo new page tags åˆ›å»ºå®Œæˆåï¼Œåœ¨å¯¹åº”çš„ç›®å½•ä¸‹æ‰¾åˆ°index.mdæ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹çš„ä¿®æ”¹ï¼š 123456 ---title: tags # æ ‡ç­¾åå­—ï¼ˆå¯ä¸ºç©ºï¼‰date: 2016-08-20 22:17:49type: "tags" # å°†é¡µé¢çš„ç±»å‹è®¾ç½®ä¸º tags,ä¸»é¢˜å°†è‡ªåŠ¨ä¸ºè¿™ä¸ªé¡µé¢æ˜¾ç¤ºä¸ºæ ‡ç­¾äº‘comments: false # å¦‚æœæœ‰å¯ç”¨å¤šè¯´ æˆ–è€… Disqus è¯„è®ºï¼Œé»˜è®¤é¡µé¢ä¹Ÿä¼šå¸¦æœ‰è¯„è®ºã€‚éœ€è¦å…³é—­çš„è¯ï¼Œè®¾ç½®ä¸º false --- æ³¨æ„ç‚¹ æ ¼å¼ï¼šå†æ¬¡å¼ºè°ƒï¼Œè®¾ç½®é¡¹çš„é”®å€¼ä¹‹é—´ä¸€å®šè¦æœ‰ç©ºæ ¼ å…³äºç¬¬ä¸‰æ–¹æœåŠ¡çš„ â€duoshuo_infoâ€œåœ¨é…ç½®è¯¥é¡¹çš„æ—¶å€™ï¼Œuser_id é”®å¯¹åº”çš„å€¼ä¸è¦ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ä¿æŒä¸º 0ï¼Œå…·ä½“åŸå› æˆ‘ä¸æ¸…æ¥šï¼› åˆ†ç±»å’Œæ ‡ç­¾äº‘é¡µé¢é¦–å…ˆï¼Œè¦ä½¿ç”¨â€ hexo new page â€œå‘½ä»¤ç”Ÿæˆè¿™ä¸¤ä¸ªé¡µé¢ï¼Œå¦åˆ™æŠ¥404ã€‚å…¶æ¬¡ï¼Œè¿™ä¸¤ä¸ªé¡µé¢æ˜¯ä¸»é¢˜è‡ªåŠ¨ç»´æŠ¤çš„ï¼Œåªè¦æˆ‘ä»¬çš„æ–‡ç« æŒ‰ç…§è§„çŸ©æ¥å°±è¡Œäº†ï¼› 11.å†™åšå®¢ä¸å‘å¸ƒ ç»è¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæœ¬åœ°åšå®¢å’Œä¸»é¢˜è®¾ç½®å·²ç»å®Œæˆï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å†™åšå®¢äº†; æ¸©é¦¨æç¤ºï¼šä½ çš„åšå®¢æ–‡ä»¶éœ€è¦å­˜æ”¾åˆ° xxx.github.io/source/_posts æ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹é¢ä½ å¯ä»¥æŒ‰ç…§ä½ çš„åšå®¢åˆ†ç±»å»ºç«‹ä¸€ç³»åˆ—çš„æ–‡ä»¶å¤¹æ¥ç®¡ç†åšå®¢åŸæ–‡ä»¶ï¼› æ“ä½œæ­¥éª¤1. ç”¨ Markdown å†™æ–‡ç« ä¸ç®¡ä½ ç”¨ä»€ä¹ˆç¼–è¾‘ Markdown æ–‡ä»¶ï¼Œæœ€åç”Ÿæˆçš„ md æ–‡ä»¶æ”¾åˆ° xxx.github.io/source/_posts æ–‡ä»¶å¤¹æˆ–å…¶å­æ–‡ä»¶å¤¹ä¸­å³å¯ï¼Œå¦‚ï¼š12345678910---title: ä¸ªäººåšå®¢æ­å»ºè¯¦è§£ï¼ˆWindowså’ŒMacé€šç”¨ç‰ˆï¼‰ # è¿™æ˜¯æ ‡é¢˜date: 2016-05-20 11:26:00 # è¿™ä¸ªæ—¶é—´å°±æ˜¯æœ¬ç¯‡æ–‡ç« åˆ›å»ºæ—¶é—´ ^_^. å¯ä»¥è‡ªå®šçš„ã€‚categories: # è¿™é‡Œå†™çš„åˆ†ç±»ä¼šè‡ªåŠ¨æ±‡é›†åˆ° categories é¡µé¢ä¸Šï¼Œåˆ†ç±»å¯ä»¥å¤šçº§- åšå®¢æ­å»º # ä¸€çº§åˆ†ç±»- Nextä¸»é¢˜é…ç½® # äºŒçº§åˆ†ç±» tags: # è¿™é‡Œå†™çš„æ ‡ç­¾ä¼šè‡ªåŠ¨æ±‡é›†åˆ° tags é¡µé¢ä¸Š- åšå®¢æ­å»º # å¯é…ç½®å¤šä¸ªæ ‡ç­¾ï¼Œæ³¨æ„æ ¼å¼- Nextä¸»é¢˜é…ç½®--- æ¸©é¦¨æç¤º åˆ†ç±»å’Œæ ‡ç­¾æ˜¯è‡ªåŠ¨ç»´æŠ¤çš„ï¼Œå…³é”®æ˜¯çš„æ–‡ç« è¦æŒ‰ç…§è§„å®šçš„æ ¼å¼å†™ï¼Œå¦‚ä¸Šæ ¼å¼ï¼Œå¯ä»¥å‚è€ƒ. Next ä¸»é¢˜ä¼šè‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼Œè¿™ä¹Ÿçœäº†ä¸å°‘äº‹; 2. åœ¨æœ¬åœ°è¿è¡Œæµ‹è¯•åœ¨ç»ˆç«¯ä¸Šå®šä½åˆ°xxx.github.ioç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ï¼š1hexo s --debug 3. åœ¨æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœåœ¨æµè§ˆå™¨è¾“å…¥http://localhost:4000/ å³å¯çœ‹åˆ°åšå®¢çš„æ•ˆæœ 4. å®‰è£…è‡ªåŠ¨éƒ¨ç½²å‘å¸ƒå·¥å…·1sudo npm install hexo-deployer-git --save 5. å‘å¸ƒåˆ° GitHubPageså½“åœ¨æœ¬åœ°ç¡®è®¤åšå®¢æ•ˆæœåï¼Œå°±å¯ä»¥å°†mdæ–‡ä»¶ç”Ÿæˆé™æ€ç½‘é¡µä¸Šä¼ è‡³GithubPagesï¼Œåœ¨ç»ˆç«¯å®šä½åˆ°xxx.github.ioç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š123456hexo clean # æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤hexo g # ç”Ÿæˆé™æ€ç½‘é¡µhexo d # å¼€å§‹éƒ¨ç½²ä¹Ÿå¯ä»¥ä¸€æ¬¡æ€§æ‰§è¡Œhexo clean &amp;&amp; hexo g &amp;&amp; hexo d æ¸©é¦¨æç¤ºå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼Œç»ˆç«¯ä¼šæç¤ºè¦æ±‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ç­‰å‘½ä»¤æ‰§è¡Œå®Œä¹‹åï¼Œè¿‡å‡ åˆ†é’Ÿæ‰“å¼€ http://xxx.github.io å³å¯çœ‹åˆ°ä½ çš„ä¸ªäººåšå®¢äº†ã€‚ä»¥åè¦å‘å¸ƒæ–°æ–‡ç« ï¼Œæ‰§è¡Œä¸Šè¿°å‘½ä»¤å³å¯; 12.å¤šç»ˆç«¯ç¼–è¾‘hexoåšå®¢ æ‘˜å½•åŸåœ°å€ï¼šhttp://www.jianshu.com/p/4f9fc8aafe15 ä¹‹å‰å°±æƒ³åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘æƒ³è¦åœ¨å…¬å¸å†™åšå®¢æ€ä¹ˆåŠï¼Œæˆ–è€…è¯´å¦‚æœæˆ‘æ¢ç”µè„‘äº†æ€ä¹ˆåŠï¼Œå› ä¸ºåœ¨githubä¸­çš„æˆ‘ä»¬github.ioé¡¹ç›®æ˜¯åªæœ‰ç¼–è¯‘åçš„æ–‡ä»¶çš„ï¼Œæ²¡æœ‰æºæ–‡ä»¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬çš„ç”µè„‘åäº†ï¼Œæ‰“ä¸å¼€äº†ï¼Œæˆ‘ä»¬çš„åšå®¢å°±ä¸èƒ½è¿›è¡Œæ›´æ–°äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠæˆ‘ä»¬çš„æºæ–‡ä»¶ä¹Ÿä¸Šä¼ åˆ°githubä¸Šï¼Œè¿™é“é¢˜çš„è§£é¢˜æ€è·¯ï¼ˆå“ˆå“ˆï¼Œçªç„¶æƒ³åˆ°è¿™ä¸ªè¯äº†ï¼‰æ˜¯ï¼Œå°†æˆ‘ä»¬çš„æºæ–‡ä»¶ä¸Šä¼ è‡³username.github.ioçš„Hexoåˆ†æ”¯ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼ˆåˆ†æ”¯éœ€è¦è‡ªå·±åˆ›å»ºï¼‰ï¼Œç„¶åå¯¹æˆ‘ä»¬çš„æºæ–‡ä»¶è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å¦ä¸€å°ç”µè„‘ä¸Špullæˆ‘ä»¬çš„æºç ï¼Œç„¶åç¼–è¯‘å®Œä¹‹åpushä¸Šå»ã€‚ æ›´ä¸ºä¼˜é›…çš„æ–¹å¼æ˜¯ä½¿ç”¨travis-ciï¼Œç„¶åç”¨webhookè‡ªåŠ¨éƒ¨ç½²ã€‚ä½ åªéœ€è¦å†™markdownï¼Œpushåˆ°githubå°±è¡Œäº†ã€‚æ ¹æœ¬ä¸ç”¨å…³å¿ƒdeployï¼Œåªè¦ç»´æŠ¤ä½ çš„markdownå°±è¡Œã€‚è¯¦æƒ…è¯·å‚è€ƒï¼šhttp://blog.bigruan.com/2015-03-09-Continuous-Integration-Your-Hexo-Blog-With-TravisCI/ åˆ›å»ºHexoåˆ†æ”¯åˆ›å»ºä¸¤ä¸ªåˆ†æ”¯ï¼šmaster ä¸ Hexo,å¹¶å°†Hexoè®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼ˆè¿™ä¸ªHexoåˆ†æ”¯å°±æ˜¯å­˜æ”¾æˆ‘ä»¬æºæ–‡ä»¶çš„åˆ†æ”¯ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ–°Hexoåˆ†æ”¯ä¸Šçš„å†…å®¹æ®å°±å¥½ï¼Œmasterä¸Šçš„åˆ†æ”¯hexoç¼–è¯‘çš„æ—¶å€™ä¼šæ›´æ–°çš„ï¼‰ åˆ é™¤æ–‡ä»¶å¤¹å†…åŸæœ‰çš„.gitç¼“å­˜æ–‡ä»¶å¤¹å¹¶ç¼–è¾‘.gitignoreæ–‡ä»¶å› ä¸ºæœ‰äº›ä¸»é¢˜æ˜¯ä»gitä¸Šcloneè¿‡æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆåˆ é™¤.gitç¼“å­˜æ–‡ä»¶ï¼Œå¦åˆ™ä¼šå’Œblogä»“åº“å†²çªï¼ˆ.gité»˜è®¤æ˜¯éšè—æ–‡ä»¶å¤¹ï¼Œéœ€è¦å…ˆå¼€å¯æ˜¾ç¤ºéšè—æ–‡ä»¶å¤¹ã€‚.gitæ–‡ä»¶å¤¹è¢«åˆ é™¤åæ•´ä¸ªæ–‡ä»¶å¯¹åº”çš„gitä»“åº“çŠ¶æ€ä¹Ÿä¼šè¢«æ¸…ç©º).gitignoreæ–‡ä»¶ä½œç”¨æ˜¯å£°æ˜ä¸è¢«gitè®°å½•çš„æ–‡ä»¶ï¼Œblogæ ¹ç›®å½•ä¸‹çš„.gitignoreæ˜¯hexoåˆå§‹åŒ–å¸¦æ¥çš„ï¼Œå¯ä»¥å…ˆåˆ é™¤æˆ–è€…ç›´æ¥ç¼–è¾‘ï¼Œå¯¹hexoä¸ä¼šæœ‰å½±å“ã€‚å»ºè®®.gitignoreå†…æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234/.deploy_git/public /_config.yml.deploy_gitæ˜¯hexoé»˜è®¤çš„.gité…ç½®æ–‡ä»¶å¤¹ï¼Œä¸éœ€è¦åŒæ­¥ publicå†…æ–‡ä»¶æ˜¯æ ¹æ®sourceæ–‡ä»¶å¤¹å†…å®¹è‡ªåŠ¨ç”Ÿæˆï¼Œä¸éœ€è¦å¤‡ä»½ï¼Œä¸ç„¶æ¯æ¬¡æ”¹åŠ¨å†…å®¹å¤ªå¤šå³ä½¿æ˜¯ç§æœ‰ä»“åº“ï¼Œé™¤å»åœ¨çº¿æœåŠ¡å•†å‘˜å·¥å¯ä»¥çœ‹åˆ°çš„é£é™©å¤–ï¼Œè¿˜æœ‰äº‘æœåŠ¡å•†è¢«æ”»å‡»é€ æˆæ³„æ¼ç­‰å¯èƒ½ï¼Œæ‰€ä»¥ä¸å»ºè®®å°†é…ç½®æ–‡ä»¶ä¼ ä¸Šå» åˆå§‹åŒ–ä»“åº“ç„¶åæˆ‘ä»¬å†åˆå§‹åŒ–ä»“åº“ï¼Œé‡æ–°å¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ 123git initgit remote add origin &lt;server&gt;&lt;server&gt;æ˜¯æŒ‡åœ¨çº¿ä»“åº“çš„åœ°å€ã€‚originæ˜¯æœ¬åœ°åˆ†æ”¯,remote addæ“ä½œä¼šå°†æœ¬åœ°ä»“åº“æ˜ å°„åˆ°äº‘ç«¯ å°†åšå®¢æºæ–‡ä»¶ä¸Šä¼ è‡³Hexoåˆ†æ”¯ä¾æ¬¡æ‰§è¡Œ 123git add .git commit -m "..."git push origin hexo æäº¤ç½‘ç«™ç›¸å…³çš„æ–‡ä»¶ï¼› å¯¹Bç”µè„‘è¿›è¡Œçš„æ“ä½œå‡è®¾Bç”µè„‘ç°åœ¨æ²¡æœ‰æˆ‘ä»¬çš„æºæ–‡ä»¶1234git initgit remote add origin &lt;server&gt; #å°†æœ¬åœ°æ–‡ä»¶å’Œäº‘ç«¯ä»“åº“æ˜ å°„èµ·æ¥ã€‚git fetch --allgit reset --hard origin/master 13.Hexoå¸¸ç”¨å‘½ä»¤ç¬”è®° hexoå®‰è£…å‡çº§ 123npm install hexo -g #å®‰è£… npm update hexo -g #å‡çº§ hexo init #åˆå§‹åŒ– å¸¸ç”¨ç®€å†™ 12345hexo n "æˆ‘çš„åšå®¢" == hexo new "æˆ‘çš„åšå®¢" #æ–°å»ºæ–‡ç« hexo p == hexo publishhexo g == hexo generate#ç”Ÿæˆhexo s == hexo server #å¯åŠ¨æœåŠ¡é¢„è§ˆhexo d == hexo deploy#éƒ¨ç½² å¯åŠ¨æœ¬åœ°æœåŠ¡ 1234hexo server #Hexo #ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚hexo server -s #é™æ€æ¨¡å¼hexo server -p 5000 #æ›´æ”¹ç«¯å£hexo server -i 192.168.1.1 #è‡ªå®šä¹‰ IP ç›‘è§†æ–‡ä»¶å˜åŠ¨ 123hexo generate #ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å•hexo generate --watch #ç›‘è§†æ–‡ä»¶å˜åŠ¨hexo clean #æ¸…é™¤ç¼“å­˜ ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤ éƒ¨ç½² 12345#ä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„hexo generate --deployhexo deploy --generatehexo deploy -ghexo server -g è‰ç¨¿ 1234# æ–°å»ºè‰ç¨¿hexo new draft &lt;title&gt;# å‘å¸ƒè‰ç¨¿ä¸ºposthexo publish draft &lt;title&gt; æ¨¡ç‰ˆ 12345678hexo new "postName" #æ–°å»ºæ–‡ç« hexo new page "pageName" #æ–°å»ºé¡µé¢hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHubhexo new [layout] &lt;title&gt;hexo new photo "My Gallery"hexo new "Hello World" --lang tw å†™ä½œæ—¶é—´ 1234567å˜é‡ æè¿°:title æ ‡é¢˜:year å»ºç«‹çš„å¹´ä»½ï¼ˆ4 ä½æ•°ï¼‰:month å»ºç«‹çš„æœˆä»½ï¼ˆ2 ä½æ•°ï¼‰:i_month å»ºç«‹çš„æœˆä»½ï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰:day å»ºç«‹çš„æ—¥æœŸï¼ˆ2 ä½æ•°ï¼‰:i_day å»ºç«‹çš„æ—¥æœŸï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰ 14.åŸŸåé…ç½® æ³¨å†Œè´­ä¹°æˆ‘ä»¬å…ˆåˆ°é˜¿é‡Œäº‘å®˜ç½‘æ³¨å†Œä¸€ä¸ªå¸å·(å®˜ç½‘åœ°å€)ä¹‹åæ‰“å¼€ åŸŸåè´­ä¹°åœ°å€ï¼Œæ ¹æ®ä¸ªäººå–œå¥½é€‰åç¼€ä¸ºä»€ä¹ˆçš„é¡¶çº§åŸŸåã€‚å¦‚ï¼š.me .cn .com DNSåŸŸåè§£æå†ç™»é™†å›æˆ‘ä»¬çš„é˜¿é‡Œäº‘åˆ°é¦–é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„æ§åˆ¶å°ï¼Œç»§ç»­ç‚¹å‡»å·¦ä¾§æ åŸŸåä¸ç½‘ç«™(ä¸‡ç½‘)â€“&gt;åŸŸå. è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°åˆšåˆšè´­ä¹°çš„åŸŸåäº†ï¼Œç‚¹å‡»åŸŸåé‚£è¡Œå°¾éƒ¨çš„è§£æï¼Œä¹‹åæˆ‘ä»¬å°±è·³è½¬é…ç½®è§£æé¡µé¢ã€‚æˆ‘ä»¬ç»§ç»­ç‚¹å‡»çº¢è‰²æ·»åŠ è§£ææŒ‰é”®ï¼Œè‹¥æœ‰è®¤è¯ä¿¡æ¯è¯·è‡ªå·±é€šè¿‡]]></content>
      <categories>
        <category>HexoBlog</category>
      </categories>
      <tags>
        <tag>HexoBlog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å°è£…æ€ç»´â€”æ»šåŠ¨æ¡ã€Œä»£ç ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æ€ç»´ã€]]></title>
    <url>%2FEncapsulationThinking%2FScrollBar.html</url>
    <content type="text"><![CDATA[Write in the first â€œ æœ¬æ–‡ä¸é€‚åˆè€å¸æœºâ€¦ â€è¯´æ˜ï¼šä»£ç ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æ€ç»´ã€‚ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ç®€æ˜“-å°è£…æ–°é—»æ»šåŠ¨æ¡ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ å®ç°åŠŸèƒ½ç‚¹ 1.å¯è‡ªå®šä¹‰æ»šåŠ¨æ ‡é¢˜ä¸ªæ•° 2.æ»šåŠ¨æ ‡é¢˜åˆ‡æ¢æœ‰å­—ä½“æ”¾å¤§å’Œé¢œè‰²æ¸å˜çš„æ•ˆæœ 3.æ»šåŠ¨æ ‡é¢˜ç‚¹å‡»å¯åˆ‡æ¢åˆ°å¯¹åº”çš„å­æ§åˆ¶å™¨ 4.æ»‘åŠ¨å†…å®¹è§†å›¾å¯åˆ‡æ¢åˆ°å¯¹åº”æ ‡é¢˜ æ¥ä¸‹æ¥å°±è¯´ä¸€ä¸‹æ–°é—»ç±»æ¡†æ¶çš„æ­å»ºæ€è·¯ï¼Œè¿™ç§æ¡†æ¶åº”ç”¨ä¹Ÿå¾ˆå¤šçš„ï¼Œå¦‚ï¼šæ–°é—»ç±» å’Œ ç”µå•†ç±» æ— è®ºåšä»€ä¹ˆé¡¹ç›®ï¼Œé¦–å…ˆå°±æ˜¯æ­å»ºç•Œé¢ã€‚1. å…ˆåˆ†æç•Œé¢ï¼Œçœ‹ä¸‹ç•Œé¢ç»“æ„ï¼Œç»“æ„ä¸æƒ³å¥½ï¼Œç›²ç›®å†™åé¢ä¼šå¾ˆéº»çƒ¦ã€‚ ç¬¬ä¸€æ˜¯å¯¼èˆªæ§åˆ¶å™¨ï¼Œæœ‰æ ¹æ§åˆ¶å™¨Viewï¼Œæœ‰è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œéœ€è¦è‡ªå®šä¹‰æ§åˆ¶å™¨ã€‚ ç¬¬äºŒæ˜¯æ ¹æ§åˆ¶å™¨ViewåŒ…æ‹¬æ ‡é¢˜æ»šåŠ¨æ¡å’Œå†…å®¹å±•ç¤ºã€‚éœ€è¦æ·»åŠ æ ‡é¢˜å’Œå†…å®¹æ»šåŠ¨è§†å›¾ã€‚ æç¤ºï¼šä»¥åæˆ‘ä»¬ä¸ç®¡å†™ä»€ä¹ˆä¸€å®šè¦å…ˆæœ‰æ€è·¯å†å»å†™ä»£ç ï¼Œæ€è·¯éƒ½æ²¡æœ‰å°±å»å†™ä»£ç è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºä½ ä¼šå‘ç°ä½ å†™ç€å†™ç€å°±æ–­äº†ã€‚å…ˆåˆ†æç»“æ„ï¼Œä¼˜å…ˆé€‰æ‹©å“ªä¸ªçŸ¥è¯†ç‚¹å®ç°ï¼Œå½“ç„¶ä»£ç ä¸ä¼šå†™ï¼Œæˆ‘ä»¬å¯ä»¥å¤šæ•²å‡ ééƒ½ä¼šäº†ã€‚ 2. æŠ½å–æ–¹æ³•12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; // å¯¼èˆªæ¡æ ‡é¢˜ï¼ˆæœ‰æ ˆé¡¶æ§åˆ¶å™¨å†³å®šï¼‰. self.navigationItem.title = @"æ–°é—»"; // iOS7ä»¥å,å¯¼èˆªæ§åˆ¶å™¨ä¸­scollViewé¡¶éƒ¨ä¼šæ·»åŠ 64çš„é¢å¤–æ»šåŠ¨åŒºåŸŸ self.automaticallyAdjustsScrollViewInsets = NO; // æ·»åŠ æ ‡é¢˜æ»šåŠ¨è§†å›¾ [self setuptitleScrollViewollView]; // æ·»åŠ å†…å®¹æ»šåŠ¨è§†å›¾ [self setupContenScrollView];&#125; æç¤º1ï¼šè¿™é‡ŒæŠ½è¿‡æ–¹æ³•ä¹‹åï¼Œå°±é©¬ä¸Šå»è°ƒç”¨ï¼ˆä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œæœ‰çš„æ—¶å€™å†™äº†ä¸€å¤§å †ä»£ç ï¼Œè¿è¡Œçš„æ—¶å€™å‘ç°æ²¡æœ‰è¿™ä¸ªæ•ˆæœï¼‰ã€‚è¦å…»æˆä¸€ç§å¼€å‘ä¹ æƒ¯ï¼Œå°±æ˜¯å›ºå®šæ€ç»´ã€‚ æç¤º2ï¼šä¸è¦æŠŠä¸€å¤§å †ä»£ç éƒ½åœ¨viewDidLoadä¸­å†™å®Œå†è€ƒè™‘æŠ½å–ï¼Œä¸€èˆ¬æœ‰ç»éªŒçš„äººï¼Œå†å†™ä¹‹å‰å°±æŠ½å–å¥½äº†ã€‚ æ·»åŠ æ»šåŠ¨è§†å›¾ä»£ç å¦‚ä¸‹ï¼Œé‡Œé¢ä¸€äº›å…¶å®ƒè®¾ç½®ï¼Œéƒ½æœ‰è¯¦è§£ã€‚ 12345678910111213141516171819202122232425262728293031323334353637#pragma mark - æ·»åŠ æ ‡é¢˜æ»šåŠ¨è§†å›¾- (void)setuptitleScrollViewollView &#123; UIScrollView *titleScrollView = [[UIScrollView alloc] init]; CGFloat y = self.navigationController.navigationBarHidden ? 20:64; // è¿™é‡Œçš„ y å€¼ï¼Œæ—¢ç„¶æ˜¯å°è£…,è¦è€ƒè™‘ä¸¥è°¨ä¸€ç‚¹,è¦åˆ¤æ–­æœ‰å¯¼èˆªæ¡å°±æ˜¯64,æ— å¯¼èˆªæ¡å°±æ˜¯20. // è§£å†³æ–¹æ³•:æ˜¯åˆ¤æ–­ä¸‹å¯¼èˆªæ¡æ˜¯å¦éšè— titleScrollView.frame = CGRectMake(0, y, ScreenW, 44); [self.view addSubview:titleScrollView]; _titleScrollView = titleScrollView; //titleScrollView.backgroundColor = [UIColor greenColor]; // æ°´å¹³æŒ‡ç¤ºå™¨ self.titleScrollView.showsHorizontalScrollIndicator = NO;&#125;#pragma mark - æ·»åŠ å†…å®¹æ»šåŠ¨è§†å›¾- (void)setupContenScrollView &#123; UIScrollView *contentScrollView = [[UIScrollView alloc] init]; CGFloat y = CGRectGetMaxY(self.titleScrollView.frame); // è¿™é‡Œçš„ y å€¼ï¼Œå°±æ˜¯titleScrollView Yå€¼çš„æœ€å¤§å€¼ contentScrollView.frame = CGRectMake(0, CGRectGetMaxY(self.titleScrollView.frame), ScreenW, ScreenH- y); [self.view addSubview:contentScrollView]; _contentScrollView = contentScrollView; // è®¾ç½®contentScrollViewçš„å±æ€§ self.contentScrollView.pagingEnabled = YES;// åˆ†é¡µ self.contentScrollView.bounces = NO;// å¼¹ç°§ self.contentScrollView.showsHorizontalScrollIndicator = NO;// æŒ‡ç¤ºå™¨ // è®¾ç½®ä»£ç†,ç›®çš„:ç›‘å¬æ»šåŠ¨è§†å›¾ä»€ä¹ˆæ—¶å€™æ»šåŠ¨å®Œæˆ self.contentScrollView.delegate = self;&#125; è¿™æ—¶å€™åŸºæœ¬è¿è¡Œï¼Œæˆ‘ä»¬è¦å†™çš„æ•ˆæœçš„æ­£é¢˜ç»“æ„å°±æ­å»ºå®Œäº†ï¼Œç„¶åæˆ‘ä»¬å°±æŒ‰å°çš„æ¨¡å—ï¼Œä¸€ä¸ªä¸€ä¸ªå»å†™ã€‚ æ·»åŠ æ‰€æœ‰æ ‡é¢˜ ä¹‹å‰ å…ˆæ·»åŠ æ‰€æœ‰å­æ§åˆ¶å™¨ åˆ†æï¼Œæ·»åŠ æ‰€æœ‰æ ‡é¢˜ï¼Œè¿™é‡Œä½ æ€ä¹ˆçŸ¥é“æ ‡é¢˜æœ‰å¤šå°‘ä¸ªï¼Ÿ æ·»åŠ æ¯ä¸€ä¸ªæ ‡é¢˜å¯¹åº”çš„å­æ§åˆ¶å™¨ï¼Œå…ˆæ·»åŠ å­æ§åˆ¶å™¨æ ¹æ®å­æ§åˆ¶å™¨ä¸ªæ•°å°±æ˜¯æ ‡é¢˜çš„ä¸ªæ•° è¿™é‡Œæ ‡é¢˜é‡‡ç”¨ Button å…ˆæ·»åŠ å­æ§åˆ¶å™¨æ ¹æ®å­æ§åˆ¶å™¨ä¸ªæ•°å°±æ˜¯æ ‡é¢˜çš„ä¸ªæ•°ã€‚12345678910111213141516171819202122232425262728293031#pragma mark - æ·»åŠ æ‰€æœ‰å­æ§åˆ¶å™¨/** è¡¥å……: ä¸è¦è¿™é‡Œæ·»åŠ é¢œè‰²,åº”è¯¥å†™åœ¨å¯¹åº”çš„å­æ§åˆ¶å™¨å½“ä¸­,ç”¨åˆ°çš„æ—¶å€™æ‰åŠ è½½ã€‚ */- (void)setupAllChildViewController &#123; // å¤´æ¡ TopLineViewController *vc1 = [[TopLineViewController alloc] init]; vc1.title = @"å¤´æ¡"; [self addChildViewController:vc1]; // çƒ­ç‚¹ HotViewController *vc2 = [[HotViewController alloc] init]; vc2.title = @"çƒ­ç‚¹"; [self addChildViewController:vc2]; // è§†é¢‘ VideoViewController *vc3 = [[VideoViewController alloc] init]; vc3.title = @"è§†é¢‘"; [self addChildViewController:vc3]; // ç¤¾ä¼š ScoietyViewController *vc4 = [[ScoietyViewController alloc] init]; vc4.title = @"ç¤¾ä¼š"; [self addChildViewController:vc4]; // è®¢é˜… ReaderViewController *vc5 = [[ReaderViewController alloc] init]; vc5.title = @"è®¢é˜…"; [self addChildViewController:vc5]; // ç§‘æŠ€ ScienceViewController *vc6 = [[ScienceViewController alloc] init]; vc6.title = @"ç§‘æŠ€"; [self addChildViewController:vc6];&#125; ç„¶åå°±æ˜¯è®¾ç½®æ‰€æœ‰æ ‡é¢˜ æç¤º1ï¼šæˆ‘ä»¬å†™ä¸€ä¸ªåŠŸèƒ½ç‚¹çš„æ—¶å€™ï¼Œä¹Ÿæ²¡æœ‰å¿…é¡»éå¾— ç¬¬ä¸€æ­¥å¹²å˜›/ç¬¬äºŒæ­¥å¹²å˜›ã€‚å¤šæ•°æƒ…å†µä¸‹æ˜¯é‡‡ç”¨é€†å‘æ€ç»´ï¼Œå…ˆè€ƒè™‘ä½ è¦å¹²ä»€ä¹ˆï¼Œç¼ºä»€ä¹ˆè¡¥ä»€ä¹ˆã€‚ æç¤º2ï¼šå®šäº†æ–¹å‘ï¼Œä¸è¦å¤ªè¿‡å¤šè€ƒè™‘ç»†èŠ‚ã€‚å…ˆå†™å‡ºæ¥æŠŠå†…å®¹å±•ç¤ºä¸Šå»ï¼Œå†æ ¹æ®å±•ç¤ºçš„æ•ˆæœæ˜¯å¦æ˜¯æˆ‘ä»¬æƒ³è¦çš„(è°ƒæ•´ç»†èŠ‚)ã€‚ 12345678910111213141516171819202122232425262728293031323334353637#pragma mark - æ·»åŠ æ‰€æœ‰æ ‡é¢˜æŒ‰é’®- (void)setupAllTitle &#123; // æ·»åŠ æ‰€æœ‰æ ‡é¢˜æŒ‰é’® NSInteger count = self.childViewControllers.count; CGFloat btnW = 100; // è¿™é‡Œæ¯ä¸€ä¸ªæ ‡é¢˜å¤§å°æ˜¯å›ºå®šçš„ CGFloat btnH = self.titleScrollView.frame.size.height; CGFloat btnX = 0; for (NSInteger i= 0; i &lt; count; i++) &#123; UIButton *titleBtn = [UIButton buttonWithType:UIButtonTypeCustom]; UIViewController *vc = self.childViewControllers[i]; [titleBtn setTitle:vc.title forState:UIControlStateNormal]; btnX = btnW * i; titleBtn.frame = CGRectMake(btnX, 0, btnW, btnH); titleBtn.tag = i; // 1.æ ‡é¢˜é¢œè‰² ä¸ºé»‘è‰² [titleBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; titleBtn.titleLabel.font = [UIFont systemFontOfSize:16.f]; // 3.ç›‘å¬æŒ‰é’®çš„ç‚¹å‡» [titleBtn addTarget:self action:@selector(titleClick:) forControlEvents:UIControlEventTouchUpInside]; [self.titleScrollView addSubview:titleBtn]; // æ·»åŠ åˆ°æ ‡é¢˜æ•°ç»„ [self.titleButtons addObject:titleBtn]; // é»˜è®¤é€‰ä¸­(æ‰‹åŠ¨è°ƒç”¨) if (i == 0) &#123; [self titleClick:titleBtn]; &#125; &#125; // 2.è®¾ç½®æ ‡é¢˜çš„æ»šåŠ¨èŒƒå›´ï¼ˆéœ€è¦è®©titleScrollViewå¯ä»¥æ»šåŠ¨ï¼‰ self.titleScrollView.contentSize = CGSizeMake(btnW * count, 0); // 3.è®¾ç½®å†…å®¹çš„æ»šåŠ¨èŒƒå›´ï¼ˆéœ€è¦è®©contentScrollViewå¯ä»¥æ»šåŠ¨ï¼‰ self.contentScrollView.contentSize = CGSizeMake(count * ScreenW, 0);&#125; å¤„ç†æ ‡é¢˜æŒ‰é’®çš„ç‚¹å‡»åˆ†æï¼ŒæŒ‰é’®ç‚¹å‡»åéœ€è¦åšçš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ 1.æ ‡é¢˜é¢œè‰² å˜æˆ çº¢è‰²ã€‚ 2.æŠŠå¯¹åº”å­æ§åˆ¶å™¨çš„viewæ·»åŠ ä¸Šå»ã€‚ 3.å†…å®¹æ»šåŠ¨è§†å›¾æ»šåŠ¨åˆ°å¯¹åº”çš„ä½ç½®ã€‚ 12345678910111213#pragma mark - æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶- (void)titleClick:(UIButton *)btn &#123; NSInteger i = btn.tag; // 1.æ ‡é¢˜é¢œè‰² å˜æˆ çº¢è‰²ï¼ˆæŠ½å–æ–¹æ³•ï¼‰ [self selectButton:btn]; // 2.æŠŠå¯¹åº”å­æ§åˆ¶å™¨çš„viewæ·»åŠ ä¸Šå»ï¼ˆæŠ½å–æ–¹æ³•ï¼‰ [self setupViewController:i]; // 3.å†…å®¹æ»šåŠ¨è§†å›¾æ»šåŠ¨åˆ°å¯¹åº”çš„ä½ç½® self.contentScrollView.contentOffset = CGPointMake(i * ScreenW, 0);&#125; é€‰ä¸­æ ‡é¢˜æŒ‰é’® 123456789101112131415161718192021222324/** è¡¥å……:åˆ‡æ¢ä¸‰æ­¥æ›² 1.å–æ¶ˆä¸Šæ¬¡é€‰ä¸­ 2.é€‰ä¸­å½“å‰ç‚¹å‡»çš„æŒ‰é’® 3.è®°å½•å½“å‰é€‰ä¸­çš„æŒ‰é’® */#pragma mark - é€‰ä¸­æ ‡é¢˜æŒ‰é’®@property (nonatomic, weak) UIButton *selectBtn;// è®°å½•é€‰ä¸­çš„æŒ‰é’®- (void)selectButton:(UIButton *)btn &#123; _selectBtn.transform = CGAffineTransformIdentity;// å­—ä½“æ¢å¤åŸå§‹çŠ¶æ€ [_selectBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; [btn setTitleColor:[UIColor redColor] forState:UIControlStateNormal]; // æ ‡é¢˜å±…ä¸­ [self setupTitleCenter:btn]; // é€‰ä¸­å­—ä½“ç¼©æ”¾:å½¢å˜ btn.transform = CGAffineTransformMakeScale(1.3, 1.3); _selectBtn = btn;// è®°å½•é€‰ä¸­çš„æŒ‰é’®&#125; æ·»åŠ å­æ§åˆ¶å™¨çš„View1234567891011121314#pragma mark - æ·»åŠ å­æ§åˆ¶å™¨çš„View- (void)setupViewController:(NSInteger)i &#123; UIViewController *vc = self.childViewControllers[i];// if (vc.viewIfLoaded) &#123;// åˆ¤æ–­æ§åˆ¶å™¨æ˜¯å¦åŠ è½½ NS_AVAILABLE_IOS(9_0);// return;// &#125; if (vc.view.superview) &#123;// é¿å…é‡å¤åŠ è½½ return; &#125; CGFloat x = i * ScreenW; vc.view.frame = CGRectMake(x, 0, ScreenW, self.contentScrollView.frame.size.height); [self.contentScrollView addSubview:vc.view];&#125; æ¥ä¸‹æ¥ï¼Œå¤„ç†å†…å®¹è§†å›¾çš„ä¸šåŠ¡é€»è¾‘(ç›‘å¬å†…å®¹æ»šåŠ¨) è®¾ç½®ä»£ç†ï¼Œç›®çš„:ç›‘å¬å†…å®¹æ»šåŠ¨è§†å›¾ä»€ä¹ˆæ—¶å€™å®Œæˆã€‚ åŸå› : 1.é˜²SBç”¨æˆ·,æŒ‰ä½å±å¹•æ­»å¾ªç¯ç€å·¦å³æ»‘,æ¯æ¬¡éƒ½åŠ è½½ä¼šå¾ˆå¡ã€‚ 2.ç”¨æˆ·ä¹Ÿæœ‰å¯èƒ½æ»‘åŠ¨åˆ°ä¸€åŠ,ä¸æƒ³çœ‹äº†,å°±æ²¡æœ‰å¿…è¦åŠ è½½å‡ºæ¥,æµªè´¹ç”¨æˆ·æµé‡ã€‚ ä»£ç†æ–¹æ³•ï¼š 1234567891011121314#pragma mark - &lt;UIScrollViewDelegate&gt;- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView &#123; // è·å–å½“å‰è§’æ ‡ NSInteger i = self.contentScrollView.contentOffset.x / ScreenW; // è·å–æ ‡é¢˜æŒ‰é’® //UIButton *titleBtn = self.titleScrollView.subviews[i]; UIButton *titleBtn = self.titleButtons[i]; // 1.æŠŠæ ‡é¢˜é¢œè‰² æ”¹æˆçº¢è‰² [self selectButton:titleBtn]; // 2.æŠŠå¯¹åº”å­æ§åˆ¶å™¨çš„viewæ·»åŠ ä¸Šå» [self setupViewController:i];&#125; æ€»ç»“ï¼š è¿™é‡Œæœ‰ä¸ªéšè—é—®é¢˜:â€“&gt;è·å–æ ‡é¢˜æŒ‰é’® self.titleScrollView.subviews[i] åŸå› ï¼šUIScrollViewé»˜è®¤æœ‰ä¸¤ä¸ªå­æ§ä»¶ï¼Œè¿™é‡Œçš„subVeiwsæœ‰å¯èƒ½æŠŠä¸¤ä¸ªå­æ§ä»¶ç»™å–å‡ºæ¥ï¼Œé€ æˆä¸æ ‡é¢˜ä¸å¯¹åº”ã€‚ è§£å†³ï¼šæä¾›ä¸€ä¸ªæ•°ç»„ä¸“é—¨å­˜æ”¾æ·»åŠ çš„æ ‡é¢˜ï¼ˆçº¯æ´æ•°ç»„ï¼‰1@property (nonatomic, strong) NSMutableArray *titleButtons;// è®°å½•æ ‡é¢˜æ•°ç»„ æ¥ä¸‹æ¥ï¼Œé€‰ä¸­æ ‡é¢˜ å’Œ æ»šåŠ¨å†…å®¹è§†å›¾ è®©æ ‡é¢˜å±…ä¸­æ ‡é¢˜å±…ä¸­å¤„ç†ï¼Œæœ¬è´¨ï¼šä¿®æ”¹titleScrollViewçš„åç§»é‡ 12345678910111213141516#pragma mark - æ ‡é¢˜å±…ä¸­å¤„ç†- (void)setupTitleCenter:(UIButton *)btn &#123; // æœ¬è´¨:ä¿®æ”¹titleScrollViewåç§»é‡ CGFloat offsetX = btn.center.x - ScreenW * 0.5; if (offsetX &lt; 0) &#123; offsetX = 0; &#125; CGFloat maxOffsetX = self.titleScrollView.contentSize.width - ScreenW; if (offsetX &gt; maxOffsetX) &#123; offsetX = maxOffsetX; &#125; NSLog(@"%f",offsetX); [self.titleScrollView setContentOffset:CGPointMake(offsetX, 0) animated:YES];&#125; é™„å›¾ï¼š åªè¦ä¸€æ»šåŠ¨å°±éœ€è¦å­—ä½“é¢œè‰²æ¸å˜å’Œå­—ä½“æ”¾å¤§ åˆ†æå­—ä½“ç¼©æ”¾ 1.ç¼©æ”¾æ¯”ä¾‹ 2.ç¼©æ”¾é‚£ä¸¤ä¸ªæŒ‰é’® åœ¨contentScrollViewä»£ç†æ–¹æ³•ä¸­åšå¤„ç† 123456789101112131415161718192021222324252627282930313233343536#pragma mark - åªè¦ä¸€æ»šåŠ¨å°±éœ€è¦å­—ä½“æ¸å˜- (void)scrollViewDidScroll:(UIScrollView *)scrollView &#123; // è·å–è§’æ ‡ NSInteger leftI = scrollView.contentOffset.x / ScreenW; NSInteger rightI = leftI + 1; //NSLog(@"%ld %ld",leftI,rightI); // è·å–å·¦è¾¹çš„æŒ‰é’® UIButton *leftBtn = self.titleButtons[leftI]; // è·å–å³è¾¹çš„æŒ‰é’® NSInteger count = self.titleButtons.count; UIButton *rightBtn; if (rightI &lt; count) &#123;// åŠ åˆ¤æ–­,é˜²æ­¢è¶Šç•Œ rightBtn = self.titleButtons[rightI]; &#125; // å³è¾¹ç¼©æ”¾æ¯”ä¾‹ï¼ˆ0 ~ 1 =&gt; æ”¾å¤§0.3ï¼‰ CGFloat scaleR = scrollView.contentOffset.x / ScreenW; scaleR -= leftI; // å·¦è¾¹ç¼©æ”¾æ¯”ä¾‹ CGFloat scaleL = 1 - scaleR; // ç¼©æ”¾æŒ‰é’® leftBtn.transform = CGAffineTransformMakeScale(scaleL * 0.3 + 1, scaleL * 0.3 + 1); rightBtn.transform = CGAffineTransformMakeScale(scaleR * 0.3 + 1, scaleR * 0.3 + 1); // é¢œè‰²æ¸å˜ UIColor *leftColor = [UIColor colorWithRed:scaleL green:0 blue:0 alpha:1];// R 1-0 UIColor *rightColor = [UIColor colorWithRed:scaleR green:0 blue:0 alpha:1];// R 0-1 [leftBtn setTitleColor:leftColor forState:UIControlStateNormal]; [rightBtn setTitleColor:rightColor forState:UIControlStateNormal]; &#125; æ€»ç»“ï¼š æ ‡é¢˜æ–‡å­—ç¼©æ”¾ï¼Œè§£å†³ï¼š1.å­—ä½“æ”¾å¤§(åšä¸åˆ°ä¸‹é¢è¦åšçš„é¢œè‰²æ¸å˜æ•ˆæœ) 2.æ”¹å½¢å˜ï¼ˆé‡‡ç”¨ï¼‰ é¢œè‰²ï¼š3ç§é¢œè‰²é€šé“ç»„æˆ R:çº¢ G:ç»¿ B:è“ï¼Œå¦‚ï¼šç™½è‰²(1 1 1)ã€é»‘è‰²(0 0 0)ã€çº¢è‰²(1 0 0)ã€‚ åŸºæœ¬ä½¿ç”¨æˆ‘ä»¬å°è£…ä¸€ä¸ªä¸œè¥¿ï¼Œè¦è€ƒè™‘ï¼ˆæ–¹æ³•æŠ½å– å’Œ å¯æ‰©å±•æ€§ï¼‰ã€‚ 1.æ·»åŠ æ‰€æœ‰å­æ§åˆ¶å™¨ï¼Œæ”¾åˆ°å­æ§åˆ¶å™¨ä¸­ 2.è®¾ç½®æ‰€æœ‰æ ‡é¢˜ï¼Œåº”æ”¾åˆ°viewWillAppear æ–°å»º TestViewController : LNViewController1234567891011121314151617181920// TestViewController.m- (void)viewDidLoad &#123; [super viewDidLoad]; // æ·»åŠ æ‰€æœ‰å­æ§åˆ¶å™¨ [self setupAllChildViewController]; &#125;//--------------------------- &lt;#æˆ‘æ˜¯åˆ†å‰²çº¿#&gt; ------------------------------////// LNViewController.m@property (nonatomic, assign) BOOL isInitialize;// è®°å½•æ ‡é¢˜æ˜¯å¦åˆå§‹åŒ–- (void)viewWillAppear:(BOOL)animated &#123; [super viewWillAppear:animated]; if (_isInitialize == NO) &#123; // è®¾ç½®æ‰€æœ‰æ ‡é¢˜ [self setupAllTitle]; _isInitialize = YES; &#125;&#125; é™„ä¸Šæ€»ç»“å†™çš„å°æ · Demoï¼Œå¦‚æœã€Œä½ å–œæ¬¢ æˆ– æœ‰å¸®åŠ©ã€ï¼Œå¯å¦ç‚¹ä¸ª Star ã€Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ã€]]></content>
      <categories>
        <category>å°è£…</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac&Xcodeã€Œå®ç”¨å¿«æ·é”®ã€ç»­æ›´]]></title>
    <url>%2FMacUseEfficiency%2FMac%26XcodeShortcuts.html</url>
    <content type="text"><![CDATA[æ¯…åŠ›èƒ½æ»´æ°´ç©¿çŸ³ï¼Œé‡å¤èƒ½ç†Ÿèƒ½ç”Ÿå·§ã€‚ æ¸©é¦¨æç¤ºï¼šè¦ä½¿ç”¨é”®ç›˜å¿«æ·é”®ï¼Œè¯·æŒ‰ä½ä¸€ä¸ªæˆ–å¤šä¸ªä¿®é¥°é”®ï¼ŒåŒæ—¶æŒ‰å¿«æ·é”®çš„æœ€åä¸€ä¸ªé”®ã€‚ä¾‹å¦‚ï¼šè¦ä½¿ç”¨å¿«æ·é”® Command + Cï¼ˆæ‹·è´ï¼‰ï¼Œè¯·æŒ‰ä½ Command é”®å¹¶æŒ‰ C é”®ï¼Œç„¶ååŒæ—¶æ¾å¼€è¿™ä¸¤ä¸ªé”®ã€‚Mac èœå•å’Œé”®ç›˜é€šå¸¸ä½¿ç”¨æŸäº›æŒ‰é”®çš„ç¬¦å·ï¼Œå…¶ä¸­åŒ…æ‹¬ä»¥ä¸‹ä¿®é¥°é”®ï¼š Command âŒ˜ Shift â‡§ Option âŒ¥ Control âŒƒ Caps Lock â‡ª Fn å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Windows PC ä¸“ç”¨é”®ç›˜ï¼Œè¯·ç”¨ Alt é”®ä»£æ›¿ Option é”®ï¼Œç”¨ Windows æ ‡å¿—é”®ä»£æ›¿ Command é”®ã€‚æœ‰äº› Mac é”®ç›˜åœ¨é¡¶è¡Œä¸­è®¾æœ‰ç‰¹æ®ŠæŒ‰é”®ï¼Œå¿«æ·é”®ä¸­ä¹Ÿä¼šç”¨åˆ°å®ƒä»¬ï¼›è¿™äº›æŒ‰é”®ä¸Šæœ‰éŸ³é‡å›¾æ ‡ã€æ˜¾ç¤ºå±äº®åº¦å›¾æ ‡å’Œå…¶ä»–åŠŸèƒ½å›¾æ ‡ã€‚æŒ‰ä¸‹å›¾æ ‡é”®å¯æ‰§è¡Œç›¸åº”åŠŸèƒ½ï¼Œå°†å…¶ä¸ Fn é”®ç»„åˆå¯ç”¨ä½œ F1ã€F2ã€F3 æˆ–å…¶ä»–æ ‡å‡†åŠŸèƒ½é”®ã€‚ (æœ‰ç¦åˆ©åœ¨æœ€åå“¦~) ï£¿å¸¸ç”¨å¿«æ·é”®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152å¿«æ·é”® | æè¿°Command + Q | é€€å‡ºåº”ç”¨ç¨‹åºã€‚Command + W | å…³é—­æœ€å‰é¢çš„çª—å£ã€‚è¦å…³é—­è¯¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çª—å£ï¼Œè¯·æŒ‰ Command-Option-Wã€‚Command + i | æ˜¾ç¤ºæ–‡ä»¶å¤¹ç®€ä»‹ï¼ˆé€‰ä¸­æ–‡ä»¶å¤¹ï¼‰Command + O | æ‰“å¼€æ‰€é€‰é¡¹ï¼Œæˆ–æ‰“å¼€ä¸€ä¸ªå¯¹è¯æ¡†ä»¥é€‰æ‹©è¦æ‰“å¼€çš„æ–‡ä»¶ã€‚Command + P | æ‰“å°å½“å‰æ–‡ç¨¿ã€‚Command + A | å…¨é€‰å„é¡¹ã€‚Command + S | ä¿å­˜å½“å‰æ–‡ç¨¿ã€‚Command + F | æŸ¥æ‰¾ï¼šæ‰“å¼€â€œæŸ¥æ‰¾â€çª—å£ï¼Œæˆ–åœ¨æ–‡ç¨¿ä¸­æŸ¥æ‰¾é¡¹ç›®ã€‚Command + G | å†æ¬¡æŸ¥æ‰¾ï¼šæŸ¥æ‰¾ä¹‹å‰æ‰€æ‰¾åˆ°é¡¹ç›®å‡ºç°çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚è¦æŸ¥æ‰¾å‡ºç°çš„ä¸Šä¸€ä¸ªä½ç½®ï¼Œè¯·æŒ‰ Command + Shift + Gã€‚Command + H | éšè—æœ€å‰é¢çš„åº”ç”¨ç¨‹åºçš„çª—å£ã€‚è¦æŸ¥çœ‹æœ€å‰é¢çš„åº”ç”¨ç¨‹åºä½†éšè—æ‰€æœ‰å…¶ä»–åº”ç”¨ç¨‹åºï¼Œè¯·æŒ‰ Command + Option + Hã€‚Command + L | å½“å‰ç¨‹åºæ˜¯æµè§ˆå™¨æ—¶ï¼Œå¯ä»¥ç›´æ¥å®šä½åˆ°åœ°å€æ Command + Z | æ’¤é”€å‰ä¸€ä¸ªå‘½ä»¤ã€‚éšåä½ å¯ä»¥æŒ‰ Command + Shift + Z æ¥é‡åšï¼Œä»è€Œåå‘æ‰§è¡Œæ’¤é”€å‘½ä»¤ã€‚åœ¨æŸäº›åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥æ’¤é”€å’Œé‡åšå¤šä¸ªå‘½ä»¤ã€‚Command + X | å‰ªåˆ‡ï¼šåˆ é™¤æ‰€é€‰é¡¹å¹¶å°†å…¶æ‹·è´åˆ°å‰ªè´´æ¿ã€‚Command + C | å°†æ‰€é€‰é¡¹æ‹·è´åˆ°å‰ªè´´æ¿ã€‚è¿™åŒæ ·é€‚ç”¨äº Finder ä¸­çš„æ–‡ä»¶ã€‚Command + V | å°†å‰ªè´´æ¿çš„å†…å®¹ç²˜è´´åˆ°å½“å‰æ–‡ç¨¿æˆ–åº”ç”¨ç¨‹åºä¸­ã€‚è¿™åŒæ ·é€‚ç”¨äº Finder ä¸­çš„æ–‡ä»¶ã€‚Command + N | æ–°å»ºï¼šæ‰“å¼€ä¸€ä¸ªæ–°æ–‡ç¨¿æˆ–çª—å£ã€‚Command + M | å°†æœ€å‰é¢çš„çª—å£æœ€å°åŒ–è‡³ Dockã€‚è¦æœ€å°åŒ–æœ€å‰é¢çš„åº”ç”¨ç¨‹åºçš„æ‰€æœ‰çª—å£ï¼Œè¯·æŒ‰ Command + Option + Mã€‚Option + Command + Esc | å¼ºåˆ¶é€€å‡ºï¼šé€‰æ‹©è¦å¼ºåˆ¶é€€å‡ºçš„åº”ç”¨ç¨‹åºã€‚æˆ–è€…ï¼ŒæŒ‰ä½ Command + Shift + Option + Esc 3 ç§’é’Ÿæ¥ä»…å¼ºåˆ¶æœ€å‰é¢çš„åº”ç”¨ç¨‹åºé€€å‡ºã€‚Command + æ³¢æµªå·(~) | åˆ‡æ¢çª—å£ï¼šåˆ‡æ¢åˆ°æœ€å‰ç«¯åº”ç”¨ä¸­ä¸‹ä¸€ä¸ªæœ€è¿‘ä½¿ç”¨çš„çª—å£ã€‚Command + Tab | åˆ‡æ¢åº”ç”¨ç¨‹åºï¼šåœ¨æ‰“å¼€çš„åº”ç”¨ç¨‹åºä¸­åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæœ€è¿‘ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚Shift + Command + 3 | å±å¹•å¿«ç…§ï¼šæˆªæ¡Œé¢å±ã€‚Shift + Command + 4 | å±å¹•å¿«ç…§ï¼šè‡ªç”±æˆªå±Command + ç©ºæ ¼é”® | Spotlightï¼šæ˜¾ç¤ºæˆ–éšè— Spotlight æœç´¢æ ã€‚è¦ä» Finder çª—å£æ‰§è¡Œ Spotlight æœç´¢ï¼Œè¯·æŒ‰ Command + Option + ç©ºæ ¼é”®ã€‚å¦‚æœä½ ä½¿ç”¨å¤šä¸ªè¾“å…¥æºä»¥ä¾¿ç”¨ä¸åŒçš„è¯­è¨€é”®å…¥å†…å®¹ï¼Œè¿™äº›å¿«æ·é”®ä¼šæ›´æ”¹è¾“å…¥æºè€Œéæ˜¾ç¤º Spotlightã€‚ç©ºæ ¼é”® | å¿«é€ŸæŸ¥çœ‹ï¼šä½¿ç”¨å¿«é€ŸæŸ¥çœ‹é¢„è§ˆæ‰€é€‰é¡¹ã€‚Command + é€—å· (,) | åå¥½è®¾ç½®ï¼šæ‰“å¼€æœ€å‰é¢çš„åº”ç”¨ç¨‹åºçš„åå¥½è®¾ç½®ã€‚Command + Delete | æŠŠé€‰ä¸­çš„èµ„æºç§»åˆ°åºŸçº¸ç¯“Shift + Command + Delete | æ¸…å€’åºŸçº¸ç¯“(æœ‰ç¡®è®¤)Shift + Option + Command + Delete | ç›´æ¥æ¸…å€’åºŸçº¸ç¯“é€‰ä¸­æ–‡ä»¶ + enter | ä¿®æ”¹æ–‡ä»¶åCommand + [ | å·¦ç¼©è¿›Command + ] | å³ç¼©è¿›Ctrl + â†‘ | è¿›å…¥å±å¹•é€‰æ‹©ç•Œé¢ Ctrl + â†“ | è¿›å…¥é€‰å®šçš„å±å¹•Ctrl + â†ï¼â†’ | åˆ‡æ¢å±å¹•Command + option + control + Eject | å…³æœºCommand + option + Eject | ç¡çœ Command + control + Eject | é‡å¯Command + shift + control + Q | æ³¨é”€ ï£¿å¯åŠ¨ç»„åˆé”®åœ¨å¯åŠ¨æœŸé—´æŒ‰ä½æŸäº›é”®å¯ä»¥ä½¿ç”¨ä¸€äº› Mac åŠŸèƒ½ã€‚ è¯·åœ¨ Mac å¼€æœºå¹¶å¬åˆ°å¯åŠ¨å£°åç«‹å³æŒ‰ä½è¿™äº›é”®ã€‚è¯·ä¸€ç›´æŒ‰ä½ï¼Œç›´è‡³æ‰€è¿°è¡Œä¸ºå‡ºç°ã€‚ä»¥ä¸‹ç»„åˆé€‚ç”¨äºåŸºäº Intel çš„ Mac ç”µè„‘ã€‚ 123456789101112131415161718åœ¨å¯åŠ¨æœŸé—´æŒ‰ä½ | æè¿°Shift â‡§ | ä»¥å®‰å…¨æ¨¡å¼å¯åŠ¨ã€‚Option âŒ¥ | å¯åŠ¨è¿›å…¥å¯åŠ¨ç®¡ç†å™¨ã€‚C | ä»å¯å¼•å¯¼çš„ CDã€DVD æˆ– USB é—ªå­˜é©±åŠ¨å™¨ï¼ˆå¦‚ OS X å®‰è£…ä»‹è´¨ï¼‰å¯åŠ¨ã€‚D | å¯åŠ¨è¿›å…¥ Apple Hardware Test æˆ– Apple Diagnosticsï¼Œå…·ä½“å–å†³äºæ‚¨æ­£åœ¨ä½¿ç”¨çš„ Macã€‚Option-D | é€šè¿‡äº’è”ç½‘å¯åŠ¨è¿›å…¥ Apple Hardware Test æˆ– Apple Diagnosticsã€‚N | ä»å…¼å®¹çš„ NetBoot æœåŠ¡å™¨å¯åŠ¨ã€‚Option-N | ä½¿ç”¨é»˜è®¤çš„å¯åŠ¨æ˜ åƒä» NetBoot æœåŠ¡å™¨å¯åŠ¨ã€‚T | ä»¥ç›®æ ‡ç£ç›˜æ¨¡å¼å¯åŠ¨ã€‚X | ä» OS X å¯åŠ¨å®—å·å¯åŠ¨ï¼Œå¦åˆ™ Mac å°†ä»é OS X å¯åŠ¨å®—å·å¯åŠ¨ã€‚Command + V | ä»¥è¯¦ç»†æ¨¡å¼å¯åŠ¨ã€‚Command + S | ä»¥å•ç”¨æˆ·æ¨¡å¼å¯åŠ¨ã€‚Command (âŒ˜) + R | ä» OS X æ¢å¤åŠŸèƒ½å¯åŠ¨ã€‚Command + Option + R | é€šè¿‡äº’è”ç½‘ä» OS X æ¢å¤åŠŸèƒ½å¯åŠ¨ã€‚Command + Option + P + R | é‡ç½® NVRAMã€‚å½“å†æ¬¡å¬åˆ°å¯åŠ¨å£°åï¼Œè¯·æ¾å¼€è¿™äº›é”®ã€‚æ¨å‡ºé”® (â)ã€F12ã€é¼ æ ‡é”®æˆ–è§¦æ§æ¿æŒ‰é’® | æ¨å‡ºå¯ç§»åŠ¨ä»‹è´¨ï¼Œå¦‚å…‰ç›˜ã€‚ Finder å¿«æ·é”®1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768å¿«æ·é”® | æè¿°Command + D | å¤åˆ¶æ‰€é€‰æ–‡ä»¶ã€‚Command + E | æ¨å‡ºæ‰€é€‰ç£ç›˜æˆ–å®—å·ã€‚Command + F | åœ¨ Finder çª—å£ä¸­å¼€å§‹ Spotlight æœç´¢ã€‚Command + I | æ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶çš„â€œæ˜¾ç¤ºç®€ä»‹â€çª—å£ã€‚Shift + Command + C | æ‰“å¼€â€œç”µè„‘â€çª—å£ã€‚Shift + Command + D | æ‰“å¼€â€œæ¡Œé¢â€æ–‡ä»¶å¤¹ã€‚Shift + Command + F | æ‰“å¼€â€œæˆ‘çš„æ‰€æœ‰æ–‡ä»¶â€çª—å£ã€‚Shift + Command + G | æ‰“å¼€â€œå‰å¾€æ–‡ä»¶å¤¹â€çª—å£ã€‚Shift + Command + H | æ‰“å¼€å½“å‰ macOS ç”¨æˆ·å¸æˆ·çš„ä¸ªäººæ–‡ä»¶å¤¹ã€‚Shift + Command + I | æ‰“å¼€ iCloud Driveã€‚Shift + Command + K | æ‰“å¼€â€œç½‘ç»œâ€çª—å£ã€‚Option + Command + L | æ‰“å¼€â€œä¸‹è½½â€æ–‡ä»¶å¤¹ã€‚Shift + Command + O | æ‰“å¼€â€œæ–‡ç¨¿â€æ–‡ä»¶å¤¹ã€‚Shift + Command + R | æ‰“å¼€â€œAirDropâ€çª—å£ã€‚Shift + Command + T | å°†æ‰€é€‰çš„ Finder é¡¹ç›®æ·»åŠ åˆ° Dockï¼ˆOS X Mountain Lion æˆ–è¾ƒæ—©ç‰ˆæœ¬ï¼‰Control + Shift + Command + T | å°†æ‰€é€‰çš„ Finder é¡¹ç›®æ·»åŠ åˆ° Dockï¼ˆOS X Mavericks æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰Shift + Command + U | æ‰“å¼€â€œå®ç”¨å·¥å…·â€æ–‡ä»¶å¤¹ã€‚Option + Command + D | æ˜¾ç¤ºæˆ–éšè— Dockã€‚å³ä½¿æ‚¨æœªæ‰“å¼€ Finderï¼Œæ­¤å¿«æ·é”®é€šå¸¸ä¹Ÿæœ‰æ•ˆã€‚Control + Command + T | å°†æ‰€é€‰é¡¹æ·»åŠ åˆ°è¾¹æ ï¼ˆOS X Mavericks æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚Option + Command + P | éšè—æˆ–æ˜¾ç¤º Finder çª—å£ä¸­çš„è·¯å¾„æ ã€‚Option + Command + S | éšè—æˆ–æ˜¾ç¤º Finder çª—å£ä¸­çš„è¾¹æ ã€‚Commandâ€“æ–œçº¿ (/) | éšè—æˆ–æ˜¾ç¤º Finder çª—å£ä¸­çš„çŠ¶æ€æ ã€‚Command + J | è°ƒå‡ºâ€œæ˜¾ç¤ºâ€é€‰é¡¹ã€‚Command + K | æ‰“å¼€â€œè¿æ¥æœåŠ¡å™¨â€çª—å£ã€‚Command + L | ä¸ºæ‰€é€‰é¡¹åˆ¶ä½œæ›¿èº«ã€‚Command + N | æ‰“å¼€ä¸€ä¸ªæ–°çš„ Finder çª—å£ã€‚Shift + Command + N | æ–°å»ºæ–‡ä»¶å¤¹ã€‚Option + Command + N | æ–°å»ºæ™ºèƒ½æ–‡ä»¶å¤¹ã€‚Command + R | æ˜¾ç¤ºæ‰€é€‰æ›¿èº«çš„åŸå§‹æ–‡ä»¶ã€‚Command + T | åœ¨å½“å‰ Finder çª—å£ä¸­æ‰“å¼€å•ä¸ªæ ‡ç­¾æ—¶æ˜¾ç¤ºæˆ–éšè—æ ‡ç­¾æ ã€‚Shift + Command + T | æ˜¾ç¤ºæˆ–éšè— Finder æ ‡ç­¾ã€‚Option + Command + T | åœ¨å½“å‰ Finder çª—å£ä¸­æ‰“å¼€å•ä¸ªæ ‡ç­¾æ—¶æ˜¾ç¤ºæˆ–éšè—å·¥å…·æ ã€‚Option + Command + V | ç§»åŠ¨ï¼šå°†å‰ªè´´æ¿ä¸­çš„æ–‡ä»¶ä»å…¶åŸå§‹ä½ç½®ç§»åŠ¨åˆ°å½“å‰ä½ç½®ã€‚Option + Command + Y | æ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶çš„å¿«é€ŸæŸ¥çœ‹å¹»ç¯ç‰‡æ˜¾ç¤ºã€‚Command + Y | ä½¿ç”¨â€œå¿«é€ŸæŸ¥çœ‹â€é¢„è§ˆæ‰€é€‰æ–‡ä»¶ã€‚Command + 1 | ä»¥å›¾æ ‡æ–¹å¼æ˜¾ç¤º Finder çª—å£ä¸­çš„é¡¹ç›®ã€‚Command + 2 | ä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤º Finder çª—å£ä¸­çš„é¡¹ç›®ã€‚Command + 3 | ä»¥åˆ†æ æ–¹å¼æ˜¾ç¤º Finder çª—å£ä¸­çš„é¡¹ç›®ã€‚ Command + 4 | ä»¥ Cover Flow æ–¹å¼æ˜¾ç¤º Finder çª—å£ä¸­çš„é¡¹ç›®ã€‚Command + å·¦ä¸­æ‹¬å· ([) | å‰å¾€ä¸Šä¸€æ–‡ä»¶å¤¹ã€‚Command + å³ä¸­æ‹¬å· (]) | å‰å¾€ä¸‹ä¸€æ–‡ä»¶å¤¹ã€‚Command + ä¸Šç®­å¤´ | æ‰“å¼€åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚Command + Control + ä¸Šç®­å¤´ | åœ¨æ–°çª—å£ä¸­æ‰“å¼€åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚Command + ä¸‹ç®­å¤´ | æ‰“å¼€æ‰€é€‰é¡¹ã€‚Command + Mission Control | æ˜¾ç¤ºæ¡Œé¢ã€‚å³ä½¿æ‚¨æœªæ‰“å¼€ Finderï¼Œæ­¤å¿«æ·é”®ä¹Ÿæœ‰æ•ˆã€‚Command + è°ƒé«˜äº®åº¦ | å¼€å¯æˆ–å…³é—­ç›®æ ‡æ˜¾ç¤ºå™¨æ¨¡å¼ã€‚Command + è°ƒä½äº®åº¦ | å½“ Mac è¿æ¥åˆ°å¤šä¸ªæ˜¾ç¤ºå™¨æ—¶æ‰“å¼€æˆ–å…³é—­æ˜¾ç¤ºå™¨é•œåƒåŠŸèƒ½ã€‚å³ç®­å¤´ | æ‰“å¼€æ‰€é€‰æ–‡ä»¶å¤¹ã€‚æ­¤å¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚å·¦ç®­å¤´ | å…³é—­æ‰€é€‰æ–‡ä»¶å¤¹ã€‚æ­¤å¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚Option + è¿æŒ‰ | åœ¨å•ç‹¬çª—å£ä¸­æ‰“å¼€æ–‡ä»¶å¤¹ï¼Œå¹¶å…³é—­å½“å‰çª—å£ã€‚Command + è¿æŒ‰ | åœ¨å•ç‹¬æ ‡ç­¾æˆ–çª—å£ä¸­æ‰“å¼€æ–‡ä»¶å¤¹ã€‚Command + Delete | å°†æ‰€é€‰é¡¹ç§»åˆ°åºŸçº¸ç¯“ã€‚Shift + Command + Delete| æ¸…å€’åºŸçº¸ç¯“ã€‚Option + Shift + Command + Delete| æ¸…å€’åºŸçº¸ç¯“ï¼ˆä¸æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼‰ã€‚Command + Y | ä½¿ç”¨â€œå¿«é€ŸæŸ¥çœ‹â€é¢„è§ˆæ–‡ä»¶ã€‚Option + è°ƒé«˜äº®åº¦ | æ‰“å¼€â€œæ˜¾ç¤ºå™¨â€åå¥½è®¾ç½®ã€‚æ­¤å¿«æ·é”®å¯ä¸ä»»ä¸€äº®åº¦é”®æ­é…ä½¿ç”¨ã€‚Option + Mission Control | æ‰“å¼€â€œMission Controlâ€åå¥½è®¾ç½®ã€‚Option + è°ƒé«˜éŸ³é‡ | æ‰“å¼€â€œå£°éŸ³â€åå¥½è®¾ç½®ã€‚æ­¤å¿«æ·é”®å¯ä¸ä»»ä¸€éŸ³é‡é”®æ­é…ä½¿ç”¨ã€‚æ‹–ç§»æ—¶æŒ‰ Command é”®| å°†æ‹–ç§»çš„é¡¹ç›®ç§»åˆ°å…¶ä»–å®—å·æˆ–ä½ç½®ã€‚æ‹–ç§»é¡¹ç›®æ—¶æŒ‡é’ˆä¼šéšä¹‹å˜åŒ–ã€‚æ‹–ç§»æ—¶æŒ‰ Option é”® | æ‹·è´æ‹–ç§»çš„é¡¹ç›®ã€‚æ‹–ç§»é¡¹ç›®æ—¶æŒ‡é’ˆä¼šéšä¹‹å˜åŒ–ã€‚æ‹–ç§»æ—¶æŒ‰ä¸‹ Option + Command | ä¸ºæ‹–ç§»çš„é¡¹ç›®åˆ¶ä½œæ›¿èº«ã€‚æ‹–ç§»é¡¹ç›®æ—¶æŒ‡é’ˆä¼šéšä¹‹å˜åŒ–ã€‚Option + ç‚¹æŒ‰ä¼¸ç¼©ä¸‰è§’å½¢| æ‰“å¼€æ‰€é€‰æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶å¤¹ã€‚æ­¤å¿«æ·é”®ä»…åœ¨åˆ—è¡¨è§†å›¾ä¸­æœ‰æ•ˆã€‚Command + ç‚¹æŒ‰çª—å£æ ‡é¢˜ | æŸ¥çœ‹åŒ…å«å½“å‰æ–‡ä»¶å¤¹çš„æ–‡ä»¶å¤¹ã€‚ æ–‡æ¡£å¿«æ·é”®12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970å¿«æ·é”® | æè¿°Command + B | ä»¥ç²—ä½“æ˜¾ç¤ºæ‰€é€‰æ–‡æœ¬ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­ç²—ä½“æ˜¾ç¤ºåŠŸèƒ½ã€‚ Command + I | ä»¥æ–œä½“æ˜¾ç¤ºæ‰€é€‰æ–‡æœ¬ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­æ–œä½“æ˜¾ç¤ºåŠŸèƒ½ã€‚Command + U | å¯¹æ‰€é€‰æ–‡æœ¬åŠ ä¸‹åˆ’çº¿ï¼Œæˆ–è€…æ‰“å¼€æˆ–å…³é—­åŠ ä¸‹åˆ’çº¿åŠŸèƒ½ã€‚Command + T | æ˜¾ç¤ºæˆ–éšè—â€œå­—ä½“â€çª—å£.Command + D | ä»â€œæ‰“å¼€â€å¯¹è¯æ¡†æˆ–â€œå­˜å‚¨â€å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œæ¡Œé¢â€æ–‡ä»¶å¤¹ã€‚Control + Command + D | æ˜¾ç¤ºæˆ–éšè—æ‰€é€‰å­—è¯çš„å®šä¹‰ã€‚Shift + Command + å†’å· (:) | æ˜¾ç¤ºâ€œæ‹¼å†™å’Œè¯­æ³•â€çª—å£ã€‚Command + åˆ†å· (;) | æŸ¥æ‰¾æ–‡ç¨¿ä¸­æ‹¼å†™é”™è¯¯çš„å­—è¯ã€‚Option + Delete | åˆ é™¤æ’å…¥ç‚¹å·¦è¾¹çš„å­—è¯ã€‚Control + H | åˆ é™¤æ’å…¥ç‚¹å·¦è¾¹çš„å­—ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Delete é”®ã€‚Control + D | åˆ é™¤æ’å…¥ç‚¹å³è¾¹çš„å­—ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Fn-Deleteã€‚Fn + Delete | åœ¨æ²¡æœ‰å‘å‰åˆ é™¤ é”®çš„é”®ç›˜ä¸Šå‘å‰åˆ é™¤ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Control-Dã€‚Control + K | åˆ é™¤æ’å…¥ç‚¹ä¸è¡Œæˆ–æ®µè½æœ«å°¾å¤„ä¹‹é—´çš„æ–‡æœ¬ã€‚Command + Delete | åœ¨åŒ…å«â€œåˆ é™¤â€æˆ–â€œä¸å­˜å‚¨â€æŒ‰é’®çš„å¯¹è¯æ¡†ä¸­é€‰æ‹©â€œåˆ é™¤â€æˆ–â€œä¸å­˜å‚¨â€ã€‚Fn + ä¸Šç®­å¤´ | å‘ä¸Šç¿»é¡µï¼šå‘ä¸Šæ»šåŠ¨ä¸€é¡µã€‚ Fn + ä¸‹ç®­å¤´ | å‘ä¸‹ç¿»é¡µï¼šå‘ä¸‹æ»šåŠ¨ä¸€é¡µã€‚Fn + å·¦ç®­å¤´ | å¼€å¤´ï¼šæ»šåŠ¨åˆ°æ–‡ç¨¿å¼€å¤´ã€‚Fn + å³ç®­å¤´ | ç»“å°¾ï¼šæ»šåŠ¨åˆ°æ–‡ç¨¿æœ«å°¾ã€‚Command + ä¸Šç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³æ–‡ç¨¿å¼€å¤´ã€‚Command + ä¸‹ç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³æ–‡ç¨¿æœ«å°¾ã€‚Command + å·¦ç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³å½“å‰è¡Œçš„è¡Œé¦–ã€‚Command + å³ç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³å½“å‰è¡Œçš„è¡Œå°¾ã€‚Option + å·¦ç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³ä¸Šä¸€å­—è¯çš„è¯é¦–ã€‚Option + å³ç®­å¤´ | å°†æ’å…¥ç‚¹ç§»è‡³ä¸‹ä¸€å­—è¯çš„è¯å°¾ã€‚Shift + Command + ä¸Šç®­å¤´ | é€‰ä¸­æ’å…¥ç‚¹ä¸æ–‡ç¨¿å¼€å¤´ä¹‹é—´çš„æ–‡æœ¬ã€‚Shift + Command + ä¸‹ç®­å¤´ | é€‰ä¸­æ’å…¥ç‚¹ä¸æ–‡ç¨¿æœ«å°¾ä¹‹é—´çš„æ–‡æœ¬ã€‚Shift + Command + å·¦ç®­å¤´ | é€‰ä¸­æ’å…¥ç‚¹ä¸å½“å‰è¡Œè¡Œé¦–ä¹‹é—´çš„æ–‡æœ¬ã€‚Shift + Command + å³ç®­å¤´ | é€‰ä¸­æ’å…¥ç‚¹ä¸å½“å‰è¡Œè¡Œå°¾ä¹‹é—´çš„æ–‡æœ¬ã€‚Shift + ä¸Šç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°ä¸Šä¸€è¡Œç›¸åŒæ°´å¹³ä½ç½®çš„æœ€è¿‘å­—ç¬¦å¤„ã€‚Shift + ä¸‹ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°ä¸‹ä¸€è¡Œç›¸åŒæ°´å¹³ä½ç½®çš„æœ€è¿‘å­—ç¬¦å¤„ã€‚Shift + å·¦ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´å‘å·¦æ‰©å±•ä¸€ä¸ªå­—ç¬¦ã€‚Shift + å³ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´å‘å³æ‰©å±•ä¸€ä¸ªå­—ç¬¦ã€‚Option + Shift + ä¸Šç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰æ®µè½çš„æ®µé¦–ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°ä¸‹ä¸€æ®µè½çš„æ®µé¦–ã€‚Option + Shift + ä¸‹ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰æ®µè½çš„æ®µå°¾ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°ä¸‹ä¸€æ®µè½çš„æ®µå°¾ã€‚Option + Shift + å·¦ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰å­—è¯çš„è¯é¦–ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°åä¸€å­—è¯çš„è¯é¦–ã€‚Option + Shift + å³ç®­å¤´ | å°†æ–‡æœ¬é€‰æ‹©èŒƒå›´æ‰©å±•åˆ°å½“å‰å­—è¯çš„è¯å°¾ï¼Œå†æŒ‰ä¸€æ¬¡åˆ™æ‰©å±•åˆ°åä¸€å­—è¯çš„è¯å°¾ã€‚Control + A | ç§»è‡³è¡Œæˆ–æ®µè½çš„å¼€å¤´ã€‚Control + E | ç§»è‡³è¡Œæˆ–æ®µè½çš„æœ«å°¾ã€‚Control + F | å‘å‰ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚Control + B | å‘åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ã€‚Control + L | å°†å…‰æ ‡æˆ–æ‰€é€‰å†…å®¹ç½®äºå¯è§åŒºåŸŸä¸­å¤®ã€‚Control + P | ä¸Šç§»ä¸€è¡Œã€‚Control + N | ä¸‹ç§»ä¸€è¡Œã€‚Control + O | åœ¨æ’å…¥ç‚¹åæ’å…¥ä¸€è¡Œã€‚Control-T | å°†æ’å…¥ç‚¹åé¢çš„å­—ç¬¦ä¸æ’å…¥ç‚¹å‰é¢çš„å­—ç¬¦äº¤æ¢ã€‚Command + å·¦èŠ±æ‹¬å· (&#123;) | å·¦å¯¹é½ã€‚Command + å³èŠ±æ‹¬å· (&#125;) | å³å¯¹é½ã€‚Shift + Command + ç«–çº¿ | å±…ä¸­å¯¹é½ã€‚Option + Command + F | å‰å¾€æœç´¢æ ã€‚ Option + Command + T | æ˜¾ç¤ºæˆ–éšè—åº”ç”¨ä¸­çš„å·¥å…·æ ã€‚Option + Command + C | æ‹·è´æ ·å¼ï¼šå°†æ‰€é€‰é¡¹çš„æ ¼å¼è®¾ç½®æ‹·è´åˆ°å‰ªè´´æ¿ã€‚Option + Command + V | ç²˜è´´æ ·å¼ï¼šå°†æ‹·è´çš„æ ·å¼åº”ç”¨åˆ°æ‰€é€‰é¡¹ã€‚Option + Shift + Command + V | ç²˜è´´å¹¶åŒ¹é…æ ·å¼ï¼šå°†å‘¨å›´å†…å®¹çš„æ ·å¼åº”ç”¨åˆ°ç²˜è´´åœ¨è¯¥å†…å®¹ä¸­çš„é¡¹ç›®ã€‚Option + Command + I | æ˜¾ç¤ºæˆ–éšè—æ£€æŸ¥å™¨çª—å£ã€‚Shift + Command + P | é¡µé¢è®¾ç½®ï¼šæ˜¾ç¤ºç”¨äºé€‰æ‹©æ–‡ç¨¿è®¾ç½®çš„çª—å£ã€‚Shift + Command + S | æ˜¾ç¤ºâ€œå­˜å‚¨ä¸ºâ€å¯¹è¯æ¡†æˆ–å¤åˆ¶å½“å‰æ–‡ç¨¿ã€‚Shift + Command + å‡å· (-) | ç¼©å°æ‰€é€‰é¡¹ã€‚Shift + Command + åŠ å· (+)| æ”¾å¤§æ‰€é€‰é¡¹ã€‚Commandâ€“ç­‰å· (=) å¯æ‰§è¡Œç›¸åŒçš„åŠŸèƒ½ã€‚Shift + Command + é—®å· (?)| æ‰“å¼€â€œå¸®åŠ©â€èœå•ã€‚ æˆªå›¾æ“ä½œ123456æˆªå›¾å¿«æ·é”® | å«ä¹‰command + shift + 3 | å…¨å±æˆªå›¾ï¼Œä¿å­˜æˆªå›¾åˆ°æ¡Œé¢æ–‡ä»¶command + shift + 4 | é¼ æ ‡é€‰å®šåŒºåŸŸæˆªå›¾ï¼Œä¿å­˜æˆªå›¾åˆ°æ¡Œé¢æ–‡ä»¶command + shift + control + 3 | å…¨å±æˆªå›¾ï¼Œä¿å­˜åˆ°å‰ªè´´æ¿command + shift + control + 4 | é¼ æ ‡é€‰å®šåŒºåŸŸæˆªå›¾ï¼Œä¿å­˜åˆ°å‰ªè´´æ¿command + shift( + control) + 4 | ç„¶åæŒ‰ä¸‹ç©ºæ ¼é”®ï¼Œé¼ æ ‡å˜æˆå°ç›¸æœºï¼Œé€‰æ‹©æŸä¸€çª—å£åç‚¹å‡»é¼ æ ‡å·¦é”®å¯¹å•ä¸ªçª—å£æˆªå›¾ã€‚ä¸å¿…æ‹…å¿ƒå…¶å®ƒçª—å£çš„é®æŒ¡ã€‚ ç¡çœ ã€æ³¨é”€å’Œå…³æœºå¿«æ·é”®12345678910å¿«æ·é”® | æè¿°ç”µæºæŒ‰é’® | è½»ç‚¹å¯æ‰“å¼€ Mac æˆ–å°† Mac ä»ç¡çœ çŠ¶æ€å”¤é†’ã€‚å½“ Mac å¤„äºå”¤é†’çŠ¶æ€æ—¶ï¼ŒæŒ‰ä½æ­¤æŒ‰é’® 1.5 ç§’é’Ÿä¼šæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¯¢é—®æ‚¨æ˜¯è¦é‡æ–°å¯åŠ¨ã€ç¡çœ è¿˜æ˜¯å…³æœºã€‚å¦‚æœæ‚¨ä¸æƒ³ç­‰å¾… 1.5 ç§’é’Ÿï¼Œè¯·æŒ‰ä¸‹ Control + ç”µæºæŒ‰é’®æˆ– Control + ä»‹è´¨æ¨å‡ºé”® ã€‚æŒ‰ä½æ­¤æŒ‰é’® 5 ç§’é’Ÿä¼šå¼ºåˆ¶ Mac å…³æœºã€‚Control + Commandâ€“ç”µæºæŒ‰é’® | å¼ºåˆ¶ Mac é‡æ–°å¯åŠ¨ã€‚Control + Shift + ï¼ˆç”µæºæŒ‰é’®æˆ–ä»‹è´¨æ¨å‡ºé”® ï¼‰ | å°†æ˜¾ç¤ºå™¨ç½®äºç¡çœ çŠ¶æ€ã€‚Control + Command + ä»‹è´¨æ¨å‡ºé”® | é€€å‡ºæ‰€æœ‰åº”ç”¨ç¨‹åºï¼Œç„¶åé‡æ–°å¯åŠ¨ Macã€‚å¦‚æœä»»ä½•æ‰“å¼€çš„æ–‡ç¨¿æœ‰æœªå­˜å‚¨çš„æ›´æ”¹ï¼Œç³»ç»Ÿå°†è¯¢é—®æ‚¨æ˜¯å¦è¦å­˜å‚¨è¿™äº›æ›´æ”¹ã€‚Control + Option + Command + ï¼ˆç”µæºæŒ‰é’®æˆ–ä»‹è´¨æ¨å‡ºé”® ï¼‰| é€€å‡ºæ‰€æœ‰åº”ç”¨ç¨‹åºï¼Œç„¶åå…³é—­ Macã€‚å¦‚æœä»»ä½•æ‰“å¼€çš„æ–‡ç¨¿æœ‰æœªå­˜å‚¨çš„æ›´æ”¹ï¼Œç³»ç»Ÿå°†è¯¢é—®æ‚¨æ˜¯å¦è¦å­˜å‚¨è¿™äº›æ›´æ”¹ã€‚Shift + Command + Q | æ³¨é”€æ‚¨çš„ macOS ç”¨æˆ·å¸æˆ·ã€‚ç³»ç»Ÿå°†æç¤ºæ‚¨ç¡®è®¤ã€‚Option + Shift + Command + Q | ç«‹å³æ³¨é”€æ‚¨çš„ macOS ç”¨æˆ·å¸æˆ·ï¼Œä¸”ç³»ç»Ÿä¸æç¤ºæ‚¨ç¡®è®¤ã€‚ åœ¨æµè§ˆå™¨ä¸­123456789101112131415Control + Tab | è½¬å‘ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ Command + L | å…‰æ ‡ç›´æ¥è·³è‡³åœ°å€æ  Control + Tab | è½¬å‘ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ Control + Shift + Tab | è½¬å‘ä¸Šä¸€ä¸ªæ ‡ç­¾é¡µ Command + åŠ å·æˆ–ç­‰å· | æ”¾å¤§é¡µé¢ Command + å‡å· | ç¼©å°é¡µé¢Command + R | åˆ·æ–°é¡µé¢Command + + | å¤§å±å¹•çš„æ—¶å€™å¾ˆå®ç”¨ï¼Œæ”¾å¤§é¡µé¢ï¼ŒåŸºæœ¬ä¹Ÿæ˜¯å…¨å±€å‹çš„ã€‚ 0æ˜¯æ¢å¤é»˜è®¤å¤§å°Command + W | å…³é—­å½“å‰æ ‡ç­¾ã€‚ä¸è¦å’Œé€€å‡ºæŒ‰é”™äº†ã€‚Command + Q | é€€å‡ºå½“å‰è½¯ä»¶ï¼Œå…¶ä»–è½¯ä»¶ä¹Ÿéƒ½å¯ä»¥ç”¨ã€‚Command + D | æ”¶è—å½“å‰é¡µé¢ç©ºæ ¼ | å±å¹•ä¸‹æ»šä¸€é¡µSafariçš„æ¢å¤åˆšå…³é—­æ ‡ç­¾å°±æ˜¯ç†Ÿæ‚‰çš„ Command + Zã€‚`Chrome` æ˜¯å’Œæ‰“å¼€å·®ä¸å¤šçš„ï¼ŒCommand + Shift + Tã€‚Chromeè¿™ä¸ªåŠŸèƒ½æ›´å¼ºå¤§ï¼Œå°±æ˜¯å¯ä»¥æŒ‰é¡ºåºæ¢å¤ï¼Œä½†æ˜¯Safariåªèƒ½æ¢å¤æœ€è¿‘çš„ä¸€ä¸ªã€‚ Xcode å¿«æ·é”®Cmd + Shirt + N | æ–°å»ºå·¥ç¨‹Cmd + N | æ–°å»ºCmd + R | è¿è¡ŒCmd + . | åœæ­¢è¿è¡ŒCmd + B | ç¼–è¯‘Cmd + Shirt + B | ç¼–è¯‘ï¼Œé™æ€å†…å­˜åˆ†æï¼Œå¯ä»¥æ£€æŸ¥ç¨‹åºç»“æ„ä¸Šæ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²Cmd + Q | é€€å‡ºåº”ç”¨ç¨‹åº Cmd + 0 | å·¦ä¾§å¯¼èˆªçª—å£å¼€å¯å’Œå…³é—­Cmd + (1 - 7) | å·¦ä¾§å¯¼èˆªçª—å£çš„é€‰æ‹©ï¼ˆé¡¹ç›®ï¼Œç¬¦å·ï¼Œæœç´¢ï¼Œé—®é¢˜ï¼Œè°ƒè¯•ï¼Œæ–­ç‚¹ï¼Œæ—¥å¿—ï¼‰ Cmd + option + 0 | å³ä¾§å·¥å…·çª—å£å¼€å¯å’Œå…³é—­Cmd + option + (1 - 6) | å³ä¾§å·¥å…·çª—å£çš„é€‰æ‹© Cmd + option + å›è½¦ | æ‰“å¼€æ§åˆ¶å™¨å¯¹åº”çš„æ–‡ä»¶ï¼ˆStoryboardï¼‰Cmd + å›è½¦ | å…³é—­æ§åˆ¶å™¨å¯¹åº”çš„æ–‡ä»¶,åªæ˜¾ç¤ºä¸»çª—å£ Cmd ï¼‹ â†‘ï¼â†“ ï¼â†ï¼â†’ | å…‰æ ‡ç§»åŠ¨åˆ°æ–‡å­—çš„æœ€ä¸Šï¼ä¸‹ï¼å·¦ï¼å³Cmd + ctrl + â†/â†’ | æŒ‰æµè§ˆçš„å…ˆåé¡ºåºåˆ‡æ¢æ–‡ä»¶Cmd + ctrl + â†‘ï¼â†“ | .h å’Œ .m åˆ‡æ¢ Cmd + é¼ æ ‡å·¦é”®(å‡ºç°å°æ‰‹) | è¿›å…¥æŸ¥çœ‹ä¸€äº›ç±»/æ–¹æ³•option + é¼ æ ‡å·¦é”®(å‡ºç°é—®å·) | æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ Cmd + / | é€‰ä¸­åï¼ŒåŠ æ³¨é‡Š//Cmd + / | é€‰ä¸­åï¼Œå–æ¶ˆæ³¨é‡Š Cmd + shift + ç®­å¤´ | å¿«é€Ÿé€‰ä¸­ / å¿«é€Ÿç‚¹å‡»é¼ æ ‡ä¸‰ä¸‹Cmd + delete | åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å†…å®¹ Cmd + [ | ç¼©é€€Cmd + ] | ç¼©è¿›Cmd + option + [ | å‘ä¸Šç§»åŠ¨Cmd + option + ] | å‘ä¸‹ç¼©è¿› Cmd + F | æœç´¢Cmd + shift + f | å…¨å±€æœç´¢Cmd + ctrl + e | å…¨å±€ä¿®æ”¹Cmd + L | ç‚¹ä½æœç´¢å½“å‰è¡Œ control + 6 | å¼¹å‡ºå½“å‰æ–‡ä»¶æ–¹æ³•åˆ—è¡¨esc | æ–¹æ³•è‡ªåŠ¨è¡¥å…¨Control + i | æ ¼å¼åŒ–ä»£ç (è§„èŒƒ) Ctrl + è„±çº¿ | æ·»åŠ å±æ€§æˆ–æ–¹æ³•option + æ‹–åŠ¨ | å¤åˆ¶é€‰ä¸­çš„æ§ä»¶Cmd + option + = | æ›´æ–°é€‰ä¸­æ§ä»¶çš„çº¦æŸ æ¨¡æ‹Ÿå™¨å¿«æ·é”®Cmd + Shift + H | æŒ‰ä¸€æ¬¡ï¼Œå–æ¶ˆæ™ƒåŠ¨ / æŒ‰ä¸€æ¬¡ï¼Œå›åˆ°é¦–é¡µCmd + â†/â†’ | æ—‹è½¬Cmd + k | å¼¹å‡ºé”®ç›˜ ï£¿ Mac é”®ç›˜å¿«æ·é”®æ•´ç†äº†é‚£ä¹ˆå¤šå¿«æ·é”®ï¼Œä¸€æ—¶åŠä¼šæ ¹æœ¬è®°ä¸ä½ï¼Œæ€ä¹ˆåŠï¼Ÿé™¤äº†æœ‰æ„è¯†çš„ç»å¸¸ä½¿ç”¨ã€ç»ƒä¹ å¤–ï¼Œè¿˜æœ‰ä¸€æ¬¾ç¥å¥‡è½¯ä»¶ CheatSheet åœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸‹é¢é•¿æŒ‰Command âŒ˜ é”®ï¼Œå³å¯ä»¥æŸ¥çœ‹è¿™æ¬¾è½¯ä»¶çš„å¿«æ·é”®æ“ä½œã€‚ æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€å‘ç¥æ³¨é‡Šå¤§å…¨ï¼ˆæ¬¢è¿è¡¥å……ï¼‰]]></title>
    <url>%2FMacUseEfficiency%2FStrangeComments.html</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢çš„è¯ï¼šä¸€æ—¶å…´èµ·å°±æ”¶é›†äº†ä»¥ä¸‹ç¥æ³¨é‡Šï¼Œå¸Œæœ›èƒ½ä¸ºå¹¿å¤§ITerå¸¦æ¥å¿«ä¹ï¼Œç¼“è§£ä½ ä»¬å·¥ä½œä¸­çš„å‹åŠ›ï¼Œä¸‹é¢å¼€è½¦ï¼Œç¬¬ä¸€ä¸ªä½ å¯åšå¤´åƒï¼Œä¸‹æ–‡ä¼šç»™å‡ºåˆ¶ä½œé“¾æ¥ã€‚ ç¬¬ä¸€ä¸ªä½ å¯åšå¤´åƒ123456789101112131415161718192021222324252627282930313233343536/** * ç“¦ç“¦ å * åé½±é¾ å·± äº…ç“¦è»Šå·± * ä¹™é¾é¾ æ¯‹æ—¥ä¸¶ ä¸¶ä¹™å·±æ¯‹æ¯‹ä¸¶ * åé¾ é¦¬é¬¼è»Šç“¦ å·±åç“¦æ¯‹æ¯‹ * é¬¼é¦¬é¾ é¦¬é¾ å å·±å·±æ¯‹è»Šæ¯‹ç“¦ * æ¯‹é¾ é¾ é¾é¾ é¬¼ä¹™ä¸¶ä¸¶ä¹™è»Šä¹™æ¯‹é¬¼è»Šå·± * ä¹™é¾ é¾é¾é¬¼é¾ç“¦ åç“¦æ¯‹ä¹™ç“¦é¾ ç“¦äº… * é¦¬é½±é¾é¦¬é¬¼åä¸¶æ—¥å·±å·±å·±æ¯‹è»Šä¹™ä¸¶ * å·±é½±é¦¬é¬¼è»Šååæ¯‹æ—¥ä¹™å·±å·±ä¹™ä¹™ * è»Šé¦¬é½±é½±æ—¥ä¹™æ¯‹ç“¦å·±ä¹™ç“¦æ—¥äº… * äº…è»Šé½ºé¾–ç“¦ä¹™è»Šé¾–é¾ä¹™ä¹™å * æ—¥é¾ é¾ åäº…è»Šé¾æ¯‹åå * æ—¥æ¯‹å·±äº… å·±å·±åäº…äº… * ä¸¶å·±ååä¹™ ä¸¶ä¸¶ä¸¶ä¸¶ä¸¶ * äº…å·±åé¾é¾–ç“¦ ä¸¶ ä¸¶ ä¹™å * äº…å·±åé¾ é¾–æ¯‹ ä¸¶ä¸¶ ä¸¶å·±é¬¼é¬¼ç“¦äº… * åæ—¥ååæ—¥äº…ä¸¶äº…ä¸¶ ä¸¶åæ—¥æ¯‹é¬¼é¦¬é¦¬è»Šä¹™ * åæ—¥ä¹™åäº…äº…äº…ä¸¶ åä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½ºé¦¬ä¹™ * ä¸¶ç“¦å·±ä¹™ååäº…ä¸¶äº…ä¹™ä¹™ä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½±é½ºé½ºé¬¼å * ä¹™ä¹™åååäº…ä¹™ç“¦ç“¦å·±æ—¥ç“¦æ¯‹é¬¼é¬¼é¾ é½±é½±é¾é¾é½±é½±æ¯‹ä¸¶ * äº…ååååä¹™ç“¦è»Šæ¯‹ç“¦ç“¦æ—¥è»Šé¦¬é¾ é¾é¾é¾é¾é¾é¾ é¾ é¾ é¦¬äº…* ååååå·±æ¯‹è»Šç“¦ç“¦ç“¦ç“¦é¬¼é¦¬é¾ é¾é¾ é¾ é¾é¾ é¾ é¾ é¦¬é¾ è»Š* äº…ååæ—¥æ¯‹ç“¦æ—¥æ—¥ç“¦é¬¼é¬¼é¬¼é¾ é¾ é¦¬é¦¬é¾ é¾é¾é¾ é¦¬é¦¬è»Š* äº…äº…äº…ä¹™ç“¦ç“¦æ¯‹è»Šè»Šè»Šé¦¬é¾é¾ é¬¼é¬¼é¦¬é¾ é¾é¾é¾ é¦¬é¦¬é¬¼* ä¸¶ä¸¶ä¹™äº…äº…ä¹™è»Šé¬¼é¬¼é¬¼æ¯‹è»Šé¾é¾é¾ é¬¼é¦¬é¦¬é¾ é¾é½±é½±é¾é¦¬é¬¼* äº…å·±ååå·±åæ—¥é¬¼é¬¼è»Šç“¦æ¯‹é¾ é¾é¾ é¦¬é¦¬é¾ é¾ é¾ é½±é½ºé½ºé½±é¾ é¬¼* äº…ä¹™ä¹™ä¹™åè»Šé¦¬è»Šæ¯‹é¦¬é½±é½±é¾é¾ é¾ é¾ é¦¬é¾ é¾é½±é¾é¾ é¾ é¬¼ç“¦* ä¸¶æ¯‹é¾ é¬¼è»Šç“¦è»Šé¦¬é¾ é¾é¾ é¾ é¾é½±é½±é¾ é¦¬é¦¬é¬¼æ¯‹æ—¥* åä¹™å·±æ—¥å ä¸¶å·±é¬¼é¾é½±é½ºé½±é¾é¦¬é¦¬é¦¬è»Šæ¯‹å·±* ä¸¶åå·±ä¹™äº…ä¸¶ äº…ç“¦é¦¬é¾ é¾é¾ é¾ é¦¬æ¯‹ç“¦ä¹™* ä¸¶ååä¹™äº…å äº…å·±ç“¦è»Šé¦¬é¾ é¬¼è»Šç“¦ä¹™* ä¸¶åä¹™ååä¸¶ ä¸¶ä¸¶äº…åç“¦é¬¼è»Šç“¦å·±* ä¸¶äº…äº…ä¸¶ äº…æ—¥ç“¦æ—¥* ä¸¶*/ ä¸¤åªdogeå’Œä¸€å¤´æ»‘ç¨½ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114/** * .,:,,, .::,,,::. * .::::,,;;, .,;;:,,....:i: * :i,.::::,;i:. ....,,:::::::::,.... .;i:,. ......;i. * :;..:::;::::i;,,:::;:,,,,,,,,,,..,.,,:::iri:. .,:irsr:,.;i. * ;;..,::::;;;;ri,,,. ..,,:;s1s1ssrr;,.;r, * :;. ,::;ii;:, . ................... .;iirri;;;,,;i, * ,i. .;ri:. ... ............................ .,,:;:,,,;i: * :s,.;r:... ....................................... .::;::s; * ,1r::. .............,,,.,,:,,........................,;iir; * ,s;........... ..::.,;:,,. ...............,;1s * :i,..,. .,:,,::,. .......... .......;1, * ir,....:rrssr;:, ,,.,::. .r5S9989398G95hr;. ....,.:s, * ;r,..,s9855513XHAG3i .,,,,,,,. ,S931,.,,.;s;s&amp;BHHA8s.,..,..:r: * :r;..rGGh, :SAG;;G@BS:.,,,,,,,,,.r83: hHH1sXMBHHHM3..,,,,.ir. * ,si,.1GS, sBMAAX&amp;MBMB5,,,,,,:,,.:&amp;8 3@HXHBMBHBBH#X,.,,,,,,rr * ;1:,,SH: .A@&amp;&amp;B#&amp;8H#BS,,,,,,,,,.,5XS, 3@MHABM&amp;59M#As..,,,,:,is, * .rr,,,;9&amp;1 hBHHBB&amp;8AMGr,,,,,,,,,,,:h&amp;&amp;9s; r9&amp;BMHBHMB9: . .,,,,;ri. * :1:....:5&amp;XSi;r8BMBHHA9r:,......,,,,:ii19GG88899XHHH&amp;GSr. ...,:rs. * ;s. .:sS8G8GG889hi. ....,,:;:,.:irssrriii:,. ...,,i1, * ;1, ..,....,,isssi;, .,,. ....,.i1, * ;h: i9HHBMBBHAX9: . ...,,,rs, * ,1i.. :A#MBBBBMHB##s ....,,,;si. * .r1,.. ,..;3BMBBBHBB#Bh. .. ....,,,,,i1; * :h;.. .,..;,1XBMMMMBXs,.,, .. :: ,. ....,,,,,,ss. * ih: .. .;;;, ;;:s58A3i,.. ,. ,.:,,. ...,,,,,:,s1, * .s1,.... .,;sh, ,iSAXs;. ,. ,,.i85 ...,,,,,,:i1; * .rh: ... rXG9XBBM#M#MHAX3hss13&amp;&amp;HHXr .....,,,,,,,ih; * .s5: ..... i598X&amp;&amp;A&amp;AAAAAA&amp;XG851r: ........,,,,:,,sh; * . ihr, ... . .. ........,,,,,;11:. * ,s1i. ... ..,,,..,,,.,,.,,.,.. ........,,.,,.;s5i. * .:s1r,...................... ..............;shs, * . .:shr:. .... ..............,ishs. * .,issr;,... ...........................,is1s;. * .,is1si;:,....................,:;ir1sr;, * ..:isssssrrii;::::::;;iirsssssr;:.. * .,::iiirsssssssssrri;;:. */ /*** ii. ;9ABH, * SA391, .r9GG35&amp;G * &amp;#ii13Gh; i3X31i;:,rB1 * iMs,:,i5895, .5G91:,:;:s1:8A * 33::::,,;5G5, ,58Si,,:::,sHX;iH1 * Sr.,:;rs13BBX35hh11511h5Shhh5S3GAXS:.,,::,,1AG3i,GG * .G51S511sr;;iiiishS8G89Shsrrsh59S;.,,,,,..5A85Si,h8 * :SB9s:,............................,,,.,,,SASh53h,1G. * .r18S;..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....,,.1H315199,rX, * ;S89s,..,,,,,,,,,,,,,,,,,,,,,,,....,,.......,,,;r1ShS8,;Xi * i55s:.........,,,,,,,,,,,,,,,,.,,,......,.....,,....r9&amp;5.:X1 * 59;.....,. .,,,,,,,,,,,... .............,..:1;.:&amp;s * s8,..;53S5S3s. .,,,,,,,.,.. i15S5h1:.........,,,..,,:99 * 93.:39s:rSGB@A; ..,,,,..... .SG3hhh9G&amp;BGi..,,,,,,,,,,,,.,83 * G5.G8 9#@@@@@X. .,,,,,,..... iA9,.S&amp;B###@@Mr...,,,,,,,,..,.;Xh * Gs.X8 S@@@@@@@B:..,,,,,,,,,,. rA1 ,A@@@@@@@@@H:........,,,,,,.iX: * ;9. ,8A#@@@@@@#5,.,,,,,,,,,... 9A. 8@@@@@@@@@@M; ....,,,,,,,,S8 * X3 iS8XAHH8s.,,,,,,,,,,...,..58hH@@@@@@@@@Hs ...,,,,,,,:Gs * r8, ,,,...,,,,,,,,,,..... ,h8XABMMHX3r. .,,,,,,,.rX: * :9, . .:,..,:;;;::,.,,,,,.. .,,. ..,,,,,,.59 * .Si ,:.i8HBMMMMMB&amp;5,.... . .,,,,,.sMr * SS :: h@@@@@@@@@@#; . ... . ..,,,,iM5 * 91 . ;:.,1&amp;@@@@@@MXs. . .,,:,:&amp;S * hS .... .:;,,,i3MMS1;..,..... . . ... ..,:,.99 * ,8; ..... .,:,..,8Ms:;,,,... .,::.83 * s&amp;: .... .sS553B@@HX3s;,. .,;13h. .:::&amp;1 * SXr . ...;s3G99XA&amp;X88Shss11155hi. ,;:h&amp;, * iH8: . .. ,;iiii;,::,,,,,. .;irHA * ,8X5; . ....... ,;iihS8Gi* 1831, .,;irrrrrs&amp;@* ;5A8r. .:;iiiiirrss1H* :X@H3s....... .,:;iii;iiiiirsrh* r#h:;,...,,.. .,,:;;;;;:::,... .:;;;;;;iiiirrss1* ,M8 ..,....,.....,,::::::,,... . .,;;;iiiiiirss11h* 8B;.,,,,,,,.,..... . .. .:;;;;iirrsss111h* i@5,:::,,,,,,,,.... . . .:::;;;;;irrrss111111* 9Bi,:,,,,...... ..r91;;;;;iirrsss1ss1111*//** * .,, .,:;;iiiiiiiii;;:,,. .,, * rGB##HS,.;iirrrrriiiiiiiiiirrrrri;,s&amp;##MAS, * r5s;:r3AH5iiiii;;;;;;;;;;;;;;;;iiirXHGSsiih1, * .;i;;s91;;;;;;::::::::::::;;;;iS5;;;ii: * :rsriii;;r::::::::::::::::::::::;;,;;iiirsi, * .,iri;;::::;;;;;;::,,,,,,,,,,,,,..,,;;;;;;;;iiri,,. * ,9BM&amp;, .,:;;:,,,,,,,,,,,hXA8: ..,,,. * ,;&amp;@@#r:;;;;;::::,,. ,r,,,,,,,,,,iA@@@s,,:::;;;::,,. .;. * :ih1iii;;;;;::::;;;;;;;:,,,,,,,,,,;i55r;;;;;;;;;iiirrrr,.. * .ir;;iiiiiiiiii;;;;::::::,,,,,,,:::::,,:;;;iiiiiiiiiiiiri * iriiiiiiiiiiiiiiii;;;::::::::::::::::;;;iiiiiiiiiiiiiiiir; * ,riii;;;;;;;;;;;;;:::::::::::::::::::::::;;;;;;;;;;;;;;iiir. * iri;;;::::,,,,,,,,,,:::::::::::::::::::::::::,::,,::::;;iir: * .rii;;::::,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,::::;;iri * ,rii;;;::,,,,,,,,,,,,,:::::::::::,:::::,,,,,,,,,,,,,:::;;;iir. * ,rii;;i::,,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,,::i;;iir. * ,rii;;r::,,,,,,,,,,,,,:,:::::,:,:::::::,,,,,,,,,,,,,::;r;;iir. * .rii;;rr,:,,,,,,,,,,,,,,:::::::::::::::,,,,,,,,,,,,,:,si;;iri * ;rii;:1i,,,,,,,,,,,,,,,,,,:::::::::,,,,,,,,,,,,,,,:,ss:;iir: * .rii;;;5r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sh:;;iri * ;rii;:;51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.:hh:;;iir, * irii;::hSr,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,sSs:;;iir: * irii;;:iSSs:.,,,,,,,,,,,,,,,,,,,,,,,,,,,..:135;:;;iir: * ;rii;;:,r535r:...,,,,,,,,,,,,,,,,,,..,;sS35i,;;iirr: * :rrii;;:,;1S3Shs;:,............,:is533Ss:,;;;iiri, * .;rrii;;;:,;rhS393S55hh11hh5S3393Shr:,:;;;iirr: * .;rriii;;;::,:;is1h555555h1si;:,::;;;iirri:. * .:irrrii;;;;;:::,,,,,,,,:::;;;;iiirrr;, * .:irrrriiiiii;;;;;;;;iiiiiirrrr;,. * .,:;iirrrrrrrrrrrrrrrrri;:. * ..,:::;;;;:::,,. */ æœºæ¢°é”®ç›˜ï¼Œé€ç»™ä½ ï¼Œæ‹¿èµ°ç›´æ¥ç”¨~ ~12345678910111213141516/*** â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”* â”‚Escâ”‚ â”‚ F1â”‚ F2â”‚ F3â”‚ F4â”‚ â”‚ F5â”‚ F6â”‚ F7â”‚ F8â”‚ â”‚ F9â”‚F10â”‚F11â”‚F12â”‚ â”‚P/Sâ”‚S Lâ”‚P/Bâ”‚ â”Œâ” â”Œâ” â”Œâ”* â””â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”˜ â””â”˜ â””â”˜* â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”* â”‚~ `â”‚! 1â”‚@ 2â”‚# 3â”‚$ 4â”‚% 5â”‚^ 6â”‚&amp; 7â”‚* 8â”‚( 9â”‚) 0â”‚_ -â”‚+ =â”‚ BacSp â”‚ â”‚Insâ”‚Homâ”‚PUpâ”‚ â”‚N Lâ”‚ / â”‚ * â”‚ - â”‚* â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤* â”‚ Tab â”‚ Q â”‚ W â”‚ E â”‚ R â”‚ T â”‚ Y â”‚ U â”‚ I â”‚ O â”‚ P â”‚&#123; [â”‚&#125; ]â”‚ | \ â”‚ â”‚Delâ”‚Endâ”‚PDnâ”‚ â”‚ 7 â”‚ 8 â”‚ 9 â”‚ â”‚* â”œâ”€â”€â”€â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”€â”€â”€â”€â”€â”¤ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ + â”‚* â”‚ Caps â”‚ A â”‚ S â”‚ D â”‚ F â”‚ G â”‚ H â”‚ J â”‚ K â”‚ L â”‚: ;â”‚&quot; &apos;â”‚ Enter â”‚ â”‚ 4 â”‚ 5 â”‚ 6 â”‚ â”‚* â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â” â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤* â”‚ Shift â”‚ Z â”‚ X â”‚ C â”‚ V â”‚ B â”‚ N â”‚ M â”‚&lt; ,â”‚&gt; .â”‚? /â”‚ Shift â”‚ â”‚ â†‘ â”‚ â”‚ 1 â”‚ 2 â”‚ 3 â”‚ â”‚* â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â” â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”¤ Eâ”‚â”‚* â”‚ Ctrlâ”‚ â”‚Alt â”‚ Space â”‚ Altâ”‚ â”‚ â”‚Ctrlâ”‚ â”‚ â† â”‚ â†“ â”‚ â†’ â”‚ â”‚ 0 â”‚ . â”‚â†â”€â”˜â”‚* â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜*/ ä½›ç¥–ä¿ä½‘ æ°¸æ— BUG1234567891011121314151617181920212223/*** _ooOoo_* o8888888o* 88&quot; . &quot;88* (| -_- |)* O\ = /O* ____/`---&apos;\____* . &apos; \\| |// `.* / \\||| : |||// \* / _||||| -:- |||||- \* | | \\\ - /// | |* | \_| &apos;&apos;\---/&apos;&apos; | |* \ .-\__ `-` ___/-. /* ___`. .&apos; /--.--\ `. . __* .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.* | | : `- \`.;`\ _ /`;.`/ - ` : | |* \ \ `-. \_ __\ /__ _/ .-` / /* ======`-.____`-.___\_____/___.-`____.-&apos;======* `=---=&apos;** .............................................* ä½›ç¥–ä¿ä½‘ æ°¸æ— BUG*/ / BUG ~ BUg ~ Bug ~ bug ~ ä½›æ›°: å†™å­—æ¥¼é‡Œå†™å­—é—´ï¼Œå†™å­—é—´é‡Œç¨‹åºå‘˜ï¼› ç¨‹åºäººå‘˜å†™ç¨‹åºï¼Œåˆæ‹¿ç¨‹åºæ¢é…’é’±ã€‚ é…’é†’åªåœ¨ç½‘ä¸Šåï¼Œé…’é†‰è¿˜æ¥ç½‘ä¸‹çœ ï¼› é…’é†‰é…’é†’æ—¥å¤æ—¥ï¼Œç½‘ä¸Šç½‘ä¸‹å¹´å¤å¹´ã€‚ ä½†æ„¿è€æ­»ç”µè„‘é—´ï¼Œä¸æ„¿é èº¬è€æ¿å‰ï¼› å¥”é©°å®é©¬è´µè€…è¶£ï¼Œå…¬äº¤è‡ªè¡Œç¨‹åºå‘˜ã€‚ åˆ«äººç¬‘æˆ‘å¿’ç–¯ç™«ï¼Œæˆ‘ç¬‘è‡ªå·±å‘½å¤ªè´±ï¼› ä¸è§æ»¡è¡—æ¼‚äº®å¦¹ï¼Œå“ªä¸ªå½’å¾—ç¨‹åºå‘˜ï¼Ÿ 12345678910111213141516171819202122/*** _ooOoo_* o8888888o* 88&quot; . &quot;88* (| -_- |)* O\ = /O* ___/`---&apos;\____* . &apos; \\| |// `.* / \\||| : |||// \* / _||||| -:- |||||- \* | | \\\ - /// | |* | \_| &apos;&apos;\---/&apos;&apos; | |* \ .-\__ `-` ___/-. /* ___`. .&apos; /--.--\ `. . __* .&quot;&quot; &apos;&lt; `.___\_&lt;|&gt;_/___.&apos; &gt;&apos;&quot;&quot;.* | | : `- \`.;`\ _ /`;.`/ - ` : | |* \ \ `-. \_ __\ /__ _/ .-` / /* ======`-.____`-.___\_____/___.-`____.-&apos;======* `=---=&apos;* .............................................* ä½›æ›°ï¼šbugæ³›æ»¥ï¼Œæˆ‘å·²ç˜«ç—ªï¼*/ welfare ç¦åˆ© ç¦åˆ© ~ ~1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/*** .::::.* .::::::::.* ::::::::::: FUCK YOU* ..:::::::::::&apos;* &apos;::::::::::::&apos;* .::::::::::* &apos;::::::::::::::..* ..::::::::::::.* ``::::::::::::::::* ::::``:::::::::&apos; .:::.* ::::&apos; &apos;:::::&apos; .::::::::.* .::::&apos; :::: .:::::::&apos;::::.* .:::&apos; ::::: .:::::::::&apos; &apos;:::::.* .::&apos; :::::.:::::::::&apos; &apos;:::::.* .::&apos; ::::::::::::::&apos; ``::::.* ...::: ::::::::::::&apos; ``::.* ```` &apos;:. &apos;:::::::::&apos; ::::..* &apos;.:::::&apos; &apos;:&apos;````..*//*** * _.._ ,------------.* ,&apos; `. ( We want you! )* / __) __` \ `-,----------&apos;* ( (`-`(-&apos;) ) _.-&apos;* /) \ = / (* /&apos; |--&apos; . \* ( ,---| `-.)__`* )( `-.,--&apos; _`-.* &apos;/,&apos; ( Uu&quot;,* (_ , `/,-&apos; )* `.__, : `-&apos;/ /`--&apos;* | `--&apos; |* ` `-._ /* \ (* /\ . \. freebuf* / |` \ ,-\* / \| .) / \* ( ,&apos;|\ ,&apos; :* | \,`.`--&quot;/ &#125;* `,&apos; \ |,&apos; /* / &quot;-._ `-/ |* &quot;-. &quot;-.,&apos;| ;* / _/[&quot;---&apos;&quot;&quot;]* : / |&quot;- &apos;* &apos; | /* ` |*/ ç¥å…½ä¿ä½‘ ä»£ç æ— bug1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071/*** â”â”“ â”â”“* â”â”›â”»â”â”â”â”›â”»â”“* â”ƒ â”ƒ* â”ƒ â” â”ƒ* â”ƒ ï¼ ï¼œ â”ƒ* â”ƒ â”ƒ* â”ƒ... âŒ’ ... â”ƒ* â”ƒ â”ƒ* â”—â”â”“ â”â”â”›* â”ƒ â”ƒ * â”ƒ â”ƒ* â”ƒ â”ƒ* â”ƒ â”ƒ ç¥å…½ä¿ä½‘* â”ƒ â”ƒ ä»£ç æ— bug * â”ƒ â”ƒ* â”ƒ â”—â”â”â”â”“* â”ƒ â”£â”“* â”ƒ â”â”›* â”—â”“â”“â”â”â”³â”“â”â”›* â”ƒâ”«â”« â”ƒâ”«â”«* â”—â”»â”› â”—â”»â”›*//*** â”â”“ â”â”“+ +* â”â”›â”»â”â”â”â”›â”»â”“ + +* â”ƒ â”ƒ * â”ƒ â” â”ƒ ++ + + +* â–ˆâ–ˆâ–ˆâ–ˆâ”â–ˆâ–ˆâ–ˆâ–ˆ â”ƒ+* â”ƒ â”ƒ +* â”ƒ â”» â”ƒ* â”ƒ â”ƒ + +* â”—â”â”“ â”â”â”›* â”ƒ â”ƒ * â”ƒ â”ƒ + + + +* â”ƒ â”ƒ* â”ƒ â”ƒ + ç¥å…½ä¿ä½‘* â”ƒ â”ƒ ä»£ç æ— bug * â”ƒ â”ƒ + * â”ƒ â”—â”â”â”â”“ + +* â”ƒ â”£â”“* â”ƒ â”â”›* â”—â”“â”“â”â”â”³â”“â”â”› + + + +* â”ƒâ”«â”« â”ƒâ”«â”«* â”—â”»â”› â”—â”»â”›+ + + +*//*** â”â”â”â”â”â”ç¥å…½å‡ºæ²¡â”â”â”â”â”â”* â”â”“ â”â”“* â”â”›â”»â”â”â”â”›â”»â”“* â”ƒ â”ƒ* â”ƒ â” â”ƒ* â”ƒ â”³â”› â”—â”³ â”ƒ* â”ƒ â”ƒ* â”ƒ â”» â”ƒ* â”ƒ â”ƒ* â”—â”â”“ â”â”â”›* â”ƒ â”ƒ ç¥å…½ä¿ä½‘* â”ƒ â”ƒ ä»£ç æ— bug * â”ƒ â”—â”â”â”â”“* â”ƒ â”£â”“* â”ƒ â”â”›* â”—â”“â”“â”â”â”³â”“â”â”›* â”ƒâ”«â”« â”ƒâ”«â”«* â”—â”»â”› â”—â”»â”›* â”â”â”â”â”â”æ„Ÿè§‰èŒèŒå“’â”â”â”â”â”â”*/ â”â”â”â”â”â” æ„Ÿè§‰èŒèŒå“’ â”â”â”â”â”â”123456789101112131415/** _* _._ _..._ .-&apos;, _.._(`))* &apos;-. ` &apos; /-._.-&apos; &apos;,/* ) \ &apos;.* / _ _ | \* | a a / |* \ .-. ;* &apos;-(&apos;&apos; ).-&apos; ,&apos; ;* &apos;-; | .&apos;* \ \ /* | 7 .__ _.-\ \* | | | ``/ /` /* /,_| | /,_/ /* /,_/ &apos;`-&apos;*/ åˆçœ‹æºç ï¼Œçœ‹ä½ å¦¹å¦¹å‘€ï¼12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485/***************************************************************** ** .=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-. ** | ______ | ** | .-&quot; &quot;-. | ** | / \ | ** | _ | | _ | ** | ( \ |, .-. .-. ,| / ) | ** | &gt; &quot;=._ | )(__/ \__)( | _.=&quot; &lt; | ** | (_/&quot;=._&quot;=._ |/ /\ \| _.=&quot;_.=&quot;\_) | ** | &quot;=._&quot;(_ ^^ _)&quot;_.=&quot; | ** | &quot;=\__|IIIIII|__/=&quot; | ** | _.=&quot;| \IIIIII/ |&quot;=._ | ** | _ _.=&quot;_.=&quot;\ /&quot;=._&quot;=._ _ | ** | ( \_.=&quot;_.=&quot; `--------` &quot;=._&quot;=._/ ) | ** | &gt; _.=&quot; &quot;=._ &lt; | ** | (_/ \_) | ** | | ** &apos;-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=&apos; ** ** LASCIATE OGNI SPERANZA, VOI CH&apos;ENTRATE ****************************************************************//*** ,s555SB@@&amp; * :9H####@@@@@Xi * 1@@@@@@@@@@@@@@8 * ,8@@@@@@@@@B@@@@@@8 * :B@@@@X3hi8Bs;B@@@@@Ah, * ,8i r@@@B: 1S ,M@@@@@@#8; * 1AB35.i: X@@8 . SGhr ,A@@@@@@@@S * 1@h31MX8 18Hhh3i .i3r ,A@@@@@@@@@5 * ;@&amp;i,58r5 rGSS: :B@@@@@@@@@@A * 1#i . 9i hX. .: .5@@@@@@@@@@@1 * sG1, ,G53s. 9#Xi;hS5 3B@@@@@@@B1 * .h8h.,A@@@MXSs, #@H1: 3ssSSX@1 * s ,@@@@@@@@@@@@Xhi, r#@@X1s9M8 .GA981 * ,. rS8H#@@@@@@@@@@#HG51;. .h31i;9@r .8@@@@BS;i; * .19AXXXAB@@@@@@@@@@@@@@#MHXG893hrX#XGGXM@@@@@@@@@@MS * s@@MM@@@hsX#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&amp;, * :GB@#3G@@Brs ,1GM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B, * .hM@@@#@@#MX 51 r;iSGAM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8 * :3B@@@@@@@@@@@&amp;9@h :Gs .;sSXH@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@: * s&amp;HA#@@@@@@@@@@@@@@M89A;.8S. ,r3@@@@@@@@@@@@@@@@@@@@@@@@@@@r * ,13B@@@@@@@@@@@@@@@@@@@5 5B3 ;. ;@@@@@@@@@@@@@@@@@@@@@@@@@@@i * 5#@@#&amp;@@@@@@@@@@@@@@@@@@9 .39: ;@@@@@@@@@@@@@@@@@@@@@@@@@@@; * 9@@@X:MM@@@@@@@@@@@@@@@#; ;31. H@@@@@@@@@@@@@@@@@@@@@@@@@@: * SH#@B9.rM@@@@@@@@@@@@@B :. 3@@@@@@@@@@@@@@@@@@@@@@@@@@5 * ,:. 9@@@@@@@@@@@#HB5 .M@@@@@@@@@@@@@@@@@@@@@@@@@B * ,ssirhSM@&amp;1;i19911i,. s@@@@@@@@@@@@@@@@@@@@@@@@@@S * ,,,rHAri1h1rh&amp;@#353Sh: 8@@@@@@@@@@@@@@@@@@@@@@@@@#: * .A3hH@#5S553&amp;@@#h i:i9S #@@@@@@@@@@@@@@@@@@@@@@@@@A. *** åˆçœ‹æºç ï¼Œçœ‹ä½ å¦¹å¦¹å‘€ï¼*//***_______________#########_______________________ *______________############_____________________ *______________#############____________________ *_____________##__###########___________________ *____________###__######_#####__________________ *____________###_#######___####_________________ *___________###__##########_####________________ *__________####__###########_####_______________ *________#####___###########__#####_____________ *_______######___###_########___#####___________ *_______#####___###___########___######_________ *______######___###__###########___######_______ *_____######___####_##############__######______ *____#######__#####################_#######_____ *____#######__##############################____ *___#######__######_#################_#######___ *___#######__######_######_#########___######___ *___#######____##__######___######_____######___ *___#######________######____#####_____#####____ *____######________#####_____#####_____####_____ *_____#####________####______#####_____###______ *______#####______;###________###______#________ *________##_______####________####______________ */ æ”»åŸæ¹¿ he é¼“åŠ±æ¹¿ ~12345678910111213141516171819202122232425262728293031323334353637/** * ,%%%%%%%%, * ,%%/\%%%%/\%% * ,%%%\c &quot;&quot; J/%%% * %. %%%%/ o o \%%% * `%%. %%%% _ |%%% * `%% `%%%%(__Y__)%%&apos; * // ;%%%%`\-/%%%&apos;* (( / `%%%%%%%&apos; * \\ .&apos; | * \\ / \ | | * \\/ ) | | * \ /_ | |__ * (___________))))))) æ”»åŸæ¹¿ * * _ _ * __ _(_)_ _(_) __ _ _ __ * \ \ / / \ \ / / |/ _` |&apos;_ \ * \ V /| |\ V /| | (_| | | | | * \_/ |_| \_/ |_|\__,_|_| |_| */ /*** * .--, .--,* ( ( \.---./ ) )* &apos;.__/o o\__.&apos;* &#123;= ^ =&#125;* &gt; - &lt;* / \* // \\* //| . |\\* &quot;&apos;\ /&apos;&quot;_.-~^`&apos;-.* \ _ /--&apos; `* ___)( )(___ é¼“åŠ±æ¹¿* (((__) (__))) é«˜å±±ä»°æ­¢,æ™¯è¡Œè¡Œæ­¢.è™½ä¸èƒ½è‡³,å¿ƒå‘å¾€ä¹‹ã€‚*/ ä¸‹é¢è¿™æ˜¯ç¥é­” ~ ~123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384/** * ï¼‘ï¼‘ï¼‘ ï¼‘ * ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ *//*** * _____ _____ _____ _____ * /\ \ /\ \ /\ \ /\ \ * /::\____\ /::\ \ /::\ \ /::\ \ * /:::/ / \:::\ \ /::::\ \ /::::\ \ * /:::/ / \:::\ \ /::::::\ \ /::::::\ \ * /:::/ / \:::\ \ /:::/\:::\ \ /:::/\:::\ \ * /:::/____/ \:::\ \ /:::/__\:::\ \ /:::/__\:::\ \ * /::::\ \ /::::\ \ /::::\ \:::\ \ /::::\ \:::\ \ * /::::::\ \ _____ ____ /::::::\ \ /::::::\ \:::\ \ /::::::\ \:::\ \ * /:::/\:::\ \ /\ \ /\ \ /:::/\:::\ \ /:::/\:::\ \:::\____\ /:::/\:::\ \:::\ \ * /:::/ \:::\ /::\____\/::\ \/:::/ \:::\____\/:::/ \:::\ \:::| |/:::/__\:::\ \:::\____\* \::/ \:::\ /:::/ /\:::\ /:::/ \::/ /\::/ |::::\ /:::|____|\:::\ \:::\ \::/ /* \/____/ \:::\/:::/ / \:::\/:::/ / \/____/ \/____|:::::\/:::/ / \:::\ \:::\ \/____/ * \::::::/ / \::::::/ / |:::::::::/ / \:::\ \:::\ \ * \::::/ / \::::/____/ |::|\::::/ / \:::\ \:::\____\ * /:::/ / \:::\ \ |::| \::/____/ \:::\ \::/ / * /:::/ / \:::\ \ |::| ~| \:::\ \/____/ * /:::/ / \:::\ \ |::| | \:::\ \ * /:::/ / \:::\____\ \::| | \:::\____\ * \::/ / \::/ / \:| | \::/ / * \/____/ \/____/ \|___| \/____/ *//** * https://campus.alibaba.com/* `:::::::::::,* `::;:::::::;:::::::, `* `::;;:::::::@@@@;:::::::`* ,:::::::::::::@ #@&apos;:::::`* :::::::::::::::&apos;@@ @;::::* ::::::::::::&apos;@@@@&apos;``` .+:::`* ::::::::::;@@@#. ,:::,* .::::::::+@#@` ::::* :::::::+@@&apos; ::::* `:::::&apos;@@: `:::.* ,::::@@: ` ::::* ;::::::@ .:::;* :;:::::;@` ` :::;* :::::::::@` @ ;::::* :::::::::#` @` ,::::* :::::::::@` +@ @ .::::`* .::::::&apos;@@` `@@&apos; @ ::::,* :::::::++@@@@@@@@@@. ::::;* ;:::::::+, `..` :::::* ,::::::::&apos;, :::::* :::::::::+, :::::`* :::::::::+@. ,::::.` `,* ::::::;;@+ .::;:: `;* :::::::@@ `:::;: `::``* ::::::#@ ;:::: .::`* :::::;@ :::::` .;::`* :::::@ `:;::: `::::;* :::::# :::::. `,;:::::* :::::: ` ::::::,.,::::::::::.* ,::::::` .:: ::::::::::::::::;`* ;::::::::,````.,:::::, ::::::::::::::.* :::::::::::::::::: ` `::::::::::`* `::::::::::::, .:::.* `..`*/ é ‚ ~ é ‚ ~ é ‚123456789101112131415/*** é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚* é ‚é ‚é ‚é ‚é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚* é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚* é ‚é ‚ é ‚é ‚ é ‚é ‚* é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚* é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚* é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚* é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚* é ‚é ‚ é ‚é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚ é ‚é ‚* é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚* é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚*/ ä»¥ä¸Šä¸ºé­”æ€§å›¾ ä»¥ä¸‹ä¸ºç¥æ³¨é‡Šï¼Œæ˜¯ä½ æ¥æ‰‹çš„å©¶æ³¨é‡Šï¼Œè¿˜æ˜¯ä½ ç•™ä¸‹çš„ç¥æ³¨é‡Šã€‚1234/*** è¿™ä¸ªå…¬å¸æ²¡æœ‰å¹´ç»ˆå¥–çš„,å…„å¼Ÿåˆ«æŒ‡æœ›äº†,ä¹Ÿåˆ«æ¥äº†,æˆ‘å‡†å¤‡è¾èŒäº†* å¦å¤–è¿™ä¸ªé¡¹ç›®æœ‰å¾ˆå¤š*Bug* ä½ åšæŒä¸äº†å¤šä¹…çš„,æ‹œæ‹œ!*/ 123456789101112131415161718192021222324252627282930313233/*** 1åªç¾Š == one sheep* 2åªç¾Š == two sheeps* 3åªç¾Š == three sheeps* 4åªç¾Š == four sheeps* 5åªç¾Š == five sheeps* 6åªç¾Š == six sheeps* 7åªç¾Š == seven sheeps* 8åªç¾Š == eight sheeps* 9åªç¾Š == nine sheeps* 10åªç¾Š == ten sheeps* 11åªç¾Š == eleven sheeps* 12åªç¾Š == twelve sheeps* 13åªç¾Š == thirteen sheeps* 14åªç¾Š == fourteen sheeps* 15åªç¾Š == fifteen sheeps* 16åªç¾Š == sixteen sheeps* 17åªç¾Š == seventeen sheeps* 18åªç¾Š == eighteen sheeps* 19åªç¾Š == nineteen sheeps* 20åªç¾Š == twenty sheeps* 21åªç¾Š == twenty one sheeps* 22åªç¾Š == twenty two sheeps* 23åªç¾Š == twenty three sheeps* 24åªç¾Š == twenty four sheeps* 25åªç¾Š == twenty five sheeps* 26åªç¾Š == twenty six sheeps* 27åªç¾Š == twenty seven sheeps* 28åªç¾Š == twenty eight sheeps* 29åªç¾Š == twenty nine sheeps* 30åªç¾Š == thirty sheeps* ç°åœ¨çŒç¡äº†å§ï¼Œå¥½äº†ï¼Œä¸è¦å†æ”¹ä¸‹é¢çš„ä»£ç äº†ï¼Œç¡è§‰å’¯~~*/ 12345678910111213/*** You may think you know what the following code does.* But you dont. Trust me.* Fiddle with it, and youll spend many a sleepless* night cursing the moment you thought youd be clever* enough to &quot;optimize&quot; the code below.* Now close this file and go play with something else.*//*** ä½ å¯èƒ½ä¼šè®¤ä¸ºä½ è¯»å¾—æ‡‚ä»¥ä¸‹çš„ä»£ç ã€‚ä½†æ˜¯ä½ ä¸ä¼šæ‡‚çš„ï¼Œç›¸ä¿¡æˆ‘å§ã€‚* è¦æ˜¯ä½ å°è¯•ç©å¼„è¿™æ®µä»£ç çš„è¯ï¼Œä½ å°†ä¼šåœ¨æ— å°½çš„é€šå®µä¸­ä¸æ–­åœ°å’’éª‚è‡ªå·±ä¸ºä»€ä¹ˆä¼šè®¤ä¸ºè‡ªå·±èªæ˜åˆ°å¯ä»¥ä¼˜åŒ–è¿™æ®µä»£ç ã€‚* ç°åœ¨è¯·å…³é—­è¿™ä¸ªæ–‡ä»¶å»ç©ç‚¹åˆ«çš„å§ã€‚*/ 12345678/*** somedev1 - 6/7/02 Adding temporary tracking of Login screen* somedev2 - 5/22/07 Temporary my ass*//*** ä¸€äº›ä¿®æ”¹1 - 2002/6/7 å¢åŠ ä¸´æ—¶çš„è·Ÿè¸ªç™»å½•ç•Œé¢* ä¸€äº›ä¿®æ”¹2 - 2007/5/22 æˆ‘ä¸´æ—¶çš„çŠ¯å‚»*/ 1234567/*** ç¨‹åºå‘˜1ï¼ˆäº2010å¹´6æœˆ7æ—¥ï¼‰ï¼šåœ¨è¿™ä¸ªå‘ä¸´æ—¶åŠ å…¥ä¸€äº›è°ƒæ–™* ç¨‹åºå‘˜2ï¼ˆäº2011å¹´5æœˆ22æ—¥ï¼‰ï¼šä¸´ä½ ä¸ªå±å•Š* ç¨‹åºå‘˜3ï¼ˆäº2012å¹´7æœˆ23æ—¥ï¼‰ï¼šæ¥¼ä¸Šéƒ½æ˜¯ç‹—å±ï¼Œé‰´å®šå®Œæ¯•* ç¨‹åºå‘˜4ï¼ˆäº2013å¹´8æœˆ2æ—¥ï¼‰ï¼šfuck æ¥¼ä¸Šï¼Œä¸‰å¹´äº†ï¼Œè¿™å‘è¿˜åœ¨ï¼ï¼ï¼* ç¨‹åºå‘˜5ï¼ˆäº2014å¹´8æœˆ21æ—¥ï¼‰ï¼šå“ˆå“ˆå“ˆï¼Œè¿™å‘å±…ç„¶å‘äº†è¿™ä¹ˆå¤šäººï¼Œå¹¸å¥½æˆ‘ä¹Ÿä¸ç”¨å¡«äº†ï¼Œç³»ç»Ÿç»ˆæ­¢è¿è¡Œäº†ï¼Œyou&apos;re died*/ 1234567891011121314/*** For the brave souls who get this far: You are the chosen ones,* the valiant knights of programming who toil away, without rest,* fixing our most awful code. To you, true saviors, kings of men,* I say this: never gonna give you up, never gonna let you down,* never gonna run around and desert you. Never gonna make you cry,* never gonna say goodbye. Never gonna tell a lie and hurt you.*//*** è‡´ç»ˆäºæ¥åˆ°è¿™é‡Œçš„å‹‡æ•¢çš„äººï¼š * ä½ æ˜¯è¢«ä¸Šå¸é€‰ä¸­çš„äººï¼Œæ˜¯è‹±å‹‡çš„ã€ä¸æ•Œè¾›è‹¦çš„ã€ä¸çœ ä¸ä¼‘çš„æ¥ä¿®æ”¹æˆ‘ä»¬è¿™æœ€æ£˜æ‰‹çš„ä»£ç çš„ç¼–ç¨‹éª‘å£«ã€‚* ä½ ï¼Œæˆ‘ä»¬çš„æ•‘ä¸–ä¸»ï¼Œäººä¸­ä¹‹é¾™ï¼Œæˆ‘è¦å¯¹ä½ è¯´ï¼šæ°¸è¿œä¸è¦æ”¾å¼ƒï¼Œæ°¸è¿œä¸è¦å¯¹è‡ªå·±å¤±æœ›ï¼Œæ°¸è¿œä¸è¦é€ƒèµ°ï¼Œè¾œè´Ÿäº†è‡ªå·±ï¼Œ* æ°¸è¿œä¸è¦å“­å•¼ï¼Œæ°¸è¿œä¸è¦è¯´å†è§ï¼Œæ°¸è¿œä¸è¦è¯´è°æ¥ä¼¤å®³è‡ªå·±ã€‚*/ 123456789101112131415161718/*** Dear maintainer:* * Once you are done trying to &apos;optimize&apos; this routine,* and have realized what a terrible mistake that was,* please increment the following counter as a warning* to the next guy:* * total_hours_wasted_here = 42*//*** äº²çˆ±çš„ç»´æŠ¤è€…ï¼š* * å¦‚æœä½ å°è¯•äº†å¯¹è¿™æ®µç¨‹åºè¿›è¡Œ&apos;ä¼˜åŒ–&apos;* ä¸‹é¢è¿™ä¸ªè®¡æ•°å™¨çš„ä¸ªæ•°ç”¨æ¥å¯¹åæ¥äººè¿›è¡Œè­¦å‘Š* * æµªè´¹åœ¨è¿™é‡Œçš„æ€»æ—¶é—´ = 42h*/ 12345678/** * When I wrote this, only God and I understood what I was doing* Now, God only knows*//** * å†™è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œåªæœ‰ä¸Šå¸å’Œæˆ‘çŸ¥é“å®ƒæ˜¯å¹²å˜›çš„* ç°åœ¨ï¼Œåªæœ‰ä¸Šå¸çŸ¥é“*/ 12// sometimes I believe compiler ignores all my comments// æœ‰æ—¶å€™æˆ‘ç›¸ä¿¡ç¼–è¯‘å™¨å¿½ç•¥äº†æˆ‘æ‰€æœ‰çš„æ³¨é‡Š 12// drunk, fix later// æœ‰ç‚¹æ™•äº†ï¼Œä»¥åå†ä¿®æ”¹ 12// Magic. Do not touch.// éº»é¸¡ã€‚å‹¿åŠ¨ã€‚ 1#define TRUE FALSE// Happy debugging suckers 12double penetration; // ouch// è‡ªè¡Œäº†è§£ï¼Œä¸æ–¹ä¾¿è§£é‡Š 123456// To understand recursion, see the bottom of this file At the bottom of the file:// To understand recursion, see the top of this file// æƒ³è¦æ˜ç™½é€’å½’é¡»çœ‹æ–‡ä»¶æœ«å°¾åˆ°äº†æ–‡æœ«// æƒ³è¦æ˜ç™½é€’å½’é¡»çœ‹æ–‡ä»¶é¡¶éƒ¨ 1234// This code sucks, you know it and I know it. // Move on and call me an idiot later.// ä½ æˆ‘éƒ½çŸ¥é“è¿™ä»£ç å¾ˆçƒ‚// å…ˆä¸è¦éª‚æˆ‘2Bäº†ï¼Œè¯·å…ˆç»§ç»­å¾€ä¸‹çœ‹ 12// I am not sure why this works but it fixes the problem. // è™½ç„¶æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·ç®¡ç”¨ï¼Œä½†å®ƒå´æ˜¯ä¿®å¤äº†é—®é¢˜ 12// This function has been here since 1987. DON&apos;T FXXKING TOUCH IT// è¿™å‡½æ•°1987å¹´å°±è¿™åœ¨äº†ï¼Œåˆ«ä»–å¨˜åŠ¨å®ƒ 12// if i ever see this again i&apos;m going to start bringing guns to work// å¦‚æœè¦æ˜¯å†è®©æˆ‘çœ‹è§è¿™æ ·çš„ä»£ç ï¼Œä¹Ÿè®¸æˆ‘ä¼šå¸¦ç€ä¸€æŠŠæªæ¥ä¸Šç­ 1234// no comments for you// it was hard to write// so it should be hard to read// éš¾å†™çš„ä»£ç ï¼Œè‚¯å®šå¾ˆéš¾è¯»ã€‚å› æ­¤ï¼Œæˆ‘æ²¡æœ‰æ³¨é‡Šç•™ç»™ä½ ã€‚ 123// I am not responsible of this code.// They made me write it, against my will.// ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä¸è´Ÿè´£ã€‚å› ä¸ºæ˜¯ä»–ä»¬é€¼æˆ‘å†™çš„ï¼Œè¿èƒŒäº†æˆ‘çš„æ„æ„¿ã€‚ 12// I have to find a better job// çœ‹æ¥æˆ‘éœ€è¦æ‰¾ä»½æ›´å¥½çš„å·¥ä½œäº† 123/*** è¿™ä¸ªç±»æ˜¯Objectçš„å­ç±»*/ è½¬è½½åŸè‘—ï¼šhttp://www.jianshu.com/p/bd1f551a1915 å¦‚æœæœ‰æ›´å¥½åœ°å¯ä»¥ç•™è¨€ï¼Œå¦‚æœçœ‹åˆ°è¿™èƒ½å¸¦ç»™ä½ å¿«ä¹çš„è¯ï¼Œé‚£å°±ç‚¹ä¸ªç¨€é¥­å§ï¼Œæ„¿æ‰€æœ‰çš„ç¨‹åºéƒ½æ°¸æ— Bugã€‚]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å°è£…æ€ç»´â€”TabBarNavBar]]></title>
    <url>%2FEncapsulationThinking%2FTabBarNavBar.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ç®€æ˜“-TabBar + NavBar å°è£…ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š å°è£…è‡ªå®šä¹‰TabBar(è¡¨æ ¼æ ) å°è£…è‡ªå®šä¹‰NavBar(å¯¼èˆªæ ) 1.å°è£…è‡ªå®šä¹‰TabBar(è¡¨æ ¼æ )1234è§£å†³:æœ¬æ–‡é‡‡ç”¨è‡ªå®šä¹‰ TabBar ç»§æ‰¿äºUIViewï¼Œç§»é™¤ç³»ç»ŸtabBarä¸Šçš„å­æ§ä»¶ UITabBarButton ç”¨è‡ªå®šä¹‰ UIButton æ¥ä»£æ›¿ï¼Œåˆ‡æ¢æ§åˆ¶å™¨ self.selectedIndex = index; PS. æ•ˆæœåœ¨æœ€ä¸‹é¢. . . 1. è‡ªå®šä¹‰LNTabBarController121.è‡ªå®šä¹‰ç»§æ‰¿äºUITabBarController2.åˆ›å»ºå­æ§åˆ¶å™¨,æ·»åŠ æ‰€æœ‰çš„å­æ§åˆ¶å™¨addChildVCï¼Œå°è£…æ–¹æ³• æ·»åŠ æ‰€æœ‰çš„å­æ§åˆ¶å™¨addChildVC 1234567891011121314151617/** æ·»åŠ æ‰€æœ‰çš„å­æ§åˆ¶å™¨ */- (void)addChildVC&#123; // 1.è´­å½©å¤§å… [self setUpChildVC:[[LNHallTableVC alloc] init] image:[UIImage imageNamed:@"TabBar_LotteryHall_new"] selectedImage:[UIImage imageNamed:@"TabBar_LotteryHall_selected_new"] title:@"è´­å½©å¤§å…"]; // 2.ç«æŠ€åœº [self setUpChildVC:[[LNArenaVC alloc] init] image:[UIImage imageNamed:@"TabBar_Arena_new"] selectedImage:[UIImage imageNamed:@"TabBar_Arena_selected_new"] title:nil]; // 3.å‘ç° [self setUpChildVC:[[LNDiscoverTableVC alloc] init] image:[UIImage imageNamed:@"TabBar_Discovery_new"] selectedImage:[UIImage imageNamed:@"TabBar_Discovery_selected_new"] title:@"å‘ç°"]; // 4.å¼€å¥–ä¿¡æ¯ [self setUpChildVC:[[LNHistoryTableVC alloc] init] image:[UIImage imageNamed:@"TabBar_History_new"] selectedImage:[UIImage imageNamed:@"TabBar_History_selected_new"] title:@"å¼€å¥–ä¿¡æ¯"]; // 5.æˆ‘çš„å½©ç¥¨ [self setUpChildVC:[[LNMyLotteryVC alloc] init] image:[UIImage imageNamed:@"TabBar_MyLottery_new"] selectedImage:[UIImage imageNamed:@"TabBar_MyLottery_selected_new"] title:@"æˆ‘çš„å½©ç¥¨"];&#125; å°è£…æ·»åŠ å­æ§åˆ¶å™¨æ–¹æ³• 1234567891011121314151617/** å°è£…æ·»åŠ å­æ§åˆ¶å™¨æ–¹æ³• */- (void)setUpChildVC:(UIViewController *)vc image:(UIImage *)image selectedImage:(UIImage *)selectedImage title:(NSString *)title &#123; // 1.è®¾ç½®tabBarçš„å›¾ç‰‡å’Œæ ‡é¢˜ vc.tabBarItem.image = image; vc.tabBarItem.selectedImage = selectedImage; vc.navigationItem.title = title; [self.items addObject:vc.tabBarItem]; // 2.åˆ›å»ºå¯¼èˆªæ  UINavigationController *nav = [[LNNavigationController alloc] initWithRootViewController:vc]; // åœ¨è¿™é‡Œå¯ä»¥åˆ¤æ–­å½“å‰ç±»æ˜¯ä½¿ç”¨ç³»ç»ŸNavBar,è¿˜æ˜¯è‡ªå®šä¹‰NavBar if ([vc isKindOfClass:[LNArenaVC class]]) &#123; nav = [[LNArenaNavController alloc] initWithRootViewController: vc]; &#125; [self addChildViewController:nav];&#125; 2. è‡ªå®šä¹‰tabBar1234561.å½“ç³»ç»ŸtabBarä¸æ»¡è¶³éœ€æ±‚æ—¶, è§£å†³:UIView å­æ§ä»¶UIButton åˆ‡æ¢æ§åˆ¶å™¨selectedIndex2.è‡ªå®šä¹‰LNTabBarç»§æ‰¿äºUIView3.åˆ‡æ¢æ§åˆ¶å™¨ self.selectedIndex = index;4.è‡ªå®šä¹‰LNTabBarButtonç»§æ‰¿äºUIButtonï¼Œä½œç”¨:å»æ‰é«˜äº®æ•ˆæœ(é‡å†™setHighlighted:æ–¹æ³•) æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬è¦å¯¹ç³»ç»Ÿçš„tabBaråšå¤„ç†ã€‚æ–¹æ³•ä¸€ï¼šç§»é™¤ç³»ç»Ÿçš„tabBarï¼Œæ–¹æ³•äºŒï¼šç§»é™¤tabBarä¸Šçš„å­æ§ä»¶(é‡‡ç”¨)ï¼Œé‡‡ç”¨åŸå› ï¼š(æ–¹ä¾¿æˆ‘ä»¬ä¸‹æ­¥ç»Ÿä¸€è®¾ç½®è¿”å›æŒ‰é’®æˆ–æ˜¯æ»‘åŠ¨ç§»é™¤éæ ¹æ§åˆ¶å™¨ï¼Œvc.hidesBottomBarWhenPushed = YES;æ­¤å±æ€§æ˜¯éšè—çš„ç³»ç»Ÿçš„tabBar) 1.ç§»é™¤ç³»ç»ŸtabBarä¸Šçš„å­æ§ä»¶ 123456789101112131415161718192021222324/** åœ¨viewå³å°†æ˜¾ç¤ºçš„æ—¶å€™, æŠŠç³»ç»Ÿçš„UITabBarButtonç§»é™¤ */- (void)viewWillAppear:(BOOL)animated &#123; [super viewWillAppear:animated]; for (UIView *view in self.tabBar.subviews) &#123; /** UITabBarButton:ç³»ç»Ÿçš„ç§æœ‰tabBarå±æ€§ è¿™é‡Œé‡‡ç”¨é€†å‘æ€ç»´,åˆ¤æ–­æ˜¯è‡ªå·±çš„(LNTabBar)å°±ä¸ç§»é™¤.ä¸æ˜¯è‡ªå·±å°±ç§»é™¤ */ if (![view isKindOfClass:[LNTabBar class]]) &#123; [view removeFromSuperview]; &#125; &#125;&#125;/** è‡ªå®šä¹‰tabBar */- (void)setUpTabBar&#123; LNTabBar *tabBar = [[LNTabBar alloc] init]; // æ³¨æ„:è¿™é‡Œèµ‹å€¼frameè¦ç”¨bounds tabBar.frame = self.tabBar.bounds; tabBar.items = self.items; tabBar.delegate = self; [self.tabBar addSubview:tabBar];&#125; 2.åˆ›å»ºè‡ªå®šä¹‰LNTabBarç»§æ‰¿äºUIView1234å°è£…æ§ä»¶åŸºæœ¬æ­¥éª¤ï¼š1ã€åœ¨`initWithFrame:`æ–¹æ³•ä¸­æ·»åŠ å­æ§ä»¶ï¼Œæä¾›ä¾¿åˆ©æ„é€ æ–¹æ³•2ã€åœ¨`layoutSubviews`æ–¹æ³•ä¸­è®¾ç½®å­æ§ä»¶çš„`frame` (ä¸€å®šè¦è°ƒç”¨`[super layoutSubviews];`)3ã€å¢åŠ æ¨¡å‹å±æ€§ï¼Œåœ¨æ¨¡å‹å±æ€§`setæ–¹æ³•`ä¸­å­æ§ä»¶èµ‹å€¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#import "LNTabBar.h"#import "LNTabBarButton.h"@interface LNTabBar ()/** è®°å½•å½“å‰é€‰ä¸­çš„æŒ‰é’® */@property (nonatomic, weak) UIButton *selectBtn;@end@implementation LNTabBar// setæ–¹æ³•èµ‹å€¼- (void)setItems:(NSArray *)items &#123; _items = items; for (UITabBarItem *tabBarItem in items) &#123; // æ·»åŠ å­æ§ä»¶ /** æ³¨æ„:è¿™é‡Œä½¿ç”¨ç³»ç»Ÿbuttonä¼šæœ‰é«˜äº®æ•ˆæœ,æ²¡æœ‰å»æ‰é«˜äº®çš„å±æ€§,éœ€è¦è‡ªå®šä¹‰btn */ LNTabBarButton *btn = [[LNTabBarButton alloc] init]; btn.tag = self.subviews.count; // è®¾ç½®èƒŒæ™¯å›¾ç‰‡å’Œç‚¹å‡»äº‹ä»¶ [btn setBackgroundImage:tabBarItem.image forState:UIControlStateNormal]; [btn setBackgroundImage:tabBarItem.selectedImage forState:UIControlStateSelected]; [btn addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchDown]; // æ·»åŠ æŒ‰é’® [self addSubview:btn]; // é»˜è®¤è®©ç¬¬ä¸€ä¸ªæŒ‰é’®æˆä¸ºé€‰ä¸­çŠ¶æ€ if (self.subviews.count == 1) &#123; [self btnClick:btn]; &#125; &#125;&#125;// è®¾ç½®å­æ§ä»¶çš„frame- (void)layoutSubviews&#123; [super layoutSubviews]; CGFloat btnX = 0; CGFloat btnY = 0; CGFloat btnW = self.frame.size.width / self.items.count; CGFloat btnH = self.frame.size.height; int index = 0; // å–å‡ºæ‰€æœ‰çš„æŒ‰é’® for (UIButton *btn in self.subviews) &#123; btnX = btnW * index; btn.frame = CGRectMake(btnX, btnY, btnW, banh); index++; &#125;&#125;@end 3.åˆ‡æ¢æ§åˆ¶å™¨ç»™Btnæ·»åŠ tagå€¼self.subviews.count,é€šè¿‡ä»£ç†å°†tagä¼ å€¼åˆ°æ§åˆ¶å™¨,æ§åˆ¶å™¨å®ç°ä»£ç†æ–¹æ³•ä¸”self.selectedIndex = index; 12345678910111213141516171819// LNTabBar.h#import &lt;UIKit/UIKit.h&gt;// 1.å®šä¹‰åè®®@class LNTabBar;@protocol LNTabBarDelegate &lt;NSObject&gt;// 2.å®šä¹‰åè®®æ–¹æ³•- (void)tabBar:(LNTabBar *)tabBar index:(NSInteger)index;@end@interface LNTabBar : UIView/** å­˜æ”¾TabBarItemæ¨¡å‹ */@property (nonatomic, strong) NSArray *items;// 3.å®šä¹‰éµå®ˆåè®®çš„ä»£ç†@property (nonatomic, weak) id&lt; LNTabBarDelegate &gt;delegate;@end åœ¨btnClickæ–¹æ³•ä¸­,ä¸‰æ­¥è®¾ç½®Btnçš„åˆ‡æ¢1234567891011121314// å½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™è°ƒç”¨(è¿™é‡Œéœ€è¦å®šä¹‰selectBtnå±æ€§æ¥è®°å½•å½“å‰é€‰ä¸­çš„æŒ‰é’®)- (void)btnClick:(UIButton *)btn&#123; // 1.å–æ¶ˆä¸Šæ¬¡é€‰ä¸­ self.selectBtn.selected = NO; // 2.é€‰ä¸­å½“å‰ç‚¹å‡»çš„æŒ‰é’® btn.selected = YES; // 3.è®°å½•å½“å‰é€‰ä¸­çš„æŒ‰é’® self.selectBtn = btn; // 4.è°ƒç”¨ä»£ç†æ–¹æ³•é€šçŸ¥ä»£ç† if ([self.delegate respondsToSelector:@selector(tabBar:index:)]) &#123; [self.delegate tabBar:self index:btn.tag]; &#125;&#125; 1234567#import "LNTabBarVC.h"// 5.å®ç°åè®®æ–¹æ³•- (void)tabBar:(LNTabBar *)tabBar index:(NSInteger)index&#123; // åˆ‡æ¢å­æ§åˆ¶å™¨ self.selectedIndex = index;&#125; 4.è‡ªå®šä¹‰LNTabBarButtonç»§æ‰¿äºUIButton 1234567@implementation LNTabBarButton/** UIButtonå»æ‰é«˜äº®æ•ˆæœ,é‡å†™ setHighlighted: æ–¹æ³• */- (void)setHighlighted:(BOOL)highlighted&#123;&#125; 2. å°è£…è‡ªå®šä¹‰NavBar(å¯¼èˆªæ )1. è‡ªå®šä¹‰LNNavigationController1231.è‡ªå®šä¹‰ç»§æ‰¿äºUINavigationController2.åšåˆ°è°çš„äº‹æƒ…è°ç®¡ç†(è‡ªå®šä¹‰è®¾ç½®å¯¼èˆªæ çš„å†…å®¹)3.initialize æ€§èƒ½ä¼˜åŒ– é¦–å…ˆäº†è§£ä¸¤ä¸ªçŸ¥è¯†ç‚¹ initialize å’Œ appearanceinitializeä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šå½“ç¬¬ä¸€æ¬¡åˆå§‹åŒ–è¿™ä¸ªç±»çš„æ—¶å€™è°ƒç”¨ä¸”åªè°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå½“è¿™ä¸ªç±»æœ‰å­ç±»ä¼šè°ƒç”¨å¤šæ¬¡.ä½œç”¨ï¼šåˆå§‹åŒ–è¿™ä¸ªç±» appearanceï¼šè·å–æ•´ä¸ªé¡¹ç›®å½“ä¸­çš„æŸä¸ªå±æ€§UINavigationBar *navBar = [UINavigationBar appearance];1ã€ç”¨è¿™ä¸ªæ–¹æ³•,è·å–æ•´ä¸ªé¡¹ç›®å½“ä¸­çš„UINavigationBar.ç³»ç»Ÿçš„ä¹Ÿç»™è·å–äº†,ä¹Ÿç»™è®¾ç½®äº†èƒŒæ™¯,æˆ‘ä»¬ä¸é¡»è¦æ”¹ç³»ç»Ÿçš„ä¸œè¥¿.æ‰€ä»¥åœ¨è¿™é‡Œ,ä¸èƒ½ç›´æ¥è·å–æ•´ä¸ªç³»ç»Ÿå½“ä¸­çš„UINavigationBar,æ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸ç›´æ¥ä½¿ç”¨è¿™ä¸ª.2ã€è§£å†³:12// è·å–æŒ‡å®šç±»ä¸‹çš„æ‰€æœ‰UINavigationBarUINavigationBar *navBar = [UINavigationBar appearanceWhenContainedInInstancesOfClasses:@[[LNNavigationController class]]]; 12345678910111213141516// æ§åˆ¶å™¨æ·»åŠ 5ä¸ªtabBarä¼šè°ƒç”¨å°è£…æ–¹æ³•5æ¬¡,å³ä¼šè°ƒç”¨viewDidLoad5æ¬¡,éœ€è¦æ€§èƒ½ä¼˜åŒ–,initialize æ­¤æ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡. + (void)initialize &#123; if (self == [LNNavigationController class]) &#123; // 1.è·å–æŒ‡å®šä¸€ä¸ªç±»æˆ–å¤šä¸ªç±»ä¸‹UINavigationBar UINavigationBar *navBar = [UINavigationBar appearanceWhenContainedInInstancesOfClasses:@[[LNNavigationController class]]]; /** 2.è®¾ç½®navBarèƒŒæ™¯å›¾ç‰‡ è®¾ç½®ä¸ºUIBarMetricsDefaultçš„,æ§åˆ¶å™¨çš„Viewçš„Yå€¼ä»64å¼€å§‹.å…¶å®ƒç±»å‹çš„æ§åˆ¶å™¨çš„Viewçš„Yå€¼ä»0å¼€å§‹ */ [navBar setBackgroundImage:[UIImage imageNamed:@"NavBar64"] forBarMetrics:UIBarMetricsDefault]; // è®¾ç½®navBaræ ‡é¢˜ NSDictionary *dict = @&#123;NSFontAttributeName:[UIFont systemFontOfSize:18.f],NSForegroundColorAttributeName:[UIColor whiteColor]&#125;; [navBar setTitleTextAttributes:dict]; &#125;&#125; 2. ç»Ÿä¸€è®¾ç½®è¿”å›æŒ‰é’®+æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨+å…¨å±æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨ 1.ä¿®æ”¹ç³»ç»Ÿçš„pushæ–¹æ³•,åˆ¤æ–­å½“éæ ¹æ§åˆ¶å™¨æ—¶,è®¾ç½®å·¦ä¾§è¿”å›æŒ‰é’® &amp; éšè—åº•éƒ¨è¡¨æ ¼æ .2.å½“æ˜¯æ ¹æ§åˆ¶å™¨çš„æ—¶å€™è¿˜åŸç³»ç»Ÿä»£ç†,æ˜¯éæ ¹æ§åˆ¶å™¨çš„æ—¶å€™æ¸…ç©ºç³»ç»Ÿä»£ç†3.å½“æ˜¯æ ¹æ§åˆ¶å™¨æ‰‹åŠ¿ç¦æ­¢,éæ§åˆ¶å™¨æ‰‹åŠ¿å¯ä»¥ç”¨ 1.ç»Ÿä¸€è®¾ç½®è¿”å›æŒ‰é’®:ä¿®æ”¹ç³»ç»Ÿçš„pushæ–¹æ³•,åˆ¤æ–­å½“éæ ¹æ§åˆ¶å™¨æ—¶,è®¾ç½®å·¦ä¾§è¿”å›æŒ‰é’® &amp; éšè—åº•éƒ¨è¡¨æ ¼æ . 12345678910111213141516- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated &#123; // å½“éæ ¹æ§åˆ¶å™¨æ—¶,è®¾ç½®å·¦ä¾§è¿”å›æŒ‰é’® if (self.viewControllers.count &gt; 0) &#123; // è®¾ç½®å·¦ä¾§è¿”å›æŒ‰é’® viewController.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageWithOriginalImageName:@"NavBack"] style:0 target:self action:@selector(back:)]; // ç»Ÿä¸€è®¾ç½®éæ ¹æ§åˆ¶å™¨éšè—åº•éƒ¨è¡¨æ ¼æ (éšè—ä¸€å®šè¦å†™åœ¨pushä¹‹å‰) viewController.hidesBottomBarWhenPushed = YES; &#125; [super pushViewController:viewController animated:animated];&#125;- (void)back:(UIBarButtonItem *)item &#123; [self popViewControllerAnimated:YES];&#125; æ³¨æ„:å¦‚æœåœ¨å¯¼èˆªæ§åˆ¶å™¨ç»Ÿä¸€è®¾ç½®è¿”å›æŒ‰é’®,å°±æ²¡æœ‰æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨çš„åŠŸèƒ½è§£å†³:ç»Ÿä¸€è®¾ç½®æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨ 2.ç»Ÿä¸€è®¾ç½®æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨:å½“æ˜¯æ ¹æ§åˆ¶å™¨çš„æ—¶å€™è¿˜åŸç³»ç»Ÿä»£ç†,æ˜¯éæ ¹æ§åˆ¶å™¨çš„æ—¶å€™æ¸…ç©ºç³»ç»Ÿä»£ç† 1234567891011/** ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† */@property (nonatomic, strong) id popGesture;- (void)viewDidLoad &#123; [super viewDidLoad]; //self.interactivePopGestureRecognizer.delegate = nil;// è¿™é‡Œæœ‰bug,ä¸ä½¿ç”¨ self.popGesture = self.interactivePopGestureRecognizer.delegate; // æŠŠè‡ªå·±è®¾ç½®æˆè‡ªå·±çš„ä»£ç†,éµå®ˆ&lt;UINavigationControllerDelegate&gt; self.delegate = self;&#125; ä»£ç†æ–¹æ³•12345678910111213#pragma mark NavControllerDelegate// å½“æ§åˆ¶å™¨æ˜¾ç¤ºå®Œæ¯•çš„æ—¶å€™è°ƒç”¨- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated &#123; if (self.viewControllers[0] == viewController) &#123; // æ ¹æ§åˆ¶å™¨è¿˜åŸä»£ç† self.interactivePopGestureRecognizer.delegate = self.popGesture; &#125; else &#123; // éæ ¹æ§åˆ¶å™¨æ¸…ç©ºä»£ç† self.interactivePopGestureRecognizer.delegate = nil; &#125;&#125; 3.ç»Ÿä¸€è®¾ç½®å…¨å±æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨:å½“æ˜¯æ ¹æ§åˆ¶å™¨æ‰‹åŠ¿ç¦æ­¢,éæ§åˆ¶å™¨æ‰‹åŠ¿å¯ä»¥ç”¨ æ–¹æ³•ä¸€: 1.å…ˆä¿®æ”¹ç³»ç»Ÿçš„æ‰‹åŠ¿,ç³»ç»Ÿæ²¡æœ‰ç»™æˆ‘æä¾›å…¨å±æ»‘åŠ¨çš„å±æ€§,éœ€è¦è‡ªå·±æ·»åŠ æ‰‹åŠ¿2.è‡ªå·±æ·»åŠ Panæ‹–åŠ¨æ‰‹åŠ¿3.ç¼ºå°‘Target(ç³»ç»Ÿçš„ç§æœ‰å±æ€§),åˆ©ç”¨KVCå–targetçš„ç±»å‹. å…¶ä¸­ä¹Ÿç”¨åˆ°OC runtimeæœºåˆ¶,è·å–å½“å‰ç±»çš„æˆå‘˜å±æ€§ 12345678910111213141516171819202122232425// å…¨å±æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨æ–¹æ³•ä¸€- (void)fullScreenSlideMethodsA &#123; // 1.å…ˆä¿®æ”¹ç³»ç»Ÿçš„æ‰‹åŠ¿,ç³»ç»Ÿæ²¡æœ‰ç»™æˆ‘æä¾›å…¨å±æ»‘åŠ¨çš„æ‰‹åŠ¿,éœ€è¦è‡ªå·±æ·»åŠ  UIScreenEdgePanGestureRecognizer *gest = self.interactivePopGestureRecognizer; // OC runtime æœºåˆ¶,æ³¨æ„ç‚¹åªèƒ½åŠ¨æ€è·å–å½“å‰ç±»çš„æˆå‘˜å±æ€§,ä¸èƒ½è·å–å­ç±»æˆ–è€…çˆ¶ç±»çš„å±æ€§// unsigned int outCount = 0;// Ivar *ivars = class_copyIvarList([UIGestureRecognizer class], &amp;outCount);// for (int i = 0; i &lt; outCount; i++) &#123;// // è·å–æˆå‘˜å±æ€§çš„åå­—(Cè¯­è¨€è½¬æ¢æˆOCæˆå‘˜å±æ€§)// NSString *name = @(ivar_getName(ivars[i]));// NSLog(@"%@",name);// _targets// &#125; NSArray *targets = [gest valueForKeyPath:@"_targets"]; id target = [targets[0] valueForKeyPath:@"_target"]; // 2.è‡ªå·±æ·»åŠ æ‰‹åŠ¿ UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)]; [self.view addGestureRecognizer:pan]; // 3.ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿ self.interactivePopGestureRecognizer.enabled = YES;&#125; æ–¹æ³•äºŒ: targetå’Œç³»ç»Ÿæ‰‹åŠ¿ä»£ç†ä¸€æ ·çš„id target = self.interactivePopGestureRecognizer.delegate; 123456789101112131415// å…¨å±æ»‘åŠ¨ç§»é™¤æ§åˆ¶å™¨æ–¹æ³•äºŒ- (void)fullScreenSlideMethodsB &#123; // 1.ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† id target = self.interactivePopGestureRecognizer.delegate; // 2.è‡ªå·±æ·»åŠ æ‰‹åŠ¿ UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)]; [self.view addGestureRecognizer:pan]; // Target:self å’Œ delegate = self æ˜¯ä¸€æ ·çš„. pan.delegate = self; // 3.ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿ self.interactivePopGestureRecognizer.enabled = YES;&#125; å…±åŒbugè§£å†³:éµå®ˆ,åœ¨ä»£ç†æ–¹æ³•ä¸­åˆ¤æ–­å¦‚æœæ˜¯æ ¹æ§åˆ¶å™¨å°±ç¦æ­¢æ‰‹åŠ¿12345678#pragma mark UIGestureRecognizerDelegate// å½“å¼€å§‹æ»‘åŠ¨å°±ä¼šè°ƒç”¨.å¦‚æœè¿”å›YESå¯ä»¥æ»‘åŠ¨,è¿”å›NOç¦æ­¢æ‰‹åŠ¿- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; // å½“æ˜¯æ ¹æ§åˆ¶å™¨æ‰‹åŠ¿ç¦æ­¢,éæ§åˆ¶å™¨æ‰‹åŠ¿å¯ä»¥ç”¨ BOOL open = self.viewControllers.count &gt; 1; return open;&#125; æ€»ç»“1.é—®é¢˜ï¼šç³»ç»Ÿä¼šé»˜è®¤å°†é€‰ä¸­å›¾ç‰‡æ¸²æŸ“æˆè“è‰²æ˜¾ç¤ºè§£å†³ï¼šæ–¹æ³•ä¸€,å°è£…:ç»™UIImageæ·»åŠ imageåˆ†ç±»12345678910// æ–¹æ³•/** è¿”å›ä¸€å¼ æ²¡æœ‰ç»è¿‡æ¸²æŸ“çš„å›¾ç‰‡ */+ (UIImage *)imageWithOriginalImageName:(NSString *)imageName&#123; UIImage *image = [UIImage imageNamed:imageName]; return [image imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal];&#125;// è°ƒç”¨UIImage *image = [UIImage imageWithOriginalImageName:@"NavBack"]; æ–¹æ³•äºŒï¼šå›¾å½¢åŒ–è®¾ç½® æ•ˆæœ]]></content>
      <categories>
        <category>å°è£…</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å°è£…æ€ç»´â€”Button]]></title>
    <url>%2FEncapsulationThinking%2FButton.html</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€ç®€æ˜“-Button æŒ‰é’®å°è£…ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ğŸ”ç™½å¼€æ°´lnã€‚ ç›®å½•ï¼š è°ƒæ•´Btnå†…éƒ¨imageViewå’Œlabelçš„ä½ç½® 1.è°ƒæ•´Btnå†…éƒ¨imageViewå’Œlabelçš„ä½ç½®12éœ€æ±‚: ä»¥å†™å¯¼èˆªæ  titleView ,å°è£…æ€ç»´,åˆ«äººæœ‰å¯èƒ½æ”¹å˜ä½ çš„æ ‡é¢˜;æ”¹å˜äº†æ ‡é¢˜å†…å®¹è¿˜éœ€è¦é‡æ–°é€‚åº”sizeToFit.è§£å†³: è‡ªå®šä¹‰Button;é‡å†™setæ–¹æ³•(ä¸€å®šè¦è°ƒç”¨çˆ¶ç±»),sizeToFitä¹Ÿéœ€è¦å°è£…é‡Œé¢ åˆ›å»ºç»§æ‰¿äºUIButtonçš„ LNTitleViewBtnæ–¹æ³•ï¼š1234567891011121314151617181920212223242526@implementation LNTitleViewBtn/** è¿™ä¸ªæ–¹æ³•ä¼šè°ƒä¸¤æ¬¡ UIButtonè®¾ç½®titleçš„æ—¶å€™ä¼šè°ƒç”¨ä¸€æ¬¡,è®¾ç½®imageçš„æ—¶å€™ä¼šè°ƒç”¨ä¸€æ¬¡(imageå¿…é¡»æœ‰ä¸”ä¸ä¸ºnil) */- (void)layoutSubviews &#123; [super layoutSubviews]; //NSLog(@"%s, line = %d",__FUNCTION__,__LINE__); // è°ƒæ•´å­æ§ä»¶çš„ä½ç½® if (self.imageView.x &lt; self.titleLabel.x) &#123; self.titleLabel.x = self.imageView.x; self.imageView.x = CGRectGetMaxX(self.titleLabel.frame); &#125;&#125;- (void)setTitle:(NSString *)title forState:(UIControlState)state &#123; [super setTitle:title forState:state]; [self sizeToFit];&#125;- (void)setImage:(UIImage *)image forState:(UIControlState)state &#123; [super setImage:image forState:state]; [self sizeToFit];&#125;@end è°ƒç”¨ï¼š1234567891011121314// 1.è®¾ç½®titleViewUIButton *btn = [[LNTitleViewBtn alloc] init];self.btn = btn;[btn setImage:[UIImage imageNamed:@&quot;titleView&quot;] forState:UIControlStateNormal];[btn setTitle:@&quot;å…¨éƒ¨çŒœä¸­&quot; forState:UIControlStateNormal];[btn sizeToFit];self.navigationItem.titleView = btn;- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; [self.btn setTitle:@&quot;æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜æ ‡é¢˜&quot; forState:UIControlStateNormal]; [self.btn setImage:nil forState:UIControlStateNormal]; //[self.btn sizeToFit];&#125;]]></content>
      <categories>
        <category>å°è£…</category>
      </categories>
      <tags>
        <tag>å°è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€æ¯ç™½å¼€æ°´]]></title>
    <url>%2FPerceptionWork%2Fwater.html</url>
    <content type="text"><![CDATA[å¿µå¿µä¸å¿˜ æ™šä¸Šåƒäº†ä¸€å¤§å—è›‹ç³•ï¼Œç”œç”œçš„å¥¶æ²¹åœ¨åƒå¤šäº†ä¹‹åè®©äººè§‰å¾—è…»çš„æƒ³åï¼Œèˆå‹å¼€å§‹ç”¨é»‘å’–å•¡è§£è…»ï¼Œä¸€ç›´ä¸å–œæ¬¢å’–å•¡å‘¢æˆ‘ä¹Ÿå»å‡‘äº†ä¸ªçƒ­é—¹ï¼Œå–äº†ä¸€å¤§å£ã€‚å¤§åŠå¤œè¿˜æ²¡ç¡ç€ï¼Œä¸çŸ¥é“æ˜¯è‡ªå·±æœ€è¿‘ç¡å¤ªå¤šè¿˜æ˜¯çœŸçš„æ˜¯å’–å•¡çš„åŠŸæ•ˆï¼Œéšæ‰‹ç¿»äº†ç¿»æ‰‹æœºç›¸å†Œï¼Œçœ‹åˆ°äº†ç™½å¤©éšæ‰‹æ‹çš„é‚£æ¯ç™½å¼€æ°´ã€‚ è¯´ä¸ä¸Šç‰¹åˆ«å–œæ¬¢ç³–ï¼Œä½†æ˜¯æ¯”èµ·æ— å‘³çš„ä¸œè¥¿æˆ‘æ›´æ„¿æ„æ¥å—æœ‰ç‚¹å‘³é“çš„ï¼Œæ‰€ä»¥ä»¥å‰åœ¨ç™½æ°´å’Œé¥®æ–™ä¹‹é—´æˆ‘æ›´å–œæ¬¢é‚£äº›ä¹±ä¸ƒå…«ç³Ÿå‘¢é¥®æ–™ï¼Œåˆ°äº†åæ¥ï¼Œåˆ‡åˆ‡çš„è¯´åº”è¯¥æ˜¯ä»å¤§äºŒæ—¶èµ·æˆ‘å¼€å§‹é€æ¸æŠµè§¦å„ç±»é¥®æ–™ï¼Œå¥¶èŒ¶ä¹‹ç±»çš„ä¸œè¥¿ä¹Ÿä¸€å­¦æœŸæœ€å¤šå–ä¸Šä¸€ä¸¤æ¬¡ï¼Œå¯èƒ½æ˜¯å—â€œé‚£äº›ä¸œè¥¿ä¸å¥åº·ï¼Œåƒå¤šäº†ä¸å¥½ï¼â€â€œé‚£é‡Œé¢æœ‰é˜²è…å‰‚ï¼Œè‰²ç´ ï¼â€ç­‰ç­‰ä¹‹ç±»çš„è¯çš„å½±å“ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå¹´é¾„çš„å¢é•¿ï¼Œæ€»ä¹‹åˆ°ç°åœ¨é‚£äº›ä¸œè¥¿æˆ‘å¯¹å®ƒä»¬å·²ç»æ²¡æœ‰äº†å…´è¶£ã€‚åè€Œï¼Œæˆ‘æ›´å–œæ¬¢ç™½å¼€æ°´ã€‚æ¯å¤©æ—©æ™¨èµ·åºŠï¼Œç¬¬ä¸€ä»¶äº‹ç»å¯¹æ˜¯å€’ä¸€å¤§æ¯ç™½å¼€æ°´ï¼Œå¾…æ´—æ¼±å®Œæ¯•ä¹‹åå†æŠŠå®ƒä¸€é¥®è€Œå°½ï¼Œæˆ‘å¾ˆå–œæ¬¢å®ƒå¸¦ç»™æˆ‘çš„é‚£ç§å¿ƒæ—·ç¥æ€¡çš„æ„Ÿè§‰ï¼Œç¾å¥½çš„æ—©æ™¨ä»ä¸€æ¯ç™½å¼€æ°´å¼€å§‹ã€‚ æœ‰å¥è¯è¯´â€œç”Ÿæ´»å°±åƒä¸€æ¯ç™½å¼€æ°´â€ï¼Œæˆ‘ä¹‹å‰ä¸€ç›´éƒ½è§‰å¾—ç™½å¼€æ°´åªæ˜¯ä¸€ç§å¹³æ·¡æ— å¥‡çš„æ¶²ä½“ï¼Œå› è€Œåœ¨å¾ˆä¹…ä¹‹å‰çœ‹åˆ°è¿™å¥è¯çš„æ—¶å€™ä¹Ÿä¸å¤§ç†è§£ä¸ºä½•è¦è¿™æ ·æ¯”å–»ï¼Œæˆ‘ä¸€ç›´éƒ½æ„Ÿè§‰ç”Ÿæ´»æ˜¯ä¸€ä¸ªå…·æœ‰é…¸ã€ç”œã€éº»ã€è‹¦ã€è¾£çš„äº”å‘³ç“¶ï¼Œè€Œä¸ä»…ä»…åªæ˜¯å¹³æ·¡æ— å¥‡ã€‚å‰å‡ å¤©æ™šä¸Šç¡è§‰ä¹‹å‰åœ¨ä¸€ä¸ªç”µå°å¬åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œæ–‡ç« çš„é¢˜ç›®å«åšã€Šå¹¸ç¦æ˜¯ä¸€æ¯ç™½å¼€æ°´ã€‹æ–‡ä¸­ä½œè€…å¯¹ç”Ÿæ´»å¹¸ç¦çš„æ„Ÿè§¦ä»¥åŠç²¾ç®€æœ‰åŠ›çš„æ–‡å­—è¡¨è¾¾çš„ç»†è…»æƒ…æ„Ÿå¼•èµ·äº†æˆ‘çš„æƒ…æ„Ÿå…±é¸£ï¼Œæˆ‘å¼€å§‹ç†è§£ç”Ÿæ´»ç¡®å®æ˜¯åƒä¸€æ¯ç™½å¼€æ°´ï¼Œè€Œæˆ‘ä»¬éƒ½æ˜¯å¯ä»¥æ§åˆ¶ç™½å¼€æ°´å‘³é“çš„äººï¼Œåœ¨é‡Œé¢åŠ å…¥â€œç³–â€æˆ‘ä»¬æ‹¥æœ‰çš„ä¾¿æ˜¯ç”œèœœï¼ŒåŠ å…¥â€œé»‘å’–å•¡â€æ‹¥æœ‰çš„ä¾¿æ˜¯è®©äººå›å‘³çš„è‹¦ï¼ŒåŠ å…¥â€œèŒ¶å¶â€æ‹¥æœ‰çš„ä¾¿æ˜¯è‹¦æ¶©ä¹‹åçš„å›å‘³æ— ç©·ï¼Œç”Ÿæ´»å¦‚ä½•å…¨é è‡ªå·±æ‰€åŠ çš„æ–™ã€‚ ç”Ÿæ´»åŸæœ¬å°±åƒä¸€æ¯ç™½å¼€æ°´ï¼Œè€Œæˆ‘ä»¬è‡ªå·±æ‰æ˜¯æŒæ§ç”Ÿæ´»è´¨é‡çš„ä¸»äººï¼Œæˆ‘ä»¬éœ€ä¸è¦å› ä¸ºæ˜¨å¤©è€Œè®©æ˜å¤©é»¯ç„¶å¤±è‰²çš„ä¿¡å¿ƒï¼Œéœ€è¦æ‹¥æœ‰æˆ‘å°±æ˜¯æˆ‘ï¼Œæˆ‘ç”Ÿæ´»çš„ä¸»äººçš„æ‰§å¿µï¼Œå»ç»è¥ç”Ÿæ´»ï¼Œå»æŠŠæ¡ç”Ÿæ´»ï¼ŒæŠŠæœ¬æ¥ç±»ä¼¼ç™½å¼€æ°´çš„ç”Ÿæ´»è¿‡æˆæˆ‘ä»¬å–œæ¬¢çš„æ ·å­]]></content>
      <categories>
        <category>æ„Ÿæ‚Ÿ</category>
      </categories>
      <tags>
        <tag>èŒåœº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS æ¨¡å¼è¯¦è§£â€”ã€ŒBlocké¢è¯•ã€å·¥ä½œã€]]></title>
    <url>%2FiOSUI%2FBlock.html</url>
    <content type="text"><![CDATA[å¼•å¯¼Block åœ¨å¼€å‘ä¸­æ˜¯æ¯”è¾ƒå®ç”¨çš„ï¼Œä¸€èˆ¬èƒ½ç”¨Blockçš„å°±ä½¿ç”¨Blockï¼Œå­¦ä¼šä½¿ç”¨Blockï¼Œä½ å†ä¹Ÿä¸æƒ³ç”¨ç¹ççš„ä»£ç†ã€‚Blockæ²¡æœ‰ä½ æƒ³è±¡ä¸­çš„é‚£ä¹ˆéš¾ï¼Œä¸è¦å®³æ€•ï¼Œè¦å‹‡æ•¢å°è¯•ã€‚ Write in the first ä¸‹é¢æ˜¯æˆ‘å¯¹ Block çš„æ•´ç†ï¼Œä»é›¶å¼€å§‹ï¼Œç”±æµ…å…¥æ·±ï¼Œå¹¶ä¸”å¸¦äº†å‡ ä¸ª Block å®é™…å¼€å‘çš„åº”ç”¨åœºæ™¯ã€‚å¯¹äºä»äº‹ iOS å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¸ä¼šä½¿ç”¨ Blockï¼Œé‚£ ~ ~ æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»ã€Block å®ç”¨ç›¸å…³è¯¦è§£ã€‘å­¦ä¹ æ€»ç»“ã€‚åœ¨ã€Œæ—¶é—´ &amp; çŸ¥è¯† ã€æœ‰é™å†…ï¼Œæ€»ç»“çš„æ–‡ç« éš¾å…æœ‰ã€Œæœªå…¨ã€ä¸è¶³ ã€çš„åœ°æ–¹ï¼Œè¿˜æœ›å„ä½å¥½å‹æŒ‡å‡ºï¼Œä»¥æé«˜æ–‡ç« è´¨é‡ï¼›@ ç™½å¼€æ°´ln ç›®å½•ï¼š Blockæ¦‚å¿µ Blockå£°æ˜ã€å®šä¹‰ã€ç±»å‹ã€è°ƒç”¨ å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šä¿å­˜ä»£ç  å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockä¼ å€¼ &amp; ä»£ç†ä¼ å€¼1.ä¼ å€¼ç®€æ˜ä»‹ç»2.ç¤ºä¾‹éœ€æ±‚ï¼šä»£ç†ä¼ å€¼3.ç¤ºä¾‹éœ€æ±‚ï¼šBlockä¼ å€¼ Blockåœ¨MRC &amp; ARCä¸‹çš„å†…å­˜ç®¡ç†1.é¢è¯•é¢˜1/22.Blockå†…å­˜ç®¡ç†(MRC)3.Blockå†…å­˜ç®¡ç†(ARC) Blockå¾ªç¯å¼•ç”¨1.é™„å›¾æ³¨è§£ï¼š Blockå˜é‡ä¼ é€’ å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockå½“å‚æ•°ä½¿ç”¨ å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockå½“è¿”å›å€¼ä½¿ç”¨ blockçš„åˆ†ç±»ï¼ˆæ ˆã€å †ã€å…¨å±€åŒºï¼‰ Blockåº•å±‚å®ç° Blockè¯¦è§£æ•ˆæœå›¾ æœŸå¾…åç»­ &amp; About me Blockæ¦‚å¿µBlock é‡Šä¹‰ï¼šåŒ¿åçš„å‡½æ•°ã€ä»£ç å—ï¼ˆæŠŠä½ æƒ³è¦æ‰§è¡Œçš„ä»£ç å°è£…åœ¨è¿™ä¸ªä»£ç å—é‡Œï¼Œç­‰åˆ°éœ€è¦çš„æ—¶å€™å†å»è°ƒç”¨ï¼‰ï¼Œæ˜¯è‹¹æœåœ¨ iOS4 å¼€å§‹å¼•å…¥çš„å¯¹ C è¯­è¨€çš„æ‰©å±•ï¼Œç”¨æ¥å®ç°åŒ¿åå‡½æ•°çš„ç‰¹æ€§ï¼ŒBlock æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ­£å¸¸å®šä¹‰å˜é‡ã€ä½œä¸ºå‚æ•°ã€ä½œä¸ºè¿”å›å€¼ï¼›è¿˜å¯ä»¥ä¿å­˜ä¸€æ®µä»£ç ï¼Œåœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨ï¼ˆæ³¨æ„ï¼šå¿…é¡»è°ƒç”¨æ‰èƒ½æ‰§è¡Œä¿å­˜å†…éƒ¨çš„ä»£ç ï¼‰ï¼Œç›®å‰Block å·²ç»å¹¿æ³›åº”ç”¨äºiOSå¼€å‘ä¸­ï¼Œå¸¸ç”¨äºä¼ å€¼ã€å„ç±»å›è°ƒç­‰ï¼› Blockå£°æ˜ã€å®šä¹‰ã€ç±»å‹ã€è°ƒç”¨å£°æ˜12341.Blockå£°æ˜æ ¼å¼:è¿”å›å€¼(^Blockå˜é‡å)(å‚æ•°)ç¤ºä¾‹:void(^block)(); æœ€çº¯æ´çš„block,æ— è¿”å›å€¼æ— å‚ å®šä¹‰12345678910111213141516171819202122232425262728//------------ blockå®šä¹‰:ä¸‰ç§æ–¹å¼ = ^(å‚æ•°)&#123;&#125;; ------------////// ç¬¬ä¸€ç§: æœ€çº¯æ´çš„block,æ— è¿”å›å€¼æ— å‚void(^block1)() = ^()&#123;&#125;;// ç¬¬äºŒç§: å¦‚æœæ²¡æœ‰å‚æ•°,å‚æ•°å¯ä»¥éšè—,å¦‚æœæœ‰å‚æ•°,å®šä¹‰çš„æ—¶å€™,å¿…é¡»è¦å†™å‚æ•°,è€Œä¸”å¿…é¡»è¦æœ‰å‚æ•°å˜é‡åvoid(^block2)(NSString *) = ^(NSString *name)&#123;&#125;;// ç¬¬ä¸‰ç§ blockè¿”å›å¯ä»¥çœç•¥,ä¸ç®¡æœ‰æ²¡æœ‰è¿”å›å€¼,éƒ½å¯ä»¥çœç•¥int(^block3)() = ^int&#123; return 3;&#125;;//--------------------------- blockå¿«æ·æ–¹å¼ ------------------------------////// blockå¿«æ·æ–¹å¼ inline&lt;#returnType#&gt;(^&lt;#blockName#&gt;)(&lt;#parameterTypes#&gt;) = ^(&lt;#parameters#&gt;) &#123; &lt;#statements#&gt;&#125;;è¡¥å……ï¼šå˜é‡ã€å±æ€§ã€æ–¹æ³•NSString *(^myBlock2)(NSString *) = nil;// å¸¦å‚æ•°ä¸è¿”å›å€¼@property (nonatomic, strong) NSString *(^myBlock2)(NSString *);// å¸¦å‚æ•°ä¸è¿”å›å€¼- (void)test2:(NSString *(^)(NSString *))testBlock//å¸¦å‚æ•°ä¸è¿”å›å€¼ ç±»å‹ æ³¨è§£ï¼šBlock å˜é‡çš„èµ‹å€¼æ ¼å¼å¯ä»¥æ˜¯: Blockå˜é‡ = ^è¿”å›å€¼ç±»å‹(å‚æ•°åˆ—è¡¨){å‡½æ•°ä½“};ä¸è¿‡é€šå¸¸æƒ…å†µä¸‹éƒ½å°†è¿”å›å€¼ç±»å‹çœç•¥ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥ä»å­˜å‚¨ä»£ç å—çš„å˜é‡ä¸­ç¡®å®šè¿”å›å€¼çš„ç±»å‹. 12345678910111213// blockç±»å‹:int(^)(NSString *),å½¢å‚å˜é‡åç§°å¯ä»¥çœç•¥,åªç•™æœ‰å˜é‡ç±»å‹å³å¯int(^block4)(NSString *) = ^(NSString *name)&#123; NSLog(@"block4 %s, line = %d",__FUNCTION__,__LINE__); return 2;&#125;;block4(@"11");// æ— è¿”å›å€¼,å‚æ•°ä¸ºä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡,å˜é‡åå«åšLNBlockçš„Blockvoid(^LNBlock)(NSString *x, int y) = ^(NSString *name,int age)&#123; NSLog(@"LNBlock %@-%d%s, line = %d",name,age, __FUNCTION__,__LINE__);&#125;;LNBlock(@"liunan",18); ä½¿ç”¨ typedef å®šä¹‰ Block ç±»å‹åœ¨å®é™…ä½¿ç”¨Blockçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦é‡å¤åœ°å£°æ˜å¤šä¸ªç›¸åŒè¿”å›å€¼ç›¸åŒå‚æ•°åˆ—è¡¨çš„Blockå˜é‡ï¼Œå¦‚æœæ€»æ˜¯é‡å¤åœ°ç¼–å†™ä¸€é•¿ä¸²ä»£ç æ¥å£°æ˜å˜é‡ä¼šéå¸¸ç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨typedefæ¥å®šä¹‰Blockç±»å‹ã€‚ 123456789// æ–¹å¼ä¸€ï¼šblockType:ç±»å‹åˆ«åtypedef void (^BlockType)();@property (nonatomic, strong) BlockType block1;/** æä¾›æ„é€ æ–¹æ³• */- (instancetype)initWithFrame:(CGRect)frame andImageArray:(NSArray *)imageArray index:(LNBlock)indexBlock;// æ–¹å¼äºŒï¼šblockæ€ä¹ˆå£°æ˜,å°±å¦‚ä½•å®šä¹‰æˆå±æ€§ï¼ˆæ¨èä½¿ç”¨ï¼‰@property (nonatomic, strong) void(^block)(); è°ƒç”¨12345678// Blockè°ƒç”¨ï¼ˆä¼ å‚æ•°å€¼ï¼‰= ^(NSString *name,int age)&#123;LNBlock(@"liunan",18);// è¿™é‡Œä¸¥è°¨ç‚¹,è¦åŠ ä¸Šåˆ¤æ–­if (item.LNblock) &#123; item.LNblock(); // Blockè°ƒç”¨&#125; èµ‹å€¼12345678@property (nonatomic, strong) void(^myBlock)(NSString *value);// Blockæ¥æ”¶å€¼(å‚æ•°å€¼),ä¿å­˜ä»£ç _myBlock = ^(NSString *value)&#123; NSLog(@"%@",value);&#125;;_myBlock(@"123456"); å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šä¿å­˜ä»£ç ä¸‹é¢ä¸¾ä¸ªå°ç¤ºä¾‹ï¼ˆæŠŠç‚¹å‡»æ¯ä¸ª Cell æŠŠè¦åšçš„äº‹æƒ…(ä»£ç )ä¿å­˜åˆ°æ¨¡å‹ä¸­ï¼‰ï¼šå…ˆçœ‹æ•ˆæœ æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738#pragma mark ------------------#pragma mark - tableViewDataSource Delegate- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath &#123; static NSString *cellID = @"cellID"; UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID]; if (cell == nil) &#123; cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID]; &#125; LNCellItem *item = self.items[indexPath.row]; cell.textLabel.text = item.title; return cell;&#125;- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath &#123; LNCellItem *item = self.items[indexPath.row]; /** ç‚¹å‡»æ¯ä¸ªCellæŠŠè¦åšçš„äº‹æƒ…(ä»£ç )ä¿å­˜åˆ°æ¨¡å‹ä¸­ */ // è¿™é‡Œä¸¥è°¨ç‚¹,è¦åŠ ä¸Šåˆ¤æ–­ if (item.LNBlock) &#123; item.LNBlock(); // Blockè°ƒç”¨ &#125; //--------------------------- ç¬¨çš„æ–¹å¼äºŒ ------------------------------// // ä»£ç å¯è¯»æ€§å¾ˆå·® // if (indexPath.row == 0) &#123;// NSLog(@"ç™½å¼€æ°´ln--ç®€ä¹¦");// &#125; else if (indexPath.row == 1) &#123;// NSLog(@"ç™½å¼€æ°´ln--GitHub");// &#125; else if (indexPath.row == 2) &#123;// NSLog(@"ç™½å¼€æ°´ln--Blog");// &#125; &#125; 1234567891011121314151617181920212223242526//----------- 2.åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰,åœ¨å¦å¤–ä¸€ä¸ªç±»ä¸­è°ƒç”¨ å°å®åŠ›---------------////- (void)createItems &#123; //--------------------------- åˆ›å»ºæ¨¡å‹ ------------------------------// /** item1.LNblock = ^&#123; // Blockä¿å­˜ä»£ç  &#125;; */ LNCellItem *item1 = [LNCellItem itemWithTitle:@"ç®€ä¹¦"]; LNCellItem *item2 = [LNCellItem itemWithTitle:@"GitHub"]; LNCellItem *item3 = [LNCellItem itemWithTitle:@"Blog"]; item1.LNBlock = ^&#123; NSLog(@"ç™½å¼€æ°´ln--ç®€ä¹¦"); &#125;; item2.LNBlock = ^&#123; NSLog(@"ç™½å¼€æ°´ln--GitHub"); &#125;; item3.LNBlock = ^&#123; NSLog(@"ç™½å¼€æ°´ln--Blog"); &#125;; _items = @[item1,item2,item3];&#125; LNCellItem æ¨¡å‹ç±» 12345678910111213141516// LNCellItem.h#import &lt;Foundation/Foundation.h&gt;@interface LNCellItem : NSObject// è®¾è®¡æ¨¡å‹:æ§ä»¶éœ€è¦å±•ç¤ºä»€ä¹ˆå†…å®¹,å°±å®šä¹‰ä»€ä¹ˆå±æ€§@property (nonatomic, strong) NSString *title;// æä¾›æ„é€ æ–¹æ³•+ (instancetype)itemWithTitle:(NSString *)title;// ä¿å­˜æ¯ä¸ªcellåšçš„äº‹æƒ…@property (nonatomic, strong) void(^LNBlock)();// æç¤º:ä½ è¦å†™ä»€ä¹ˆï¼Œç¼ºä»€ä¹ˆå°±è¡¥ä»€ä¹ˆï¼›å¼€å§‹ä¸è¦æƒ³å¤ªå¤šï¼Œå°±å†™ä¸ªçº¯å‡€çš„block@end æ€»ç»“ï¼šæç¤º: ä½ è¦å†™ä»€ä¹ˆï¼Œç¼ºä»€ä¹ˆå°±è¡¥ä»€ä¹ˆï¼›å¼€å§‹ä¸è¦æƒ³å¤ªå¤šï¼Œå°±ç›´æ¥å¹²ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯å¦‚å®šä¹‰Blockè¦ä¸è¦å¸¦å‚æ•°ï¼Œä½ å¯åˆ«æ²¡æœ‰æ€è·¯å°±ç›´æ¥å¹²äº†å•Šï¼‰ã€‚ å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockä¼ å€¼ &amp; ä»£ç†ä¼ å€¼ ä¼ å€¼ç®€æ˜ä»‹ç» ä¼ å€¼: 1.åªè¦èƒ½æ‹¿åˆ°å¯¹æ–¹å°±èƒ½ä¼ å€¼ é¡ºä¼ ï¼šç»™éœ€è¦ä¼ å€¼çš„å¯¹è±¡,ç›´æ¥å®šä¹‰å±æ€§å°±èƒ½ä¼ å€¼ é€†ä¼ ï¼š2â€“&gt;ä¼ 1ï¼Œç”¨ä»£ç†ã€blockï¼Œå°±æ˜¯å¹²â€“&gt; å¼€å‘ä¸­å°±æ˜¯åˆ©ç”¨blockå»ä»£æ›¿ä»£ç†ã€‚ ç¤ºä¾‹éœ€æ±‚ï¼šç‚¹å‡»1ViewController è·³è½¬ 2ViewControllerï¼Œç‚¹è§£2ViewController ä¼ å€¼ç»™1ViewController ç¤ºä¾‹éœ€æ±‚ï¼šä»£ç†ä¼ å€¼æ€»ç»“ï¼š ä¼ å€¼ç•Œé¢éœ€è¦4ç‚¹: 1.å®šä¹‰ä»£ç†å(å…ˆå£°æ˜) 2.å®šä¹‰åè®® 3.å®šä¹‰éµå®ˆåè®®çš„ä»£ç† 4.åˆ¤æ–­æ˜¯å¦æ‰§è¡Œåè®®æ–¹æ³•ï¼ˆæ˜¯ä¼ å€¼ç»™ViewControllerï¼‰ æ¥æ”¶å€¼ç•Œé¢éœ€è¦1ç‚¹: 5.éµå®ˆåè®®ï¼Œå®ç°åè®®æ–¹æ³• 1234567891011121314151617181920212223242526272829//--------------------------- ä»£ç†ä¼ å€¼ ------------------------------////#import &lt;UIKit/UIKit.h&gt; // 1.å®šä¹‰ä»£ç†å(å…ˆå£°æ˜)@class LNModalViewController;@protocol LNModalViewControllerDelegate &lt;NSObject&gt;// 2.å®šä¹‰åè®®(æƒ³è¦ä»£ç†åšä»€ä¹ˆäº‹æƒ…)- (void)modalViewController:(LNModalViewController *)modalVc sendValue:(NSString *)value;@end@interface LNModalViewController : UIViewController// 3.å®šä¹‰éµå®ˆåè®®çš„ä»£ç†@property (nonatomic, strong) id &lt;LNModalViewControllerDelegate&gt;delegate;// LNModalViewController.m- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; // 4.åˆ¤æ–­æ˜¯å¦æ‰§è¡Œåè®®æ–¹æ³•ï¼ˆæ˜¯ä¼ å€¼ç»™ViewControllerï¼‰ if ([_delegate respondsToSelector:@selector(modalViewController:sendValue:)]) &#123; [_delegate modalViewController:self sendValue:@"ç™½å¼€æ°´ln--æˆ‘æ˜¯delegateé€†ä¼ "]; &#125; [self dismissViewControllerAnimated:YES completion:nil];&#125; ç¤ºä¾‹éœ€æ±‚ï¼šBlockä¼ å€¼ Blockåœ¨MRC &amp; ARCä¸‹çš„å†…å­˜ç®¡ç† é¢è¯•é¢˜1/2é¢è¯•é¢˜1ï¼šblockæ˜¯ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡? ç­”æ¡ˆï¼šæ˜¯æ»´è°è¯´çš„ï¼Œå’±çœ‹æƒå¨çš„ã€‚ é‡Šä¹‰ä¸ºï¼šblockæ˜¯ä¸€ä¸ªOCå¯¹è±¡ï¼Œè¿™æ„å‘³ç€å®ƒèƒ½è¢«æ·»åŠ åˆ°é›†åˆï¼Œæ¯”å¦‚NSArrayã€NSDictionary é¢è¯•é¢˜2ï¼šå¦‚ä½•åˆ¤æ–­å½“å‰æ–‡ä»¶æ˜¯ MRCï¼Œè¿˜æ˜¯ARC? 1.dealloc èƒ½å¦è°ƒç”¨superï¼Œåªæœ‰MRCæ‰èƒ½è°ƒç”¨super 2.èƒ½å¦ä½¿ç”¨retainï¼Œrelease. å¦‚æœèƒ½ç”¨å°±æ˜¯MRC Blockå†…å­˜ç®¡ç†(MRC)MRCäº†è§£å¼€å‘å¸¸è¯†ï¼š 1.MRCæ²¡æœ‰strong,weak,å±€éƒ¨å˜é‡å¯¹è±¡å°±æ˜¯ç›¸å½“äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹æ”¾åœ¨æ ˆé‡Œï¼Œä»£ç å—ç»“æŸå°±é”€æ¯ï¼‰ã€‚ 2.MRCç»™æˆå‘˜å±æ€§èµ‹å€¼,ä¸€å®šè¦ä½¿ç”¨setæ–¹æ³•,ä¸èƒ½ç›´æ¥è®¿é—®ä¸‹åˆ’çº¿æˆå‘˜å±æ€§èµ‹å€¼. æ³¨è§£2: 123456789//--------------------------- Blockå†…å­˜ç®¡ç†(MRC) ------------------------------////void(^block)() = ^&#123; NSLog(@"è°ƒç”¨block");&#125;;NSLog(@"%@",block); 2017-03-30 20:15:56.054 Blockè¯¦è§£[23533:817404] &lt;__NSGlobalBlock__: 0x102080320&gt; 123456789101112//--------------------------- Blockå†…å­˜ç®¡ç†(MRC) ------------------------------//// //static int a = 3;// é™æ€å˜é‡ __block int a = 3;// è¿˜æ˜¯å±€éƒ¨å˜é‡ void(^block)() = ^&#123; NSLog(@"è°ƒç”¨block%d",a); &#125;; NSLog(@"%@",block); 2016-03-30 20:22:12.458 Blockè¯¦è§£[23762:824109] &lt;__NSMallocBlock__: 0x60800005eff0&gt; 123456789//--------------------------- Blockå†…å­˜ç®¡ç†(MRC) ------------------------------////@property (nonatomic, retain) void(^block)();ç”¨retainæ‰“å°è¾“å‡ºï¼š2016-03-30 20:31:06.321 Blockè¯¦è§£[23953:833320] &lt;__NSMallocBlock__: 0x608000056530&gt;@property (nonatomic, copy) void(^block)();ç”¨copyæ‰“å°è¾“å‡ºï¼š2016-03-30 20:34:06.872 Blockè¯¦è§£[24033:837243] &lt;__NSGlobalBlock__: 0x10db8b320&gt; æ€»ç»“ä»¥ä¸Šä¸‰æ®µä»£ç  1.åªè¦blockæ²¡æœ‰å¼•ç”¨å¤–éƒ¨å±€éƒ¨å˜é‡,blockæ”¾åœ¨å…¨å±€åŒºã€‚ 2.åªè¦Blockå¼•ç”¨å¤–éƒ¨å±€éƒ¨å˜é‡,blockæ”¾åœ¨æ ˆé‡Œé¢ã€‚ 3.blockåªèƒ½ä½¿ç”¨copy,ä¸èƒ½ä½¿ç”¨retain. åŸå› : ä½¿ç”¨retain,blockè¿˜æ˜¯åœ¨æ ˆé‡Œé¢ï¼ˆä»£ç å—ç»“æŸå°±é”€æ¯ï¼‰ï¼Œè€Œä½¿ç”¨copyï¼Œblockå°±åœ¨å †é‡Œé¢ã€‚ Blockå†…å­˜ç®¡ç†(ARC) ARCï¼šç®¡ç†åŸåˆ™ï¼šåªè¦ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰è¢«å¼ºæŒ‡é’ˆä¿®é¥°å°±ä¼šè¢«é”€æ¯ï¼Œé»˜è®¤å±€éƒ¨å˜é‡å¯¹è±¡éƒ½æ˜¯å¼ºæŒ‡é’ˆï¼Œå­˜æ”¾åˆ°å †é‡Œé¢ã€‚ ARCï¼šç®¡ç†block 1.åªè¦blockå¼•ç”¨å¤–éƒ¨å±€éƒ¨å˜é‡ï¼Œblockæ”¾åœ¨å †é‡Œé¢ã€‚ 2.blockä½¿ç”¨strongï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨copyï¼ˆæ²¡æœ‰å¿…é¡»è¿›è¡Œcopyå†…éƒ¨å…¶å®ƒæ“ä½œï¼‰ã€‚ 3.æ€è€ƒï¼šä¸ºä»€ä¹ˆblockåœ¨å †é‡Œï¼Œä¹Ÿä¸èƒ½ç”¨weakæ¥ä¿®é¥°ï¼Ÿè§£ç­”ï¼šARCä¸‹,é»˜è®¤å±€éƒ¨å˜é‡å¯¹è±¡éƒ½æ˜¯å¼ºæŒ‡é’ˆï¼ŒblockæŒ‡é’ˆå¼ºå¼•ç”¨blockå¯¹è±¡ï¼Œä»£ç å—ç»“æŸå°±ä¼šé‡Šæ”¾ï¼Œæ‰€ä»¥éœ€è¦å¯¹blockå¯¹è±¡å†è¿›è¡Œä¸€æ¬¡å¼ºå¼•ç”¨ã€‚ä¸ºä»€ä¹ˆè¦å¯¹å±€éƒ¨å˜é‡è¿›è¡Œä¸€æ¬¡å¼ºå¼•ç”¨ï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ä»£ç å—é”€æ¯ã€‚ æ³¨è§£2ï¼š Blockå¾ªç¯å¼•ç”¨å¾ªç¯å¼•ç”¨ï¼šæˆ‘å¼•ç”¨ä½ ï¼Œä½ ä¹Ÿå¼•ç”¨ï¼Œå°±ä¼šé€ æˆå¾ªç¯å¼•ç”¨ï¼ŒåŒæ–¹éƒ½ä¸ä¼šè¢«é”€æ¯ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²é—®é¢˜ã€‚ Block å¾ªç¯å¼•ç”¨123456789101112131415//--------------------------- Blockå¾ªç¯å¼•ç”¨ ------------------------------////@property (nonatomic, strong) void(^block)(); // è¿™ç§æƒ…å†µä¸‹å›é€ æˆå¾ªç¯å¼•ç”¨ // blocké€ æˆå¾ªç¯é—®é¢˜:Blockä¼šå¯¹é‡Œé¢æ‰€æœ‰ å¼ºæŒ‡é’ˆå˜é‡(å¦‚:self) éƒ½å¼ºå¼•ç”¨ä¸€æ¬¡ _block = ^&#123; NSLog(@"%@",self); &#125;; // è§£å†³é˜²æ­¢Blocké€ æˆå¾ªç¯å¼•ç”¨é—®é¢˜,æ”¹æˆå¼±å¼•ç”¨ __weak typeof(self) weakSelf = self; _block = ^&#123; NSLog(@"%@",weakSelf); &#125;; 12345678910111213141516171819202122232425//--------------------------- Blockå¾ªç¯å¼•ç”¨è¿›é˜¶(ä¸‰æ–¹æ¡†æ¶ä¸­å­¦ä¹ ) ------------------------------////// éœ€æ±‚:Blocké‡Œé¢è¦è®¿é—®æ§åˆ¶å™¨å¯¹è±¡åšäº›äº‹æƒ…ï¼Œè¿™æ—¶å¦‚æœBlockå†…éƒ¨æœ‰å»¶è¿Ÿæ“ä½œï¼Œå¯èƒ½å°±å·²ç»é”€æ¯ï¼Œå°±ä¼šæ‹¿ä¸åˆ°æ§åˆ¶å™¨å¯¹è±¡ã€‚// è§£å†³:éœ€è¦å†å¼ºå¼•ç”¨æ¥é˜²æ­¢å¯¹è±¡çš„é”€æ¯__weak typeof(self) weakSelf = self;_block = ^&#123; __strong typeof(weakSelf) strongSelf = weakSelf; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; // è¿™é‡Œçš„block å’Œå¤–é¢çš„blockä¸æ˜¯åŒä¸€ä¸ª. NSLog(@"%@",strongSelf); &#125;);&#125;;_block();// è°ƒç”¨/** å†…éƒ¨ä»£ç å—,ä½¿ç”¨weakSelf æ‰“å°è¾“å‡º 2016-03-31 00:15:08.861 Blockè¯¦è§£[25029:875491] ModalViewControlleré”€æ¯ 2016-03-31 00:15:09.835 Blockè¯¦è§£[25029:875491] (null) å†…éƒ¨ä»£ç å—,ä½¿ç”¨strongSelf æ‰“å°è¾“å‡º 2016-03-31 00:18:47.966 Blockè¯¦è§£[25117:877961] &lt;ModalViewController: 0x7f89f0c07030&gt; 2016-03-31 00:18:47.966 Blockè¯¦è§£[25117:877961] ModalViewControlleré”€æ¯ */ é™„å›¾æ³¨è§£ï¼š Blockå˜é‡ä¼ é€’1234567891011- (void)viewDidLoad &#123; [super viewDidLoad]; int a = 3; void(^block1)() = ^&#123; NSLog(@"block1--%d",a); // aä¸º3 &#125;; a = 5;// æ”¹å˜açš„å€¼ block1(); // è°ƒç”¨&#125; 123456789101112- (void)viewDidLoad &#123; [super viewDidLoad]; __block int b = 3; void(^block2)() = ^&#123; NSLog(@"block2--%d",b); // aä¸º5 &#125;; b = 5;// æ”¹å˜açš„å€¼ block2(); // è°ƒç”¨&#125; æ€»ç»“ï¼š å¦‚æœæ˜¯å±€éƒ¨å˜é‡ï¼ŒBlockæ˜¯å€¼ä¼ é€’ï¼ˆå¤–é¢ä¿®æ”¹ä¸å½±å“é‡Œé¢ï¼‰ ã€‚ å¦‚æœæ˜¯staticé™æ€å˜é‡,intå…¨å±€å˜é‡,__blockä¿®é¥°çš„å˜é‡,blockéƒ½æ˜¯æŒ‡é’ˆä¼ é€’ï¼ˆå¤–é¢çš„ä¿®æ”¹å½±å“blocké‡Œé¢çš„å€¼ï¼‰ã€‚ å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockå½“å‚æ•°ä½¿ç”¨ 1.æ€ä¹ˆåŒºåˆ†å‚æ•°æ˜¯block,å°±çœ‹æœ‰æ²¡æœ‰^,åªè¦æœ‰^.æŠŠblockå½“åšå‚æ•° 2.æŠŠblockå½“åšå‚æ•°,å¹¶ä¸æ˜¯é©¬ä¸Šå°±è°ƒç”¨Block,ä»€ä¹ˆæ—¶å€™è°ƒç”¨,ç”±æ–¹æ³•å†…éƒ¨å†³å®š 3.ä»€ä¹ˆæ—¶å€™éœ€è¦æŠŠblockå½“åšå‚æ•°å»ä½¿ç”¨ï¼šåšçš„äº‹æƒ…ç”±å¤–ç•Œ(éæœ¬ç±»)å†³å®š,ä½†æ˜¯ä»€ä¹ˆæ—¶å€™åšç”±å†…éƒ¨å†³å®šã€‚å°±å¦‚:UIViewåŠ¨ç”» ç¤ºä¾‹éœ€æ±‚ï¼šå°è£…ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæä¾›ä¸€ä¸ªè®¡ç®—æ–¹æ³•ï¼Œæ€ä¹ˆè®¡ç®—ç”±å¤–ç•Œå†³å®šï¼Œä»€ä¹ˆæ—¶å€™è®¡ç®—ç”±å†…éƒ¨å†³å®š. 12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; // åˆ›å»ºè®¡ç®—å™¨ç®¡ç†è€… LNCacultorManager *mgr = [[LNCacultorManager alloc] init]; [mgr cacultor:^(NSInteger result)&#123; result += 5; result += 6; result *= 2; return result; &#125;]; NSLog(@"%ld",mgr.result); &#125; 1234567891011// LNCacultorManager.h/** ä¿å­˜è®¡ç®—çš„å€¼ */@property (nonatomic, assign) NSInteger result;/** è®¡ç®— */- (void)cacultor:(NSInteger(^)(NSInteger result))cacultorBlock;- (void)cacultor:(NSInteger (^)(NSInteger))cacultorBlock &#123; if (cacultorBlock) &#123; _result = cacultorBlock(_result); &#125;&#125; å¼€å‘ä½¿ç”¨åœºæ™¯ï¼šBlockå½“è¿”å›å€¼ è¿™é‡Œä½“ç°äº†ä¸€ç§æ€æƒ³ï¼šé“¾å¼ç¼–ç¨‹æ€æƒ³ï¼šæŠŠæ‰€æœ‰çš„è¯­å¥ç”¨.å·è¿æ¥èµ·æ¥, å¥½å¤„:å¯è¯»æ€§éå¸¸å¥½ã€‚ æŠŠBlockå½“è¿”å›å€¼ä½¿ç”¨ï¼Œç»å…¸æ¡†æ¶ messay ç¤ºä¾‹éœ€æ±‚ï¼šå°è£…ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæä¾›ä¸€ä¸ªåŠ å·æ–¹æ³•ã€‚ 123456- (void(^)())test &#123; return ^&#123; NSLog(@"è°ƒç”¨äº†block"); &#125;;&#125;self.test(); æ€»ç»“ï¼šself.test(); å‘ä¸¤æ­¥ï¼š1ã€self.testæ˜¯è°ƒç”¨getæ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªblockï¼Œ2ã€self.test()è°ƒç”¨blockã€‚ 123456789101112131415161718- (void)viewDidLoad &#123; [super viewDidLoad]; CalculatorManager *mgr = [[CalculatorManager alloc] init]; /** æ–¹å¼ä¸‰ï¼š+ 5ï¼ˆæ¬£èµï¼‰ mgr.add(5).add(5).add(5).add(5).add(5).add(5) æ–¹å¼äºŒï¼š+ 5ï¼ˆå¯è¯»æ€§å·®ï¼‰ [[[[[mgr add:5] add:5] add:5] add:6] add:7]; æ–¹å¼ä¸€ï¼š+ 5ï¼ˆå¯è¯»æ€§å·®ï¼‰ [mgr add:5]; [mgr add:5]; [mgr add:5]; */ mgr.add(5).add(5).add(5).add(5).add(5); NSLog(@"%d",mgr.result);&#125; æ€»ç»“ï¼šmgr.addè°ƒç”¨getæ–¹æ³•è¿”å›ä¸€ä¸ªblockï¼Œmgr.add(5)è°ƒç”¨çš„blockæ˜¯å‚æ•°ä¸º5ï¼Œmgr.add(5).add(5)éœ€è¦è¿”å›mgrå¯¹è±¡æ‰å¯ä»¥ä¸€ç›´.addè°ƒç”¨ä¸‹å»ã€‚ blockçš„åˆ†ç±»ï¼ˆæ ˆã€å †ã€å…¨å±€åŒºï¼‰ block å—çš„å­˜å‚¨ä½ç½®ï¼ˆblockå…¥å£çš„åœ°å€ï¼‰å¯èƒ½å­˜æ”¾åœ¨3ä¸ªåœ°æ–¹ï¼šä»£ç åŒºï¼ˆå…¨å±€åŒºï¼‰ã€å †åŒºã€æ ˆåŒºï¼ˆARCæƒ…å†µä¸‹å›è‡ªåŠ¨æ‹·è´åˆ°å †åŒºã€å› æ­¤ARCä¸‹åªæœ‰ä¸¤ä¸ªåœ°æ–¹ï¼šä»£ç åŒºå’Œå †åŒºï¼‰ã€‚ NSStackBlockï¼šæ ˆ ç‰¹ç‚¹ï¼šç”Ÿå‘½å‘¨æœŸç”±ç³»ç»Ÿæ§åˆ¶ï¼Œå‡½æ•°è¿”å›å³é”€æ¯ç”¨åˆ°å±€éƒ¨å˜é‡ã€æˆå‘˜å±æ€§\å˜é‡ï¼Œä¸”æ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨çš„blockéƒ½æ˜¯æ ˆblockã€‚ NSMallocBlockï¼šå † ç‰¹ç‚¹ï¼šæ²¡æœ‰å¼ºæŒ‡é’ˆå¼•ç”¨å³é”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸç”±ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†æ ˆblockå¦‚æœæœ‰å¼ºæŒ‡é’ˆå¼•ç”¨æˆ–copyä¿®é¥°çš„æˆå‘˜å±æ€§å¼•ç”¨å°±ä¼šè¢«æ‹·è´åˆ°å †ä¸­ï¼Œå˜æˆå †blockã€‚ NSGlobalBlockï¼šå…¨å±€åŒºç‰¹ç‚¹ï¼šç”Ÿå‘½æœŸé•¿ï¼ˆåº”ç”¨ç¨‹åºåœ¨å®ƒå°±åœ¨ï¼‰æ²¡æœ‰ç”¨åˆ°å¤–ç•Œå˜é‡ï¼Œæˆ–è€…åªç”¨åˆ°å…¨å±€å˜é‡ã€é™æ€(static)å˜é‡çš„blockå°±æ˜¯å…¨å±€blockã€‚ Blockåº•å±‚å®ç° è¿™é‡Œå‚è€ƒäº† iOSéŸ³è§†é¢‘ blockæ˜¯ä¸€ä¸ªæŒ‡é’ˆç»“æ„ä½“ï¼Œåœ¨ç»ˆç«¯ä¸‹ä½¿ç”¨LLVMç¼–è¯‘å™¨çš„clangå‘½ä»¤å¯å°†å«æœ‰Blockçš„Objective-Cä»£ç è½¬æ¢æˆC++çš„æºä»£ç ï¼Œä»¥æ¢æŸ¥å…¶å…·ä½“å®ç°æ–¹å¼ï¼š1clang -rewrite-objc æºç æ–‡ä»¶å åˆ›å»ºä¸€ä¸ªOS X å·¥ç¨‹ï¼Œå†™ä¸€ä¸ªæœ€ç®€å•çš„block 1234567891011#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; void (^myblock)() = ^() &#123; NSLog(@"hello block"); &#125;; myblock(); &#125; return 0;&#125; åˆ©ç”¨ç»ˆç«¯ç¼–è¯‘ç”ŸæˆC++ä»£ç ï¼šclang -rewrite-objc main.m å‡ ä¸ªé‡è¦çš„ç»“æ„ä½“å’Œå‡½æ•°ç®€ä»‹ï¼š __block_implï¼šè¿™æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œä¹Ÿæ˜¯Cé¢å‘å¯¹è±¡çš„ä½“ç°ï¼Œå¯ä»¥ç†è§£ä¸ºblockçš„åŸºç±»; __main_block_impl_0: å¯ä»¥ç†è§£ä¸ºblockå˜é‡; __main_block_func_0: å¯ä»¥ç†è§£ä¸ºåŒ¿åå‡½æ•°ï¼› __main_block_desc_0: blockçš„æè¿°,Block_size; æ³¨æ„ç‚¹ï¼šblockå®¹æ˜“é€ æˆå¾ªç¯å¼•ç”¨ï¼Œåœ¨blocké‡Œé¢å¦‚æœä½¿ç”¨äº†selfï¼Œç„¶åå½¢æˆå¼ºå¼•ç”¨æ—¶ï¼Œéœ€è¦æ‰“æ–­å¾ªç¯å¼•ç”¨ï¼›åœ¨MRCä¸‹ç”¨_blockï¼Œåœ¨ARCä¸‹ä½¿ç”¨__weak; Blockæ•ˆæœå›¾ é™„ä¸Šæ€»ç»“å†™çš„å°æ · Demoï¼Œé‡è¦çš„éƒ¨åˆ†ä»£ç ä¸­éƒ½æœ‰ç›¸åº”çš„æ³¨è§£å’Œæ–‡å­—æ‰“å°ï¼Œè¿è¡Œç¨‹åºå¯ä»¥å¾ˆç›´è§‚çš„è¡¨ç°ï¼Œå¯å¦ç‚¹ä¸ª Star æœŸå¾… å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSÂ·å®˜æ–¹è¯‘æ–‡ & æºç æ³¨è§£]]></title>
    <url>%2FAppleTranslation%2FAppleGitHub.html</url>
    <content type="text"><![CDATA[å¯¹ä½ æœ‰æ–°æ€æƒ³ æˆ–æ˜¯ ä¹ æƒ¯ ï¼ ä»Šæ—¥æ›´æ–°ã€ä»Šæ—¥æ›´æ–°ã€ä»Šæ—¥æ›´æ–° Reading the best source||system files, Excellent design ideas are timeless, Give us a lot of reference and enlightenment to coding in the future, I enjoy sharing @ç å‘˜ç™½å¼€æ°´ln ã€‚ é˜…è¯»æºç  || ç³»ç»Ÿæ–‡ä»¶ï¼Œä¸ä»…èƒ½ä½¿æˆ‘ä»¬äº†è§£ä½œè€…çš„åŠŸèƒ½å®ç°æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿ç”¨å…¶åŠŸèƒ½ï¼Œå¿«é€Ÿçš„fixä½¿ç”¨ä¸­é‡åˆ°çš„bugï¼Œæ›´é‡è¦çš„æ˜¯åœ¨é˜…è¯»ä¼˜ç§€æºç æ—¶ä½“ä¼šä½œè€…çš„è®¾è®¡æ€æƒ³å’Œæ¶æ„è®¾è®¡ï¼Œå…·ä½“çš„æŠ€æœ¯å¾ˆå¿«å°±ä¼šè¿‡æ—¶ï¼Œä¼˜ç§€çš„è®¾è®¡æ€æƒ³å´ä¼šå†ä¹…å¼¥æ–°ï¼Œç»™æˆ‘ä»¬ä»Šåç¼–ç ä»¥å¾ˆå¤§çš„å€Ÿé‰´å’Œå¯è¿ªã€‚å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ï¼ å‘ä¼˜ç§€çš„åˆ†äº«è€…è‡´æ•¬ ï¼Two of my idea @ç å‘˜ç™½å¼€æ°´ln ã€‚ ã€@ç å‘˜çœŸçˆ± : çœŸçš„ä¸ç‚¹è¿›å»é˜…è¯»ä¸€ä¸‹ â“ã€‘ã€è¯‘æ–‡ &amp; æºç ã€‘ ã€å·¥å…·ç±»ã€‘ Content progresséå®˜æ–¹ &amp; éå¤§ç‰› &amp; éç¬¦åˆ â€”â€”&gt; åªæ˜¯ä¸€å¸®æœ‰æ€æƒ³çš„ä¼ç çŒ¿ â€”â€”&gt; ä¸å‡†ç¡® &amp; æ–°æ€æƒ³ &amp; æ§½æ§½ç‚¹ â€”â€”&gt; (å‚è€ƒ)æ¬¢è¿ä½ çš„æ§½ç‚¹ || è¡¥å…… ï¼ã€æ‹›å‹Ÿã€‘ ä¸ç®¡è°çš„åšå®¢ä¸Šé¢å†™çš„æ–‡ç« (ä¹ŸåŒ…æ‹¬è‡ªå·±)ï¼Œé˜…è¯»çš„ä½ è¦æ•¢äºå»éªŒè¯ï¼Œåœæ­¢æ— æ„ä¹‰çš„ â¹copy pasteã€‚ å·¥å…·ï£¿æ’ä»¶å®‰è£…+é—®é¢˜è§£å†³+æ´»ç”¨ iOS æºä»£ç ç®¡ç†ã€ŒSVN &amp; Gitã€ç»­æ›´ã€‚ iOS ç®¡ç†åº“å·¥å…·CocoaPodsã€Œå®‰è£…+é—®é¢˜è§£å†³+æ´»ç”¨ã€ç»­æ›´ã€‚ Markdownâ€”å†™ä½œä¾¿æ·é«˜æ•ˆã€‚ Mac&amp;Xcodeã€Œå®ç”¨å¿«æ·é”®ã€ç»­æ›´ã€‚ è›‹ç–¼ä¸€åˆ»ï¼šå¼€å‘ç¥æ³¨é‡Šå¤§å…¨ iOS ä¼ç çŒ¿çœŸçˆ±â€”ã€Œå·æ‡’ || æ•ˆç‡ å·¥å…·ç±»ã€ iOS ä¼ç çŒ¿è‡ªæ£€â€”ã€ŒMasonryçº¦æŸã€ æ„Ÿæ‚ŸèŒåœº å­¦ä¹ æ•´ç† æ—¶é—´&amp;çŸ¥è¯† ç®¡ç†ã€‚ è€å¸æœºå¸¦ä½ å­¦ä¹ åƒä»½æŠ€æœ¯ç®€å†çš„ç§˜ç±ã€æ›´æ–¹ä¾¿çš„é˜…è¯»è§†è§’ã€‘ã€‚ å¼€æºæŠ€æœ¯å˜‰å¹´åã€Œå¤œèŠã€ç¤¾åŒºï¼Œé‚€ä½ åŠ å…¥ HexoÂ·åšå®¢æ­å»º å­¦ä¹ æ•´ç† Hexo(Pages)â€”åšå®¢æ­å»ºåŒæ­¥GitHub&amp;Coding GitHubPages + Hexoâ€”è¯¦è§£åšå®¢æ­å»ºã€‚ Hexoæ–‡ç« ç®€å•åŠ å¯†è®¿é—® ç å‘˜ç†ŸçŸ¥ runtime-runloop iOSæ¨¡å¼è¯¦è§£â€”ã€Œruntimeé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± äº† ^_^. iOS æ¨¡å¼è¯¦è§£â€”ã€ŒRunloopé¢è¯•ã€å·¥ä½œã€çœ‹æˆ‘å°± ğŸ’ äº† ^_^. iOSæ¨¡å—è¯¦è§£ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼Œæ›´å¤šæ–‡ç« è¯·è®¢é˜…åšå®¢Rssè·å–ï¼‰ iOS æ¨¡å¼è¯¦è§£â€”ã€ŒKVCç¼–ç  &amp; KVOç›‘å¬ã€ iOS å¤šçº¿ç¨‹æ¨¡å—åˆ†è§£â€”ã€ŒGCDä¸­æ¢è°ƒåº¦å™¨ã€ iOS ç½‘ç»œè¯·æ±‚â€”ã€ŒNSURLSessionä¼šè¯ã€ iOS æ•°æ®å®‰å…¨â€”ã€ŒåŠ å¯†è§£å¯†ã€ //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Appleå®˜æ–¹è¯‘æ–‡ å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€ä» NSURLConnection åˆ° NSURLSessionã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ https://www.objc.io/issues/5-ios7/from-nsurlconnection-to-nsurlsession/ã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/ConnectionToSession.html ã€NSURLSessionè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/foundation/urlsession#//apple_ref/occ/clm/NSURLSession/sharedSessionã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/NSURLSessionApple.html ã€UIWebViewè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uiwebviewã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIWebViewApple.html ã€UIBezierPathè¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uibezierpath?language=objcã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIBezierPathApple.html ã€UIView API å®˜æ–¹æ–‡æ¡£è¯‘æ–‡ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/uikit/uiview?language=objcã€åšå®¢è¯‘æ–‡ã€‘https://githubidea.github.io/AppleTranslation/UIViewApple.html ã€iOS RunLoop ç¼–ç¨‹æ‰‹å†Œ ï¼ˆè¯‘ï¼‰ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/reference/foundation/runloopã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/4c38d16a29f1 ã€Podfileè¯­æ³•å‚è€ƒï¼ˆè¯‘ï¼‰ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://guides.cocoapods.org/syntax/podfile.htmlã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/8af475c4f717 ã€iOSè‡ªåŠ¨å¸ƒå±€æ¡†æ¶-Masonryè¯¦è§£ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/ea74b230c70d ã€OC_runtimeè¿è¡Œæ—¶å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008048ã€åšå®¢è¯‘æ–‡ã€‘http://blog.csdn.net/liangliang103377/article/details/39007683 ã€è‹¹æœæ–‡æ¡£ç¿»è¯‘ iOS10 NSAppTransportSecurityã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW34ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/1ec3fa1ec00f ã€iOS 9è®¾è®¡è§„èŒƒ ä¸­æ–‡ç‰ˆ å®Œæ•´ç‰ˆã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.jianshu.com/p/fbdd713eb2ce ã€iOS 10è®¾è®¡è§„èŒƒç¬”è®°ä¸æ•´ç†ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://www.pmcaff.com/article/index/514586365192320?from=label&amp;pmc_param[label_name]=å‘ç° ã€Stack Overflow 2017 å¼€å‘è€…è°ƒæŸ¥æŠ¥å‘Šã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘https://insights.stackoverflow.com/survey/2017#technology-most-loved-dreaded-and-wanted-languagesã€åšå®¢è¯‘æ–‡ã€‘https://www.oschina.net/news/83164/stack-overflow-developer-survey-results-2017 ã€Swift 4 JSON è§£ææŒ‡å—ã€‘âœ”ï¸ã€å®˜æ–¹æ–‡æ¡£ã€‘ã€åšå®¢è¯‘æ–‡ã€‘http://bignerdcoding.com/archives/37.html //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€ä¸‰æ–¹æ¡†æ¶ å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€AFNetworkingï¼ˆv3.0+ï¼‰æ¡†æ¶ç»“æ„ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/AFNetworking/AFNetworkingã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/AFNLibraryStructure.html ã€AFNetworkingï¼ˆv3.0+ï¼‰å†…éƒ¨é€»è¾‘å¤„ç†è¿‡ç¨‹ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/AFNetworking/AFNetworkingã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/AFNLibraryProcessingLogic.html ã€SDWebImageæ¡†æ¶&amp;æºç å­¦ä¹ æ€»ç»“ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/rs/SDWebImageã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/SDLibrary.htmlã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/SDSourceCode1.html ã€MJExtensionæ¡†æ¶å­¦ä¹ æ€»ç»“ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/CoderMJLee/MJExtensionã€åšå®¢æ³¨è§£ã€‘https://githubidea.github.io/SourceAnnotations/MJExtensionLibrary.html ã€VVeboTableViewæºç è§£æã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/johnil/VVeboTableViewDemoã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/78027a3a2c41 ã€MJRefreshè§£æä¸è¯¦ç»†ä½¿ç”¨æŒ‡å¯¼ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/CoderMJLee/MJRefreshã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/4ea427bab0afã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/437095c88717 ã€iOSå³æ—¶é€šè®¯è¿›é˜¶ - CocoaAsyncSocketæºç è§£æ(Connectç¯‡)ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/0a11b2d0f4ae ã€Masonry æºç è§£æã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘https://github.com/SnapKit/Masonryã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/3fce11e370b1 ã€åŸºäºAFNetworking3.1çš„äºŒæ¬¡å°è£…å’Œæ‹“å±•ã€‘âœ”ï¸ã€ä¸‰æ–¹æ¡†æ¶ã€‘ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/d0751b9a8d65ã€åšå®¢æ³¨è§£ã€‘http://www.jianshu.com/p/cca7656ac41e //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Objective C-SourceAnnotationã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // ã€AFNetworking-3.1.0ã€‘âœ”ï¸ ç½‘ç»œè¯·æ±‚; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/AFNetworking/AFNetworkingã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€SDWebImage-3.7.5ã€‘âœ”ï¸ å›¾ç‰‡ä¸‹è½½; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/rs/SDWebImageã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MBProgressHUD-ã€‘âœ”ï¸ è¿›åº¦æç¤º; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/rs/SDWebImageã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MJRefresh-3.1.12ã€‘âœ”ï¸ åˆ·æ–°; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/CoderMJLee/MJRefreshã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€MJExtension-3.0.13ã€‘âœ”ï¸ å­—å…¸è½¬æ¨¡å‹; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/CoderMJLee/MJExtensionã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + ã€SVProgressHUD-2.1.2ã€‘âœ”ï¸ è¿›åº¦æç¤º; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/SVProgressHUD/SVProgressHUDã€æºç æ³¨è§£ã€‘å¾…æ³¨è§£æŒç»­ +ã€å·¥å…·ç±»ã€‘å¾…å·¥å…·ç±»æŒç»­ + //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€Swift-SourceAnnotationã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//// ã€SwiftyJSON-3.1.4ã€‘âœ”ï¸ Swiftç•ŒJSONè§£æä¹‹ç‹; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/SwiftyJSON/SwiftyJSONã€æºç æ³¨è§£ã€‘å¾… +ã€å·¥å…·ç±»ã€‘å¾… + ã€DZNEmptyDataSet-1.8.1ã€‘âœ”ï¸ é¿å…ç©ºç™½UITableView; åº“åŸåœ°å€: å‘ä¼˜ç§€çš„å¼€æºè€…è‡´æ•¬ ! https://github.com/dzenbot/DZNEmptyDataSetã€æºç æ³¨è§£ã€‘å¾… +ã€å·¥å…·ç±»ã€‘å¾… + //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€å­¦ä¹ èµ„æº å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // â€œæ‘˜å½•äºâ€: https://github.com/zhouhuanqiang/LearningIOS åœ°å€ ç®€ä»‹ objcä¸­å›½ ä¸ºä¸­å›½ Objective-C ç¤¾åŒºå¸¦æ¥æœ€ä½³å®è·µå’Œå…ˆè¿›æŠ€æœ¯ NSHipsterä¸­æ–‡ç‰ˆ NSHipster å…³æ³¨è¢«å¿½ç•¥çš„ Objective-Cã€Swift å’Œ Cocoa ç‰¹æ€§ã€‚æ¯å‘¨æ›´æ–°ã€‚ iOS Dev Weekly å¦‚æœä½ æ˜¯è€æ‰‹ç²¾é€šè‹±æ–‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘¨åˆŠæ˜¯éå¸¸å€¼å¾—æ¨èè®¢é˜…çš„ï¼Œè¯¥å‘¨åˆŠæä¾›è¡Œä¸šæ–°é—»ã€æœ€æ–°å¼€å‘åŠ¨æ€ã€å¼€å‘å·¥å…·ã€ä»£ç åˆ†äº«ã€UIè®¾è®¡ã€è®¾è®¡å¸ˆæ‹›è˜ç­‰ä¸°å¯Œçš„èµ„æºã€‚ Shinobicontrols The latest technical blog posts iOS Developer Tips Code, tips and tricks for iOS developers Raywenderlich å›½å¤–iOSè§†é¢‘æ•™ç¨‹ç½‘ç«™ trip-to-iOS 6000å¤šä¸ªstarçš„iOSå­¦ä¹ èµ„æ–™æ•´ç† SwiftGuide è¿™ä»½æŒ‡å—æ±‡é›†äº†Swiftè¯­è¨€ä¸»æµå­¦ä¹ èµ„æºï¼Œæ¥è¿‘1Wçš„star TimLiu-iOS 4000å¤šä¸ªstarï¼ŒiOSã€macå¼€æºé¡¹ç›®åŠåº“ skill-map ITæŠ€æœ¯é¢†åŸŸï¼ˆäº‘è®¡ç®—ï¼Œå¤§æ•°æ®ï¼Œè¿ç»´ï¼Œå®‰å…¨ï¼Œå¼€å‘è¯­è¨€ï¼Œæ™ºèƒ½ç¡¬ä»¶ç­‰ï¼‰åŠäº’è”ç½‘äº§å“ã€è¿è¥ç­‰é¢†åŸŸå­¦ä¹ æŠ€èƒ½å›¾è°± å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2016 å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2016PPTä¸‹è½½åˆé›† atswift-2016-resources 2016ä¸­å›½Swiftå¼€å‘è€…å¤§ä¼šæºæ–‡ä»¶ï¼ŒåŒ…æ‹¬keynote, pdf å’Œæºå·¥ç¨‹æ–‡ä»¶ å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2017 å…¨çƒç§»åŠ¨æŠ€æœ¯å¤§ä¼š2017PPTä¸‹è½½åˆé›† //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€å¼€æºé¡¹ç›®æºç  å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//// åœ°å€ ç®€ä»‹ iOS-Source-Code-Analyze æ”¶é›†äº†ä¼˜ç§€çš„iOSå¼€æºæ¡†æ¶æºä»£ç è§£ææ–‡ç« ï¼Œå¼ºçƒˆæ¨è Yep ç¤¾äº¤IMè½¯ä»¶YEPï¼Œstar5000+ TeamTalk è˜‘è‡è¡—å¼€æºIMï¼Œstar4500+ MessageDisplayKit ç±»ä¼¼å¾®ä¿¡çš„IMappï¼Œå¯å‘é€å›¾ç‰‡ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ï¼Œæ–‡å­—ï¼Œä½ç½®ä¿¡æ¯ç­‰ï¼Œstar3800+ ä»¿ç½‘æ˜“æ–°é—» star3000+ é«˜ä»¿åŸè§… star1800+ YoCelsius å¤©æ°”é¢„æŠ¥çš„åº”ç”¨ï¼ŒåŠ¨ç”»å’Œäº¤äº’éå¸¸ä¸°å¯Œï¼Œstar2300+ Coding-iOS Coding iOS å®¢æˆ·ç«¯æºä»£ç , star2600+ v2ex v2ex.comå®¢æˆ·ç«¯ï¼Œstar1700+ é«˜ä»¿å¾®ä¿¡ star2000+ é«˜ä»¿ç¾å›¢ star1500+ é«˜ä»¿å–µæ’­APP è§†é¢‘ç›´æ’­é¡¹ç›®ï¼Œstar2000+ é«˜ä»¿Bilibiliå®¢æˆ·ç«¯ star2000+ é«˜ä»¿æœ€ç¾åº”ç”¨ swift, star800+ ä¸€ä¸ª ã€Šä¸€ä¸ªã€‹ iOS å®¢æˆ·ç«¯, star600+ CocoaChina+ å¼€æºçš„ç¬¬ä¸‰æ–¹CocoaChinaç§»åŠ¨ç«¯, star600+ é«˜ä»¿ç™¾åº¦ç³¯ç±³ star500+ Four ä¸€ä¸ªä¸Šçº¿çš„ä»»åŠ¡è®°å½•appï¼Œstar300+ PHPHubå®¢æˆ·ç«¯ star1100+ é«˜ä»¿ç¾å›¢1 star500+ é«˜ä»¿ç¾å›¢2 star400+ é«˜ä»¿åŸè§… star1800+ SegmentFaultå®¢æˆ·ç«¯ star1200+ ç½‘æ˜“æ–°é—» star3000+ //â€”â€”â€”â€”â€”â€”â€”â€”â€” ã€ä¼˜ç§€Blog å­¦ä¹ æ•´ç†ã€‘ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”// // â€œåŒæ­¥äºâ€: https://github.com/tangqiaoboy/iOSBlogCN åšå®¢åœ°å€ RSSåœ°å€ Plain boiled water æ— è€»çš„å†™ä¸Š http://www.jianshu.com/u/fd745d76c816 OneVâ€™s Den http://onevcat.com/atom.xml ä¸€åªé­”æ³•å¸ˆçš„å·¥åŠ http://blog.ibireme.com/feed/ ç ´èˆ¹ä¹‹å®¶ http://beyondvincent.com/atom.xml NSHipster http://nshipster.cn/feed.xml Limboy æ— ç½‘ä¸å‰© http://feeds.feedburner.com/lzyy å”å·§çš„æŠ€æœ¯åšå®¢ http://blog.devtang.com/atom.xml Tedâ€™s Homepage http://wufawei.com/feed sunnyxxçš„æŠ€æœ¯åšå®¢ http://blog.sunnyxx.com/atom.xml Kevin Blog http://zhowkev.in/rss é˜¿æ¯›çš„è›‹ç–¼åœ° http://www.xiangwangfeng.com/atom.xml äºšåº†çš„ Blog http://billwang1990.github.io/atom.xml Nonomori http://nonomori.farbox.com/feed Wonderffeeâ€™s Blog http://wonderffee.github.io/atom.xml Iâ€™m TualatriX http://imtx.me/feed/latest/ Cocoabit http://blog.cocoabit.com/rss/ ä¸ä¼šå¼€æœºçš„ç”·å­© http://studentdeng.github.io/atom.xml Nico http://blog.inico.me/atom.xml é˜¿å³°çš„æŠ€æœ¯çªçª http://hufeng825.github.io/atom.xml answer_huang http://answerhuang.duapp.com/index.php/feed/ webfrogs http://blog.nswebfrog.com/feed/ ä»£ç æ‰‹å·¥è‰ºäºº http://joeyio.com/atom.xml Lancyâ€™s Blog http://gracelancy.com/atom.xml Iâ€™m Allen http://www.imallen.com/atom.xml Travisâ€™ Blog http://imi.im/feed ç‹ä¸­å‘¨çš„æŠ€æœ¯åšå®¢ http://wangzz.github.io/atom.xml å…‹ä¼Ÿçš„åšå®¢ http://feed.cnblogs.com/blog/u/23857/rss æ‘‡æ»šè¯—äºº http://feed.cnblogs.com/blog/u/35410/rss Lukeâ€™s Homepage http://geeklu.com/feed/ è§å®¸å®‡ http://iiiyu.com/atom.xml Yuanåšå®¢ http://www.heyuan110.com/?feed=rss2 KooFrankâ€™s Blog http://koofrank.com/rss hello it works http://helloitworks.com/feed ç å†œäººç”Ÿ http://msching.github.io/atom.xml ç‰ä»¤å¤©ä¸‹çš„Blog http://yulingtianxia.com/atom.xml ä¸æèœ‚çªçš„ç†Š http://www.hotobear.com/?feed=rss2 çŒ«Â·ä»æ³¢åˆ‡ https://andelf.github.io/atom.xml ç…²ä»”é¥­ http://ivoryxiong.org/feed.xml é‡Œè„Šä¸²çš„å¼€å‘éšç¬” http://adad184.com/atom.xml Whyâ€™s blog - æ±ªæµ·çš„å®éªŒå®¤ http://blog.callmewhy.com/atom.xml åœŸåœŸå“¥çš„æŠ€æœ¯Blog http://tutuge.me/atom.xml åºæµ·ç¤çš„ä¸ªäººç©ºé—´ http://www.olinone.com/?feed=rss2 Casa Taloyum http://casatwy.com/feeds/all.atom.xml Kenshin Cuiâ€™s Blog http://www.cnblogs.com/kenshincui/rss æŠ€æœ¯å“¥çš„åšå®¢ http://suenblog.duapp.com/rss/ è€è°­ç¬”è®° http://www.tanhao.me/atom.xml coderyi http://www.coderyi.com/feed é›·çº¯é”‹çš„æŠ€æœ¯åšå®¢ http://blog.leichunfeng.com/atom.xml å‘æ™¨å®‡çš„æŠ€æœ¯åšå®¢ http://iosxxx.com/atom.xml å­¦ä¹ ä¸€é—¨ä¸‰æ–¹æ¡†æ¶åº“çš„æ—¶ä¾¯ï¼Œéœ€è¦è¿½æ ¹æº¯æºï¼Œæ‰å¥½æçº²åˆ‡é¢†ï¼Œå³èƒ½æŒæ¡å…¨å±€ï¼Œåˆèƒ½æ·±å…¥ç»†èŠ‚ã€‚ä»æºç å‡ºå‘ï¼Œç»“åˆäº‹ä»¶ä¸šåŠ¡é€»è¾‘å¤„ç†çš„æœºåˆ¶ï¼Œå†æ·±å…¥åˆ°å„ä¸ªåŠŸèƒ½ç‚¹æˆ–å†æ¬¡å°è£…ï¼Œå°±ä¼šèƒ¸æœ‰æˆç«¹è€Œä¸ä¹±é˜µè„šäº†ã€‚ Reading å¦‚æœåœ¨é˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ° error || new ideasï¼Œå¸Œæœ›ä½ èƒ½ messages æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ”¹æ­£è°¢è°¢ã€‚ å¯¹è¯¥æ¨¡å—æˆ‘ä¼š ä¸å®šæ—¶ã€æŒç»­ã€æ›´æ–°ä¸€äº› å­¦ä¹ å¿ƒå¾—ä¸æ–‡ç« ã€å®ç”¨æ‰æ˜¯ç¡¬é“ç† ^_^. ã€‚ ç‚¹å‡»å³ä¸Šè§’çš„ å–œæ¬¢ å’Œ è®¢é˜…Rss æŒ‰é’®ï¼Œå¯ä»¥æ”¶è—æœ¬ä»“åº“ï¼Œå¹¶åœ¨ Demo æ›´æ–°æ—¶æ”¶åˆ°é‚®ä»¶é€šçŸ¥ã€‚ æœªå®Œ å¾…ç»­ æ¯å‘¨ æ›´æ–° About meã€Plain boiled water ln - Code Memberã€‘]]></content>
      <categories>
        <category>æºç </category>
      </categories>
      <tags>
        <tag>è¯‘æ–‡</tag>
        <tag>æºç </tag>
      </tags>
  </entry>
</search>